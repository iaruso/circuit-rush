var hC=Object.defineProperty;var IC=(et,_,_e)=>_ in et?hC(et,_,{enumerable:!0,configurable:!0,writable:!0,value:_e}):et[_]=_e;var uu=(et,_,_e)=>(IC(et,typeof _!="symbol"?_+"":_,_e),_e);(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const nt of document.querySelectorAll('link[rel="modulepreload"]'))tt(nt);new MutationObserver(nt=>{for(const it of nt)if(it.type==="childList")for(const rt of it.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&tt(rt)}).observe(document,{childList:!0,subtree:!0});function _e(nt){const it={};return nt.integrity&&(it.integrity=nt.integrity),nt.referrerPolicy&&(it.referrerPolicy=nt.referrerPolicy),nt.crossOrigin==="use-credentials"?it.credentials="include":nt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function tt(nt){if(nt.ep)return;nt.ep=!0;const it=_e(nt);fetch(nt.href,it)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$6=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$4=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(et){return et===null||typeof et!="object"?null:(et=z$2&&et[z$2]||et["@@iterator"],typeof et=="function"?et:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(et,_,_e){this.props=et,this.context=_,this.refs=D$2,this.updater=_e||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(et,_){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,_,"setState")};E$2.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(et,_,_e){this.props=et,this.context=_,this.refs=D$2,this.updater=_e||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(et,_,_e){var tt,nt={},it=null,rt=null;if(_!=null)for(tt in _.ref!==void 0&&(rt=_.ref),_.key!==void 0&&(it=""+_.key),_)J$1.call(_,tt)&&!L$2.hasOwnProperty(tt)&&(nt[tt]=_[tt]);var st=arguments.length-2;if(st===1)nt.children=_e;else if(1<st){for(var ot=Array(st),at=0;at<st;at++)ot[at]=arguments[at+2];nt.children=ot}if(et&&et.defaultProps)for(tt in st=et.defaultProps,st)nt[tt]===void 0&&(nt[tt]=st[tt]);return{$$typeof:l$4,type:et,key:it,ref:rt,props:nt,_owner:K$2.current}}function N$2(et,_){return{$$typeof:l$4,type:et.type,key:_,ref:et.ref,props:et.props,_owner:et._owner}}function O$2(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$4}function escape$1(et){var _={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function(_e){return _[_e]})}var P$2=/\/+/g;function Q$1(et,_){return typeof et=="object"&&et!==null&&et.key!=null?escape$1(""+et.key):_.toString(36)}function R$3(et,_,_e,tt,nt){var it=typeof et;(it==="undefined"||it==="boolean")&&(et=null);var rt=!1;if(et===null)rt=!0;else switch(it){case"string":case"number":rt=!0;break;case"object":switch(et.$$typeof){case l$4:case n$5:rt=!0}}if(rt)return rt=et,nt=nt(rt),et=tt===""?"."+Q$1(rt,0):tt,I$2(nt)?(_e="",et!=null&&(_e=et.replace(P$2,"$&/")+"/"),R$3(nt,_,_e,"",function(at){return at})):nt!=null&&(O$2(nt)&&(nt=N$2(nt,_e+(!nt.key||rt&&rt.key===nt.key?"":(""+nt.key).replace(P$2,"$&/")+"/")+et)),_.push(nt)),1;if(rt=0,tt=tt===""?".":tt+":",I$2(et))for(var st=0;st<et.length;st++){it=et[st];var ot=tt+Q$1(it,st);rt+=R$3(it,_,_e,ot,nt)}else if(ot=A$2(et),typeof ot=="function")for(et=ot.call(et),st=0;!(it=et.next()).done;)it=it.value,ot=tt+Q$1(it,st++),rt+=R$3(it,_,_e,ot,nt);else if(it==="object")throw _=String(et),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return rt}function S$2(et,_,_e){if(et==null)return et;var tt=[],nt=0;return R$3(et,tt,"","",function(it){return _.call(_e,it,nt++)}),tt}function T$2(et){if(et._status===-1){var _=et._result;_=_(),_.then(function(_e){(et._status===0||et._status===-1)&&(et._status=1,et._result=_e)},function(_e){(et._status===0||et._status===-1)&&(et._status=2,et._result=_e)}),et._status===-1&&(et._status=0,et._result=_)}if(et._status===1)return et._result.default;throw et._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(et,_,_e){S$2(et,function(){_.apply(this,arguments)},_e)},count:function(et){var _=0;return S$2(et,function(){_++}),_},toArray:function(et){return S$2(et,function(_){return _})||[]},only:function(et){if(!O$2(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$2;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$6;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(et,_,_e){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var tt=C$2({},et.props),nt=et.key,it=et.ref,rt=et._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,rt=K$2.current),_.key!==void 0&&(nt=""+_.key),et.type&&et.type.defaultProps)var st=et.type.defaultProps;for(ot in _)J$1.call(_,ot)&&!L$2.hasOwnProperty(ot)&&(tt[ot]=_[ot]===void 0&&st!==void 0?st[ot]:_[ot])}var ot=arguments.length-2;if(ot===1)tt.children=_e;else if(1<ot){st=Array(ot);for(var at=0;at<ot;at++)st[at]=arguments[at+2];tt.children=st}return{$$typeof:l$4,type:et.type,key:nt,ref:it,props:tt,_owner:rt}};react_production_min.createContext=function(et){return et={$$typeof:u$3,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$4,_context:et},et.Consumer=et};react_production_min.createElement=M$2;react_production_min.createFactory=function(et){var _=M$2.bind(null,et);return _.type=et,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$5,render:et}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(et){return{$$typeof:y$1,_payload:{_status:-1,_result:et},_init:T$2}};react_production_min.memo=function(et,_){return{$$typeof:x$1,type:et,compare:_===void 0?null:_}};react_production_min.startTransition=function(et){var _=V$2.transition;V$2.transition={};try{et()}finally{V$2.transition=_}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(et,_){return U$2.current.useCallback(et,_)};react_production_min.useContext=function(et){return U$2.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$2.current.useDeferredValue(et)};react_production_min.useEffect=function(et,_){return U$2.current.useEffect(et,_)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(et,_,_e){return U$2.current.useImperativeHandle(et,_,_e)};react_production_min.useInsertionEffect=function(et,_){return U$2.current.useInsertionEffect(et,_)};react_production_min.useLayoutEffect=function(et,_){return U$2.current.useLayoutEffect(et,_)};react_production_min.useMemo=function(et,_){return U$2.current.useMemo(et,_)};react_production_min.useReducer=function(et,_,_e){return U$2.current.useReducer(et,_,_e)};react_production_min.useRef=function(et){return U$2.current.useRef(et)};react_production_min.useState=function(et){return U$2.current.useState(et)};react_production_min.useSyncExternalStore=function(et,_,_e){return U$2.current.useSyncExternalStore(et,_,_e)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react$1.exports=react_production_min;var reactExports=react$1.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$2=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$4=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$5(et,_,_e){var tt,nt={},it=null,rt=null;_e!==void 0&&(it=""+_e),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(rt=_.ref);for(tt in _)m$4.call(_,tt)&&!p$4.hasOwnProperty(tt)&&(nt[tt]=_[tt]);if(et&&et.defaultProps)for(tt in _=et.defaultProps,_)nt[tt]===void 0&&(nt[tt]=_[tt]);return{$$typeof:k$2,type:et,key:it,ref:rt,props:nt,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$5;reactJsxRuntime_production_min.jsxs=q$5;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs,style="";var reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function _(St,Zt){var Et=St.length;St.push(Zt);e:for(;0<Et;){var Wt=Et-1>>>1,Ht=St[Wt];if(0<nt(Ht,Zt))St[Wt]=Zt,St[Et]=Ht,Et=Wt;else break e}}function _e(St){return St.length===0?null:St[0]}function tt(St){if(St.length===0)return null;var Zt=St[0],Et=St.pop();if(Et!==Zt){St[0]=Et;e:for(var Wt=0,Ht=St.length,zt=Ht>>>1;Wt<zt;){var Pt=2*(Wt+1)-1,Ot=St[Pt],Jt=Pt+1,rn=St[Jt];if(0>nt(Ot,Et))Jt<Ht&&0>nt(rn,Ot)?(St[Wt]=rn,St[Jt]=Et,Wt=Jt):(St[Wt]=Ot,St[Pt]=Et,Wt=Pt);else if(Jt<Ht&&0>nt(rn,Et))St[Wt]=rn,St[Jt]=Et,Wt=Jt;else break e}}return Zt}function nt(St,Zt){var Et=St.sortIndex-Zt.sortIndex;return Et!==0?Et:St.id-Zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;et.unstable_now=function(){return it.now()}}else{var rt=Date,st=rt.now();et.unstable_now=function(){return rt.now()-st}}var ot=[],at=[],At=1,lt=null,gt=3,ct=!1,dt=!1,ht=!1,mt=typeof setTimeout=="function"?setTimeout:null,Ct=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pt(St){for(var Zt=_e(at);Zt!==null;){if(Zt.callback===null)tt(at);else if(Zt.startTime<=St)tt(at),Zt.sortIndex=Zt.expirationTime,_(ot,Zt);else break;Zt=_e(at)}}function Vt(St){if(ht=!1,pt(St),!dt)if(_e(ot)!==null)dt=!0,_t(yt);else{var Zt=_e(at);Zt!==null&&Tt(Vt,Zt.startTime-St)}}function yt(St,Zt){dt=!1,ht&&(ht=!1,Ct(vt),vt=-1),ct=!0;var Et=gt;try{for(pt(Zt),lt=_e(ot);lt!==null&&(!(lt.expirationTime>Zt)||St&&!kt());){var Wt=lt.callback;if(typeof Wt=="function"){lt.callback=null,gt=lt.priorityLevel;var Ht=Wt(lt.expirationTime<=Zt);Zt=et.unstable_now(),typeof Ht=="function"?lt.callback=Ht:lt===_e(ot)&&tt(ot),pt(Zt)}else tt(ot);lt=_e(ot)}if(lt!==null)var zt=!0;else{var Pt=_e(at);Pt!==null&&Tt(Vt,Pt.startTime-Zt),zt=!1}return zt}finally{lt=null,gt=Et,ct=!1}}var Gt=!1,Bt=null,vt=-1,wt=5,Mt=-1;function kt(){return!(et.unstable_now()-Mt<wt)}function Nt(){if(Bt!==null){var St=et.unstable_now();Mt=St;var Zt=!0;try{Zt=Bt(!0,St)}finally{Zt?Yt():(Gt=!1,Bt=null)}}else Gt=!1}var Yt;if(typeof ft=="function")Yt=function(){ft(Nt)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,Xt=Lt.port2;Lt.port1.onmessage=Nt,Yt=function(){Xt.postMessage(null)}}else Yt=function(){mt(Nt,0)};function _t(St){Bt=St,Gt||(Gt=!0,Yt())}function Tt(St,Zt){vt=mt(function(){St(et.unstable_now())},Zt)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(St){St.callback=null},et.unstable_continueExecution=function(){dt||ct||(dt=!0,_t(yt))},et.unstable_forceFrameRate=function(St){0>St||125<St?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<St?Math.floor(1e3/St):5},et.unstable_getCurrentPriorityLevel=function(){return gt},et.unstable_getFirstCallbackNode=function(){return _e(ot)},et.unstable_next=function(St){switch(gt){case 1:case 2:case 3:var Zt=3;break;default:Zt=gt}var Et=gt;gt=Zt;try{return St()}finally{gt=Et}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(St,Zt){switch(St){case 1:case 2:case 3:case 4:case 5:break;default:St=3}var Et=gt;gt=St;try{return Zt()}finally{gt=Et}},et.unstable_scheduleCallback=function(St,Zt,Et){var Wt=et.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?Wt+Et:Wt):Et=Wt,St){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=Et+Ht,St={id:At++,callback:Zt,priorityLevel:St,startTime:Et,expirationTime:Ht,sortIndex:-1},Et>Wt?(St.sortIndex=Et,_(at,St),_e(ot)===null&&St===_e(at)&&(ht?(Ct(vt),vt=-1):ht=!0,Tt(Vt,Et-Wt))):(St.sortIndex=Ht,_(ot,St),dt||ct||(dt=!0,_t(yt))),St},et.unstable_shouldYield=kt,et.unstable_wrapCallback=function(St){var Zt=gt;return function(){var Et=gt;gt=Zt;try{return St.apply(this,arguments)}finally{gt=Et}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(et){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+et,_e=1;_e<arguments.length;_e++)_+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+et+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,_){ha(et,_),ha(et+"Capture",_)}function ha(et,_){for(ea[et]=_,et=0;et<_.length;et++)da.add(_[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,_,_e,tt){if(_e!==null&&_e.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return tt?!1:_e!==null?!_e.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,_,_e,tt){if(_===null||typeof _>"u"||pa(et,_,_e,tt))return!0;if(tt)return!1;if(_e!==null)switch(_e.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$4(et,_,_e,tt,nt,it,rt){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=tt,this.attributeNamespace=nt,this.mustUseProperty=_e,this.propertyName=et,this.type=_,this.sanitizeURL=it,this.removeEmptyString=rt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z$1[et]=new v$4(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var _=et[0];z$1[_]=new v$4(_,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z$1[et]=new v$4(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z$1[et]=new v$4(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z$1[et]=new v$4(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z$1[et]=new v$4(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z$1[et]=new v$4(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z$1[et]=new v$4(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z$1[et]=new v$4(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var _=et.replace(ra,sa);z$1[_]=new v$4(_,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var _=et.replace(ra,sa);z$1[_]=new v$4(_,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var _=et.replace(ra,sa);z$1[_]=new v$4(_,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z$1[et]=new v$4(et,1,!1,et.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z$1[et]=new v$4(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta(et,_,_e,tt){var nt=z$1.hasOwnProperty(_)?z$1[_]:null;(nt!==null?nt.type!==0:tt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,_e,nt,tt)&&(_e=null),tt||nt===null?oa(_)&&(_e===null?et.removeAttribute(_):et.setAttribute(_,""+_e)):nt.mustUseProperty?et[nt.propertyName]=_e===null?nt.type===3?!1:"":_e:(_=nt.attributeName,tt=nt.attributeNamespace,_e===null?et.removeAttribute(_):(nt=nt.type,_e=nt===3||nt===4&&_e===!0?"":""+_e,tt?et.setAttributeNS(tt,_,_e):et.setAttribute(_,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$1=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch(_e){var _=_e.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+et}var Na=!1;function Oa(et,_){if(!et||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(at){var tt=at}Reflect.construct(et,[],_)}else{try{_.call()}catch(at){tt=at}et.call(_.prototype)}else{try{throw Error()}catch(at){tt=at}et()}}catch(at){if(at&&tt&&typeof at.stack=="string"){for(var nt=at.stack.split(`
`),it=tt.stack.split(`
`),rt=nt.length-1,st=it.length-1;1<=rt&&0<=st&&nt[rt]!==it[st];)st--;for(;1<=rt&&0<=st;rt--,st--)if(nt[rt]!==it[st]){if(rt!==1||st!==1)do if(rt--,st--,0>st||nt[rt]!==it[st]){var ot=`
`+nt[rt].replace(" at new "," at ");return et.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",et.displayName)),ot}while(1<=rt&&0<=st);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var _=et.render;return et=et.displayName,et||(et=_.displayName||_.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return _=et.displayName||null,_!==null?_:Qa(et.type)||"Memo";case Ha:_=et._payload,et=et._init;try{return Qa(et(_))}catch{}}return null}function Ra(et){var _=et.type;switch(et.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=_.render,et=et.displayName||et.name||"",_.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var _=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(et){var _=Ta(et)?"checked":"value",_e=Object.getOwnPropertyDescriptor(et.constructor.prototype,_),tt=""+et[_];if(!et.hasOwnProperty(_)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var nt=_e.get,it=_e.set;return Object.defineProperty(et,_,{configurable:!0,get:function(){return nt.call(this)},set:function(rt){tt=""+rt,it.call(this,rt)}}),Object.defineProperty(et,_,{enumerable:_e.enumerable}),{getValue:function(){return tt},setValue:function(rt){tt=""+rt},stopTracking:function(){et._valueTracker=null,delete et[_]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var _=et._valueTracker;if(!_)return!0;var _e=_.getValue(),tt="";return et&&(tt=Ta(et)?et.checked?"true":"false":et.value),et=tt,et!==_e?(_.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,_){var _e=_.checked;return A$1({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??et._wrapperState.initialChecked})}function Za(et,_){var _e=_.defaultValue==null?"":_.defaultValue,tt=_.checked!=null?_.checked:_.defaultChecked;_e=Sa(_.value!=null?_.value:_e),et._wrapperState={initialChecked:tt,initialValue:_e,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(et,_){_=_.checked,_!=null&&ta(et,"checked",_,!1)}function bb(et,_){ab(et,_);var _e=Sa(_.value),tt=_.type;if(_e!=null)tt==="number"?(_e===0&&et.value===""||et.value!=_e)&&(et.value=""+_e):et.value!==""+_e&&(et.value=""+_e);else if(tt==="submit"||tt==="reset"){et.removeAttribute("value");return}_.hasOwnProperty("value")?cb(et,_.type,_e):_.hasOwnProperty("defaultValue")&&cb(et,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(et.defaultChecked=!!_.defaultChecked)}function db(et,_,_e){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var tt=_.type;if(!(tt!=="submit"&&tt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+et._wrapperState.initialValue,_e||_===et.value||(et.value=_),et.defaultValue=_}_e=et.name,_e!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,_e!==""&&(et.name=_e)}function cb(et,_,_e){(_!=="number"||Xa(et.ownerDocument)!==et)&&(_e==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+_e&&(et.defaultValue=""+_e))}var eb=Array.isArray;function fb(et,_,_e,tt){if(et=et.options,_){_={};for(var nt=0;nt<_e.length;nt++)_["$"+_e[nt]]=!0;for(_e=0;_e<et.length;_e++)nt=_.hasOwnProperty("$"+et[_e].value),et[_e].selected!==nt&&(et[_e].selected=nt),nt&&tt&&(et[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),_=null,nt=0;nt<et.length;nt++){if(et[nt].value===_e){et[nt].selected=!0,tt&&(et[nt].defaultSelected=!0);return}_!==null||et[nt].disabled||(_=et[nt])}_!==null&&(_.selected=!0)}}function gb(et,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$1({},_,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,_){var _e=_.value;if(_e==null){if(_e=_.children,_=_.defaultValue,_e!=null){if(_!=null)throw Error(p$3(92));if(eb(_e)){if(1<_e.length)throw Error(p$3(93));_e=_e[0]}_=_e}_==null&&(_=""),_e=_}et._wrapperState={initialValue:Sa(_e)}}function ib(et,_){var _e=Sa(_.value),tt=Sa(_.defaultValue);_e!=null&&(_e=""+_e,_e!==et.value&&(et.value=_e),_.defaultValue==null&&et.defaultValue!==_e&&(et.defaultValue=_e)),tt!=null&&(et.defaultValue=""+tt)}function jb(et){var _=et.textContent;_===et._wrapperState.initialValue&&_!==""&&_!==null&&(et.value=_)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,_){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(_):et==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,_e,tt,nt){MSApp.execUnsafeLocalFunction(function(){return et(_,_e,tt,nt)})}:et}(function(et,_){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;_.firstChild;)et.appendChild(_.firstChild)}});function ob(et,_){if(_){var _e=et.firstChild;if(_e&&_e===et.lastChild&&_e.nodeType===3){_e.nodeValue=_;return}}et.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(_){_=_+et.charAt(0).toUpperCase()+et.substring(1),pb[_]=pb[et]})});function rb(et,_,_e){return _==null||typeof _=="boolean"||_===""?"":_e||typeof _!="number"||_===0||pb.hasOwnProperty(et)&&pb[et]?(""+_).trim():_+"px"}function sb(et,_){et=et.style;for(var _e in _)if(_.hasOwnProperty(_e)){var tt=_e.indexOf("--")===0,nt=rb(_e,_[_e],tt);_e==="float"&&(_e="cssFloat"),tt?et.setProperty(_e,nt):et[_e]=nt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,_){if(_){if(tb[et]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$3(137,et));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$3(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$3(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$3(62))}}function vb(et,_){if(et.indexOf("-")===-1)return typeof _.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$3(280));var _=et.stateNode;_&&(_=Db(_),yb(et.stateNode,et.type,_))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,_=Ab;if(Ab=zb=null,Bb(et),_)for(et=0;et<_.length;et++)Bb(_[et])}}function Gb(et,_){return et(_)}function Hb(){}var Ib=!1;function Jb(et,_,_e){if(Ib)return et(_,_e);Ib=!0;try{return Gb(et,_,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,_){var _e=et.stateNode;if(_e===null)return null;var tt=Db(_e);if(tt===null)return null;_e=tt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tt=!tt.disabled)||(et=et.type,tt=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!tt;break e;default:et=!1}if(et)return null;if(_e&&typeof _e!="function")throw Error(p$3(231,_,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,_,_e,tt,nt,it,rt,st,ot){var at=Array.prototype.slice.call(arguments,3);try{_.apply(_e,at)}catch(At){this.onError(At)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,_,_e,tt,nt,it,rt,st,ot){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,_,_e,tt,nt,it,rt,st,ot){if(Tb.apply(this,arguments),Ob){if(Ob){var at=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=at)}}function Vb(et){var _=et,_e=et;if(et.alternate)for(;_.return;)_=_.return;else{et=_;do _=et,_.flags&4098&&(_e=_.return),et=_.return;while(et)}return _.tag===3?_e:null}function Wb(et){if(et.tag===13){var _=et.memoizedState;if(_===null&&(et=et.alternate,et!==null&&(_=et.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$3(188))}function Yb(et){var _=et.alternate;if(!_){if(_=Vb(et),_===null)throw Error(p$3(188));return _!==et?null:et}for(var _e=et,tt=_;;){var nt=_e.return;if(nt===null)break;var it=nt.alternate;if(it===null){if(tt=nt.return,tt!==null){_e=tt;continue}break}if(nt.child===it.child){for(it=nt.child;it;){if(it===_e)return Xb(nt),et;if(it===tt)return Xb(nt),_;it=it.sibling}throw Error(p$3(188))}if(_e.return!==tt.return)_e=nt,tt=it;else{for(var rt=!1,st=nt.child;st;){if(st===_e){rt=!0,_e=nt,tt=it;break}if(st===tt){rt=!0,tt=nt,_e=it;break}st=st.sibling}if(!rt){for(st=it.child;st;){if(st===_e){rt=!0,_e=it,tt=nt;break}if(st===tt){rt=!0,tt=it,_e=nt;break}st=st.sibling}if(!rt)throw Error(p$3(189))}}if(_e.alternate!==tt)throw Error(p$3(190))}if(_e.tag!==3)throw Error(p$3(188));return _e.stateNode.current===_e?et:_}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var _=$b(et);if(_!==null)return _;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,_){var _e=et.pendingLanes;if(_e===0)return 0;var tt=0,nt=et.suspendedLanes,it=et.pingedLanes,rt=_e&268435455;if(rt!==0){var st=rt&~nt;st!==0?tt=tc(st):(it&=rt,it!==0&&(tt=tc(it)))}else rt=_e&~nt,rt!==0?tt=tc(rt):it!==0&&(tt=tc(it));if(tt===0)return 0;if(_!==0&&_!==tt&&!(_&nt)&&(nt=tt&-tt,it=_&-_,nt>=it||nt===16&&(it&4194240)!==0))return _;if(tt&4&&(tt|=_e&16),_=et.entangledLanes,_!==0)for(et=et.entanglements,_&=tt;0<_;)_e=31-oc(_),nt=1<<_e,tt|=et[_e],_&=~nt;return tt}function vc(et,_){switch(et){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,_){for(var _e=et.suspendedLanes,tt=et.pingedLanes,nt=et.expirationTimes,it=et.pendingLanes;0<it;){var rt=31-oc(it),st=1<<rt,ot=nt[rt];ot===-1?(!(st&_e)||st&tt)&&(nt[rt]=vc(st,_)):ot<=_&&(et.expiredLanes|=st),it&=~st}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var _=[],_e=0;31>_e;_e++)_.push(et);return _}function Ac(et,_,_e){et.pendingLanes|=_,_!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,_=31-oc(_),et[_]=_e}function Bc(et,_){var _e=et.pendingLanes&~_;et.pendingLanes=_,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=_,et.mutableReadLanes&=_,et.entangledLanes&=_,_=et.entanglements;var tt=et.eventTimes;for(et=et.expirationTimes;0<_e;){var nt=31-oc(_e),it=1<<nt;_[nt]=0,tt[nt]=-1,et[nt]=-1,_e&=~it}}function Cc(et,_){var _e=et.entangledLanes|=_;for(et=et.entanglements;_e;){var tt=31-oc(_e),nt=1<<tt;nt&_|et[tt]&_&&(et[tt]|=_),_e&=~nt}}var C$1=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,_){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(et,_,_e,tt,nt,it){return et===null||et.nativeEvent!==it?(et={blockedOn:_,domEventName:_e,eventSystemFlags:tt,nativeEvent:it,targetContainers:[nt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),et):(et.eventSystemFlags|=tt,_=et.targetContainers,nt!==null&&_.indexOf(nt)===-1&&_.push(nt),et)}function Uc(et,_,_e,tt,nt){switch(_){case"focusin":return Lc=Tc(Lc,et,_,_e,tt,nt),!0;case"dragenter":return Mc=Tc(Mc,et,_,_e,tt,nt),!0;case"mouseover":return Nc=Tc(Nc,et,_,_e,tt,nt),!0;case"pointerover":var it=nt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,et,_,_e,tt,nt)),!0;case"gotpointercapture":return it=nt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,et,_,_e,tt,nt)),!0}return!1}function Vc(et){var _=Wc(et.target);if(_!==null){var _e=Vb(_);if(_e!==null){if(_=_e.tag,_===13){if(_=Wb(_e),_!==null){et.blockedOn=_,Ic(et.priority,function(){Gc(_e)});return}}else if(_===3&&_e.stateNode.current.memoizedState.isDehydrated){et.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var _=et.targetContainers;0<_.length;){var _e=Yc(et.domEventName,et.eventSystemFlags,_[0],et.nativeEvent);if(_e===null){_e=et.nativeEvent;var tt=new _e.constructor(_e.type,_e);wb=tt,_e.target.dispatchEvent(tt),wb=null}else return _=Cb(_e),_!==null&&Fc(_),et.blockedOn=_e,!1;_.shift()}return!0}function Zc(et,_,_e){Xc(et)&&_e.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,_){et.blockedOn===_&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function _(nt){return ad(nt,et)}if(0<Kc.length){ad(Kc[0],et);for(var _e=1;_e<Kc.length;_e++){var tt=Kc[_e];tt.blockedOn===et&&(tt.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(_),Pc.forEach(_),_e=0;_e<Qc.length;_e++)tt=Qc[_e],tt.blockedOn===et&&(tt.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,_,_e,tt){var nt=C$1,it=cd.transition;cd.transition=null;try{C$1=1,fd(et,_,_e,tt)}finally{C$1=nt,cd.transition=it}}function gd(et,_,_e,tt){var nt=C$1,it=cd.transition;cd.transition=null;try{C$1=4,fd(et,_,_e,tt)}finally{C$1=nt,cd.transition=it}}function fd(et,_,_e,tt){if(dd){var nt=Yc(et,_,_e,tt);if(nt===null)hd(et,_,tt,id$1,_e),Sc(et,tt);else if(Uc(nt,et,_,_e,tt))tt.stopPropagation();else if(Sc(et,tt),_&4&&-1<Rc.indexOf(et)){for(;nt!==null;){var it=Cb(nt);if(it!==null&&Ec(it),it=Yc(et,_,_e,tt),it===null&&hd(et,_,tt,id$1,_e),it===nt)break;nt=it}nt!==null&&tt.stopPropagation()}else hd(et,_,tt,null,_e)}}var id$1=null;function Yc(et,_,_e,tt){if(id$1=null,et=xb(tt),et=Wc(et),et!==null)if(_=Vb(et),_===null)et=null;else if(_e=_.tag,_e===13){if(et=Wb(_),et!==null)return et;et=null}else if(_e===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;et=null}else _!==et&&(et=null);return id$1=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,_=ld,_e=_.length,tt,nt="value"in kd?kd.value:kd.textContent,it=nt.length;for(et=0;et<_e&&_[et]===nt[et];et++);var rt=_e-et;for(tt=1;tt<=rt&&_[_e-tt]===nt[it-tt];tt++);return md=nt.slice(et,1<tt?1-tt:void 0)}function od(et){var _=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&_===13&&(et=13)):et=_,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function _(_e,tt,nt,it,rt){this._reactName=_e,this._targetInst=nt,this.type=tt,this.nativeEvent=it,this.target=rt,this.currentTarget=null;for(var st in et)et.hasOwnProperty(st)&&(_e=et[st],this[st]=_e?_e(it):it[st]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(et):(et=Od[et])?!!_[et]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(et){if(et.key){var _=Md[et.key]||et.key;if(_!=="Unidentified")return _}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(et,_){switch(et){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie=!1;function je(et,_){switch(et){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee);case"textInput":return et=_.data,et===ee&&fe?null:et;default:return null}}function ke(et,_){if(ie)return et==="compositionend"||!ae&&ge(et,_)?(et=nd(),md=ld=kd=null,ie=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(et){var _=et&&et.nodeName&&et.nodeName.toLowerCase();return _==="input"?!!le[et.type]:_==="textarea"}function ne(et,_,_e,tt){Eb(tt),_=oe(_,"onChange"),0<_.length&&(_e=new td("onChange","change",null,_e,tt),et.push({event:_e,listeners:_}))}var pe=null,qe=null;function re$1(et){se(et,0)}function te(et){var _=ue(et);if(Wa(_))return et}function ve(et,_){if(et==="change")return _}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(et){if(et.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,et,xb(et)),Jb(re$1,_)}}function Ce(et,_,_e){et==="focusin"?(Ae(),pe=_,qe=_e,pe.attachEvent("onpropertychange",Be)):et==="focusout"&&Ae()}function De(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te(qe)}function Ee(et,_){if(et==="click")return te(_)}function Fe(et,_){if(et==="input"||et==="change")return te(_)}function Ge(et,_){return et===_&&(et!==0||1/et===1/_)||et!==et&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(et,_){if(He(et,_))return!0;if(typeof et!="object"||et===null||typeof _!="object"||_===null)return!1;var _e=Object.keys(et),tt=Object.keys(_);if(_e.length!==tt.length)return!1;for(tt=0;tt<_e.length;tt++){var nt=_e[tt];if(!ja.call(_,nt)||!He(et[nt],_[nt]))return!1}return!0}function Je(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke(et,_){var _e=Je(et);et=0;for(var tt;_e;){if(_e.nodeType===3){if(tt=et+_e.textContent.length,et<=_&&tt>=_)return{node:_e,offset:_-et};et=tt}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(et,_){return et&&_?et===_?!0:et&&et.nodeType===3?!1:_&&_.nodeType===3?Le(et,_.parentNode):"contains"in et?et.contains(_):et.compareDocumentPosition?!!(et.compareDocumentPosition(_)&16):!1:!1}function Me(){for(var et=window,_=Xa();_ instanceof et.HTMLIFrameElement;){try{var _e=typeof _.contentWindow.location.href=="string"}catch{_e=!1}if(_e)et=_.contentWindow;else break;_=Xa(et.document)}return _}function Ne(et){var _=et&&et.nodeName&&et.nodeName.toLowerCase();return _&&(_==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||_==="textarea"||et.contentEditable==="true")}function Oe(et){var _=Me(),_e=et.focusedElem,tt=et.selectionRange;if(_!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(tt!==null&&Ne(_e)){if(_=tt.start,et=tt.end,et===void 0&&(et=_),"selectionStart"in _e)_e.selectionStart=_,_e.selectionEnd=Math.min(et,_e.value.length);else if(et=(_=_e.ownerDocument||document)&&_.defaultView||window,et.getSelection){et=et.getSelection();var nt=_e.textContent.length,it=Math.min(tt.start,nt);tt=tt.end===void 0?it:Math.min(tt.end,nt),!et.extend&&it>tt&&(nt=tt,tt=it,it=nt),nt=Ke(_e,it);var rt=Ke(_e,tt);nt&&rt&&(et.rangeCount!==1||et.anchorNode!==nt.node||et.anchorOffset!==nt.offset||et.focusNode!==rt.node||et.focusOffset!==rt.offset)&&(_=_.createRange(),_.setStart(nt.node,nt.offset),et.removeAllRanges(),it>tt?(et.addRange(_),et.extend(rt.node,rt.offset)):(_.setEnd(rt.node,rt.offset),et.addRange(_)))}}for(_=[],et=_e;et=et.parentNode;)et.nodeType===1&&_.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<_.length;_e++)et=_[_e],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(et,_,_e){var tt=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(tt)||(tt=Qe,"selectionStart"in tt&&Ne(tt)?tt={start:tt.selectionStart,end:tt.selectionEnd}:(tt=(tt.ownerDocument&&tt.ownerDocument.defaultView||window).getSelection(),tt={anchorNode:tt.anchorNode,anchorOffset:tt.anchorOffset,focusNode:tt.focusNode,focusOffset:tt.focusOffset}),Se&&Ie(Se,tt)||(Se=tt,tt=oe(Re,"onSelect"),0<tt.length&&(_=new td("onSelect","select",null,_,_e),et.push({event:_,listeners:tt}),_.target=Qe)))}function Ve(et,_){var _e={};return _e[et.toLowerCase()]=_.toLowerCase(),_e["Webkit"+et]="webkit"+_,_e["Moz"+et]="moz"+_,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(et){if(Xe[et])return Xe[et];if(!We[et])return et;var _=We[et],_e;for(_e in _)if(_.hasOwnProperty(_e)&&_e in Ye)return Xe[et]=_[_e];return et}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,_){df.set(et,_),fa(_,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,_,_e){var tt=et.type||"unknown-event";et.currentTarget=_e,Ub(tt,_,void 0,et),et.currentTarget=null}function se(et,_){_=(_&4)!==0;for(var _e=0;_e<et.length;_e++){var tt=et[_e],nt=tt.event;tt=tt.listeners;e:{var it=void 0;if(_)for(var rt=tt.length-1;0<=rt;rt--){var st=tt[rt],ot=st.instance,at=st.currentTarget;if(st=st.listener,ot!==it&&nt.isPropagationStopped())break e;nf(nt,st,at),it=ot}else for(rt=0;rt<tt.length;rt++){if(st=tt[rt],ot=st.instance,at=st.currentTarget,st=st.listener,ot!==it&&nt.isPropagationStopped())break e;nf(nt,st,at),it=ot}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$1(et,_){var _e=_[of];_e===void 0&&(_e=_[of]=new Set);var tt=et+"__bubble";_e.has(tt)||(pf(_,et,2,!1),_e.add(tt))}function qf(et,_,_e){var tt=0;_&&(tt|=4),pf(_e,et,tt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,et),qf(_e,!0,et))});var _=et.nodeType===9?et:et.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(et,_,_e,tt){switch(jd(_)){case 1:var nt=ed;break;case 4:nt=gd;break;default:nt=fd}_e=nt.bind(null,_,_e,et),nt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(nt=!0),tt?nt!==void 0?et.addEventListener(_,_e,{capture:!0,passive:nt}):et.addEventListener(_,_e,!0):nt!==void 0?et.addEventListener(_,_e,{passive:nt}):et.addEventListener(_,_e,!1)}function hd(et,_,_e,tt,nt){var it=tt;if(!(_&1)&&!(_&2)&&tt!==null)e:for(;;){if(tt===null)return;var rt=tt.tag;if(rt===3||rt===4){var st=tt.stateNode.containerInfo;if(st===nt||st.nodeType===8&&st.parentNode===nt)break;if(rt===4)for(rt=tt.return;rt!==null;){var ot=rt.tag;if((ot===3||ot===4)&&(ot=rt.stateNode.containerInfo,ot===nt||ot.nodeType===8&&ot.parentNode===nt))return;rt=rt.return}for(;st!==null;){if(rt=Wc(st),rt===null)return;if(ot=rt.tag,ot===5||ot===6){tt=it=rt;continue e}st=st.parentNode}}tt=tt.return}Jb(function(){var at=it,At=xb(_e),lt=[];e:{var gt=df.get(et);if(gt!==void 0){var ct=td,dt=et;switch(et){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":ct=Rd;break;case"focusin":dt="focus",ct=Fd;break;case"focusout":dt="blur",ct=Fd;break;case"beforeblur":case"afterblur":ct=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=Vd;break;case $e:case af:case bf:ct=Hd;break;case cf:ct=Xd;break;case"scroll":ct=vd;break;case"wheel":ct=Zd;break;case"copy":case"cut":case"paste":ct=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Td}var ht=(_&4)!==0,mt=!ht&&et==="scroll",Ct=ht?gt!==null?gt+"Capture":null:gt;ht=[];for(var ft=at,pt;ft!==null;){pt=ft;var Vt=pt.stateNode;if(pt.tag===5&&Vt!==null&&(pt=Vt,Ct!==null&&(Vt=Kb(ft,Ct),Vt!=null&&ht.push(tf(ft,Vt,pt)))),mt)break;ft=ft.return}0<ht.length&&(gt=new ct(gt,dt,null,_e,At),lt.push({event:gt,listeners:ht}))}}if(!(_&7)){e:{if(gt=et==="mouseover"||et==="pointerover",ct=et==="mouseout"||et==="pointerout",gt&&_e!==wb&&(dt=_e.relatedTarget||_e.fromElement)&&(Wc(dt)||dt[uf]))break e;if((ct||gt)&&(gt=At.window===At?At:(gt=At.ownerDocument)?gt.defaultView||gt.parentWindow:window,ct?(dt=_e.relatedTarget||_e.toElement,ct=at,dt=dt?Wc(dt):null,dt!==null&&(mt=Vb(dt),dt!==mt||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(ct=null,dt=at),ct!==dt)){if(ht=Bd,Vt="onMouseLeave",Ct="onMouseEnter",ft="mouse",(et==="pointerout"||et==="pointerover")&&(ht=Td,Vt="onPointerLeave",Ct="onPointerEnter",ft="pointer"),mt=ct==null?gt:ue(ct),pt=dt==null?gt:ue(dt),gt=new ht(Vt,ft+"leave",ct,_e,At),gt.target=mt,gt.relatedTarget=pt,Vt=null,Wc(At)===at&&(ht=new ht(Ct,ft+"enter",dt,_e,At),ht.target=pt,ht.relatedTarget=mt,Vt=ht),mt=Vt,ct&&dt)t:{for(ht=ct,Ct=dt,ft=0,pt=ht;pt;pt=vf(pt))ft++;for(pt=0,Vt=Ct;Vt;Vt=vf(Vt))pt++;for(;0<ft-pt;)ht=vf(ht),ft--;for(;0<pt-ft;)Ct=vf(Ct),pt--;for(;ft--;){if(ht===Ct||Ct!==null&&ht===Ct.alternate)break t;ht=vf(ht),Ct=vf(Ct)}ht=null}else ht=null;ct!==null&&wf(lt,gt,ct,ht,!1),dt!==null&&mt!==null&&wf(lt,mt,dt,ht,!0)}}e:{if(gt=at?ue(at):window,ct=gt.nodeName&&gt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&gt.type==="file")var yt=ve;else if(me(gt))if(we)yt=Fe;else{yt=De;var Gt=Ce}else(ct=gt.nodeName)&&ct.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(yt=Ee);if(yt&&(yt=yt(et,at))){ne(lt,yt,_e,At);break e}Gt&&Gt(et,gt,at),et==="focusout"&&(Gt=gt._wrapperState)&&Gt.controlled&&gt.type==="number"&&cb(gt,"number",gt.value)}switch(Gt=at?ue(at):window,et){case"focusin":(me(Gt)||Gt.contentEditable==="true")&&(Qe=Gt,Re=at,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(lt,_e,At);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(lt,_e,At)}var Bt;if(ae)e:{switch(et){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else ie?ge(et,_e)&&(vt="onCompositionEnd"):et==="keydown"&&_e.keyCode===229&&(vt="onCompositionStart");vt&&(de&&_e.locale!=="ko"&&(ie||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&ie&&(Bt=nd()):(kd=At,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Gt=oe(at,vt),0<Gt.length&&(vt=new Ld(vt,et,null,_e,At),lt.push({event:vt,listeners:Gt}),Bt?vt.data=Bt:(Bt=he(_e),Bt!==null&&(vt.data=Bt)))),(Bt=ce?je(et,_e):ke(et,_e))&&(at=oe(at,"onBeforeInput"),0<at.length&&(At=new Ld("onBeforeInput","beforeinput",null,_e,At),lt.push({event:At,listeners:at}),At.data=Bt))}se(lt,_)})}function tf(et,_,_e){return{instance:et,listener:_,currentTarget:_e}}function oe(et,_){for(var _e=_+"Capture",tt=[];et!==null;){var nt=et,it=nt.stateNode;nt.tag===5&&it!==null&&(nt=it,it=Kb(et,_e),it!=null&&tt.unshift(tf(et,it,nt)),it=Kb(et,_),it!=null&&tt.push(tf(et,it,nt))),et=et.return}return tt}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,_,_e,tt,nt){for(var it=_._reactName,rt=[];_e!==null&&_e!==tt;){var st=_e,ot=st.alternate,at=st.stateNode;if(ot!==null&&ot===tt)break;st.tag===5&&at!==null&&(st=at,nt?(ot=Kb(_e,it),ot!=null&&rt.unshift(tf(_e,ot,st))):nt||(ot=Kb(_e,it),ot!=null&&rt.push(tf(_e,ot,st)))),_e=_e.return}rt.length!==0&&et.push({event:_,listeners:rt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,_,_e){if(_=zf(_),zf(et)!==_&&_e)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,_){return et==="textarea"||et==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,_){var _e=_,tt=0;do{var nt=_e.nextSibling;if(et.removeChild(_e),nt&&nt.nodeType===8)if(_e=nt.data,_e==="/$"){if(tt===0){et.removeChild(nt),bd(_);return}tt--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||tt++;_e=nt}while(_e);bd(_)}function Lf(et){for(;et!=null;et=et.nextSibling){var _=et.nodeType;if(_===1||_===3)break;if(_===8){if(_=et.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var _=0;et;){if(et.nodeType===8){var _e=et.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(_===0)return et;_--}else _e==="/$"&&_++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var _=et[Of];if(_)return _;for(var _e=et.parentNode;_e;){if(_=_e[uf]||_e[Of]){if(_e=_.alternate,_.child!==null||_e!==null&&_e.child!==null)for(et=Mf(et);et!==null;){if(_e=et[Of])return _e;et=Mf(et)}return _}et=_e,_e=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$3(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E$1(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(et,_){Tf++,Sf[Tf]=et.current,et.current=_}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,_){var _e=et.type.contextTypes;if(!_e)return Vf;var tt=et.stateNode;if(tt&&tt.__reactInternalMemoizedUnmaskedChildContext===_)return tt.__reactInternalMemoizedMaskedChildContext;var nt={},it;for(it in _e)nt[it]=_[it];return tt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=_,et.__reactInternalMemoizedMaskedChildContext=nt),nt}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(et,_,_e){if(H$1.current!==Vf)throw Error(p$3(168));G$1(H$1,_),G$1(Wf,_e)}function bg(et,_,_e){var tt=et.stateNode;if(_=_.childContextTypes,typeof tt.getChildContext!="function")return _e;tt=tt.getChildContext();for(var nt in tt)if(!(nt in _))throw Error(p$3(108,Ra(et)||"Unknown",nt));return A$1({},_e,tt)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,et),G$1(Wf,Wf.current),!0}function dg(et,_,_e){var tt=et.stateNode;if(!tt)throw Error(p$3(169));_e?(et=bg(et,_,Xf),tt.__reactInternalMemoizedMergedChildContext=et,E$1(Wf),E$1(H$1),G$1(H$1,et)):E$1(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,_=C$1;try{var _e=eg;for(C$1=1;et<_e.length;et++){var tt=_e[et];do tt=tt(!0);while(tt!==null)}eg=null,fg=!1}catch(nt){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),nt}finally{C$1=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,_){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=_}function ug(et,_,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var tt=rg;et=sg;var nt=32-oc(tt)-1;tt&=~(1<<nt),_e+=1;var it=32-oc(_)+nt;if(30<it){var rt=nt-nt%5;it=(tt&(1<<rt)-1).toString(32),tt>>=rt,nt-=rt,rg=1<<32-oc(_)+nt|_e<<nt|tt,sg=it+et}else rg=1<<it|_e<<nt|tt,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(et,_){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=_,_e.return=et,_=et.deletions,_===null?(et.deletions=[_e],et.flags|=16):_.push(_e)}function Cg(et,_){switch(et.tag){case 5:var _e=et.type;return _=_.nodeType!==1||_e.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(et.stateNode=_,xg=et,yg=Lf(_.firstChild),!0):!1;case 6:return _=et.pendingProps===""||_.nodeType!==3?null:_,_!==null?(et.stateNode=_,xg=et,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:_,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=_,_e.return=et,et.child=_e,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$1){var _=yg;if(_){var _e=_;if(!Cg(et,_)){if(Dg(et))throw Error(p$3(418));_=Lf(_e.nextSibling);var tt=xg;_&&Cg(et,_)?Ag(tt,_e):(et.flags=et.flags&-4097|2,I$1=!1,xg=et)}}else{if(Dg(et))throw Error(p$3(418));et.flags=et.flags&-4097|2,I$1=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$1)return Fg(et),I$1=!0,!1;var _;if((_=et.tag!==3)&&!(_=et.tag!==5)&&(_=et.type,_=_!=="head"&&_!=="body"&&!Ef(et.type,et.memoizedProps)),_&&(_=yg)){if(Dg(et))throw Hg(),Error(p$3(418));for(;_;)Ag(et,_),_=Lf(_.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$3(317));e:{for(et=et.nextSibling,_=0;et;){if(et.nodeType===8){var _e=et.data;if(_e==="/$"){if(_===0){yg=Lf(et.nextSibling);break e}_--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||_++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,_){if(et&&et.defaultProps){_=A$1({},_),et=et.defaultProps;for(var _e in et)_[_e]===void 0&&(_[_e]=et[_e]);return _}return _}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(et){var _=Mg.current;E$1(Mg),et._currentValue=_}function Sg(et,_,_e){for(;et!==null;){var tt=et.alternate;if((et.childLanes&_)!==_?(et.childLanes|=_,tt!==null&&(tt.childLanes|=_)):tt!==null&&(tt.childLanes&_)!==_&&(tt.childLanes|=_),et===_e)break;et=et.return}}function Tg(et,_){Ng=et,Pg=Og=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&_&&(Ug=!0),et.firstContext=null)}function Vg(et){var _=et._currentValue;if(Pg!==et)if(et={context:et,memoizedValue:_,next:null},Og===null){if(Ng===null)throw Error(p$3(308));Og=et,Ng.dependencies={lanes:0,firstContext:et}}else Og=Og.next=et;return _}var Wg=null;function Xg(et){Wg===null?Wg=[et]:Wg.push(et)}function Yg(et,_,_e,tt){var nt=_.interleaved;return nt===null?(_e.next=_e,Xg(_)):(_e.next=nt.next,nt.next=_e),_.interleaved=_e,Zg(et,tt)}function Zg(et,_){et.lanes|=_;var _e=et.alternate;for(_e!==null&&(_e.lanes|=_),_e=et,et=et.return;et!==null;)et.childLanes|=_,_e=et.alternate,_e!==null&&(_e.childLanes|=_),_e=et,et=et.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(et,_){et=et.updateQueue,_.updateQueue===et&&(_.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function ch(et,_){return{eventTime:et,lane:_,tag:0,payload:null,callback:null,next:null}}function dh(et,_,_e){var tt=et.updateQueue;if(tt===null)return null;if(tt=tt.shared,K$1&2){var nt=tt.pending;return nt===null?_.next=_:(_.next=nt.next,nt.next=_),tt.pending=_,Zg(et,_e)}return nt=tt.interleaved,nt===null?(_.next=_,Xg(tt)):(_.next=nt.next,nt.next=_),tt.interleaved=_,Zg(et,_e)}function eh(et,_,_e){if(_=_.updateQueue,_!==null&&(_=_.shared,(_e&4194240)!==0)){var tt=_.lanes;tt&=et.pendingLanes,_e|=tt,_.lanes=_e,Cc(et,_e)}}function fh(et,_){var _e=et.updateQueue,tt=et.alternate;if(tt!==null&&(tt=tt.updateQueue,_e===tt)){var nt=null,it=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var rt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};it===null?nt=it=rt:it=it.next=rt,_e=_e.next}while(_e!==null);it===null?nt=it=_:it=it.next=_}else nt=it=_;_e={baseState:tt.baseState,firstBaseUpdate:nt,lastBaseUpdate:it,shared:tt.shared,effects:tt.effects},et.updateQueue=_e;return}et=_e.lastBaseUpdate,et===null?_e.firstBaseUpdate=_:et.next=_,_e.lastBaseUpdate=_}function gh(et,_,_e,tt){var nt=et.updateQueue;$g=!1;var it=nt.firstBaseUpdate,rt=nt.lastBaseUpdate,st=nt.shared.pending;if(st!==null){nt.shared.pending=null;var ot=st,at=ot.next;ot.next=null,rt===null?it=at:rt.next=at,rt=ot;var At=et.alternate;At!==null&&(At=At.updateQueue,st=At.lastBaseUpdate,st!==rt&&(st===null?At.firstBaseUpdate=at:st.next=at,At.lastBaseUpdate=ot))}if(it!==null){var lt=nt.baseState;rt=0,At=at=ot=null,st=it;do{var gt=st.lane,ct=st.eventTime;if((tt&gt)===gt){At!==null&&(At=At.next={eventTime:ct,lane:0,tag:st.tag,payload:st.payload,callback:st.callback,next:null});e:{var dt=et,ht=st;switch(gt=_,ct=_e,ht.tag){case 1:if(dt=ht.payload,typeof dt=="function"){lt=dt.call(ct,lt,gt);break e}lt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ht.payload,gt=typeof dt=="function"?dt.call(ct,lt,gt):dt,gt==null)break e;lt=A$1({},lt,gt);break e;case 2:$g=!0}}st.callback!==null&&st.lane!==0&&(et.flags|=64,gt=nt.effects,gt===null?nt.effects=[st]:gt.push(st))}else ct={eventTime:ct,lane:gt,tag:st.tag,payload:st.payload,callback:st.callback,next:null},At===null?(at=At=ct,ot=lt):At=At.next=ct,rt|=gt;if(st=st.next,st===null){if(st=nt.shared.pending,st===null)break;gt=st,st=gt.next,gt.next=null,nt.lastBaseUpdate=gt,nt.shared.pending=null}}while(1);if(At===null&&(ot=lt),nt.baseState=ot,nt.firstBaseUpdate=at,nt.lastBaseUpdate=At,_=nt.shared.interleaved,_!==null){nt=_;do rt|=nt.lane,nt=nt.next;while(nt!==_)}else it===null&&(nt.shared.lanes=0);hh|=rt,et.lanes=rt,et.memoizedState=lt}}function ih(et,_,_e){if(et=_.effects,_.effects=null,et!==null)for(_=0;_<et.length;_++){var tt=et[_],nt=tt.callback;if(nt!==null){if(tt.callback=null,tt=_e,typeof nt!="function")throw Error(p$3(191,nt));nt.call(tt)}}}var jh=new aa.Component().refs;function kh(et,_,_e,tt){_=et.memoizedState,_e=_e(tt,_),_e=_e==null?_:A$1({},_,_e),et.memoizedState=_e,et.lanes===0&&(et.updateQueue.baseState=_e)}var nh={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,_,_e){et=et._reactInternals;var tt=L$1(),nt=lh(et),it=ch(tt,nt);it.payload=_,_e!=null&&(it.callback=_e),_=dh(et,it,nt),_!==null&&(mh(_,et,nt,tt),eh(_,et,nt))},enqueueReplaceState:function(et,_,_e){et=et._reactInternals;var tt=L$1(),nt=lh(et),it=ch(tt,nt);it.tag=1,it.payload=_,_e!=null&&(it.callback=_e),_=dh(et,it,nt),_!==null&&(mh(_,et,nt,tt),eh(_,et,nt))},enqueueForceUpdate:function(et,_){et=et._reactInternals;var _e=L$1(),tt=lh(et),nt=ch(_e,tt);nt.tag=2,_!=null&&(nt.callback=_),_=dh(et,nt,tt),_!==null&&(mh(_,et,tt,_e),eh(_,et,tt))}};function oh(et,_,_e,tt,nt,it,rt){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(tt,it,rt):_.prototype&&_.prototype.isPureReactComponent?!Ie(_e,tt)||!Ie(nt,it):!0}function ph(et,_,_e){var tt=!1,nt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=Vg(it):(nt=Zf(_)?Xf:H$1.current,tt=_.contextTypes,it=(tt=tt!=null)?Yf(et,nt):Vf),_=new _(_e,it),et.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=nh,et.stateNode=_,_._reactInternals=et,tt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=nt,et.__reactInternalMemoizedMaskedChildContext=it),_}function qh(et,_,_e,tt){et=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(_e,tt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(_e,tt),_.state!==et&&nh.enqueueReplaceState(_,_.state,null)}function rh(et,_,_e,tt){var nt=et.stateNode;nt.props=_e,nt.state=et.memoizedState,nt.refs=jh,ah(et);var it=_.contextType;typeof it=="object"&&it!==null?nt.context=Vg(it):(it=Zf(_)?Xf:H$1.current,nt.context=Yf(et,it)),nt.state=et.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(kh(et,_,it,_e),nt.state=et.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof nt.getSnapshotBeforeUpdate=="function"||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(_=nt.state,typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount(),_!==nt.state&&nh.enqueueReplaceState(nt,nt.state,null),gh(et,_e,nt,tt),nt.state=et.memoizedState),typeof nt.componentDidMount=="function"&&(et.flags|=4194308)}function sh(et,_,_e){if(et=_e.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$3(309));var tt=_e.stateNode}if(!tt)throw Error(p$3(147,et));var nt=tt,it=""+et;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(rt){var st=nt.refs;st===jh&&(st=nt.refs={}),rt===null?delete st[it]:st[it]=rt},_._stringRef=it,_)}if(typeof et!="string")throw Error(p$3(284));if(!_e._owner)throw Error(p$3(290,et))}return et}function th(et,_){throw et=Object.prototype.toString.call(_),Error(p$3(31,et==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":et))}function uh(et){var _=et._init;return _(et._payload)}function vh(et){function _(Ct,ft){if(et){var pt=Ct.deletions;pt===null?(Ct.deletions=[ft],Ct.flags|=16):pt.push(ft)}}function _e(Ct,ft){if(!et)return null;for(;ft!==null;)_(Ct,ft),ft=ft.sibling;return null}function tt(Ct,ft){for(Ct=new Map;ft!==null;)ft.key!==null?Ct.set(ft.key,ft):Ct.set(ft.index,ft),ft=ft.sibling;return Ct}function nt(Ct,ft){return Ct=wh(Ct,ft),Ct.index=0,Ct.sibling=null,Ct}function it(Ct,ft,pt){return Ct.index=pt,et?(pt=Ct.alternate,pt!==null?(pt=pt.index,pt<ft?(Ct.flags|=2,ft):pt):(Ct.flags|=2,ft)):(Ct.flags|=1048576,ft)}function rt(Ct){return et&&Ct.alternate===null&&(Ct.flags|=2),Ct}function st(Ct,ft,pt,Vt){return ft===null||ft.tag!==6?(ft=xh(pt,Ct.mode,Vt),ft.return=Ct,ft):(ft=nt(ft,pt),ft.return=Ct,ft)}function ot(Ct,ft,pt,Vt){var yt=pt.type;return yt===ya?At(Ct,ft,pt.props.children,Vt,pt.key):ft!==null&&(ft.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ha&&uh(yt)===ft.type)?(Vt=nt(ft,pt.props),Vt.ref=sh(Ct,ft,pt),Vt.return=Ct,Vt):(Vt=yh(pt.type,pt.key,pt.props,null,Ct.mode,Vt),Vt.ref=sh(Ct,ft,pt),Vt.return=Ct,Vt)}function at(Ct,ft,pt,Vt){return ft===null||ft.tag!==4||ft.stateNode.containerInfo!==pt.containerInfo||ft.stateNode.implementation!==pt.implementation?(ft=zh(pt,Ct.mode,Vt),ft.return=Ct,ft):(ft=nt(ft,pt.children||[]),ft.return=Ct,ft)}function At(Ct,ft,pt,Vt,yt){return ft===null||ft.tag!==7?(ft=Ah(pt,Ct.mode,Vt,yt),ft.return=Ct,ft):(ft=nt(ft,pt),ft.return=Ct,ft)}function lt(Ct,ft,pt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ft=xh(""+ft,Ct.mode,pt),ft.return=Ct,ft;if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return pt=yh(ft.type,ft.key,ft.props,null,Ct.mode,pt),pt.ref=sh(Ct,null,ft),pt.return=Ct,pt;case wa:return ft=zh(ft,Ct.mode,pt),ft.return=Ct,ft;case Ha:var Vt=ft._init;return lt(Ct,Vt(ft._payload),pt)}if(eb(ft)||Ka(ft))return ft=Ah(ft,Ct.mode,pt,null),ft.return=Ct,ft;th(Ct,ft)}return null}function gt(Ct,ft,pt,Vt){var yt=ft!==null?ft.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number")return yt!==null?null:st(Ct,ft,""+pt,Vt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return pt.key===yt?ot(Ct,ft,pt,Vt):null;case wa:return pt.key===yt?at(Ct,ft,pt,Vt):null;case Ha:return yt=pt._init,gt(Ct,ft,yt(pt._payload),Vt)}if(eb(pt)||Ka(pt))return yt!==null?null:At(Ct,ft,pt,Vt,null);th(Ct,pt)}return null}function ct(Ct,ft,pt,Vt,yt){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return Ct=Ct.get(pt)||null,st(ft,Ct,""+Vt,yt);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case va:return Ct=Ct.get(Vt.key===null?pt:Vt.key)||null,ot(ft,Ct,Vt,yt);case wa:return Ct=Ct.get(Vt.key===null?pt:Vt.key)||null,at(ft,Ct,Vt,yt);case Ha:var Gt=Vt._init;return ct(Ct,ft,pt,Gt(Vt._payload),yt)}if(eb(Vt)||Ka(Vt))return Ct=Ct.get(pt)||null,At(ft,Ct,Vt,yt,null);th(ft,Vt)}return null}function dt(Ct,ft,pt,Vt){for(var yt=null,Gt=null,Bt=ft,vt=ft=0,wt=null;Bt!==null&&vt<pt.length;vt++){Bt.index>vt?(wt=Bt,Bt=null):wt=Bt.sibling;var Mt=gt(Ct,Bt,pt[vt],Vt);if(Mt===null){Bt===null&&(Bt=wt);break}et&&Bt&&Mt.alternate===null&&_(Ct,Bt),ft=it(Mt,ft,vt),Gt===null?yt=Mt:Gt.sibling=Mt,Gt=Mt,Bt=wt}if(vt===pt.length)return _e(Ct,Bt),I$1&&tg(Ct,vt),yt;if(Bt===null){for(;vt<pt.length;vt++)Bt=lt(Ct,pt[vt],Vt),Bt!==null&&(ft=it(Bt,ft,vt),Gt===null?yt=Bt:Gt.sibling=Bt,Gt=Bt);return I$1&&tg(Ct,vt),yt}for(Bt=tt(Ct,Bt);vt<pt.length;vt++)wt=ct(Bt,Ct,vt,pt[vt],Vt),wt!==null&&(et&&wt.alternate!==null&&Bt.delete(wt.key===null?vt:wt.key),ft=it(wt,ft,vt),Gt===null?yt=wt:Gt.sibling=wt,Gt=wt);return et&&Bt.forEach(function(kt){return _(Ct,kt)}),I$1&&tg(Ct,vt),yt}function ht(Ct,ft,pt,Vt){var yt=Ka(pt);if(typeof yt!="function")throw Error(p$3(150));if(pt=yt.call(pt),pt==null)throw Error(p$3(151));for(var Gt=yt=null,Bt=ft,vt=ft=0,wt=null,Mt=pt.next();Bt!==null&&!Mt.done;vt++,Mt=pt.next()){Bt.index>vt?(wt=Bt,Bt=null):wt=Bt.sibling;var kt=gt(Ct,Bt,Mt.value,Vt);if(kt===null){Bt===null&&(Bt=wt);break}et&&Bt&&kt.alternate===null&&_(Ct,Bt),ft=it(kt,ft,vt),Gt===null?yt=kt:Gt.sibling=kt,Gt=kt,Bt=wt}if(Mt.done)return _e(Ct,Bt),I$1&&tg(Ct,vt),yt;if(Bt===null){for(;!Mt.done;vt++,Mt=pt.next())Mt=lt(Ct,Mt.value,Vt),Mt!==null&&(ft=it(Mt,ft,vt),Gt===null?yt=Mt:Gt.sibling=Mt,Gt=Mt);return I$1&&tg(Ct,vt),yt}for(Bt=tt(Ct,Bt);!Mt.done;vt++,Mt=pt.next())Mt=ct(Bt,Ct,vt,Mt.value,Vt),Mt!==null&&(et&&Mt.alternate!==null&&Bt.delete(Mt.key===null?vt:Mt.key),ft=it(Mt,ft,vt),Gt===null?yt=Mt:Gt.sibling=Mt,Gt=Mt);return et&&Bt.forEach(function(Nt){return _(Ct,Nt)}),I$1&&tg(Ct,vt),yt}function mt(Ct,ft,pt,Vt){if(typeof pt=="object"&&pt!==null&&pt.type===ya&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:e:{for(var yt=pt.key,Gt=ft;Gt!==null;){if(Gt.key===yt){if(yt=pt.type,yt===ya){if(Gt.tag===7){_e(Ct,Gt.sibling),ft=nt(Gt,pt.props.children),ft.return=Ct,Ct=ft;break e}}else if(Gt.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ha&&uh(yt)===Gt.type){_e(Ct,Gt.sibling),ft=nt(Gt,pt.props),ft.ref=sh(Ct,Gt,pt),ft.return=Ct,Ct=ft;break e}_e(Ct,Gt);break}else _(Ct,Gt);Gt=Gt.sibling}pt.type===ya?(ft=Ah(pt.props.children,Ct.mode,Vt,pt.key),ft.return=Ct,Ct=ft):(Vt=yh(pt.type,pt.key,pt.props,null,Ct.mode,Vt),Vt.ref=sh(Ct,ft,pt),Vt.return=Ct,Ct=Vt)}return rt(Ct);case wa:e:{for(Gt=pt.key;ft!==null;){if(ft.key===Gt)if(ft.tag===4&&ft.stateNode.containerInfo===pt.containerInfo&&ft.stateNode.implementation===pt.implementation){_e(Ct,ft.sibling),ft=nt(ft,pt.children||[]),ft.return=Ct,Ct=ft;break e}else{_e(Ct,ft);break}else _(Ct,ft);ft=ft.sibling}ft=zh(pt,Ct.mode,Vt),ft.return=Ct,Ct=ft}return rt(Ct);case Ha:return Gt=pt._init,mt(Ct,ft,Gt(pt._payload),Vt)}if(eb(pt))return dt(Ct,ft,pt,Vt);if(Ka(pt))return ht(Ct,ft,pt,Vt);th(Ct,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"?(pt=""+pt,ft!==null&&ft.tag===6?(_e(Ct,ft.sibling),ft=nt(ft,pt),ft.return=Ct,Ct=ft):(_e(Ct,ft),ft=xh(pt,Ct.mode,Vt),ft.return=Ct,Ct=ft),rt(Ct)):_e(Ct,ft)}return mt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(et){if(et===Dh)throw Error(p$3(174));return et}function Ih(et,_){switch(G$1(Gh,_),G$1(Fh,et),G$1(Eh,Dh),et=_.nodeType,et){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:et=et===8?_.parentNode:_,_=et.namespaceURI||null,et=et.tagName,_=lb(_,et)}E$1(Eh),G$1(Eh,_)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(et){Hh(Gh.current);var _=Hh(Eh.current),_e=lb(_,et.type);_!==_e&&(G$1(Fh,et),G$1(Eh,_e))}function Lh(et){Fh.current===et&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(et){for(var _=et;_!==null;){if(_.tag===13){var _e=_.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===et)break;for(;_.sibling===null;){if(_.return===null||_.return===et)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Nh=[];function Oh(){for(var et=0;et<Nh.length;et++)Nh[et]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p$3(321))}function Wh(et,_){if(_===null)return!1;for(var _e=0;_e<_.length&&_e<et.length;_e++)if(!He(et[_e],_[_e]))return!1;return!0}function Xh(et,_,_e,tt,nt,it){if(Rh=it,N$1=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Ph.current=et===null||et.memoizedState===null?Yh:Zh,et=_e(tt,nt),Th){it=0;do{if(Th=!1,Uh=0,25<=it)throw Error(p$3(301));it+=1,P$1=O$1=null,_.updateQueue=null,Ph.current=$h,et=_e(tt,nt)}while(Th)}if(Ph.current=ai,_=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,_)throw Error(p$3(300));return et}function bi(){var et=Uh!==0;return Uh=0,et}function ci(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=et:P$1=P$1.next=et,P$1}function di(){if(O$1===null){var et=N$1.alternate;et=et!==null?et.memoizedState:null}else et=O$1.next;var _=P$1===null?N$1.memoizedState:P$1.next;if(_!==null)P$1=_,O$1=et;else{if(et===null)throw Error(p$3(310));O$1=et,et={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=et:P$1=P$1.next=et}return P$1}function ei(et,_){return typeof _=="function"?_(et):_}function fi(et){var _=di(),_e=_.queue;if(_e===null)throw Error(p$3(311));_e.lastRenderedReducer=et;var tt=O$1,nt=tt.baseQueue,it=_e.pending;if(it!==null){if(nt!==null){var rt=nt.next;nt.next=it.next,it.next=rt}tt.baseQueue=nt=it,_e.pending=null}if(nt!==null){it=nt.next,tt=tt.baseState;var st=rt=null,ot=null,at=it;do{var At=at.lane;if((Rh&At)===At)ot!==null&&(ot=ot.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),tt=at.hasEagerState?at.eagerState:et(tt,at.action);else{var lt={lane:At,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};ot===null?(st=ot=lt,rt=tt):ot=ot.next=lt,N$1.lanes|=At,hh|=At}at=at.next}while(at!==null&&at!==it);ot===null?rt=tt:ot.next=st,He(tt,_.memoizedState)||(Ug=!0),_.memoizedState=tt,_.baseState=rt,_.baseQueue=ot,_e.lastRenderedState=tt}if(et=_e.interleaved,et!==null){nt=et;do it=nt.lane,N$1.lanes|=it,hh|=it,nt=nt.next;while(nt!==et)}else nt===null&&(_e.lanes=0);return[_.memoizedState,_e.dispatch]}function gi(et){var _=di(),_e=_.queue;if(_e===null)throw Error(p$3(311));_e.lastRenderedReducer=et;var tt=_e.dispatch,nt=_e.pending,it=_.memoizedState;if(nt!==null){_e.pending=null;var rt=nt=nt.next;do it=et(it,rt.action),rt=rt.next;while(rt!==nt);He(it,_.memoizedState)||(Ug=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),_e.lastRenderedState=it}return[it,tt]}function hi(){}function ii(et,_){var _e=N$1,tt=di(),nt=_(),it=!He(tt.memoizedState,nt);if(it&&(tt.memoizedState=nt,Ug=!0),tt=tt.queue,ji(ki.bind(null,_e,tt,et),[et]),tt.getSnapshot!==_||it||P$1!==null&&P$1.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,tt,nt,_),void 0,null),R$2===null)throw Error(p$3(349));Rh&30||ni(_e,_,nt)}return nt}function ni(et,_,_e){et.flags|=16384,et={getSnapshot:_,value:_e},_=N$1.updateQueue,_===null?(_={lastEffect:null,stores:null},N$1.updateQueue=_,_.stores=[et]):(_e=_.stores,_e===null?_.stores=[et]:_e.push(et))}function mi(et,_,_e,tt){_.value=_e,_.getSnapshot=tt,oi(_)&&pi(et)}function ki(et,_,_e){return _e(function(){oi(_)&&pi(et)})}function oi(et){var _=et.getSnapshot;et=et.value;try{var _e=_();return!He(et,_e)}catch{return!0}}function pi(et){var _=Zg(et,1);_!==null&&mh(_,et,1,-1)}function qi(et){var _=ci();return typeof et=="function"&&(et=et()),_.memoizedState=_.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:et},_.queue=et,et=et.dispatch=ri.bind(null,N$1,et),[_.memoizedState,et]}function li(et,_,_e,tt){return et={tag:et,create:_,destroy:_e,deps:tt,next:null},_=N$1.updateQueue,_===null?(_={lastEffect:null,stores:null},N$1.updateQueue=_,_.lastEffect=et.next=et):(_e=_.lastEffect,_e===null?_.lastEffect=et.next=et:(tt=_e.next,_e.next=et,et.next=tt,_.lastEffect=et)),et}function si(){return di().memoizedState}function ti(et,_,_e,tt){var nt=ci();N$1.flags|=et,nt.memoizedState=li(1|_,_e,void 0,tt===void 0?null:tt)}function ui(et,_,_e,tt){var nt=di();tt=tt===void 0?null:tt;var it=void 0;if(O$1!==null){var rt=O$1.memoizedState;if(it=rt.destroy,tt!==null&&Wh(tt,rt.deps)){nt.memoizedState=li(_,_e,it,tt);return}}N$1.flags|=et,nt.memoizedState=li(1|_,_e,it,tt)}function vi(et,_){return ti(8390656,8,et,_)}function ji(et,_){return ui(2048,8,et,_)}function wi(et,_){return ui(4,2,et,_)}function xi(et,_){return ui(4,4,et,_)}function yi(et,_){if(typeof _=="function")return et=et(),_(et),function(){_(null)};if(_!=null)return et=et(),_.current=et,function(){_.current=null}}function zi(et,_,_e){return _e=_e!=null?_e.concat([et]):null,ui(4,4,yi.bind(null,_,et),_e)}function Ai(){}function Bi(et,_){var _e=di();_=_===void 0?null:_;var tt=_e.memoizedState;return tt!==null&&_!==null&&Wh(_,tt[1])?tt[0]:(_e.memoizedState=[et,_],et)}function Ci(et,_){var _e=di();_=_===void 0?null:_;var tt=_e.memoizedState;return tt!==null&&_!==null&&Wh(_,tt[1])?tt[0]:(et=et(),_e.memoizedState=[et,_],et)}function Di(et,_,_e){return Rh&21?(He(_e,_)||(_e=yc(),N$1.lanes|=_e,hh|=_e,et.baseState=!0),_):(et.baseState&&(et.baseState=!1,Ug=!0),et.memoizedState=_e)}function Ei(et,_){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,et(!0);var tt=Qh.transition;Qh.transition={};try{et(!1),_()}finally{C$1=_e,Qh.transition=tt}}function Fi(){return di().memoizedState}function Gi(et,_,_e){var tt=lh(et);if(_e={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(et))Ii(_,_e);else if(_e=Yg(et,_,_e,tt),_e!==null){var nt=L$1();mh(_e,et,tt,nt),Ji(_e,_,tt)}}function ri(et,_,_e){var tt=lh(et),nt={lane:tt,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(et))Ii(_,nt);else{var it=et.alternate;if(et.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var rt=_.lastRenderedState,st=it(rt,_e);if(nt.hasEagerState=!0,nt.eagerState=st,He(st,rt)){var ot=_.interleaved;ot===null?(nt.next=nt,Xg(_)):(nt.next=ot.next,ot.next=nt),_.interleaved=nt;return}}catch{}finally{}_e=Yg(et,_,nt,tt),_e!==null&&(nt=L$1(),mh(_e,et,tt,nt),Ji(_e,_,tt))}}function Hi(et){var _=et.alternate;return et===N$1||_!==null&&_===N$1}function Ii(et,_){Th=Sh=!0;var _e=et.pending;_e===null?_.next=_:(_.next=_e.next,_e.next=_),et.pending=_}function Ji(et,_,_e){if(_e&4194240){var tt=_.lanes;tt&=et.pendingLanes,_e|=tt,_.lanes=_e,Cc(et,_e)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(et,_){return ci().memoizedState=[et,_===void 0?null:_],et},useContext:Vg,useEffect:vi,useImperativeHandle:function(et,_,_e){return _e=_e!=null?_e.concat([et]):null,ti(4194308,4,yi.bind(null,_,et),_e)},useLayoutEffect:function(et,_){return ti(4194308,4,et,_)},useInsertionEffect:function(et,_){return ti(4,2,et,_)},useMemo:function(et,_){var _e=ci();return _=_===void 0?null:_,et=et(),_e.memoizedState=[et,_],et},useReducer:function(et,_,_e){var tt=ci();return _=_e!==void 0?_e(_):_,tt.memoizedState=tt.baseState=_,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:_},tt.queue=et,et=et.dispatch=Gi.bind(null,N$1,et),[tt.memoizedState,et]},useRef:function(et){var _=ci();return et={current:et},_.memoizedState=et},useState:qi,useDebugValue:Ai,useDeferredValue:function(et){return ci().memoizedState=et},useTransition:function(){var et=qi(!1),_=et[0];return et=Ei.bind(null,et[1]),ci().memoizedState=et,[_,et]},useMutableSource:function(){},useSyncExternalStore:function(et,_,_e){var tt=N$1,nt=ci();if(I$1){if(_e===void 0)throw Error(p$3(407));_e=_e()}else{if(_e=_(),R$2===null)throw Error(p$3(349));Rh&30||ni(tt,_,_e)}nt.memoizedState=_e;var it={value:_e,getSnapshot:_};return nt.queue=it,vi(ki.bind(null,tt,it,et),[et]),tt.flags|=2048,li(9,mi.bind(null,tt,it,_e,_),void 0,null),_e},useId:function(){var et=ci(),_=R$2.identifierPrefix;if(I$1){var _e=sg,tt=rg;_e=(tt&~(1<<32-oc(tt)-1)).toString(32)+_e,_=":"+_+"R"+_e,_e=Uh++,0<_e&&(_+="H"+_e.toString(32)),_+=":"}else _e=Vh++,_=":"+_+"r"+_e.toString(32)+":";return et.memoizedState=_},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var _=di();return Di(_,O$1.memoizedState,et)},useTransition:function(){var et=fi(ei)[0],_=di().memoizedState;return[et,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(et){var _=di();return O$1===null?_.memoizedState=et:Di(_,O$1.memoizedState,et)},useTransition:function(){var et=gi(ei)[0],_=di().memoizedState;return[et,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(et,_){try{var _e="",tt=_;do _e+=Pa(tt),tt=tt.return;while(tt);var nt=_e}catch(it){nt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:et,source:_,stack:nt,digest:null}}function Li(et,_,_e){return{value:et,source:null,stack:_e??null,digest:_??null}}function Mi(et,_){try{console.error(_.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(et,_,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var tt=_.value;return _e.callback=function(){Pi||(Pi=!0,Qi=tt),Mi(et,_)},_e}function Ri(et,_,_e){_e=ch(-1,_e),_e.tag=3;var tt=et.type.getDerivedStateFromError;if(typeof tt=="function"){var nt=_.value;_e.payload=function(){return tt(nt)},_e.callback=function(){Mi(et,_)}}var it=et.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(_e.callback=function(){Mi(et,_),typeof tt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var rt=_.stack;this.componentDidCatch(_.value,{componentStack:rt!==null?rt:""})}),_e}function Ti(et,_,_e){var tt=et.pingCache;if(tt===null){tt=et.pingCache=new Ni;var nt=new Set;tt.set(_,nt)}else nt=tt.get(_),nt===void 0&&(nt=new Set,tt.set(_,nt));nt.has(_e)||(nt.add(_e),et=Ui.bind(null,et,_,_e),_.then(et,et))}function Vi(et){do{var _;if((_=et.tag===13)&&(_=et.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return et;et=et.return}while(et!==null);return null}function Wi(et,_,_e,tt,nt){return et.mode&1?(et.flags|=65536,et.lanes=nt,et):(et===_?et.flags|=65536:(et.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(_=ch(-1,1),_.tag=2,dh(_e,_,1))),_e.lanes|=1),et)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(et,_,_e,tt){_.child=et===null?Ch(_,null,_e,tt):Bh(_,et.child,_e,tt)}function Zi(et,_,_e,tt,nt){_e=_e.render;var it=_.ref;return Tg(_,nt),tt=Xh(et,_,_e,tt,it,nt),_e=bi(),et!==null&&!Ug?(_.updateQueue=et.updateQueue,_.flags&=-2053,et.lanes&=~nt,$i(et,_,nt)):(I$1&&_e&&vg(_),_.flags|=1,Yi(et,_,tt,nt),_.child)}function aj(et,_,_e,tt,nt){if(et===null){var it=_e.type;return typeof it=="function"&&!bj(it)&&it.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(_.tag=15,_.type=it,cj(et,_,it,tt,nt)):(et=yh(_e.type,null,tt,_,_.mode,nt),et.ref=_.ref,et.return=_,_.child=et)}if(it=et.child,!(et.lanes&nt)){var rt=it.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(rt,tt)&&et.ref===_.ref)return $i(et,_,nt)}return _.flags|=1,et=wh(it,tt),et.ref=_.ref,et.return=_,_.child=et}function cj(et,_,_e,tt,nt){if(et!==null){var it=et.memoizedProps;if(Ie(it,tt)&&et.ref===_.ref)if(Ug=!1,_.pendingProps=tt=it,(et.lanes&nt)!==0)et.flags&131072&&(Ug=!0);else return _.lanes=et.lanes,$i(et,_,nt)}return dj(et,_,_e,tt,nt)}function ej(et,_,_e){var tt=_.pendingProps,nt=tt.children,it=et!==null?et.memoizedState:null;if(tt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if(!(_e&1073741824))return et=it!==null?it.baseLanes|_e:_e,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:et,cachePool:null,transitions:null},_.updateQueue=null,G$1(fj,gj),gj|=et,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt=it!==null?it.baseLanes:_e,G$1(fj,gj),gj|=tt}else it!==null?(tt=it.baseLanes|_e,_.memoizedState=null):tt=_e,G$1(fj,gj),gj|=tt;return Yi(et,_,nt,_e),_.child}function hj(et,_){var _e=_.ref;(et===null&&_e!==null||et!==null&&et.ref!==_e)&&(_.flags|=512,_.flags|=2097152)}function dj(et,_,_e,tt,nt){var it=Zf(_e)?Xf:H$1.current;return it=Yf(_,it),Tg(_,nt),_e=Xh(et,_,_e,tt,it,nt),tt=bi(),et!==null&&!Ug?(_.updateQueue=et.updateQueue,_.flags&=-2053,et.lanes&=~nt,$i(et,_,nt)):(I$1&&tt&&vg(_),_.flags|=1,Yi(et,_,_e,nt),_.child)}function ij(et,_,_e,tt,nt){if(Zf(_e)){var it=!0;cg(_)}else it=!1;if(Tg(_,nt),_.stateNode===null)jj(et,_),ph(_,_e,tt),rh(_,_e,tt,nt),tt=!0;else if(et===null){var rt=_.stateNode,st=_.memoizedProps;rt.props=st;var ot=rt.context,at=_e.contextType;typeof at=="object"&&at!==null?at=Vg(at):(at=Zf(_e)?Xf:H$1.current,at=Yf(_,at));var At=_e.getDerivedStateFromProps,lt=typeof At=="function"||typeof rt.getSnapshotBeforeUpdate=="function";lt||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(st!==tt||ot!==at)&&qh(_,rt,tt,at),$g=!1;var gt=_.memoizedState;rt.state=gt,gh(_,tt,rt,nt),ot=_.memoizedState,st!==tt||gt!==ot||Wf.current||$g?(typeof At=="function"&&(kh(_,_e,At,tt),ot=_.memoizedState),(st=$g||oh(_,_e,st,tt,gt,ot,at))?(lt||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount()),typeof rt.componentDidMount=="function"&&(_.flags|=4194308)):(typeof rt.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=tt,_.memoizedState=ot),rt.props=tt,rt.state=ot,rt.context=at,tt=st):(typeof rt.componentDidMount=="function"&&(_.flags|=4194308),tt=!1)}else{rt=_.stateNode,bh(et,_),st=_.memoizedProps,at=_.type===_.elementType?st:Lg(_.type,st),rt.props=at,lt=_.pendingProps,gt=rt.context,ot=_e.contextType,typeof ot=="object"&&ot!==null?ot=Vg(ot):(ot=Zf(_e)?Xf:H$1.current,ot=Yf(_,ot));var ct=_e.getDerivedStateFromProps;(At=typeof ct=="function"||typeof rt.getSnapshotBeforeUpdate=="function")||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(st!==lt||gt!==ot)&&qh(_,rt,tt,ot),$g=!1,gt=_.memoizedState,rt.state=gt,gh(_,tt,rt,nt);var dt=_.memoizedState;st!==lt||gt!==dt||Wf.current||$g?(typeof ct=="function"&&(kh(_,_e,ct,tt),dt=_.memoizedState),(at=$g||oh(_,_e,at,tt,gt,dt,ot)||!1)?(At||typeof rt.UNSAFE_componentWillUpdate!="function"&&typeof rt.componentWillUpdate!="function"||(typeof rt.componentWillUpdate=="function"&&rt.componentWillUpdate(tt,dt,ot),typeof rt.UNSAFE_componentWillUpdate=="function"&&rt.UNSAFE_componentWillUpdate(tt,dt,ot)),typeof rt.componentDidUpdate=="function"&&(_.flags|=4),typeof rt.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof rt.componentDidUpdate!="function"||st===et.memoizedProps&&gt===et.memoizedState||(_.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||st===et.memoizedProps&&gt===et.memoizedState||(_.flags|=1024),_.memoizedProps=tt,_.memoizedState=dt),rt.props=tt,rt.state=dt,rt.context=ot,tt=at):(typeof rt.componentDidUpdate!="function"||st===et.memoizedProps&&gt===et.memoizedState||(_.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||st===et.memoizedProps&&gt===et.memoizedState||(_.flags|=1024),tt=!1)}return kj(et,_,_e,tt,it,nt)}function kj(et,_,_e,tt,nt,it){hj(et,_);var rt=(_.flags&128)!==0;if(!tt&&!rt)return nt&&dg(_,_e,!1),$i(et,_,it);tt=_.stateNode,Xi.current=_;var st=rt&&typeof _e.getDerivedStateFromError!="function"?null:tt.render();return _.flags|=1,et!==null&&rt?(_.child=Bh(_,et.child,null,it),_.child=Bh(_,null,st,it)):Yi(et,_,st,it),_.memoizedState=tt.state,nt&&dg(_,_e,!0),_.child}function lj(et){var _=et.stateNode;_.pendingContext?ag(et,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(et,_.context,!1),Ih(et,_.containerInfo)}function mj(et,_,_e,tt,nt){return Ig(),Jg(nt),_.flags|=256,Yi(et,_,_e,tt),_.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(et){return{baseLanes:et,cachePool:null,transitions:null}}function pj(et,_,_e){var tt=_.pendingProps,nt=M$1.current,it=!1,rt=(_.flags&128)!==0,st;if((st=rt)||(st=et!==null&&et.memoizedState===null?!1:(nt&2)!==0),st?(it=!0,_.flags&=-129):(et===null||et.memoizedState!==null)&&(nt|=1),G$1(M$1,nt&1),et===null)return Eg(_),et=_.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(_.mode&1?et.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(rt=tt.children,et=tt.fallback,it?(tt=_.mode,it=_.child,rt={mode:"hidden",children:rt},!(tt&1)&&it!==null?(it.childLanes=0,it.pendingProps=rt):it=qj(rt,tt,0,null),et=Ah(et,tt,_e,null),it.return=_,et.return=_,it.sibling=et,_.child=it,_.child.memoizedState=oj(_e),_.memoizedState=nj,et):rj(_,rt));if(nt=et.memoizedState,nt!==null&&(st=nt.dehydrated,st!==null))return sj(et,_,rt,tt,st,nt,_e);if(it){it=tt.fallback,rt=_.mode,nt=et.child,st=nt.sibling;var ot={mode:"hidden",children:tt.children};return!(rt&1)&&_.child!==nt?(tt=_.child,tt.childLanes=0,tt.pendingProps=ot,_.deletions=null):(tt=wh(nt,ot),tt.subtreeFlags=nt.subtreeFlags&14680064),st!==null?it=wh(st,it):(it=Ah(it,rt,_e,null),it.flags|=2),it.return=_,tt.return=_,tt.sibling=it,_.child=tt,tt=it,it=_.child,rt=et.child.memoizedState,rt=rt===null?oj(_e):{baseLanes:rt.baseLanes|_e,cachePool:null,transitions:rt.transitions},it.memoizedState=rt,it.childLanes=et.childLanes&~_e,_.memoizedState=nj,tt}return it=et.child,et=it.sibling,tt=wh(it,{mode:"visible",children:tt.children}),!(_.mode&1)&&(tt.lanes=_e),tt.return=_,tt.sibling=null,et!==null&&(_e=_.deletions,_e===null?(_.deletions=[et],_.flags|=16):_e.push(et)),_.child=tt,_.memoizedState=null,tt}function rj(et,_){return _=qj({mode:"visible",children:_},et.mode,0,null),_.return=et,et.child=_}function tj(et,_,_e,tt){return tt!==null&&Jg(tt),Bh(_,et.child,null,_e),et=rj(_,_.pendingProps.children),et.flags|=2,_.memoizedState=null,et}function sj(et,_,_e,tt,nt,it,rt){if(_e)return _.flags&256?(_.flags&=-257,tt=Li(Error(p$3(422))),tj(et,_,rt,tt)):_.memoizedState!==null?(_.child=et.child,_.flags|=128,null):(it=tt.fallback,nt=_.mode,tt=qj({mode:"visible",children:tt.children},nt,0,null),it=Ah(it,nt,rt,null),it.flags|=2,tt.return=_,it.return=_,tt.sibling=it,_.child=tt,_.mode&1&&Bh(_,et.child,null,rt),_.child.memoizedState=oj(rt),_.memoizedState=nj,it);if(!(_.mode&1))return tj(et,_,rt,null);if(nt.data==="$!"){if(tt=nt.nextSibling&&nt.nextSibling.dataset,tt)var st=tt.dgst;return tt=st,it=Error(p$3(419)),tt=Li(it,tt,void 0),tj(et,_,rt,tt)}if(st=(rt&et.childLanes)!==0,Ug||st){if(tt=R$2,tt!==null){switch(rt&-rt){case 4:nt=2;break;case 16:nt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nt=32;break;case 536870912:nt=268435456;break;default:nt=0}nt=nt&(tt.suspendedLanes|rt)?0:nt,nt!==0&&nt!==it.retryLane&&(it.retryLane=nt,Zg(et,nt),mh(tt,et,nt,-1))}return uj(),tt=Li(Error(p$3(421))),tj(et,_,rt,tt)}return nt.data==="$?"?(_.flags|=128,_.child=et.child,_=vj.bind(null,et),nt._reactRetry=_,null):(et=it.treeContext,yg=Lf(nt.nextSibling),xg=_,I$1=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=_),_=rj(_,tt.children),_.flags|=4096,_)}function wj(et,_,_e){et.lanes|=_;var tt=et.alternate;tt!==null&&(tt.lanes|=_),Sg(et.return,_,_e)}function xj(et,_,_e,tt,nt){var it=et.memoizedState;it===null?et.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:tt,tail:_e,tailMode:nt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=tt,it.tail=_e,it.tailMode=nt)}function yj(et,_,_e){var tt=_.pendingProps,nt=tt.revealOrder,it=tt.tail;if(Yi(et,_,tt.children,_e),tt=M$1.current,tt&2)tt=tt&1|2,_.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=_.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&wj(et,_e,_);else if(et.tag===19)wj(et,_e,_);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_)break e;for(;et.sibling===null;){if(et.return===null||et.return===_)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}tt&=1}if(G$1(M$1,tt),!(_.mode&1))_.memoizedState=null;else switch(nt){case"forwards":for(_e=_.child,nt=null;_e!==null;)et=_e.alternate,et!==null&&Mh(et)===null&&(nt=_e),_e=_e.sibling;_e=nt,_e===null?(nt=_.child,_.child=null):(nt=_e.sibling,_e.sibling=null),xj(_,!1,nt,_e,it);break;case"backwards":for(_e=null,nt=_.child,_.child=null;nt!==null;){if(et=nt.alternate,et!==null&&Mh(et)===null){_.child=nt;break}et=nt.sibling,nt.sibling=_e,_e=nt,nt=et}xj(_,!0,_e,null,it);break;case"together":xj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function jj(et,_){!(_.mode&1)&&et!==null&&(et.alternate=null,_.alternate=null,_.flags|=2)}function $i(et,_,_e){if(et!==null&&(_.dependencies=et.dependencies),hh|=_.lanes,!(_e&_.childLanes))return null;if(et!==null&&_.child!==et.child)throw Error(p$3(153));if(_.child!==null){for(et=_.child,_e=wh(et,et.pendingProps),_.child=_e,_e.return=_;et.sibling!==null;)et=et.sibling,_e=_e.sibling=wh(et,et.pendingProps),_e.return=_;_e.sibling=null}return _.child}function zj(et,_,_e){switch(_.tag){case 3:lj(_),Ig();break;case 5:Kh(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:Ih(_,_.stateNode.containerInfo);break;case 10:var tt=_.type._context,nt=_.memoizedProps.value;G$1(Mg,tt._currentValue),tt._currentValue=nt;break;case 13:if(tt=_.memoizedState,tt!==null)return tt.dehydrated!==null?(G$1(M$1,M$1.current&1),_.flags|=128,null):_e&_.child.childLanes?pj(et,_,_e):(G$1(M$1,M$1.current&1),et=$i(et,_,_e),et!==null?et.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(tt=(_e&_.childLanes)!==0,et.flags&128){if(tt)return yj(et,_,_e);_.flags|=128}if(nt=_.memoizedState,nt!==null&&(nt.rendering=null,nt.tail=null,nt.lastEffect=null),G$1(M$1,M$1.current),tt)break;return null;case 22:case 23:return _.lanes=0,ej(et,_,_e)}return $i(et,_,_e)}var Aj,Bj,Cj,Dj;Aj=function(et,_){for(var _e=_.child;_e!==null;){if(_e.tag===5||_e.tag===6)et.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(et,_,_e,tt){var nt=et.memoizedProps;if(nt!==tt){et=_.stateNode,Hh(Eh.current);var it=null;switch(_e){case"input":nt=Ya(et,nt),tt=Ya(et,tt),it=[];break;case"select":nt=A$1({},nt,{value:void 0}),tt=A$1({},tt,{value:void 0}),it=[];break;case"textarea":nt=gb(et,nt),tt=gb(et,tt),it=[];break;default:typeof nt.onClick!="function"&&typeof tt.onClick=="function"&&(et.onclick=Bf)}ub(_e,tt);var rt;_e=null;for(at in nt)if(!tt.hasOwnProperty(at)&&nt.hasOwnProperty(at)&&nt[at]!=null)if(at==="style"){var st=nt[at];for(rt in st)st.hasOwnProperty(rt)&&(_e||(_e={}),_e[rt]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(ea.hasOwnProperty(at)?it||(it=[]):(it=it||[]).push(at,null));for(at in tt){var ot=tt[at];if(st=nt!=null?nt[at]:void 0,tt.hasOwnProperty(at)&&ot!==st&&(ot!=null||st!=null))if(at==="style")if(st){for(rt in st)!st.hasOwnProperty(rt)||ot&&ot.hasOwnProperty(rt)||(_e||(_e={}),_e[rt]="");for(rt in ot)ot.hasOwnProperty(rt)&&st[rt]!==ot[rt]&&(_e||(_e={}),_e[rt]=ot[rt])}else _e||(it||(it=[]),it.push(at,_e)),_e=ot;else at==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,st=st?st.__html:void 0,ot!=null&&st!==ot&&(it=it||[]).push(at,ot)):at==="children"?typeof ot!="string"&&typeof ot!="number"||(it=it||[]).push(at,""+ot):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(ea.hasOwnProperty(at)?(ot!=null&&at==="onScroll"&&D$1("scroll",et),it||st===ot||(it=[])):(it=it||[]).push(at,ot))}_e&&(it=it||[]).push("style",_e);var at=it;(_.updateQueue=at)&&(_.flags|=4)}};Dj=function(et,_,_e,tt){_e!==tt&&(_.flags|=4)};function Ej(et,_){if(!I$1)switch(et.tailMode){case"hidden":_=et.tail;for(var _e=null;_!==null;)_.alternate!==null&&(_e=_),_=_.sibling;_e===null?et.tail=null:_e.sibling=null;break;case"collapsed":_e=et.tail;for(var tt=null;_e!==null;)_e.alternate!==null&&(tt=_e),_e=_e.sibling;tt===null?_||et.tail===null?et.tail=null:et.tail.sibling=null:tt.sibling=null}}function S$1(et){var _=et.alternate!==null&&et.alternate.child===et.child,_e=0,tt=0;if(_)for(var nt=et.child;nt!==null;)_e|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags&14680064,tt|=nt.flags&14680064,nt.return=et,nt=nt.sibling;else for(nt=et.child;nt!==null;)_e|=nt.lanes|nt.childLanes,tt|=nt.subtreeFlags,tt|=nt.flags,nt.return=et,nt=nt.sibling;return et.subtreeFlags|=tt,et.childLanes=_e,_}function Fj(et,_,_e){var tt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_),null;case 1:return Zf(_.type)&&$f(),S$1(_),null;case 3:return tt=_.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),tt.pendingContext&&(tt.context=tt.pendingContext,tt.pendingContext=null),(et===null||et.child===null)&&(Gg(_)?_.flags|=4:et===null||et.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(et,_),S$1(_),null;case 5:Lh(_);var nt=Hh(Gh.current);if(_e=_.type,et!==null&&_.stateNode!=null)Cj(et,_,_e,tt,nt),et.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!tt){if(_.stateNode===null)throw Error(p$3(166));return S$1(_),null}if(et=Hh(Eh.current),Gg(_)){tt=_.stateNode,_e=_.type;var it=_.memoizedProps;switch(tt[Of]=_,tt[Pf]=it,et=(_.mode&1)!==0,_e){case"dialog":D$1("cancel",tt),D$1("close",tt);break;case"iframe":case"object":case"embed":D$1("load",tt);break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D$1(lf[nt],tt);break;case"source":D$1("error",tt);break;case"img":case"image":case"link":D$1("error",tt),D$1("load",tt);break;case"details":D$1("toggle",tt);break;case"input":Za(tt,it),D$1("invalid",tt);break;case"select":tt._wrapperState={wasMultiple:!!it.multiple},D$1("invalid",tt);break;case"textarea":hb(tt,it),D$1("invalid",tt)}ub(_e,it),nt=null;for(var rt in it)if(it.hasOwnProperty(rt)){var st=it[rt];rt==="children"?typeof st=="string"?tt.textContent!==st&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,st,et),nt=["children",st]):typeof st=="number"&&tt.textContent!==""+st&&(it.suppressHydrationWarning!==!0&&Af(tt.textContent,st,et),nt=["children",""+st]):ea.hasOwnProperty(rt)&&st!=null&&rt==="onScroll"&&D$1("scroll",tt)}switch(_e){case"input":Va(tt),db(tt,it,!0);break;case"textarea":Va(tt),jb(tt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(tt.onclick=Bf)}tt=nt,_.updateQueue=tt,tt!==null&&(_.flags|=4)}else{rt=nt.nodeType===9?nt:nt.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb(_e)),et==="http://www.w3.org/1999/xhtml"?_e==="script"?(et=rt.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof tt.is=="string"?et=rt.createElement(_e,{is:tt.is}):(et=rt.createElement(_e),_e==="select"&&(rt=et,tt.multiple?rt.multiple=!0:tt.size&&(rt.size=tt.size))):et=rt.createElementNS(et,_e),et[Of]=_,et[Pf]=tt,Aj(et,_,!1,!1),_.stateNode=et;e:{switch(rt=vb(_e,tt),_e){case"dialog":D$1("cancel",et),D$1("close",et),nt=tt;break;case"iframe":case"object":case"embed":D$1("load",et),nt=tt;break;case"video":case"audio":for(nt=0;nt<lf.length;nt++)D$1(lf[nt],et);nt=tt;break;case"source":D$1("error",et),nt=tt;break;case"img":case"image":case"link":D$1("error",et),D$1("load",et),nt=tt;break;case"details":D$1("toggle",et),nt=tt;break;case"input":Za(et,tt),nt=Ya(et,tt),D$1("invalid",et);break;case"option":nt=tt;break;case"select":et._wrapperState={wasMultiple:!!tt.multiple},nt=A$1({},tt,{value:void 0}),D$1("invalid",et);break;case"textarea":hb(et,tt),nt=gb(et,tt),D$1("invalid",et);break;default:nt=tt}ub(_e,nt),st=nt;for(it in st)if(st.hasOwnProperty(it)){var ot=st[it];it==="style"?sb(et,ot):it==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&nb(et,ot)):it==="children"?typeof ot=="string"?(_e!=="textarea"||ot!=="")&&ob(et,ot):typeof ot=="number"&&ob(et,""+ot):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?ot!=null&&it==="onScroll"&&D$1("scroll",et):ot!=null&&ta(et,it,ot,rt))}switch(_e){case"input":Va(et),db(et,tt,!1);break;case"textarea":Va(et),jb(et);break;case"option":tt.value!=null&&et.setAttribute("value",""+Sa(tt.value));break;case"select":et.multiple=!!tt.multiple,it=tt.value,it!=null?fb(et,!!tt.multiple,it,!1):tt.defaultValue!=null&&fb(et,!!tt.multiple,tt.defaultValue,!0);break;default:typeof nt.onClick=="function"&&(et.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":tt=!!tt.autoFocus;break e;case"img":tt=!0;break e;default:tt=!1}}tt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$1(_),null;case 6:if(et&&_.stateNode!=null)Dj(et,_,et.memoizedProps,tt);else{if(typeof tt!="string"&&_.stateNode===null)throw Error(p$3(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(_)){if(tt=_.stateNode,_e=_.memoizedProps,tt[Of]=_,(it=tt.nodeValue!==_e)&&(et=xg,et!==null))switch(et.tag){case 3:Af(tt.nodeValue,_e,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(tt.nodeValue,_e,(et.mode&1)!==0)}it&&(_.flags|=4)}else tt=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(tt),tt[Of]=_,_.stateNode=tt}return S$1(_),null;case 13:if(E$1(M$1),tt=_.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),tt!==null&&tt.dehydrated!==null){if(et===null){if(!it)throw Error(p$3(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$1(_),it=!1}else zg!==null&&(Gj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=_e,_):(tt=tt!==null,tt!==(et!==null&&et.memoizedState!==null)&&tt&&(_.child.flags|=8192,_.mode&1&&(et===null||M$1.current&1?T$1===0&&(T$1=3):uj())),_.updateQueue!==null&&(_.flags|=4),S$1(_),null);case 4:return Jh(),Bj(et,_),et===null&&sf(_.stateNode.containerInfo),S$1(_),null;case 10:return Rg(_.type._context),S$1(_),null;case 17:return Zf(_.type)&&$f(),S$1(_),null;case 19:if(E$1(M$1),it=_.memoizedState,it===null)return S$1(_),null;if(tt=(_.flags&128)!==0,rt=it.rendering,rt===null)if(tt)Ej(it,!1);else{if(T$1!==0||et!==null&&et.flags&128)for(et=_.child;et!==null;){if(rt=Mh(et),rt!==null){for(_.flags|=128,Ej(it,!1),tt=rt.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),_.subtreeFlags=0,tt=_e,_e=_.child;_e!==null;)it=_e,et=tt,it.flags&=14680066,rt=it.alternate,rt===null?(it.childLanes=0,it.lanes=et,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=rt.childLanes,it.lanes=rt.lanes,it.child=rt.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=rt.memoizedProps,it.memoizedState=rt.memoizedState,it.updateQueue=rt.updateQueue,it.type=rt.type,et=rt.dependencies,it.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),_e=_e.sibling;return G$1(M$1,M$1.current&1|2),_.child}et=et.sibling}it.tail!==null&&B$1()>Hj&&(_.flags|=128,tt=!0,Ej(it,!1),_.lanes=4194304)}else{if(!tt)if(et=Mh(rt),et!==null){if(_.flags|=128,tt=!0,_e=et.updateQueue,_e!==null&&(_.updateQueue=_e,_.flags|=4),Ej(it,!0),it.tail===null&&it.tailMode==="hidden"&&!rt.alternate&&!I$1)return S$1(_),null}else 2*B$1()-it.renderingStartTime>Hj&&_e!==1073741824&&(_.flags|=128,tt=!0,Ej(it,!1),_.lanes=4194304);it.isBackwards?(rt.sibling=_.child,_.child=rt):(_e=it.last,_e!==null?_e.sibling=rt:_.child=rt,it.last=rt)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B$1(),_.sibling=null,_e=M$1.current,G$1(M$1,tt?_e&1|2:_e&1),_):(S$1(_),null);case 22:case 23:return Ij(),tt=_.memoizedState!==null,et!==null&&et.memoizedState!==null!==tt&&(_.flags|=8192),tt&&_.mode&1?gj&1073741824&&(S$1(_),_.subtreeFlags&6&&(_.flags|=8192)):S$1(_),null;case 24:return null;case 25:return null}throw Error(p$3(156,_.tag))}function Jj(et,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),et=_.flags,et&65536?(_.flags=et&-65537|128,_):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),et=_.flags,et&65536&&!(et&128)?(_.flags=et&-65537|128,_):null;case 5:return Lh(_),null;case 13:if(E$1(M$1),et=_.memoizedState,et!==null&&et.dehydrated!==null){if(_.alternate===null)throw Error(p$3(340));Ig()}return et=_.flags,et&65536?(_.flags=et&-65537|128,_):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(_.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(et,_){var _e=et.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(tt){W$1(et,_,tt)}else _e.current=null}function Nj(et,_,_e){try{_e()}catch(tt){W$1(et,_,tt)}}var Oj=!1;function Pj(et,_){if(Cf=dd,et=Me(),Ne(et)){if("selectionStart"in et)var _e={start:et.selectionStart,end:et.selectionEnd};else e:{_e=(_e=et.ownerDocument)&&_e.defaultView||window;var tt=_e.getSelection&&_e.getSelection();if(tt&&tt.rangeCount!==0){_e=tt.anchorNode;var nt=tt.anchorOffset,it=tt.focusNode;tt=tt.focusOffset;try{_e.nodeType,it.nodeType}catch{_e=null;break e}var rt=0,st=-1,ot=-1,at=0,At=0,lt=et,gt=null;t:for(;;){for(var ct;lt!==_e||nt!==0&&lt.nodeType!==3||(st=rt+nt),lt!==it||tt!==0&&lt.nodeType!==3||(ot=rt+tt),lt.nodeType===3&&(rt+=lt.nodeValue.length),(ct=lt.firstChild)!==null;)gt=lt,lt=ct;for(;;){if(lt===et)break t;if(gt===_e&&++at===nt&&(st=rt),gt===it&&++At===tt&&(ot=rt),(ct=lt.nextSibling)!==null)break;lt=gt,gt=lt.parentNode}lt=ct}_e=st===-1||ot===-1?null:{start:st,end:ot}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:et,selectionRange:_e},dd=!1,V$1=_;V$1!==null;)if(_=V$1,et=_.child,(_.subtreeFlags&1028)!==0&&et!==null)et.return=_,V$1=et;else for(;V$1!==null;){_=V$1;try{var dt=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ht=dt.memoizedProps,mt=dt.memoizedState,Ct=_.stateNode,ft=Ct.getSnapshotBeforeUpdate(_.elementType===_.type?ht:Lg(_.type,ht),mt);Ct.__reactInternalSnapshotBeforeUpdate=ft}break;case 3:var pt=_.stateNode.containerInfo;pt.nodeType===1?pt.textContent="":pt.nodeType===9&&pt.documentElement&&pt.removeChild(pt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(Vt){W$1(_,_.return,Vt)}if(et=_.sibling,et!==null){et.return=_.return,V$1=et;break}V$1=_.return}return dt=Oj,Oj=!1,dt}function Qj(et,_,_e){var tt=_.updateQueue;if(tt=tt!==null?tt.lastEffect:null,tt!==null){var nt=tt=tt.next;do{if((nt.tag&et)===et){var it=nt.destroy;nt.destroy=void 0,it!==void 0&&Nj(_,_e,it)}nt=nt.next}while(nt!==tt)}}function Rj(et,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var _e=_=_.next;do{if((_e.tag&et)===et){var tt=_e.create;_e.destroy=tt()}_e=_e.next}while(_e!==_)}}function Sj(et){var _=et.ref;if(_!==null){var _e=et.stateNode;switch(et.tag){case 5:et=_e;break;default:et=_e}typeof _=="function"?_(et):_.current=et}}function Tj(et){var _=et.alternate;_!==null&&(et.alternate=null,Tj(_)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(_=et.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Uj(et){return et.tag===5||et.tag===3||et.tag===4}function Vj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Uj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Wj(et,_,_e){var tt=et.tag;if(tt===5||tt===6)et=et.stateNode,_?_e.nodeType===8?_e.parentNode.insertBefore(et,_):_e.insertBefore(et,_):(_e.nodeType===8?(_=_e.parentNode,_.insertBefore(et,_e)):(_=_e,_.appendChild(et)),_e=_e._reactRootContainer,_e!=null||_.onclick!==null||(_.onclick=Bf));else if(tt!==4&&(et=et.child,et!==null))for(Wj(et,_,_e),et=et.sibling;et!==null;)Wj(et,_,_e),et=et.sibling}function Xj(et,_,_e){var tt=et.tag;if(tt===5||tt===6)et=et.stateNode,_?_e.insertBefore(et,_):_e.appendChild(et);else if(tt!==4&&(et=et.child,et!==null))for(Xj(et,_,_e),et=et.sibling;et!==null;)Xj(et,_,_e),et=et.sibling}var X$1=null,Yj=!1;function Zj(et,_,_e){for(_e=_e.child;_e!==null;)ak(et,_,_e),_e=_e.sibling}function ak(et,_,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U$1||Mj(_e,_);case 6:var tt=X$1,nt=Yj;X$1=null,Zj(et,_,_e),X$1=tt,Yj=nt,X$1!==null&&(Yj?(et=X$1,_e=_e.stateNode,et.nodeType===8?et.parentNode.removeChild(_e):et.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(et=X$1,_e=_e.stateNode,et.nodeType===8?Kf(et.parentNode,_e):et.nodeType===1&&Kf(et,_e),bd(et)):Kf(X$1,_e.stateNode));break;case 4:tt=X$1,nt=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(et,_,_e),X$1=tt,Yj=nt;break;case 0:case 11:case 14:case 15:if(!U$1&&(tt=_e.updateQueue,tt!==null&&(tt=tt.lastEffect,tt!==null))){nt=tt=tt.next;do{var it=nt,rt=it.destroy;it=it.tag,rt!==void 0&&(it&2||it&4)&&Nj(_e,_,rt),nt=nt.next}while(nt!==tt)}Zj(et,_,_e);break;case 1:if(!U$1&&(Mj(_e,_),tt=_e.stateNode,typeof tt.componentWillUnmount=="function"))try{tt.props=_e.memoizedProps,tt.state=_e.memoizedState,tt.componentWillUnmount()}catch(st){W$1(_e,_,st)}Zj(et,_,_e);break;case 21:Zj(et,_,_e);break;case 22:_e.mode&1?(U$1=(tt=U$1)||_e.memoizedState!==null,Zj(et,_,_e),U$1=tt):Zj(et,_,_e);break;default:Zj(et,_,_e)}}function bk(et){var _=et.updateQueue;if(_!==null){et.updateQueue=null;var _e=et.stateNode;_e===null&&(_e=et.stateNode=new Lj),_.forEach(function(tt){var nt=ck.bind(null,et,tt);_e.has(tt)||(_e.add(tt),tt.then(nt,nt))})}}function dk(et,_){var _e=_.deletions;if(_e!==null)for(var tt=0;tt<_e.length;tt++){var nt=_e[tt];try{var it=et,rt=_,st=rt;e:for(;st!==null;){switch(st.tag){case 5:X$1=st.stateNode,Yj=!1;break e;case 3:X$1=st.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=st.stateNode.containerInfo,Yj=!0;break e}st=st.return}if(X$1===null)throw Error(p$3(160));ak(it,rt,nt),X$1=null,Yj=!1;var ot=nt.alternate;ot!==null&&(ot.return=null),nt.return=null}catch(at){W$1(nt,_,at)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)ek(_,et),_=_.sibling}function ek(et,_){var _e=et.alternate,tt=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(dk(_,et),fk(et),tt&4){try{Qj(3,et,et.return),Rj(3,et)}catch(ht){W$1(et,et.return,ht)}try{Qj(5,et,et.return)}catch(ht){W$1(et,et.return,ht)}}break;case 1:dk(_,et),fk(et),tt&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(_,et),fk(et),tt&512&&_e!==null&&Mj(_e,_e.return),et.flags&32){var nt=et.stateNode;try{ob(nt,"")}catch(ht){W$1(et,et.return,ht)}}if(tt&4&&(nt=et.stateNode,nt!=null)){var it=et.memoizedProps,rt=_e!==null?_e.memoizedProps:it,st=et.type,ot=et.updateQueue;if(et.updateQueue=null,ot!==null)try{st==="input"&&it.type==="radio"&&it.name!=null&&ab(nt,it),vb(st,rt);var at=vb(st,it);for(rt=0;rt<ot.length;rt+=2){var At=ot[rt],lt=ot[rt+1];At==="style"?sb(nt,lt):At==="dangerouslySetInnerHTML"?nb(nt,lt):At==="children"?ob(nt,lt):ta(nt,At,lt,at)}switch(st){case"input":bb(nt,it);break;case"textarea":ib(nt,it);break;case"select":var gt=nt._wrapperState.wasMultiple;nt._wrapperState.wasMultiple=!!it.multiple;var ct=it.value;ct!=null?fb(nt,!!it.multiple,ct,!1):gt!==!!it.multiple&&(it.defaultValue!=null?fb(nt,!!it.multiple,it.defaultValue,!0):fb(nt,!!it.multiple,it.multiple?[]:"",!1))}nt[Pf]=it}catch(ht){W$1(et,et.return,ht)}}break;case 6:if(dk(_,et),fk(et),tt&4){if(et.stateNode===null)throw Error(p$3(162));nt=et.stateNode,it=et.memoizedProps;try{nt.nodeValue=it}catch(ht){W$1(et,et.return,ht)}}break;case 3:if(dk(_,et),fk(et),tt&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(ht){W$1(et,et.return,ht)}break;case 4:dk(_,et),fk(et);break;case 13:dk(_,et),fk(et),nt=et.child,nt.flags&8192&&(it=nt.memoizedState!==null,nt.stateNode.isHidden=it,!it||nt.alternate!==null&&nt.alternate.memoizedState!==null||(gk=B$1())),tt&4&&bk(et);break;case 22:if(At=_e!==null&&_e.memoizedState!==null,et.mode&1?(U$1=(at=U$1)||At,dk(_,et),U$1=at):dk(_,et),fk(et),tt&8192){if(at=et.memoizedState!==null,(et.stateNode.isHidden=at)&&!At&&et.mode&1)for(V$1=et,At=et.child;At!==null;){for(lt=V$1=At;V$1!==null;){switch(gt=V$1,ct=gt.child,gt.tag){case 0:case 11:case 14:case 15:Qj(4,gt,gt.return);break;case 1:Mj(gt,gt.return);var dt=gt.stateNode;if(typeof dt.componentWillUnmount=="function"){tt=gt,_e=gt.return;try{_=tt,dt.props=_.memoizedProps,dt.state=_.memoizedState,dt.componentWillUnmount()}catch(ht){W$1(tt,_e,ht)}}break;case 5:Mj(gt,gt.return);break;case 22:if(gt.memoizedState!==null){hk(lt);continue}}ct!==null?(ct.return=gt,V$1=ct):hk(lt)}At=At.sibling}e:for(At=null,lt=et;;){if(lt.tag===5){if(At===null){At=lt;try{nt=lt.stateNode,at?(it=nt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(st=lt.stateNode,ot=lt.memoizedProps.style,rt=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,st.style.display=rb("display",rt))}catch(ht){W$1(et,et.return,ht)}}}else if(lt.tag===6){if(At===null)try{lt.stateNode.nodeValue=at?"":lt.memoizedProps}catch(ht){W$1(et,et.return,ht)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===et)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===et)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===et)break e;At===lt&&(At=null),lt=lt.return}At===lt&&(At=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:dk(_,et),fk(et),tt&4&&bk(et);break;case 21:break;default:dk(_,et),fk(et)}}function fk(et){var _=et.flags;if(_&2){try{e:{for(var _e=et.return;_e!==null;){if(Uj(_e)){var tt=_e;break e}_e=_e.return}throw Error(p$3(160))}switch(tt.tag){case 5:var nt=tt.stateNode;tt.flags&32&&(ob(nt,""),tt.flags&=-33);var it=Vj(et);Xj(et,it,nt);break;case 3:case 4:var rt=tt.stateNode.containerInfo,st=Vj(et);Wj(et,st,rt);break;default:throw Error(p$3(161))}}catch(ot){W$1(et,et.return,ot)}et.flags&=-3}_&4096&&(et.flags&=-4097)}function ik(et,_,_e){V$1=et,jk(et)}function jk(et,_,_e){for(var tt=(et.mode&1)!==0;V$1!==null;){var nt=V$1,it=nt.child;if(nt.tag===22&&tt){var rt=nt.memoizedState!==null||Kj;if(!rt){var st=nt.alternate,ot=st!==null&&st.memoizedState!==null||U$1;st=Kj;var at=U$1;if(Kj=rt,(U$1=ot)&&!at)for(V$1=nt;V$1!==null;)rt=V$1,ot=rt.child,rt.tag===22&&rt.memoizedState!==null?kk(nt):ot!==null?(ot.return=rt,V$1=ot):kk(nt);for(;it!==null;)V$1=it,jk(it),it=it.sibling;V$1=nt,Kj=st,U$1=at}lk(et)}else nt.subtreeFlags&8772&&it!==null?(it.return=nt,V$1=it):lk(et)}}function lk(et){for(;V$1!==null;){var _=V$1;if(_.flags&8772){var _e=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U$1||Rj(5,_);break;case 1:var tt=_.stateNode;if(_.flags&4&&!U$1)if(_e===null)tt.componentDidMount();else{var nt=_.elementType===_.type?_e.memoizedProps:Lg(_.type,_e.memoizedProps);tt.componentDidUpdate(nt,_e.memoizedState,tt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&ih(_,it,tt);break;case 3:var rt=_.updateQueue;if(rt!==null){if(_e=null,_.child!==null)switch(_.child.tag){case 5:_e=_.child.stateNode;break;case 1:_e=_.child.stateNode}ih(_,rt,_e)}break;case 5:var st=_.stateNode;if(_e===null&&_.flags&4){_e=st;var ot=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&_e.focus();break;case"img":ot.src&&(_e.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var at=_.alternate;if(at!==null){var At=at.memoizedState;if(At!==null){var lt=At.dehydrated;lt!==null&&bd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$1||_.flags&512&&Sj(_)}catch(gt){W$1(_,_.return,gt)}}if(_===et){V$1=null;break}if(_e=_.sibling,_e!==null){_e.return=_.return,V$1=_e;break}V$1=_.return}}function hk(et){for(;V$1!==null;){var _=V$1;if(_===et){V$1=null;break}var _e=_.sibling;if(_e!==null){_e.return=_.return,V$1=_e;break}V$1=_.return}}function kk(et){for(;V$1!==null;){var _=V$1;try{switch(_.tag){case 0:case 11:case 15:var _e=_.return;try{Rj(4,_)}catch(ot){W$1(_,_e,ot)}break;case 1:var tt=_.stateNode;if(typeof tt.componentDidMount=="function"){var nt=_.return;try{tt.componentDidMount()}catch(ot){W$1(_,nt,ot)}}var it=_.return;try{Sj(_)}catch(ot){W$1(_,it,ot)}break;case 5:var rt=_.return;try{Sj(_)}catch(ot){W$1(_,rt,ot)}}}catch(ot){W$1(_,_.return,ot)}if(_===et){V$1=null;break}var st=_.sibling;if(st!==null){st.return=_.return,V$1=st;break}V$1=_.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$2=null,Y$1=null,Z=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(et){return et.mode&1?K$1&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(et=C$1,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function mh(et,_,_e,tt){if(50<zk)throw zk=0,Ak=null,Error(p$3(185));Ac(et,_e,tt),(!(K$1&2)||et!==R$2)&&(et===R$2&&(!(K$1&2)&&(rk|=_e),T$1===4&&Dk(et,Z)),Ek(et,tt),_e===1&&K$1===0&&!(_.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(et,_){var _e=et.callbackNode;wc(et,_);var tt=uc(et,et===R$2?Z:0);if(tt===0)_e!==null&&bc(_e),et.callbackNode=null,et.callbackPriority=0;else if(_=tt&-tt,et.callbackPriority!==_){if(_e!=null&&bc(_e),_===1)et.tag===0?ig(Fk.bind(null,et)):hg(Fk.bind(null,et)),Jf(function(){!(K$1&6)&&jg()}),_e=null;else{switch(Dc(tt)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,et))}et.callbackPriority=_,et.callbackNode=_e}}function Hk(et,_){if(Bk=-1,Ck=0,K$1&6)throw Error(p$3(327));var _e=et.callbackNode;if(Ik()&&et.callbackNode!==_e)return null;var tt=uc(et,et===R$2?Z:0);if(tt===0)return null;if(tt&30||tt&et.expiredLanes||_)_=Jk(et,tt);else{_=tt;var nt=K$1;K$1|=2;var it=Kk();(R$2!==et||Z!==_)&&(vk=null,Hj=B$1()+500,Lk(et,_));do try{Mk();break}catch(st){Nk(et,st)}while(1);Qg(),nk.current=it,K$1=nt,Y$1!==null?_=0:(R$2=null,Z=0,_=T$1)}if(_!==0){if(_===2&&(nt=xc(et),nt!==0&&(tt=nt,_=Ok(et,nt))),_===1)throw _e=qk,Lk(et,0),Dk(et,tt),Ek(et,B$1()),_e;if(_===6)Dk(et,tt);else{if(nt=et.current.alternate,!(tt&30)&&!Pk(nt)&&(_=Jk(et,tt),_===2&&(it=xc(et),it!==0&&(tt=it,_=Ok(et,it))),_===1))throw _e=qk,Lk(et,0),Dk(et,tt),Ek(et,B$1()),_e;switch(et.finishedWork=nt,et.finishedLanes=tt,_){case 0:case 1:throw Error(p$3(345));case 2:Qk(et,uk,vk);break;case 3:if(Dk(et,tt),(tt&130023424)===tt&&(_=gk+500-B$1(),10<_)){if(uc(et,0)!==0)break;if(nt=et.suspendedLanes,(nt&tt)!==tt){L$1(),et.pingedLanes|=et.suspendedLanes&nt;break}et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),_);break}Qk(et,uk,vk);break;case 4:if(Dk(et,tt),(tt&4194240)===tt)break;for(_=et.eventTimes,nt=-1;0<tt;){var rt=31-oc(tt);it=1<<rt,rt=_[rt],rt>nt&&(nt=rt),tt&=~it}if(tt=nt,tt=B$1()-tt,tt=(120>tt?120:480>tt?480:1080>tt?1080:1920>tt?1920:3e3>tt?3e3:4320>tt?4320:1960*mk(tt/1960))-tt,10<tt){et.timeoutHandle=Ff(Qk.bind(null,et,uk,vk),tt);break}Qk(et,uk,vk);break;case 5:Qk(et,uk,vk);break;default:throw Error(p$3(329))}}}return Ek(et,B$1()),et.callbackNode===_e?Hk.bind(null,et):null}function Ok(et,_){var _e=tk;return et.current.memoizedState.isDehydrated&&(Lk(et,_).flags|=256),et=Jk(et,_),et!==2&&(_=uk,uk=_e,_!==null&&Gj(_)),et}function Gj(et){uk===null?uk=et:uk.push.apply(uk,et)}function Pk(et){for(var _=et;;){if(_.flags&16384){var _e=_.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var tt=0;tt<_e.length;tt++){var nt=_e[tt],it=nt.getSnapshot;nt=nt.value;try{if(!He(it(),nt))return!1}catch{return!1}}}if(_e=_.child,_.subtreeFlags&16384&&_e!==null)_e.return=_,_=_e;else{if(_===et)break;for(;_.sibling===null;){if(_.return===null||_.return===et)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Dk(et,_){for(_&=~sk,_&=~rk,et.suspendedLanes|=_,et.pingedLanes&=~_,et=et.expirationTimes;0<_;){var _e=31-oc(_),tt=1<<_e;et[_e]=-1,_&=~tt}}function Fk(et){if(K$1&6)throw Error(p$3(327));Ik();var _=uc(et,0);if(!(_&1))return Ek(et,B$1()),null;var _e=Jk(et,_);if(et.tag!==0&&_e===2){var tt=xc(et);tt!==0&&(_=tt,_e=Ok(et,tt))}if(_e===1)throw _e=qk,Lk(et,0),Dk(et,_),Ek(et,B$1()),_e;if(_e===6)throw Error(p$3(345));return et.finishedWork=et.current.alternate,et.finishedLanes=_,Qk(et,uk,vk),Ek(et,B$1()),null}function Rk(et,_){var _e=K$1;K$1|=1;try{return et(_)}finally{K$1=_e,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(et){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var _=K$1;K$1|=1;var _e=pk.transition,tt=C$1;try{if(pk.transition=null,C$1=1,et)return et()}finally{C$1=tt,pk.transition=_e,K$1=_,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(et,_){et.finishedWork=null,et.finishedLanes=0;var _e=et.timeoutHandle;if(_e!==-1&&(et.timeoutHandle=-1,Gf(_e)),Y$1!==null)for(_e=Y$1.return;_e!==null;){var tt=_e;switch(wg(tt),tt.tag){case 1:tt=tt.type.childContextTypes,tt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(tt);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(tt.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R$2=et,Y$1=et=wh(et.current,null),Z=gj=_,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_=0;_<Wg.length;_++)if(_e=Wg[_],tt=_e.interleaved,tt!==null){_e.interleaved=null;var nt=tt.next,it=_e.pending;if(it!==null){var rt=it.next;it.next=nt,tt.next=rt}_e.pending=tt}Wg=null}return et}function Nk(et,_){do{var _e=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var tt=N$1.memoizedState;tt!==null;){var nt=tt.queue;nt!==null&&(nt.pending=null),tt=tt.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$1=1,qk=_,Y$1=null;break}e:{var it=et,rt=_e.return,st=_e,ot=_;if(_=Z,st.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var at=ot,At=st,lt=At.tag;if(!(At.mode&1)&&(lt===0||lt===11||lt===15)){var gt=At.alternate;gt?(At.updateQueue=gt.updateQueue,At.memoizedState=gt.memoizedState,At.lanes=gt.lanes):(At.updateQueue=null,At.memoizedState=null)}var ct=Vi(rt);if(ct!==null){ct.flags&=-257,Wi(ct,rt,st,it,_),ct.mode&1&&Ti(it,at,_),_=ct,ot=at;var dt=_.updateQueue;if(dt===null){var ht=new Set;ht.add(ot),_.updateQueue=ht}else dt.add(ot);break e}else{if(!(_&1)){Ti(it,at,_),uj();break e}ot=Error(p$3(426))}}else if(I$1&&st.mode&1){var mt=Vi(rt);if(mt!==null){!(mt.flags&65536)&&(mt.flags|=256),Wi(mt,rt,st,it,_),Jg(Ki(ot,st));break e}}it=ot=Ki(ot,st),T$1!==4&&(T$1=2),tk===null?tk=[it]:tk.push(it),it=rt;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var Ct=Oi(it,ot,_);fh(it,Ct);break e;case 1:st=ot;var ft=it.type,pt=it.stateNode;if(!(it.flags&128)&&(typeof ft.getDerivedStateFromError=="function"||pt!==null&&typeof pt.componentDidCatch=="function"&&(Si===null||!Si.has(pt)))){it.flags|=65536,_&=-_,it.lanes|=_;var Vt=Ri(it,st,_);fh(it,Vt);break e}}it=it.return}while(it!==null)}Tk(_e)}catch(yt){_=yt,Y$1===_e&&_e!==null&&(Y$1=_e=_e.return);continue}break}while(1)}function Kk(){var et=nk.current;return nk.current=ai,et===null?ai:et}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$2===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$2,Z)}function Jk(et,_){var _e=K$1;K$1|=2;var tt=Kk();(R$2!==et||Z!==_)&&(vk=null,Lk(et,_));do try{Uk();break}catch(nt){Nk(et,nt)}while(1);if(Qg(),K$1=_e,nk.current=tt,Y$1!==null)throw Error(p$3(261));return R$2=null,Z=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(et){var _=Wk(et.alternate,et,gj);et.memoizedProps=et.pendingProps,_===null?Tk(et):Y$1=_,ok.current=null}function Tk(et){var _=et;do{var _e=_.alternate;if(et=_.return,_.flags&32768){if(_e=Jj(_e,_),_e!==null){_e.flags&=32767,Y$1=_e;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$1=6,Y$1=null;return}}else if(_e=Fj(_e,_,gj),_e!==null){Y$1=_e;return}if(_=_.sibling,_!==null){Y$1=_;return}Y$1=_=et}while(_!==null);T$1===0&&(T$1=5)}function Qk(et,_,_e){var tt=C$1,nt=pk.transition;try{pk.transition=null,C$1=1,Xk(et,_,_e,tt)}finally{pk.transition=nt,C$1=tt}return null}function Xk(et,_,_e,tt){do Ik();while(xk!==null);if(K$1&6)throw Error(p$3(327));_e=et.finishedWork;var nt=et.finishedLanes;if(_e===null)return null;if(et.finishedWork=null,et.finishedLanes=0,_e===et.current)throw Error(p$3(177));et.callbackNode=null,et.callbackPriority=0;var it=_e.lanes|_e.childLanes;if(Bc(et,it),et===R$2&&(Y$1=R$2=null,Z=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),it=(_e.flags&15990)!==0,_e.subtreeFlags&15990||it){it=pk.transition,pk.transition=null;var rt=C$1;C$1=1;var st=K$1;K$1|=4,ok.current=null,Pj(et,_e),ek(_e,et),Oe(Df),dd=!!Cf,Df=Cf=null,et.current=_e,ik(_e),dc(),K$1=st,C$1=rt,pk.transition=it}else et.current=_e;if(wk&&(wk=!1,xk=et,yk=nt),it=et.pendingLanes,it===0&&(Si=null),mc(_e.stateNode),Ek(et,B$1()),_!==null)for(tt=et.onRecoverableError,_e=0;_e<_.length;_e++)nt=_[_e],tt(nt.value,{componentStack:nt.stack,digest:nt.digest});if(Pi)throw Pi=!1,et=Qi,Qi=null,et;return yk&1&&et.tag!==0&&Ik(),it=et.pendingLanes,it&1?et===Ak?zk++:(zk=0,Ak=et):zk=0,jg(),null}function Ik(){if(xk!==null){var et=Dc(yk),_=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=16>et?16:et,xk===null)var tt=!1;else{if(et=xk,xk=null,yk=0,K$1&6)throw Error(p$3(331));var nt=K$1;for(K$1|=4,V$1=et.current;V$1!==null;){var it=V$1,rt=it.child;if(V$1.flags&16){var st=it.deletions;if(st!==null){for(var ot=0;ot<st.length;ot++){var at=st[ot];for(V$1=at;V$1!==null;){var At=V$1;switch(At.tag){case 0:case 11:case 15:Qj(8,At,it)}var lt=At.child;if(lt!==null)lt.return=At,V$1=lt;else for(;V$1!==null;){At=V$1;var gt=At.sibling,ct=At.return;if(Tj(At),At===at){V$1=null;break}if(gt!==null){gt.return=ct,V$1=gt;break}V$1=ct}}}var dt=it.alternate;if(dt!==null){var ht=dt.child;if(ht!==null){dt.child=null;do{var mt=ht.sibling;ht.sibling=null,ht=mt}while(ht!==null)}}V$1=it}}if(it.subtreeFlags&2064&&rt!==null)rt.return=it,V$1=rt;else e:for(;V$1!==null;){if(it=V$1,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Qj(9,it,it.return)}var Ct=it.sibling;if(Ct!==null){Ct.return=it.return,V$1=Ct;break e}V$1=it.return}}var ft=et.current;for(V$1=ft;V$1!==null;){rt=V$1;var pt=rt.child;if(rt.subtreeFlags&2064&&pt!==null)pt.return=rt,V$1=pt;else e:for(rt=ft;V$1!==null;){if(st=V$1,st.flags&2048)try{switch(st.tag){case 0:case 11:case 15:Rj(9,st)}}catch(yt){W$1(st,st.return,yt)}if(st===rt){V$1=null;break e}var Vt=st.sibling;if(Vt!==null){Vt.return=st.return,V$1=Vt;break e}V$1=st.return}}if(K$1=nt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}tt=!0}return tt}finally{C$1=_e,pk.transition=_}}return!1}function Yk(et,_,_e){_=Ki(_e,_),_=Oi(et,_,1),et=dh(et,_,1),_=L$1(),et!==null&&(Ac(et,1,_),Ek(et,_))}function W$1(et,_,_e){if(et.tag===3)Yk(et,et,_e);else for(;_!==null;){if(_.tag===3){Yk(_,et,_e);break}else if(_.tag===1){var tt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof tt.componentDidCatch=="function"&&(Si===null||!Si.has(tt))){et=Ki(_e,et),et=Ri(_,et,1),_=dh(_,et,1),et=L$1(),_!==null&&(Ac(_,1,et),Ek(_,et));break}}_=_.return}}function Ui(et,_,_e){var tt=et.pingCache;tt!==null&&tt.delete(_),_=L$1(),et.pingedLanes|=et.suspendedLanes&_e,R$2===et&&(Z&_e)===_e&&(T$1===4||T$1===3&&(Z&130023424)===Z&&500>B$1()-gk?Lk(et,0):sk|=_e),Ek(et,_)}function Zk(et,_){_===0&&(et.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var _e=L$1();et=Zg(et,_),et!==null&&(Ac(et,_,_e),Ek(et,_e))}function vj(et){var _=et.memoizedState,_e=0;_!==null&&(_e=_.retryLane),Zk(et,_e)}function ck(et,_){var _e=0;switch(et.tag){case 13:var tt=et.stateNode,nt=et.memoizedState;nt!==null&&(_e=nt.retryLane);break;case 19:tt=et.stateNode;break;default:throw Error(p$3(314))}tt!==null&&tt.delete(_),Zk(et,_e)}var Wk;Wk=function(et,_,_e){if(et!==null)if(et.memoizedProps!==_.pendingProps||Wf.current)Ug=!0;else{if(!(et.lanes&_e)&&!(_.flags&128))return Ug=!1,zj(et,_,_e);Ug=!!(et.flags&131072)}else Ug=!1,I$1&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var tt=_.type;jj(et,_),et=_.pendingProps;var nt=Yf(_,H$1.current);Tg(_,_e),nt=Xh(null,_,tt,et,nt,_e);var it=bi();return _.flags|=1,typeof nt=="object"&&nt!==null&&typeof nt.render=="function"&&nt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(tt)?(it=!0,cg(_)):it=!1,_.memoizedState=nt.state!==null&&nt.state!==void 0?nt.state:null,ah(_),nt.updater=nh,_.stateNode=nt,nt._reactInternals=_,rh(_,tt,et,_e),_=kj(null,_,tt,!0,it,_e)):(_.tag=0,I$1&&it&&vg(_),Yi(null,_,nt,_e),_=_.child),_;case 16:tt=_.elementType;e:{switch(jj(et,_),et=_.pendingProps,nt=tt._init,tt=nt(tt._payload),_.type=tt,nt=_.tag=$k(tt),et=Lg(tt,et),nt){case 0:_=dj(null,_,tt,et,_e);break e;case 1:_=ij(null,_,tt,et,_e);break e;case 11:_=Zi(null,_,tt,et,_e);break e;case 14:_=aj(null,_,tt,Lg(tt.type,et),_e);break e}throw Error(p$3(306,tt,""))}return _;case 0:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Lg(tt,nt),dj(et,_,tt,nt,_e);case 1:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Lg(tt,nt),ij(et,_,tt,nt,_e);case 3:e:{if(lj(_),et===null)throw Error(p$3(387));tt=_.pendingProps,it=_.memoizedState,nt=it.element,bh(et,_),gh(_,tt,null,_e);var rt=_.memoizedState;if(tt=rt.element,it.isDehydrated)if(it={element:tt,isDehydrated:!1,cache:rt.cache,pendingSuspenseBoundaries:rt.pendingSuspenseBoundaries,transitions:rt.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){nt=Ki(Error(p$3(423)),_),_=mj(et,_,tt,_e,nt);break e}else if(tt!==nt){nt=Ki(Error(p$3(424)),_),_=mj(et,_,tt,_e,nt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I$1=!0,zg=null,_e=Ch(_,null,tt,_e),_.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),tt===nt){_=$i(et,_,_e);break e}Yi(et,_,tt,_e)}_=_.child}return _;case 5:return Kh(_),et===null&&Eg(_),tt=_.type,nt=_.pendingProps,it=et!==null?et.memoizedProps:null,rt=nt.children,Ef(tt,nt)?rt=null:it!==null&&Ef(tt,it)&&(_.flags|=32),hj(et,_),Yi(et,_,rt,_e),_.child;case 6:return et===null&&Eg(_),null;case 13:return pj(et,_,_e);case 4:return Ih(_,_.stateNode.containerInfo),tt=_.pendingProps,et===null?_.child=Bh(_,null,tt,_e):Yi(et,_,tt,_e),_.child;case 11:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Lg(tt,nt),Zi(et,_,tt,nt,_e);case 7:return Yi(et,_,_.pendingProps,_e),_.child;case 8:return Yi(et,_,_.pendingProps.children,_e),_.child;case 12:return Yi(et,_,_.pendingProps.children,_e),_.child;case 10:e:{if(tt=_.type._context,nt=_.pendingProps,it=_.memoizedProps,rt=nt.value,G$1(Mg,tt._currentValue),tt._currentValue=rt,it!==null)if(He(it.value,rt)){if(it.children===nt.children&&!Wf.current){_=$i(et,_,_e);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var st=it.dependencies;if(st!==null){rt=it.child;for(var ot=st.firstContext;ot!==null;){if(ot.context===tt){if(it.tag===1){ot=ch(-1,_e&-_e),ot.tag=2;var at=it.updateQueue;if(at!==null){at=at.shared;var At=at.pending;At===null?ot.next=ot:(ot.next=At.next,At.next=ot),at.pending=ot}}it.lanes|=_e,ot=it.alternate,ot!==null&&(ot.lanes|=_e),Sg(it.return,_e,_),st.lanes|=_e;break}ot=ot.next}}else if(it.tag===10)rt=it.type===_.type?null:it.child;else if(it.tag===18){if(rt=it.return,rt===null)throw Error(p$3(341));rt.lanes|=_e,st=rt.alternate,st!==null&&(st.lanes|=_e),Sg(rt,_e,_),rt=it.sibling}else rt=it.child;if(rt!==null)rt.return=it;else for(rt=it;rt!==null;){if(rt===_){rt=null;break}if(it=rt.sibling,it!==null){it.return=rt.return,rt=it;break}rt=rt.return}it=rt}Yi(et,_,nt.children,_e),_=_.child}return _;case 9:return nt=_.type,tt=_.pendingProps.children,Tg(_,_e),nt=Vg(nt),tt=tt(nt),_.flags|=1,Yi(et,_,tt,_e),_.child;case 14:return tt=_.type,nt=Lg(tt,_.pendingProps),nt=Lg(tt.type,nt),aj(et,_,tt,nt,_e);case 15:return cj(et,_,_.type,_.pendingProps,_e);case 17:return tt=_.type,nt=_.pendingProps,nt=_.elementType===tt?nt:Lg(tt,nt),jj(et,_),_.tag=1,Zf(tt)?(et=!0,cg(_)):et=!1,Tg(_,_e),ph(_,tt,nt),rh(_,tt,nt,_e),kj(null,_,tt,!0,et,_e);case 19:return yj(et,_,_e);case 22:return ej(et,_,_e)}throw Error(p$3(156,_.tag))};function Gk(et,_){return ac(et,_)}function al(et,_,_e,tt){this.tag=et,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,_,_e,tt){return new al(et,_,_e,tt)}function bj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function $k(et){if(typeof et=="function")return bj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function wh(et,_){var _e=et.alternate;return _e===null?(_e=Bg(et.tag,_,et.key,et.mode),_e.elementType=et.elementType,_e.type=et.type,_e.stateNode=et.stateNode,_e.alternate=et,et.alternate=_e):(_e.pendingProps=_,_e.type=et.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=et.flags&14680064,_e.childLanes=et.childLanes,_e.lanes=et.lanes,_e.child=et.child,_e.memoizedProps=et.memoizedProps,_e.memoizedState=et.memoizedState,_e.updateQueue=et.updateQueue,_=et.dependencies,_e.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},_e.sibling=et.sibling,_e.index=et.index,_e.ref=et.ref,_e}function yh(et,_,_e,tt,nt,it){var rt=2;if(tt=et,typeof et=="function")bj(et)&&(rt=1);else if(typeof et=="string")rt=5;else e:switch(et){case ya:return Ah(_e.children,nt,it,_);case za:rt=8,nt|=8;break;case Aa:return et=Bg(12,_e,_,nt|2),et.elementType=Aa,et.lanes=it,et;case Ea:return et=Bg(13,_e,_,nt),et.elementType=Ea,et.lanes=it,et;case Fa:return et=Bg(19,_e,_,nt),et.elementType=Fa,et.lanes=it,et;case Ia:return qj(_e,nt,it,_);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:rt=10;break e;case Ca:rt=9;break e;case Da:rt=11;break e;case Ga:rt=14;break e;case Ha:rt=16,tt=null;break e}throw Error(p$3(130,et==null?et:typeof et,""))}return _=Bg(rt,_e,_,nt),_.elementType=et,_.type=tt,_.lanes=it,_}function Ah(et,_,_e,tt){return et=Bg(7,et,tt,_),et.lanes=_e,et}function qj(et,_,_e,tt){return et=Bg(22,et,tt,_),et.elementType=Ia,et.lanes=_e,et.stateNode={isHidden:!1},et}function xh(et,_,_e){return et=Bg(6,et,null,_),et.lanes=_e,et}function zh(et,_,_e){return _=Bg(4,et.children!==null?et.children:[],et.key,_),_.lanes=_e,_.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},_}function bl(et,_,_e,tt,nt){this.tag=_,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tt,this.onRecoverableError=nt,this.mutableSourceEagerHydrationData=null}function cl(et,_,_e,tt,nt,it,rt,st,ot){return et=new bl(et,_,_e,st,ot),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),et.current=it,it.stateNode=et,it.memoizedState={element:tt,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(it),et}function dl(et,_,_e){var tt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tt==null?null:""+tt,children:et,containerInfo:_,implementation:_e}}function el(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$3(170));var _=et;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$3(171))}if(et.tag===1){var _e=et.type;if(Zf(_e))return bg(et,_e,_)}return _}function fl(et,_,_e,tt,nt,it,rt,st,ot){return et=cl(_e,tt,!0,et,nt,it,rt,st,ot),et.context=el(null),_e=et.current,tt=L$1(),nt=lh(_e),it=ch(tt,nt),it.callback=_??null,dh(_e,it,nt),et.current.lanes=nt,Ac(et,nt,tt),Ek(et,tt),et}function gl(et,_,_e,tt){var nt=_.current,it=L$1(),rt=lh(nt);return _e=el(_e),_.context===null?_.context=_e:_.pendingContext=_e,_=ch(it,rt),_.payload={element:et},tt=tt===void 0?null:tt,tt!==null&&(_.callback=tt),et=dh(nt,_,rt),et!==null&&(mh(et,nt,rt,it),eh(et,nt,rt)),rt}function hl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function il(et,_){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var _e=et.retryLane;et.retryLane=_e!==0&&_e<_?_e:_}}function jl(et,_){il(et,_),(et=et.alternate)&&il(et,_)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(et){console.error(et)};function ml(et){this._internalRoot=et}nl.prototype.render=ml.prototype.render=function(et){var _=this._internalRoot;if(_===null)throw Error(p$3(409));gl(et,_,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var _=et.containerInfo;Sk(function(){gl(null,et,null,null)}),_[uf]=null}};function nl(et){this._internalRoot=et}nl.prototype.unstable_scheduleHydration=function(et){if(et){var _=Hc();et={blockedOn:null,target:et,priority:_};for(var _e=0;_e<Qc.length&&_!==0&&_<Qc[_e].priority;_e++);Qc.splice(_e,0,et),_e===0&&Vc(et)}};function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function pl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(et,_,_e,tt,nt){if(nt){if(typeof tt=="function"){var it=tt;tt=function(){var at=hl(rt);it.call(at)}}var rt=fl(_,tt,et,0,null,!1,!1,"",ql);return et._reactRootContainer=rt,et[uf]=rt.current,sf(et.nodeType===8?et.parentNode:et),Sk(),rt}for(;nt=et.lastChild;)et.removeChild(nt);if(typeof tt=="function"){var st=tt;tt=function(){var at=hl(ot);st.call(at)}}var ot=cl(et,0,!1,null,null,!1,!1,"",ql);return et._reactRootContainer=ot,et[uf]=ot.current,sf(et.nodeType===8?et.parentNode:et),Sk(function(){gl(_,ot,_e,tt)}),ot}function sl(et,_,_e,tt,nt){var it=_e._reactRootContainer;if(it){var rt=it;if(typeof nt=="function"){var st=nt;nt=function(){var ot=hl(rt);st.call(ot)}}gl(_,rt,et,nt)}else rt=rl(_e,_,et,nt,tt);return hl(rt)}Ec=function(et){switch(et.tag){case 3:var _=et.stateNode;if(_.current.memoizedState.isDehydrated){var _e=tc(_.pendingLanes);_e!==0&&(Cc(_,_e|1),Ek(_,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var tt=Zg(et,1);if(tt!==null){var nt=L$1();mh(tt,et,1,nt)}}),jl(et,1)}};Fc=function(et){if(et.tag===13){var _=Zg(et,134217728);if(_!==null){var _e=L$1();mh(_,et,134217728,_e)}jl(et,134217728)}};Gc=function(et){if(et.tag===13){var _=lh(et),_e=Zg(et,_);if(_e!==null){var tt=L$1();mh(_e,et,_,tt)}jl(et,_)}};Hc=function(){return C$1};Ic=function(et,_){var _e=C$1;try{return C$1=et,_()}finally{C$1=_e}};yb=function(et,_,_e){switch(_){case"input":if(bb(et,_e),_=_e.name,_e.type==="radio"&&_!=null){for(_e=et;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<_e.length;_++){var tt=_e[_];if(tt!==et&&tt.form===et.form){var nt=Db(tt);if(!nt)throw Error(p$3(90));Wa(tt),bb(tt,nt)}}}break;case"textarea":ib(et,_e);break;case"select":_=_e.value,_!=null&&fb(et,!!_e.multiple,_,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(et,_){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_))throw Error(p$3(200));return dl(et,_,null,_e)};reactDom_production_min.createRoot=function(et,_){if(!ol(et))throw Error(p$3(299));var _e=!1,tt="",nt=ll;return _!=null&&(_.unstable_strictMode===!0&&(_e=!0),_.identifierPrefix!==void 0&&(tt=_.identifierPrefix),_.onRecoverableError!==void 0&&(nt=_.onRecoverableError)),_=cl(et,1,!1,null,null,_e,!1,tt,nt),et[uf]=_.current,sf(et.nodeType===8?et.parentNode:et),new ml(_)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var _=et._reactInternals;if(_===void 0)throw typeof et.render=="function"?Error(p$3(188)):(et=Object.keys(et).join(","),Error(p$3(268,et)));return et=Zb(_),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Sk(et)};reactDom_production_min.hydrate=function(et,_,_e){if(!pl(_))throw Error(p$3(200));return sl(null,et,_,!0,_e)};reactDom_production_min.hydrateRoot=function(et,_,_e){if(!ol(et))throw Error(p$3(405));var tt=_e!=null&&_e.hydratedSources||null,nt=!1,it="",rt=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(nt=!0),_e.identifierPrefix!==void 0&&(it=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),_=fl(_,null,et,1,_e??null,nt,!1,it,rt),et[uf]=_.current,sf(et),tt)for(et=0;et<tt.length;et++)_e=tt[et],nt=_e._getVersion,nt=nt(_e._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[_e,nt]:_.mutableSourceEagerHydrationData.push(_e,nt);return new nl(_)};reactDom_production_min.render=function(et,_,_e){if(!pl(_))throw Error(p$3(200));return sl(null,et,_,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(et){if(!pl(et))throw Error(p$3(40));return et._reactRootContainer?(Sk(function(){sl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,_,_e,tt){if(!pl(_e))throw Error(p$3(200));if(et==null||et._reactInternals===void 0)throw Error(p$3(38));return sl(et,_,_e,!1,tt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="148",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=3,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035;class EventDispatcher{addEventListener(_,_e){this._listeners===void 0&&(this._listeners={});const tt=this._listeners;tt[_]===void 0&&(tt[_]=[]),tt[_].indexOf(_e)===-1&&tt[_].push(_e)}hasEventListener(_,_e){if(this._listeners===void 0)return!1;const tt=this._listeners;return tt[_]!==void 0&&tt[_].indexOf(_e)!==-1}removeEventListener(_,_e){if(this._listeners===void 0)return;const nt=this._listeners[_];if(nt!==void 0){const it=nt.indexOf(_e);it!==-1&&nt.splice(it,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const tt=this._listeners[_.type];if(tt!==void 0){_.target=this;const nt=tt.slice(0);for(let it=0,rt=nt.length;it<rt;it++)nt[it].call(this,_);_.target=null}}}const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const et=Math.random()*4294967295|0,_=Math.random()*4294967295|0,_e=Math.random()*4294967295|0,tt=Math.random()*4294967295|0;return(_lut$1[et&255]+_lut$1[et>>8&255]+_lut$1[et>>16&255]+_lut$1[et>>24&255]+"-"+_lut$1[_&255]+_lut$1[_>>8&255]+"-"+_lut$1[_>>16&15|64]+_lut$1[_>>24&255]+"-"+_lut$1[_e&63|128]+_lut$1[_e>>8&255]+"-"+_lut$1[_e>>16&255]+_lut$1[_e>>24&255]+_lut$1[tt&255]+_lut$1[tt>>8&255]+_lut$1[tt>>16&255]+_lut$1[tt>>24&255]).toLowerCase()}function clamp$1(et,_,_e){return Math.max(_,Math.min(_e,et))}function euclideanModulo(et,_){return(et%_+_)%_}function mapLinear(et,_,_e,tt,nt){return tt+(et-_)*(nt-tt)/(_e-_)}function inverseLerp(et,_,_e){return et!==_?(_e-et)/(_-et):0}function lerp(et,_,_e){return(1-_e)*et+_e*_}function damp(et,_,_e,tt){return lerp(et,_,1-Math.exp(-_e*tt))}function pingpong(et,_=1){return _-Math.abs(euclideanModulo(et,_*2)-_)}function smoothstep(et,_,_e){return et<=_?0:et>=_e?1:(et=(et-_)/(_e-_),et*et*(3-2*et))}function smootherstep(et,_,_e){return et<=_?0:et>=_e?1:(et=(et-_)/(_e-_),et*et*et*(et*(et*6-15)+10))}function randInt(et,_){return et+Math.floor(Math.random()*(_-et+1))}function randFloat(et,_){return et+Math.random()*(_-et)}function randFloatSpread(et){return et*(.5-Math.random())}function seededRandom(et){et!==void 0&&(_seed=et);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(et){return et*DEG2RAD}function radToDeg(et){return et*RAD2DEG}function isPowerOfTwo(et){return(et&et-1)===0&&et!==0}function ceilPowerOfTwo(et){return Math.pow(2,Math.ceil(Math.log(et)/Math.LN2))}function floorPowerOfTwo(et){return Math.pow(2,Math.floor(Math.log(et)/Math.LN2))}function setQuaternionFromProperEuler(et,_,_e,tt,nt){const it=Math.cos,rt=Math.sin,st=it(_e/2),ot=rt(_e/2),at=it((_+tt)/2),At=rt((_+tt)/2),lt=it((_-tt)/2),gt=rt((_-tt)/2),ct=it((tt-_)/2),dt=rt((tt-_)/2);switch(nt){case"XYX":et.set(st*At,ot*lt,ot*gt,st*at);break;case"YZY":et.set(ot*gt,st*At,ot*lt,st*at);break;case"ZXZ":et.set(ot*lt,ot*gt,st*At,st*at);break;case"XZX":et.set(st*At,ot*dt,ot*ct,st*at);break;case"YXY":et.set(ot*ct,st*At,ot*dt,st*at);break;case"ZYZ":et.set(ot*dt,ot*ct,st*At,st*at);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+nt)}}function denormalize(et,_){switch(_.constructor){case Float32Array:return et;case Uint16Array:return et/65535;case Uint8Array:return et/255;case Int16Array:return Math.max(et/32767,-1);case Int8Array:return Math.max(et/127,-1);default:throw new Error("Invalid component type.")}}function normalize$1(et,_){switch(_.constructor){case Float32Array:return et;case Uint16Array:return Math.round(et*65535);case Uint8Array:return Math.round(et*255);case Int16Array:return Math.round(et*32767);case Int8Array:return Math.round(et*127);default:throw new Error("Invalid component type.")}}var MathUtils=Object.freeze({__proto__:null,DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$1,denormalize});class Vector2{constructor(_=0,_e=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=_e}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,_e){return this.x=_,this.y=_e,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,_e){switch(_){case 0:this.x=_e;break;case 1:this.y=_e;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,_e){return this.x=_.x+_e.x,this.y=_.y+_e.y,this}addScaledVector(_,_e){return this.x+=_.x*_e,this.y+=_.y*_e,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,_e){return this.x=_.x-_e.x,this.y=_.y-_e.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const _e=this.x,tt=this.y,nt=_.elements;return this.x=nt[0]*_e+nt[3]*tt+nt[6],this.y=nt[1]*_e+nt[4]*tt+nt[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,_e){return this.x=Math.max(_.x,Math.min(_e.x,this.x)),this.y=Math.max(_.y,Math.min(_e.y,this.y)),this}clampScalar(_,_e){return this.x=Math.max(_,Math.min(_e,this.x)),this.y=Math.max(_,Math.min(_e,this.y)),this}clampLength(_,_e){const tt=this.length();return this.divideScalar(tt||1).multiplyScalar(Math.max(_,Math.min(_e,tt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const _e=this.x-_.x,tt=this.y-_.y;return _e*_e+tt*tt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,_e){return this.x+=(_.x-this.x)*_e,this.y+=(_.y-this.y)*_e,this}lerpVectors(_,_e,tt){return this.x=_.x+(_e.x-_.x)*tt,this.y=_.y+(_e.y-_.y)*tt,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,_e=0){return this.x=_[_e],this.y=_[_e+1],this}toArray(_=[],_e=0){return _[_e]=this.x,_[_e+1]=this.y,_}fromBufferAttribute(_,_e){return this.x=_.getX(_e),this.y=_.getY(_e),this}rotateAround(_,_e){const tt=Math.cos(_e),nt=Math.sin(_e),it=this.x-_.x,rt=this.y-_.y;return this.x=it*tt-rt*nt+_.x,this.y=it*nt+rt*tt+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(_,_e,tt,nt,it,rt,st,ot,at){const At=this.elements;return At[0]=_,At[1]=nt,At[2]=st,At[3]=_e,At[4]=it,At[5]=ot,At[6]=tt,At[7]=rt,At[8]=at,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const _e=this.elements,tt=_.elements;return _e[0]=tt[0],_e[1]=tt[1],_e[2]=tt[2],_e[3]=tt[3],_e[4]=tt[4],_e[5]=tt[5],_e[6]=tt[6],_e[7]=tt[7],_e[8]=tt[8],this}extractBasis(_,_e,tt){return _.setFromMatrix3Column(this,0),_e.setFromMatrix3Column(this,1),tt.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const _e=_.elements;return this.set(_e[0],_e[4],_e[8],_e[1],_e[5],_e[9],_e[2],_e[6],_e[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,_e){const tt=_.elements,nt=_e.elements,it=this.elements,rt=tt[0],st=tt[3],ot=tt[6],at=tt[1],At=tt[4],lt=tt[7],gt=tt[2],ct=tt[5],dt=tt[8],ht=nt[0],mt=nt[3],Ct=nt[6],ft=nt[1],pt=nt[4],Vt=nt[7],yt=nt[2],Gt=nt[5],Bt=nt[8];return it[0]=rt*ht+st*ft+ot*yt,it[3]=rt*mt+st*pt+ot*Gt,it[6]=rt*Ct+st*Vt+ot*Bt,it[1]=at*ht+At*ft+lt*yt,it[4]=at*mt+At*pt+lt*Gt,it[7]=at*Ct+At*Vt+lt*Bt,it[2]=gt*ht+ct*ft+dt*yt,it[5]=gt*mt+ct*pt+dt*Gt,it[8]=gt*Ct+ct*Vt+dt*Bt,this}multiplyScalar(_){const _e=this.elements;return _e[0]*=_,_e[3]*=_,_e[6]*=_,_e[1]*=_,_e[4]*=_,_e[7]*=_,_e[2]*=_,_e[5]*=_,_e[8]*=_,this}determinant(){const _=this.elements,_e=_[0],tt=_[1],nt=_[2],it=_[3],rt=_[4],st=_[5],ot=_[6],at=_[7],At=_[8];return _e*rt*At-_e*st*at-tt*it*At+tt*st*ot+nt*it*at-nt*rt*ot}invert(){const _=this.elements,_e=_[0],tt=_[1],nt=_[2],it=_[3],rt=_[4],st=_[5],ot=_[6],at=_[7],At=_[8],lt=At*rt-st*at,gt=st*ot-At*it,ct=at*it-rt*ot,dt=_e*lt+tt*gt+nt*ct;if(dt===0)return this.set(0,0,0,0,0,0,0,0,0);const ht=1/dt;return _[0]=lt*ht,_[1]=(nt*at-At*tt)*ht,_[2]=(st*tt-nt*rt)*ht,_[3]=gt*ht,_[4]=(At*_e-nt*ot)*ht,_[5]=(nt*it-st*_e)*ht,_[6]=ct*ht,_[7]=(tt*ot-at*_e)*ht,_[8]=(rt*_e-tt*it)*ht,this}transpose(){let _;const _e=this.elements;return _=_e[1],_e[1]=_e[3],_e[3]=_,_=_e[2],_e[2]=_e[6],_e[6]=_,_=_e[5],_e[5]=_e[7],_e[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const _e=this.elements;return _[0]=_e[0],_[1]=_e[3],_[2]=_e[6],_[3]=_e[1],_[4]=_e[4],_[5]=_e[7],_[6]=_e[2],_[7]=_e[5],_[8]=_e[8],this}setUvTransform(_,_e,tt,nt,it,rt,st){const ot=Math.cos(it),at=Math.sin(it);return this.set(tt*ot,tt*at,-tt*(ot*rt+at*st)+rt+_,-nt*at,nt*ot,-nt*(-at*rt+ot*st)+st+_e,0,0,1),this}scale(_,_e){return this.premultiply(_m3.makeScale(_,_e)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,_e){return this.premultiply(_m3.makeTranslation(_,_e)),this}makeTranslation(_,_e){return this.set(1,0,_,0,1,_e,0,0,1),this}makeRotation(_){const _e=Math.cos(_),tt=Math.sin(_);return this.set(_e,-tt,0,tt,_e,0,0,0,1),this}makeScale(_,_e){return this.set(_,0,0,0,_e,0,0,0,1),this}equals(_){const _e=this.elements,tt=_.elements;for(let nt=0;nt<9;nt++)if(_e[nt]!==tt[nt])return!1;return!0}fromArray(_,_e=0){for(let tt=0;tt<9;tt++)this.elements[tt]=_[tt+_e];return this}toArray(_=[],_e=0){const tt=this.elements;return _[_e]=tt[0],_[_e+1]=tt[1],_[_e+2]=tt[2],_[_e+3]=tt[3],_[_e+4]=tt[4],_[_e+5]=tt[5],_[_e+6]=tt[6],_[_e+7]=tt[7],_[_e+8]=tt[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(et){for(let _=et.length-1;_>=0;--_)if(et[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(et,_){return new TYPED_ARRAYS[et](_)}function createElementNS(et){return document.createElementNS("http://www.w3.org/1999/xhtml",et)}function SRGBToLinear(et){return et<.04045?et*.0773993808:Math.pow(et*.9478672986+.0521327014,2.4)}function LinearToSRGB(et){return et<.0031308?et*12.92:1.055*Math.pow(et,.41666)-.055}const FN={[SRGBColorSpace]:{[LinearSRGBColorSpace]:SRGBToLinear},[LinearSRGBColorSpace]:{[SRGBColorSpace]:LinearToSRGB}},ColorManagement={legacyMode:!0,get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(et){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(et,_,_e){if(this.legacyMode||_===_e||!_||!_e)return et;if(FN[_]&&FN[_][_e]!==void 0){const tt=FN[_][_e];return et.r=tt(et.r),et.g=tt(et.g),et.b=tt(et.b),et}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(et,_){return this.convert(et,this.workingColorSpace,_)},toWorkingColorSpace:function(et,_){return this.convert(et,_,this.workingColorSpace)}},_colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_rgb$1={r:0,g:0,b:0},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(et,_,_e){return _e<0&&(_e+=1),_e>1&&(_e-=1),_e<1/6?et+(_-et)*6*_e:_e<1/2?_:_e<2/3?et+(_-et)*6*(2/3-_e):et}function toComponents(et,_){return _.r=et.r,_.g=et.g,_.b=et.b,_}class Color{constructor(_,_e,tt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,_e===void 0&&tt===void 0?this.set(_):this.setRGB(_,_e,tt)}set(_){return _&&_.isColor?this.copy(_):typeof _=="number"?this.setHex(_):typeof _=="string"&&this.setStyle(_),this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,_e=SRGBColorSpace){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.toWorkingColorSpace(this,_e),this}setRGB(_,_e,tt,nt=ColorManagement.workingColorSpace){return this.r=_,this.g=_e,this.b=tt,ColorManagement.toWorkingColorSpace(this,nt),this}setHSL(_,_e,tt,nt=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),_e=clamp$1(_e,0,1),tt=clamp$1(tt,0,1),_e===0)this.r=this.g=this.b=tt;else{const it=tt<=.5?tt*(1+_e):tt+_e-tt*_e,rt=2*tt-it;this.r=hue2rgb(rt,it,_+1/3),this.g=hue2rgb(rt,it,_),this.b=hue2rgb(rt,it,_-1/3)}return ColorManagement.toWorkingColorSpace(this,nt),this}setStyle(_,_e=SRGBColorSpace){function tt(it){it!==void 0&&parseFloat(it)<1&&console.warn("THREE.Color: Alpha component of "+_+" will be ignored.")}let nt;if(nt=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(_)){let it;const rt=nt[1],st=nt[2];switch(rt){case"rgb":case"rgba":if(it=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(st))return this.r=Math.min(255,parseInt(it[1],10))/255,this.g=Math.min(255,parseInt(it[2],10))/255,this.b=Math.min(255,parseInt(it[3],10))/255,ColorManagement.toWorkingColorSpace(this,_e),tt(it[4]),this;if(it=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(st))return this.r=Math.min(100,parseInt(it[1],10))/100,this.g=Math.min(100,parseInt(it[2],10))/100,this.b=Math.min(100,parseInt(it[3],10))/100,ColorManagement.toWorkingColorSpace(this,_e),tt(it[4]),this;break;case"hsl":case"hsla":if(it=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(st)){const ot=parseFloat(it[1])/360,at=parseFloat(it[2])/100,At=parseFloat(it[3])/100;return tt(it[4]),this.setHSL(ot,at,At,_e)}break}}else if(nt=/^\#([A-Fa-f\d]+)$/.exec(_)){const it=nt[1],rt=it.length;if(rt===3)return this.r=parseInt(it.charAt(0)+it.charAt(0),16)/255,this.g=parseInt(it.charAt(1)+it.charAt(1),16)/255,this.b=parseInt(it.charAt(2)+it.charAt(2),16)/255,ColorManagement.toWorkingColorSpace(this,_e),this;if(rt===6)return this.r=parseInt(it.charAt(0)+it.charAt(1),16)/255,this.g=parseInt(it.charAt(2)+it.charAt(3),16)/255,this.b=parseInt(it.charAt(4)+it.charAt(5),16)/255,ColorManagement.toWorkingColorSpace(this,_e),this}return _&&_.length>0?this.setColorName(_,_e):this}setColorName(_,_e=SRGBColorSpace){const tt=_colorKeywords[_.toLowerCase()];return tt!==void 0?this.setHex(tt,_e):console.warn("THREE.Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),_),clamp$1(_rgb$1.r*255,0,255)<<16^clamp$1(_rgb$1.g*255,0,255)<<8^clamp$1(_rgb$1.b*255,0,255)<<0}getHexString(_=SRGBColorSpace){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,_e=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),_e);const tt=_rgb$1.r,nt=_rgb$1.g,it=_rgb$1.b,rt=Math.max(tt,nt,it),st=Math.min(tt,nt,it);let ot,at;const At=(st+rt)/2;if(st===rt)ot=0,at=0;else{const lt=rt-st;switch(at=At<=.5?lt/(rt+st):lt/(2-rt-st),rt){case tt:ot=(nt-it)/lt+(nt<it?6:0);break;case nt:ot=(it-tt)/lt+2;break;case it:ot=(tt-nt)/lt+4;break}ot/=6}return _.h=ot,_.s=at,_.l=At,_}getRGB(_,_e=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),_e),_.r=_rgb$1.r,_.g=_rgb$1.g,_.b=_rgb$1.b,_}getStyle(_=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(toComponents(this,_rgb$1),_),_!==SRGBColorSpace?`color(${_} ${_rgb$1.r} ${_rgb$1.g} ${_rgb$1.b})`:`rgb(${_rgb$1.r*255|0},${_rgb$1.g*255|0},${_rgb$1.b*255|0})`}offsetHSL(_,_e,tt){return this.getHSL(_hslA),_hslA.h+=_,_hslA.s+=_e,_hslA.l+=tt,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,_e){return this.r=_.r+_e.r,this.g=_.g+_e.g,this.b=_.b+_e.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,_e){return this.r+=(_.r-this.r)*_e,this.g+=(_.g-this.g)*_e,this.b+=(_.b-this.b)*_e,this}lerpColors(_,_e,tt){return this.r=_.r+(_e.r-_.r)*tt,this.g=_.g+(_e.g-_.g)*tt,this.b=_.b+(_e.b-_.b)*tt,this}lerpHSL(_,_e){this.getHSL(_hslA),_.getHSL(_hslB);const tt=lerp(_hslA.h,_hslB.h,_e),nt=lerp(_hslA.s,_hslB.s,_e),it=lerp(_hslA.l,_hslB.l,_e);return this.setHSL(tt,nt,it),this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,_e=0){return this.r=_[_e],this.g=_[_e+1],this.b=_[_e+2],this}toArray(_=[],_e=0){return _[_e]=this.r,_[_e+1]=this.g,_[_e+2]=this.b,_}fromBufferAttribute(_,_e){return this.r=_.getX(_e),this.g=_.getY(_e),this.b=_.getZ(_e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Color.NAMES=_colorKeywords;let _canvas;class ImageUtils{static getDataURL(_){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let _e;if(_ instanceof HTMLCanvasElement)_e=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const tt=_canvas.getContext("2d");_ instanceof ImageData?tt.putImageData(_,0,0):tt.drawImage(_,0,0,_.width,_.height),_e=_canvas}return _e.width>2048||_e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",_),_e.toDataURL("image/jpeg",.6)):_e.toDataURL("image/png")}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const _e=createElementNS("canvas");_e.width=_.width,_e.height=_.height;const tt=_e.getContext("2d");tt.drawImage(_,0,0,_.width,_.height);const nt=tt.getImageData(0,0,_.width,_.height),it=nt.data;for(let rt=0;rt<it.length;rt++)it[rt]=SRGBToLinear(it[rt]/255)*255;return tt.putImageData(nt,0,0),_e}else if(_.data){const _e=_.data.slice(0);for(let tt=0;tt<_e.length;tt++)_e instanceof Uint8Array||_e instanceof Uint8ClampedArray?_e[tt]=Math.floor(SRGBToLinear(_e[tt]/255)*255):_e[tt]=SRGBToLinear(_e[tt]);return{data:_e,width:_.width,height:_.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}class Source{constructor(_=null){this.isSource=!0,this.uuid=generateUUID$1(),this.data=_,this.version=0}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const _e=_===void 0||typeof _=="string";if(!_e&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const tt={uuid:this.uuid,url:""},nt=this.data;if(nt!==null){let it;if(Array.isArray(nt)){it=[];for(let rt=0,st=nt.length;rt<st;rt++)nt[rt].isDataTexture?it.push(serializeImage(nt[rt].image)):it.push(serializeImage(nt[rt]))}else it=serializeImage(nt);tt.url=it}return _e||(_.images[this.uuid]=tt),tt}}function serializeImage(et){return typeof HTMLImageElement<"u"&&et instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&et instanceof ImageBitmap?ImageUtils.getDataURL(et):et.data?{data:Array.from(et.data),width:et.width,height:et.height,type:et.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let textureId=0;class Texture extends EventDispatcher{constructor(_=Texture.DEFAULT_IMAGE,_e=Texture.DEFAULT_MAPPING,tt=ClampToEdgeWrapping,nt=ClampToEdgeWrapping,it=LinearFilter,rt=LinearMipmapLinearFilter,st=RGBAFormat,ot=UnsignedByteType,at=Texture.DEFAULT_ANISOTROPY,At=LinearEncoding){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=_e,this.wrapS=tt,this.wrapT=nt,this.magFilter=it,this.minFilter=rt,this.anisotropy=at,this.format=st,this.internalFormat=null,this.type=ot,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=At,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(_){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.encoding=_.encoding,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}toJSON(_){const _e=_===void 0||typeof _=="string";if(!_e&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const tt={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(tt.userData=this.userData),_e||(_.textures[this.uuid]=tt),tt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,_e=0,tt=0,nt=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=_e,this.z=tt,this.w=nt}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,_e,tt,nt){return this.x=_,this.y=_e,this.z=tt,this.w=nt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,_e){switch(_){case 0:this.x=_e;break;case 1:this.y=_e;break;case 2:this.z=_e;break;case 3:this.w=_e;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,_e){return this.x=_.x+_e.x,this.y=_.y+_e.y,this.z=_.z+_e.z,this.w=_.w+_e.w,this}addScaledVector(_,_e){return this.x+=_.x*_e,this.y+=_.y*_e,this.z+=_.z*_e,this.w+=_.w*_e,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,_e){return this.x=_.x-_e.x,this.y=_.y-_e.y,this.z=_.z-_e.z,this.w=_.w-_e.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const _e=this.x,tt=this.y,nt=this.z,it=this.w,rt=_.elements;return this.x=rt[0]*_e+rt[4]*tt+rt[8]*nt+rt[12]*it,this.y=rt[1]*_e+rt[5]*tt+rt[9]*nt+rt[13]*it,this.z=rt[2]*_e+rt[6]*tt+rt[10]*nt+rt[14]*it,this.w=rt[3]*_e+rt[7]*tt+rt[11]*nt+rt[15]*it,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const _e=Math.sqrt(1-_.w*_.w);return _e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/_e,this.y=_.y/_e,this.z=_.z/_e),this}setAxisAngleFromRotationMatrix(_){let _e,tt,nt,it;const ot=_.elements,at=ot[0],At=ot[4],lt=ot[8],gt=ot[1],ct=ot[5],dt=ot[9],ht=ot[2],mt=ot[6],Ct=ot[10];if(Math.abs(At-gt)<.01&&Math.abs(lt-ht)<.01&&Math.abs(dt-mt)<.01){if(Math.abs(At+gt)<.1&&Math.abs(lt+ht)<.1&&Math.abs(dt+mt)<.1&&Math.abs(at+ct+Ct-3)<.1)return this.set(1,0,0,0),this;_e=Math.PI;const pt=(at+1)/2,Vt=(ct+1)/2,yt=(Ct+1)/2,Gt=(At+gt)/4,Bt=(lt+ht)/4,vt=(dt+mt)/4;return pt>Vt&&pt>yt?pt<.01?(tt=0,nt=.707106781,it=.707106781):(tt=Math.sqrt(pt),nt=Gt/tt,it=Bt/tt):Vt>yt?Vt<.01?(tt=.707106781,nt=0,it=.707106781):(nt=Math.sqrt(Vt),tt=Gt/nt,it=vt/nt):yt<.01?(tt=.707106781,nt=.707106781,it=0):(it=Math.sqrt(yt),tt=Bt/it,nt=vt/it),this.set(tt,nt,it,_e),this}let ft=Math.sqrt((mt-dt)*(mt-dt)+(lt-ht)*(lt-ht)+(gt-At)*(gt-At));return Math.abs(ft)<.001&&(ft=1),this.x=(mt-dt)/ft,this.y=(lt-ht)/ft,this.z=(gt-At)/ft,this.w=Math.acos((at+ct+Ct-1)/2),this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,_e){return this.x=Math.max(_.x,Math.min(_e.x,this.x)),this.y=Math.max(_.y,Math.min(_e.y,this.y)),this.z=Math.max(_.z,Math.min(_e.z,this.z)),this.w=Math.max(_.w,Math.min(_e.w,this.w)),this}clampScalar(_,_e){return this.x=Math.max(_,Math.min(_e,this.x)),this.y=Math.max(_,Math.min(_e,this.y)),this.z=Math.max(_,Math.min(_e,this.z)),this.w=Math.max(_,Math.min(_e,this.w)),this}clampLength(_,_e){const tt=this.length();return this.divideScalar(tt||1).multiplyScalar(Math.max(_,Math.min(_e,tt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,_e){return this.x+=(_.x-this.x)*_e,this.y+=(_.y-this.y)*_e,this.z+=(_.z-this.z)*_e,this.w+=(_.w-this.w)*_e,this}lerpVectors(_,_e,tt){return this.x=_.x+(_e.x-_.x)*tt,this.y=_.y+(_e.y-_.y)*tt,this.z=_.z+(_e.z-_.z)*tt,this.w=_.w+(_e.w-_.w)*tt,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,_e=0){return this.x=_[_e],this.y=_[_e+1],this.z=_[_e+2],this.w=_[_e+3],this}toArray(_=[],_e=0){return _[_e]=this.x,_[_e+1]=this.y,_[_e+2]=this.z,_[_e+3]=this.w,_}fromBufferAttribute(_,_e){return this.x=_.getX(_e),this.y=_.getY(_e),this.z=_.getZ(_e),this.w=_.getW(_e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class WebGLRenderTarget extends EventDispatcher{constructor(_=1,_e=1,tt={}){super(),this.isWebGLRenderTarget=!0,this.width=_,this.height=_e,this.depth=1,this.scissor=new Vector4(0,0,_,_e),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,_e);const nt={width:_,height:_e,depth:1};this.texture=new Texture(nt,tt.mapping,tt.wrapS,tt.wrapT,tt.magFilter,tt.minFilter,tt.format,tt.type,tt.anisotropy,tt.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=tt.generateMipmaps!==void 0?tt.generateMipmaps:!1,this.texture.internalFormat=tt.internalFormat!==void 0?tt.internalFormat:null,this.texture.minFilter=tt.minFilter!==void 0?tt.minFilter:LinearFilter,this.depthBuffer=tt.depthBuffer!==void 0?tt.depthBuffer:!0,this.stencilBuffer=tt.stencilBuffer!==void 0?tt.stencilBuffer:!1,this.depthTexture=tt.depthTexture!==void 0?tt.depthTexture:null,this.samples=tt.samples!==void 0?tt.samples:0}setSize(_,_e,tt=1){(this.width!==_||this.height!==_e||this.depth!==tt)&&(this.width=_,this.height=_e,this.depth=tt,this.texture.image.width=_,this.texture.image.height=_e,this.texture.image.depth=tt,this.dispose()),this.viewport.set(0,0,_,_e),this.scissor.set(0,0,_,_e)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.viewport.copy(_.viewport),this.texture=_.texture.clone(),this.texture.isRenderTargetTexture=!0;const _e=Object.assign({},_.texture.image);return this.texture.source=new Source(_e),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class DataArrayTexture extends Texture{constructor(_=null,_e=1,tt=1,nt=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:_e,height:tt,depth:nt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,_e=1,tt=1){super(_,_e),this.isWebGLArrayRenderTarget=!0,this.depth=tt,this.texture=new DataArrayTexture(null,_,_e,tt),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(_=null,_e=1,tt=1,nt=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:_e,height:tt,depth:nt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,_e=1,tt=1){super(_,_e),this.isWebGL3DRenderTarget=!0,this.depth=tt,this.texture=new Data3DTexture(null,_,_e,tt),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(_=1,_e=1,tt=1,nt={}){super(_,_e,nt),this.isWebGLMultipleRenderTargets=!0;const it=this.texture;this.texture=[];for(let rt=0;rt<tt;rt++)this.texture[rt]=it.clone(),this.texture[rt].isRenderTargetTexture=!0}setSize(_,_e,tt=1){if(this.width!==_||this.height!==_e||this.depth!==tt){this.width=_,this.height=_e,this.depth=tt;for(let nt=0,it=this.texture.length;nt<it;nt++)this.texture[nt].image.width=_,this.texture[nt].image.height=_e,this.texture[nt].image.depth=tt;this.dispose()}return this.viewport.set(0,0,_,_e),this.scissor.set(0,0,_,_e),this}copy(_){this.dispose(),this.width=_.width,this.height=_.height,this.depth=_.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.texture.length=0;for(let _e=0,tt=_.texture.length;_e<tt;_e++)this.texture[_e]=_.texture[_e].clone(),this.texture[_e].isRenderTargetTexture=!0;return this}}let Quaternion$2=class{constructor(_=0,_e=0,tt=0,nt=1){this.isQuaternion=!0,this._x=_,this._y=_e,this._z=tt,this._w=nt}static slerpFlat(_,_e,tt,nt,it,rt,st){let ot=tt[nt+0],at=tt[nt+1],At=tt[nt+2],lt=tt[nt+3];const gt=it[rt+0],ct=it[rt+1],dt=it[rt+2],ht=it[rt+3];if(st===0){_[_e+0]=ot,_[_e+1]=at,_[_e+2]=At,_[_e+3]=lt;return}if(st===1){_[_e+0]=gt,_[_e+1]=ct,_[_e+2]=dt,_[_e+3]=ht;return}if(lt!==ht||ot!==gt||at!==ct||At!==dt){let mt=1-st;const Ct=ot*gt+at*ct+At*dt+lt*ht,ft=Ct>=0?1:-1,pt=1-Ct*Ct;if(pt>Number.EPSILON){const yt=Math.sqrt(pt),Gt=Math.atan2(yt,Ct*ft);mt=Math.sin(mt*Gt)/yt,st=Math.sin(st*Gt)/yt}const Vt=st*ft;if(ot=ot*mt+gt*Vt,at=at*mt+ct*Vt,At=At*mt+dt*Vt,lt=lt*mt+ht*Vt,mt===1-st){const yt=1/Math.sqrt(ot*ot+at*at+At*At+lt*lt);ot*=yt,at*=yt,At*=yt,lt*=yt}}_[_e]=ot,_[_e+1]=at,_[_e+2]=At,_[_e+3]=lt}static multiplyQuaternionsFlat(_,_e,tt,nt,it,rt){const st=tt[nt],ot=tt[nt+1],at=tt[nt+2],At=tt[nt+3],lt=it[rt],gt=it[rt+1],ct=it[rt+2],dt=it[rt+3];return _[_e]=st*dt+At*lt+ot*ct-at*gt,_[_e+1]=ot*dt+At*gt+at*lt-st*ct,_[_e+2]=at*dt+At*ct+st*gt-ot*lt,_[_e+3]=At*dt-st*lt-ot*gt-at*ct,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,_e,tt,nt){return this._x=_,this._y=_e,this._z=tt,this._w=nt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,_e){const tt=_._x,nt=_._y,it=_._z,rt=_._order,st=Math.cos,ot=Math.sin,at=st(tt/2),At=st(nt/2),lt=st(it/2),gt=ot(tt/2),ct=ot(nt/2),dt=ot(it/2);switch(rt){case"XYZ":this._x=gt*At*lt+at*ct*dt,this._y=at*ct*lt-gt*At*dt,this._z=at*At*dt+gt*ct*lt,this._w=at*At*lt-gt*ct*dt;break;case"YXZ":this._x=gt*At*lt+at*ct*dt,this._y=at*ct*lt-gt*At*dt,this._z=at*At*dt-gt*ct*lt,this._w=at*At*lt+gt*ct*dt;break;case"ZXY":this._x=gt*At*lt-at*ct*dt,this._y=at*ct*lt+gt*At*dt,this._z=at*At*dt+gt*ct*lt,this._w=at*At*lt-gt*ct*dt;break;case"ZYX":this._x=gt*At*lt-at*ct*dt,this._y=at*ct*lt+gt*At*dt,this._z=at*At*dt-gt*ct*lt,this._w=at*At*lt+gt*ct*dt;break;case"YZX":this._x=gt*At*lt+at*ct*dt,this._y=at*ct*lt+gt*At*dt,this._z=at*At*dt-gt*ct*lt,this._w=at*At*lt-gt*ct*dt;break;case"XZY":this._x=gt*At*lt-at*ct*dt,this._y=at*ct*lt-gt*At*dt,this._z=at*At*dt+gt*ct*lt,this._w=at*At*lt+gt*ct*dt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+rt)}return _e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(_,_e){const tt=_e/2,nt=Math.sin(tt);return this._x=_.x*nt,this._y=_.y*nt,this._z=_.z*nt,this._w=Math.cos(tt),this._onChangeCallback(),this}setFromRotationMatrix(_){const _e=_.elements,tt=_e[0],nt=_e[4],it=_e[8],rt=_e[1],st=_e[5],ot=_e[9],at=_e[2],At=_e[6],lt=_e[10],gt=tt+st+lt;if(gt>0){const ct=.5/Math.sqrt(gt+1);this._w=.25/ct,this._x=(At-ot)*ct,this._y=(it-at)*ct,this._z=(rt-nt)*ct}else if(tt>st&&tt>lt){const ct=2*Math.sqrt(1+tt-st-lt);this._w=(At-ot)/ct,this._x=.25*ct,this._y=(nt+rt)/ct,this._z=(it+at)/ct}else if(st>lt){const ct=2*Math.sqrt(1+st-tt-lt);this._w=(it-at)/ct,this._x=(nt+rt)/ct,this._y=.25*ct,this._z=(ot+At)/ct}else{const ct=2*Math.sqrt(1+lt-tt-st);this._w=(rt-nt)/ct,this._x=(it+at)/ct,this._y=(ot+At)/ct,this._z=.25*ct}return this._onChangeCallback(),this}setFromUnitVectors(_,_e){let tt=_.dot(_e)+1;return tt<Number.EPSILON?(tt=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=tt):(this._x=0,this._y=-_.z,this._z=_.y,this._w=tt)):(this._x=_.y*_e.z-_.z*_e.y,this._y=_.z*_e.x-_.x*_e.z,this._z=_.x*_e.y-_.y*_e.x,this._w=tt),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp$1(this.dot(_),-1,1)))}rotateTowards(_,_e){const tt=this.angleTo(_);if(tt===0)return this;const nt=Math.min(1,_e/tt);return this.slerp(_,nt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,_e){const tt=_._x,nt=_._y,it=_._z,rt=_._w,st=_e._x,ot=_e._y,at=_e._z,At=_e._w;return this._x=tt*At+rt*st+nt*at-it*ot,this._y=nt*At+rt*ot+it*st-tt*at,this._z=it*At+rt*at+tt*ot-nt*st,this._w=rt*At-tt*st-nt*ot-it*at,this._onChangeCallback(),this}slerp(_,_e){if(_e===0)return this;if(_e===1)return this.copy(_);const tt=this._x,nt=this._y,it=this._z,rt=this._w;let st=rt*_._w+tt*_._x+nt*_._y+it*_._z;if(st<0?(this._w=-_._w,this._x=-_._x,this._y=-_._y,this._z=-_._z,st=-st):this.copy(_),st>=1)return this._w=rt,this._x=tt,this._y=nt,this._z=it,this;const ot=1-st*st;if(ot<=Number.EPSILON){const ct=1-_e;return this._w=ct*rt+_e*this._w,this._x=ct*tt+_e*this._x,this._y=ct*nt+_e*this._y,this._z=ct*it+_e*this._z,this.normalize(),this._onChangeCallback(),this}const at=Math.sqrt(ot),At=Math.atan2(at,st),lt=Math.sin((1-_e)*At)/at,gt=Math.sin(_e*At)/at;return this._w=rt*lt+this._w*gt,this._x=tt*lt+this._x*gt,this._y=nt*lt+this._y*gt,this._z=it*lt+this._z*gt,this._onChangeCallback(),this}slerpQuaternions(_,_e,tt){return this.copy(_).slerp(_e,tt)}random(){const _=Math.random(),_e=Math.sqrt(1-_),tt=Math.sqrt(_),nt=2*Math.PI*Math.random(),it=2*Math.PI*Math.random();return this.set(_e*Math.cos(nt),tt*Math.sin(it),tt*Math.cos(it),_e*Math.sin(nt))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,_e=0){return this._x=_[_e],this._y=_[_e+1],this._z=_[_e+2],this._w=_[_e+3],this._onChangeCallback(),this}toArray(_=[],_e=0){return _[_e]=this._x,_[_e+1]=this._y,_[_e+2]=this._z,_[_e+3]=this._w,_}fromBufferAttribute(_,_e){return this._x=_.getX(_e),this._y=_.getY(_e),this._z=_.getZ(_e),this._w=_.getW(_e),this}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};class Vector3{constructor(_=0,_e=0,tt=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=_e,this.z=tt}set(_,_e,tt){return tt===void 0&&(tt=this.z),this.x=_,this.y=_e,this.z=tt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,_e){switch(_){case 0:this.x=_e;break;case 1:this.y=_e;break;case 2:this.z=_e;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,_e){return this.x=_.x+_e.x,this.y=_.y+_e.y,this.z=_.z+_e.z,this}addScaledVector(_,_e){return this.x+=_.x*_e,this.y+=_.y*_e,this.z+=_.z*_e,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,_e){return this.x=_.x-_e.x,this.y=_.y-_e.y,this.z=_.z-_e.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,_e){return this.x=_.x*_e.x,this.y=_.y*_e.y,this.z=_.z*_e.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,_e){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,_e))}applyMatrix3(_){const _e=this.x,tt=this.y,nt=this.z,it=_.elements;return this.x=it[0]*_e+it[3]*tt+it[6]*nt,this.y=it[1]*_e+it[4]*tt+it[7]*nt,this.z=it[2]*_e+it[5]*tt+it[8]*nt,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const _e=this.x,tt=this.y,nt=this.z,it=_.elements,rt=1/(it[3]*_e+it[7]*tt+it[11]*nt+it[15]);return this.x=(it[0]*_e+it[4]*tt+it[8]*nt+it[12])*rt,this.y=(it[1]*_e+it[5]*tt+it[9]*nt+it[13])*rt,this.z=(it[2]*_e+it[6]*tt+it[10]*nt+it[14])*rt,this}applyQuaternion(_){const _e=this.x,tt=this.y,nt=this.z,it=_.x,rt=_.y,st=_.z,ot=_.w,at=ot*_e+rt*nt-st*tt,At=ot*tt+st*_e-it*nt,lt=ot*nt+it*tt-rt*_e,gt=-it*_e-rt*tt-st*nt;return this.x=at*ot+gt*-it+At*-st-lt*-rt,this.y=At*ot+gt*-rt+lt*-it-at*-st,this.z=lt*ot+gt*-st+at*-rt-At*-it,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const _e=this.x,tt=this.y,nt=this.z,it=_.elements;return this.x=it[0]*_e+it[4]*tt+it[8]*nt,this.y=it[1]*_e+it[5]*tt+it[9]*nt,this.z=it[2]*_e+it[6]*tt+it[10]*nt,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,_e){return this.x=Math.max(_.x,Math.min(_e.x,this.x)),this.y=Math.max(_.y,Math.min(_e.y,this.y)),this.z=Math.max(_.z,Math.min(_e.z,this.z)),this}clampScalar(_,_e){return this.x=Math.max(_,Math.min(_e,this.x)),this.y=Math.max(_,Math.min(_e,this.y)),this.z=Math.max(_,Math.min(_e,this.z)),this}clampLength(_,_e){const tt=this.length();return this.divideScalar(tt||1).multiplyScalar(Math.max(_,Math.min(_e,tt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,_e){return this.x+=(_.x-this.x)*_e,this.y+=(_.y-this.y)*_e,this.z+=(_.z-this.z)*_e,this}lerpVectors(_,_e,tt){return this.x=_.x+(_e.x-_.x)*tt,this.y=_.y+(_e.y-_.y)*tt,this.z=_.z+(_e.z-_.z)*tt,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,_e){const tt=_.x,nt=_.y,it=_.z,rt=_e.x,st=_e.y,ot=_e.z;return this.x=nt*ot-it*st,this.y=it*rt-tt*ot,this.z=tt*st-nt*rt,this}projectOnVector(_){const _e=_.lengthSq();if(_e===0)return this.set(0,0,0);const tt=_.dot(this)/_e;return this.copy(_).multiplyScalar(tt)}projectOnPlane(_){return _vector$c.copy(this).projectOnVector(_),this.sub(_vector$c)}reflect(_){return this.sub(_vector$c.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const _e=Math.sqrt(this.lengthSq()*_.lengthSq());if(_e===0)return Math.PI/2;const tt=this.dot(_)/_e;return Math.acos(clamp$1(tt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const _e=this.x-_.x,tt=this.y-_.y,nt=this.z-_.z;return _e*_e+tt*tt+nt*nt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,_e,tt){const nt=Math.sin(_e)*_;return this.x=nt*Math.sin(tt),this.y=Math.cos(_e)*_,this.z=nt*Math.cos(tt),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,_e,tt){return this.x=_*Math.sin(_e),this.y=tt,this.z=_*Math.cos(_e),this}setFromMatrixPosition(_){const _e=_.elements;return this.x=_e[12],this.y=_e[13],this.z=_e[14],this}setFromMatrixScale(_){const _e=this.setFromMatrixColumn(_,0).length(),tt=this.setFromMatrixColumn(_,1).length(),nt=this.setFromMatrixColumn(_,2).length();return this.x=_e,this.y=tt,this.z=nt,this}setFromMatrixColumn(_,_e){return this.fromArray(_.elements,_e*4)}setFromMatrix3Column(_,_e){return this.fromArray(_.elements,_e*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,_e=0){return this.x=_[_e],this.y=_[_e+1],this.z=_[_e+2],this}toArray(_=[],_e=0){return _[_e]=this.x,_[_e+1]=this.y,_[_e+2]=this.z,_}fromBufferAttribute(_,_e){return this.x=_.getX(_e),this.y=_.getY(_e),this.z=_.getZ(_e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=(Math.random()-.5)*2,_e=Math.random()*Math.PI*2,tt=Math.sqrt(1-_**2);return this.x=tt*Math.cos(_e),this.y=tt*Math.sin(_e),this.z=_,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion$2;class Box3{constructor(_=new Vector3(1/0,1/0,1/0),_e=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=_e}set(_,_e){return this.min.copy(_),this.max.copy(_e),this}setFromArray(_){let _e=1/0,tt=1/0,nt=1/0,it=-1/0,rt=-1/0,st=-1/0;for(let ot=0,at=_.length;ot<at;ot+=3){const At=_[ot],lt=_[ot+1],gt=_[ot+2];At<_e&&(_e=At),lt<tt&&(tt=lt),gt<nt&&(nt=gt),At>it&&(it=At),lt>rt&&(rt=lt),gt>st&&(st=gt)}return this.min.set(_e,tt,nt),this.max.set(it,rt,st),this}setFromBufferAttribute(_){let _e=1/0,tt=1/0,nt=1/0,it=-1/0,rt=-1/0,st=-1/0;for(let ot=0,at=_.count;ot<at;ot++){const At=_.getX(ot),lt=_.getY(ot),gt=_.getZ(ot);At<_e&&(_e=At),lt<tt&&(tt=lt),gt<nt&&(nt=gt),At>it&&(it=At),lt>rt&&(rt=lt),gt>st&&(st=gt)}return this.min.set(_e,tt,nt),this.max.set(it,rt,st),this}setFromPoints(_){this.makeEmpty();for(let _e=0,tt=_.length;_e<tt;_e++)this.expandByPoint(_[_e]);return this}setFromCenterAndSize(_,_e){const tt=_vector$b.copy(_e).multiplyScalar(.5);return this.min.copy(_).sub(tt),this.max.copy(_).add(tt),this}setFromObject(_,_e=!1){return this.makeEmpty(),this.expandByObject(_,_e)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,_e=!1){_.updateWorldMatrix(!1,!1);const tt=_.geometry;if(tt!==void 0)if(_e&&tt.attributes!=null&&tt.attributes.position!==void 0){const it=tt.attributes.position;for(let rt=0,st=it.count;rt<st;rt++)_vector$b.fromBufferAttribute(it,rt).applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$b)}else tt.boundingBox===null&&tt.computeBoundingBox(),_box$3.copy(tt.boundingBox),_box$3.applyMatrix4(_.matrixWorld),this.union(_box$3);const nt=_.children;for(let it=0,rt=nt.length;it<rt;it++)this.expandByObject(nt[it],_e);return this}containsPoint(_){return!(_.x<this.min.x||_.x>this.max.x||_.y<this.min.y||_.y>this.max.y||_.z<this.min.z||_.z>this.max.z)}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,_e){return _e.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return!(_.max.x<this.min.x||_.min.x>this.max.x||_.max.y<this.min.y||_.min.y>this.max.y||_.max.z<this.min.z||_.min.z>this.max.z)}intersectsSphere(_){return this.clampPoint(_.center,_vector$b),_vector$b.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let _e,tt;return _.normal.x>0?(_e=_.normal.x*this.min.x,tt=_.normal.x*this.max.x):(_e=_.normal.x*this.max.x,tt=_.normal.x*this.min.x),_.normal.y>0?(_e+=_.normal.y*this.min.y,tt+=_.normal.y*this.max.y):(_e+=_.normal.y*this.max.y,tt+=_.normal.y*this.min.y),_.normal.z>0?(_e+=_.normal.z*this.min.z,tt+=_.normal.z*this.max.z):(_e+=_.normal.z*this.max.z,tt+=_.normal.z*this.min.z),_e<=-_.constant&&tt>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let _e=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(_e,_v0$2,_v1$7,_v2$4,_extents)||(_e=[1,0,0,0,1,0,0,0,1],!satForAxes(_e,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),_e=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(_e,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(_,_e){return _e.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return _vector$b.copy(_).clamp(this.min,this.max).sub(_).length()}getBoundingSphere(_){return this.getCenter(_.center),_.radius=this.getSize(_vector$b).length()*.5,_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(et,_,_e,tt,nt){for(let it=0,rt=et.length-3;it<=rt;it+=3){_testAxis.fromArray(et,it);const st=nt.x*Math.abs(_testAxis.x)+nt.y*Math.abs(_testAxis.y)+nt.z*Math.abs(_testAxis.z),ot=_.dot(_testAxis),at=_e.dot(_testAxis),At=tt.dot(_testAxis);if(Math.max(-Math.max(ot,at,At),Math.min(ot,at,At))>st)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(_=new Vector3,_e=-1){this.center=_,this.radius=_e}set(_,_e){return this.center.copy(_),this.radius=_e,this}setFromPoints(_,_e){const tt=this.center;_e!==void 0?tt.copy(_e):_box$2.setFromPoints(_).getCenter(tt);let nt=0;for(let it=0,rt=_.length;it<rt;it++)nt=Math.max(nt,tt.distanceToSquared(_[it]));return this.radius=Math.sqrt(nt),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const _e=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=_e*_e}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,_e){const tt=this.center.distanceToSquared(_);return _e.copy(_),tt>this.radius*this.radius&&(_e.sub(this.center).normalize(),_e.multiplyScalar(this.radius).add(this.center)),_e}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const _e=_v1$6.lengthSq();if(_e>this.radius*this.radius){const tt=Math.sqrt(_e),nt=(tt-this.radius)*.5;this.center.addScaledVector(_v1$6,nt/tt),this.radius+=nt}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;let Ray$2=class{constructor(_=new Vector3,_e=new Vector3(0,0,-1)){this.origin=_,this.direction=_e}set(_,_e){return this.origin.copy(_),this.direction.copy(_e),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,_e){return _e.copy(this.direction).multiplyScalar(_).add(this.origin)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$a)),this}closestPointToPoint(_,_e){_e.subVectors(_,this.origin);const tt=_e.dot(this.direction);return tt<0?_e.copy(this.origin):_e.copy(this.direction).multiplyScalar(tt).add(this.origin)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const _e=_vector$a.subVectors(_,this.origin).dot(this.direction);return _e<0?this.origin.distanceToSquared(_):(_vector$a.copy(this.direction).multiplyScalar(_e).add(this.origin),_vector$a.distanceToSquared(_))}distanceSqToSegment(_,_e,tt,nt){_segCenter.copy(_).add(_e).multiplyScalar(.5),_segDir.copy(_e).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const it=_.distanceTo(_e)*.5,rt=-this.direction.dot(_segDir),st=_diff.dot(this.direction),ot=-_diff.dot(_segDir),at=_diff.lengthSq(),At=Math.abs(1-rt*rt);let lt,gt,ct,dt;if(At>0)if(lt=rt*ot-st,gt=rt*st-ot,dt=it*At,lt>=0)if(gt>=-dt)if(gt<=dt){const ht=1/At;lt*=ht,gt*=ht,ct=lt*(lt+rt*gt+2*st)+gt*(rt*lt+gt+2*ot)+at}else gt=it,lt=Math.max(0,-(rt*gt+st)),ct=-lt*lt+gt*(gt+2*ot)+at;else gt=-it,lt=Math.max(0,-(rt*gt+st)),ct=-lt*lt+gt*(gt+2*ot)+at;else gt<=-dt?(lt=Math.max(0,-(-rt*it+st)),gt=lt>0?-it:Math.min(Math.max(-it,-ot),it),ct=-lt*lt+gt*(gt+2*ot)+at):gt<=dt?(lt=0,gt=Math.min(Math.max(-it,-ot),it),ct=gt*(gt+2*ot)+at):(lt=Math.max(0,-(rt*it+st)),gt=lt>0?it:Math.min(Math.max(-it,-ot),it),ct=-lt*lt+gt*(gt+2*ot)+at);else gt=rt>0?-it:it,lt=Math.max(0,-(rt*gt+st)),ct=-lt*lt+gt*(gt+2*ot)+at;return tt&&tt.copy(this.direction).multiplyScalar(lt).add(this.origin),nt&&nt.copy(_segDir).multiplyScalar(gt).add(_segCenter),ct}intersectSphere(_,_e){_vector$a.subVectors(_.center,this.origin);const tt=_vector$a.dot(this.direction),nt=_vector$a.dot(_vector$a)-tt*tt,it=_.radius*_.radius;if(nt>it)return null;const rt=Math.sqrt(it-nt),st=tt-rt,ot=tt+rt;return st<0&&ot<0?null:st<0?this.at(ot,_e):this.at(st,_e)}intersectsSphere(_){return this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const _e=_.normal.dot(this.direction);if(_e===0)return _.distanceToPoint(this.origin)===0?0:null;const tt=-(this.origin.dot(_.normal)+_.constant)/_e;return tt>=0?tt:null}intersectPlane(_,_e){const tt=this.distanceToPlane(_);return tt===null?null:this.at(tt,_e)}intersectsPlane(_){const _e=_.distanceToPoint(this.origin);return _e===0||_.normal.dot(this.direction)*_e<0}intersectBox(_,_e){let tt,nt,it,rt,st,ot;const at=1/this.direction.x,At=1/this.direction.y,lt=1/this.direction.z,gt=this.origin;return at>=0?(tt=(_.min.x-gt.x)*at,nt=(_.max.x-gt.x)*at):(tt=(_.max.x-gt.x)*at,nt=(_.min.x-gt.x)*at),At>=0?(it=(_.min.y-gt.y)*At,rt=(_.max.y-gt.y)*At):(it=(_.max.y-gt.y)*At,rt=(_.min.y-gt.y)*At),tt>rt||it>nt||((it>tt||isNaN(tt))&&(tt=it),(rt<nt||isNaN(nt))&&(nt=rt),lt>=0?(st=(_.min.z-gt.z)*lt,ot=(_.max.z-gt.z)*lt):(st=(_.max.z-gt.z)*lt,ot=(_.min.z-gt.z)*lt),tt>ot||st>nt)||((st>tt||tt!==tt)&&(tt=st),(ot<nt||nt!==nt)&&(nt=ot),nt<0)?null:this.at(tt>=0?tt:nt,_e)}intersectsBox(_){return this.intersectBox(_,_vector$a)!==null}intersectTriangle(_,_e,tt,nt,it){_edge1.subVectors(_e,_),_edge2.subVectors(tt,_),_normal$1.crossVectors(_edge1,_edge2);let rt=this.direction.dot(_normal$1),st;if(rt>0){if(nt)return null;st=1}else if(rt<0)st=-1,rt=-rt;else return null;_diff.subVectors(this.origin,_);const ot=st*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ot<0)return null;const at=st*this.direction.dot(_edge1.cross(_diff));if(at<0||ot+at>rt)return null;const At=-st*_diff.dot(_normal$1);return At<0?null:this.at(At/rt,it)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(_,_e,tt,nt,it,rt,st,ot,at,At,lt,gt,ct,dt,ht,mt){const Ct=this.elements;return Ct[0]=_,Ct[4]=_e,Ct[8]=tt,Ct[12]=nt,Ct[1]=it,Ct[5]=rt,Ct[9]=st,Ct[13]=ot,Ct[2]=at,Ct[6]=At,Ct[10]=lt,Ct[14]=gt,Ct[3]=ct,Ct[7]=dt,Ct[11]=ht,Ct[15]=mt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const _e=this.elements,tt=_.elements;return _e[0]=tt[0],_e[1]=tt[1],_e[2]=tt[2],_e[3]=tt[3],_e[4]=tt[4],_e[5]=tt[5],_e[6]=tt[6],_e[7]=tt[7],_e[8]=tt[8],_e[9]=tt[9],_e[10]=tt[10],_e[11]=tt[11],_e[12]=tt[12],_e[13]=tt[13],_e[14]=tt[14],_e[15]=tt[15],this}copyPosition(_){const _e=this.elements,tt=_.elements;return _e[12]=tt[12],_e[13]=tt[13],_e[14]=tt[14],this}setFromMatrix3(_){const _e=_.elements;return this.set(_e[0],_e[3],_e[6],0,_e[1],_e[4],_e[7],0,_e[2],_e[5],_e[8],0,0,0,0,1),this}extractBasis(_,_e,tt){return _.setFromMatrixColumn(this,0),_e.setFromMatrixColumn(this,1),tt.setFromMatrixColumn(this,2),this}makeBasis(_,_e,tt){return this.set(_.x,_e.x,tt.x,0,_.y,_e.y,tt.y,0,_.z,_e.z,tt.z,0,0,0,0,1),this}extractRotation(_){const _e=this.elements,tt=_.elements,nt=1/_v1$5.setFromMatrixColumn(_,0).length(),it=1/_v1$5.setFromMatrixColumn(_,1).length(),rt=1/_v1$5.setFromMatrixColumn(_,2).length();return _e[0]=tt[0]*nt,_e[1]=tt[1]*nt,_e[2]=tt[2]*nt,_e[3]=0,_e[4]=tt[4]*it,_e[5]=tt[5]*it,_e[6]=tt[6]*it,_e[7]=0,_e[8]=tt[8]*rt,_e[9]=tt[9]*rt,_e[10]=tt[10]*rt,_e[11]=0,_e[12]=0,_e[13]=0,_e[14]=0,_e[15]=1,this}makeRotationFromEuler(_){const _e=this.elements,tt=_.x,nt=_.y,it=_.z,rt=Math.cos(tt),st=Math.sin(tt),ot=Math.cos(nt),at=Math.sin(nt),At=Math.cos(it),lt=Math.sin(it);if(_.order==="XYZ"){const gt=rt*At,ct=rt*lt,dt=st*At,ht=st*lt;_e[0]=ot*At,_e[4]=-ot*lt,_e[8]=at,_e[1]=ct+dt*at,_e[5]=gt-ht*at,_e[9]=-st*ot,_e[2]=ht-gt*at,_e[6]=dt+ct*at,_e[10]=rt*ot}else if(_.order==="YXZ"){const gt=ot*At,ct=ot*lt,dt=at*At,ht=at*lt;_e[0]=gt+ht*st,_e[4]=dt*st-ct,_e[8]=rt*at,_e[1]=rt*lt,_e[5]=rt*At,_e[9]=-st,_e[2]=ct*st-dt,_e[6]=ht+gt*st,_e[10]=rt*ot}else if(_.order==="ZXY"){const gt=ot*At,ct=ot*lt,dt=at*At,ht=at*lt;_e[0]=gt-ht*st,_e[4]=-rt*lt,_e[8]=dt+ct*st,_e[1]=ct+dt*st,_e[5]=rt*At,_e[9]=ht-gt*st,_e[2]=-rt*at,_e[6]=st,_e[10]=rt*ot}else if(_.order==="ZYX"){const gt=rt*At,ct=rt*lt,dt=st*At,ht=st*lt;_e[0]=ot*At,_e[4]=dt*at-ct,_e[8]=gt*at+ht,_e[1]=ot*lt,_e[5]=ht*at+gt,_e[9]=ct*at-dt,_e[2]=-at,_e[6]=st*ot,_e[10]=rt*ot}else if(_.order==="YZX"){const gt=rt*ot,ct=rt*at,dt=st*ot,ht=st*at;_e[0]=ot*At,_e[4]=ht-gt*lt,_e[8]=dt*lt+ct,_e[1]=lt,_e[5]=rt*At,_e[9]=-st*At,_e[2]=-at*At,_e[6]=ct*lt+dt,_e[10]=gt-ht*lt}else if(_.order==="XZY"){const gt=rt*ot,ct=rt*at,dt=st*ot,ht=st*at;_e[0]=ot*At,_e[4]=-lt,_e[8]=at*At,_e[1]=gt*lt+ht,_e[5]=rt*At,_e[9]=ct*lt-dt,_e[2]=dt*lt-ct,_e[6]=st*At,_e[10]=ht*lt+gt}return _e[3]=0,_e[7]=0,_e[11]=0,_e[12]=0,_e[13]=0,_e[14]=0,_e[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,_e,tt){const nt=this.elements;return _z.subVectors(_,_e),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(tt,_z),_x.lengthSq()===0&&(Math.abs(tt.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(tt,_z)),_x.normalize(),_y.crossVectors(_z,_x),nt[0]=_x.x,nt[4]=_y.x,nt[8]=_z.x,nt[1]=_x.y,nt[5]=_y.y,nt[9]=_z.y,nt[2]=_x.z,nt[6]=_y.z,nt[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,_e){const tt=_.elements,nt=_e.elements,it=this.elements,rt=tt[0],st=tt[4],ot=tt[8],at=tt[12],At=tt[1],lt=tt[5],gt=tt[9],ct=tt[13],dt=tt[2],ht=tt[6],mt=tt[10],Ct=tt[14],ft=tt[3],pt=tt[7],Vt=tt[11],yt=tt[15],Gt=nt[0],Bt=nt[4],vt=nt[8],wt=nt[12],Mt=nt[1],kt=nt[5],Nt=nt[9],Yt=nt[13],Lt=nt[2],Xt=nt[6],_t=nt[10],Tt=nt[14],St=nt[3],Zt=nt[7],Et=nt[11],Wt=nt[15];return it[0]=rt*Gt+st*Mt+ot*Lt+at*St,it[4]=rt*Bt+st*kt+ot*Xt+at*Zt,it[8]=rt*vt+st*Nt+ot*_t+at*Et,it[12]=rt*wt+st*Yt+ot*Tt+at*Wt,it[1]=At*Gt+lt*Mt+gt*Lt+ct*St,it[5]=At*Bt+lt*kt+gt*Xt+ct*Zt,it[9]=At*vt+lt*Nt+gt*_t+ct*Et,it[13]=At*wt+lt*Yt+gt*Tt+ct*Wt,it[2]=dt*Gt+ht*Mt+mt*Lt+Ct*St,it[6]=dt*Bt+ht*kt+mt*Xt+Ct*Zt,it[10]=dt*vt+ht*Nt+mt*_t+Ct*Et,it[14]=dt*wt+ht*Yt+mt*Tt+Ct*Wt,it[3]=ft*Gt+pt*Mt+Vt*Lt+yt*St,it[7]=ft*Bt+pt*kt+Vt*Xt+yt*Zt,it[11]=ft*vt+pt*Nt+Vt*_t+yt*Et,it[15]=ft*wt+pt*Yt+Vt*Tt+yt*Wt,this}multiplyScalar(_){const _e=this.elements;return _e[0]*=_,_e[4]*=_,_e[8]*=_,_e[12]*=_,_e[1]*=_,_e[5]*=_,_e[9]*=_,_e[13]*=_,_e[2]*=_,_e[6]*=_,_e[10]*=_,_e[14]*=_,_e[3]*=_,_e[7]*=_,_e[11]*=_,_e[15]*=_,this}determinant(){const _=this.elements,_e=_[0],tt=_[4],nt=_[8],it=_[12],rt=_[1],st=_[5],ot=_[9],at=_[13],At=_[2],lt=_[6],gt=_[10],ct=_[14],dt=_[3],ht=_[7],mt=_[11],Ct=_[15];return dt*(+it*ot*lt-nt*at*lt-it*st*gt+tt*at*gt+nt*st*ct-tt*ot*ct)+ht*(+_e*ot*ct-_e*at*gt+it*rt*gt-nt*rt*ct+nt*at*At-it*ot*At)+mt*(+_e*at*lt-_e*st*ct-it*rt*lt+tt*rt*ct+it*st*At-tt*at*At)+Ct*(-nt*st*At-_e*ot*lt+_e*st*gt+nt*rt*lt-tt*rt*gt+tt*ot*At)}transpose(){const _=this.elements;let _e;return _e=_[1],_[1]=_[4],_[4]=_e,_e=_[2],_[2]=_[8],_[8]=_e,_e=_[6],_[6]=_[9],_[9]=_e,_e=_[3],_[3]=_[12],_[12]=_e,_e=_[7],_[7]=_[13],_[13]=_e,_e=_[11],_[11]=_[14],_[14]=_e,this}setPosition(_,_e,tt){const nt=this.elements;return _.isVector3?(nt[12]=_.x,nt[13]=_.y,nt[14]=_.z):(nt[12]=_,nt[13]=_e,nt[14]=tt),this}invert(){const _=this.elements,_e=_[0],tt=_[1],nt=_[2],it=_[3],rt=_[4],st=_[5],ot=_[6],at=_[7],At=_[8],lt=_[9],gt=_[10],ct=_[11],dt=_[12],ht=_[13],mt=_[14],Ct=_[15],ft=lt*mt*at-ht*gt*at+ht*ot*ct-st*mt*ct-lt*ot*Ct+st*gt*Ct,pt=dt*gt*at-At*mt*at-dt*ot*ct+rt*mt*ct+At*ot*Ct-rt*gt*Ct,Vt=At*ht*at-dt*lt*at+dt*st*ct-rt*ht*ct-At*st*Ct+rt*lt*Ct,yt=dt*lt*ot-At*ht*ot-dt*st*gt+rt*ht*gt+At*st*mt-rt*lt*mt,Gt=_e*ft+tt*pt+nt*Vt+it*yt;if(Gt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Bt=1/Gt;return _[0]=ft*Bt,_[1]=(ht*gt*it-lt*mt*it-ht*nt*ct+tt*mt*ct+lt*nt*Ct-tt*gt*Ct)*Bt,_[2]=(st*mt*it-ht*ot*it+ht*nt*at-tt*mt*at-st*nt*Ct+tt*ot*Ct)*Bt,_[3]=(lt*ot*it-st*gt*it-lt*nt*at+tt*gt*at+st*nt*ct-tt*ot*ct)*Bt,_[4]=pt*Bt,_[5]=(At*mt*it-dt*gt*it+dt*nt*ct-_e*mt*ct-At*nt*Ct+_e*gt*Ct)*Bt,_[6]=(dt*ot*it-rt*mt*it-dt*nt*at+_e*mt*at+rt*nt*Ct-_e*ot*Ct)*Bt,_[7]=(rt*gt*it-At*ot*it+At*nt*at-_e*gt*at-rt*nt*ct+_e*ot*ct)*Bt,_[8]=Vt*Bt,_[9]=(dt*lt*it-At*ht*it-dt*tt*ct+_e*ht*ct+At*tt*Ct-_e*lt*Ct)*Bt,_[10]=(rt*ht*it-dt*st*it+dt*tt*at-_e*ht*at-rt*tt*Ct+_e*st*Ct)*Bt,_[11]=(At*st*it-rt*lt*it-At*tt*at+_e*lt*at+rt*tt*ct-_e*st*ct)*Bt,_[12]=yt*Bt,_[13]=(At*ht*nt-dt*lt*nt+dt*tt*gt-_e*ht*gt-At*tt*mt+_e*lt*mt)*Bt,_[14]=(dt*st*nt-rt*ht*nt-dt*tt*ot+_e*ht*ot+rt*tt*mt-_e*st*mt)*Bt,_[15]=(rt*lt*nt-At*st*nt+At*tt*ot-_e*lt*ot-rt*tt*gt+_e*st*gt)*Bt,this}scale(_){const _e=this.elements,tt=_.x,nt=_.y,it=_.z;return _e[0]*=tt,_e[4]*=nt,_e[8]*=it,_e[1]*=tt,_e[5]*=nt,_e[9]*=it,_e[2]*=tt,_e[6]*=nt,_e[10]*=it,_e[3]*=tt,_e[7]*=nt,_e[11]*=it,this}getMaxScaleOnAxis(){const _=this.elements,_e=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],tt=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],nt=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(_e,tt,nt))}makeTranslation(_,_e,tt){return this.set(1,0,0,_,0,1,0,_e,0,0,1,tt,0,0,0,1),this}makeRotationX(_){const _e=Math.cos(_),tt=Math.sin(_);return this.set(1,0,0,0,0,_e,-tt,0,0,tt,_e,0,0,0,0,1),this}makeRotationY(_){const _e=Math.cos(_),tt=Math.sin(_);return this.set(_e,0,tt,0,0,1,0,0,-tt,0,_e,0,0,0,0,1),this}makeRotationZ(_){const _e=Math.cos(_),tt=Math.sin(_);return this.set(_e,-tt,0,0,tt,_e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,_e){const tt=Math.cos(_e),nt=Math.sin(_e),it=1-tt,rt=_.x,st=_.y,ot=_.z,at=it*rt,At=it*st;return this.set(at*rt+tt,at*st-nt*ot,at*ot+nt*st,0,at*st+nt*ot,At*st+tt,At*ot-nt*rt,0,at*ot-nt*st,At*ot+nt*rt,it*ot*ot+tt,0,0,0,0,1),this}makeScale(_,_e,tt){return this.set(_,0,0,0,0,_e,0,0,0,0,tt,0,0,0,0,1),this}makeShear(_,_e,tt,nt,it,rt){return this.set(1,tt,it,0,_,1,rt,0,_e,nt,1,0,0,0,0,1),this}compose(_,_e,tt){const nt=this.elements,it=_e._x,rt=_e._y,st=_e._z,ot=_e._w,at=it+it,At=rt+rt,lt=st+st,gt=it*at,ct=it*At,dt=it*lt,ht=rt*At,mt=rt*lt,Ct=st*lt,ft=ot*at,pt=ot*At,Vt=ot*lt,yt=tt.x,Gt=tt.y,Bt=tt.z;return nt[0]=(1-(ht+Ct))*yt,nt[1]=(ct+Vt)*yt,nt[2]=(dt-pt)*yt,nt[3]=0,nt[4]=(ct-Vt)*Gt,nt[5]=(1-(gt+Ct))*Gt,nt[6]=(mt+ft)*Gt,nt[7]=0,nt[8]=(dt+pt)*Bt,nt[9]=(mt-ft)*Bt,nt[10]=(1-(gt+ht))*Bt,nt[11]=0,nt[12]=_.x,nt[13]=_.y,nt[14]=_.z,nt[15]=1,this}decompose(_,_e,tt){const nt=this.elements;let it=_v1$5.set(nt[0],nt[1],nt[2]).length();const rt=_v1$5.set(nt[4],nt[5],nt[6]).length(),st=_v1$5.set(nt[8],nt[9],nt[10]).length();this.determinant()<0&&(it=-it),_.x=nt[12],_.y=nt[13],_.z=nt[14],_m1$2.copy(this);const at=1/it,At=1/rt,lt=1/st;return _m1$2.elements[0]*=at,_m1$2.elements[1]*=at,_m1$2.elements[2]*=at,_m1$2.elements[4]*=At,_m1$2.elements[5]*=At,_m1$2.elements[6]*=At,_m1$2.elements[8]*=lt,_m1$2.elements[9]*=lt,_m1$2.elements[10]*=lt,_e.setFromRotationMatrix(_m1$2),tt.x=it,tt.y=rt,tt.z=st,this}makePerspective(_,_e,tt,nt,it,rt){const st=this.elements,ot=2*it/(_e-_),at=2*it/(tt-nt),At=(_e+_)/(_e-_),lt=(tt+nt)/(tt-nt),gt=-(rt+it)/(rt-it),ct=-2*rt*it/(rt-it);return st[0]=ot,st[4]=0,st[8]=At,st[12]=0,st[1]=0,st[5]=at,st[9]=lt,st[13]=0,st[2]=0,st[6]=0,st[10]=gt,st[14]=ct,st[3]=0,st[7]=0,st[11]=-1,st[15]=0,this}makeOrthographic(_,_e,tt,nt,it,rt){const st=this.elements,ot=1/(_e-_),at=1/(tt-nt),At=1/(rt-it),lt=(_e+_)*ot,gt=(tt+nt)*at,ct=(rt+it)*At;return st[0]=2*ot,st[4]=0,st[8]=0,st[12]=-lt,st[1]=0,st[5]=2*at,st[9]=0,st[13]=-gt,st[2]=0,st[6]=0,st[10]=-2*At,st[14]=-ct,st[3]=0,st[7]=0,st[11]=0,st[15]=1,this}equals(_){const _e=this.elements,tt=_.elements;for(let nt=0;nt<16;nt++)if(_e[nt]!==tt[nt])return!1;return!0}fromArray(_,_e=0){for(let tt=0;tt<16;tt++)this.elements[tt]=_[tt+_e];return this}toArray(_=[],_e=0){const tt=this.elements;return _[_e]=tt[0],_[_e+1]=tt[1],_[_e+2]=tt[2],_[_e+3]=tt[3],_[_e+4]=tt[4],_[_e+5]=tt[5],_[_e+6]=tt[6],_[_e+7]=tt[7],_[_e+8]=tt[8],_[_e+9]=tt[9],_[_e+10]=tt[10],_[_e+11]=tt[11],_[_e+12]=tt[12],_[_e+13]=tt[13],_[_e+14]=tt[14],_[_e+15]=tt[15],_}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$1=new Matrix4,_quaternion$3=new Quaternion$2;class Euler{constructor(_=0,_e=0,tt=0,nt=Euler.DefaultOrder){this.isEuler=!0,this._x=_,this._y=_e,this._z=tt,this._order=nt}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,_e,tt,nt=this._order){return this._x=_,this._y=_e,this._z=tt,this._order=nt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,_e=this._order,tt=!0){const nt=_.elements,it=nt[0],rt=nt[4],st=nt[8],ot=nt[1],at=nt[5],At=nt[9],lt=nt[2],gt=nt[6],ct=nt[10];switch(_e){case"XYZ":this._y=Math.asin(clamp$1(st,-1,1)),Math.abs(st)<.9999999?(this._x=Math.atan2(-At,ct),this._z=Math.atan2(-rt,it)):(this._x=Math.atan2(gt,at),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(At,-1,1)),Math.abs(At)<.9999999?(this._y=Math.atan2(st,ct),this._z=Math.atan2(ot,at)):(this._y=Math.atan2(-lt,it),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(gt,-1,1)),Math.abs(gt)<.9999999?(this._y=Math.atan2(-lt,ct),this._z=Math.atan2(-rt,at)):(this._y=0,this._z=Math.atan2(ot,it));break;case"ZYX":this._y=Math.asin(-clamp$1(lt,-1,1)),Math.abs(lt)<.9999999?(this._x=Math.atan2(gt,ct),this._z=Math.atan2(ot,it)):(this._x=0,this._z=Math.atan2(-rt,at));break;case"YZX":this._z=Math.asin(clamp$1(ot,-1,1)),Math.abs(ot)<.9999999?(this._x=Math.atan2(-At,at),this._y=Math.atan2(-lt,it)):(this._x=0,this._y=Math.atan2(st,ct));break;case"XZY":this._z=Math.asin(-clamp$1(rt,-1,1)),Math.abs(rt)<.9999999?(this._x=Math.atan2(gt,at),this._y=Math.atan2(st,it)):(this._x=Math.atan2(-At,ct),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+_e)}return this._order=_e,tt===!0&&this._onChangeCallback(),this}setFromQuaternion(_,_e,tt){return _matrix$1.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix$1,_e,tt)}setFromVector3(_,_e=this._order){return this.set(_.x,_.y,_.z,_e)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],_e=0){return _[_e]=this._x,_[_e+1]=this._y,_[_e+2]=this._z,_[_e+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Euler.DefaultOrder="XYZ";Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion$2,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion$2,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const _=new Vector3,_e=new Euler,tt=new Quaternion$2,nt=new Vector3(1,1,1);function it(){tt.setFromEuler(_e,!1)}function rt(){_e.setFromQuaternion(tt,void 0,!1)}_e._onChange(it),tt._onChange(rt),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:_e},quaternion:{configurable:!0,enumerable:!0,value:tt},scale:{configurable:!0,enumerable:!0,value:nt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DefaultMatrixWorldAutoUpdate,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,_e){this.quaternion.setFromAxisAngle(_,_e)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,_e){return _q1.setFromAxisAngle(_,_e),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,_e){return _q1.setFromAxisAngle(_,_e),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,_e){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(_e)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(_,_e,tt){_.isVector3?_target.copy(_):_target.set(_,_e,tt);const nt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),nt&&(_m1$1.extractRotation(nt.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let _e=0;_e<arguments.length;_e++)this.add(arguments[_e]);return this}return _===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.parent!==null&&_.parent.remove(_),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let tt=0;tt<arguments.length;tt++)this.remove(arguments[tt]);return this}const _e=this.children.indexOf(_);return _e!==-1&&(_.parent=null,this.children.splice(_e,1),_.dispatchEvent(_removedEvent)),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){for(let _=0;_<this.children.length;_++){const _e=this.children[_];_e.parent=null,_e.dispatchEvent(_removedEvent)}return this.children.length=0,this}attach(_){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$1),this.add(_),_.updateWorldMatrix(!1,!0),this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,_e){if(this[_]===_e)return this;for(let tt=0,nt=this.children.length;tt<nt;tt++){const rt=this.children[tt].getObjectByProperty(_,_e);if(rt!==void 0)return rt}}getObjectsByProperty(_,_e){let tt=[];this[_]===_e&&tt.push(this);for(let nt=0,it=this.children.length;nt<it;nt++){const rt=this.children[nt].getObjectsByProperty(_,_e);rt.length>0&&(tt=tt.concat(rt))}return tt}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const _e=this.matrixWorld.elements;return _.set(_e[8],_e[9],_e[10]).normalize()}raycast(){}traverse(_){_(this);const _e=this.children;for(let tt=0,nt=_e.length;tt<nt;tt++)_e[tt].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const _e=this.children;for(let tt=0,nt=_e.length;tt<nt;tt++)_e[tt].traverseVisible(_)}traverseAncestors(_){const _e=this.parent;_e!==null&&(_(_e),_e.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_=!0);const _e=this.children;for(let tt=0,nt=_e.length;tt<nt;tt++){const it=_e[tt];(it.matrixWorldAutoUpdate===!0||_===!0)&&it.updateMatrixWorld(_)}}updateWorldMatrix(_,_e){const tt=this.parent;if(_===!0&&tt!==null&&tt.matrixWorldAutoUpdate===!0&&tt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),_e===!0){const nt=this.children;for(let it=0,rt=nt.length;it<rt;it++){const st=nt[it];st.matrixWorldAutoUpdate===!0&&st.updateWorldMatrix(!1,!0)}}}toJSON(_){const _e=_===void 0||typeof _=="string",tt={};_e&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},tt.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const nt={};nt.uuid=this.uuid,nt.type=this.type,this.name!==""&&(nt.name=this.name),this.castShadow===!0&&(nt.castShadow=!0),this.receiveShadow===!0&&(nt.receiveShadow=!0),this.visible===!1&&(nt.visible=!1),this.frustumCulled===!1&&(nt.frustumCulled=!1),this.renderOrder!==0&&(nt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(nt.userData=this.userData),nt.layers=this.layers.mask,nt.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(nt.matrixAutoUpdate=!1),this.isInstancedMesh&&(nt.type="InstancedMesh",nt.count=this.count,nt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(nt.instanceColor=this.instanceColor.toJSON()));function it(st,ot){return st[ot.uuid]===void 0&&(st[ot.uuid]=ot.toJSON(_)),ot.uuid}if(this.isScene)this.background&&(this.background.isColor?nt.background=this.background.toJSON():this.background.isTexture&&(nt.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(nt.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){nt.geometry=it(_.geometries,this.geometry);const st=this.geometry.parameters;if(st!==void 0&&st.shapes!==void 0){const ot=st.shapes;if(Array.isArray(ot))for(let at=0,At=ot.length;at<At;at++){const lt=ot[at];it(_.shapes,lt)}else it(_.shapes,ot)}}if(this.isSkinnedMesh&&(nt.bindMode=this.bindMode,nt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(it(_.skeletons,this.skeleton),nt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const st=[];for(let ot=0,at=this.material.length;ot<at;ot++)st.push(it(_.materials,this.material[ot]));nt.material=st}else nt.material=it(_.materials,this.material);if(this.children.length>0){nt.children=[];for(let st=0;st<this.children.length;st++)nt.children.push(this.children[st].toJSON(_).object)}if(this.animations.length>0){nt.animations=[];for(let st=0;st<this.animations.length;st++){const ot=this.animations[st];nt.animations.push(it(_.animations,ot))}}if(_e){const st=rt(_.geometries),ot=rt(_.materials),at=rt(_.textures),At=rt(_.images),lt=rt(_.shapes),gt=rt(_.skeletons),ct=rt(_.animations),dt=rt(_.nodes);st.length>0&&(tt.geometries=st),ot.length>0&&(tt.materials=ot),at.length>0&&(tt.textures=at),At.length>0&&(tt.images=At),lt.length>0&&(tt.shapes=lt),gt.length>0&&(tt.skeletons=gt),ct.length>0&&(tt.animations=ct),dt.length>0&&(tt.nodes=dt)}return tt.object=nt,tt;function rt(st){const ot=[];for(const at in st){const At=st[at];delete At.metadata,ot.push(At)}return ot}}clone(_){return new this.constructor().copy(this,_)}copy(_,_e=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.userData=JSON.parse(JSON.stringify(_.userData)),_e===!0)for(let tt=0;tt<_.children.length;tt++){const nt=_.children[tt];this.add(nt.clone())}return this}}Object3D.DefaultUp=new Vector3(0,1,0);Object3D.DefaultMatrixAutoUpdate=!0;Object3D.DefaultMatrixWorldAutoUpdate=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;class Triangle{constructor(_=new Vector3,_e=new Vector3,tt=new Vector3){this.a=_,this.b=_e,this.c=tt}static getNormal(_,_e,tt,nt){nt.subVectors(tt,_e),_v0$1.subVectors(_,_e),nt.cross(_v0$1);const it=nt.lengthSq();return it>0?nt.multiplyScalar(1/Math.sqrt(it)):nt.set(0,0,0)}static getBarycoord(_,_e,tt,nt,it){_v0$1.subVectors(nt,_e),_v1$3.subVectors(tt,_e),_v2$2.subVectors(_,_e);const rt=_v0$1.dot(_v0$1),st=_v0$1.dot(_v1$3),ot=_v0$1.dot(_v2$2),at=_v1$3.dot(_v1$3),At=_v1$3.dot(_v2$2),lt=rt*at-st*st;if(lt===0)return it.set(-2,-1,-1);const gt=1/lt,ct=(at*ot-st*At)*gt,dt=(rt*At-st*ot)*gt;return it.set(1-ct-dt,dt,ct)}static containsPoint(_,_e,tt,nt){return this.getBarycoord(_,_e,tt,nt,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(_,_e,tt,nt,it,rt,st,ot){return this.getBarycoord(_,_e,tt,nt,_v3$1),ot.set(0,0),ot.addScaledVector(it,_v3$1.x),ot.addScaledVector(rt,_v3$1.y),ot.addScaledVector(st,_v3$1.z),ot}static isFrontFacing(_,_e,tt,nt){return _v0$1.subVectors(tt,_e),_v1$3.subVectors(_,_e),_v0$1.cross(_v1$3).dot(nt)<0}set(_,_e,tt){return this.a.copy(_),this.b.copy(_e),this.c.copy(tt),this}setFromPointsAndIndices(_,_e,tt,nt){return this.a.copy(_[_e]),this.b.copy(_[tt]),this.c.copy(_[nt]),this}setFromAttributeAndIndices(_,_e,tt,nt){return this.a.fromBufferAttribute(_,_e),this.b.fromBufferAttribute(_,tt),this.c.fromBufferAttribute(_,nt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,_e){return Triangle.getBarycoord(_,this.a,this.b,this.c,_e)}getUV(_,_e,tt,nt,it){return Triangle.getUV(_,this.a,this.b,this.c,_e,tt,nt,it)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,_e){const tt=this.a,nt=this.b,it=this.c;let rt,st;_vab.subVectors(nt,tt),_vac.subVectors(it,tt),_vap.subVectors(_,tt);const ot=_vab.dot(_vap),at=_vac.dot(_vap);if(ot<=0&&at<=0)return _e.copy(tt);_vbp.subVectors(_,nt);const At=_vab.dot(_vbp),lt=_vac.dot(_vbp);if(At>=0&&lt<=At)return _e.copy(nt);const gt=ot*lt-At*at;if(gt<=0&&ot>=0&&At<=0)return rt=ot/(ot-At),_e.copy(tt).addScaledVector(_vab,rt);_vcp.subVectors(_,it);const ct=_vab.dot(_vcp),dt=_vac.dot(_vcp);if(dt>=0&&ct<=dt)return _e.copy(it);const ht=ct*at-ot*dt;if(ht<=0&&at>=0&&dt<=0)return st=at/(at-dt),_e.copy(tt).addScaledVector(_vac,st);const mt=At*dt-ct*lt;if(mt<=0&&lt-At>=0&&ct-dt>=0)return _vbc.subVectors(it,nt),st=(lt-At)/(lt-At+(ct-dt)),_e.copy(nt).addScaledVector(_vbc,st);const Ct=1/(mt+ht+gt);return rt=ht*Ct,st=gt*Ct,_e.copy(tt).addScaledVector(_vab,rt).addScaledVector(_vac,st)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}let materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const _e in _){const tt=_[_e];if(tt===void 0){console.warn("THREE.Material: '"+_e+"' parameter is undefined.");continue}const nt=this[_e];if(nt===void 0){console.warn("THREE."+this.type+": '"+_e+"' is not a property of this material.");continue}nt&&nt.isColor?nt.set(tt):nt&&nt.isVector3&&tt&&tt.isVector3?nt.copy(tt):this[_e]=tt}}toJSON(_){const _e=_===void 0||typeof _=="string";_e&&(_={textures:{},images:{}});const tt={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};tt.uuid=this.uuid,tt.type=this.type,this.name!==""&&(tt.name=this.name),this.color&&this.color.isColor&&(tt.color=this.color.getHex()),this.roughness!==void 0&&(tt.roughness=this.roughness),this.metalness!==void 0&&(tt.metalness=this.metalness),this.sheen!==void 0&&(tt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(tt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(tt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(tt.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(tt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(tt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(tt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(tt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(tt.shininess=this.shininess),this.clearcoat!==void 0&&(tt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(tt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(tt.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(tt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(tt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,tt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(tt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(tt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(tt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(tt.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(tt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(tt.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(tt.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(tt.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(tt.lightMap=this.lightMap.toJSON(_).uuid,tt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(tt.aoMap=this.aoMap.toJSON(_).uuid,tt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(tt.bumpMap=this.bumpMap.toJSON(_).uuid,tt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(tt.normalMap=this.normalMap.toJSON(_).uuid,tt.normalMapType=this.normalMapType,tt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(tt.displacementMap=this.displacementMap.toJSON(_).uuid,tt.displacementScale=this.displacementScale,tt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(tt.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(tt.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(tt.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(tt.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(tt.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(tt.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(tt.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(tt.combine=this.combine)),this.envMapIntensity!==void 0&&(tt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(tt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(tt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(tt.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(tt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(tt.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(tt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(tt.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(tt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(tt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(tt.size=this.size),this.shadowSide!==null&&(tt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(tt.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(tt.blending=this.blending),this.side!==FrontSide&&(tt.side=this.side),this.vertexColors&&(tt.vertexColors=!0),this.opacity<1&&(tt.opacity=this.opacity),this.transparent===!0&&(tt.transparent=this.transparent),tt.depthFunc=this.depthFunc,tt.depthTest=this.depthTest,tt.depthWrite=this.depthWrite,tt.colorWrite=this.colorWrite,tt.stencilWrite=this.stencilWrite,tt.stencilWriteMask=this.stencilWriteMask,tt.stencilFunc=this.stencilFunc,tt.stencilRef=this.stencilRef,tt.stencilFuncMask=this.stencilFuncMask,tt.stencilFail=this.stencilFail,tt.stencilZFail=this.stencilZFail,tt.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(tt.rotation=this.rotation),this.polygonOffset===!0&&(tt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(tt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(tt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(tt.linewidth=this.linewidth),this.dashSize!==void 0&&(tt.dashSize=this.dashSize),this.gapSize!==void 0&&(tt.gapSize=this.gapSize),this.scale!==void 0&&(tt.scale=this.scale),this.dithering===!0&&(tt.dithering=!0),this.alphaTest>0&&(tt.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(tt.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(tt.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(tt.wireframe=this.wireframe),this.wireframeLinewidth>1&&(tt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(tt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(tt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(tt.flatShading=this.flatShading),this.visible===!1&&(tt.visible=!1),this.toneMapped===!1&&(tt.toneMapped=!1),this.fog===!1&&(tt.fog=!1),Object.keys(this.userData).length>0&&(tt.userData=this.userData);function nt(it){const rt=[];for(const st in it){const ot=it[st];delete ot.metadata,rt.push(ot)}return rt}if(_e){const it=nt(_.textures),rt=nt(_.images);it.length>0&&(tt.textures=it),rt.length>0&&(tt.images=rt)}return tt}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const _e=_.clippingPlanes;let tt=null;if(_e!==null){const nt=_e.length;tt=new Array(nt);for(let it=0;it!==nt;++it)tt[it]=_e[it].clone()}return this.clippingPlanes=tt,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(_,_e,tt=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=_,this.itemSize=_e,this.count=_!==void 0?_.length/_e:0,this.normalized=tt,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this}copyAt(_,_e,tt){_*=this.itemSize,tt*=_e.itemSize;for(let nt=0,it=this.itemSize;nt<it;nt++)this.array[_+nt]=_e.array[tt+nt];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let _e=0,tt=this.count;_e<tt;_e++)_vector2$1.fromBufferAttribute(this,_e),_vector2$1.applyMatrix3(_),this.setXY(_e,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let _e=0,tt=this.count;_e<tt;_e++)_vector$9.fromBufferAttribute(this,_e),_vector$9.applyMatrix3(_),this.setXYZ(_e,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(_){for(let _e=0,tt=this.count;_e<tt;_e++)_vector$9.fromBufferAttribute(this,_e),_vector$9.applyMatrix4(_),this.setXYZ(_e,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(_){for(let _e=0,tt=this.count;_e<tt;_e++)_vector$9.fromBufferAttribute(this,_e),_vector$9.applyNormalMatrix(_),this.setXYZ(_e,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(_){for(let _e=0,tt=this.count;_e<tt;_e++)_vector$9.fromBufferAttribute(this,_e),_vector$9.transformDirection(_),this.setXYZ(_e,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(_,_e=0){return this.array.set(_,_e),this}getX(_){let _e=this.array[_*this.itemSize];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setX(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.array[_*this.itemSize]=_e,this}getY(_){let _e=this.array[_*this.itemSize+1];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setY(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.array[_*this.itemSize+1]=_e,this}getZ(_){let _e=this.array[_*this.itemSize+2];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setZ(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.array[_*this.itemSize+2]=_e,this}getW(_){let _e=this.array[_*this.itemSize+3];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setW(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.array[_*this.itemSize+3]=_e,this}setXY(_,_e,tt){return _*=this.itemSize,this.normalized&&(_e=normalize$1(_e,this.array),tt=normalize$1(tt,this.array)),this.array[_+0]=_e,this.array[_+1]=tt,this}setXYZ(_,_e,tt,nt){return _*=this.itemSize,this.normalized&&(_e=normalize$1(_e,this.array),tt=normalize$1(tt,this.array),nt=normalize$1(nt,this.array)),this.array[_+0]=_e,this.array[_+1]=tt,this.array[_+2]=nt,this}setXYZW(_,_e,tt,nt,it){return _*=this.itemSize,this.normalized&&(_e=normalize$1(_e,this.array),tt=normalize$1(tt,this.array),nt=normalize$1(nt,this.array),it=normalize$1(it,this.array)),this.array[_+0]=_e,this.array[_+1]=tt,this.array[_+2]=nt,this.array[_+3]=it,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(_.updateRange=this.updateRange),_}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Int8BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Int8Array(_),_e,tt)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Uint8Array(_),_e,tt)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Uint8ClampedArray(_),_e,tt)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Int16Array(_),_e,tt)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Uint16Array(_),_e,tt)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Int32Array(_),_e,tt)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Uint32Array(_),_e,tt)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Uint16Array(_),_e,tt),this.isFloat16BufferAttribute=!0}}class Float32BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Float32Array(_),_e,tt)}}class Float64BufferAttribute extends BufferAttribute{constructor(_,_e,tt){super(new Float64Array(_),_e,tt)}}let _id$1=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}getAttribute(_){return this.attributes[_]}setAttribute(_,_e){return this.attributes[_]=_e,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,_e,tt=0){this.groups.push({start:_,count:_e,materialIndex:tt})}clearGroups(){this.groups=[]}setDrawRange(_,_e){this.drawRange.start=_,this.drawRange.count=_e}applyMatrix4(_){const _e=this.attributes.position;_e!==void 0&&(_e.applyMatrix4(_),_e.needsUpdate=!0);const tt=this.attributes.normal;if(tt!==void 0){const it=new Matrix3().getNormalMatrix(_);tt.applyNormalMatrix(it),tt.needsUpdate=!0}const nt=this.attributes.tangent;return nt!==void 0&&(nt.transformDirection(_),nt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1.makeRotationFromQuaternion(_),this.applyMatrix4(_m1),this}rotateX(_){return _m1.makeRotationX(_),this.applyMatrix4(_m1),this}rotateY(_){return _m1.makeRotationY(_),this.applyMatrix4(_m1),this}rotateZ(_){return _m1.makeRotationZ(_),this.applyMatrix4(_m1),this}translate(_,_e,tt){return _m1.makeTranslation(_,_e,tt),this.applyMatrix4(_m1),this}scale(_,_e,tt){return _m1.makeScale(_,_e,tt),this.applyMatrix4(_m1),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const _e=[];for(let tt=0,nt=_.length;tt<nt;tt++){const it=_[tt];_e.push(it.x,it.y,it.z||0)}return this.setAttribute("position",new Float32BufferAttribute(_e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,_e=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),_e)for(let tt=0,nt=_e.length;tt<nt;tt++){const it=_e[tt];_box$1.setFromBufferAttribute(it),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.attributes.position,_e=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const tt=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(_),_e)for(let it=0,rt=_e.length;it<rt;it++){const st=_e[it];_boxMorphTargets.setFromBufferAttribute(st),this.morphTargetsRelative?(_vector$8.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$8),_vector$8.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$8)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(tt);let nt=0;for(let it=0,rt=_.count;it<rt;it++)_vector$8.fromBufferAttribute(_,it),nt=Math.max(nt,tt.distanceToSquared(_vector$8));if(_e)for(let it=0,rt=_e.length;it<rt;it++){const st=_e[it],ot=this.morphTargetsRelative;for(let at=0,At=st.count;at<At;at++)_vector$8.fromBufferAttribute(st,at),ot&&(_offset.fromBufferAttribute(_,at),_vector$8.add(_offset)),nt=Math.max(nt,tt.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(nt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,_e=this.attributes;if(_===null||_e.position===void 0||_e.normal===void 0||_e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const tt=_.array,nt=_e.position.array,it=_e.normal.array,rt=_e.uv.array,st=nt.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*st),4));const ot=this.getAttribute("tangent").array,at=[],At=[];for(let Mt=0;Mt<st;Mt++)at[Mt]=new Vector3,At[Mt]=new Vector3;const lt=new Vector3,gt=new Vector3,ct=new Vector3,dt=new Vector2,ht=new Vector2,mt=new Vector2,Ct=new Vector3,ft=new Vector3;function pt(Mt,kt,Nt){lt.fromArray(nt,Mt*3),gt.fromArray(nt,kt*3),ct.fromArray(nt,Nt*3),dt.fromArray(rt,Mt*2),ht.fromArray(rt,kt*2),mt.fromArray(rt,Nt*2),gt.sub(lt),ct.sub(lt),ht.sub(dt),mt.sub(dt);const Yt=1/(ht.x*mt.y-mt.x*ht.y);isFinite(Yt)&&(Ct.copy(gt).multiplyScalar(mt.y).addScaledVector(ct,-ht.y).multiplyScalar(Yt),ft.copy(ct).multiplyScalar(ht.x).addScaledVector(gt,-mt.x).multiplyScalar(Yt),at[Mt].add(Ct),at[kt].add(Ct),at[Nt].add(Ct),At[Mt].add(ft),At[kt].add(ft),At[Nt].add(ft))}let Vt=this.groups;Vt.length===0&&(Vt=[{start:0,count:tt.length}]);for(let Mt=0,kt=Vt.length;Mt<kt;++Mt){const Nt=Vt[Mt],Yt=Nt.start,Lt=Nt.count;for(let Xt=Yt,_t=Yt+Lt;Xt<_t;Xt+=3)pt(tt[Xt+0],tt[Xt+1],tt[Xt+2])}const yt=new Vector3,Gt=new Vector3,Bt=new Vector3,vt=new Vector3;function wt(Mt){Bt.fromArray(it,Mt*3),vt.copy(Bt);const kt=at[Mt];yt.copy(kt),yt.sub(Bt.multiplyScalar(Bt.dot(kt))).normalize(),Gt.crossVectors(vt,kt);const Yt=Gt.dot(At[Mt])<0?-1:1;ot[Mt*4]=yt.x,ot[Mt*4+1]=yt.y,ot[Mt*4+2]=yt.z,ot[Mt*4+3]=Yt}for(let Mt=0,kt=Vt.length;Mt<kt;++Mt){const Nt=Vt[Mt],Yt=Nt.start,Lt=Nt.count;for(let Xt=Yt,_t=Yt+Lt;Xt<_t;Xt+=3)wt(tt[Xt+0]),wt(tt[Xt+1]),wt(tt[Xt+2])}}computeVertexNormals(){const _=this.index,_e=this.getAttribute("position");if(_e!==void 0){let tt=this.getAttribute("normal");if(tt===void 0)tt=new BufferAttribute(new Float32Array(_e.count*3),3),this.setAttribute("normal",tt);else for(let gt=0,ct=tt.count;gt<ct;gt++)tt.setXYZ(gt,0,0,0);const nt=new Vector3,it=new Vector3,rt=new Vector3,st=new Vector3,ot=new Vector3,at=new Vector3,At=new Vector3,lt=new Vector3;if(_)for(let gt=0,ct=_.count;gt<ct;gt+=3){const dt=_.getX(gt+0),ht=_.getX(gt+1),mt=_.getX(gt+2);nt.fromBufferAttribute(_e,dt),it.fromBufferAttribute(_e,ht),rt.fromBufferAttribute(_e,mt),At.subVectors(rt,it),lt.subVectors(nt,it),At.cross(lt),st.fromBufferAttribute(tt,dt),ot.fromBufferAttribute(tt,ht),at.fromBufferAttribute(tt,mt),st.add(At),ot.add(At),at.add(At),tt.setXYZ(dt,st.x,st.y,st.z),tt.setXYZ(ht,ot.x,ot.y,ot.z),tt.setXYZ(mt,at.x,at.y,at.z)}else for(let gt=0,ct=_e.count;gt<ct;gt+=3)nt.fromBufferAttribute(_e,gt+0),it.fromBufferAttribute(_e,gt+1),rt.fromBufferAttribute(_e,gt+2),At.subVectors(rt,it),lt.subVectors(nt,it),At.cross(lt),tt.setXYZ(gt+0,At.x,At.y,At.z),tt.setXYZ(gt+1,At.x,At.y,At.z),tt.setXYZ(gt+2,At.x,At.y,At.z);this.normalizeNormals(),tt.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const _=this.attributes.normal;for(let _e=0,tt=_.count;_e<tt;_e++)_vector$8.fromBufferAttribute(_,_e),_vector$8.normalize(),_.setXYZ(_e,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function _(st,ot){const at=st.array,At=st.itemSize,lt=st.normalized,gt=new at.constructor(ot.length*At);let ct=0,dt=0;for(let ht=0,mt=ot.length;ht<mt;ht++){st.isInterleavedBufferAttribute?ct=ot[ht]*st.data.stride+st.offset:ct=ot[ht]*At;for(let Ct=0;Ct<At;Ct++)gt[dt++]=at[ct++]}return new BufferAttribute(gt,At,lt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const _e=new BufferGeometry,tt=this.index.array,nt=this.attributes;for(const st in nt){const ot=nt[st],at=_(ot,tt);_e.setAttribute(st,at)}const it=this.morphAttributes;for(const st in it){const ot=[],at=it[st];for(let At=0,lt=at.length;At<lt;At++){const gt=at[At],ct=_(gt,tt);ot.push(ct)}_e.morphAttributes[st]=ot}_e.morphTargetsRelative=this.morphTargetsRelative;const rt=this.groups;for(let st=0,ot=rt.length;st<ot;st++){const at=rt[st];_e.addGroup(at.start,at.count,at.materialIndex)}return _e}toJSON(){const _={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const ot=this.parameters;for(const at in ot)ot[at]!==void 0&&(_[at]=ot[at]);return _}_.data={attributes:{}};const _e=this.index;_e!==null&&(_.data.index={type:_e.array.constructor.name,array:Array.prototype.slice.call(_e.array)});const tt=this.attributes;for(const ot in tt){const at=tt[ot];_.data.attributes[ot]=at.toJSON(_.data)}const nt={};let it=!1;for(const ot in this.morphAttributes){const at=this.morphAttributes[ot],At=[];for(let lt=0,gt=at.length;lt<gt;lt++){const ct=at[lt];At.push(ct.toJSON(_.data))}At.length>0&&(nt[ot]=At,it=!0)}it&&(_.data.morphAttributes=nt,_.data.morphTargetsRelative=this.morphTargetsRelative);const rt=this.groups;rt.length>0&&(_.data.groups=JSON.parse(JSON.stringify(rt)));const st=this.boundingSphere;return st!==null&&(_.data.boundingSphere={center:st.center.toArray(),radius:st.radius}),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const _e={};this.name=_.name;const tt=_.index;tt!==null&&this.setIndex(tt.clone(_e));const nt=_.attributes;for(const at in nt){const At=nt[at];this.setAttribute(at,At.clone(_e))}const it=_.morphAttributes;for(const at in it){const At=[],lt=it[at];for(let gt=0,ct=lt.length;gt<ct;gt++)At.push(lt[gt].clone(_e));this.morphAttributes[at]=At}this.morphTargetsRelative=_.morphTargetsRelative;const rt=_.groups;for(let at=0,At=rt.length;at<At;at++){const lt=rt[at];this.addGroup(lt.start,lt.count,lt.materialIndex)}const st=_.boundingBox;st!==null&&(this.boundingBox=st.clone());const ot=_.boundingSphere;return ot!==null&&(this.boundingSphere=ot.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,_.parameters!==void 0&&(this.parameters=Object.assign({},_.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$2=new Matrix4,_ray$2=new Ray$2,_sphere$3=new Sphere,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,_e=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=_e,this.updateMorphTargets()}copy(_,_e){return super.copy(_,_e),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=_.material,this.geometry=_.geometry,this}updateMorphTargets(){const _e=this.geometry.morphAttributes,tt=Object.keys(_e);if(tt.length>0){const nt=_e[tt[0]];if(nt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,rt=nt.length;it<rt;it++){const st=nt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=it}}}}getVertexPosition(_,_e){const tt=this.geometry,nt=tt.attributes.position,it=tt.morphAttributes.position,rt=tt.morphTargetsRelative;_e.fromBufferAttribute(nt,_);const st=this.morphTargetInfluences;if(it&&st){_morphA.set(0,0,0);for(let ot=0,at=it.length;ot<at;ot++){const At=st[ot],lt=it[ot];At!==0&&(_tempA.fromBufferAttribute(lt,_),rt?_morphA.addScaledVector(_tempA,At):_morphA.addScaledVector(_tempA.sub(_e),At))}_e.add(_morphA)}return this.isSkinnedMesh&&this.boneTransform(_,_e),_e}raycast(_,_e){const tt=this.geometry,nt=this.material,it=this.matrixWorld;if(nt===void 0||(tt.boundingSphere===null&&tt.computeBoundingSphere(),_sphere$3.copy(tt.boundingSphere),_sphere$3.applyMatrix4(it),_.ray.intersectsSphere(_sphere$3)===!1)||(_inverseMatrix$2.copy(it).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),tt.boundingBox!==null&&_ray$2.intersectsBox(tt.boundingBox)===!1))return;let rt;const st=tt.index,ot=tt.attributes.position,at=tt.attributes.uv,At=tt.attributes.uv2,lt=tt.groups,gt=tt.drawRange;if(st!==null)if(Array.isArray(nt))for(let ct=0,dt=lt.length;ct<dt;ct++){const ht=lt[ct],mt=nt[ht.materialIndex],Ct=Math.max(ht.start,gt.start),ft=Math.min(st.count,Math.min(ht.start+ht.count,gt.start+gt.count));for(let pt=Ct,Vt=ft;pt<Vt;pt+=3){const yt=st.getX(pt),Gt=st.getX(pt+1),Bt=st.getX(pt+2);rt=checkBufferGeometryIntersection(this,mt,_,_ray$2,at,At,yt,Gt,Bt),rt&&(rt.faceIndex=Math.floor(pt/3),rt.face.materialIndex=ht.materialIndex,_e.push(rt))}}else{const ct=Math.max(0,gt.start),dt=Math.min(st.count,gt.start+gt.count);for(let ht=ct,mt=dt;ht<mt;ht+=3){const Ct=st.getX(ht),ft=st.getX(ht+1),pt=st.getX(ht+2);rt=checkBufferGeometryIntersection(this,nt,_,_ray$2,at,At,Ct,ft,pt),rt&&(rt.faceIndex=Math.floor(ht/3),_e.push(rt))}}else if(ot!==void 0)if(Array.isArray(nt))for(let ct=0,dt=lt.length;ct<dt;ct++){const ht=lt[ct],mt=nt[ht.materialIndex],Ct=Math.max(ht.start,gt.start),ft=Math.min(ot.count,Math.min(ht.start+ht.count,gt.start+gt.count));for(let pt=Ct,Vt=ft;pt<Vt;pt+=3){const yt=pt,Gt=pt+1,Bt=pt+2;rt=checkBufferGeometryIntersection(this,mt,_,_ray$2,at,At,yt,Gt,Bt),rt&&(rt.faceIndex=Math.floor(pt/3),rt.face.materialIndex=ht.materialIndex,_e.push(rt))}}else{const ct=Math.max(0,gt.start),dt=Math.min(ot.count,gt.start+gt.count);for(let ht=ct,mt=dt;ht<mt;ht+=3){const Ct=ht,ft=ht+1,pt=ht+2;rt=checkBufferGeometryIntersection(this,nt,_,_ray$2,at,At,Ct,ft,pt),rt&&(rt.faceIndex=Math.floor(ht/3),_e.push(rt))}}}}function checkIntersection(et,_,_e,tt,nt,it,rt,st){let ot;if(_.side===BackSide?ot=tt.intersectTriangle(rt,it,nt,!0,st):ot=tt.intersectTriangle(nt,it,rt,_.side===FrontSide,st),ot===null)return null;_intersectionPointWorld.copy(st),_intersectionPointWorld.applyMatrix4(et.matrixWorld);const at=_e.ray.origin.distanceTo(_intersectionPointWorld);return at<_e.near||at>_e.far?null:{distance:at,point:_intersectionPointWorld.clone(),object:et}}function checkBufferGeometryIntersection(et,_,_e,tt,nt,it,rt,st,ot){et.getVertexPosition(rt,_vA$1),et.getVertexPosition(st,_vB$1),et.getVertexPosition(ot,_vC$1);const at=checkIntersection(et,_,_e,tt,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(at){nt&&(_uvA$1.fromBufferAttribute(nt,rt),_uvB$1.fromBufferAttribute(nt,st),_uvC$1.fromBufferAttribute(nt,ot),at.uv=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),it&&(_uvA$1.fromBufferAttribute(it,rt),_uvB$1.fromBufferAttribute(it,st),_uvC$1.fromBufferAttribute(it,ot),at.uv2=Triangle.getUV(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2));const At={a:rt,b:st,c:ot,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,At.normal),at.face=At}return at}class BoxGeometry extends BufferGeometry{constructor(_=1,_e=1,tt=1,nt=1,it=1,rt=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:_e,depth:tt,widthSegments:nt,heightSegments:it,depthSegments:rt};const st=this;nt=Math.floor(nt),it=Math.floor(it),rt=Math.floor(rt);const ot=[],at=[],At=[],lt=[];let gt=0,ct=0;dt("z","y","x",-1,-1,tt,_e,_,rt,it,0),dt("z","y","x",1,-1,tt,_e,-_,rt,it,1),dt("x","z","y",1,1,_,tt,_e,nt,rt,2),dt("x","z","y",1,-1,_,tt,-_e,nt,rt,3),dt("x","y","z",1,-1,_,_e,tt,nt,it,4),dt("x","y","z",-1,-1,_,_e,-tt,nt,it,5),this.setIndex(ot),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(At,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2));function dt(ht,mt,Ct,ft,pt,Vt,yt,Gt,Bt,vt,wt){const Mt=Vt/Bt,kt=yt/vt,Nt=Vt/2,Yt=yt/2,Lt=Gt/2,Xt=Bt+1,_t=vt+1;let Tt=0,St=0;const Zt=new Vector3;for(let Et=0;Et<_t;Et++){const Wt=Et*kt-Yt;for(let Ht=0;Ht<Xt;Ht++){const zt=Ht*Mt-Nt;Zt[ht]=zt*ft,Zt[mt]=Wt*pt,Zt[Ct]=Lt,at.push(Zt.x,Zt.y,Zt.z),Zt[ht]=0,Zt[mt]=0,Zt[Ct]=Gt>0?1:-1,At.push(Zt.x,Zt.y,Zt.z),lt.push(Ht/Bt),lt.push(1-Et/vt),Tt+=1}}for(let Et=0;Et<vt;Et++)for(let Wt=0;Wt<Bt;Wt++){const Ht=gt+Wt+Xt*Et,zt=gt+Wt+Xt*(Et+1),Pt=gt+(Wt+1)+Xt*(Et+1),Ot=gt+(Wt+1)+Xt*Et;ot.push(Ht,zt,Ot),ot.push(zt,Pt,Ot),St+=6}st.addGroup(ct,St,wt),ct+=St,gt+=Tt}}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(et){const _={};for(const _e in et){_[_e]={};for(const tt in et[_e]){const nt=et[_e][tt];nt&&(nt.isColor||nt.isMatrix3||nt.isMatrix4||nt.isVector2||nt.isVector3||nt.isVector4||nt.isTexture||nt.isQuaternion)?_[_e][tt]=nt.clone():Array.isArray(nt)?_[_e][tt]=nt.slice():_[_e][tt]=nt}}return _}function mergeUniforms(et){const _={};for(let _e=0;_e<et.length;_e++){const tt=cloneUniforms(et[_e]);for(const nt in tt)_[nt]=tt[nt]}return _}function cloneUniformsGroups(et){const _=[];for(let _e=0;_e<et.length;_e++)_.push(et[_e].clone());return _}function getUnlitUniformColorSpace(et){return et.getRenderTarget()===null&&et.outputEncoding===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const _e=super.toJSON(_);_e.glslVersion=this.glslVersion,_e.uniforms={};for(const nt in this.uniforms){const rt=this.uniforms[nt].value;rt&&rt.isTexture?_e.uniforms[nt]={type:"t",value:rt.toJSON(_).uuid}:rt&&rt.isColor?_e.uniforms[nt]={type:"c",value:rt.getHex()}:rt&&rt.isVector2?_e.uniforms[nt]={type:"v2",value:rt.toArray()}:rt&&rt.isVector3?_e.uniforms[nt]={type:"v3",value:rt.toArray()}:rt&&rt.isVector4?_e.uniforms[nt]={type:"v4",value:rt.toArray()}:rt&&rt.isMatrix3?_e.uniforms[nt]={type:"m3",value:rt.toArray()}:rt&&rt.isMatrix4?_e.uniforms[nt]={type:"m4",value:rt.toArray()}:_e.uniforms[nt]={value:rt}}Object.keys(this.defines).length>0&&(_e.defines=this.defines),_e.vertexShader=this.vertexShader,_e.fragmentShader=this.fragmentShader;const tt={};for(const nt in this.extensions)this.extensions[nt]===!0&&(tt[nt]=!0);return Object.keys(tt).length>0&&(_e.extensions=tt),_e}}let Camera$1=class extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(_,_e){return super.copy(_,_e),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const _e=this.matrixWorld.elements;return _.set(-_e[8],-_e[9],-_e[10]).normalize()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,_e){super.updateWorldMatrix(_,_e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},PerspectiveCamera$1=class extends Camera$1{constructor(_=50,_e=1,tt=.1,nt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=tt,this.far=nt,this.focus=10,this.aspect=_e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,_e){return super.copy(_,_e),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const _e=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(_e),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(_,_e,tt,nt,it,rt){this.aspect=_/_e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=_e,this.view.offsetX=tt,this.view.offsetY=nt,this.view.width=it,this.view.height=rt,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let _e=_*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,tt=2*_e,nt=this.aspect*tt,it=-.5*nt;const rt=this.view;if(this.view!==null&&this.view.enabled){const ot=rt.fullWidth,at=rt.fullHeight;it+=rt.offsetX*nt/ot,_e-=rt.offsetY*tt/at,nt*=rt.width/ot,tt*=rt.height/at}const st=this.filmOffset;st!==0&&(it+=_*st/this.getFilmWidth()),this.projectionMatrix.makePerspective(it,it+nt,_e,_e-tt,_,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const _e=super.toJSON(_);return _e.object.fov=this.fov,_e.object.zoom=this.zoom,_e.object.near=this.near,_e.object.far=this.far,_e.object.focus=this.focus,_e.object.aspect=this.aspect,this.view!==null&&(_e.object.view=Object.assign({},this.view)),_e.object.filmGauge=this.filmGauge,_e.object.filmOffset=this.filmOffset,_e}};const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,_e,tt){super(),this.type="CubeCamera",this.renderTarget=tt;const nt=new PerspectiveCamera$1(fov,aspect,_,_e);nt.layers=this.layers,nt.up.set(0,1,0),nt.lookAt(1,0,0),this.add(nt);const it=new PerspectiveCamera$1(fov,aspect,_,_e);it.layers=this.layers,it.up.set(0,1,0),it.lookAt(-1,0,0),this.add(it);const rt=new PerspectiveCamera$1(fov,aspect,_,_e);rt.layers=this.layers,rt.up.set(0,0,-1),rt.lookAt(0,1,0),this.add(rt);const st=new PerspectiveCamera$1(fov,aspect,_,_e);st.layers=this.layers,st.up.set(0,0,1),st.lookAt(0,-1,0),this.add(st);const ot=new PerspectiveCamera$1(fov,aspect,_,_e);ot.layers=this.layers,ot.up.set(0,1,0),ot.lookAt(0,0,1),this.add(ot);const at=new PerspectiveCamera$1(fov,aspect,_,_e);at.layers=this.layers,at.up.set(0,1,0),at.lookAt(0,0,-1),this.add(at)}update(_,_e){this.parent===null&&this.updateMatrixWorld();const tt=this.renderTarget,[nt,it,rt,st,ot,at]=this.children,At=_.getRenderTarget(),lt=_.toneMapping,gt=_.xr.enabled;_.toneMapping=NoToneMapping,_.xr.enabled=!1;const ct=tt.texture.generateMipmaps;tt.texture.generateMipmaps=!1,_.setRenderTarget(tt,0),_.render(_e,nt),_.setRenderTarget(tt,1),_.render(_e,it),_.setRenderTarget(tt,2),_.render(_e,rt),_.setRenderTarget(tt,3),_.render(_e,st),_.setRenderTarget(tt,4),_.render(_e,ot),tt.texture.generateMipmaps=ct,_.setRenderTarget(tt,5),_.render(_e,at),_.setRenderTarget(At),_.toneMapping=lt,_.xr.enabled=gt,tt.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_,_e,tt,nt,it,rt,st,ot,at,At){_=_!==void 0?_:[],_e=_e!==void 0?_e:CubeReflectionMapping,super(_,_e,tt,nt,it,rt,st,ot,at,At),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,_e={}){super(_,_,_e),this.isWebGLCubeRenderTarget=!0;const tt={width:_,height:_,depth:1},nt=[tt,tt,tt,tt,tt,tt];this.texture=new CubeTexture(nt,_e.mapping,_e.wrapS,_e.wrapT,_e.magFilter,_e.minFilter,_e.format,_e.type,_e.anisotropy,_e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=_e.generateMipmaps!==void 0?_e.generateMipmaps:!1,this.texture.minFilter=_e.minFilter!==void 0?_e.minFilter:LinearFilter}fromEquirectangularTexture(_,_e){this.texture.type=_e.type,this.texture.encoding=_e.encoding,this.texture.generateMipmaps=_e.generateMipmaps,this.texture.minFilter=_e.minFilter,this.texture.magFilter=_e.magFilter;const tt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},nt=new BoxGeometry(5,5,5),it=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(tt.uniforms),vertexShader:tt.vertexShader,fragmentShader:tt.fragmentShader,side:BackSide,blending:NoBlending});it.uniforms.tEquirect.value=_e;const rt=new Mesh(nt,it),st=_e.minFilter;return _e.minFilter===LinearMipmapLinearFilter&&(_e.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,rt),_e.minFilter=st,rt.geometry.dispose(),rt.material.dispose(),this}clear(_,_e,tt,nt){const it=_.getRenderTarget();for(let rt=0;rt<6;rt++)_.setRenderTarget(this,rt),_.clear(_e,tt,nt);_.setRenderTarget(it)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor(_=new Vector3(1,0,0),_e=0){this.isPlane=!0,this.normal=_,this.constant=_e}set(_,_e){return this.normal.copy(_),this.constant=_e,this}setComponents(_,_e,tt,nt){return this.normal.set(_,_e,tt),this.constant=nt,this}setFromNormalAndCoplanarPoint(_,_e){return this.normal.copy(_),this.constant=-_e.dot(this.normal),this}setFromCoplanarPoints(_,_e,tt){const nt=_vector1.subVectors(tt,_e).cross(_vector2.subVectors(_,_e)).normalize();return this.setFromNormalAndCoplanarPoint(nt,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,_e){return _e.copy(this.normal).multiplyScalar(-this.distanceToPoint(_)).add(_)}intersectLine(_,_e){const tt=_.delta(_vector1),nt=this.normal.dot(tt);if(nt===0)return this.distanceToPoint(_.start)===0?_e.copy(_.start):null;const it=-(_.start.dot(this.normal)+this.constant)/nt;return it<0||it>1?null:_e.copy(tt).multiplyScalar(it).add(_.start)}intersectsLine(_){const _e=this.distanceToPoint(_.start),tt=this.distanceToPoint(_.end);return _e<0&&tt>0||tt<0&&_e>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,_e){const tt=_e||_normalMatrix.getNormalMatrix(_),nt=this.coplanarPoint(_vector1).applyMatrix4(_),it=this.normal.applyMatrix3(tt).normalize();return this.constant=-nt.dot(it),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$2=new Sphere,_vector$7=new Vector3;class Frustum{constructor(_=new Plane$1,_e=new Plane$1,tt=new Plane$1,nt=new Plane$1,it=new Plane$1,rt=new Plane$1){this.planes=[_,_e,tt,nt,it,rt]}set(_,_e,tt,nt,it,rt){const st=this.planes;return st[0].copy(_),st[1].copy(_e),st[2].copy(tt),st[3].copy(nt),st[4].copy(it),st[5].copy(rt),this}copy(_){const _e=this.planes;for(let tt=0;tt<6;tt++)_e[tt].copy(_.planes[tt]);return this}setFromProjectionMatrix(_){const _e=this.planes,tt=_.elements,nt=tt[0],it=tt[1],rt=tt[2],st=tt[3],ot=tt[4],at=tt[5],At=tt[6],lt=tt[7],gt=tt[8],ct=tt[9],dt=tt[10],ht=tt[11],mt=tt[12],Ct=tt[13],ft=tt[14],pt=tt[15];return _e[0].setComponents(st-nt,lt-ot,ht-gt,pt-mt).normalize(),_e[1].setComponents(st+nt,lt+ot,ht+gt,pt+mt).normalize(),_e[2].setComponents(st+it,lt+at,ht+ct,pt+Ct).normalize(),_e[3].setComponents(st-it,lt-at,ht-ct,pt-Ct).normalize(),_e[4].setComponents(st-rt,lt-At,ht-dt,pt-ft).normalize(),_e[5].setComponents(st+rt,lt+At,ht+dt,pt+ft).normalize(),this}intersectsObject(_){const _e=_.geometry;return _e.boundingSphere===null&&_e.computeBoundingSphere(),_sphere$2.copy(_e.boundingSphere).applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSprite(_){return _sphere$2.center.set(0,0,0),_sphere$2.radius=.7071067811865476,_sphere$2.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$2)}intersectsSphere(_){const _e=this.planes,tt=_.center,nt=-_.radius;for(let it=0;it<6;it++)if(_e[it].distanceToPoint(tt)<nt)return!1;return!0}intersectsBox(_){const _e=this.planes;for(let tt=0;tt<6;tt++){const nt=_e[tt];if(_vector$7.x=nt.normal.x>0?_.max.x:_.min.x,_vector$7.y=nt.normal.y>0?_.max.y:_.min.y,_vector$7.z=nt.normal.z>0?_.max.z:_.min.z,nt.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(_){const _e=this.planes;for(let tt=0;tt<6;tt++)if(_e[tt].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let et=null,_=!1,_e=null,tt=null;function nt(it,rt){_e(it,rt),tt=et.requestAnimationFrame(nt)}return{start:function(){_!==!0&&_e!==null&&(tt=et.requestAnimationFrame(nt),_=!0)},stop:function(){et.cancelAnimationFrame(tt),_=!1},setAnimationLoop:function(it){_e=it},setContext:function(it){et=it}}}function WebGLAttributes(et,_){const _e=_.isWebGL2,tt=new WeakMap;function nt(at,At){const lt=at.array,gt=at.usage,ct=et.createBuffer();et.bindBuffer(At,ct),et.bufferData(At,lt,gt),at.onUploadCallback();let dt;if(lt instanceof Float32Array)dt=5126;else if(lt instanceof Uint16Array)if(at.isFloat16BufferAttribute)if(_e)dt=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else dt=5123;else if(lt instanceof Int16Array)dt=5122;else if(lt instanceof Uint32Array)dt=5125;else if(lt instanceof Int32Array)dt=5124;else if(lt instanceof Int8Array)dt=5120;else if(lt instanceof Uint8Array)dt=5121;else if(lt instanceof Uint8ClampedArray)dt=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+lt);return{buffer:ct,type:dt,bytesPerElement:lt.BYTES_PER_ELEMENT,version:at.version}}function it(at,At,lt){const gt=At.array,ct=At.updateRange;et.bindBuffer(lt,at),ct.count===-1?et.bufferSubData(lt,0,gt):(_e?et.bufferSubData(lt,ct.offset*gt.BYTES_PER_ELEMENT,gt,ct.offset,ct.count):et.bufferSubData(lt,ct.offset*gt.BYTES_PER_ELEMENT,gt.subarray(ct.offset,ct.offset+ct.count)),ct.count=-1),At.onUploadCallback()}function rt(at){return at.isInterleavedBufferAttribute&&(at=at.data),tt.get(at)}function st(at){at.isInterleavedBufferAttribute&&(at=at.data);const At=tt.get(at);At&&(et.deleteBuffer(At.buffer),tt.delete(at))}function ot(at,At){if(at.isGLBufferAttribute){const gt=tt.get(at);(!gt||gt.version<at.version)&&tt.set(at,{buffer:at.buffer,type:at.type,bytesPerElement:at.elementSize,version:at.version});return}at.isInterleavedBufferAttribute&&(at=at.data);const lt=tt.get(at);lt===void 0?tt.set(at,nt(at,At)):lt.version<at.version&&(it(lt.buffer,at,At),lt.version=at.version)}return{get:rt,remove:st,update:ot}}class PlaneGeometry extends BufferGeometry{constructor(_=1,_e=1,tt=1,nt=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:_e,widthSegments:tt,heightSegments:nt};const it=_/2,rt=_e/2,st=Math.floor(tt),ot=Math.floor(nt),at=st+1,At=ot+1,lt=_/st,gt=_e/ot,ct=[],dt=[],ht=[],mt=[];for(let Ct=0;Ct<At;Ct++){const ft=Ct*gt-rt;for(let pt=0;pt<at;pt++){const Vt=pt*lt-it;dt.push(Vt,-ft,0),ht.push(0,0,1),mt.push(pt/st),mt.push(1-Ct/ot)}}for(let Ct=0;Ct<ot;Ct++)for(let ft=0;ft<st;ft++){const pt=ft+at*Ct,Vt=ft+at*(Ct+1),yt=ft+1+at*(Ct+1),Gt=ft+1+at*Ct;ct.push(pt,Vt,Gt),ct.push(Vt,yt,Gt)}this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(dt,3)),this.setAttribute("normal",new Float32BufferAttribute(ht,3)),this.setAttribute("uv",new Float32BufferAttribute(mt,2))}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}var alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex="vec3 transformed = vec3( position );",beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,output_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,uv_pars_fragment=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uv_pars_vertex=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uv_vertex=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,uv2_vertex=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,encodings_fragment,encodings_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,output_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,uv2_pars_fragment,uv2_pars_vertex,uv2_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Matrix3}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(et,_,_e,tt,nt,it,rt){const st=new Color(0);let ot=it===!0?0:1,at,At,lt=null,gt=0,ct=null;function dt(mt,Ct){let ft=!1,pt=Ct.isScene===!0?Ct.background:null;pt&&pt.isTexture&&(pt=(Ct.backgroundBlurriness>0?_e:_).get(pt));const Vt=et.xr,yt=Vt.getSession&&Vt.getSession();yt&&yt.environmentBlendMode==="additive"&&(pt=null),pt===null?ht(st,ot):pt&&pt.isColor&&(ht(pt,1),ft=!0),(et.autoClear||ft)&&et.clear(et.autoClearColor,et.autoClearDepth,et.autoClearStencil),pt&&(pt.isCubeTexture||pt.mapping===CubeUVReflectionMapping)?(At===void 0&&(At=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),At.geometry.deleteAttribute("normal"),At.geometry.deleteAttribute("uv"),At.onBeforeRender=function(Gt,Bt,vt){this.matrixWorld.copyPosition(vt.matrixWorld)},Object.defineProperty(At.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),nt.update(At)),At.material.uniforms.envMap.value=pt,At.material.uniforms.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1,At.material.uniforms.backgroundBlurriness.value=Ct.backgroundBlurriness,At.material.uniforms.backgroundIntensity.value=Ct.backgroundIntensity,At.material.toneMapped=pt.encoding!==sRGBEncoding,(lt!==pt||gt!==pt.version||ct!==et.toneMapping)&&(At.material.needsUpdate=!0,lt=pt,gt=pt.version,ct=et.toneMapping),At.layers.enableAll(),mt.unshift(At,At.geometry,At.material,0,0,null)):pt&&pt.isTexture&&(at===void 0&&(at=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),at.geometry.deleteAttribute("normal"),Object.defineProperty(at.material,"map",{get:function(){return this.uniforms.t2D.value}}),nt.update(at)),at.material.uniforms.t2D.value=pt,at.material.uniforms.backgroundIntensity.value=Ct.backgroundIntensity,at.material.toneMapped=pt.encoding!==sRGBEncoding,pt.matrixAutoUpdate===!0&&pt.updateMatrix(),at.material.uniforms.uvTransform.value.copy(pt.matrix),(lt!==pt||gt!==pt.version||ct!==et.toneMapping)&&(at.material.needsUpdate=!0,lt=pt,gt=pt.version,ct=et.toneMapping),at.layers.enableAll(),mt.unshift(at,at.geometry,at.material,0,0,null))}function ht(mt,Ct){mt.getRGB(_rgb,getUnlitUniformColorSpace(et)),tt.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,Ct,rt)}return{getClearColor:function(){return st},setClearColor:function(mt,Ct=1){st.set(mt),ot=Ct,ht(st,ot)},getClearAlpha:function(){return ot},setClearAlpha:function(mt){ot=mt,ht(st,ot)},render:dt}}function WebGLBindingStates(et,_,_e,tt){const nt=et.getParameter(34921),it=tt.isWebGL2?null:_.get("OES_vertex_array_object"),rt=tt.isWebGL2||it!==null,st={},ot=mt(null);let at=ot,At=!1;function lt(Lt,Xt,_t,Tt,St){let Zt=!1;if(rt){const Et=ht(Tt,_t,Xt);at!==Et&&(at=Et,ct(at.object)),Zt=Ct(Lt,Tt,_t,St),Zt&&ft(Lt,Tt,_t,St)}else{const Et=Xt.wireframe===!0;(at.geometry!==Tt.id||at.program!==_t.id||at.wireframe!==Et)&&(at.geometry=Tt.id,at.program=_t.id,at.wireframe=Et,Zt=!0)}St!==null&&_e.update(St,34963),(Zt||At)&&(At=!1,vt(Lt,Xt,_t,Tt),St!==null&&et.bindBuffer(34963,_e.get(St).buffer))}function gt(){return tt.isWebGL2?et.createVertexArray():it.createVertexArrayOES()}function ct(Lt){return tt.isWebGL2?et.bindVertexArray(Lt):it.bindVertexArrayOES(Lt)}function dt(Lt){return tt.isWebGL2?et.deleteVertexArray(Lt):it.deleteVertexArrayOES(Lt)}function ht(Lt,Xt,_t){const Tt=_t.wireframe===!0;let St=st[Lt.id];St===void 0&&(St={},st[Lt.id]=St);let Zt=St[Xt.id];Zt===void 0&&(Zt={},St[Xt.id]=Zt);let Et=Zt[Tt];return Et===void 0&&(Et=mt(gt()),Zt[Tt]=Et),Et}function mt(Lt){const Xt=[],_t=[],Tt=[];for(let St=0;St<nt;St++)Xt[St]=0,_t[St]=0,Tt[St]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Xt,enabledAttributes:_t,attributeDivisors:Tt,object:Lt,attributes:{},index:null}}function Ct(Lt,Xt,_t,Tt){const St=at.attributes,Zt=Xt.attributes;let Et=0;const Wt=_t.getAttributes();for(const Ht in Wt)if(Wt[Ht].location>=0){const Pt=St[Ht];let Ot=Zt[Ht];if(Ot===void 0&&(Ht==="instanceMatrix"&&Lt.instanceMatrix&&(Ot=Lt.instanceMatrix),Ht==="instanceColor"&&Lt.instanceColor&&(Ot=Lt.instanceColor)),Pt===void 0||Pt.attribute!==Ot||Ot&&Pt.data!==Ot.data)return!0;Et++}return at.attributesNum!==Et||at.index!==Tt}function ft(Lt,Xt,_t,Tt){const St={},Zt=Xt.attributes;let Et=0;const Wt=_t.getAttributes();for(const Ht in Wt)if(Wt[Ht].location>=0){let Pt=Zt[Ht];Pt===void 0&&(Ht==="instanceMatrix"&&Lt.instanceMatrix&&(Pt=Lt.instanceMatrix),Ht==="instanceColor"&&Lt.instanceColor&&(Pt=Lt.instanceColor));const Ot={};Ot.attribute=Pt,Pt&&Pt.data&&(Ot.data=Pt.data),St[Ht]=Ot,Et++}at.attributes=St,at.attributesNum=Et,at.index=Tt}function pt(){const Lt=at.newAttributes;for(let Xt=0,_t=Lt.length;Xt<_t;Xt++)Lt[Xt]=0}function Vt(Lt){yt(Lt,0)}function yt(Lt,Xt){const _t=at.newAttributes,Tt=at.enabledAttributes,St=at.attributeDivisors;_t[Lt]=1,Tt[Lt]===0&&(et.enableVertexAttribArray(Lt),Tt[Lt]=1),St[Lt]!==Xt&&((tt.isWebGL2?et:_.get("ANGLE_instanced_arrays"))[tt.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Lt,Xt),St[Lt]=Xt)}function Gt(){const Lt=at.newAttributes,Xt=at.enabledAttributes;for(let _t=0,Tt=Xt.length;_t<Tt;_t++)Xt[_t]!==Lt[_t]&&(et.disableVertexAttribArray(_t),Xt[_t]=0)}function Bt(Lt,Xt,_t,Tt,St,Zt){tt.isWebGL2===!0&&(_t===5124||_t===5125)?et.vertexAttribIPointer(Lt,Xt,_t,St,Zt):et.vertexAttribPointer(Lt,Xt,_t,Tt,St,Zt)}function vt(Lt,Xt,_t,Tt){if(tt.isWebGL2===!1&&(Lt.isInstancedMesh||Tt.isInstancedBufferGeometry)&&_.get("ANGLE_instanced_arrays")===null)return;pt();const St=Tt.attributes,Zt=_t.getAttributes(),Et=Xt.defaultAttributeValues;for(const Wt in Zt){const Ht=Zt[Wt];if(Ht.location>=0){let zt=St[Wt];if(zt===void 0&&(Wt==="instanceMatrix"&&Lt.instanceMatrix&&(zt=Lt.instanceMatrix),Wt==="instanceColor"&&Lt.instanceColor&&(zt=Lt.instanceColor)),zt!==void 0){const Pt=zt.normalized,Ot=zt.itemSize,Jt=_e.get(zt);if(Jt===void 0)continue;const rn=Jt.buffer,sn=Jt.type,Vn=Jt.bytesPerElement;if(zt.isInterleavedBufferAttribute){const dn=zt.data,gn=dn.stride,$t=zt.offset;if(dn.isInstancedInterleavedBuffer){for(let tn=0;tn<Ht.locationSize;tn++)yt(Ht.location+tn,dn.meshPerAttribute);Lt.isInstancedMesh!==!0&&Tt._maxInstanceCount===void 0&&(Tt._maxInstanceCount=dn.meshPerAttribute*dn.count)}else for(let tn=0;tn<Ht.locationSize;tn++)Vt(Ht.location+tn);et.bindBuffer(34962,rn);for(let tn=0;tn<Ht.locationSize;tn++)Bt(Ht.location+tn,Ot/Ht.locationSize,sn,Pt,gn*Vn,($t+Ot/Ht.locationSize*tn)*Vn)}else{if(zt.isInstancedBufferAttribute){for(let dn=0;dn<Ht.locationSize;dn++)yt(Ht.location+dn,zt.meshPerAttribute);Lt.isInstancedMesh!==!0&&Tt._maxInstanceCount===void 0&&(Tt._maxInstanceCount=zt.meshPerAttribute*zt.count)}else for(let dn=0;dn<Ht.locationSize;dn++)Vt(Ht.location+dn);et.bindBuffer(34962,rn);for(let dn=0;dn<Ht.locationSize;dn++)Bt(Ht.location+dn,Ot/Ht.locationSize,sn,Pt,Ot*Vn,Ot/Ht.locationSize*dn*Vn)}}else if(Et!==void 0){const Pt=Et[Wt];if(Pt!==void 0)switch(Pt.length){case 2:et.vertexAttrib2fv(Ht.location,Pt);break;case 3:et.vertexAttrib3fv(Ht.location,Pt);break;case 4:et.vertexAttrib4fv(Ht.location,Pt);break;default:et.vertexAttrib1fv(Ht.location,Pt)}}}}Gt()}function wt(){Nt();for(const Lt in st){const Xt=st[Lt];for(const _t in Xt){const Tt=Xt[_t];for(const St in Tt)dt(Tt[St].object),delete Tt[St];delete Xt[_t]}delete st[Lt]}}function Mt(Lt){if(st[Lt.id]===void 0)return;const Xt=st[Lt.id];for(const _t in Xt){const Tt=Xt[_t];for(const St in Tt)dt(Tt[St].object),delete Tt[St];delete Xt[_t]}delete st[Lt.id]}function kt(Lt){for(const Xt in st){const _t=st[Xt];if(_t[Lt.id]===void 0)continue;const Tt=_t[Lt.id];for(const St in Tt)dt(Tt[St].object),delete Tt[St];delete _t[Lt.id]}}function Nt(){Yt(),At=!0,at!==ot&&(at=ot,ct(at.object))}function Yt(){ot.geometry=null,ot.program=null,ot.wireframe=!1}return{setup:lt,reset:Nt,resetDefaultState:Yt,dispose:wt,releaseStatesOfGeometry:Mt,releaseStatesOfProgram:kt,initAttributes:pt,enableAttribute:Vt,disableUnusedAttributes:Gt}}function WebGLBufferRenderer(et,_,_e,tt){const nt=tt.isWebGL2;let it;function rt(at){it=at}function st(at,At){et.drawArrays(it,at,At),_e.update(At,it,1)}function ot(at,At,lt){if(lt===0)return;let gt,ct;if(nt)gt=et,ct="drawArraysInstanced";else if(gt=_.get("ANGLE_instanced_arrays"),ct="drawArraysInstancedANGLE",gt===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}gt[ct](it,at,At,lt),_e.update(At,it,lt)}this.setMode=rt,this.render=st,this.renderInstances=ot}function WebGLCapabilities(et,_,_e){let tt;function nt(){if(tt!==void 0)return tt;if(_.has("EXT_texture_filter_anisotropic")===!0){const Bt=_.get("EXT_texture_filter_anisotropic");tt=et.getParameter(Bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else tt=0;return tt}function it(Bt){if(Bt==="highp"){if(et.getShaderPrecisionFormat(35633,36338).precision>0&&et.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Bt="mediump"}return Bt==="mediump"&&et.getShaderPrecisionFormat(35633,36337).precision>0&&et.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const rt=typeof WebGL2RenderingContext<"u"&&et instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&et instanceof WebGL2ComputeRenderingContext;let st=_e.precision!==void 0?_e.precision:"highp";const ot=it(st);ot!==st&&(console.warn("THREE.WebGLRenderer:",st,"not supported, using",ot,"instead."),st=ot);const at=rt||_.has("WEBGL_draw_buffers"),At=_e.logarithmicDepthBuffer===!0,lt=et.getParameter(34930),gt=et.getParameter(35660),ct=et.getParameter(3379),dt=et.getParameter(34076),ht=et.getParameter(34921),mt=et.getParameter(36347),Ct=et.getParameter(36348),ft=et.getParameter(36349),pt=gt>0,Vt=rt||_.has("OES_texture_float"),yt=pt&&Vt,Gt=rt?et.getParameter(36183):0;return{isWebGL2:rt,drawBuffers:at,getMaxAnisotropy:nt,getMaxPrecision:it,precision:st,logarithmicDepthBuffer:At,maxTextures:lt,maxVertexTextures:gt,maxTextureSize:ct,maxCubemapSize:dt,maxAttributes:ht,maxVertexUniforms:mt,maxVaryings:Ct,maxFragmentUniforms:ft,vertexTextures:pt,floatFragmentTextures:Vt,floatVertexTextures:yt,maxSamples:Gt}}function WebGLClipping(et){const _=this;let _e=null,tt=0,nt=!1,it=!1;const rt=new Plane$1,st=new Matrix3,ot={value:null,needsUpdate:!1};this.uniform=ot,this.numPlanes=0,this.numIntersection=0,this.init=function(lt,gt,ct){const dt=lt.length!==0||gt||tt!==0||nt;return nt=gt,_e=At(lt,ct,0),tt=lt.length,dt},this.beginShadows=function(){it=!0,At(null)},this.endShadows=function(){it=!1,at()},this.setState=function(lt,gt,ct){const dt=lt.clippingPlanes,ht=lt.clipIntersection,mt=lt.clipShadows,Ct=et.get(lt);if(!nt||dt===null||dt.length===0||it&&!mt)it?At(null):at();else{const ft=it?0:tt,pt=ft*4;let Vt=Ct.clippingState||null;ot.value=Vt,Vt=At(dt,gt,pt,ct);for(let yt=0;yt!==pt;++yt)Vt[yt]=_e[yt];Ct.clippingState=Vt,this.numIntersection=ht?this.numPlanes:0,this.numPlanes+=ft}};function at(){ot.value!==_e&&(ot.value=_e,ot.needsUpdate=tt>0),_.numPlanes=tt,_.numIntersection=0}function At(lt,gt,ct,dt){const ht=lt!==null?lt.length:0;let mt=null;if(ht!==0){if(mt=ot.value,dt!==!0||mt===null){const Ct=ct+ht*4,ft=gt.matrixWorldInverse;st.getNormalMatrix(ft),(mt===null||mt.length<Ct)&&(mt=new Float32Array(Ct));for(let pt=0,Vt=ct;pt!==ht;++pt,Vt+=4)rt.copy(lt[pt]).applyMatrix4(ft,st),rt.normal.toArray(mt,Vt),mt[Vt+3]=rt.constant}ot.value=mt,ot.needsUpdate=!0}return _.numPlanes=ht,_.numIntersection=0,mt}}function WebGLCubeMaps(et){let _=new WeakMap;function _e(rt,st){return st===EquirectangularReflectionMapping?rt.mapping=CubeReflectionMapping:st===EquirectangularRefractionMapping&&(rt.mapping=CubeRefractionMapping),rt}function tt(rt){if(rt&&rt.isTexture&&rt.isRenderTargetTexture===!1){const st=rt.mapping;if(st===EquirectangularReflectionMapping||st===EquirectangularRefractionMapping)if(_.has(rt)){const ot=_.get(rt).texture;return _e(ot,rt.mapping)}else{const ot=rt.image;if(ot&&ot.height>0){const at=new WebGLCubeRenderTarget(ot.height/2);return at.fromEquirectangularTexture(et,rt),_.set(rt,at),rt.addEventListener("dispose",nt),_e(at.texture,rt.mapping)}else return null}}return rt}function nt(rt){const st=rt.target;st.removeEventListener("dispose",nt);const ot=_.get(st);ot!==void 0&&(_.delete(st),ot.dispose())}function it(){_=new WeakMap}return{get:tt,dispose:it}}class OrthographicCamera extends Camera$1{constructor(_=-1,_e=1,tt=1,nt=-1,it=.1,rt=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=_e,this.top=tt,this.bottom=nt,this.near=it,this.far=rt,this.updateProjectionMatrix()}copy(_,_e){return super.copy(_,_e),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,_e,tt,nt,it,rt){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=_e,this.view.offsetX=tt,this.view.offsetY=nt,this.view.width=it,this.view.height=rt,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),_e=(this.top-this.bottom)/(2*this.zoom),tt=(this.right+this.left)/2,nt=(this.top+this.bottom)/2;let it=tt-_,rt=tt+_,st=nt+_e,ot=nt-_e;if(this.view!==null&&this.view.enabled){const at=(this.right-this.left)/this.view.fullWidth/this.zoom,At=(this.top-this.bottom)/this.view.fullHeight/this.zoom;it+=at*this.view.offsetX,rt=it+at*this.view.width,st-=At*this.view.offsetY,ot=st-At*this.view.height}this.projectionMatrix.makeOrthographic(it,rt,st,ot,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const _e=super.toJSON(_);return _e.object.zoom=this.zoom,_e.object.left=this.left,_e.object.right=this.right,_e.object.top=this.top,_e.object.bottom=this.bottom,_e.object.near=this.near,_e.object.far=this.far,this.view!==null&&(_e.object.view=Object.assign({},this.view)),_e}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(_,_e=0,tt=.1,nt=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const it=this._allocateTargets();return it.depthBuffer=!0,this._sceneToCubeUV(_,tt,nt,it),_e>0&&this._blur(it,0,0,_e),this._applyPMREM(it),this._cleanup(it),it}fromEquirectangular(_,_e=null){return this._fromTexture(_,_e)}fromCubemap(_,_e=null){return this._fromTexture(_,_e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodPlanes.length;_++)this._lodPlanes[_].dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget),_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,_e){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget();const tt=_e||this._allocateTargets();return this._textureToCubeUV(_,tt),this._applyPMREM(tt),this._cleanup(tt),tt}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),_e=4*this._cubeSize,tt={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!1},nt=_createRenderTarget(_,_e,tt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,_e,tt);const{_lodMax:it}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(it)),this._blurMaterial=_getBlurShader(it,_,_e)}return nt}_compileMaterial(_){const _e=new Mesh(this._lodPlanes[0],_);this._renderer.compile(_e,_flatCamera)}_sceneToCubeUV(_,_e,tt,nt){const st=new PerspectiveCamera$1(90,1,_e,tt),ot=[1,-1,1,1,1,1],at=[1,1,1,-1,-1,-1],At=this._renderer,lt=At.autoClear,gt=At.toneMapping;At.getClearColor(_clearColor),At.toneMapping=NoToneMapping,At.autoClear=!1;const ct=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),dt=new Mesh(new BoxGeometry,ct);let ht=!1;const mt=_.background;mt?mt.isColor&&(ct.color.copy(mt),_.background=null,ht=!0):(ct.color.copy(_clearColor),ht=!0);for(let Ct=0;Ct<6;Ct++){const ft=Ct%3;ft===0?(st.up.set(0,ot[Ct],0),st.lookAt(at[Ct],0,0)):ft===1?(st.up.set(0,0,ot[Ct]),st.lookAt(0,at[Ct],0)):(st.up.set(0,ot[Ct],0),st.lookAt(0,0,at[Ct]));const pt=this._cubeSize;_setViewport(nt,ft*pt,Ct>2?pt:0,pt,pt),At.setRenderTarget(nt),ht&&At.render(dt,st),At.render(_,st)}dt.geometry.dispose(),dt.material.dispose(),At.toneMapping=gt,At.autoClear=lt,_.background=mt}_textureToCubeUV(_,_e){const tt=this._renderer,nt=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;nt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const it=nt?this._cubemapMaterial:this._equirectMaterial,rt=new Mesh(this._lodPlanes[0],it),st=it.uniforms;st.envMap.value=_;const ot=this._cubeSize;_setViewport(_e,0,0,3*ot,2*ot),tt.setRenderTarget(_e),tt.render(rt,_flatCamera)}_applyPMREM(_){const _e=this._renderer,tt=_e.autoClear;_e.autoClear=!1;for(let nt=1;nt<this._lodPlanes.length;nt++){const it=Math.sqrt(this._sigmas[nt]*this._sigmas[nt]-this._sigmas[nt-1]*this._sigmas[nt-1]),rt=_axisDirections[(nt-1)%_axisDirections.length];this._blur(_,nt-1,nt,it,rt)}_e.autoClear=tt}_blur(_,_e,tt,nt,it){const rt=this._pingPongRenderTarget;this._halfBlur(_,rt,_e,tt,nt,"latitudinal",it),this._halfBlur(rt,_,tt,tt,nt,"longitudinal",it)}_halfBlur(_,_e,tt,nt,it,rt,st){const ot=this._renderer,at=this._blurMaterial;rt!=="latitudinal"&&rt!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const At=3,lt=new Mesh(this._lodPlanes[nt],at),gt=at.uniforms,ct=this._sizeLods[tt]-1,dt=isFinite(it)?Math.PI/(2*ct):2*Math.PI/(2*MAX_SAMPLES-1),ht=it/dt,mt=isFinite(it)?1+Math.floor(At*ht):MAX_SAMPLES;mt>MAX_SAMPLES&&console.warn(`sigmaRadians, ${it}, is too large and will clip, as it requested ${mt} samples when the maximum is set to ${MAX_SAMPLES}`);const Ct=[];let ft=0;for(let Bt=0;Bt<MAX_SAMPLES;++Bt){const vt=Bt/ht,wt=Math.exp(-vt*vt/2);Ct.push(wt),Bt===0?ft+=wt:Bt<mt&&(ft+=2*wt)}for(let Bt=0;Bt<Ct.length;Bt++)Ct[Bt]=Ct[Bt]/ft;gt.envMap.value=_.texture,gt.samples.value=mt,gt.weights.value=Ct,gt.latitudinal.value=rt==="latitudinal",st&&(gt.poleAxis.value=st);const{_lodMax:pt}=this;gt.dTheta.value=dt,gt.mipInt.value=pt-tt;const Vt=this._sizeLods[nt],yt=3*Vt*(nt>pt-LOD_MIN?nt-pt+LOD_MIN:0),Gt=4*(this._cubeSize-Vt);_setViewport(_e,yt,Gt,3*Vt,2*Vt),ot.setRenderTarget(_e),ot.render(lt,_flatCamera)}}function _createPlanes(et){const _=[],_e=[],tt=[];let nt=et;const it=et-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let rt=0;rt<it;rt++){const st=Math.pow(2,nt);_e.push(st);let ot=1/st;rt>et-LOD_MIN?ot=EXTRA_LOD_SIGMA[rt-et+LOD_MIN-1]:rt===0&&(ot=0),tt.push(ot);const at=1/(st-2),At=-at,lt=1+at,gt=[At,At,lt,At,lt,lt,At,At,lt,lt,At,lt],ct=6,dt=6,ht=3,mt=2,Ct=1,ft=new Float32Array(ht*dt*ct),pt=new Float32Array(mt*dt*ct),Vt=new Float32Array(Ct*dt*ct);for(let Gt=0;Gt<ct;Gt++){const Bt=Gt%3*2/3-1,vt=Gt>2?0:-1,wt=[Bt,vt,0,Bt+2/3,vt,0,Bt+2/3,vt+1,0,Bt,vt,0,Bt+2/3,vt+1,0,Bt,vt+1,0];ft.set(wt,ht*dt*Gt),pt.set(gt,mt*dt*Gt);const Mt=[Gt,Gt,Gt,Gt,Gt,Gt];Vt.set(Mt,Ct*dt*Gt)}const yt=new BufferGeometry;yt.setAttribute("position",new BufferAttribute(ft,ht)),yt.setAttribute("uv",new BufferAttribute(pt,mt)),yt.setAttribute("faceIndex",new BufferAttribute(Vt,Ct)),_.push(yt),nt>LOD_MIN&&nt--}return{lodPlanes:_,sizeLods:_e,sigmas:tt}}function _createRenderTarget(et,_,_e){const tt=new WebGLRenderTarget(et,_,_e);return tt.texture.mapping=CubeUVReflectionMapping,tt.texture.name="PMREM.cubeUv",tt.scissorTest=!0,tt}function _setViewport(et,_,_e,tt,nt){et.viewport.set(_,_e,tt,nt),et.scissor.set(_,_e,tt,nt)}function _getBlurShader(et,_,_e){const tt=new Float32Array(MAX_SAMPLES),nt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/_e,CUBEUV_MAX_MIP:`${et}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:tt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:nt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(et){let _=new WeakMap,_e=null;function tt(st){if(st&&st.isTexture){const ot=st.mapping,at=ot===EquirectangularReflectionMapping||ot===EquirectangularRefractionMapping,At=ot===CubeReflectionMapping||ot===CubeRefractionMapping;if(at||At)if(st.isRenderTargetTexture&&st.needsPMREMUpdate===!0){st.needsPMREMUpdate=!1;let lt=_.get(st);return _e===null&&(_e=new PMREMGenerator(et)),lt=at?_e.fromEquirectangular(st,lt):_e.fromCubemap(st,lt),_.set(st,lt),lt.texture}else{if(_.has(st))return _.get(st).texture;{const lt=st.image;if(at&&lt&&lt.height>0||At&&lt&&nt(lt)){_e===null&&(_e=new PMREMGenerator(et));const gt=at?_e.fromEquirectangular(st):_e.fromCubemap(st);return _.set(st,gt),st.addEventListener("dispose",it),gt.texture}else return null}}}return st}function nt(st){let ot=0;const at=6;for(let At=0;At<at;At++)st[At]!==void 0&&ot++;return ot===at}function it(st){const ot=st.target;ot.removeEventListener("dispose",it);const at=_.get(ot);at!==void 0&&(_.delete(ot),at.dispose())}function rt(){_=new WeakMap,_e!==null&&(_e.dispose(),_e=null)}return{get:tt,dispose:rt}}function WebGLExtensions(et){const _={};function _e(tt){if(_[tt]!==void 0)return _[tt];let nt;switch(tt){case"WEBGL_depth_texture":nt=et.getExtension("WEBGL_depth_texture")||et.getExtension("MOZ_WEBGL_depth_texture")||et.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":nt=et.getExtension("EXT_texture_filter_anisotropic")||et.getExtension("MOZ_EXT_texture_filter_anisotropic")||et.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":nt=et.getExtension("WEBGL_compressed_texture_s3tc")||et.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||et.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":nt=et.getExtension("WEBGL_compressed_texture_pvrtc")||et.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:nt=et.getExtension(tt)}return _[tt]=nt,nt}return{has:function(tt){return _e(tt)!==null},init:function(tt){tt.isWebGL2?_e("EXT_color_buffer_float"):(_e("WEBGL_depth_texture"),_e("OES_texture_float"),_e("OES_texture_half_float"),_e("OES_texture_half_float_linear"),_e("OES_standard_derivatives"),_e("OES_element_index_uint"),_e("OES_vertex_array_object"),_e("ANGLE_instanced_arrays")),_e("OES_texture_float_linear"),_e("EXT_color_buffer_half_float"),_e("WEBGL_multisampled_render_to_texture")},get:function(tt){const nt=_e(tt);return nt===null&&console.warn("THREE.WebGLRenderer: "+tt+" extension not supported."),nt}}}function WebGLGeometries(et,_,_e,tt){const nt={},it=new WeakMap;function rt(lt){const gt=lt.target;gt.index!==null&&_.remove(gt.index);for(const dt in gt.attributes)_.remove(gt.attributes[dt]);gt.removeEventListener("dispose",rt),delete nt[gt.id];const ct=it.get(gt);ct&&(_.remove(ct),it.delete(gt)),tt.releaseStatesOfGeometry(gt),gt.isInstancedBufferGeometry===!0&&delete gt._maxInstanceCount,_e.memory.geometries--}function st(lt,gt){return nt[gt.id]===!0||(gt.addEventListener("dispose",rt),nt[gt.id]=!0,_e.memory.geometries++),gt}function ot(lt){const gt=lt.attributes;for(const dt in gt)_.update(gt[dt],34962);const ct=lt.morphAttributes;for(const dt in ct){const ht=ct[dt];for(let mt=0,Ct=ht.length;mt<Ct;mt++)_.update(ht[mt],34962)}}function at(lt){const gt=[],ct=lt.index,dt=lt.attributes.position;let ht=0;if(ct!==null){const ft=ct.array;ht=ct.version;for(let pt=0,Vt=ft.length;pt<Vt;pt+=3){const yt=ft[pt+0],Gt=ft[pt+1],Bt=ft[pt+2];gt.push(yt,Gt,Gt,Bt,Bt,yt)}}else{const ft=dt.array;ht=dt.version;for(let pt=0,Vt=ft.length/3-1;pt<Vt;pt+=3){const yt=pt+0,Gt=pt+1,Bt=pt+2;gt.push(yt,Gt,Gt,Bt,Bt,yt)}}const mt=new(arrayNeedsUint32(gt)?Uint32BufferAttribute:Uint16BufferAttribute)(gt,1);mt.version=ht;const Ct=it.get(lt);Ct&&_.remove(Ct),it.set(lt,mt)}function At(lt){const gt=it.get(lt);if(gt){const ct=lt.index;ct!==null&&gt.version<ct.version&&at(lt)}else at(lt);return it.get(lt)}return{get:st,update:ot,getWireframeAttribute:At}}function WebGLIndexedBufferRenderer(et,_,_e,tt){const nt=tt.isWebGL2;let it;function rt(gt){it=gt}let st,ot;function at(gt){st=gt.type,ot=gt.bytesPerElement}function At(gt,ct){et.drawElements(it,ct,st,gt*ot),_e.update(ct,it,1)}function lt(gt,ct,dt){if(dt===0)return;let ht,mt;if(nt)ht=et,mt="drawElementsInstanced";else if(ht=_.get("ANGLE_instanced_arrays"),mt="drawElementsInstancedANGLE",ht===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ht[mt](it,ct,st,gt*ot,dt),_e.update(ct,it,dt)}this.setMode=rt,this.setIndex=at,this.render=At,this.renderInstances=lt}function WebGLInfo(et){const _={geometries:0,textures:0},_e={frame:0,calls:0,triangles:0,points:0,lines:0};function tt(it,rt,st){switch(_e.calls++,rt){case 4:_e.triangles+=st*(it/3);break;case 1:_e.lines+=st*(it/2);break;case 3:_e.lines+=st*(it-1);break;case 2:_e.lines+=st*it;break;case 0:_e.points+=st*it;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",rt);break}}function nt(){_e.frame++,_e.calls=0,_e.triangles=0,_e.points=0,_e.lines=0}return{memory:_,render:_e,programs:null,autoReset:!0,reset:nt,update:tt}}function numericalSort(et,_){return et[0]-_[0]}function absNumericalSort(et,_){return Math.abs(_[1])-Math.abs(et[1])}function WebGLMorphtargets(et,_,_e){const tt={},nt=new Float32Array(8),it=new WeakMap,rt=new Vector4,st=[];for(let at=0;at<8;at++)st[at]=[at,0];function ot(at,At,lt,gt){const ct=at.morphTargetInfluences;if(_.isWebGL2===!0){const ht=At.morphAttributes.position||At.morphAttributes.normal||At.morphAttributes.color,mt=ht!==void 0?ht.length:0;let Ct=it.get(At);if(Ct===void 0||Ct.count!==mt){let _t=function(){Lt.dispose(),it.delete(At),At.removeEventListener("dispose",_t)};var dt=_t;Ct!==void 0&&Ct.texture.dispose();const Vt=At.morphAttributes.position!==void 0,yt=At.morphAttributes.normal!==void 0,Gt=At.morphAttributes.color!==void 0,Bt=At.morphAttributes.position||[],vt=At.morphAttributes.normal||[],wt=At.morphAttributes.color||[];let Mt=0;Vt===!0&&(Mt=1),yt===!0&&(Mt=2),Gt===!0&&(Mt=3);let kt=At.attributes.position.count*Mt,Nt=1;kt>_.maxTextureSize&&(Nt=Math.ceil(kt/_.maxTextureSize),kt=_.maxTextureSize);const Yt=new Float32Array(kt*Nt*4*mt),Lt=new DataArrayTexture(Yt,kt,Nt,mt);Lt.type=FloatType,Lt.needsUpdate=!0;const Xt=Mt*4;for(let Tt=0;Tt<mt;Tt++){const St=Bt[Tt],Zt=vt[Tt],Et=wt[Tt],Wt=kt*Nt*4*Tt;for(let Ht=0;Ht<St.count;Ht++){const zt=Ht*Xt;Vt===!0&&(rt.fromBufferAttribute(St,Ht),Yt[Wt+zt+0]=rt.x,Yt[Wt+zt+1]=rt.y,Yt[Wt+zt+2]=rt.z,Yt[Wt+zt+3]=0),yt===!0&&(rt.fromBufferAttribute(Zt,Ht),Yt[Wt+zt+4]=rt.x,Yt[Wt+zt+5]=rt.y,Yt[Wt+zt+6]=rt.z,Yt[Wt+zt+7]=0),Gt===!0&&(rt.fromBufferAttribute(Et,Ht),Yt[Wt+zt+8]=rt.x,Yt[Wt+zt+9]=rt.y,Yt[Wt+zt+10]=rt.z,Yt[Wt+zt+11]=Et.itemSize===4?rt.w:1)}}Ct={count:mt,texture:Lt,size:new Vector2(kt,Nt)},it.set(At,Ct),At.addEventListener("dispose",_t)}let ft=0;for(let Vt=0;Vt<ct.length;Vt++)ft+=ct[Vt];const pt=At.morphTargetsRelative?1:1-ft;gt.getUniforms().setValue(et,"morphTargetBaseInfluence",pt),gt.getUniforms().setValue(et,"morphTargetInfluences",ct),gt.getUniforms().setValue(et,"morphTargetsTexture",Ct.texture,_e),gt.getUniforms().setValue(et,"morphTargetsTextureSize",Ct.size)}else{const ht=ct===void 0?0:ct.length;let mt=tt[At.id];if(mt===void 0||mt.length!==ht){mt=[];for(let yt=0;yt<ht;yt++)mt[yt]=[yt,0];tt[At.id]=mt}for(let yt=0;yt<ht;yt++){const Gt=mt[yt];Gt[0]=yt,Gt[1]=ct[yt]}mt.sort(absNumericalSort);for(let yt=0;yt<8;yt++)yt<ht&&mt[yt][1]?(st[yt][0]=mt[yt][0],st[yt][1]=mt[yt][1]):(st[yt][0]=Number.MAX_SAFE_INTEGER,st[yt][1]=0);st.sort(numericalSort);const Ct=At.morphAttributes.position,ft=At.morphAttributes.normal;let pt=0;for(let yt=0;yt<8;yt++){const Gt=st[yt],Bt=Gt[0],vt=Gt[1];Bt!==Number.MAX_SAFE_INTEGER&&vt?(Ct&&At.getAttribute("morphTarget"+yt)!==Ct[Bt]&&At.setAttribute("morphTarget"+yt,Ct[Bt]),ft&&At.getAttribute("morphNormal"+yt)!==ft[Bt]&&At.setAttribute("morphNormal"+yt,ft[Bt]),nt[yt]=vt,pt+=vt):(Ct&&At.hasAttribute("morphTarget"+yt)===!0&&At.deleteAttribute("morphTarget"+yt),ft&&At.hasAttribute("morphNormal"+yt)===!0&&At.deleteAttribute("morphNormal"+yt),nt[yt]=0)}const Vt=At.morphTargetsRelative?1:1-pt;gt.getUniforms().setValue(et,"morphTargetBaseInfluence",Vt),gt.getUniforms().setValue(et,"morphTargetInfluences",nt)}}return{update:ot}}function WebGLObjects(et,_,_e,tt){let nt=new WeakMap;function it(ot){const at=tt.render.frame,At=ot.geometry,lt=_.get(ot,At);return nt.get(lt)!==at&&(_.update(lt),nt.set(lt,at)),ot.isInstancedMesh&&(ot.hasEventListener("dispose",st)===!1&&ot.addEventListener("dispose",st),_e.update(ot.instanceMatrix,34962),ot.instanceColor!==null&&_e.update(ot.instanceColor,34962)),lt}function rt(){nt=new WeakMap}function st(ot){const at=ot.target;at.removeEventListener("dispose",st),_e.remove(at.instanceMatrix),at.instanceColor!==null&&_e.remove(at.instanceColor)}return{update:it,dispose:rt}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(et,_,_e){const tt=et[0];if(tt<=0||tt>0)return et;const nt=_*_e;let it=arrayCacheF32[nt];if(it===void 0&&(it=new Float32Array(nt),arrayCacheF32[nt]=it),_!==0){tt.toArray(it,0);for(let rt=1,st=0;rt!==_;++rt)st+=_e,et[rt].toArray(it,st)}return it}function arraysEqual(et,_){if(et.length!==_.length)return!1;for(let _e=0,tt=et.length;_e<tt;_e++)if(et[_e]!==_[_e])return!1;return!0}function copyArray(et,_){for(let _e=0,tt=_.length;_e<tt;_e++)et[_e]=_[_e]}function allocTexUnits(et,_){let _e=arrayCacheI32[_];_e===void 0&&(_e=new Int32Array(_),arrayCacheI32[_]=_e);for(let tt=0;tt!==_;++tt)_e[tt]=et.allocateTextureUnit();return _e}function setValueV1f(et,_){const _e=this.cache;_e[0]!==_&&(et.uniform1f(this.addr,_),_e[0]=_)}function setValueV2f(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y)&&(et.uniform2f(this.addr,_.x,_.y),_e[0]=_.x,_e[1]=_.y);else{if(arraysEqual(_e,_))return;et.uniform2fv(this.addr,_),copyArray(_e,_)}}function setValueV3f(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z)&&(et.uniform3f(this.addr,_.x,_.y,_.z),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z);else if(_.r!==void 0)(_e[0]!==_.r||_e[1]!==_.g||_e[2]!==_.b)&&(et.uniform3f(this.addr,_.r,_.g,_.b),_e[0]=_.r,_e[1]=_.g,_e[2]=_.b);else{if(arraysEqual(_e,_))return;et.uniform3fv(this.addr,_),copyArray(_e,_)}}function setValueV4f(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z||_e[3]!==_.w)&&(et.uniform4f(this.addr,_.x,_.y,_.z,_.w),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z,_e[3]=_.w);else{if(arraysEqual(_e,_))return;et.uniform4fv(this.addr,_),copyArray(_e,_)}}function setValueM2(et,_){const _e=this.cache,tt=_.elements;if(tt===void 0){if(arraysEqual(_e,_))return;et.uniformMatrix2fv(this.addr,!1,_),copyArray(_e,_)}else{if(arraysEqual(_e,tt))return;mat2array.set(tt),et.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(_e,tt)}}function setValueM3(et,_){const _e=this.cache,tt=_.elements;if(tt===void 0){if(arraysEqual(_e,_))return;et.uniformMatrix3fv(this.addr,!1,_),copyArray(_e,_)}else{if(arraysEqual(_e,tt))return;mat3array.set(tt),et.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(_e,tt)}}function setValueM4(et,_){const _e=this.cache,tt=_.elements;if(tt===void 0){if(arraysEqual(_e,_))return;et.uniformMatrix4fv(this.addr,!1,_),copyArray(_e,_)}else{if(arraysEqual(_e,tt))return;mat4array.set(tt),et.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(_e,tt)}}function setValueV1i(et,_){const _e=this.cache;_e[0]!==_&&(et.uniform1i(this.addr,_),_e[0]=_)}function setValueV2i(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y)&&(et.uniform2i(this.addr,_.x,_.y),_e[0]=_.x,_e[1]=_.y);else{if(arraysEqual(_e,_))return;et.uniform2iv(this.addr,_),copyArray(_e,_)}}function setValueV3i(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z)&&(et.uniform3i(this.addr,_.x,_.y,_.z),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z);else{if(arraysEqual(_e,_))return;et.uniform3iv(this.addr,_),copyArray(_e,_)}}function setValueV4i(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z||_e[3]!==_.w)&&(et.uniform4i(this.addr,_.x,_.y,_.z,_.w),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z,_e[3]=_.w);else{if(arraysEqual(_e,_))return;et.uniform4iv(this.addr,_),copyArray(_e,_)}}function setValueV1ui(et,_){const _e=this.cache;_e[0]!==_&&(et.uniform1ui(this.addr,_),_e[0]=_)}function setValueV2ui(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y)&&(et.uniform2ui(this.addr,_.x,_.y),_e[0]=_.x,_e[1]=_.y);else{if(arraysEqual(_e,_))return;et.uniform2uiv(this.addr,_),copyArray(_e,_)}}function setValueV3ui(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z)&&(et.uniform3ui(this.addr,_.x,_.y,_.z),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z);else{if(arraysEqual(_e,_))return;et.uniform3uiv(this.addr,_),copyArray(_e,_)}}function setValueV4ui(et,_){const _e=this.cache;if(_.x!==void 0)(_e[0]!==_.x||_e[1]!==_.y||_e[2]!==_.z||_e[3]!==_.w)&&(et.uniform4ui(this.addr,_.x,_.y,_.z,_.w),_e[0]=_.x,_e[1]=_.y,_e[2]=_.z,_e[3]=_.w);else{if(arraysEqual(_e,_))return;et.uniform4uiv(this.addr,_),copyArray(_e,_)}}function setValueT1(et,_,_e){const tt=this.cache,nt=_e.allocateTextureUnit();tt[0]!==nt&&(et.uniform1i(this.addr,nt),tt[0]=nt),_e.setTexture2D(_||emptyTexture,nt)}function setValueT3D1(et,_,_e){const tt=this.cache,nt=_e.allocateTextureUnit();tt[0]!==nt&&(et.uniform1i(this.addr,nt),tt[0]=nt),_e.setTexture3D(_||empty3dTexture,nt)}function setValueT6(et,_,_e){const tt=this.cache,nt=_e.allocateTextureUnit();tt[0]!==nt&&(et.uniform1i(this.addr,nt),tt[0]=nt),_e.setTextureCube(_||emptyCubeTexture,nt)}function setValueT2DArray1(et,_,_e){const tt=this.cache,nt=_e.allocateTextureUnit();tt[0]!==nt&&(et.uniform1i(this.addr,nt),tt[0]=nt),_e.setTexture2DArray(_||emptyArrayTexture,nt)}function getSingularSetter(et){switch(et){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(et,_){et.uniform1fv(this.addr,_)}function setValueV2fArray(et,_){const _e=flatten(_,this.size,2);et.uniform2fv(this.addr,_e)}function setValueV3fArray(et,_){const _e=flatten(_,this.size,3);et.uniform3fv(this.addr,_e)}function setValueV4fArray(et,_){const _e=flatten(_,this.size,4);et.uniform4fv(this.addr,_e)}function setValueM2Array(et,_){const _e=flatten(_,this.size,4);et.uniformMatrix2fv(this.addr,!1,_e)}function setValueM3Array(et,_){const _e=flatten(_,this.size,9);et.uniformMatrix3fv(this.addr,!1,_e)}function setValueM4Array(et,_){const _e=flatten(_,this.size,16);et.uniformMatrix4fv(this.addr,!1,_e)}function setValueV1iArray(et,_){et.uniform1iv(this.addr,_)}function setValueV2iArray(et,_){et.uniform2iv(this.addr,_)}function setValueV3iArray(et,_){et.uniform3iv(this.addr,_)}function setValueV4iArray(et,_){et.uniform4iv(this.addr,_)}function setValueV1uiArray(et,_){et.uniform1uiv(this.addr,_)}function setValueV2uiArray(et,_){et.uniform2uiv(this.addr,_)}function setValueV3uiArray(et,_){et.uniform3uiv(this.addr,_)}function setValueV4uiArray(et,_){et.uniform4uiv(this.addr,_)}function setValueT1Array(et,_,_e){const tt=this.cache,nt=_.length,it=allocTexUnits(_e,nt);arraysEqual(tt,it)||(et.uniform1iv(this.addr,it),copyArray(tt,it));for(let rt=0;rt!==nt;++rt)_e.setTexture2D(_[rt]||emptyTexture,it[rt])}function setValueT3DArray(et,_,_e){const tt=this.cache,nt=_.length,it=allocTexUnits(_e,nt);arraysEqual(tt,it)||(et.uniform1iv(this.addr,it),copyArray(tt,it));for(let rt=0;rt!==nt;++rt)_e.setTexture3D(_[rt]||empty3dTexture,it[rt])}function setValueT6Array(et,_,_e){const tt=this.cache,nt=_.length,it=allocTexUnits(_e,nt);arraysEqual(tt,it)||(et.uniform1iv(this.addr,it),copyArray(tt,it));for(let rt=0;rt!==nt;++rt)_e.setTextureCube(_[rt]||emptyCubeTexture,it[rt])}function setValueT2DArrayArray(et,_,_e){const tt=this.cache,nt=_.length,it=allocTexUnits(_e,nt);arraysEqual(tt,it)||(et.uniform1iv(this.addr,it),copyArray(tt,it));for(let rt=0;rt!==nt;++rt)_e.setTexture2DArray(_[rt]||emptyArrayTexture,it[rt])}function getPureArraySetter(et){switch(et){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,_e,tt){this.id=_,this.addr=tt,this.cache=[],this.setValue=getSingularSetter(_e.type)}}class PureArrayUniform{constructor(_,_e,tt){this.id=_,this.addr=tt,this.cache=[],this.size=_e.size,this.setValue=getPureArraySetter(_e.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,_e,tt){const nt=this.seq;for(let it=0,rt=nt.length;it!==rt;++it){const st=nt[it];st.setValue(_,_e[st.id],tt)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(et,_){et.seq.push(_),et.map[_.id]=_}function parseUniform(et,_,_e){const tt=et.name,nt=tt.length;for(RePathPart.lastIndex=0;;){const it=RePathPart.exec(tt),rt=RePathPart.lastIndex;let st=it[1];const ot=it[2]==="]",at=it[3];if(ot&&(st=st|0),at===void 0||at==="["&&rt+2===nt){addUniform(_e,at===void 0?new SingleUniform(st,et,_):new PureArrayUniform(st,et,_));break}else{let lt=_e.map[st];lt===void 0&&(lt=new StructuredUniform(st),addUniform(_e,lt)),_e=lt}}}class WebGLUniforms{constructor(_,_e){this.seq=[],this.map={};const tt=_.getProgramParameter(_e,35718);for(let nt=0;nt<tt;++nt){const it=_.getActiveUniform(_e,nt),rt=_.getUniformLocation(_e,it.name);parseUniform(it,rt,this)}}setValue(_,_e,tt,nt){const it=this.map[_e];it!==void 0&&it.setValue(_,tt,nt)}setOptional(_,_e,tt){const nt=_e[tt];nt!==void 0&&this.setValue(_,tt,nt)}static upload(_,_e,tt,nt){for(let it=0,rt=_e.length;it!==rt;++it){const st=_e[it],ot=tt[st.id];ot.needsUpdate!==!1&&st.setValue(_,ot.value,nt)}}static seqWithValue(_,_e){const tt=[];for(let nt=0,it=_.length;nt!==it;++nt){const rt=_[nt];rt.id in _e&&tt.push(rt)}return tt}}function WebGLShader(et,_,_e){const tt=et.createShader(_);return et.shaderSource(tt,_e),et.compileShader(tt),tt}let programIdCount=0;function handleSource(et,_){const _e=et.split(`
`),tt=[],nt=Math.max(_-6,0),it=Math.min(_+6,_e.length);for(let rt=nt;rt<it;rt++){const st=rt+1;tt.push(`${st===_?">":" "} ${st}: ${_e[rt]}`)}return tt.join(`
`)}function getEncodingComponents(et){switch(et){case LinearEncoding:return["Linear","( value )"];case sRGBEncoding:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",et),["Linear","( value )"]}}function getShaderErrors(et,_,_e){const tt=et.getShaderParameter(_,35713),nt=et.getShaderInfoLog(_).trim();if(tt&&nt==="")return"";const it=/ERROR: 0:(\d+)/.exec(nt);if(it){const rt=parseInt(it[1]);return _e.toUpperCase()+`

`+nt+`

`+handleSource(et.getShaderSource(_),rt)}else return nt}function getTexelEncodingFunction(et,_){const _e=getEncodingComponents(_);return"vec4 "+et+"( vec4 value ) { return LinearTo"+_e[0]+_e[1]+"; }"}function getToneMappingFunction(et,_){let _e;switch(_){case LinearToneMapping:_e="Linear";break;case ReinhardToneMapping:_e="Reinhard";break;case CineonToneMapping:_e="OptimizedCineon";break;case ACESFilmicToneMapping:_e="ACESFilmic";break;case CustomToneMapping:_e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",_),_e="Linear"}return"vec3 "+et+"( vec3 color ) { return "+_e+"ToneMapping( color ); }"}function generateExtensions(et){return[et.extensionDerivatives||et.envMapCubeUVHeight||et.bumpMap||et.tangentSpaceNormalMap||et.clearcoatNormalMap||et.flatShading||et.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(et.extensionFragDepth||et.logarithmicDepthBuffer)&&et.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",et.extensionDrawBuffers&&et.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(et.extensionShaderTextureLOD||et.envMap||et.transmission)&&et.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(et){const _=[];for(const _e in et){const tt=et[_e];tt!==!1&&_.push("#define "+_e+" "+tt)}return _.join(`
`)}function fetchAttributeLocations(et,_){const _e={},tt=et.getProgramParameter(_,35721);for(let nt=0;nt<tt;nt++){const it=et.getActiveAttrib(_,nt),rt=it.name;let st=1;it.type===35674&&(st=2),it.type===35675&&(st=3),it.type===35676&&(st=4),_e[rt]={type:it.type,location:et.getAttribLocation(_,rt),locationSize:st}}return _e}function filterEmptyLine(et){return et!==""}function replaceLightNums(et,_){const _e=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return et.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,_e).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(et,_){return et.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(et){return et.replace(includePattern,includeReplacer)}function includeReplacer(et,_){const _e=ShaderChunk[_];if(_e===void 0)throw new Error("Can not resolve #include <"+_+">");return resolveIncludes(_e)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(et){return et.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(et,_,_e,tt){let nt="";for(let it=parseInt(_);it<parseInt(_e);it++)nt+=tt.replace(/\[\s*i\s*\]/g,"[ "+it+" ]").replace(/UNROLLED_LOOP_INDEX/g,it);return nt}function generatePrecision(et){let _="precision "+et.precision+` float;
precision `+et.precision+" int;";return et.precision==="highp"?_+=`
#define HIGH_PRECISION`:et.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:et.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(et){let _="SHADOWMAP_TYPE_BASIC";return et.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":et.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":et.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(et){let _="ENVMAP_TYPE_CUBE";if(et.envMap)switch(et.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(et){let _="ENVMAP_MODE_REFLECTION";if(et.envMap)switch(et.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(et){let _="ENVMAP_BLENDING_NONE";if(et.envMap)switch(et.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(et){const _=et.envMapCubeUVHeight;if(_===null)return null;const _e=Math.log2(_)-2,tt=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,_e),7*16)),texelHeight:tt,maxMip:_e}}function WebGLProgram(et,_,_e,tt){const nt=et.getContext(),it=_e.defines;let rt=_e.vertexShader,st=_e.fragmentShader;const ot=generateShadowMapTypeDefine(_e),at=generateEnvMapTypeDefine(_e),At=generateEnvMapModeDefine(_e),lt=generateEnvMapBlendingDefine(_e),gt=generateCubeUVSize(_e),ct=_e.isWebGL2?"":generateExtensions(_e),dt=generateDefines(it),ht=nt.createProgram();let mt,Ct,ft=_e.glslVersion?"#version "+_e.glslVersion+`
`:"";_e.isRawShaderMaterial?(mt=[dt].filter(filterEmptyLine).join(`
`),mt.length>0&&(mt+=`
`),Ct=[ct,dt].filter(filterEmptyLine).join(`
`),Ct.length>0&&(Ct+=`
`)):(mt=[generatePrecision(_e),"#define SHADER_NAME "+_e.shaderName,dt,_e.instancing?"#define USE_INSTANCING":"",_e.instancingColor?"#define USE_INSTANCING_COLOR":"",_e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",_e.useFog&&_e.fog?"#define USE_FOG":"",_e.useFog&&_e.fogExp2?"#define FOG_EXP2":"",_e.map?"#define USE_MAP":"",_e.envMap?"#define USE_ENVMAP":"",_e.envMap?"#define "+At:"",_e.lightMap?"#define USE_LIGHTMAP":"",_e.aoMap?"#define USE_AOMAP":"",_e.emissiveMap?"#define USE_EMISSIVEMAP":"",_e.bumpMap?"#define USE_BUMPMAP":"",_e.normalMap?"#define USE_NORMALMAP":"",_e.normalMap&&_e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_e.normalMap&&_e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_e.clearcoatMap?"#define USE_CLEARCOATMAP":"",_e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_e.displacementMap&&_e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",_e.specularMap?"#define USE_SPECULARMAP":"",_e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",_e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",_e.roughnessMap?"#define USE_ROUGHNESSMAP":"",_e.metalnessMap?"#define USE_METALNESSMAP":"",_e.alphaMap?"#define USE_ALPHAMAP":"",_e.transmission?"#define USE_TRANSMISSION":"",_e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_e.thicknessMap?"#define USE_THICKNESSMAP":"",_e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",_e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",_e.vertexTangents?"#define USE_TANGENT":"",_e.vertexColors?"#define USE_COLOR":"",_e.vertexAlphas?"#define USE_COLOR_ALPHA":"",_e.vertexUvs?"#define USE_UV":"",_e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_e.flatShading?"#define FLAT_SHADED":"",_e.skinning?"#define USE_SKINNING":"",_e.morphTargets?"#define USE_MORPHTARGETS":"",_e.morphNormals&&_e.flatShading===!1?"#define USE_MORPHNORMALS":"",_e.morphColors&&_e.isWebGL2?"#define USE_MORPHCOLORS":"",_e.morphTargetsCount>0&&_e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",_e.morphTargetsCount>0&&_e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+_e.morphTextureStride:"",_e.morphTargetsCount>0&&_e.isWebGL2?"#define MORPHTARGETS_COUNT "+_e.morphTargetsCount:"",_e.doubleSided?"#define DOUBLE_SIDED":"",_e.flipSided?"#define FLIP_SIDED":"",_e.shadowMapEnabled?"#define USE_SHADOWMAP":"",_e.shadowMapEnabled?"#define "+ot:"",_e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",_e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_e.logarithmicDepthBuffer&&_e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ct=[ct,generatePrecision(_e),"#define SHADER_NAME "+_e.shaderName,dt,_e.useFog&&_e.fog?"#define USE_FOG":"",_e.useFog&&_e.fogExp2?"#define FOG_EXP2":"",_e.map?"#define USE_MAP":"",_e.matcap?"#define USE_MATCAP":"",_e.envMap?"#define USE_ENVMAP":"",_e.envMap?"#define "+at:"",_e.envMap?"#define "+At:"",_e.envMap?"#define "+lt:"",gt?"#define CUBEUV_TEXEL_WIDTH "+gt.texelWidth:"",gt?"#define CUBEUV_TEXEL_HEIGHT "+gt.texelHeight:"",gt?"#define CUBEUV_MAX_MIP "+gt.maxMip+".0":"",_e.lightMap?"#define USE_LIGHTMAP":"",_e.aoMap?"#define USE_AOMAP":"",_e.emissiveMap?"#define USE_EMISSIVEMAP":"",_e.bumpMap?"#define USE_BUMPMAP":"",_e.normalMap?"#define USE_NORMALMAP":"",_e.normalMap&&_e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",_e.normalMap&&_e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",_e.clearcoat?"#define USE_CLEARCOAT":"",_e.clearcoatMap?"#define USE_CLEARCOATMAP":"",_e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",_e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",_e.iridescence?"#define USE_IRIDESCENCE":"",_e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",_e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",_e.specularMap?"#define USE_SPECULARMAP":"",_e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",_e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",_e.roughnessMap?"#define USE_ROUGHNESSMAP":"",_e.metalnessMap?"#define USE_METALNESSMAP":"",_e.alphaMap?"#define USE_ALPHAMAP":"",_e.alphaTest?"#define USE_ALPHATEST":"",_e.sheen?"#define USE_SHEEN":"",_e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",_e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",_e.transmission?"#define USE_TRANSMISSION":"",_e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",_e.thicknessMap?"#define USE_THICKNESSMAP":"",_e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",_e.vertexTangents?"#define USE_TANGENT":"",_e.vertexColors||_e.instancingColor?"#define USE_COLOR":"",_e.vertexAlphas?"#define USE_COLOR_ALPHA":"",_e.vertexUvs?"#define USE_UV":"",_e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",_e.gradientMap?"#define USE_GRADIENTMAP":"",_e.flatShading?"#define FLAT_SHADED":"",_e.doubleSided?"#define DOUBLE_SIDED":"",_e.flipSided?"#define FLIP_SIDED":"",_e.shadowMapEnabled?"#define USE_SHADOWMAP":"",_e.shadowMapEnabled?"#define "+ot:"",_e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",_e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",_e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",_e.logarithmicDepthBuffer&&_e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",_e.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",_e.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",_e.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",_e.toneMapping):"",_e.dithering?"#define DITHERING":"",_e.opaque?"#define OPAQUE":"",ShaderChunk.encodings_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",_e.outputEncoding),_e.useDepthPacking?"#define DEPTH_PACKING "+_e.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),rt=resolveIncludes(rt),rt=replaceLightNums(rt,_e),rt=replaceClippingPlaneNums(rt,_e),st=resolveIncludes(st),st=replaceLightNums(st,_e),st=replaceClippingPlaneNums(st,_e),rt=unrollLoops(rt),st=unrollLoops(st),_e.isWebGL2&&_e.isRawShaderMaterial!==!0&&(ft=`#version 300 es
`,mt=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+mt,Ct=["#define varying in",_e.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",_e.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ct);const pt=ft+mt+rt,Vt=ft+Ct+st,yt=WebGLShader(nt,35633,pt),Gt=WebGLShader(nt,35632,Vt);if(nt.attachShader(ht,yt),nt.attachShader(ht,Gt),_e.index0AttributeName!==void 0?nt.bindAttribLocation(ht,0,_e.index0AttributeName):_e.morphTargets===!0&&nt.bindAttribLocation(ht,0,"position"),nt.linkProgram(ht),et.debug.checkShaderErrors){const wt=nt.getProgramInfoLog(ht).trim(),Mt=nt.getShaderInfoLog(yt).trim(),kt=nt.getShaderInfoLog(Gt).trim();let Nt=!0,Yt=!0;if(nt.getProgramParameter(ht,35714)===!1){Nt=!1;const Lt=getShaderErrors(nt,yt,"vertex"),Xt=getShaderErrors(nt,Gt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+nt.getError()+" - VALIDATE_STATUS "+nt.getProgramParameter(ht,35715)+`

Program Info Log: `+wt+`
`+Lt+`
`+Xt)}else wt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",wt):(Mt===""||kt==="")&&(Yt=!1);Yt&&(this.diagnostics={runnable:Nt,programLog:wt,vertexShader:{log:Mt,prefix:mt},fragmentShader:{log:kt,prefix:Ct}})}nt.deleteShader(yt),nt.deleteShader(Gt);let Bt;this.getUniforms=function(){return Bt===void 0&&(Bt=new WebGLUniforms(nt,ht)),Bt};let vt;return this.getAttributes=function(){return vt===void 0&&(vt=fetchAttributeLocations(nt,ht)),vt},this.destroy=function(){tt.releaseStatesOfProgram(this),nt.deleteProgram(ht),this.program=void 0},this.name=_e.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=ht,this.vertexShader=yt,this.fragmentShader=Gt,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const _e=_.vertexShader,tt=_.fragmentShader,nt=this._getShaderStage(_e),it=this._getShaderStage(tt),rt=this._getShaderCacheForMaterial(_);return rt.has(nt)===!1&&(rt.add(nt),nt.usedTimes++),rt.has(it)===!1&&(rt.add(it),it.usedTimes++),this}remove(_){const _e=this.materialCache.get(_);for(const tt of _e)tt.usedTimes--,tt.usedTimes===0&&this.shaderCache.delete(tt.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const _e=this.materialCache;let tt=_e.get(_);return tt===void 0&&(tt=new Set,_e.set(_,tt)),tt}_getShaderStage(_){const _e=this.shaderCache;let tt=_e.get(_);return tt===void 0&&(tt=new WebGLShaderStage(_),_e.set(_,tt)),tt}}class WebGLShaderStage{constructor(_){this.id=_id++,this.code=_,this.usedTimes=0}}function WebGLPrograms(et,_,_e,tt,nt,it,rt){const st=new Layers,ot=new WebGLShaderCache,at=[],At=nt.isWebGL2,lt=nt.logarithmicDepthBuffer,gt=nt.vertexTextures;let ct=nt.precision;const dt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ht(vt,wt,Mt,kt,Nt){const Yt=kt.fog,Lt=Nt.geometry,Xt=vt.isMeshStandardMaterial?kt.environment:null,_t=(vt.isMeshStandardMaterial?_e:_).get(vt.envMap||Xt),Tt=_t&&_t.mapping===CubeUVReflectionMapping?_t.image.height:null,St=dt[vt.type];vt.precision!==null&&(ct=nt.getMaxPrecision(vt.precision),ct!==vt.precision&&console.warn("THREE.WebGLProgram.getParameters:",vt.precision,"not supported, using",ct,"instead."));const Zt=Lt.morphAttributes.position||Lt.morphAttributes.normal||Lt.morphAttributes.color,Et=Zt!==void 0?Zt.length:0;let Wt=0;Lt.morphAttributes.position!==void 0&&(Wt=1),Lt.morphAttributes.normal!==void 0&&(Wt=2),Lt.morphAttributes.color!==void 0&&(Wt=3);let Ht,zt,Pt,Ot;if(St){const gn=ShaderLib[St];Ht=gn.vertexShader,zt=gn.fragmentShader}else Ht=vt.vertexShader,zt=vt.fragmentShader,ot.update(vt),Pt=ot.getVertexShaderID(vt),Ot=ot.getFragmentShaderID(vt);const Jt=et.getRenderTarget(),rn=vt.alphaTest>0,sn=vt.clearcoat>0,Vn=vt.iridescence>0;return{isWebGL2:At,shaderID:St,shaderName:vt.type,vertexShader:Ht,fragmentShader:zt,defines:vt.defines,customVertexShaderID:Pt,customFragmentShaderID:Ot,isRawShaderMaterial:vt.isRawShaderMaterial===!0,glslVersion:vt.glslVersion,precision:ct,instancing:Nt.isInstancedMesh===!0,instancingColor:Nt.isInstancedMesh===!0&&Nt.instanceColor!==null,supportsVertexTextures:gt,outputEncoding:Jt===null?et.outputEncoding:Jt.isXRRenderTarget===!0?Jt.texture.encoding:LinearEncoding,map:!!vt.map,matcap:!!vt.matcap,envMap:!!_t,envMapMode:_t&&_t.mapping,envMapCubeUVHeight:Tt,lightMap:!!vt.lightMap,aoMap:!!vt.aoMap,emissiveMap:!!vt.emissiveMap,bumpMap:!!vt.bumpMap,normalMap:!!vt.normalMap,objectSpaceNormalMap:vt.normalMapType===ObjectSpaceNormalMap,tangentSpaceNormalMap:vt.normalMapType===TangentSpaceNormalMap,decodeVideoTexture:!!vt.map&&vt.map.isVideoTexture===!0&&vt.map.encoding===sRGBEncoding,clearcoat:sn,clearcoatMap:sn&&!!vt.clearcoatMap,clearcoatRoughnessMap:sn&&!!vt.clearcoatRoughnessMap,clearcoatNormalMap:sn&&!!vt.clearcoatNormalMap,iridescence:Vn,iridescenceMap:Vn&&!!vt.iridescenceMap,iridescenceThicknessMap:Vn&&!!vt.iridescenceThicknessMap,displacementMap:!!vt.displacementMap,roughnessMap:!!vt.roughnessMap,metalnessMap:!!vt.metalnessMap,specularMap:!!vt.specularMap,specularIntensityMap:!!vt.specularIntensityMap,specularColorMap:!!vt.specularColorMap,opaque:vt.transparent===!1&&vt.blending===NormalBlending,alphaMap:!!vt.alphaMap,alphaTest:rn,gradientMap:!!vt.gradientMap,sheen:vt.sheen>0,sheenColorMap:!!vt.sheenColorMap,sheenRoughnessMap:!!vt.sheenRoughnessMap,transmission:vt.transmission>0,transmissionMap:!!vt.transmissionMap,thicknessMap:!!vt.thicknessMap,combine:vt.combine,vertexTangents:!!vt.normalMap&&!!Lt.attributes.tangent,vertexColors:vt.vertexColors,vertexAlphas:vt.vertexColors===!0&&!!Lt.attributes.color&&Lt.attributes.color.itemSize===4,vertexUvs:!!vt.map||!!vt.bumpMap||!!vt.normalMap||!!vt.specularMap||!!vt.alphaMap||!!vt.emissiveMap||!!vt.roughnessMap||!!vt.metalnessMap||!!vt.clearcoatMap||!!vt.clearcoatRoughnessMap||!!vt.clearcoatNormalMap||!!vt.iridescenceMap||!!vt.iridescenceThicknessMap||!!vt.displacementMap||!!vt.transmissionMap||!!vt.thicknessMap||!!vt.specularIntensityMap||!!vt.specularColorMap||!!vt.sheenColorMap||!!vt.sheenRoughnessMap,uvsVertexOnly:!(vt.map||vt.bumpMap||vt.normalMap||vt.specularMap||vt.alphaMap||vt.emissiveMap||vt.roughnessMap||vt.metalnessMap||vt.clearcoatNormalMap||vt.iridescenceMap||vt.iridescenceThicknessMap||vt.transmission>0||vt.transmissionMap||vt.thicknessMap||vt.specularIntensityMap||vt.specularColorMap||vt.sheen>0||vt.sheenColorMap||vt.sheenRoughnessMap)&&!!vt.displacementMap,fog:!!Yt,useFog:vt.fog===!0,fogExp2:Yt&&Yt.isFogExp2,flatShading:!!vt.flatShading,sizeAttenuation:vt.sizeAttenuation,logarithmicDepthBuffer:lt,skinning:Nt.isSkinnedMesh===!0,morphTargets:Lt.morphAttributes.position!==void 0,morphNormals:Lt.morphAttributes.normal!==void 0,morphColors:Lt.morphAttributes.color!==void 0,morphTargetsCount:Et,morphTextureStride:Wt,numDirLights:wt.directional.length,numPointLights:wt.point.length,numSpotLights:wt.spot.length,numSpotLightMaps:wt.spotLightMap.length,numRectAreaLights:wt.rectArea.length,numHemiLights:wt.hemi.length,numDirLightShadows:wt.directionalShadowMap.length,numPointLightShadows:wt.pointShadowMap.length,numSpotLightShadows:wt.spotShadowMap.length,numSpotLightShadowsWithMaps:wt.numSpotLightShadowsWithMaps,numClippingPlanes:rt.numPlanes,numClipIntersection:rt.numIntersection,dithering:vt.dithering,shadowMapEnabled:et.shadowMap.enabled&&Mt.length>0,shadowMapType:et.shadowMap.type,toneMapping:vt.toneMapped?et.toneMapping:NoToneMapping,physicallyCorrectLights:et.physicallyCorrectLights,premultipliedAlpha:vt.premultipliedAlpha,doubleSided:vt.side===DoubleSide,flipSided:vt.side===BackSide,useDepthPacking:!!vt.depthPacking,depthPacking:vt.depthPacking||0,index0AttributeName:vt.index0AttributeName,extensionDerivatives:vt.extensions&&vt.extensions.derivatives,extensionFragDepth:vt.extensions&&vt.extensions.fragDepth,extensionDrawBuffers:vt.extensions&&vt.extensions.drawBuffers,extensionShaderTextureLOD:vt.extensions&&vt.extensions.shaderTextureLOD,rendererExtensionFragDepth:At||tt.has("EXT_frag_depth"),rendererExtensionDrawBuffers:At||tt.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:At||tt.has("EXT_shader_texture_lod"),customProgramCacheKey:vt.customProgramCacheKey()}}function mt(vt){const wt=[];if(vt.shaderID?wt.push(vt.shaderID):(wt.push(vt.customVertexShaderID),wt.push(vt.customFragmentShaderID)),vt.defines!==void 0)for(const Mt in vt.defines)wt.push(Mt),wt.push(vt.defines[Mt]);return vt.isRawShaderMaterial===!1&&(Ct(wt,vt),ft(wt,vt),wt.push(et.outputEncoding)),wt.push(vt.customProgramCacheKey),wt.join()}function Ct(vt,wt){vt.push(wt.precision),vt.push(wt.outputEncoding),vt.push(wt.envMapMode),vt.push(wt.envMapCubeUVHeight),vt.push(wt.combine),vt.push(wt.vertexUvs),vt.push(wt.fogExp2),vt.push(wt.sizeAttenuation),vt.push(wt.morphTargetsCount),vt.push(wt.morphAttributeCount),vt.push(wt.numDirLights),vt.push(wt.numPointLights),vt.push(wt.numSpotLights),vt.push(wt.numSpotLightMaps),vt.push(wt.numHemiLights),vt.push(wt.numRectAreaLights),vt.push(wt.numDirLightShadows),vt.push(wt.numPointLightShadows),vt.push(wt.numSpotLightShadows),vt.push(wt.numSpotLightShadowsWithMaps),vt.push(wt.shadowMapType),vt.push(wt.toneMapping),vt.push(wt.numClippingPlanes),vt.push(wt.numClipIntersection),vt.push(wt.depthPacking)}function ft(vt,wt){st.disableAll(),wt.isWebGL2&&st.enable(0),wt.supportsVertexTextures&&st.enable(1),wt.instancing&&st.enable(2),wt.instancingColor&&st.enable(3),wt.map&&st.enable(4),wt.matcap&&st.enable(5),wt.envMap&&st.enable(6),wt.lightMap&&st.enable(7),wt.aoMap&&st.enable(8),wt.emissiveMap&&st.enable(9),wt.bumpMap&&st.enable(10),wt.normalMap&&st.enable(11),wt.objectSpaceNormalMap&&st.enable(12),wt.tangentSpaceNormalMap&&st.enable(13),wt.clearcoat&&st.enable(14),wt.clearcoatMap&&st.enable(15),wt.clearcoatRoughnessMap&&st.enable(16),wt.clearcoatNormalMap&&st.enable(17),wt.iridescence&&st.enable(18),wt.iridescenceMap&&st.enable(19),wt.iridescenceThicknessMap&&st.enable(20),wt.displacementMap&&st.enable(21),wt.specularMap&&st.enable(22),wt.roughnessMap&&st.enable(23),wt.metalnessMap&&st.enable(24),wt.gradientMap&&st.enable(25),wt.alphaMap&&st.enable(26),wt.alphaTest&&st.enable(27),wt.vertexColors&&st.enable(28),wt.vertexAlphas&&st.enable(29),wt.vertexUvs&&st.enable(30),wt.vertexTangents&&st.enable(31),wt.uvsVertexOnly&&st.enable(32),vt.push(st.mask),st.disableAll(),wt.fog&&st.enable(0),wt.useFog&&st.enable(1),wt.flatShading&&st.enable(2),wt.logarithmicDepthBuffer&&st.enable(3),wt.skinning&&st.enable(4),wt.morphTargets&&st.enable(5),wt.morphNormals&&st.enable(6),wt.morphColors&&st.enable(7),wt.premultipliedAlpha&&st.enable(8),wt.shadowMapEnabled&&st.enable(9),wt.physicallyCorrectLights&&st.enable(10),wt.doubleSided&&st.enable(11),wt.flipSided&&st.enable(12),wt.useDepthPacking&&st.enable(13),wt.dithering&&st.enable(14),wt.specularIntensityMap&&st.enable(15),wt.specularColorMap&&st.enable(16),wt.transmission&&st.enable(17),wt.transmissionMap&&st.enable(18),wt.thicknessMap&&st.enable(19),wt.sheen&&st.enable(20),wt.sheenColorMap&&st.enable(21),wt.sheenRoughnessMap&&st.enable(22),wt.decodeVideoTexture&&st.enable(23),wt.opaque&&st.enable(24),vt.push(st.mask)}function pt(vt){const wt=dt[vt.type];let Mt;if(wt){const kt=ShaderLib[wt];Mt=UniformsUtils.clone(kt.uniforms)}else Mt=vt.uniforms;return Mt}function Vt(vt,wt){let Mt;for(let kt=0,Nt=at.length;kt<Nt;kt++){const Yt=at[kt];if(Yt.cacheKey===wt){Mt=Yt,++Mt.usedTimes;break}}return Mt===void 0&&(Mt=new WebGLProgram(et,wt,vt,it),at.push(Mt)),Mt}function yt(vt){if(--vt.usedTimes===0){const wt=at.indexOf(vt);at[wt]=at[at.length-1],at.pop(),vt.destroy()}}function Gt(vt){ot.remove(vt)}function Bt(){ot.dispose()}return{getParameters:ht,getProgramCacheKey:mt,getUniforms:pt,acquireProgram:Vt,releaseProgram:yt,releaseShaderCache:Gt,programs:at,dispose:Bt}}function WebGLProperties(){let et=new WeakMap;function _(it){let rt=et.get(it);return rt===void 0&&(rt={},et.set(it,rt)),rt}function _e(it){et.delete(it)}function tt(it,rt,st){et.get(it)[rt]=st}function nt(){et=new WeakMap}return{get:_,remove:_e,update:tt,dispose:nt}}function painterSortStable(et,_){return et.groupOrder!==_.groupOrder?et.groupOrder-_.groupOrder:et.renderOrder!==_.renderOrder?et.renderOrder-_.renderOrder:et.material.id!==_.material.id?et.material.id-_.material.id:et.z!==_.z?et.z-_.z:et.id-_.id}function reversePainterSortStable(et,_){return et.groupOrder!==_.groupOrder?et.groupOrder-_.groupOrder:et.renderOrder!==_.renderOrder?et.renderOrder-_.renderOrder:et.z!==_.z?_.z-et.z:et.id-_.id}function WebGLRenderList(){const et=[];let _=0;const _e=[],tt=[],nt=[];function it(){_=0,_e.length=0,tt.length=0,nt.length=0}function rt(lt,gt,ct,dt,ht,mt){let Ct=et[_];return Ct===void 0?(Ct={id:lt.id,object:lt,geometry:gt,material:ct,groupOrder:dt,renderOrder:lt.renderOrder,z:ht,group:mt},et[_]=Ct):(Ct.id=lt.id,Ct.object=lt,Ct.geometry=gt,Ct.material=ct,Ct.groupOrder=dt,Ct.renderOrder=lt.renderOrder,Ct.z=ht,Ct.group=mt),_++,Ct}function st(lt,gt,ct,dt,ht,mt){const Ct=rt(lt,gt,ct,dt,ht,mt);ct.transmission>0?tt.push(Ct):ct.transparent===!0?nt.push(Ct):_e.push(Ct)}function ot(lt,gt,ct,dt,ht,mt){const Ct=rt(lt,gt,ct,dt,ht,mt);ct.transmission>0?tt.unshift(Ct):ct.transparent===!0?nt.unshift(Ct):_e.unshift(Ct)}function at(lt,gt){_e.length>1&&_e.sort(lt||painterSortStable),tt.length>1&&tt.sort(gt||reversePainterSortStable),nt.length>1&&nt.sort(gt||reversePainterSortStable)}function At(){for(let lt=_,gt=et.length;lt<gt;lt++){const ct=et[lt];if(ct.id===null)break;ct.id=null,ct.object=null,ct.geometry=null,ct.material=null,ct.group=null}}return{opaque:_e,transmissive:tt,transparent:nt,init:it,push:st,unshift:ot,finish:At,sort:at}}function WebGLRenderLists(){let et=new WeakMap;function _(tt,nt){const it=et.get(tt);let rt;return it===void 0?(rt=new WebGLRenderList,et.set(tt,[rt])):nt>=it.length?(rt=new WebGLRenderList,it.push(rt)):rt=it[nt],rt}function _e(){et=new WeakMap}return{get:_,dispose:_e}}function UniformsCache(){const et={};return{get:function(_){if(et[_.id]!==void 0)return et[_.id];let _e;switch(_.type){case"DirectionalLight":_e={direction:new Vector3,color:new Color};break;case"SpotLight":_e={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":_e={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":_e={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":_e={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return et[_.id]=_e,_e}}}function ShadowUniformsCache(){const et={};return{get:function(_){if(et[_.id]!==void 0)return et[_.id];let _e;switch(_.type){case"DirectionalLight":_e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":_e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":_e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return et[_.id]=_e,_e}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(et,_){return(_.castShadow?2:0)-(et.castShadow?2:0)+(_.map?1:0)-(et.map?1:0)}function WebGLLights(et,_){const _e=new UniformsCache,tt=ShadowUniformsCache(),nt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let At=0;At<9;At++)nt.probe.push(new Vector3);const it=new Vector3,rt=new Matrix4,st=new Matrix4;function ot(At,lt){let gt=0,ct=0,dt=0;for(let kt=0;kt<9;kt++)nt.probe[kt].set(0,0,0);let ht=0,mt=0,Ct=0,ft=0,pt=0,Vt=0,yt=0,Gt=0,Bt=0,vt=0;At.sort(shadowCastingAndTexturingLightsFirst);const wt=lt!==!0?Math.PI:1;for(let kt=0,Nt=At.length;kt<Nt;kt++){const Yt=At[kt],Lt=Yt.color,Xt=Yt.intensity,_t=Yt.distance,Tt=Yt.shadow&&Yt.shadow.map?Yt.shadow.map.texture:null;if(Yt.isAmbientLight)gt+=Lt.r*Xt*wt,ct+=Lt.g*Xt*wt,dt+=Lt.b*Xt*wt;else if(Yt.isLightProbe)for(let St=0;St<9;St++)nt.probe[St].addScaledVector(Yt.sh.coefficients[St],Xt);else if(Yt.isDirectionalLight){const St=_e.get(Yt);if(St.color.copy(Yt.color).multiplyScalar(Yt.intensity*wt),Yt.castShadow){const Zt=Yt.shadow,Et=tt.get(Yt);Et.shadowBias=Zt.bias,Et.shadowNormalBias=Zt.normalBias,Et.shadowRadius=Zt.radius,Et.shadowMapSize=Zt.mapSize,nt.directionalShadow[ht]=Et,nt.directionalShadowMap[ht]=Tt,nt.directionalShadowMatrix[ht]=Yt.shadow.matrix,Vt++}nt.directional[ht]=St,ht++}else if(Yt.isSpotLight){const St=_e.get(Yt);St.position.setFromMatrixPosition(Yt.matrixWorld),St.color.copy(Lt).multiplyScalar(Xt*wt),St.distance=_t,St.coneCos=Math.cos(Yt.angle),St.penumbraCos=Math.cos(Yt.angle*(1-Yt.penumbra)),St.decay=Yt.decay,nt.spot[Ct]=St;const Zt=Yt.shadow;if(Yt.map&&(nt.spotLightMap[Bt]=Yt.map,Bt++,Zt.updateMatrices(Yt),Yt.castShadow&&vt++),nt.spotLightMatrix[Ct]=Zt.matrix,Yt.castShadow){const Et=tt.get(Yt);Et.shadowBias=Zt.bias,Et.shadowNormalBias=Zt.normalBias,Et.shadowRadius=Zt.radius,Et.shadowMapSize=Zt.mapSize,nt.spotShadow[Ct]=Et,nt.spotShadowMap[Ct]=Tt,Gt++}Ct++}else if(Yt.isRectAreaLight){const St=_e.get(Yt);St.color.copy(Lt).multiplyScalar(Xt),St.halfWidth.set(Yt.width*.5,0,0),St.halfHeight.set(0,Yt.height*.5,0),nt.rectArea[ft]=St,ft++}else if(Yt.isPointLight){const St=_e.get(Yt);if(St.color.copy(Yt.color).multiplyScalar(Yt.intensity*wt),St.distance=Yt.distance,St.decay=Yt.decay,Yt.castShadow){const Zt=Yt.shadow,Et=tt.get(Yt);Et.shadowBias=Zt.bias,Et.shadowNormalBias=Zt.normalBias,Et.shadowRadius=Zt.radius,Et.shadowMapSize=Zt.mapSize,Et.shadowCameraNear=Zt.camera.near,Et.shadowCameraFar=Zt.camera.far,nt.pointShadow[mt]=Et,nt.pointShadowMap[mt]=Tt,nt.pointShadowMatrix[mt]=Yt.shadow.matrix,yt++}nt.point[mt]=St,mt++}else if(Yt.isHemisphereLight){const St=_e.get(Yt);St.skyColor.copy(Yt.color).multiplyScalar(Xt*wt),St.groundColor.copy(Yt.groundColor).multiplyScalar(Xt*wt),nt.hemi[pt]=St,pt++}}ft>0&&(_.isWebGL2||et.has("OES_texture_float_linear")===!0?(nt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,nt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):et.has("OES_texture_half_float_linear")===!0?(nt.rectAreaLTC1=UniformsLib.LTC_HALF_1,nt.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),nt.ambient[0]=gt,nt.ambient[1]=ct,nt.ambient[2]=dt;const Mt=nt.hash;(Mt.directionalLength!==ht||Mt.pointLength!==mt||Mt.spotLength!==Ct||Mt.rectAreaLength!==ft||Mt.hemiLength!==pt||Mt.numDirectionalShadows!==Vt||Mt.numPointShadows!==yt||Mt.numSpotShadows!==Gt||Mt.numSpotMaps!==Bt)&&(nt.directional.length=ht,nt.spot.length=Ct,nt.rectArea.length=ft,nt.point.length=mt,nt.hemi.length=pt,nt.directionalShadow.length=Vt,nt.directionalShadowMap.length=Vt,nt.pointShadow.length=yt,nt.pointShadowMap.length=yt,nt.spotShadow.length=Gt,nt.spotShadowMap.length=Gt,nt.directionalShadowMatrix.length=Vt,nt.pointShadowMatrix.length=yt,nt.spotLightMatrix.length=Gt+Bt-vt,nt.spotLightMap.length=Bt,nt.numSpotLightShadowsWithMaps=vt,Mt.directionalLength=ht,Mt.pointLength=mt,Mt.spotLength=Ct,Mt.rectAreaLength=ft,Mt.hemiLength=pt,Mt.numDirectionalShadows=Vt,Mt.numPointShadows=yt,Mt.numSpotShadows=Gt,Mt.numSpotMaps=Bt,nt.version=nextVersion++)}function at(At,lt){let gt=0,ct=0,dt=0,ht=0,mt=0;const Ct=lt.matrixWorldInverse;for(let ft=0,pt=At.length;ft<pt;ft++){const Vt=At[ft];if(Vt.isDirectionalLight){const yt=nt.directional[gt];yt.direction.setFromMatrixPosition(Vt.matrixWorld),it.setFromMatrixPosition(Vt.target.matrixWorld),yt.direction.sub(it),yt.direction.transformDirection(Ct),gt++}else if(Vt.isSpotLight){const yt=nt.spot[dt];yt.position.setFromMatrixPosition(Vt.matrixWorld),yt.position.applyMatrix4(Ct),yt.direction.setFromMatrixPosition(Vt.matrixWorld),it.setFromMatrixPosition(Vt.target.matrixWorld),yt.direction.sub(it),yt.direction.transformDirection(Ct),dt++}else if(Vt.isRectAreaLight){const yt=nt.rectArea[ht];yt.position.setFromMatrixPosition(Vt.matrixWorld),yt.position.applyMatrix4(Ct),st.identity(),rt.copy(Vt.matrixWorld),rt.premultiply(Ct),st.extractRotation(rt),yt.halfWidth.set(Vt.width*.5,0,0),yt.halfHeight.set(0,Vt.height*.5,0),yt.halfWidth.applyMatrix4(st),yt.halfHeight.applyMatrix4(st),ht++}else if(Vt.isPointLight){const yt=nt.point[ct];yt.position.setFromMatrixPosition(Vt.matrixWorld),yt.position.applyMatrix4(Ct),ct++}else if(Vt.isHemisphereLight){const yt=nt.hemi[mt];yt.direction.setFromMatrixPosition(Vt.matrixWorld),yt.direction.transformDirection(Ct),mt++}}}return{setup:ot,setupView:at,state:nt}}function WebGLRenderState(et,_){const _e=new WebGLLights(et,_),tt=[],nt=[];function it(){tt.length=0,nt.length=0}function rt(lt){tt.push(lt)}function st(lt){nt.push(lt)}function ot(lt){_e.setup(tt,lt)}function at(lt){_e.setupView(tt,lt)}return{init:it,state:{lightsArray:tt,shadowsArray:nt,lights:_e},setupLights:ot,setupLightsView:at,pushLight:rt,pushShadow:st}}function WebGLRenderStates(et,_){let _e=new WeakMap;function tt(it,rt=0){const st=_e.get(it);let ot;return st===void 0?(ot=new WebGLRenderState(et,_),_e.set(it,[ot])):rt>=st.length?(ot=new WebGLRenderState(et,_),st.push(ot)):ot=st[rt],ot}function nt(){_e=new WeakMap}return{get:tt,dispose:nt}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.referencePosition.copy(_.referencePosition),this.nearDistance=_.nearDistance,this.farDistance=_.farDistance,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(et,_,_e){let tt=new Frustum;const nt=new Vector2,it=new Vector2,rt=new Vector4,st=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ot=new MeshDistanceMaterial,at={},At=_e.maxTextureSize,lt={0:BackSide,1:FrontSide,2:DoubleSide},gt=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),ct=gt.clone();ct.defines.HORIZONTAL_PASS=1;const dt=new BufferGeometry;dt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ht=new Mesh(dt,gt),mt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap,this.render=function(Vt,yt,Gt){if(mt.enabled===!1||mt.autoUpdate===!1&&mt.needsUpdate===!1||Vt.length===0)return;const Bt=et.getRenderTarget(),vt=et.getActiveCubeFace(),wt=et.getActiveMipmapLevel(),Mt=et.state;Mt.setBlending(NoBlending),Mt.buffers.color.setClear(1,1,1,1),Mt.buffers.depth.setTest(!0),Mt.setScissorTest(!1);for(let kt=0,Nt=Vt.length;kt<Nt;kt++){const Yt=Vt[kt],Lt=Yt.shadow;if(Lt===void 0){console.warn("THREE.WebGLShadowMap:",Yt,"has no shadow.");continue}if(Lt.autoUpdate===!1&&Lt.needsUpdate===!1)continue;nt.copy(Lt.mapSize);const Xt=Lt.getFrameExtents();if(nt.multiply(Xt),it.copy(Lt.mapSize),(nt.x>At||nt.y>At)&&(nt.x>At&&(it.x=Math.floor(At/Xt.x),nt.x=it.x*Xt.x,Lt.mapSize.x=it.x),nt.y>At&&(it.y=Math.floor(At/Xt.y),nt.y=it.y*Xt.y,Lt.mapSize.y=it.y)),Lt.map===null){const Tt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Lt.map=new WebGLRenderTarget(nt.x,nt.y,Tt),Lt.map.texture.name=Yt.name+".shadowMap",Lt.camera.updateProjectionMatrix()}et.setRenderTarget(Lt.map),et.clear();const _t=Lt.getViewportCount();for(let Tt=0;Tt<_t;Tt++){const St=Lt.getViewport(Tt);rt.set(it.x*St.x,it.y*St.y,it.x*St.z,it.y*St.w),Mt.viewport(rt),Lt.updateMatrices(Yt,Tt),tt=Lt.getFrustum(),pt(yt,Gt,Lt.camera,Yt,this.type)}Lt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&Ct(Lt,Gt),Lt.needsUpdate=!1}mt.needsUpdate=!1,et.setRenderTarget(Bt,vt,wt)};function Ct(Vt,yt){const Gt=_.update(ht);gt.defines.VSM_SAMPLES!==Vt.blurSamples&&(gt.defines.VSM_SAMPLES=Vt.blurSamples,ct.defines.VSM_SAMPLES=Vt.blurSamples,gt.needsUpdate=!0,ct.needsUpdate=!0),Vt.mapPass===null&&(Vt.mapPass=new WebGLRenderTarget(nt.x,nt.y)),gt.uniforms.shadow_pass.value=Vt.map.texture,gt.uniforms.resolution.value=Vt.mapSize,gt.uniforms.radius.value=Vt.radius,et.setRenderTarget(Vt.mapPass),et.clear(),et.renderBufferDirect(yt,null,Gt,gt,ht,null),ct.uniforms.shadow_pass.value=Vt.mapPass.texture,ct.uniforms.resolution.value=Vt.mapSize,ct.uniforms.radius.value=Vt.radius,et.setRenderTarget(Vt.map),et.clear(),et.renderBufferDirect(yt,null,Gt,ct,ht,null)}function ft(Vt,yt,Gt,Bt,vt,wt){let Mt=null;const kt=Gt.isPointLight===!0?Vt.customDistanceMaterial:Vt.customDepthMaterial;if(kt!==void 0)Mt=kt;else if(Mt=Gt.isPointLight===!0?ot:st,et.localClippingEnabled&&yt.clipShadows===!0&&Array.isArray(yt.clippingPlanes)&&yt.clippingPlanes.length!==0||yt.displacementMap&&yt.displacementScale!==0||yt.alphaMap&&yt.alphaTest>0||yt.map&&yt.alphaTest>0){const Nt=Mt.uuid,Yt=yt.uuid;let Lt=at[Nt];Lt===void 0&&(Lt={},at[Nt]=Lt);let Xt=Lt[Yt];Xt===void 0&&(Xt=Mt.clone(),Lt[Yt]=Xt),Mt=Xt}return Mt.visible=yt.visible,Mt.wireframe=yt.wireframe,wt===VSMShadowMap?Mt.side=yt.shadowSide!==null?yt.shadowSide:yt.side:Mt.side=yt.shadowSide!==null?yt.shadowSide:lt[yt.side],Mt.alphaMap=yt.alphaMap,Mt.alphaTest=yt.alphaTest,Mt.map=yt.map,Mt.clipShadows=yt.clipShadows,Mt.clippingPlanes=yt.clippingPlanes,Mt.clipIntersection=yt.clipIntersection,Mt.displacementMap=yt.displacementMap,Mt.displacementScale=yt.displacementScale,Mt.displacementBias=yt.displacementBias,Mt.wireframeLinewidth=yt.wireframeLinewidth,Mt.linewidth=yt.linewidth,Gt.isPointLight===!0&&Mt.isMeshDistanceMaterial===!0&&(Mt.referencePosition.setFromMatrixPosition(Gt.matrixWorld),Mt.nearDistance=Bt,Mt.farDistance=vt),Mt}function pt(Vt,yt,Gt,Bt,vt){if(Vt.visible===!1)return;if(Vt.layers.test(yt.layers)&&(Vt.isMesh||Vt.isLine||Vt.isPoints)&&(Vt.castShadow||Vt.receiveShadow&&vt===VSMShadowMap)&&(!Vt.frustumCulled||tt.intersectsObject(Vt))){Vt.modelViewMatrix.multiplyMatrices(Gt.matrixWorldInverse,Vt.matrixWorld);const kt=_.update(Vt),Nt=Vt.material;if(Array.isArray(Nt)){const Yt=kt.groups;for(let Lt=0,Xt=Yt.length;Lt<Xt;Lt++){const _t=Yt[Lt],Tt=Nt[_t.materialIndex];if(Tt&&Tt.visible){const St=ft(Vt,Tt,Bt,Gt.near,Gt.far,vt);et.renderBufferDirect(Gt,null,kt,St,Vt,_t)}}}else if(Nt.visible){const Yt=ft(Vt,Nt,Bt,Gt.near,Gt.far,vt);et.renderBufferDirect(Gt,null,kt,Yt,Vt,null)}}const Mt=Vt.children;for(let kt=0,Nt=Mt.length;kt<Nt;kt++)pt(Mt[kt],yt,Gt,Bt,vt)}}function WebGLState(et,_,_e){const tt=_e.isWebGL2;function nt(){let qt=!1;const hn=new Vector4;let Wn=null;const Ln=new Vector4(0,0,0,0);return{setMask:function(Kn){Wn!==Kn&&!qt&&(et.colorMask(Kn,Kn,Kn,Kn),Wn=Kn)},setLocked:function(Kn){qt=Kn},setClear:function(Kn,tr,ur,pr,Ir){Ir===!0&&(Kn*=pr,tr*=pr,ur*=pr),hn.set(Kn,tr,ur,pr),Ln.equals(hn)===!1&&(et.clearColor(Kn,tr,ur,pr),Ln.copy(hn))},reset:function(){qt=!1,Wn=null,Ln.set(-1,0,0,0)}}}function it(){let qt=!1,hn=null,Wn=null,Ln=null;return{setTest:function(Kn){Kn?rn(2929):sn(2929)},setMask:function(Kn){hn!==Kn&&!qt&&(et.depthMask(Kn),hn=Kn)},setFunc:function(Kn){if(Wn!==Kn){switch(Kn){case NeverDepth:et.depthFunc(512);break;case AlwaysDepth:et.depthFunc(519);break;case LessDepth:et.depthFunc(513);break;case LessEqualDepth:et.depthFunc(515);break;case EqualDepth:et.depthFunc(514);break;case GreaterEqualDepth:et.depthFunc(518);break;case GreaterDepth:et.depthFunc(516);break;case NotEqualDepth:et.depthFunc(517);break;default:et.depthFunc(515)}Wn=Kn}},setLocked:function(Kn){qt=Kn},setClear:function(Kn){Ln!==Kn&&(et.clearDepth(Kn),Ln=Kn)},reset:function(){qt=!1,hn=null,Wn=null,Ln=null}}}function rt(){let qt=!1,hn=null,Wn=null,Ln=null,Kn=null,tr=null,ur=null,pr=null,Ir=null;return{setTest:function(Cr){qt||(Cr?rn(2960):sn(2960))},setMask:function(Cr){hn!==Cr&&!qt&&(et.stencilMask(Cr),hn=Cr)},setFunc:function(Cr,dr,cr){(Wn!==Cr||Ln!==dr||Kn!==cr)&&(et.stencilFunc(Cr,dr,cr),Wn=Cr,Ln=dr,Kn=cr)},setOp:function(Cr,dr,cr){(tr!==Cr||ur!==dr||pr!==cr)&&(et.stencilOp(Cr,dr,cr),tr=Cr,ur=dr,pr=cr)},setLocked:function(Cr){qt=Cr},setClear:function(Cr){Ir!==Cr&&(et.clearStencil(Cr),Ir=Cr)},reset:function(){qt=!1,hn=null,Wn=null,Ln=null,Kn=null,tr=null,ur=null,pr=null,Ir=null}}}const st=new nt,ot=new it,at=new rt,At=new WeakMap,lt=new WeakMap;let gt={},ct={},dt=new WeakMap,ht=[],mt=null,Ct=!1,ft=null,pt=null,Vt=null,yt=null,Gt=null,Bt=null,vt=null,wt=!1,Mt=null,kt=null,Nt=null,Yt=null,Lt=null;const Xt=et.getParameter(35661);let _t=!1,Tt=0;const St=et.getParameter(7938);St.indexOf("WebGL")!==-1?(Tt=parseFloat(/^WebGL (\d)/.exec(St)[1]),_t=Tt>=1):St.indexOf("OpenGL ES")!==-1&&(Tt=parseFloat(/^OpenGL ES (\d)/.exec(St)[1]),_t=Tt>=2);let Zt=null,Et={};const Wt=et.getParameter(3088),Ht=et.getParameter(2978),zt=new Vector4().fromArray(Wt),Pt=new Vector4().fromArray(Ht);function Ot(qt,hn,Wn){const Ln=new Uint8Array(4),Kn=et.createTexture();et.bindTexture(qt,Kn),et.texParameteri(qt,10241,9728),et.texParameteri(qt,10240,9728);for(let tr=0;tr<Wn;tr++)et.texImage2D(hn+tr,0,6408,1,1,0,6408,5121,Ln);return Kn}const Jt={};Jt[3553]=Ot(3553,3553,1),Jt[34067]=Ot(34067,34069,6),st.setClear(0,0,0,1),ot.setClear(1),at.setClear(0),rn(2929),ot.setFunc(LessEqualDepth),Gn(!1),kn(CullFaceBack),rn(2884),nn(NoBlending);function rn(qt){gt[qt]!==!0&&(et.enable(qt),gt[qt]=!0)}function sn(qt){gt[qt]!==!1&&(et.disable(qt),gt[qt]=!1)}function Vn(qt,hn){return ct[qt]!==hn?(et.bindFramebuffer(qt,hn),ct[qt]=hn,tt&&(qt===36009&&(ct[36160]=hn),qt===36160&&(ct[36009]=hn)),!0):!1}function dn(qt,hn){let Wn=ht,Ln=!1;if(qt)if(Wn=dt.get(hn),Wn===void 0&&(Wn=[],dt.set(hn,Wn)),qt.isWebGLMultipleRenderTargets){const Kn=qt.texture;if(Wn.length!==Kn.length||Wn[0]!==36064){for(let tr=0,ur=Kn.length;tr<ur;tr++)Wn[tr]=36064+tr;Wn.length=Kn.length,Ln=!0}}else Wn[0]!==36064&&(Wn[0]=36064,Ln=!0);else Wn[0]!==1029&&(Wn[0]=1029,Ln=!0);Ln&&(_e.isWebGL2?et.drawBuffers(Wn):_.get("WEBGL_draw_buffers").drawBuffersWEBGL(Wn))}function gn(qt){return mt!==qt?(et.useProgram(qt),mt=qt,!0):!1}const $t={[AddEquation]:32774,[SubtractEquation]:32778,[ReverseSubtractEquation]:32779};if(tt)$t[MinEquation]=32775,$t[MaxEquation]=32776;else{const qt=_.get("EXT_blend_minmax");qt!==null&&($t[MinEquation]=qt.MIN_EXT,$t[MaxEquation]=qt.MAX_EXT)}const tn={[ZeroFactor]:0,[OneFactor]:1,[SrcColorFactor]:768,[SrcAlphaFactor]:770,[SrcAlphaSaturateFactor]:776,[DstColorFactor]:774,[DstAlphaFactor]:772,[OneMinusSrcColorFactor]:769,[OneMinusSrcAlphaFactor]:771,[OneMinusDstColorFactor]:775,[OneMinusDstAlphaFactor]:773};function nn(qt,hn,Wn,Ln,Kn,tr,ur,pr){if(qt===NoBlending){Ct===!0&&(sn(3042),Ct=!1);return}if(Ct===!1&&(rn(3042),Ct=!0),qt!==CustomBlending){if(qt!==ft||pr!==wt){if((pt!==AddEquation||Gt!==AddEquation)&&(et.blendEquation(32774),pt=AddEquation,Gt=AddEquation),pr)switch(qt){case NormalBlending:et.blendFuncSeparate(1,771,1,771);break;case AdditiveBlending:et.blendFunc(1,1);break;case SubtractiveBlending:et.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:et.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",qt);break}else switch(qt){case NormalBlending:et.blendFuncSeparate(770,771,1,771);break;case AdditiveBlending:et.blendFunc(770,1);break;case SubtractiveBlending:et.blendFuncSeparate(0,769,0,1);break;case MultiplyBlending:et.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",qt);break}Vt=null,yt=null,Bt=null,vt=null,ft=qt,wt=pr}return}Kn=Kn||hn,tr=tr||Wn,ur=ur||Ln,(hn!==pt||Kn!==Gt)&&(et.blendEquationSeparate($t[hn],$t[Kn]),pt=hn,Gt=Kn),(Wn!==Vt||Ln!==yt||tr!==Bt||ur!==vt)&&(et.blendFuncSeparate(tn[Wn],tn[Ln],tn[tr],tn[ur]),Vt=Wn,yt=Ln,Bt=tr,vt=ur),ft=qt,wt=!1}function Bn(qt,hn){qt.side===DoubleSide?sn(2884):rn(2884);let Wn=qt.side===BackSide;hn&&(Wn=!Wn),Gn(Wn),qt.blending===NormalBlending&&qt.transparent===!1?nn(NoBlending):nn(qt.blending,qt.blendEquation,qt.blendSrc,qt.blendDst,qt.blendEquationAlpha,qt.blendSrcAlpha,qt.blendDstAlpha,qt.premultipliedAlpha),ot.setFunc(qt.depthFunc),ot.setTest(qt.depthTest),ot.setMask(qt.depthWrite),st.setMask(qt.colorWrite);const Ln=qt.stencilWrite;at.setTest(Ln),Ln&&(at.setMask(qt.stencilWriteMask),at.setFunc(qt.stencilFunc,qt.stencilRef,qt.stencilFuncMask),at.setOp(qt.stencilFail,qt.stencilZFail,qt.stencilZPass)),Rn(qt.polygonOffset,qt.polygonOffsetFactor,qt.polygonOffsetUnits),qt.alphaToCoverage===!0?rn(32926):sn(32926)}function Gn(qt){Mt!==qt&&(qt?et.frontFace(2304):et.frontFace(2305),Mt=qt)}function kn(qt){qt!==CullFaceNone?(rn(2884),qt!==kt&&(qt===CullFaceBack?et.cullFace(1029):qt===CullFaceFront?et.cullFace(1028):et.cullFace(1032))):sn(2884),kt=qt}function pn(qt){qt!==Nt&&(_t&&et.lineWidth(qt),Nt=qt)}function Rn(qt,hn,Wn){qt?(rn(32823),(Yt!==hn||Lt!==Wn)&&(et.polygonOffset(hn,Wn),Yt=hn,Lt=Wn)):sn(32823)}function Mn(qt){qt?rn(3089):sn(3089)}function In(qt){qt===void 0&&(qt=33984+Xt-1),Zt!==qt&&(et.activeTexture(qt),Zt=qt)}function Dt(qt,hn,Wn){Wn===void 0&&(Zt===null?Wn=33984+Xt-1:Wn=Zt);let Ln=Et[Wn];Ln===void 0&&(Ln={type:void 0,texture:void 0},Et[Wn]=Ln),(Ln.type!==qt||Ln.texture!==hn)&&(Zt!==Wn&&(et.activeTexture(Wn),Zt=Wn),et.bindTexture(qt,hn||Jt[qt]),Ln.type=qt,Ln.texture=hn)}function Kt(){const qt=Et[Zt];qt!==void 0&&qt.type!==void 0&&(et.bindTexture(qt.type,null),qt.type=void 0,qt.texture=void 0)}function en(){try{et.compressedTexImage2D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function un(){try{et.compressedTexImage3D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function Sn(){try{et.texSubImage2D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function wn(){try{et.texSubImage3D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function Fn(){try{et.compressedTexSubImage2D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function _n(){try{et.compressedTexSubImage3D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function fn(){try{et.texStorage2D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function Nn(){try{et.texStorage3D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function jt(){try{et.texImage2D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function cn(){try{et.texImage3D.apply(et,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}}function yn(qt){zt.equals(qt)===!1&&(et.scissor(qt.x,qt.y,qt.z,qt.w),zt.copy(qt))}function bn(qt){Pt.equals(qt)===!1&&(et.viewport(qt.x,qt.y,qt.z,qt.w),Pt.copy(qt))}function En(qt,hn){let Wn=lt.get(hn);Wn===void 0&&(Wn=new WeakMap,lt.set(hn,Wn));let Ln=Wn.get(qt);Ln===void 0&&(Ln=et.getUniformBlockIndex(hn,qt.name),Wn.set(qt,Ln))}function Dn(qt,hn){const Ln=lt.get(hn).get(qt);At.get(hn)!==Ln&&(et.uniformBlockBinding(hn,Ln,qt.__bindingPointIndex),At.set(hn,Ln))}function jn(){et.disable(3042),et.disable(2884),et.disable(2929),et.disable(32823),et.disable(3089),et.disable(2960),et.disable(32926),et.blendEquation(32774),et.blendFunc(1,0),et.blendFuncSeparate(1,0,1,0),et.colorMask(!0,!0,!0,!0),et.clearColor(0,0,0,0),et.depthMask(!0),et.depthFunc(513),et.clearDepth(1),et.stencilMask(4294967295),et.stencilFunc(519,0,4294967295),et.stencilOp(7680,7680,7680),et.clearStencil(0),et.cullFace(1029),et.frontFace(2305),et.polygonOffset(0,0),et.activeTexture(33984),et.bindFramebuffer(36160,null),tt===!0&&(et.bindFramebuffer(36009,null),et.bindFramebuffer(36008,null)),et.useProgram(null),et.lineWidth(1),et.scissor(0,0,et.canvas.width,et.canvas.height),et.viewport(0,0,et.canvas.width,et.canvas.height),gt={},Zt=null,Et={},ct={},dt=new WeakMap,ht=[],mt=null,Ct=!1,ft=null,pt=null,Vt=null,yt=null,Gt=null,Bt=null,vt=null,wt=!1,Mt=null,kt=null,Nt=null,Yt=null,Lt=null,zt.set(0,0,et.canvas.width,et.canvas.height),Pt.set(0,0,et.canvas.width,et.canvas.height),st.reset(),ot.reset(),at.reset()}return{buffers:{color:st,depth:ot,stencil:at},enable:rn,disable:sn,bindFramebuffer:Vn,drawBuffers:dn,useProgram:gn,setBlending:nn,setMaterial:Bn,setFlipSided:Gn,setCullFace:kn,setLineWidth:pn,setPolygonOffset:Rn,setScissorTest:Mn,activeTexture:In,bindTexture:Dt,unbindTexture:Kt,compressedTexImage2D:en,compressedTexImage3D:un,texImage2D:jt,texImage3D:cn,updateUBOMapping:En,uniformBlockBinding:Dn,texStorage2D:fn,texStorage3D:Nn,texSubImage2D:Sn,texSubImage3D:wn,compressedTexSubImage2D:Fn,compressedTexSubImage3D:_n,scissor:yn,viewport:bn,reset:jn}}function WebGLTextures(et,_,_e,tt,nt,it,rt){const st=nt.isWebGL2,ot=nt.maxTextures,at=nt.maxCubemapSize,At=nt.maxTextureSize,lt=nt.maxSamples,gt=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,ct=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),dt=new WeakMap;let ht;const mt=new WeakMap;let Ct=!1;try{Ct=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ft(Dt,Kt){return Ct?new OffscreenCanvas(Dt,Kt):createElementNS("canvas")}function pt(Dt,Kt,en,un){let Sn=1;if((Dt.width>un||Dt.height>un)&&(Sn=un/Math.max(Dt.width,Dt.height)),Sn<1||Kt===!0)if(typeof HTMLImageElement<"u"&&Dt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Dt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Dt instanceof ImageBitmap){const wn=Kt?floorPowerOfTwo:Math.floor,Fn=wn(Sn*Dt.width),_n=wn(Sn*Dt.height);ht===void 0&&(ht=ft(Fn,_n));const fn=en?ft(Fn,_n):ht;return fn.width=Fn,fn.height=_n,fn.getContext("2d").drawImage(Dt,0,0,Fn,_n),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Dt.width+"x"+Dt.height+") to ("+Fn+"x"+_n+")."),fn}else return"data"in Dt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Dt.width+"x"+Dt.height+")."),Dt;return Dt}function Vt(Dt){return isPowerOfTwo(Dt.width)&&isPowerOfTwo(Dt.height)}function yt(Dt){return st?!1:Dt.wrapS!==ClampToEdgeWrapping||Dt.wrapT!==ClampToEdgeWrapping||Dt.minFilter!==NearestFilter&&Dt.minFilter!==LinearFilter}function Gt(Dt,Kt){return Dt.generateMipmaps&&Kt&&Dt.minFilter!==NearestFilter&&Dt.minFilter!==LinearFilter}function Bt(Dt){et.generateMipmap(Dt)}function vt(Dt,Kt,en,un,Sn=!1){if(st===!1)return Kt;if(Dt!==null){if(et[Dt]!==void 0)return et[Dt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Dt+"'")}let wn=Kt;return Kt===6403&&(en===5126&&(wn=33326),en===5131&&(wn=33325),en===5121&&(wn=33321)),Kt===33319&&(en===5126&&(wn=33328),en===5131&&(wn=33327),en===5121&&(wn=33323)),Kt===6408&&(en===5126&&(wn=34836),en===5131&&(wn=34842),en===5121&&(wn=un===sRGBEncoding&&Sn===!1?35907:32856),en===32819&&(wn=32854),en===32820&&(wn=32855)),(wn===33325||wn===33326||wn===33327||wn===33328||wn===34842||wn===34836)&&_.get("EXT_color_buffer_float"),wn}function wt(Dt,Kt,en){return Gt(Dt,en)===!0||Dt.isFramebufferTexture&&Dt.minFilter!==NearestFilter&&Dt.minFilter!==LinearFilter?Math.log2(Math.max(Kt.width,Kt.height))+1:Dt.mipmaps!==void 0&&Dt.mipmaps.length>0?Dt.mipmaps.length:Dt.isCompressedTexture&&Array.isArray(Dt.image)?Kt.mipmaps.length:1}function Mt(Dt){return Dt===NearestFilter||Dt===NearestMipmapNearestFilter||Dt===NearestMipmapLinearFilter?9728:9729}function kt(Dt){const Kt=Dt.target;Kt.removeEventListener("dispose",kt),Yt(Kt),Kt.isVideoTexture&&dt.delete(Kt)}function Nt(Dt){const Kt=Dt.target;Kt.removeEventListener("dispose",Nt),Xt(Kt)}function Yt(Dt){const Kt=tt.get(Dt);if(Kt.__webglInit===void 0)return;const en=Dt.source,un=mt.get(en);if(un){const Sn=un[Kt.__cacheKey];Sn.usedTimes--,Sn.usedTimes===0&&Lt(Dt),Object.keys(un).length===0&&mt.delete(en)}tt.remove(Dt)}function Lt(Dt){const Kt=tt.get(Dt);et.deleteTexture(Kt.__webglTexture);const en=Dt.source,un=mt.get(en);delete un[Kt.__cacheKey],rt.memory.textures--}function Xt(Dt){const Kt=Dt.texture,en=tt.get(Dt),un=tt.get(Kt);if(un.__webglTexture!==void 0&&(et.deleteTexture(un.__webglTexture),rt.memory.textures--),Dt.depthTexture&&Dt.depthTexture.dispose(),Dt.isWebGLCubeRenderTarget)for(let Sn=0;Sn<6;Sn++)et.deleteFramebuffer(en.__webglFramebuffer[Sn]),en.__webglDepthbuffer&&et.deleteRenderbuffer(en.__webglDepthbuffer[Sn]);else{if(et.deleteFramebuffer(en.__webglFramebuffer),en.__webglDepthbuffer&&et.deleteRenderbuffer(en.__webglDepthbuffer),en.__webglMultisampledFramebuffer&&et.deleteFramebuffer(en.__webglMultisampledFramebuffer),en.__webglColorRenderbuffer)for(let Sn=0;Sn<en.__webglColorRenderbuffer.length;Sn++)en.__webglColorRenderbuffer[Sn]&&et.deleteRenderbuffer(en.__webglColorRenderbuffer[Sn]);en.__webglDepthRenderbuffer&&et.deleteRenderbuffer(en.__webglDepthRenderbuffer)}if(Dt.isWebGLMultipleRenderTargets)for(let Sn=0,wn=Kt.length;Sn<wn;Sn++){const Fn=tt.get(Kt[Sn]);Fn.__webglTexture&&(et.deleteTexture(Fn.__webglTexture),rt.memory.textures--),tt.remove(Kt[Sn])}tt.remove(Kt),tt.remove(Dt)}let _t=0;function Tt(){_t=0}function St(){const Dt=_t;return Dt>=ot&&console.warn("THREE.WebGLTextures: Trying to use "+Dt+" texture units while this GPU supports only "+ot),_t+=1,Dt}function Zt(Dt){const Kt=[];return Kt.push(Dt.wrapS),Kt.push(Dt.wrapT),Kt.push(Dt.wrapR||0),Kt.push(Dt.magFilter),Kt.push(Dt.minFilter),Kt.push(Dt.anisotropy),Kt.push(Dt.internalFormat),Kt.push(Dt.format),Kt.push(Dt.type),Kt.push(Dt.generateMipmaps),Kt.push(Dt.premultiplyAlpha),Kt.push(Dt.flipY),Kt.push(Dt.unpackAlignment),Kt.push(Dt.encoding),Kt.join()}function Et(Dt,Kt){const en=tt.get(Dt);if(Dt.isVideoTexture&&Mn(Dt),Dt.isRenderTargetTexture===!1&&Dt.version>0&&en.__version!==Dt.version){const un=Dt.image;if(un===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(un.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{sn(en,Dt,Kt);return}}_e.bindTexture(3553,en.__webglTexture,33984+Kt)}function Wt(Dt,Kt){const en=tt.get(Dt);if(Dt.version>0&&en.__version!==Dt.version){sn(en,Dt,Kt);return}_e.bindTexture(35866,en.__webglTexture,33984+Kt)}function Ht(Dt,Kt){const en=tt.get(Dt);if(Dt.version>0&&en.__version!==Dt.version){sn(en,Dt,Kt);return}_e.bindTexture(32879,en.__webglTexture,33984+Kt)}function zt(Dt,Kt){const en=tt.get(Dt);if(Dt.version>0&&en.__version!==Dt.version){Vn(en,Dt,Kt);return}_e.bindTexture(34067,en.__webglTexture,33984+Kt)}const Pt={[RepeatWrapping]:10497,[ClampToEdgeWrapping]:33071,[MirroredRepeatWrapping]:33648},Ot={[NearestFilter]:9728,[NearestMipmapNearestFilter]:9984,[NearestMipmapLinearFilter]:9986,[LinearFilter]:9729,[LinearMipmapNearestFilter]:9985,[LinearMipmapLinearFilter]:9987};function Jt(Dt,Kt,en){if(en?(et.texParameteri(Dt,10242,Pt[Kt.wrapS]),et.texParameteri(Dt,10243,Pt[Kt.wrapT]),(Dt===32879||Dt===35866)&&et.texParameteri(Dt,32882,Pt[Kt.wrapR]),et.texParameteri(Dt,10240,Ot[Kt.magFilter]),et.texParameteri(Dt,10241,Ot[Kt.minFilter])):(et.texParameteri(Dt,10242,33071),et.texParameteri(Dt,10243,33071),(Dt===32879||Dt===35866)&&et.texParameteri(Dt,32882,33071),(Kt.wrapS!==ClampToEdgeWrapping||Kt.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),et.texParameteri(Dt,10240,Mt(Kt.magFilter)),et.texParameteri(Dt,10241,Mt(Kt.minFilter)),Kt.minFilter!==NearestFilter&&Kt.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),_.has("EXT_texture_filter_anisotropic")===!0){const un=_.get("EXT_texture_filter_anisotropic");if(Kt.magFilter===NearestFilter||Kt.minFilter!==NearestMipmapLinearFilter&&Kt.minFilter!==LinearMipmapLinearFilter||Kt.type===FloatType&&_.has("OES_texture_float_linear")===!1||st===!1&&Kt.type===HalfFloatType&&_.has("OES_texture_half_float_linear")===!1)return;(Kt.anisotropy>1||tt.get(Kt).__currentAnisotropy)&&(et.texParameterf(Dt,un.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Kt.anisotropy,nt.getMaxAnisotropy())),tt.get(Kt).__currentAnisotropy=Kt.anisotropy)}}function rn(Dt,Kt){let en=!1;Dt.__webglInit===void 0&&(Dt.__webglInit=!0,Kt.addEventListener("dispose",kt));const un=Kt.source;let Sn=mt.get(un);Sn===void 0&&(Sn={},mt.set(un,Sn));const wn=Zt(Kt);if(wn!==Dt.__cacheKey){Sn[wn]===void 0&&(Sn[wn]={texture:et.createTexture(),usedTimes:0},rt.memory.textures++,en=!0),Sn[wn].usedTimes++;const Fn=Sn[Dt.__cacheKey];Fn!==void 0&&(Sn[Dt.__cacheKey].usedTimes--,Fn.usedTimes===0&&Lt(Kt)),Dt.__cacheKey=wn,Dt.__webglTexture=Sn[wn].texture}return en}function sn(Dt,Kt,en){let un=3553;(Kt.isDataArrayTexture||Kt.isCompressedArrayTexture)&&(un=35866),Kt.isData3DTexture&&(un=32879);const Sn=rn(Dt,Kt),wn=Kt.source;_e.bindTexture(un,Dt.__webglTexture,33984+en);const Fn=tt.get(wn);if(wn.version!==Fn.__version||Sn===!0){_e.activeTexture(33984+en),et.pixelStorei(37440,Kt.flipY),et.pixelStorei(37441,Kt.premultiplyAlpha),et.pixelStorei(3317,Kt.unpackAlignment),et.pixelStorei(37443,0);const _n=yt(Kt)&&Vt(Kt.image)===!1;let fn=pt(Kt.image,_n,!1,At);fn=In(Kt,fn);const Nn=Vt(fn)||st,jt=it.convert(Kt.format,Kt.encoding);let cn=it.convert(Kt.type),yn=vt(Kt.internalFormat,jt,cn,Kt.encoding,Kt.isVideoTexture);Jt(un,Kt,Nn);let bn;const En=Kt.mipmaps,Dn=st&&Kt.isVideoTexture!==!0,jn=Fn.__version===void 0||Sn===!0,qt=wt(Kt,fn,Nn);if(Kt.isDepthTexture)yn=6402,st?Kt.type===FloatType?yn=36012:Kt.type===UnsignedIntType?yn=33190:Kt.type===UnsignedInt248Type?yn=35056:yn=33189:Kt.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Kt.format===DepthFormat&&yn===6402&&Kt.type!==UnsignedShortType&&Kt.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Kt.type=UnsignedIntType,cn=it.convert(Kt.type)),Kt.format===DepthStencilFormat&&yn===6402&&(yn=34041,Kt.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Kt.type=UnsignedInt248Type,cn=it.convert(Kt.type))),jn&&(Dn?_e.texStorage2D(3553,1,yn,fn.width,fn.height):_e.texImage2D(3553,0,yn,fn.width,fn.height,0,jt,cn,null));else if(Kt.isDataTexture)if(En.length>0&&Nn){Dn&&jn&&_e.texStorage2D(3553,qt,yn,En[0].width,En[0].height);for(let hn=0,Wn=En.length;hn<Wn;hn++)bn=En[hn],Dn?_e.texSubImage2D(3553,hn,0,0,bn.width,bn.height,jt,cn,bn.data):_e.texImage2D(3553,hn,yn,bn.width,bn.height,0,jt,cn,bn.data);Kt.generateMipmaps=!1}else Dn?(jn&&_e.texStorage2D(3553,qt,yn,fn.width,fn.height),_e.texSubImage2D(3553,0,0,0,fn.width,fn.height,jt,cn,fn.data)):_e.texImage2D(3553,0,yn,fn.width,fn.height,0,jt,cn,fn.data);else if(Kt.isCompressedTexture)if(Kt.isCompressedArrayTexture){Dn&&jn&&_e.texStorage3D(35866,qt,yn,En[0].width,En[0].height,fn.depth);for(let hn=0,Wn=En.length;hn<Wn;hn++)bn=En[hn],Kt.format!==RGBAFormat?jt!==null?Dn?_e.compressedTexSubImage3D(35866,hn,0,0,0,bn.width,bn.height,fn.depth,jt,bn.data,0,0):_e.compressedTexImage3D(35866,hn,yn,bn.width,bn.height,fn.depth,0,bn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Dn?_e.texSubImage3D(35866,hn,0,0,0,bn.width,bn.height,fn.depth,jt,cn,bn.data):_e.texImage3D(35866,hn,yn,bn.width,bn.height,fn.depth,0,jt,cn,bn.data)}else{Dn&&jn&&_e.texStorage2D(3553,qt,yn,En[0].width,En[0].height);for(let hn=0,Wn=En.length;hn<Wn;hn++)bn=En[hn],Kt.format!==RGBAFormat?jt!==null?Dn?_e.compressedTexSubImage2D(3553,hn,0,0,bn.width,bn.height,jt,bn.data):_e.compressedTexImage2D(3553,hn,yn,bn.width,bn.height,0,bn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Dn?_e.texSubImage2D(3553,hn,0,0,bn.width,bn.height,jt,cn,bn.data):_e.texImage2D(3553,hn,yn,bn.width,bn.height,0,jt,cn,bn.data)}else if(Kt.isDataArrayTexture)Dn?(jn&&_e.texStorage3D(35866,qt,yn,fn.width,fn.height,fn.depth),_e.texSubImage3D(35866,0,0,0,0,fn.width,fn.height,fn.depth,jt,cn,fn.data)):_e.texImage3D(35866,0,yn,fn.width,fn.height,fn.depth,0,jt,cn,fn.data);else if(Kt.isData3DTexture)Dn?(jn&&_e.texStorage3D(32879,qt,yn,fn.width,fn.height,fn.depth),_e.texSubImage3D(32879,0,0,0,0,fn.width,fn.height,fn.depth,jt,cn,fn.data)):_e.texImage3D(32879,0,yn,fn.width,fn.height,fn.depth,0,jt,cn,fn.data);else if(Kt.isFramebufferTexture){if(jn)if(Dn)_e.texStorage2D(3553,qt,yn,fn.width,fn.height);else{let hn=fn.width,Wn=fn.height;for(let Ln=0;Ln<qt;Ln++)_e.texImage2D(3553,Ln,yn,hn,Wn,0,jt,cn,null),hn>>=1,Wn>>=1}}else if(En.length>0&&Nn){Dn&&jn&&_e.texStorage2D(3553,qt,yn,En[0].width,En[0].height);for(let hn=0,Wn=En.length;hn<Wn;hn++)bn=En[hn],Dn?_e.texSubImage2D(3553,hn,0,0,jt,cn,bn):_e.texImage2D(3553,hn,yn,jt,cn,bn);Kt.generateMipmaps=!1}else Dn?(jn&&_e.texStorage2D(3553,qt,yn,fn.width,fn.height),_e.texSubImage2D(3553,0,0,0,jt,cn,fn)):_e.texImage2D(3553,0,yn,jt,cn,fn);Gt(Kt,Nn)&&Bt(un),Fn.__version=wn.version,Kt.onUpdate&&Kt.onUpdate(Kt)}Dt.__version=Kt.version}function Vn(Dt,Kt,en){if(Kt.image.length!==6)return;const un=rn(Dt,Kt),Sn=Kt.source;_e.bindTexture(34067,Dt.__webglTexture,33984+en);const wn=tt.get(Sn);if(Sn.version!==wn.__version||un===!0){_e.activeTexture(33984+en),et.pixelStorei(37440,Kt.flipY),et.pixelStorei(37441,Kt.premultiplyAlpha),et.pixelStorei(3317,Kt.unpackAlignment),et.pixelStorei(37443,0);const Fn=Kt.isCompressedTexture||Kt.image[0].isCompressedTexture,_n=Kt.image[0]&&Kt.image[0].isDataTexture,fn=[];for(let hn=0;hn<6;hn++)!Fn&&!_n?fn[hn]=pt(Kt.image[hn],!1,!0,at):fn[hn]=_n?Kt.image[hn].image:Kt.image[hn],fn[hn]=In(Kt,fn[hn]);const Nn=fn[0],jt=Vt(Nn)||st,cn=it.convert(Kt.format,Kt.encoding),yn=it.convert(Kt.type),bn=vt(Kt.internalFormat,cn,yn,Kt.encoding),En=st&&Kt.isVideoTexture!==!0,Dn=wn.__version===void 0||un===!0;let jn=wt(Kt,Nn,jt);Jt(34067,Kt,jt);let qt;if(Fn){En&&Dn&&_e.texStorage2D(34067,jn,bn,Nn.width,Nn.height);for(let hn=0;hn<6;hn++){qt=fn[hn].mipmaps;for(let Wn=0;Wn<qt.length;Wn++){const Ln=qt[Wn];Kt.format!==RGBAFormat?cn!==null?En?_e.compressedTexSubImage2D(34069+hn,Wn,0,0,Ln.width,Ln.height,cn,Ln.data):_e.compressedTexImage2D(34069+hn,Wn,bn,Ln.width,Ln.height,0,Ln.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):En?_e.texSubImage2D(34069+hn,Wn,0,0,Ln.width,Ln.height,cn,yn,Ln.data):_e.texImage2D(34069+hn,Wn,bn,Ln.width,Ln.height,0,cn,yn,Ln.data)}}}else{qt=Kt.mipmaps,En&&Dn&&(qt.length>0&&jn++,_e.texStorage2D(34067,jn,bn,fn[0].width,fn[0].height));for(let hn=0;hn<6;hn++)if(_n){En?_e.texSubImage2D(34069+hn,0,0,0,fn[hn].width,fn[hn].height,cn,yn,fn[hn].data):_e.texImage2D(34069+hn,0,bn,fn[hn].width,fn[hn].height,0,cn,yn,fn[hn].data);for(let Wn=0;Wn<qt.length;Wn++){const Kn=qt[Wn].image[hn].image;En?_e.texSubImage2D(34069+hn,Wn+1,0,0,Kn.width,Kn.height,cn,yn,Kn.data):_e.texImage2D(34069+hn,Wn+1,bn,Kn.width,Kn.height,0,cn,yn,Kn.data)}}else{En?_e.texSubImage2D(34069+hn,0,0,0,cn,yn,fn[hn]):_e.texImage2D(34069+hn,0,bn,cn,yn,fn[hn]);for(let Wn=0;Wn<qt.length;Wn++){const Ln=qt[Wn];En?_e.texSubImage2D(34069+hn,Wn+1,0,0,cn,yn,Ln.image[hn]):_e.texImage2D(34069+hn,Wn+1,bn,cn,yn,Ln.image[hn])}}}Gt(Kt,jt)&&Bt(34067),wn.__version=Sn.version,Kt.onUpdate&&Kt.onUpdate(Kt)}Dt.__version=Kt.version}function dn(Dt,Kt,en,un,Sn){const wn=it.convert(en.format,en.encoding),Fn=it.convert(en.type),_n=vt(en.internalFormat,wn,Fn,en.encoding);tt.get(Kt).__hasExternalTextures||(Sn===32879||Sn===35866?_e.texImage3D(Sn,0,_n,Kt.width,Kt.height,Kt.depth,0,wn,Fn,null):_e.texImage2D(Sn,0,_n,Kt.width,Kt.height,0,wn,Fn,null)),_e.bindFramebuffer(36160,Dt),Rn(Kt)?gt.framebufferTexture2DMultisampleEXT(36160,un,Sn,tt.get(en).__webglTexture,0,pn(Kt)):(Sn===3553||Sn>=34069&&Sn<=34074)&&et.framebufferTexture2D(36160,un,Sn,tt.get(en).__webglTexture,0),_e.bindFramebuffer(36160,null)}function gn(Dt,Kt,en){if(et.bindRenderbuffer(36161,Dt),Kt.depthBuffer&&!Kt.stencilBuffer){let un=33189;if(en||Rn(Kt)){const Sn=Kt.depthTexture;Sn&&Sn.isDepthTexture&&(Sn.type===FloatType?un=36012:Sn.type===UnsignedIntType&&(un=33190));const wn=pn(Kt);Rn(Kt)?gt.renderbufferStorageMultisampleEXT(36161,wn,un,Kt.width,Kt.height):et.renderbufferStorageMultisample(36161,wn,un,Kt.width,Kt.height)}else et.renderbufferStorage(36161,un,Kt.width,Kt.height);et.framebufferRenderbuffer(36160,36096,36161,Dt)}else if(Kt.depthBuffer&&Kt.stencilBuffer){const un=pn(Kt);en&&Rn(Kt)===!1?et.renderbufferStorageMultisample(36161,un,35056,Kt.width,Kt.height):Rn(Kt)?gt.renderbufferStorageMultisampleEXT(36161,un,35056,Kt.width,Kt.height):et.renderbufferStorage(36161,34041,Kt.width,Kt.height),et.framebufferRenderbuffer(36160,33306,36161,Dt)}else{const un=Kt.isWebGLMultipleRenderTargets===!0?Kt.texture:[Kt.texture];for(let Sn=0;Sn<un.length;Sn++){const wn=un[Sn],Fn=it.convert(wn.format,wn.encoding),_n=it.convert(wn.type),fn=vt(wn.internalFormat,Fn,_n,wn.encoding),Nn=pn(Kt);en&&Rn(Kt)===!1?et.renderbufferStorageMultisample(36161,Nn,fn,Kt.width,Kt.height):Rn(Kt)?gt.renderbufferStorageMultisampleEXT(36161,Nn,fn,Kt.width,Kt.height):et.renderbufferStorage(36161,fn,Kt.width,Kt.height)}}et.bindRenderbuffer(36161,null)}function $t(Dt,Kt){if(Kt&&Kt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(_e.bindFramebuffer(36160,Dt),!(Kt.depthTexture&&Kt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!tt.get(Kt.depthTexture).__webglTexture||Kt.depthTexture.image.width!==Kt.width||Kt.depthTexture.image.height!==Kt.height)&&(Kt.depthTexture.image.width=Kt.width,Kt.depthTexture.image.height=Kt.height,Kt.depthTexture.needsUpdate=!0),Et(Kt.depthTexture,0);const un=tt.get(Kt.depthTexture).__webglTexture,Sn=pn(Kt);if(Kt.depthTexture.format===DepthFormat)Rn(Kt)?gt.framebufferTexture2DMultisampleEXT(36160,36096,3553,un,0,Sn):et.framebufferTexture2D(36160,36096,3553,un,0);else if(Kt.depthTexture.format===DepthStencilFormat)Rn(Kt)?gt.framebufferTexture2DMultisampleEXT(36160,33306,3553,un,0,Sn):et.framebufferTexture2D(36160,33306,3553,un,0);else throw new Error("Unknown depthTexture format")}function tn(Dt){const Kt=tt.get(Dt),en=Dt.isWebGLCubeRenderTarget===!0;if(Dt.depthTexture&&!Kt.__autoAllocateDepthBuffer){if(en)throw new Error("target.depthTexture not supported in Cube render targets");$t(Kt.__webglFramebuffer,Dt)}else if(en){Kt.__webglDepthbuffer=[];for(let un=0;un<6;un++)_e.bindFramebuffer(36160,Kt.__webglFramebuffer[un]),Kt.__webglDepthbuffer[un]=et.createRenderbuffer(),gn(Kt.__webglDepthbuffer[un],Dt,!1)}else _e.bindFramebuffer(36160,Kt.__webglFramebuffer),Kt.__webglDepthbuffer=et.createRenderbuffer(),gn(Kt.__webglDepthbuffer,Dt,!1);_e.bindFramebuffer(36160,null)}function nn(Dt,Kt,en){const un=tt.get(Dt);Kt!==void 0&&dn(un.__webglFramebuffer,Dt,Dt.texture,36064,3553),en!==void 0&&tn(Dt)}function Bn(Dt){const Kt=Dt.texture,en=tt.get(Dt),un=tt.get(Kt);Dt.addEventListener("dispose",Nt),Dt.isWebGLMultipleRenderTargets!==!0&&(un.__webglTexture===void 0&&(un.__webglTexture=et.createTexture()),un.__version=Kt.version,rt.memory.textures++);const Sn=Dt.isWebGLCubeRenderTarget===!0,wn=Dt.isWebGLMultipleRenderTargets===!0,Fn=Vt(Dt)||st;if(Sn){en.__webglFramebuffer=[];for(let _n=0;_n<6;_n++)en.__webglFramebuffer[_n]=et.createFramebuffer()}else{if(en.__webglFramebuffer=et.createFramebuffer(),wn)if(nt.drawBuffers){const _n=Dt.texture;for(let fn=0,Nn=_n.length;fn<Nn;fn++){const jt=tt.get(_n[fn]);jt.__webglTexture===void 0&&(jt.__webglTexture=et.createTexture(),rt.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(st&&Dt.samples>0&&Rn(Dt)===!1){const _n=wn?Kt:[Kt];en.__webglMultisampledFramebuffer=et.createFramebuffer(),en.__webglColorRenderbuffer=[],_e.bindFramebuffer(36160,en.__webglMultisampledFramebuffer);for(let fn=0;fn<_n.length;fn++){const Nn=_n[fn];en.__webglColorRenderbuffer[fn]=et.createRenderbuffer(),et.bindRenderbuffer(36161,en.__webglColorRenderbuffer[fn]);const jt=it.convert(Nn.format,Nn.encoding),cn=it.convert(Nn.type),yn=vt(Nn.internalFormat,jt,cn,Nn.encoding,Dt.isXRRenderTarget===!0),bn=pn(Dt);et.renderbufferStorageMultisample(36161,bn,yn,Dt.width,Dt.height),et.framebufferRenderbuffer(36160,36064+fn,36161,en.__webglColorRenderbuffer[fn])}et.bindRenderbuffer(36161,null),Dt.depthBuffer&&(en.__webglDepthRenderbuffer=et.createRenderbuffer(),gn(en.__webglDepthRenderbuffer,Dt,!0)),_e.bindFramebuffer(36160,null)}}if(Sn){_e.bindTexture(34067,un.__webglTexture),Jt(34067,Kt,Fn);for(let _n=0;_n<6;_n++)dn(en.__webglFramebuffer[_n],Dt,Kt,36064,34069+_n);Gt(Kt,Fn)&&Bt(34067),_e.unbindTexture()}else if(wn){const _n=Dt.texture;for(let fn=0,Nn=_n.length;fn<Nn;fn++){const jt=_n[fn],cn=tt.get(jt);_e.bindTexture(3553,cn.__webglTexture),Jt(3553,jt,Fn),dn(en.__webglFramebuffer,Dt,jt,36064+fn,3553),Gt(jt,Fn)&&Bt(3553)}_e.unbindTexture()}else{let _n=3553;(Dt.isWebGL3DRenderTarget||Dt.isWebGLArrayRenderTarget)&&(st?_n=Dt.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),_e.bindTexture(_n,un.__webglTexture),Jt(_n,Kt,Fn),dn(en.__webglFramebuffer,Dt,Kt,36064,_n),Gt(Kt,Fn)&&Bt(_n),_e.unbindTexture()}Dt.depthBuffer&&tn(Dt)}function Gn(Dt){const Kt=Vt(Dt)||st,en=Dt.isWebGLMultipleRenderTargets===!0?Dt.texture:[Dt.texture];for(let un=0,Sn=en.length;un<Sn;un++){const wn=en[un];if(Gt(wn,Kt)){const Fn=Dt.isWebGLCubeRenderTarget?34067:3553,_n=tt.get(wn).__webglTexture;_e.bindTexture(Fn,_n),Bt(Fn),_e.unbindTexture()}}}function kn(Dt){if(st&&Dt.samples>0&&Rn(Dt)===!1){const Kt=Dt.isWebGLMultipleRenderTargets?Dt.texture:[Dt.texture],en=Dt.width,un=Dt.height;let Sn=16384;const wn=[],Fn=Dt.stencilBuffer?33306:36096,_n=tt.get(Dt),fn=Dt.isWebGLMultipleRenderTargets===!0;if(fn)for(let Nn=0;Nn<Kt.length;Nn++)_e.bindFramebuffer(36160,_n.__webglMultisampledFramebuffer),et.framebufferRenderbuffer(36160,36064+Nn,36161,null),_e.bindFramebuffer(36160,_n.__webglFramebuffer),et.framebufferTexture2D(36009,36064+Nn,3553,null,0);_e.bindFramebuffer(36008,_n.__webglMultisampledFramebuffer),_e.bindFramebuffer(36009,_n.__webglFramebuffer);for(let Nn=0;Nn<Kt.length;Nn++){wn.push(36064+Nn),Dt.depthBuffer&&wn.push(Fn);const jt=_n.__ignoreDepthValues!==void 0?_n.__ignoreDepthValues:!1;if(jt===!1&&(Dt.depthBuffer&&(Sn|=256),Dt.stencilBuffer&&(Sn|=1024)),fn&&et.framebufferRenderbuffer(36008,36064,36161,_n.__webglColorRenderbuffer[Nn]),jt===!0&&(et.invalidateFramebuffer(36008,[Fn]),et.invalidateFramebuffer(36009,[Fn])),fn){const cn=tt.get(Kt[Nn]).__webglTexture;et.framebufferTexture2D(36009,36064,3553,cn,0)}et.blitFramebuffer(0,0,en,un,0,0,en,un,Sn,9728),ct&&et.invalidateFramebuffer(36008,wn)}if(_e.bindFramebuffer(36008,null),_e.bindFramebuffer(36009,null),fn)for(let Nn=0;Nn<Kt.length;Nn++){_e.bindFramebuffer(36160,_n.__webglMultisampledFramebuffer),et.framebufferRenderbuffer(36160,36064+Nn,36161,_n.__webglColorRenderbuffer[Nn]);const jt=tt.get(Kt[Nn]).__webglTexture;_e.bindFramebuffer(36160,_n.__webglFramebuffer),et.framebufferTexture2D(36009,36064+Nn,3553,jt,0)}_e.bindFramebuffer(36009,_n.__webglMultisampledFramebuffer)}}function pn(Dt){return Math.min(lt,Dt.samples)}function Rn(Dt){const Kt=tt.get(Dt);return st&&Dt.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&Kt.__useRenderToTexture!==!1}function Mn(Dt){const Kt=rt.render.frame;dt.get(Dt)!==Kt&&(dt.set(Dt,Kt),Dt.update())}function In(Dt,Kt){const en=Dt.encoding,un=Dt.format,Sn=Dt.type;return Dt.isCompressedTexture===!0||Dt.isVideoTexture===!0||Dt.format===_SRGBAFormat||en!==LinearEncoding&&(en===sRGBEncoding?st===!1?_.has("EXT_sRGB")===!0&&un===RGBAFormat?(Dt.format=_SRGBAFormat,Dt.minFilter=LinearFilter,Dt.generateMipmaps=!1):Kt=ImageUtils.sRGBToLinear(Kt):(un!==RGBAFormat||Sn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",en)),Kt}this.allocateTextureUnit=St,this.resetTextureUnits=Tt,this.setTexture2D=Et,this.setTexture2DArray=Wt,this.setTexture3D=Ht,this.setTextureCube=zt,this.rebindTextures=nn,this.setupRenderTarget=Bn,this.updateRenderTargetMipmap=Gn,this.updateMultisampleRenderTarget=kn,this.setupDepthRenderbuffer=tn,this.setupFrameBufferTexture=dn,this.useMultisampledRTT=Rn}function WebGLUtils(et,_,_e){const tt=_e.isWebGL2;function nt(it,rt=null){let st;if(it===UnsignedByteType)return 5121;if(it===UnsignedShort4444Type)return 32819;if(it===UnsignedShort5551Type)return 32820;if(it===ByteType)return 5120;if(it===ShortType)return 5122;if(it===UnsignedShortType)return 5123;if(it===IntType)return 5124;if(it===UnsignedIntType)return 5125;if(it===FloatType)return 5126;if(it===HalfFloatType)return tt?5131:(st=_.get("OES_texture_half_float"),st!==null?st.HALF_FLOAT_OES:null);if(it===AlphaFormat)return 6406;if(it===RGBAFormat)return 6408;if(it===LuminanceFormat)return 6409;if(it===LuminanceAlphaFormat)return 6410;if(it===DepthFormat)return 6402;if(it===DepthStencilFormat)return 34041;if(it===RGBFormat)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(it===_SRGBAFormat)return st=_.get("EXT_sRGB"),st!==null?st.SRGB_ALPHA_EXT:null;if(it===RedFormat)return 6403;if(it===RedIntegerFormat)return 36244;if(it===RGFormat)return 33319;if(it===RGIntegerFormat)return 33320;if(it===RGBAIntegerFormat)return 36249;if(it===RGB_S3TC_DXT1_Format||it===RGBA_S3TC_DXT1_Format||it===RGBA_S3TC_DXT3_Format||it===RGBA_S3TC_DXT5_Format)if(rt===sRGBEncoding)if(st=_.get("WEBGL_compressed_texture_s3tc_srgb"),st!==null){if(it===RGB_S3TC_DXT1_Format)return st.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT1_Format)return st.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT3_Format)return st.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(it===RGBA_S3TC_DXT5_Format)return st.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(st=_.get("WEBGL_compressed_texture_s3tc"),st!==null){if(it===RGB_S3TC_DXT1_Format)return st.COMPRESSED_RGB_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT1_Format)return st.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT3_Format)return st.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(it===RGBA_S3TC_DXT5_Format)return st.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(it===RGB_PVRTC_4BPPV1_Format||it===RGB_PVRTC_2BPPV1_Format||it===RGBA_PVRTC_4BPPV1_Format||it===RGBA_PVRTC_2BPPV1_Format)if(st=_.get("WEBGL_compressed_texture_pvrtc"),st!==null){if(it===RGB_PVRTC_4BPPV1_Format)return st.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(it===RGB_PVRTC_2BPPV1_Format)return st.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(it===RGBA_PVRTC_4BPPV1_Format)return st.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(it===RGBA_PVRTC_2BPPV1_Format)return st.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(it===RGB_ETC1_Format)return st=_.get("WEBGL_compressed_texture_etc1"),st!==null?st.COMPRESSED_RGB_ETC1_WEBGL:null;if(it===RGB_ETC2_Format||it===RGBA_ETC2_EAC_Format)if(st=_.get("WEBGL_compressed_texture_etc"),st!==null){if(it===RGB_ETC2_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ETC2:st.COMPRESSED_RGB8_ETC2;if(it===RGBA_ETC2_EAC_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:st.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(it===RGBA_ASTC_4x4_Format||it===RGBA_ASTC_5x4_Format||it===RGBA_ASTC_5x5_Format||it===RGBA_ASTC_6x5_Format||it===RGBA_ASTC_6x6_Format||it===RGBA_ASTC_8x5_Format||it===RGBA_ASTC_8x6_Format||it===RGBA_ASTC_8x8_Format||it===RGBA_ASTC_10x5_Format||it===RGBA_ASTC_10x6_Format||it===RGBA_ASTC_10x8_Format||it===RGBA_ASTC_10x10_Format||it===RGBA_ASTC_12x10_Format||it===RGBA_ASTC_12x12_Format)if(st=_.get("WEBGL_compressed_texture_astc"),st!==null){if(it===RGBA_ASTC_4x4_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:st.COMPRESSED_RGBA_ASTC_4x4_KHR;if(it===RGBA_ASTC_5x4_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:st.COMPRESSED_RGBA_ASTC_5x4_KHR;if(it===RGBA_ASTC_5x5_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:st.COMPRESSED_RGBA_ASTC_5x5_KHR;if(it===RGBA_ASTC_6x5_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:st.COMPRESSED_RGBA_ASTC_6x5_KHR;if(it===RGBA_ASTC_6x6_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:st.COMPRESSED_RGBA_ASTC_6x6_KHR;if(it===RGBA_ASTC_8x5_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:st.COMPRESSED_RGBA_ASTC_8x5_KHR;if(it===RGBA_ASTC_8x6_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:st.COMPRESSED_RGBA_ASTC_8x6_KHR;if(it===RGBA_ASTC_8x8_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:st.COMPRESSED_RGBA_ASTC_8x8_KHR;if(it===RGBA_ASTC_10x5_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:st.COMPRESSED_RGBA_ASTC_10x5_KHR;if(it===RGBA_ASTC_10x6_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:st.COMPRESSED_RGBA_ASTC_10x6_KHR;if(it===RGBA_ASTC_10x8_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:st.COMPRESSED_RGBA_ASTC_10x8_KHR;if(it===RGBA_ASTC_10x10_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:st.COMPRESSED_RGBA_ASTC_10x10_KHR;if(it===RGBA_ASTC_12x10_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:st.COMPRESSED_RGBA_ASTC_12x10_KHR;if(it===RGBA_ASTC_12x12_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:st.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(it===RGBA_BPTC_Format)if(st=_.get("EXT_texture_compression_bptc"),st!==null){if(it===RGBA_BPTC_Format)return rt===sRGBEncoding?st.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:st.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return it===UnsignedInt248Type?tt?34042:(st=_.get("WEBGL_depth_texture"),st!==null?st.UNSIGNED_INT_24_8_WEBGL:null):et[it]!==void 0?et[it]:null}return{convert:nt}}class ArrayCamera extends PerspectiveCamera$1{constructor(_=[]){super(),this.isArrayCamera=!0,this.cameras=_}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const _e=this._hand;if(_e)for(const tt of _.hand.values())this._getHandJoint(_e,tt)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,_e,tt){let nt=null,it=null,rt=null;const st=this._targetRay,ot=this._grip,at=this._hand;if(_&&_e.session.visibilityState!=="visible-blurred"){if(at&&_.hand){rt=!0;for(const ht of _.hand.values()){const mt=_e.getJointPose(ht,tt),Ct=this._getHandJoint(at,ht);mt!==null&&(Ct.matrix.fromArray(mt.transform.matrix),Ct.matrix.decompose(Ct.position,Ct.rotation,Ct.scale),Ct.jointRadius=mt.radius),Ct.visible=mt!==null}const At=at.joints["index-finger-tip"],lt=at.joints["thumb-tip"],gt=At.position.distanceTo(lt.position),ct=.02,dt=.005;at.inputState.pinching&&gt>ct+dt?(at.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!at.inputState.pinching&&gt<=ct-dt&&(at.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else ot!==null&&_.gripSpace&&(it=_e.getPose(_.gripSpace,tt),it!==null&&(ot.matrix.fromArray(it.transform.matrix),ot.matrix.decompose(ot.position,ot.rotation,ot.scale),it.linearVelocity?(ot.hasLinearVelocity=!0,ot.linearVelocity.copy(it.linearVelocity)):ot.hasLinearVelocity=!1,it.angularVelocity?(ot.hasAngularVelocity=!0,ot.angularVelocity.copy(it.angularVelocity)):ot.hasAngularVelocity=!1));st!==null&&(nt=_e.getPose(_.targetRaySpace,tt),nt===null&&it!==null&&(nt=it),nt!==null&&(st.matrix.fromArray(nt.transform.matrix),st.matrix.decompose(st.position,st.rotation,st.scale),nt.linearVelocity?(st.hasLinearVelocity=!0,st.linearVelocity.copy(nt.linearVelocity)):st.hasLinearVelocity=!1,nt.angularVelocity?(st.hasAngularVelocity=!0,st.angularVelocity.copy(nt.angularVelocity)):st.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return st!==null&&(st.visible=nt!==null),ot!==null&&(ot.visible=it!==null),at!==null&&(at.visible=rt!==null),this}_getHandJoint(_,_e){if(_.joints[_e.jointName]===void 0){const tt=new Group;tt.matrixAutoUpdate=!1,tt.visible=!1,_.joints[_e.jointName]=tt,_.add(tt)}return _.joints[_e.jointName]}}class DepthTexture extends Texture{constructor(_,_e,tt,nt,it,rt,st,ot,at,At){if(At=At!==void 0?At:DepthFormat,At!==DepthFormat&&At!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");tt===void 0&&At===DepthFormat&&(tt=UnsignedIntType),tt===void 0&&At===DepthStencilFormat&&(tt=UnsignedInt248Type),super(null,nt,it,rt,st,ot,At,tt,at),this.isDepthTexture=!0,this.image={width:_,height:_e},this.magFilter=st!==void 0?st:NearestFilter,this.minFilter=ot!==void 0?ot:NearestFilter,this.flipY=!1,this.generateMipmaps=!1}}class WebXRManager extends EventDispatcher{constructor(_,_e){super();const tt=this;let nt=null,it=1,rt=null,st="local-floor",ot=null,at=null,At=null,lt=null,gt=null,ct=null;const dt=_e.getContextAttributes();let ht=null,mt=null;const Ct=[],ft=[],pt=new Set,Vt=new Map,yt=new PerspectiveCamera$1;yt.layers.enable(1),yt.viewport=new Vector4;const Gt=new PerspectiveCamera$1;Gt.layers.enable(2),Gt.viewport=new Vector4;const Bt=[yt,Gt],vt=new ArrayCamera;vt.layers.enable(1),vt.layers.enable(2);let wt=null,Mt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Wt){let Ht=Ct[Wt];return Ht===void 0&&(Ht=new WebXRController,Ct[Wt]=Ht),Ht.getTargetRaySpace()},this.getControllerGrip=function(Wt){let Ht=Ct[Wt];return Ht===void 0&&(Ht=new WebXRController,Ct[Wt]=Ht),Ht.getGripSpace()},this.getHand=function(Wt){let Ht=Ct[Wt];return Ht===void 0&&(Ht=new WebXRController,Ct[Wt]=Ht),Ht.getHandSpace()};function kt(Wt){const Ht=ft.indexOf(Wt.inputSource);if(Ht===-1)return;const zt=Ct[Ht];zt!==void 0&&zt.dispatchEvent({type:Wt.type,data:Wt.inputSource})}function Nt(){nt.removeEventListener("select",kt),nt.removeEventListener("selectstart",kt),nt.removeEventListener("selectend",kt),nt.removeEventListener("squeeze",kt),nt.removeEventListener("squeezestart",kt),nt.removeEventListener("squeezeend",kt),nt.removeEventListener("end",Nt),nt.removeEventListener("inputsourceschange",Yt);for(let Wt=0;Wt<Ct.length;Wt++){const Ht=ft[Wt];Ht!==null&&(ft[Wt]=null,Ct[Wt].disconnect(Ht))}wt=null,Mt=null,_.setRenderTarget(ht),gt=null,lt=null,At=null,nt=null,mt=null,Et.stop(),tt.isPresenting=!1,tt.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Wt){it=Wt,tt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Wt){st=Wt,tt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ot||rt},this.setReferenceSpace=function(Wt){ot=Wt},this.getBaseLayer=function(){return lt!==null?lt:gt},this.getBinding=function(){return At},this.getFrame=function(){return ct},this.getSession=function(){return nt},this.setSession=async function(Wt){if(nt=Wt,nt!==null){if(ht=_.getRenderTarget(),nt.addEventListener("select",kt),nt.addEventListener("selectstart",kt),nt.addEventListener("selectend",kt),nt.addEventListener("squeeze",kt),nt.addEventListener("squeezestart",kt),nt.addEventListener("squeezeend",kt),nt.addEventListener("end",Nt),nt.addEventListener("inputsourceschange",Yt),dt.xrCompatible!==!0&&await _e.makeXRCompatible(),nt.renderState.layers===void 0||_.capabilities.isWebGL2===!1){const Ht={antialias:nt.renderState.layers===void 0?dt.antialias:!0,alpha:dt.alpha,depth:dt.depth,stencil:dt.stencil,framebufferScaleFactor:it};gt=new XRWebGLLayer(nt,_e,Ht),nt.updateRenderState({baseLayer:gt}),mt=new WebGLRenderTarget(gt.framebufferWidth,gt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,encoding:_.outputEncoding,stencilBuffer:dt.stencil})}else{let Ht=null,zt=null,Pt=null;dt.depth&&(Pt=dt.stencil?35056:33190,Ht=dt.stencil?DepthStencilFormat:DepthFormat,zt=dt.stencil?UnsignedInt248Type:UnsignedIntType);const Ot={colorFormat:32856,depthFormat:Pt,scaleFactor:it};At=new XRWebGLBinding(nt,_e),lt=At.createProjectionLayer(Ot),nt.updateRenderState({layers:[lt]}),mt=new WebGLRenderTarget(lt.textureWidth,lt.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(lt.textureWidth,lt.textureHeight,zt,void 0,void 0,void 0,void 0,void 0,void 0,Ht),stencilBuffer:dt.stencil,encoding:_.outputEncoding,samples:dt.antialias?4:0});const Jt=_.properties.get(mt);Jt.__ignoreDepthValues=lt.ignoreDepthValues}mt.isXRRenderTarget=!0,this.setFoveation(1),ot=null,rt=await nt.requestReferenceSpace(st),Et.setContext(nt),Et.start(),tt.isPresenting=!0,tt.dispatchEvent({type:"sessionstart"})}};function Yt(Wt){for(let Ht=0;Ht<Wt.removed.length;Ht++){const zt=Wt.removed[Ht],Pt=ft.indexOf(zt);Pt>=0&&(ft[Pt]=null,Ct[Pt].disconnect(zt))}for(let Ht=0;Ht<Wt.added.length;Ht++){const zt=Wt.added[Ht];let Pt=ft.indexOf(zt);if(Pt===-1){for(let Jt=0;Jt<Ct.length;Jt++)if(Jt>=ft.length){ft.push(zt),Pt=Jt;break}else if(ft[Jt]===null){ft[Jt]=zt,Pt=Jt;break}if(Pt===-1)break}const Ot=Ct[Pt];Ot&&Ot.connect(zt)}}const Lt=new Vector3,Xt=new Vector3;function _t(Wt,Ht,zt){Lt.setFromMatrixPosition(Ht.matrixWorld),Xt.setFromMatrixPosition(zt.matrixWorld);const Pt=Lt.distanceTo(Xt),Ot=Ht.projectionMatrix.elements,Jt=zt.projectionMatrix.elements,rn=Ot[14]/(Ot[10]-1),sn=Ot[14]/(Ot[10]+1),Vn=(Ot[9]+1)/Ot[5],dn=(Ot[9]-1)/Ot[5],gn=(Ot[8]-1)/Ot[0],$t=(Jt[8]+1)/Jt[0],tn=rn*gn,nn=rn*$t,Bn=Pt/(-gn+$t),Gn=Bn*-gn;Ht.matrixWorld.decompose(Wt.position,Wt.quaternion,Wt.scale),Wt.translateX(Gn),Wt.translateZ(Bn),Wt.matrixWorld.compose(Wt.position,Wt.quaternion,Wt.scale),Wt.matrixWorldInverse.copy(Wt.matrixWorld).invert();const kn=rn+Bn,pn=sn+Bn,Rn=tn-Gn,Mn=nn+(Pt-Gn),In=Vn*sn/pn*kn,Dt=dn*sn/pn*kn;Wt.projectionMatrix.makePerspective(Rn,Mn,In,Dt,kn,pn)}function Tt(Wt,Ht){Ht===null?Wt.matrixWorld.copy(Wt.matrix):Wt.matrixWorld.multiplyMatrices(Ht.matrixWorld,Wt.matrix),Wt.matrixWorldInverse.copy(Wt.matrixWorld).invert()}this.updateCamera=function(Wt){if(nt===null)return;vt.near=Gt.near=yt.near=Wt.near,vt.far=Gt.far=yt.far=Wt.far,(wt!==vt.near||Mt!==vt.far)&&(nt.updateRenderState({depthNear:vt.near,depthFar:vt.far}),wt=vt.near,Mt=vt.far);const Ht=Wt.parent,zt=vt.cameras;Tt(vt,Ht);for(let Ot=0;Ot<zt.length;Ot++)Tt(zt[Ot],Ht);vt.matrixWorld.decompose(vt.position,vt.quaternion,vt.scale),Wt.matrix.copy(vt.matrix),Wt.matrix.decompose(Wt.position,Wt.quaternion,Wt.scale);const Pt=Wt.children;for(let Ot=0,Jt=Pt.length;Ot<Jt;Ot++)Pt[Ot].updateMatrixWorld(!0);zt.length===2?_t(vt,yt,Gt):vt.projectionMatrix.copy(yt.projectionMatrix)},this.getCamera=function(){return vt},this.getFoveation=function(){if(lt!==null)return lt.fixedFoveation;if(gt!==null)return gt.fixedFoveation},this.setFoveation=function(Wt){lt!==null&&(lt.fixedFoveation=Wt),gt!==null&&gt.fixedFoveation!==void 0&&(gt.fixedFoveation=Wt)},this.getPlanes=function(){return pt};let St=null;function Zt(Wt,Ht){if(at=Ht.getViewerPose(ot||rt),ct=Ht,at!==null){const zt=at.views;gt!==null&&(_.setRenderTargetFramebuffer(mt,gt.framebuffer),_.setRenderTarget(mt));let Pt=!1;zt.length!==vt.cameras.length&&(vt.cameras.length=0,Pt=!0);for(let Ot=0;Ot<zt.length;Ot++){const Jt=zt[Ot];let rn=null;if(gt!==null)rn=gt.getViewport(Jt);else{const Vn=At.getViewSubImage(lt,Jt);rn=Vn.viewport,Ot===0&&(_.setRenderTargetTextures(mt,Vn.colorTexture,lt.ignoreDepthValues?void 0:Vn.depthStencilTexture),_.setRenderTarget(mt))}let sn=Bt[Ot];sn===void 0&&(sn=new PerspectiveCamera$1,sn.layers.enable(Ot),sn.viewport=new Vector4,Bt[Ot]=sn),sn.matrix.fromArray(Jt.transform.matrix),sn.projectionMatrix.fromArray(Jt.projectionMatrix),sn.viewport.set(rn.x,rn.y,rn.width,rn.height),Ot===0&&vt.matrix.copy(sn.matrix),Pt===!0&&vt.cameras.push(sn)}}for(let zt=0;zt<Ct.length;zt++){const Pt=ft[zt],Ot=Ct[zt];Pt!==null&&Ot!==void 0&&Ot.update(Pt,Ht,ot||rt)}if(St&&St(Wt,Ht),Ht.detectedPlanes){tt.dispatchEvent({type:"planesdetected",data:Ht.detectedPlanes});let zt=null;for(const Pt of pt)Ht.detectedPlanes.has(Pt)||(zt===null&&(zt=[]),zt.push(Pt));if(zt!==null)for(const Pt of zt)pt.delete(Pt),Vt.delete(Pt),tt.dispatchEvent({type:"planeremoved",data:Pt});for(const Pt of Ht.detectedPlanes)if(!pt.has(Pt))pt.add(Pt),Vt.set(Pt,Ht.lastChangedTime),tt.dispatchEvent({type:"planeadded",data:Pt});else{const Ot=Vt.get(Pt);Pt.lastChangedTime>Ot&&(Vt.set(Pt,Pt.lastChangedTime),tt.dispatchEvent({type:"planechanged",data:Pt}))}}ct=null}const Et=new WebGLAnimation;Et.setAnimationLoop(Zt),this.setAnimationLoop=function(Wt){St=Wt},this.dispose=function(){}}}function WebGLMaterials(et,_){function _e(ht,mt){mt.color.getRGB(ht.fogColor.value,getUnlitUniformColorSpace(et)),mt.isFog?(ht.fogNear.value=mt.near,ht.fogFar.value=mt.far):mt.isFogExp2&&(ht.fogDensity.value=mt.density)}function tt(ht,mt,Ct,ft,pt){mt.isMeshBasicMaterial||mt.isMeshLambertMaterial?nt(ht,mt):mt.isMeshToonMaterial?(nt(ht,mt),At(ht,mt)):mt.isMeshPhongMaterial?(nt(ht,mt),at(ht,mt)):mt.isMeshStandardMaterial?(nt(ht,mt),lt(ht,mt),mt.isMeshPhysicalMaterial&&gt(ht,mt,pt)):mt.isMeshMatcapMaterial?(nt(ht,mt),ct(ht,mt)):mt.isMeshDepthMaterial?nt(ht,mt):mt.isMeshDistanceMaterial?(nt(ht,mt),dt(ht,mt)):mt.isMeshNormalMaterial?nt(ht,mt):mt.isLineBasicMaterial?(it(ht,mt),mt.isLineDashedMaterial&&rt(ht,mt)):mt.isPointsMaterial?st(ht,mt,Ct,ft):mt.isSpriteMaterial?ot(ht,mt):mt.isShadowMaterial?(ht.color.value.copy(mt.color),ht.opacity.value=mt.opacity):mt.isShaderMaterial&&(mt.uniformsNeedUpdate=!1)}function nt(ht,mt){ht.opacity.value=mt.opacity,mt.color&&ht.diffuse.value.copy(mt.color),mt.emissive&&ht.emissive.value.copy(mt.emissive).multiplyScalar(mt.emissiveIntensity),mt.map&&(ht.map.value=mt.map),mt.alphaMap&&(ht.alphaMap.value=mt.alphaMap),mt.bumpMap&&(ht.bumpMap.value=mt.bumpMap,ht.bumpScale.value=mt.bumpScale,mt.side===BackSide&&(ht.bumpScale.value*=-1)),mt.displacementMap&&(ht.displacementMap.value=mt.displacementMap,ht.displacementScale.value=mt.displacementScale,ht.displacementBias.value=mt.displacementBias),mt.emissiveMap&&(ht.emissiveMap.value=mt.emissiveMap),mt.normalMap&&(ht.normalMap.value=mt.normalMap,ht.normalScale.value.copy(mt.normalScale),mt.side===BackSide&&ht.normalScale.value.negate()),mt.specularMap&&(ht.specularMap.value=mt.specularMap),mt.alphaTest>0&&(ht.alphaTest.value=mt.alphaTest);const Ct=_.get(mt).envMap;if(Ct&&(ht.envMap.value=Ct,ht.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1,ht.reflectivity.value=mt.reflectivity,ht.ior.value=mt.ior,ht.refractionRatio.value=mt.refractionRatio),mt.lightMap){ht.lightMap.value=mt.lightMap;const Vt=et.physicallyCorrectLights!==!0?Math.PI:1;ht.lightMapIntensity.value=mt.lightMapIntensity*Vt}mt.aoMap&&(ht.aoMap.value=mt.aoMap,ht.aoMapIntensity.value=mt.aoMapIntensity);let ft;mt.map?ft=mt.map:mt.specularMap?ft=mt.specularMap:mt.displacementMap?ft=mt.displacementMap:mt.normalMap?ft=mt.normalMap:mt.bumpMap?ft=mt.bumpMap:mt.roughnessMap?ft=mt.roughnessMap:mt.metalnessMap?ft=mt.metalnessMap:mt.alphaMap?ft=mt.alphaMap:mt.emissiveMap?ft=mt.emissiveMap:mt.clearcoatMap?ft=mt.clearcoatMap:mt.clearcoatNormalMap?ft=mt.clearcoatNormalMap:mt.clearcoatRoughnessMap?ft=mt.clearcoatRoughnessMap:mt.iridescenceMap?ft=mt.iridescenceMap:mt.iridescenceThicknessMap?ft=mt.iridescenceThicknessMap:mt.specularIntensityMap?ft=mt.specularIntensityMap:mt.specularColorMap?ft=mt.specularColorMap:mt.transmissionMap?ft=mt.transmissionMap:mt.thicknessMap?ft=mt.thicknessMap:mt.sheenColorMap?ft=mt.sheenColorMap:mt.sheenRoughnessMap&&(ft=mt.sheenRoughnessMap),ft!==void 0&&(ft.isWebGLRenderTarget&&(ft=ft.texture),ft.matrixAutoUpdate===!0&&ft.updateMatrix(),ht.uvTransform.value.copy(ft.matrix));let pt;mt.aoMap?pt=mt.aoMap:mt.lightMap&&(pt=mt.lightMap),pt!==void 0&&(pt.isWebGLRenderTarget&&(pt=pt.texture),pt.matrixAutoUpdate===!0&&pt.updateMatrix(),ht.uv2Transform.value.copy(pt.matrix))}function it(ht,mt){ht.diffuse.value.copy(mt.color),ht.opacity.value=mt.opacity}function rt(ht,mt){ht.dashSize.value=mt.dashSize,ht.totalSize.value=mt.dashSize+mt.gapSize,ht.scale.value=mt.scale}function st(ht,mt,Ct,ft){ht.diffuse.value.copy(mt.color),ht.opacity.value=mt.opacity,ht.size.value=mt.size*Ct,ht.scale.value=ft*.5,mt.map&&(ht.map.value=mt.map),mt.alphaMap&&(ht.alphaMap.value=mt.alphaMap),mt.alphaTest>0&&(ht.alphaTest.value=mt.alphaTest);let pt;mt.map?pt=mt.map:mt.alphaMap&&(pt=mt.alphaMap),pt!==void 0&&(pt.matrixAutoUpdate===!0&&pt.updateMatrix(),ht.uvTransform.value.copy(pt.matrix))}function ot(ht,mt){ht.diffuse.value.copy(mt.color),ht.opacity.value=mt.opacity,ht.rotation.value=mt.rotation,mt.map&&(ht.map.value=mt.map),mt.alphaMap&&(ht.alphaMap.value=mt.alphaMap),mt.alphaTest>0&&(ht.alphaTest.value=mt.alphaTest);let Ct;mt.map?Ct=mt.map:mt.alphaMap&&(Ct=mt.alphaMap),Ct!==void 0&&(Ct.matrixAutoUpdate===!0&&Ct.updateMatrix(),ht.uvTransform.value.copy(Ct.matrix))}function at(ht,mt){ht.specular.value.copy(mt.specular),ht.shininess.value=Math.max(mt.shininess,1e-4)}function At(ht,mt){mt.gradientMap&&(ht.gradientMap.value=mt.gradientMap)}function lt(ht,mt){ht.roughness.value=mt.roughness,ht.metalness.value=mt.metalness,mt.roughnessMap&&(ht.roughnessMap.value=mt.roughnessMap),mt.metalnessMap&&(ht.metalnessMap.value=mt.metalnessMap),_.get(mt).envMap&&(ht.envMapIntensity.value=mt.envMapIntensity)}function gt(ht,mt,Ct){ht.ior.value=mt.ior,mt.sheen>0&&(ht.sheenColor.value.copy(mt.sheenColor).multiplyScalar(mt.sheen),ht.sheenRoughness.value=mt.sheenRoughness,mt.sheenColorMap&&(ht.sheenColorMap.value=mt.sheenColorMap),mt.sheenRoughnessMap&&(ht.sheenRoughnessMap.value=mt.sheenRoughnessMap)),mt.clearcoat>0&&(ht.clearcoat.value=mt.clearcoat,ht.clearcoatRoughness.value=mt.clearcoatRoughness,mt.clearcoatMap&&(ht.clearcoatMap.value=mt.clearcoatMap),mt.clearcoatRoughnessMap&&(ht.clearcoatRoughnessMap.value=mt.clearcoatRoughnessMap),mt.clearcoatNormalMap&&(ht.clearcoatNormalScale.value.copy(mt.clearcoatNormalScale),ht.clearcoatNormalMap.value=mt.clearcoatNormalMap,mt.side===BackSide&&ht.clearcoatNormalScale.value.negate())),mt.iridescence>0&&(ht.iridescence.value=mt.iridescence,ht.iridescenceIOR.value=mt.iridescenceIOR,ht.iridescenceThicknessMinimum.value=mt.iridescenceThicknessRange[0],ht.iridescenceThicknessMaximum.value=mt.iridescenceThicknessRange[1],mt.iridescenceMap&&(ht.iridescenceMap.value=mt.iridescenceMap),mt.iridescenceThicknessMap&&(ht.iridescenceThicknessMap.value=mt.iridescenceThicknessMap)),mt.transmission>0&&(ht.transmission.value=mt.transmission,ht.transmissionSamplerMap.value=Ct.texture,ht.transmissionSamplerSize.value.set(Ct.width,Ct.height),mt.transmissionMap&&(ht.transmissionMap.value=mt.transmissionMap),ht.thickness.value=mt.thickness,mt.thicknessMap&&(ht.thicknessMap.value=mt.thicknessMap),ht.attenuationDistance.value=mt.attenuationDistance,ht.attenuationColor.value.copy(mt.attenuationColor)),ht.specularIntensity.value=mt.specularIntensity,ht.specularColor.value.copy(mt.specularColor),mt.specularIntensityMap&&(ht.specularIntensityMap.value=mt.specularIntensityMap),mt.specularColorMap&&(ht.specularColorMap.value=mt.specularColorMap)}function ct(ht,mt){mt.matcap&&(ht.matcap.value=mt.matcap)}function dt(ht,mt){ht.referencePosition.value.copy(mt.referencePosition),ht.nearDistance.value=mt.nearDistance,ht.farDistance.value=mt.farDistance}return{refreshFogUniforms:_e,refreshMaterialUniforms:tt}}function WebGLUniformsGroups(et,_,_e,tt){let nt={},it={},rt=[];const st=_e.isWebGL2?et.getParameter(35375):0;function ot(ft,pt){const Vt=pt.program;tt.uniformBlockBinding(ft,Vt)}function at(ft,pt){let Vt=nt[ft.id];Vt===void 0&&(dt(ft),Vt=At(ft),nt[ft.id]=Vt,ft.addEventListener("dispose",mt));const yt=pt.program;tt.updateUBOMapping(ft,yt);const Gt=_.render.frame;it[ft.id]!==Gt&&(gt(ft),it[ft.id]=Gt)}function At(ft){const pt=lt();ft.__bindingPointIndex=pt;const Vt=et.createBuffer(),yt=ft.__size,Gt=ft.usage;return et.bindBuffer(35345,Vt),et.bufferData(35345,yt,Gt),et.bindBuffer(35345,null),et.bindBufferBase(35345,pt,Vt),Vt}function lt(){for(let ft=0;ft<st;ft++)if(rt.indexOf(ft)===-1)return rt.push(ft),ft;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function gt(ft){const pt=nt[ft.id],Vt=ft.uniforms,yt=ft.__cache;et.bindBuffer(35345,pt);for(let Gt=0,Bt=Vt.length;Gt<Bt;Gt++){const vt=Vt[Gt];if(ct(vt,Gt,yt)===!0){const wt=vt.__offset,Mt=Array.isArray(vt.value)?vt.value:[vt.value];let kt=0;for(let Nt=0;Nt<Mt.length;Nt++){const Yt=Mt[Nt],Lt=ht(Yt);typeof Yt=="number"?(vt.__data[0]=Yt,et.bufferSubData(35345,wt+kt,vt.__data)):Yt.isMatrix3?(vt.__data[0]=Yt.elements[0],vt.__data[1]=Yt.elements[1],vt.__data[2]=Yt.elements[2],vt.__data[3]=Yt.elements[0],vt.__data[4]=Yt.elements[3],vt.__data[5]=Yt.elements[4],vt.__data[6]=Yt.elements[5],vt.__data[7]=Yt.elements[0],vt.__data[8]=Yt.elements[6],vt.__data[9]=Yt.elements[7],vt.__data[10]=Yt.elements[8],vt.__data[11]=Yt.elements[0]):(Yt.toArray(vt.__data,kt),kt+=Lt.storage/Float32Array.BYTES_PER_ELEMENT)}et.bufferSubData(35345,wt,vt.__data)}}et.bindBuffer(35345,null)}function ct(ft,pt,Vt){const yt=ft.value;if(Vt[pt]===void 0){if(typeof yt=="number")Vt[pt]=yt;else{const Gt=Array.isArray(yt)?yt:[yt],Bt=[];for(let vt=0;vt<Gt.length;vt++)Bt.push(Gt[vt].clone());Vt[pt]=Bt}return!0}else if(typeof yt=="number"){if(Vt[pt]!==yt)return Vt[pt]=yt,!0}else{const Gt=Array.isArray(Vt[pt])?Vt[pt]:[Vt[pt]],Bt=Array.isArray(yt)?yt:[yt];for(let vt=0;vt<Gt.length;vt++){const wt=Gt[vt];if(wt.equals(Bt[vt])===!1)return wt.copy(Bt[vt]),!0}}return!1}function dt(ft){const pt=ft.uniforms;let Vt=0;const yt=16;let Gt=0;for(let Bt=0,vt=pt.length;Bt<vt;Bt++){const wt=pt[Bt],Mt={boundary:0,storage:0},kt=Array.isArray(wt.value)?wt.value:[wt.value];for(let Nt=0,Yt=kt.length;Nt<Yt;Nt++){const Lt=kt[Nt],Xt=ht(Lt);Mt.boundary+=Xt.boundary,Mt.storage+=Xt.storage}if(wt.__data=new Float32Array(Mt.storage/Float32Array.BYTES_PER_ELEMENT),wt.__offset=Vt,Bt>0){Gt=Vt%yt;const Nt=yt-Gt;Gt!==0&&Nt-Mt.boundary<0&&(Vt+=yt-Gt,wt.__offset=Vt)}Vt+=Mt.storage}return Gt=Vt%yt,Gt>0&&(Vt+=yt-Gt),ft.__size=Vt,ft.__cache={},this}function ht(ft){const pt={boundary:0,storage:0};return typeof ft=="number"?(pt.boundary=4,pt.storage=4):ft.isVector2?(pt.boundary=8,pt.storage=8):ft.isVector3||ft.isColor?(pt.boundary=16,pt.storage=12):ft.isVector4?(pt.boundary=16,pt.storage=16):ft.isMatrix3?(pt.boundary=48,pt.storage=48):ft.isMatrix4?(pt.boundary=64,pt.storage=64):ft.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ft),pt}function mt(ft){const pt=ft.target;pt.removeEventListener("dispose",mt);const Vt=rt.indexOf(pt.__bindingPointIndex);rt.splice(Vt,1),et.deleteBuffer(nt[pt.id]),delete nt[pt.id],delete it[pt.id]}function Ct(){for(const ft in nt)et.deleteBuffer(nt[ft]);rt=[],nt={},it={}}return{bind:ot,update:at,dispose:Ct}}function createCanvasElement(){const et=createElementNS("canvas");return et.style.display="block",et}function WebGLRenderer(et={}){this.isWebGLRenderer=!0;const _=et.canvas!==void 0?et.canvas:createCanvasElement(),_e=et.context!==void 0?et.context:null,tt=et.depth!==void 0?et.depth:!0,nt=et.stencil!==void 0?et.stencil:!0,it=et.antialias!==void 0?et.antialias:!1,rt=et.premultipliedAlpha!==void 0?et.premultipliedAlpha:!0,st=et.preserveDrawingBuffer!==void 0?et.preserveDrawingBuffer:!1,ot=et.powerPreference!==void 0?et.powerPreference:"default",at=et.failIfMajorPerformanceCaveat!==void 0?et.failIfMajorPerformanceCaveat:!1;let At;_e!==null?At=_e.getContextAttributes().alpha:At=et.alpha!==void 0?et.alpha:!1;let lt=null,gt=null;const ct=[],dt=[];this.domElement=_,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=LinearEncoding,this.physicallyCorrectLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const ht=this;let mt=!1,Ct=0,ft=0,pt=null,Vt=-1,yt=null;const Gt=new Vector4,Bt=new Vector4;let vt=null,wt=_.width,Mt=_.height,kt=1,Nt=null,Yt=null;const Lt=new Vector4(0,0,wt,Mt),Xt=new Vector4(0,0,wt,Mt);let _t=!1;const Tt=new Frustum;let St=!1,Zt=!1,Et=null;const Wt=new Matrix4,Ht=new Vector2,zt=new Vector3,Pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ot(){return pt===null?kt:1}let Jt=_e;function rn(Ut,ln){for(let mn=0;mn<Ut.length;mn++){const An=Ut[mn],Zn=_.getContext(An,ln);if(Zn!==null)return Zn}return null}try{const Ut={alpha:!0,depth:tt,stencil:nt,antialias:it,premultipliedAlpha:rt,preserveDrawingBuffer:st,powerPreference:ot,failIfMajorPerformanceCaveat:at};if("setAttribute"in _&&_.setAttribute("data-engine",`three.js r${REVISION}`),_.addEventListener("webglcontextlost",yn,!1),_.addEventListener("webglcontextrestored",bn,!1),_.addEventListener("webglcontextcreationerror",En,!1),Jt===null){const ln=["webgl2","webgl","experimental-webgl"];if(ht.isWebGL1Renderer===!0&&ln.shift(),Jt=rn(ln,Ut),Jt===null)throw rn(ln)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Jt.getShaderPrecisionFormat===void 0&&(Jt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ut){throw console.error("THREE.WebGLRenderer: "+Ut.message),Ut}let sn,Vn,dn,gn,$t,tn,nn,Bn,Gn,kn,pn,Rn,Mn,In,Dt,Kt,en,un,Sn,wn,Fn,_n,fn,Nn;function jt(){sn=new WebGLExtensions(Jt),Vn=new WebGLCapabilities(Jt,sn,et),sn.init(Vn),_n=new WebGLUtils(Jt,sn,Vn),dn=new WebGLState(Jt,sn,Vn),gn=new WebGLInfo,$t=new WebGLProperties,tn=new WebGLTextures(Jt,sn,dn,$t,Vn,_n,gn),nn=new WebGLCubeMaps(ht),Bn=new WebGLCubeUVMaps(ht),Gn=new WebGLAttributes(Jt,Vn),fn=new WebGLBindingStates(Jt,sn,Gn,Vn),kn=new WebGLGeometries(Jt,Gn,gn,fn),pn=new WebGLObjects(Jt,kn,Gn,gn),Sn=new WebGLMorphtargets(Jt,Vn,tn),Kt=new WebGLClipping($t),Rn=new WebGLPrograms(ht,nn,Bn,sn,Vn,fn,Kt),Mn=new WebGLMaterials(ht,$t),In=new WebGLRenderLists,Dt=new WebGLRenderStates(sn,Vn),un=new WebGLBackground(ht,nn,Bn,dn,pn,At,rt),en=new WebGLShadowMap(ht,pn,Vn),Nn=new WebGLUniformsGroups(Jt,gn,Vn,dn),wn=new WebGLBufferRenderer(Jt,sn,gn,Vn),Fn=new WebGLIndexedBufferRenderer(Jt,sn,gn,Vn),gn.programs=Rn.programs,ht.capabilities=Vn,ht.extensions=sn,ht.properties=$t,ht.renderLists=In,ht.shadowMap=en,ht.state=dn,ht.info=gn}jt();const cn=new WebXRManager(ht,Jt);this.xr=cn,this.getContext=function(){return Jt},this.getContextAttributes=function(){return Jt.getContextAttributes()},this.forceContextLoss=function(){const Ut=sn.get("WEBGL_lose_context");Ut&&Ut.loseContext()},this.forceContextRestore=function(){const Ut=sn.get("WEBGL_lose_context");Ut&&Ut.restoreContext()},this.getPixelRatio=function(){return kt},this.setPixelRatio=function(Ut){Ut!==void 0&&(kt=Ut,this.setSize(wt,Mt,!1))},this.getSize=function(Ut){return Ut.set(wt,Mt)},this.setSize=function(Ut,ln,mn){if(cn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}wt=Ut,Mt=ln,_.width=Math.floor(Ut*kt),_.height=Math.floor(ln*kt),mn!==!1&&(_.style.width=Ut+"px",_.style.height=ln+"px"),this.setViewport(0,0,Ut,ln)},this.getDrawingBufferSize=function(Ut){return Ut.set(wt*kt,Mt*kt).floor()},this.setDrawingBufferSize=function(Ut,ln,mn){wt=Ut,Mt=ln,kt=mn,_.width=Math.floor(Ut*mn),_.height=Math.floor(ln*mn),this.setViewport(0,0,Ut,ln)},this.getCurrentViewport=function(Ut){return Ut.copy(Gt)},this.getViewport=function(Ut){return Ut.copy(Lt)},this.setViewport=function(Ut,ln,mn,An){Ut.isVector4?Lt.set(Ut.x,Ut.y,Ut.z,Ut.w):Lt.set(Ut,ln,mn,An),dn.viewport(Gt.copy(Lt).multiplyScalar(kt).floor())},this.getScissor=function(Ut){return Ut.copy(Xt)},this.setScissor=function(Ut,ln,mn,An){Ut.isVector4?Xt.set(Ut.x,Ut.y,Ut.z,Ut.w):Xt.set(Ut,ln,mn,An),dn.scissor(Bt.copy(Xt).multiplyScalar(kt).floor())},this.getScissorTest=function(){return _t},this.setScissorTest=function(Ut){dn.setScissorTest(_t=Ut)},this.setOpaqueSort=function(Ut){Nt=Ut},this.setTransparentSort=function(Ut){Yt=Ut},this.getClearColor=function(Ut){return Ut.copy(un.getClearColor())},this.setClearColor=function(){un.setClearColor.apply(un,arguments)},this.getClearAlpha=function(){return un.getClearAlpha()},this.setClearAlpha=function(){un.setClearAlpha.apply(un,arguments)},this.clear=function(Ut=!0,ln=!0,mn=!0){let An=0;Ut&&(An|=16384),ln&&(An|=256),mn&&(An|=1024),Jt.clear(An)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){_.removeEventListener("webglcontextlost",yn,!1),_.removeEventListener("webglcontextrestored",bn,!1),_.removeEventListener("webglcontextcreationerror",En,!1),In.dispose(),Dt.dispose(),$t.dispose(),nn.dispose(),Bn.dispose(),pn.dispose(),fn.dispose(),Nn.dispose(),Rn.dispose(),cn.dispose(),cn.removeEventListener("sessionstart",Ln),cn.removeEventListener("sessionend",Kn),Et&&(Et.dispose(),Et=null),tr.stop()};function yn(Ut){Ut.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),mt=!0}function bn(){console.log("THREE.WebGLRenderer: Context Restored."),mt=!1;const Ut=gn.autoReset,ln=en.enabled,mn=en.autoUpdate,An=en.needsUpdate,Zn=en.type;jt(),gn.autoReset=Ut,en.enabled=ln,en.autoUpdate=mn,en.needsUpdate=An,en.type=Zn}function En(Ut){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ut.statusMessage)}function Dn(Ut){const ln=Ut.target;ln.removeEventListener("dispose",Dn),jn(ln)}function jn(Ut){qt(Ut),$t.remove(Ut)}function qt(Ut){const ln=$t.get(Ut).programs;ln!==void 0&&(ln.forEach(function(mn){Rn.releaseProgram(mn)}),Ut.isShaderMaterial&&Rn.releaseShaderCache(Ut))}this.renderBufferDirect=function(Ut,ln,mn,An,Zn,zn){ln===null&&(ln=Pt);const On=Zn.isMesh&&Zn.matrixWorld.determinant()<0,nr=zr(Ut,ln,mn,An,Zn);dn.setMaterial(An,On);let ir=mn.index,rr=1;An.wireframe===!0&&(ir=kn.getWireframeAttribute(mn),rr=2);const sr=mn.drawRange,lr=mn.attributes.position;let Br=sr.start*rr,Fr=(sr.start+sr.count)*rr;zn!==null&&(Br=Math.max(Br,zn.start*rr),Fr=Math.min(Fr,(zn.start+zn.count)*rr)),ir!==null?(Br=Math.max(Br,0),Fr=Math.min(Fr,ir.count)):lr!=null&&(Br=Math.max(Br,0),Fr=Math.min(Fr,lr.count));const ts=Fr-Br;if(ts<0||ts===1/0)return;fn.setup(Zn,An,nr,mn,ir);let ds,Hn=wn;if(ir!==null&&(ds=Gn.get(ir),Hn=Fn,Hn.setIndex(ds)),Zn.isMesh)An.wireframe===!0?(dn.setLineWidth(An.wireframeLinewidth*Ot()),Hn.setMode(1)):Hn.setMode(4);else if(Zn.isLine){let $n=An.linewidth;$n===void 0&&($n=1),dn.setLineWidth($n*Ot()),Zn.isLineSegments?Hn.setMode(1):Zn.isLineLoop?Hn.setMode(2):Hn.setMode(3)}else Zn.isPoints?Hn.setMode(0):Zn.isSprite&&Hn.setMode(4);if(Zn.isInstancedMesh)Hn.renderInstances(Br,ts,Zn.count);else if(mn.isInstancedBufferGeometry){const $n=mn._maxInstanceCount!==void 0?mn._maxInstanceCount:1/0,Ys=Math.min(mn.instanceCount,$n);Hn.renderInstances(Br,ts,Ys)}else Hn.render(Br,ts)},this.compile=function(Ut,ln){function mn(An,Zn,zn){An.transparent===!0&&An.side===TwoPassDoubleSide?(An.side=BackSide,An.needsUpdate=!0,cr(An,Zn,zn),An.side=FrontSide,An.needsUpdate=!0,cr(An,Zn,zn),An.side=TwoPassDoubleSide):cr(An,Zn,zn)}gt=Dt.get(Ut),gt.init(),dt.push(gt),Ut.traverseVisible(function(An){An.isLight&&An.layers.test(ln.layers)&&(gt.pushLight(An),An.castShadow&&gt.pushShadow(An))}),gt.setupLights(ht.physicallyCorrectLights),Ut.traverse(function(An){const Zn=An.material;if(Zn)if(Array.isArray(Zn))for(let zn=0;zn<Zn.length;zn++){const On=Zn[zn];mn(On,Ut,An)}else mn(Zn,Ut,An)}),dt.pop(),gt=null};let hn=null;function Wn(Ut){hn&&hn(Ut)}function Ln(){tr.stop()}function Kn(){tr.start()}const tr=new WebGLAnimation;tr.setAnimationLoop(Wn),typeof self<"u"&&tr.setContext(self),this.setAnimationLoop=function(Ut){hn=Ut,cn.setAnimationLoop(Ut),Ut===null?tr.stop():tr.start()},cn.addEventListener("sessionstart",Ln),cn.addEventListener("sessionend",Kn),this.render=function(Ut,ln){if(ln!==void 0&&ln.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(mt===!0)return;Ut.matrixWorldAutoUpdate===!0&&Ut.updateMatrixWorld(),ln.parent===null&&ln.matrixWorldAutoUpdate===!0&&ln.updateMatrixWorld(),cn.enabled===!0&&cn.isPresenting===!0&&(cn.cameraAutoUpdate===!0&&cn.updateCamera(ln),ln=cn.getCamera()),Ut.isScene===!0&&Ut.onBeforeRender(ht,Ut,ln,pt),gt=Dt.get(Ut,dt.length),gt.init(),dt.push(gt),Wt.multiplyMatrices(ln.projectionMatrix,ln.matrixWorldInverse),Tt.setFromProjectionMatrix(Wt),Zt=this.localClippingEnabled,St=Kt.init(this.clippingPlanes,Zt,ln),lt=In.get(Ut,ct.length),lt.init(),ct.push(lt),ur(Ut,ln,0,ht.sortObjects),lt.finish(),ht.sortObjects===!0&&lt.sort(Nt,Yt),St===!0&&Kt.beginShadows();const mn=gt.state.shadowsArray;if(en.render(mn,Ut,ln),St===!0&&Kt.endShadows(),this.info.autoReset===!0&&this.info.reset(),un.render(lt,Ut),gt.setupLights(ht.physicallyCorrectLights),ln.isArrayCamera){const An=ln.cameras;for(let Zn=0,zn=An.length;Zn<zn;Zn++){const On=An[Zn];pr(lt,Ut,On,On.viewport)}}else pr(lt,Ut,ln);pt!==null&&(tn.updateMultisampleRenderTarget(pt),tn.updateRenderTargetMipmap(pt)),Ut.isScene===!0&&Ut.onAfterRender(ht,Ut,ln),fn.resetDefaultState(),Vt=-1,yt=null,dt.pop(),dt.length>0?gt=dt[dt.length-1]:gt=null,ct.pop(),ct.length>0?lt=ct[ct.length-1]:lt=null};function ur(Ut,ln,mn,An){if(Ut.visible===!1)return;if(Ut.layers.test(ln.layers)){if(Ut.isGroup)mn=Ut.renderOrder;else if(Ut.isLOD)Ut.autoUpdate===!0&&Ut.update(ln);else if(Ut.isLight)gt.pushLight(Ut),Ut.castShadow&&gt.pushShadow(Ut);else if(Ut.isSprite){if(!Ut.frustumCulled||Tt.intersectsSprite(Ut)){An&&zt.setFromMatrixPosition(Ut.matrixWorld).applyMatrix4(Wt);const On=pn.update(Ut),nr=Ut.material;nr.visible&&lt.push(Ut,On,nr,mn,zt.z,null)}}else if((Ut.isMesh||Ut.isLine||Ut.isPoints)&&(Ut.isSkinnedMesh&&Ut.skeleton.frame!==gn.render.frame&&(Ut.skeleton.update(),Ut.skeleton.frame=gn.render.frame),!Ut.frustumCulled||Tt.intersectsObject(Ut))){An&&zt.setFromMatrixPosition(Ut.matrixWorld).applyMatrix4(Wt);const On=pn.update(Ut),nr=Ut.material;if(Array.isArray(nr)){const ir=On.groups;for(let rr=0,sr=ir.length;rr<sr;rr++){const lr=ir[rr],Br=nr[lr.materialIndex];Br&&Br.visible&&lt.push(Ut,On,Br,mn,zt.z,lr)}}else nr.visible&&lt.push(Ut,On,nr,mn,zt.z,null)}}const zn=Ut.children;for(let On=0,nr=zn.length;On<nr;On++)ur(zn[On],ln,mn,An)}function pr(Ut,ln,mn,An){const Zn=Ut.opaque,zn=Ut.transmissive,On=Ut.transparent;gt.setupLightsView(mn),zn.length>0&&Ir(Zn,ln,mn),An&&dn.viewport(Gt.copy(An)),Zn.length>0&&Cr(Zn,ln,mn),zn.length>0&&Cr(zn,ln,mn),On.length>0&&Cr(On,ln,mn),dn.buffers.depth.setTest(!0),dn.buffers.depth.setMask(!0),dn.buffers.color.setMask(!0),dn.setPolygonOffset(!1)}function Ir(Ut,ln,mn){const An=Vn.isWebGL2;Et===null&&(Et=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:sn.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:An&&it===!0?4:0})),ht.getDrawingBufferSize(Ht),An?Et.setSize(Ht.x,Ht.y):Et.setSize(floorPowerOfTwo(Ht.x),floorPowerOfTwo(Ht.y));const Zn=ht.getRenderTarget();ht.setRenderTarget(Et),ht.clear();const zn=ht.toneMapping;ht.toneMapping=NoToneMapping,Cr(Ut,ln,mn),ht.toneMapping=zn,tn.updateMultisampleRenderTarget(Et),tn.updateRenderTargetMipmap(Et),ht.setRenderTarget(Zn)}function Cr(Ut,ln,mn){const An=ln.isScene===!0?ln.overrideMaterial:null;for(let Zn=0,zn=Ut.length;Zn<zn;Zn++){const On=Ut[Zn],nr=On.object,ir=On.geometry,rr=An===null?On.material:An,sr=On.group;nr.layers.test(mn.layers)&&dr(nr,ln,mn,ir,rr,sr)}}function dr(Ut,ln,mn,An,Zn,zn){Ut.onBeforeRender(ht,ln,mn,An,Zn,zn),Ut.modelViewMatrix.multiplyMatrices(mn.matrixWorldInverse,Ut.matrixWorld),Ut.normalMatrix.getNormalMatrix(Ut.modelViewMatrix),Zn.onBeforeRender(ht,ln,mn,An,Ut,zn),Zn.transparent===!0&&Zn.side===TwoPassDoubleSide?(Zn.side=BackSide,Zn.needsUpdate=!0,ht.renderBufferDirect(mn,ln,An,Zn,Ut,zn),Zn.side=FrontSide,Zn.needsUpdate=!0,ht.renderBufferDirect(mn,ln,An,Zn,Ut,zn),Zn.side=TwoPassDoubleSide):ht.renderBufferDirect(mn,ln,An,Zn,Ut,zn),Ut.onAfterRender(ht,ln,mn,An,Zn,zn)}function cr(Ut,ln,mn){ln.isScene!==!0&&(ln=Pt);const An=$t.get(Ut),Zn=gt.state.lights,zn=gt.state.shadowsArray,On=Zn.state.version,nr=Rn.getParameters(Ut,Zn.state,zn,ln,mn),ir=Rn.getProgramCacheKey(nr);let rr=An.programs;An.environment=Ut.isMeshStandardMaterial?ln.environment:null,An.fog=ln.fog,An.envMap=(Ut.isMeshStandardMaterial?Bn:nn).get(Ut.envMap||An.environment),rr===void 0&&(Ut.addEventListener("dispose",Dn),rr=new Map,An.programs=rr);let sr=rr.get(ir);if(sr!==void 0){if(An.currentProgram===sr&&An.lightsStateVersion===On)return Jr(Ut,nr),sr}else nr.uniforms=Rn.getUniforms(Ut),Ut.onBuild(mn,nr,ht),Ut.onBeforeCompile(nr,ht),sr=Rn.acquireProgram(nr,ir),rr.set(ir,sr),An.uniforms=nr.uniforms;const lr=An.uniforms;(!Ut.isShaderMaterial&&!Ut.isRawShaderMaterial||Ut.clipping===!0)&&(lr.clippingPlanes=Kt.uniform),Jr(Ut,nr),An.needsLights=wr(Ut),An.lightsStateVersion=On,An.needsLights&&(lr.ambientLightColor.value=Zn.state.ambient,lr.lightProbe.value=Zn.state.probe,lr.directionalLights.value=Zn.state.directional,lr.directionalLightShadows.value=Zn.state.directionalShadow,lr.spotLights.value=Zn.state.spot,lr.spotLightShadows.value=Zn.state.spotShadow,lr.rectAreaLights.value=Zn.state.rectArea,lr.ltc_1.value=Zn.state.rectAreaLTC1,lr.ltc_2.value=Zn.state.rectAreaLTC2,lr.pointLights.value=Zn.state.point,lr.pointLightShadows.value=Zn.state.pointShadow,lr.hemisphereLights.value=Zn.state.hemi,lr.directionalShadowMap.value=Zn.state.directionalShadowMap,lr.directionalShadowMatrix.value=Zn.state.directionalShadowMatrix,lr.spotShadowMap.value=Zn.state.spotShadowMap,lr.spotLightMatrix.value=Zn.state.spotLightMatrix,lr.spotLightMap.value=Zn.state.spotLightMap,lr.pointShadowMap.value=Zn.state.pointShadowMap,lr.pointShadowMatrix.value=Zn.state.pointShadowMatrix);const Br=sr.getUniforms(),Fr=WebGLUniforms.seqWithValue(Br.seq,lr);return An.currentProgram=sr,An.uniformsList=Fr,sr}function Jr(Ut,ln){const mn=$t.get(Ut);mn.outputEncoding=ln.outputEncoding,mn.instancing=ln.instancing,mn.skinning=ln.skinning,mn.morphTargets=ln.morphTargets,mn.morphNormals=ln.morphNormals,mn.morphColors=ln.morphColors,mn.morphTargetsCount=ln.morphTargetsCount,mn.numClippingPlanes=ln.numClippingPlanes,mn.numIntersection=ln.numClipIntersection,mn.vertexAlphas=ln.vertexAlphas,mn.vertexTangents=ln.vertexTangents,mn.toneMapping=ln.toneMapping}function zr(Ut,ln,mn,An,Zn){ln.isScene!==!0&&(ln=Pt),tn.resetTextureUnits();const zn=ln.fog,On=An.isMeshStandardMaterial?ln.environment:null,nr=pt===null?ht.outputEncoding:pt.isXRRenderTarget===!0?pt.texture.encoding:LinearEncoding,ir=(An.isMeshStandardMaterial?Bn:nn).get(An.envMap||On),rr=An.vertexColors===!0&&!!mn.attributes.color&&mn.attributes.color.itemSize===4,sr=!!An.normalMap&&!!mn.attributes.tangent,lr=!!mn.morphAttributes.position,Br=!!mn.morphAttributes.normal,Fr=!!mn.morphAttributes.color,ts=An.toneMapped?ht.toneMapping:NoToneMapping,ds=mn.morphAttributes.position||mn.morphAttributes.normal||mn.morphAttributes.color,Hn=ds!==void 0?ds.length:0,$n=$t.get(An),Ys=gt.state.lights;if(St===!0&&(Zt===!0||Ut!==yt)){const hr=Ut===yt&&An.id===Vt;Kt.setState(An,Ut,hr)}let br=!1;An.version===$n.__version?($n.needsLights&&$n.lightsStateVersion!==Ys.state.version||$n.outputEncoding!==nr||Zn.isInstancedMesh&&$n.instancing===!1||!Zn.isInstancedMesh&&$n.instancing===!0||Zn.isSkinnedMesh&&$n.skinning===!1||!Zn.isSkinnedMesh&&$n.skinning===!0||$n.envMap!==ir||An.fog===!0&&$n.fog!==zn||$n.numClippingPlanes!==void 0&&($n.numClippingPlanes!==Kt.numPlanes||$n.numIntersection!==Kt.numIntersection)||$n.vertexAlphas!==rr||$n.vertexTangents!==sr||$n.morphTargets!==lr||$n.morphNormals!==Br||$n.morphColors!==Fr||$n.toneMapping!==ts||Vn.isWebGL2===!0&&$n.morphTargetsCount!==Hn)&&(br=!0):(br=!0,$n.__version=An.version);let ys=$n.currentProgram;br===!0&&(ys=cr(An,ln,Zn));let Ms=!1,Pr=!1,Dr=!1;const qn=ys.getUniforms(),ar=$n.uniforms;if(dn.useProgram(ys.program)&&(Ms=!0,Pr=!0,Dr=!0),An.id!==Vt&&(Vt=An.id,Pr=!0),Ms||yt!==Ut){if(qn.setValue(Jt,"projectionMatrix",Ut.projectionMatrix),Vn.logarithmicDepthBuffer&&qn.setValue(Jt,"logDepthBufFC",2/(Math.log(Ut.far+1)/Math.LN2)),yt!==Ut&&(yt=Ut,Pr=!0,Dr=!0),An.isShaderMaterial||An.isMeshPhongMaterial||An.isMeshToonMaterial||An.isMeshStandardMaterial||An.envMap){const hr=qn.map.cameraPosition;hr!==void 0&&hr.setValue(Jt,zt.setFromMatrixPosition(Ut.matrixWorld))}(An.isMeshPhongMaterial||An.isMeshToonMaterial||An.isMeshLambertMaterial||An.isMeshBasicMaterial||An.isMeshStandardMaterial||An.isShaderMaterial)&&qn.setValue(Jt,"isOrthographic",Ut.isOrthographicCamera===!0),(An.isMeshPhongMaterial||An.isMeshToonMaterial||An.isMeshLambertMaterial||An.isMeshBasicMaterial||An.isMeshStandardMaterial||An.isShaderMaterial||An.isShadowMaterial||Zn.isSkinnedMesh)&&qn.setValue(Jt,"viewMatrix",Ut.matrixWorldInverse)}if(Zn.isSkinnedMesh){qn.setOptional(Jt,Zn,"bindMatrix"),qn.setOptional(Jt,Zn,"bindMatrixInverse");const hr=Zn.skeleton;hr&&(Vn.floatVertexTextures?(hr.boneTexture===null&&hr.computeBoneTexture(),qn.setValue(Jt,"boneTexture",hr.boneTexture,tn),qn.setValue(Jt,"boneTextureSize",hr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ns=mn.morphAttributes;if((ns.position!==void 0||ns.normal!==void 0||ns.color!==void 0&&Vn.isWebGL2===!0)&&Sn.update(Zn,mn,An,ys),(Pr||$n.receiveShadow!==Zn.receiveShadow)&&($n.receiveShadow=Zn.receiveShadow,qn.setValue(Jt,"receiveShadow",Zn.receiveShadow)),An.isMeshGouraudMaterial&&An.envMap!==null&&(ar.envMap.value=ir,ar.flipEnvMap.value=ir.isCubeTexture&&ir.isRenderTargetTexture===!1?-1:1),Pr&&(qn.setValue(Jt,"toneMappingExposure",ht.toneMappingExposure),$n.needsLights&&mr(ar,Dr),zn&&An.fog===!0&&Mn.refreshFogUniforms(ar,zn),Mn.refreshMaterialUniforms(ar,An,kt,Mt,Et),WebGLUniforms.upload(Jt,$n.uniformsList,ar,tn)),An.isShaderMaterial&&An.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Jt,$n.uniformsList,ar,tn),An.uniformsNeedUpdate=!1),An.isSpriteMaterial&&qn.setValue(Jt,"center",Zn.center),qn.setValue(Jt,"modelViewMatrix",Zn.modelViewMatrix),qn.setValue(Jt,"normalMatrix",Zn.normalMatrix),qn.setValue(Jt,"modelMatrix",Zn.matrixWorld),An.isShaderMaterial||An.isRawShaderMaterial){const hr=An.uniformsGroups;for(let Wr=0,rs=hr.length;Wr<rs;Wr++)if(Vn.isWebGL2){const hs=hr[Wr];Nn.update(hs,ys),Nn.bind(hs,ys)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ys}function mr(Ut,ln){Ut.ambientLightColor.needsUpdate=ln,Ut.lightProbe.needsUpdate=ln,Ut.directionalLights.needsUpdate=ln,Ut.directionalLightShadows.needsUpdate=ln,Ut.pointLights.needsUpdate=ln,Ut.pointLightShadows.needsUpdate=ln,Ut.spotLights.needsUpdate=ln,Ut.spotLightShadows.needsUpdate=ln,Ut.rectAreaLights.needsUpdate=ln,Ut.hemisphereLights.needsUpdate=ln}function wr(Ut){return Ut.isMeshLambertMaterial||Ut.isMeshToonMaterial||Ut.isMeshPhongMaterial||Ut.isMeshStandardMaterial||Ut.isShadowMaterial||Ut.isShaderMaterial&&Ut.lights===!0}this.getActiveCubeFace=function(){return Ct},this.getActiveMipmapLevel=function(){return ft},this.getRenderTarget=function(){return pt},this.setRenderTargetTextures=function(Ut,ln,mn){$t.get(Ut.texture).__webglTexture=ln,$t.get(Ut.depthTexture).__webglTexture=mn;const An=$t.get(Ut);An.__hasExternalTextures=!0,An.__hasExternalTextures&&(An.__autoAllocateDepthBuffer=mn===void 0,An.__autoAllocateDepthBuffer||sn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),An.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ut,ln){const mn=$t.get(Ut);mn.__webglFramebuffer=ln,mn.__useDefaultFramebuffer=ln===void 0},this.setRenderTarget=function(Ut,ln=0,mn=0){pt=Ut,Ct=ln,ft=mn;let An=!0,Zn=null,zn=!1,On=!1;if(Ut){const ir=$t.get(Ut);ir.__useDefaultFramebuffer!==void 0?(dn.bindFramebuffer(36160,null),An=!1):ir.__webglFramebuffer===void 0?tn.setupRenderTarget(Ut):ir.__hasExternalTextures&&tn.rebindTextures(Ut,$t.get(Ut.texture).__webglTexture,$t.get(Ut.depthTexture).__webglTexture);const rr=Ut.texture;(rr.isData3DTexture||rr.isDataArrayTexture||rr.isCompressedArrayTexture)&&(On=!0);const sr=$t.get(Ut).__webglFramebuffer;Ut.isWebGLCubeRenderTarget?(Zn=sr[ln],zn=!0):Vn.isWebGL2&&Ut.samples>0&&tn.useMultisampledRTT(Ut)===!1?Zn=$t.get(Ut).__webglMultisampledFramebuffer:Zn=sr,Gt.copy(Ut.viewport),Bt.copy(Ut.scissor),vt=Ut.scissorTest}else Gt.copy(Lt).multiplyScalar(kt).floor(),Bt.copy(Xt).multiplyScalar(kt).floor(),vt=_t;if(dn.bindFramebuffer(36160,Zn)&&Vn.drawBuffers&&An&&dn.drawBuffers(Ut,Zn),dn.viewport(Gt),dn.scissor(Bt),dn.setScissorTest(vt),zn){const ir=$t.get(Ut.texture);Jt.framebufferTexture2D(36160,36064,34069+ln,ir.__webglTexture,mn)}else if(On){const ir=$t.get(Ut.texture),rr=ln||0;Jt.framebufferTextureLayer(36160,36064,ir.__webglTexture,mn||0,rr)}Vt=-1},this.readRenderTargetPixels=function(Ut,ln,mn,An,Zn,zn,On){if(!(Ut&&Ut.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nr=$t.get(Ut).__webglFramebuffer;if(Ut.isWebGLCubeRenderTarget&&On!==void 0&&(nr=nr[On]),nr){dn.bindFramebuffer(36160,nr);try{const ir=Ut.texture,rr=ir.format,sr=ir.type;if(rr!==RGBAFormat&&_n.convert(rr)!==Jt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const lr=sr===HalfFloatType&&(sn.has("EXT_color_buffer_half_float")||Vn.isWebGL2&&sn.has("EXT_color_buffer_float"));if(sr!==UnsignedByteType&&_n.convert(sr)!==Jt.getParameter(35738)&&!(sr===FloatType&&(Vn.isWebGL2||sn.has("OES_texture_float")||sn.has("WEBGL_color_buffer_float")))&&!lr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ln>=0&&ln<=Ut.width-An&&mn>=0&&mn<=Ut.height-Zn&&Jt.readPixels(ln,mn,An,Zn,_n.convert(rr),_n.convert(sr),zn)}finally{const ir=pt!==null?$t.get(pt).__webglFramebuffer:null;dn.bindFramebuffer(36160,ir)}}},this.copyFramebufferToTexture=function(Ut,ln,mn=0){const An=Math.pow(2,-mn),Zn=Math.floor(ln.image.width*An),zn=Math.floor(ln.image.height*An);tn.setTexture2D(ln,0),Jt.copyTexSubImage2D(3553,mn,0,0,Ut.x,Ut.y,Zn,zn),dn.unbindTexture()},this.copyTextureToTexture=function(Ut,ln,mn,An=0){const Zn=ln.image.width,zn=ln.image.height,On=_n.convert(mn.format),nr=_n.convert(mn.type);tn.setTexture2D(mn,0),Jt.pixelStorei(37440,mn.flipY),Jt.pixelStorei(37441,mn.premultiplyAlpha),Jt.pixelStorei(3317,mn.unpackAlignment),ln.isDataTexture?Jt.texSubImage2D(3553,An,Ut.x,Ut.y,Zn,zn,On,nr,ln.image.data):ln.isCompressedTexture?Jt.compressedTexSubImage2D(3553,An,Ut.x,Ut.y,ln.mipmaps[0].width,ln.mipmaps[0].height,On,ln.mipmaps[0].data):Jt.texSubImage2D(3553,An,Ut.x,Ut.y,On,nr,ln.image),An===0&&mn.generateMipmaps&&Jt.generateMipmap(3553),dn.unbindTexture()},this.copyTextureToTexture3D=function(Ut,ln,mn,An,Zn=0){if(ht.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const zn=Ut.max.x-Ut.min.x+1,On=Ut.max.y-Ut.min.y+1,nr=Ut.max.z-Ut.min.z+1,ir=_n.convert(An.format),rr=_n.convert(An.type);let sr;if(An.isData3DTexture)tn.setTexture3D(An,0),sr=32879;else if(An.isDataArrayTexture)tn.setTexture2DArray(An,0),sr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Jt.pixelStorei(37440,An.flipY),Jt.pixelStorei(37441,An.premultiplyAlpha),Jt.pixelStorei(3317,An.unpackAlignment);const lr=Jt.getParameter(3314),Br=Jt.getParameter(32878),Fr=Jt.getParameter(3316),ts=Jt.getParameter(3315),ds=Jt.getParameter(32877),Hn=mn.isCompressedTexture?mn.mipmaps[0]:mn.image;Jt.pixelStorei(3314,Hn.width),Jt.pixelStorei(32878,Hn.height),Jt.pixelStorei(3316,Ut.min.x),Jt.pixelStorei(3315,Ut.min.y),Jt.pixelStorei(32877,Ut.min.z),mn.isDataTexture||mn.isData3DTexture?Jt.texSubImage3D(sr,Zn,ln.x,ln.y,ln.z,zn,On,nr,ir,rr,Hn.data):mn.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Jt.compressedTexSubImage3D(sr,Zn,ln.x,ln.y,ln.z,zn,On,nr,ir,Hn.data)):Jt.texSubImage3D(sr,Zn,ln.x,ln.y,ln.z,zn,On,nr,ir,rr,Hn),Jt.pixelStorei(3314,lr),Jt.pixelStorei(32878,Br),Jt.pixelStorei(3316,Fr),Jt.pixelStorei(3315,ts),Jt.pixelStorei(32877,ds),Zn===0&&An.generateMipmaps&&Jt.generateMipmap(sr),dn.unbindTexture()},this.initTexture=function(Ut){Ut.isCubeTexture?tn.setTextureCube(Ut,0):Ut.isData3DTexture?tn.setTexture3D(Ut,0):Ut.isDataArrayTexture||Ut.isCompressedArrayTexture?tn.setTexture2DArray(Ut,0):tn.setTexture2D(Ut,0),dn.unbindTexture()},this.resetState=function(){Ct=0,ft=0,pt=null,dn.reset(),fn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(_,_e=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(_),this.density=_e}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,_e=1,tt=1e3){this.isFog=!0,this.name="",this.color=new Color(_),this.near=_e,this.far=tt}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,_e){return super.copy(_,_e),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const _e=super.toJSON(_);return this.fog!==null&&(_e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(_e.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(_e.backgroundIntensity=this.backgroundIntensity),_e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(_){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=_}}class InterleavedBuffer{constructor(_,_e){this.isInterleavedBuffer=!0,this.array=_,this.stride=_e,this.count=_!==void 0?_.length/_e:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,_e,tt){_*=this.stride,tt*=_e.stride;for(let nt=0,it=this.stride;nt<it;nt++)this.array[_+nt]=_e.array[tt+nt];return this}set(_,_e=0){return this.array.set(_,_e),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const _e=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),tt=new this.constructor(_e,this.stride);return tt.setUsage(this.usage),tt}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(_,_e,tt,nt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=_e,this.offset=tt,this.normalized=nt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let _e=0,tt=this.data.count;_e<tt;_e++)_vector$6.fromBufferAttribute(this,_e),_vector$6.applyMatrix4(_),this.setXYZ(_e,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(_){for(let _e=0,tt=this.count;_e<tt;_e++)_vector$6.fromBufferAttribute(this,_e),_vector$6.applyNormalMatrix(_),this.setXYZ(_e,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(_){for(let _e=0,tt=this.count;_e<tt;_e++)_vector$6.fromBufferAttribute(this,_e),_vector$6.transformDirection(_),this.setXYZ(_e,_vector$6.x,_vector$6.y,_vector$6.z);return this}setX(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.data.array[_*this.data.stride+this.offset]=_e,this}setY(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.data.array[_*this.data.stride+this.offset+1]=_e,this}setZ(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.data.array[_*this.data.stride+this.offset+2]=_e,this}setW(_,_e){return this.normalized&&(_e=normalize$1(_e,this.array)),this.data.array[_*this.data.stride+this.offset+3]=_e,this}getX(_){let _e=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(_e=denormalize(_e,this.array)),_e}getY(_){let _e=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(_e=denormalize(_e,this.array)),_e}getZ(_){let _e=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(_e=denormalize(_e,this.array)),_e}getW(_){let _e=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(_e=denormalize(_e,this.array)),_e}setXY(_,_e,tt){return _=_*this.data.stride+this.offset,this.normalized&&(_e=normalize$1(_e,this.array),tt=normalize$1(tt,this.array)),this.data.array[_+0]=_e,this.data.array[_+1]=tt,this}setXYZ(_,_e,tt,nt){return _=_*this.data.stride+this.offset,this.normalized&&(_e=normalize$1(_e,this.array),tt=normalize$1(tt,this.array),nt=normalize$1(nt,this.array)),this.data.array[_+0]=_e,this.data.array[_+1]=tt,this.data.array[_+2]=nt,this}setXYZW(_,_e,tt,nt,it){return _=_*this.data.stride+this.offset,this.normalized&&(_e=normalize$1(_e,this.array),tt=normalize$1(tt,this.array),nt=normalize$1(nt,this.array),it=normalize$1(it,this.array)),this.data.array[_+0]=_e,this.data.array[_+1]=tt,this.data.array[_+2]=nt,this.data.array[_+3]=it,this}clone(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const _e=[];for(let tt=0;tt<this.count;tt++){const nt=tt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)_e.push(this.data.array[nt+it])}return new BufferAttribute(new this.array.constructor(_e),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const _e=[];for(let tt=0;tt<this.count;tt++){const nt=tt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)_e.push(this.data.array[nt+it])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:_e,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const _e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),tt=new InterleavedBuffer(_e,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(tt,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(tt,2,3,!1))}this.geometry=_geometry,this.material=_!==void 0?_:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(_,_e){_.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const tt=this.material.rotation;let nt,it;tt!==0&&(it=Math.cos(tt),nt=Math.sin(tt));const rt=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,rt,_worldScale,nt,it),transformVertex(_vB.set(.5,-.5,0),_mvPosition,rt,_worldScale,nt,it),transformVertex(_vC.set(.5,.5,0),_mvPosition,rt,_worldScale,nt,it),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let st=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(st===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,rt,_worldScale,nt,it),_uvB.set(0,1),st=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),st===null))return;const ot=_.ray.origin.distanceTo(_intersectPoint);ot<_.near||ot>_.far||_e.push({distance:ot,point:_intersectPoint.clone(),uv:Triangle.getUV(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,_e){return super.copy(_,_e),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(et,_,_e,tt,nt,it){_alignedPosition.subVectors(et,_e).addScalar(.5).multiply(tt),nt!==void 0?(_rotatedPosition.x=it*_alignedPosition.x-nt*_alignedPosition.y,_rotatedPosition.y=nt*_alignedPosition.x+it*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),et.copy(_),et.x+=_rotatedPosition.x,et.y+=_rotatedPosition.y,et.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const _e=_.levels;for(let tt=0,nt=_e.length;tt<nt;tt++){const it=_e[tt];this.addLevel(it.object.clone(),it.distance,it.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,_e=0,tt=0){_e=Math.abs(_e);const nt=this.levels;let it;for(it=0;it<nt.length&&!(_e<nt[it].distance);it++);return nt.splice(it,0,{distance:_e,hysteresis:tt,object:_}),this.add(_),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const _e=this.levels;if(_e.length>0){let tt,nt;for(tt=1,nt=_e.length;tt<nt;tt++){let it=_e[tt].distance;if(_e[tt].object.visible&&(it-=it*_e[tt].hysteresis),_<it)break}return _e[tt-1].object}return null}raycast(_,_e){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const nt=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(nt).raycast(_,_e)}}update(_){const _e=this.levels;if(_e.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const tt=_v1$2.distanceTo(_v2$1)/_.zoom;_e[0].object.visible=!0;let nt,it;for(nt=1,it=_e.length;nt<it;nt++){let rt=_e[nt].distance;if(_e[nt].object.visible&&(rt-=rt*_e[nt].hysteresis),tt>=rt)_e[nt-1].object.visible=!1,_e[nt].object.visible=!0;else break}for(this._currentLevel=nt-1;nt<it;nt++)_e[nt].object.visible=!1}}toJSON(_){const _e=super.toJSON(_);this.autoUpdate===!1&&(_e.object.autoUpdate=!1),_e.object.levels=[];const tt=this.levels;for(let nt=0,it=tt.length;nt<it;nt++){const rt=tt[nt];_e.object.levels.push({object:rt.object.uuid,distance:rt.distance,hysteresis:rt.hysteresis})}return _e}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector$5=new Vector3,_matrix=new Matrix4;class SkinnedMesh extends Mesh{constructor(_,_e){super(_,_e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(_,_e){return super.copy(_,_e),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,this}bind(_,_e){this.skeleton=_,_e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),_e=this.matrixWorld),this.bindMatrix.copy(_e),this.bindMatrixInverse.copy(_e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,_e=this.geometry.attributes.skinWeight;for(let tt=0,nt=_e.count;tt<nt;tt++){_.fromBufferAttribute(_e,tt);const it=1/_.manhattanLength();it!==1/0?_.multiplyScalar(it):_.set(1,0,0,0),_e.setXYZW(tt,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(_,_e){const tt=this.skeleton,nt=this.geometry;_skinIndex.fromBufferAttribute(nt.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(nt.attributes.skinWeight,_),_basePosition.copy(_e).applyMatrix4(this.bindMatrix),_e.set(0,0,0);for(let it=0;it<4;it++){const rt=_skinWeight.getComponent(it);if(rt!==0){const st=_skinIndex.getComponent(it);_matrix.multiplyMatrices(tt.bones[st].matrixWorld,tt.boneInverses[st]),_e.addScaledVector(_vector$5.copy(_basePosition).applyMatrix4(_matrix),rt)}}return _e.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,_e=1,tt=1,nt,it,rt,st,ot,at=NearestFilter,At=NearestFilter,lt,gt){super(null,rt,st,ot,at,At,nt,it,lt,gt),this.isDataTexture=!0,this.image={data:_,width:_e,height:tt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$2=new Matrix4;class Skeleton{constructor(_=[],_e=[]){this.uuid=generateUUID$1(),this.bones=_.slice(0),this.boneInverses=_e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const _=this.bones,_e=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),_e.length===0)this.calculateInverses();else if(_.length!==_e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let tt=0,nt=this.bones.length;tt<nt;tt++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,_e=this.bones.length;_<_e;_++){const tt=new Matrix4;this.bones[_]&&tt.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(tt)}}pose(){for(let _=0,_e=this.bones.length;_<_e;_++){const tt=this.bones[_];tt&&tt.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,_e=this.bones.length;_<_e;_++){const tt=this.bones[_];tt&&(tt.parent&&tt.parent.isBone?(tt.matrix.copy(tt.parent.matrixWorld).invert(),tt.matrix.multiply(tt.matrixWorld)):tt.matrix.copy(tt.matrixWorld),tt.matrix.decompose(tt.position,tt.quaternion,tt.scale))}}update(){const _=this.bones,_e=this.boneInverses,tt=this.boneMatrices,nt=this.boneTexture;for(let it=0,rt=_.length;it<rt;it++){const st=_[it]?_[it].matrixWorld:_identityMatrix$2;_offsetMatrix.multiplyMatrices(st,_e[it]),_offsetMatrix.toArray(tt,it*16)}nt!==null&&(nt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=ceilPowerOfTwo(_),_=Math.max(_,4);const _e=new Float32Array(_*_*4);_e.set(this.boneMatrices);const tt=new DataTexture(_e,_,_,RGBAFormat,FloatType);return tt.needsUpdate=!0,this.boneMatrices=_e,this.boneTexture=tt,this.boneTextureSize=_,this}getBoneByName(_){for(let _e=0,tt=this.bones.length;_e<tt;_e++){const nt=this.bones[_e];if(nt.name===_)return nt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,_e){this.uuid=_.uuid;for(let tt=0,nt=_.bones.length;tt<nt;tt++){const it=_.bones[tt];let rt=_e[it];rt===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",it),rt=new Bone),this.bones.push(rt),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[tt]))}return this.init(),this}toJSON(){const _={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const _e=this.bones,tt=this.boneInverses;for(let nt=0,it=_e.length;nt<it;nt++){const rt=_e[nt];_.bones.push(rt.uuid);const st=tt[nt];_.boneInverses.push(st.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,_e,tt,nt=1){super(_,_e,tt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=nt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix$1=new Matrix4,_instanceWorldMatrix$1=new Matrix4,_instanceIntersects$1=[],_identity=new Matrix4,_mesh$1=new Mesh;class InstancedMesh extends Mesh{constructor(_,_e,tt){super(_,_e),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(tt*16),16),this.instanceColor=null,this.count=tt,this.frustumCulled=!1;for(let nt=0;nt<tt;nt++)this.setMatrixAt(nt,_identity)}copy(_,_e){return super.copy(_,_e),this.instanceMatrix.copy(_.instanceMatrix),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,this}getColorAt(_,_e){_e.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,_e){_e.fromArray(this.instanceMatrix.array,_*16)}raycast(_,_e){const tt=this.matrixWorld,nt=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0)for(let it=0;it<nt;it++){this.getMatrixAt(it,_instanceLocalMatrix$1),_instanceWorldMatrix$1.multiplyMatrices(tt,_instanceLocalMatrix$1),_mesh$1.matrixWorld=_instanceWorldMatrix$1,_mesh$1.raycast(_,_instanceIntersects$1);for(let rt=0,st=_instanceIntersects$1.length;rt<st;rt++){const ot=_instanceIntersects$1[rt];ot.instanceId=it,ot.object=this,_e.push(ot)}_instanceIntersects$1.length=0}}setColorAt(_,_e){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),_e.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,_e){_e.toArray(this.instanceMatrix.array,_*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray$2,_sphere$1=new Sphere;class Line extends Object3D{constructor(_=new BufferGeometry,_e=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=_e,this.updateMorphTargets()}copy(_,_e){return super.copy(_,_e),this.material=_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const _e=_.attributes.position,tt=[0];for(let nt=1,it=_e.count;nt<it;nt++)_start$1.fromBufferAttribute(_e,nt-1),_end$1.fromBufferAttribute(_e,nt),tt[nt]=tt[nt-1],tt[nt]+=_start$1.distanceTo(_end$1);_.setAttribute("lineDistance",new Float32BufferAttribute(tt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,_e){const tt=this.geometry,nt=this.matrixWorld,it=_.params.Line.threshold,rt=tt.drawRange;if(tt.boundingSphere===null&&tt.computeBoundingSphere(),_sphere$1.copy(tt.boundingSphere),_sphere$1.applyMatrix4(nt),_sphere$1.radius+=it,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(nt).invert(),_ray$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const st=it/((this.scale.x+this.scale.y+this.scale.z)/3),ot=st*st,at=new Vector3,At=new Vector3,lt=new Vector3,gt=new Vector3,ct=this.isLineSegments?2:1,dt=tt.index,mt=tt.attributes.position;if(dt!==null){const Ct=Math.max(0,rt.start),ft=Math.min(dt.count,rt.start+rt.count);for(let pt=Ct,Vt=ft-1;pt<Vt;pt+=ct){const yt=dt.getX(pt),Gt=dt.getX(pt+1);if(at.fromBufferAttribute(mt,yt),At.fromBufferAttribute(mt,Gt),_ray$1.distanceSqToSegment(at,At,gt,lt)>ot)continue;gt.applyMatrix4(this.matrixWorld);const vt=_.ray.origin.distanceTo(gt);vt<_.near||vt>_.far||_e.push({distance:vt,point:lt.clone().applyMatrix4(this.matrixWorld),index:pt,face:null,faceIndex:null,object:this})}}else{const Ct=Math.max(0,rt.start),ft=Math.min(mt.count,rt.start+rt.count);for(let pt=Ct,Vt=ft-1;pt<Vt;pt+=ct){if(at.fromBufferAttribute(mt,pt),At.fromBufferAttribute(mt,pt+1),_ray$1.distanceSqToSegment(at,At,gt,lt)>ot)continue;gt.applyMatrix4(this.matrixWorld);const Gt=_.ray.origin.distanceTo(gt);Gt<_.near||Gt>_.far||_e.push({distance:Gt,point:lt.clone().applyMatrix4(this.matrixWorld),index:pt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const _e=this.geometry.morphAttributes,tt=Object.keys(_e);if(tt.length>0){const nt=_e[tt[0]];if(nt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,rt=nt.length;it<rt;it++){const st=nt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=it}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,_e){super(_,_e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const _e=_.attributes.position,tt=[];for(let nt=0,it=_e.count;nt<it;nt+=2)_start.fromBufferAttribute(_e,nt),_end.fromBufferAttribute(_e,nt+1),tt[nt]=nt===0?0:tt[nt-1],tt[nt+1]=tt[nt]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(tt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,_e){super(_,_e),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray$2,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(_=new BufferGeometry,_e=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=_e,this.updateMorphTargets()}copy(_,_e){return super.copy(_,_e),this.material=_.material,this.geometry=_.geometry,this}raycast(_,_e){const tt=this.geometry,nt=this.matrixWorld,it=_.params.Points.threshold,rt=tt.drawRange;if(tt.boundingSphere===null&&tt.computeBoundingSphere(),_sphere.copy(tt.boundingSphere),_sphere.applyMatrix4(nt),_sphere.radius+=it,_.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(nt).invert(),_ray.copy(_.ray).applyMatrix4(_inverseMatrix);const st=it/((this.scale.x+this.scale.y+this.scale.z)/3),ot=st*st,at=tt.index,lt=tt.attributes.position;if(at!==null){const gt=Math.max(0,rt.start),ct=Math.min(at.count,rt.start+rt.count);for(let dt=gt,ht=ct;dt<ht;dt++){const mt=at.getX(dt);_position$2.fromBufferAttribute(lt,mt),testPoint(_position$2,mt,ot,nt,_,_e,this)}}else{const gt=Math.max(0,rt.start),ct=Math.min(lt.count,rt.start+rt.count);for(let dt=gt,ht=ct;dt<ht;dt++)_position$2.fromBufferAttribute(lt,dt),testPoint(_position$2,dt,ot,nt,_,_e,this)}}updateMorphTargets(){const _e=this.geometry.morphAttributes,tt=Object.keys(_e);if(tt.length>0){const nt=_e[tt[0]];if(nt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,rt=nt.length;it<rt;it++){const st=nt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=it}}}}}function testPoint(et,_,_e,tt,nt,it,rt){const st=_ray.distanceSqToPoint(et);if(st<_e){const ot=new Vector3;_ray.closestPointToPoint(et,ot),ot.applyMatrix4(tt);const at=nt.ray.origin.distanceTo(ot);if(at<nt.near||at>nt.far)return;it.push({distance:at,distanceToRay:Math.sqrt(st),point:ot,index:_,face:null,object:rt})}}class VideoTexture extends Texture{constructor(_,_e,tt,nt,it,rt,st,ot,at){super(_,_e,tt,nt,it,rt,st,ot,at),this.isVideoTexture=!0,this.minFilter=rt!==void 0?rt:LinearFilter,this.magFilter=it!==void 0?it:LinearFilter,this.generateMipmaps=!1;const At=this;function lt(){At.needsUpdate=!0,_.requestVideoFrameCallback(lt)}"requestVideoFrameCallback"in _&&_.requestVideoFrameCallback(lt)}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(_,_e,tt){super({width:_,height:_e}),this.isFramebufferTexture=!0,this.format=tt,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,_e,tt,nt,it,rt,st,ot,at,At,lt,gt){super(null,rt,st,ot,at,At,nt,it,lt,gt),this.isCompressedTexture=!0,this.image={width:_e,height:tt},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(_,_e,tt,nt,it,rt){super(_,_e,tt,it,rt),this.isCompressedArrayTexture=!0,this.image.depth=nt,this.wrapR=ClampToEdgeWrapping}}class CanvasTexture extends Texture{constructor(_,_e,tt,nt,it,rt,st,ot,at){super(_,_e,tt,nt,it,rt,st,ot,at),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(_,_e){const tt=this.getUtoTmapping(_);return this.getPoint(tt,_e)}getPoints(_=5){const _e=[];for(let tt=0;tt<=_;tt++)_e.push(this.getPoint(tt/_));return _e}getSpacedPoints(_=5){const _e=[];for(let tt=0;tt<=_;tt++)_e.push(this.getPointAt(tt/_));return _e}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const _e=[];let tt,nt=this.getPoint(0),it=0;_e.push(0);for(let rt=1;rt<=_;rt++)tt=this.getPoint(rt/_),it+=tt.distanceTo(nt),_e.push(it),nt=tt;return this.cacheArcLengths=_e,_e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,_e){const tt=this.getLengths();let nt=0;const it=tt.length;let rt;_e?rt=_e:rt=_*tt[it-1];let st=0,ot=it-1,at;for(;st<=ot;)if(nt=Math.floor(st+(ot-st)/2),at=tt[nt]-rt,at<0)st=nt+1;else if(at>0)ot=nt-1;else{ot=nt;break}if(nt=ot,tt[nt]===rt)return nt/(it-1);const At=tt[nt],gt=tt[nt+1]-At,ct=(rt-At)/gt;return(nt+ct)/(it-1)}getTangent(_,_e){let nt=_-1e-4,it=_+1e-4;nt<0&&(nt=0),it>1&&(it=1);const rt=this.getPoint(nt),st=this.getPoint(it),ot=_e||(rt.isVector2?new Vector2:new Vector3);return ot.copy(st).sub(rt).normalize(),ot}getTangentAt(_,_e){const tt=this.getUtoTmapping(_);return this.getTangent(tt,_e)}computeFrenetFrames(_,_e){const tt=new Vector3,nt=[],it=[],rt=[],st=new Vector3,ot=new Matrix4;for(let ct=0;ct<=_;ct++){const dt=ct/_;nt[ct]=this.getTangentAt(dt,new Vector3)}it[0]=new Vector3,rt[0]=new Vector3;let at=Number.MAX_VALUE;const At=Math.abs(nt[0].x),lt=Math.abs(nt[0].y),gt=Math.abs(nt[0].z);At<=at&&(at=At,tt.set(1,0,0)),lt<=at&&(at=lt,tt.set(0,1,0)),gt<=at&&tt.set(0,0,1),st.crossVectors(nt[0],tt).normalize(),it[0].crossVectors(nt[0],st),rt[0].crossVectors(nt[0],it[0]);for(let ct=1;ct<=_;ct++){if(it[ct]=it[ct-1].clone(),rt[ct]=rt[ct-1].clone(),st.crossVectors(nt[ct-1],nt[ct]),st.length()>Number.EPSILON){st.normalize();const dt=Math.acos(clamp$1(nt[ct-1].dot(nt[ct]),-1,1));it[ct].applyMatrix4(ot.makeRotationAxis(st,dt))}rt[ct].crossVectors(nt[ct],it[ct])}if(_e===!0){let ct=Math.acos(clamp$1(it[0].dot(it[_]),-1,1));ct/=_,nt[0].dot(st.crossVectors(it[0],it[_]))>0&&(ct=-ct);for(let dt=1;dt<=_;dt++)it[dt].applyMatrix4(ot.makeRotationAxis(nt[dt],ct*dt)),rt[dt].crossVectors(nt[dt],it[dt])}return{tangents:nt,normals:it,binormals:rt}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,_e=0,tt=1,nt=1,it=0,rt=Math.PI*2,st=!1,ot=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=_e,this.xRadius=tt,this.yRadius=nt,this.aStartAngle=it,this.aEndAngle=rt,this.aClockwise=st,this.aRotation=ot}getPoint(_,_e){const tt=_e||new Vector2,nt=Math.PI*2;let it=this.aEndAngle-this.aStartAngle;const rt=Math.abs(it)<Number.EPSILON;for(;it<0;)it+=nt;for(;it>nt;)it-=nt;it<Number.EPSILON&&(rt?it=0:it=nt),this.aClockwise===!0&&!rt&&(it===nt?it=-nt:it=it-nt);const st=this.aStartAngle+_*it;let ot=this.aX+this.xRadius*Math.cos(st),at=this.aY+this.yRadius*Math.sin(st);if(this.aRotation!==0){const At=Math.cos(this.aRotation),lt=Math.sin(this.aRotation),gt=ot-this.aX,ct=at-this.aY;ot=gt*At-ct*lt+this.aX,at=gt*lt+ct*At+this.aY}return tt.set(ot,at)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,_e,tt,nt,it,rt){super(_,_e,tt,tt,nt,it,rt),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let et=0,_=0,_e=0,tt=0;function nt(it,rt,st,ot){et=it,_=st,_e=-3*it+3*rt-2*st-ot,tt=2*it-2*rt+st+ot}return{initCatmullRom:function(it,rt,st,ot,at){nt(rt,st,at*(st-it),at*(ot-rt))},initNonuniformCatmullRom:function(it,rt,st,ot,at,At,lt){let gt=(rt-it)/at-(st-it)/(at+At)+(st-rt)/At,ct=(st-rt)/At-(ot-rt)/(At+lt)+(ot-st)/lt;gt*=At,ct*=At,nt(rt,st,gt,ct)},calc:function(it){const rt=it*it,st=rt*it;return et+_*it+_e*rt+tt*st}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],_e=!1,tt="centripetal",nt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=_e,this.curveType=tt,this.tension=nt}getPoint(_,_e=new Vector3){const tt=_e,nt=this.points,it=nt.length,rt=(it-(this.closed?0:1))*_;let st=Math.floor(rt),ot=rt-st;this.closed?st+=st>0?0:(Math.floor(Math.abs(st)/it)+1)*it:ot===0&&st===it-1&&(st=it-2,ot=1);let at,At;this.closed||st>0?at=nt[(st-1)%it]:(tmp.subVectors(nt[0],nt[1]).add(nt[0]),at=tmp);const lt=nt[st%it],gt=nt[(st+1)%it];if(this.closed||st+2<it?At=nt[(st+2)%it]:(tmp.subVectors(nt[it-1],nt[it-2]).add(nt[it-1]),At=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const ct=this.curveType==="chordal"?.5:.25;let dt=Math.pow(at.distanceToSquared(lt),ct),ht=Math.pow(lt.distanceToSquared(gt),ct),mt=Math.pow(gt.distanceToSquared(At),ct);ht<1e-4&&(ht=1),dt<1e-4&&(dt=ht),mt<1e-4&&(mt=ht),px.initNonuniformCatmullRom(at.x,lt.x,gt.x,At.x,dt,ht,mt),py.initNonuniformCatmullRom(at.y,lt.y,gt.y,At.y,dt,ht,mt),pz.initNonuniformCatmullRom(at.z,lt.z,gt.z,At.z,dt,ht,mt)}else this.curveType==="catmullrom"&&(px.initCatmullRom(at.x,lt.x,gt.x,At.x,this.tension),py.initCatmullRom(at.y,lt.y,gt.y,At.y,this.tension),pz.initCatmullRom(at.z,lt.z,gt.z,At.z,this.tension));return tt.set(px.calc(ot),py.calc(ot),pz.calc(ot)),tt}copy(_){super.copy(_),this.points=[];for(let _e=0,tt=_.points.length;_e<tt;_e++){const nt=_.points[_e];this.points.push(nt.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let _e=0,tt=this.points.length;_e<tt;_e++){const nt=this.points[_e];_.points.push(nt.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let _e=0,tt=_.points.length;_e<tt;_e++){const nt=_.points[_e];this.points.push(new Vector3().fromArray(nt))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(et,_,_e,tt,nt){const it=(tt-_)*.5,rt=(nt-_e)*.5,st=et*et,ot=et*st;return(2*_e-2*tt+it+rt)*ot+(-3*_e+3*tt-2*it-rt)*st+it*et+_e}function QuadraticBezierP0(et,_){const _e=1-et;return _e*_e*_}function QuadraticBezierP1(et,_){return 2*(1-et)*et*_}function QuadraticBezierP2(et,_){return et*et*_}function QuadraticBezier(et,_,_e,tt){return QuadraticBezierP0(et,_)+QuadraticBezierP1(et,_e)+QuadraticBezierP2(et,tt)}function CubicBezierP0(et,_){const _e=1-et;return _e*_e*_e*_}function CubicBezierP1(et,_){const _e=1-et;return 3*_e*_e*et*_}function CubicBezierP2(et,_){return 3*(1-et)*et*et*_}function CubicBezierP3(et,_){return et*et*et*_}function CubicBezier(et,_,_e,tt,nt){return CubicBezierP0(et,_)+CubicBezierP1(et,_e)+CubicBezierP2(et,tt)+CubicBezierP3(et,nt)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,_e=new Vector2,tt=new Vector2,nt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=_e,this.v2=tt,this.v3=nt}getPoint(_,_e=new Vector2){const tt=_e,nt=this.v0,it=this.v1,rt=this.v2,st=this.v3;return tt.set(CubicBezier(_,nt.x,it.x,rt.x,st.x),CubicBezier(_,nt.y,it.y,rt.y,st.y)),tt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,_e=new Vector3,tt=new Vector3,nt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=_e,this.v2=tt,this.v3=nt}getPoint(_,_e=new Vector3){const tt=_e,nt=this.v0,it=this.v1,rt=this.v2,st=this.v3;return tt.set(CubicBezier(_,nt.x,it.x,rt.x,st.x),CubicBezier(_,nt.y,it.y,rt.y,st.y),CubicBezier(_,nt.z,it.z,rt.z,st.z)),tt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,_e=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=_e}getPoint(_,_e=new Vector2){const tt=_e;return _===1?tt.copy(this.v2):(tt.copy(this.v2).sub(this.v1),tt.multiplyScalar(_).add(this.v1)),tt}getPointAt(_,_e){return this.getPoint(_,_e)}getTangent(_,_e){const tt=_e||new Vector2;return tt.copy(this.v2).sub(this.v1).normalize(),tt}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,_e=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=_e}getPoint(_,_e=new Vector3){const tt=_e;return _===1?tt.copy(this.v2):(tt.copy(this.v2).sub(this.v1),tt.multiplyScalar(_).add(this.v1)),tt}getPointAt(_,_e){return this.getPoint(_,_e)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,_e=new Vector2,tt=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=_e,this.v2=tt}getPoint(_,_e=new Vector2){const tt=_e,nt=this.v0,it=this.v1,rt=this.v2;return tt.set(QuadraticBezier(_,nt.x,it.x,rt.x),QuadraticBezier(_,nt.y,it.y,rt.y)),tt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,_e=new Vector3,tt=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=_e,this.v2=tt}getPoint(_,_e=new Vector3){const tt=_e,nt=this.v0,it=this.v1,rt=this.v2;return tt.set(QuadraticBezier(_,nt.x,it.x,rt.x),QuadraticBezier(_,nt.y,it.y,rt.y),QuadraticBezier(_,nt.z,it.z,rt.z)),tt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,_e=new Vector2){const tt=_e,nt=this.points,it=(nt.length-1)*_,rt=Math.floor(it),st=it-rt,ot=nt[rt===0?rt:rt-1],at=nt[rt],At=nt[rt>nt.length-2?nt.length-1:rt+1],lt=nt[rt>nt.length-3?nt.length-1:rt+2];return tt.set(CatmullRom(st,ot.x,at.x,At.x,lt.x),CatmullRom(st,ot.y,at.y,At.y,lt.y)),tt}copy(_){super.copy(_),this.points=[];for(let _e=0,tt=_.points.length;_e<tt;_e++){const nt=_.points[_e];this.points.push(nt.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let _e=0,tt=this.points.length;_e<tt;_e++){const nt=this.points[_e];_.points.push(nt.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let _e=0,tt=_.points.length;_e<tt;_e++){const nt=_.points[_e];this.points.push(new Vector2().fromArray(nt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),_e=this.curves[this.curves.length-1].getPoint(1);_.equals(_e)||this.curves.push(new LineCurve(_e,_))}getPoint(_,_e){const tt=_*this.getLength(),nt=this.getCurveLengths();let it=0;for(;it<nt.length;){if(nt[it]>=tt){const rt=nt[it]-tt,st=this.curves[it],ot=st.getLength(),at=ot===0?0:1-rt/ot;return st.getPointAt(at,_e)}it++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let _e=0;for(let tt=0,nt=this.curves.length;tt<nt;tt++)_e+=this.curves[tt].getLength(),_.push(_e);return this.cacheLengths=_,_}getSpacedPoints(_=40){const _e=[];for(let tt=0;tt<=_;tt++)_e.push(this.getPoint(tt/_));return this.autoClose&&_e.push(_e[0]),_e}getPoints(_=12){const _e=[];let tt;for(let nt=0,it=this.curves;nt<it.length;nt++){const rt=it[nt],st=rt.isEllipseCurve?_*2:rt.isLineCurve||rt.isLineCurve3?1:rt.isSplineCurve?_*rt.points.length:_,ot=rt.getPoints(st);for(let at=0;at<ot.length;at++){const At=ot[at];tt&&tt.equals(At)||(_e.push(At),tt=At)}}return this.autoClose&&_e.length>1&&!_e[_e.length-1].equals(_e[0])&&_e.push(_e[0]),_e}copy(_){super.copy(_),this.curves=[];for(let _e=0,tt=_.curves.length;_e<tt;_e++){const nt=_.curves[_e];this.curves.push(nt.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let _e=0,tt=this.curves.length;_e<tt;_e++){const nt=this.curves[_e];_.curves.push(nt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let _e=0,tt=_.curves.length;_e<tt;_e++){const nt=_.curves[_e];this.curves.push(new Curves[nt.type]().fromJSON(nt))}return this}}class Path extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let _e=1,tt=_.length;_e<tt;_e++)this.lineTo(_[_e].x,_[_e].y);return this}moveTo(_,_e){return this.currentPoint.set(_,_e),this}lineTo(_,_e){const tt=new LineCurve(this.currentPoint.clone(),new Vector2(_,_e));return this.curves.push(tt),this.currentPoint.set(_,_e),this}quadraticCurveTo(_,_e,tt,nt){const it=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,_e),new Vector2(tt,nt));return this.curves.push(it),this.currentPoint.set(tt,nt),this}bezierCurveTo(_,_e,tt,nt,it,rt){const st=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,_e),new Vector2(tt,nt),new Vector2(it,rt));return this.curves.push(st),this.currentPoint.set(it,rt),this}splineThru(_){const _e=[this.currentPoint.clone()].concat(_),tt=new SplineCurve(_e);return this.curves.push(tt),this.currentPoint.copy(_[_.length-1]),this}arc(_,_e,tt,nt,it,rt){const st=this.currentPoint.x,ot=this.currentPoint.y;return this.absarc(_+st,_e+ot,tt,nt,it,rt),this}absarc(_,_e,tt,nt,it,rt){return this.absellipse(_,_e,tt,tt,nt,it,rt),this}ellipse(_,_e,tt,nt,it,rt,st,ot){const at=this.currentPoint.x,At=this.currentPoint.y;return this.absellipse(_+at,_e+At,tt,nt,it,rt,st,ot),this}absellipse(_,_e,tt,nt,it,rt,st,ot){const at=new EllipseCurve(_,_e,tt,nt,it,rt,st,ot);if(this.curves.length>0){const lt=at.getPoint(0);lt.equals(this.currentPoint)||this.lineTo(lt.x,lt.y)}this.curves.push(at);const At=at.getPoint(1);return this.currentPoint.copy(At),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],_e=12,tt=0,nt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:_e,phiStart:tt,phiLength:nt},_e=Math.floor(_e),nt=clamp$1(nt,0,Math.PI*2);const it=[],rt=[],st=[],ot=[],at=[],At=1/_e,lt=new Vector3,gt=new Vector2,ct=new Vector3,dt=new Vector3,ht=new Vector3;let mt=0,Ct=0;for(let ft=0;ft<=_.length-1;ft++)switch(ft){case 0:mt=_[ft+1].x-_[ft].x,Ct=_[ft+1].y-_[ft].y,ct.x=Ct*1,ct.y=-mt,ct.z=Ct*0,ht.copy(ct),ct.normalize(),ot.push(ct.x,ct.y,ct.z);break;case _.length-1:ot.push(ht.x,ht.y,ht.z);break;default:mt=_[ft+1].x-_[ft].x,Ct=_[ft+1].y-_[ft].y,ct.x=Ct*1,ct.y=-mt,ct.z=Ct*0,dt.copy(ct),ct.x+=ht.x,ct.y+=ht.y,ct.z+=ht.z,ct.normalize(),ot.push(ct.x,ct.y,ct.z),ht.copy(dt)}for(let ft=0;ft<=_e;ft++){const pt=tt+ft*At*nt,Vt=Math.sin(pt),yt=Math.cos(pt);for(let Gt=0;Gt<=_.length-1;Gt++){lt.x=_[Gt].x*Vt,lt.y=_[Gt].y,lt.z=_[Gt].x*yt,rt.push(lt.x,lt.y,lt.z),gt.x=ft/_e,gt.y=Gt/(_.length-1),st.push(gt.x,gt.y);const Bt=ot[3*Gt+0]*Vt,vt=ot[3*Gt+1],wt=ot[3*Gt+0]*yt;at.push(Bt,vt,wt)}}for(let ft=0;ft<_e;ft++)for(let pt=0;pt<_.length-1;pt++){const Vt=pt+ft*_.length,yt=Vt,Gt=Vt+_.length,Bt=Vt+_.length+1,vt=Vt+1;it.push(yt,Gt,vt),it.push(Bt,vt,Gt)}this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("uv",new Float32BufferAttribute(st,2)),this.setAttribute("normal",new Float32BufferAttribute(at,3))}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(_=1,_e=1,tt=4,nt=8){const it=new Path;it.absarc(0,-_e/2,_,Math.PI*1.5,0),it.absarc(0,_e/2,_,0,Math.PI*.5),super(it.getPoints(tt),nt),this.type="CapsuleGeometry",this.parameters={radius:_,height:_e,capSegments:tt,radialSegments:nt}}static fromJSON(_){return new CapsuleGeometry(_.radius,_.length,_.capSegments,_.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,_e=32,tt=0,nt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:_e,thetaStart:tt,thetaLength:nt},_e=Math.max(3,_e);const it=[],rt=[],st=[],ot=[],at=new Vector3,At=new Vector2;rt.push(0,0,0),st.push(0,0,1),ot.push(.5,.5);for(let lt=0,gt=3;lt<=_e;lt++,gt+=3){const ct=tt+lt/_e*nt;at.x=_*Math.cos(ct),at.y=_*Math.sin(ct),rt.push(at.x,at.y,at.z),st.push(0,0,1),At.x=(rt[gt]/_+1)/2,At.y=(rt[gt+1]/_+1)/2,ot.push(At.x,At.y)}for(let lt=1;lt<=_e;lt++)it.push(lt,lt+1,0);this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(st,3)),this.setAttribute("uv",new Float32BufferAttribute(ot,2))}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,_e=1,tt=1,nt=32,it=1,rt=!1,st=0,ot=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:_e,height:tt,radialSegments:nt,heightSegments:it,openEnded:rt,thetaStart:st,thetaLength:ot};const at=this;nt=Math.floor(nt),it=Math.floor(it);const At=[],lt=[],gt=[],ct=[];let dt=0;const ht=[],mt=tt/2;let Ct=0;ft(),rt===!1&&(_>0&&pt(!0),_e>0&&pt(!1)),this.setIndex(At),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(gt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2));function ft(){const Vt=new Vector3,yt=new Vector3;let Gt=0;const Bt=(_e-_)/tt;for(let vt=0;vt<=it;vt++){const wt=[],Mt=vt/it,kt=Mt*(_e-_)+_;for(let Nt=0;Nt<=nt;Nt++){const Yt=Nt/nt,Lt=Yt*ot+st,Xt=Math.sin(Lt),_t=Math.cos(Lt);yt.x=kt*Xt,yt.y=-Mt*tt+mt,yt.z=kt*_t,lt.push(yt.x,yt.y,yt.z),Vt.set(Xt,Bt,_t).normalize(),gt.push(Vt.x,Vt.y,Vt.z),ct.push(Yt,1-Mt),wt.push(dt++)}ht.push(wt)}for(let vt=0;vt<nt;vt++)for(let wt=0;wt<it;wt++){const Mt=ht[wt][vt],kt=ht[wt+1][vt],Nt=ht[wt+1][vt+1],Yt=ht[wt][vt+1];At.push(Mt,kt,Yt),At.push(kt,Nt,Yt),Gt+=6}at.addGroup(Ct,Gt,0),Ct+=Gt}function pt(Vt){const yt=dt,Gt=new Vector2,Bt=new Vector3;let vt=0;const wt=Vt===!0?_:_e,Mt=Vt===!0?1:-1;for(let Nt=1;Nt<=nt;Nt++)lt.push(0,mt*Mt,0),gt.push(0,Mt,0),ct.push(.5,.5),dt++;const kt=dt;for(let Nt=0;Nt<=nt;Nt++){const Lt=Nt/nt*ot+st,Xt=Math.cos(Lt),_t=Math.sin(Lt);Bt.x=wt*_t,Bt.y=mt*Mt,Bt.z=wt*Xt,lt.push(Bt.x,Bt.y,Bt.z),gt.push(0,Mt,0),Gt.x=Xt*.5+.5,Gt.y=_t*.5*Mt+.5,ct.push(Gt.x,Gt.y),dt++}for(let Nt=0;Nt<nt;Nt++){const Yt=yt+Nt,Lt=kt+Nt;Vt===!0?At.push(Lt,Lt+1,Yt):At.push(Lt+1,Lt,Yt),vt+=3}at.addGroup(Ct,vt,Vt===!0?1:2),Ct+=vt}}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,_e=1,tt=32,nt=1,it=!1,rt=0,st=Math.PI*2){super(0,_,_e,tt,nt,it,rt,st),this.type="ConeGeometry",this.parameters={radius:_,height:_e,radialSegments:tt,heightSegments:nt,openEnded:it,thetaStart:rt,thetaLength:st}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],_e=[],tt=1,nt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:_e,radius:tt,detail:nt};const it=[],rt=[];st(nt),at(tt),At(),this.setAttribute("position",new Float32BufferAttribute(it,3)),this.setAttribute("normal",new Float32BufferAttribute(it.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(rt,2)),nt===0?this.computeVertexNormals():this.normalizeNormals();function st(ft){const pt=new Vector3,Vt=new Vector3,yt=new Vector3;for(let Gt=0;Gt<_e.length;Gt+=3)ct(_e[Gt+0],pt),ct(_e[Gt+1],Vt),ct(_e[Gt+2],yt),ot(pt,Vt,yt,ft)}function ot(ft,pt,Vt,yt){const Gt=yt+1,Bt=[];for(let vt=0;vt<=Gt;vt++){Bt[vt]=[];const wt=ft.clone().lerp(Vt,vt/Gt),Mt=pt.clone().lerp(Vt,vt/Gt),kt=Gt-vt;for(let Nt=0;Nt<=kt;Nt++)Nt===0&&vt===Gt?Bt[vt][Nt]=wt:Bt[vt][Nt]=wt.clone().lerp(Mt,Nt/kt)}for(let vt=0;vt<Gt;vt++)for(let wt=0;wt<2*(Gt-vt)-1;wt++){const Mt=Math.floor(wt/2);wt%2===0?(gt(Bt[vt][Mt+1]),gt(Bt[vt+1][Mt]),gt(Bt[vt][Mt])):(gt(Bt[vt][Mt+1]),gt(Bt[vt+1][Mt+1]),gt(Bt[vt+1][Mt]))}}function at(ft){const pt=new Vector3;for(let Vt=0;Vt<it.length;Vt+=3)pt.x=it[Vt+0],pt.y=it[Vt+1],pt.z=it[Vt+2],pt.normalize().multiplyScalar(ft),it[Vt+0]=pt.x,it[Vt+1]=pt.y,it[Vt+2]=pt.z}function At(){const ft=new Vector3;for(let pt=0;pt<it.length;pt+=3){ft.x=it[pt+0],ft.y=it[pt+1],ft.z=it[pt+2];const Vt=mt(ft)/2/Math.PI+.5,yt=Ct(ft)/Math.PI+.5;rt.push(Vt,1-yt)}dt(),lt()}function lt(){for(let ft=0;ft<rt.length;ft+=6){const pt=rt[ft+0],Vt=rt[ft+2],yt=rt[ft+4],Gt=Math.max(pt,Vt,yt),Bt=Math.min(pt,Vt,yt);Gt>.9&&Bt<.1&&(pt<.2&&(rt[ft+0]+=1),Vt<.2&&(rt[ft+2]+=1),yt<.2&&(rt[ft+4]+=1))}}function gt(ft){it.push(ft.x,ft.y,ft.z)}function ct(ft,pt){const Vt=ft*3;pt.x=_[Vt+0],pt.y=_[Vt+1],pt.z=_[Vt+2]}function dt(){const ft=new Vector3,pt=new Vector3,Vt=new Vector3,yt=new Vector3,Gt=new Vector2,Bt=new Vector2,vt=new Vector2;for(let wt=0,Mt=0;wt<it.length;wt+=9,Mt+=6){ft.set(it[wt+0],it[wt+1],it[wt+2]),pt.set(it[wt+3],it[wt+4],it[wt+5]),Vt.set(it[wt+6],it[wt+7],it[wt+8]),Gt.set(rt[Mt+0],rt[Mt+1]),Bt.set(rt[Mt+2],rt[Mt+3]),vt.set(rt[Mt+4],rt[Mt+5]),yt.copy(ft).add(pt).add(Vt).divideScalar(3);const kt=mt(yt);ht(Gt,Mt+0,ft,kt),ht(Bt,Mt+2,pt,kt),ht(vt,Mt+4,Vt,kt)}}function ht(ft,pt,Vt,yt){yt<0&&ft.x===1&&(rt[pt]=ft.x-1),Vt.x===0&&Vt.z===0&&(rt[pt]=yt/2/Math.PI+.5)}function mt(ft){return Math.atan2(ft.z,-ft.x)}function Ct(ft){return Math.atan2(-ft.y,Math.sqrt(ft.x*ft.x+ft.z*ft.z))}}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const tt=(1+Math.sqrt(5))/2,nt=1/tt,it=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-nt,-tt,0,-nt,tt,0,nt,-tt,0,nt,tt,-nt,-tt,0,-nt,tt,0,nt,-tt,0,nt,tt,0,-tt,0,-nt,tt,0,-nt,-tt,0,nt,tt,0,nt],rt=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(it,rt,_,_e),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,_e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:_e},_!==null){const nt=Math.pow(10,4),it=Math.cos(DEG2RAD*_e),rt=_.getIndex(),st=_.getAttribute("position"),ot=rt?rt.count:st.count,at=[0,0,0],At=["a","b","c"],lt=new Array(3),gt={},ct=[];for(let dt=0;dt<ot;dt+=3){rt?(at[0]=rt.getX(dt),at[1]=rt.getX(dt+1),at[2]=rt.getX(dt+2)):(at[0]=dt,at[1]=dt+1,at[2]=dt+2);const{a:ht,b:mt,c:Ct}=_triangle;if(ht.fromBufferAttribute(st,at[0]),mt.fromBufferAttribute(st,at[1]),Ct.fromBufferAttribute(st,at[2]),_triangle.getNormal(_normal),lt[0]=`${Math.round(ht.x*nt)},${Math.round(ht.y*nt)},${Math.round(ht.z*nt)}`,lt[1]=`${Math.round(mt.x*nt)},${Math.round(mt.y*nt)},${Math.round(mt.z*nt)}`,lt[2]=`${Math.round(Ct.x*nt)},${Math.round(Ct.y*nt)},${Math.round(Ct.z*nt)}`,!(lt[0]===lt[1]||lt[1]===lt[2]||lt[2]===lt[0]))for(let ft=0;ft<3;ft++){const pt=(ft+1)%3,Vt=lt[ft],yt=lt[pt],Gt=_triangle[At[ft]],Bt=_triangle[At[pt]],vt=`${Vt}_${yt}`,wt=`${yt}_${Vt}`;wt in gt&&gt[wt]?(_normal.dot(gt[wt].normal)<=it&&(ct.push(Gt.x,Gt.y,Gt.z),ct.push(Bt.x,Bt.y,Bt.z)),gt[wt]=null):vt in gt||(gt[vt]={index0:at[ft],index1:at[pt],normal:_normal.clone()})}}for(const dt in gt)if(gt[dt]){const{index0:ht,index1:mt}=gt[dt];_v0.fromBufferAttribute(st,ht),_v1$1.fromBufferAttribute(st,mt),ct.push(_v0.x,_v0.y,_v0.z),ct.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(ct,3))}}}let Shape$2=class extends Path{constructor(_){super(_),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(_){const _e=[];for(let tt=0,nt=this.holes.length;tt<nt;tt++)_e[tt]=this.holes[tt].getPoints(_);return _e}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let _e=0,tt=_.holes.length;_e<tt;_e++){const nt=_.holes[_e];this.holes.push(nt.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let _e=0,tt=this.holes.length;_e<tt;_e++){const nt=this.holes[_e];_.holes.push(nt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let _e=0,tt=_.holes.length;_e<tt;_e++){const nt=_.holes[_e];this.holes.push(new Path().fromJSON(nt))}return this}};const Earcut={triangulate:function(et,_,_e=2){const tt=_&&_.length,nt=tt?_[0]*_e:et.length;let it=linkedList(et,0,nt,_e,!0);const rt=[];if(!it||it.next===it.prev)return rt;let st,ot,at,At,lt,gt,ct;if(tt&&(it=eliminateHoles(et,_,it,_e)),et.length>80*_e){st=at=et[0],ot=At=et[1];for(let dt=_e;dt<nt;dt+=_e)lt=et[dt],gt=et[dt+1],lt<st&&(st=lt),gt<ot&&(ot=gt),lt>at&&(at=lt),gt>At&&(At=gt);ct=Math.max(at-st,At-ot),ct=ct!==0?32767/ct:0}return earcutLinked(it,rt,_e,st,ot,ct,0),rt}};function linkedList(et,_,_e,tt,nt){let it,rt;if(nt===signedArea(et,_,_e,tt)>0)for(it=_;it<_e;it+=tt)rt=insertNode(it,et[it],et[it+1],rt);else for(it=_e-tt;it>=_;it-=tt)rt=insertNode(it,et[it],et[it+1],rt);return rt&&equals(rt,rt.next)&&(removeNode(rt),rt=rt.next),rt}function filterPoints(et,_){if(!et)return et;_||(_=et);let _e=et,tt;do if(tt=!1,!_e.steiner&&(equals(_e,_e.next)||area(_e.prev,_e,_e.next)===0)){if(removeNode(_e),_e=_=_e.prev,_e===_e.next)break;tt=!0}else _e=_e.next;while(tt||_e!==_);return _}function earcutLinked(et,_,_e,tt,nt,it,rt){if(!et)return;!rt&&it&&indexCurve(et,tt,nt,it);let st=et,ot,at;for(;et.prev!==et.next;){if(ot=et.prev,at=et.next,it?isEarHashed(et,tt,nt,it):isEar(et)){_.push(ot.i/_e|0),_.push(et.i/_e|0),_.push(at.i/_e|0),removeNode(et),et=at.next,st=at.next;continue}if(et=at,et===st){rt?rt===1?(et=cureLocalIntersections(filterPoints(et),_,_e),earcutLinked(et,_,_e,tt,nt,it,2)):rt===2&&splitEarcut(et,_,_e,tt,nt,it):earcutLinked(filterPoints(et),_,_e,tt,nt,it,1);break}}}function isEar(et){const _=et.prev,_e=et,tt=et.next;if(area(_,_e,tt)>=0)return!1;const nt=_.x,it=_e.x,rt=tt.x,st=_.y,ot=_e.y,at=tt.y,At=nt<it?nt<rt?nt:rt:it<rt?it:rt,lt=st<ot?st<at?st:at:ot<at?ot:at,gt=nt>it?nt>rt?nt:rt:it>rt?it:rt,ct=st>ot?st>at?st:at:ot>at?ot:at;let dt=tt.next;for(;dt!==_;){if(dt.x>=At&&dt.x<=gt&&dt.y>=lt&&dt.y<=ct&&pointInTriangle(nt,st,it,ot,rt,at,dt.x,dt.y)&&area(dt.prev,dt,dt.next)>=0)return!1;dt=dt.next}return!0}function isEarHashed(et,_,_e,tt){const nt=et.prev,it=et,rt=et.next;if(area(nt,it,rt)>=0)return!1;const st=nt.x,ot=it.x,at=rt.x,At=nt.y,lt=it.y,gt=rt.y,ct=st<ot?st<at?st:at:ot<at?ot:at,dt=At<lt?At<gt?At:gt:lt<gt?lt:gt,ht=st>ot?st>at?st:at:ot>at?ot:at,mt=At>lt?At>gt?At:gt:lt>gt?lt:gt,Ct=zOrder(ct,dt,_,_e,tt),ft=zOrder(ht,mt,_,_e,tt);let pt=et.prevZ,Vt=et.nextZ;for(;pt&&pt.z>=Ct&&Vt&&Vt.z<=ft;){if(pt.x>=ct&&pt.x<=ht&&pt.y>=dt&&pt.y<=mt&&pt!==nt&&pt!==rt&&pointInTriangle(st,At,ot,lt,at,gt,pt.x,pt.y)&&area(pt.prev,pt,pt.next)>=0||(pt=pt.prevZ,Vt.x>=ct&&Vt.x<=ht&&Vt.y>=dt&&Vt.y<=mt&&Vt!==nt&&Vt!==rt&&pointInTriangle(st,At,ot,lt,at,gt,Vt.x,Vt.y)&&area(Vt.prev,Vt,Vt.next)>=0))return!1;Vt=Vt.nextZ}for(;pt&&pt.z>=Ct;){if(pt.x>=ct&&pt.x<=ht&&pt.y>=dt&&pt.y<=mt&&pt!==nt&&pt!==rt&&pointInTriangle(st,At,ot,lt,at,gt,pt.x,pt.y)&&area(pt.prev,pt,pt.next)>=0)return!1;pt=pt.prevZ}for(;Vt&&Vt.z<=ft;){if(Vt.x>=ct&&Vt.x<=ht&&Vt.y>=dt&&Vt.y<=mt&&Vt!==nt&&Vt!==rt&&pointInTriangle(st,At,ot,lt,at,gt,Vt.x,Vt.y)&&area(Vt.prev,Vt,Vt.next)>=0)return!1;Vt=Vt.nextZ}return!0}function cureLocalIntersections(et,_,_e){let tt=et;do{const nt=tt.prev,it=tt.next.next;!equals(nt,it)&&intersects(nt,tt,tt.next,it)&&locallyInside(nt,it)&&locallyInside(it,nt)&&(_.push(nt.i/_e|0),_.push(tt.i/_e|0),_.push(it.i/_e|0),removeNode(tt),removeNode(tt.next),tt=et=it),tt=tt.next}while(tt!==et);return filterPoints(tt)}function splitEarcut(et,_,_e,tt,nt,it){let rt=et;do{let st=rt.next.next;for(;st!==rt.prev;){if(rt.i!==st.i&&isValidDiagonal(rt,st)){let ot=splitPolygon(rt,st);rt=filterPoints(rt,rt.next),ot=filterPoints(ot,ot.next),earcutLinked(rt,_,_e,tt,nt,it,0),earcutLinked(ot,_,_e,tt,nt,it,0);return}st=st.next}rt=rt.next}while(rt!==et)}function eliminateHoles(et,_,_e,tt){const nt=[];let it,rt,st,ot,at;for(it=0,rt=_.length;it<rt;it++)st=_[it]*tt,ot=it<rt-1?_[it+1]*tt:et.length,at=linkedList(et,st,ot,tt,!1),at===at.next&&(at.steiner=!0),nt.push(getLeftmost(at));for(nt.sort(compareX),it=0;it<nt.length;it++)_e=eliminateHole(nt[it],_e);return _e}function compareX(et,_){return et.x-_.x}function eliminateHole(et,_){const _e=findHoleBridge(et,_);if(!_e)return _;const tt=splitPolygon(_e,et);return filterPoints(tt,tt.next),filterPoints(_e,_e.next)}function findHoleBridge(et,_){let _e=_,tt=-1/0,nt;const it=et.x,rt=et.y;do{if(rt<=_e.y&&rt>=_e.next.y&&_e.next.y!==_e.y){const gt=_e.x+(rt-_e.y)*(_e.next.x-_e.x)/(_e.next.y-_e.y);if(gt<=it&&gt>tt&&(tt=gt,nt=_e.x<_e.next.x?_e:_e.next,gt===it))return nt}_e=_e.next}while(_e!==_);if(!nt)return null;const st=nt,ot=nt.x,at=nt.y;let At=1/0,lt;_e=nt;do it>=_e.x&&_e.x>=ot&&it!==_e.x&&pointInTriangle(rt<at?it:tt,rt,ot,at,rt<at?tt:it,rt,_e.x,_e.y)&&(lt=Math.abs(rt-_e.y)/(it-_e.x),locallyInside(_e,et)&&(lt<At||lt===At&&(_e.x>nt.x||_e.x===nt.x&&sectorContainsSector(nt,_e)))&&(nt=_e,At=lt)),_e=_e.next;while(_e!==st);return nt}function sectorContainsSector(et,_){return area(et.prev,et,_.prev)<0&&area(_.next,et,et.next)<0}function indexCurve(et,_,_e,tt){let nt=et;do nt.z===0&&(nt.z=zOrder(nt.x,nt.y,_,_e,tt)),nt.prevZ=nt.prev,nt.nextZ=nt.next,nt=nt.next;while(nt!==et);nt.prevZ.nextZ=null,nt.prevZ=null,sortLinked(nt)}function sortLinked(et){let _,_e,tt,nt,it,rt,st,ot,at=1;do{for(_e=et,et=null,it=null,rt=0;_e;){for(rt++,tt=_e,st=0,_=0;_<at&&(st++,tt=tt.nextZ,!!tt);_++);for(ot=at;st>0||ot>0&&tt;)st!==0&&(ot===0||!tt||_e.z<=tt.z)?(nt=_e,_e=_e.nextZ,st--):(nt=tt,tt=tt.nextZ,ot--),it?it.nextZ=nt:et=nt,nt.prevZ=it,it=nt;_e=tt}it.nextZ=null,at*=2}while(rt>1);return et}function zOrder(et,_,_e,tt,nt){return et=(et-_e)*nt|0,_=(_-tt)*nt|0,et=(et|et<<8)&16711935,et=(et|et<<4)&252645135,et=(et|et<<2)&858993459,et=(et|et<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,et|_<<1}function getLeftmost(et){let _=et,_e=et;do(_.x<_e.x||_.x===_e.x&&_.y<_e.y)&&(_e=_),_=_.next;while(_!==et);return _e}function pointInTriangle(et,_,_e,tt,nt,it,rt,st){return(nt-rt)*(_-st)>=(et-rt)*(it-st)&&(et-rt)*(tt-st)>=(_e-rt)*(_-st)&&(_e-rt)*(it-st)>=(nt-rt)*(tt-st)}function isValidDiagonal(et,_){return et.next.i!==_.i&&et.prev.i!==_.i&&!intersectsPolygon(et,_)&&(locallyInside(et,_)&&locallyInside(_,et)&&middleInside(et,_)&&(area(et.prev,et,_.prev)||area(et,_.prev,_))||equals(et,_)&&area(et.prev,et,et.next)>0&&area(_.prev,_,_.next)>0)}function area(et,_,_e){return(_.y-et.y)*(_e.x-_.x)-(_.x-et.x)*(_e.y-_.y)}function equals(et,_){return et.x===_.x&&et.y===_.y}function intersects(et,_,_e,tt){const nt=sign(area(et,_,_e)),it=sign(area(et,_,tt)),rt=sign(area(_e,tt,et)),st=sign(area(_e,tt,_));return!!(nt!==it&&rt!==st||nt===0&&onSegment(et,_e,_)||it===0&&onSegment(et,tt,_)||rt===0&&onSegment(_e,et,tt)||st===0&&onSegment(_e,_,tt))}function onSegment(et,_,_e){return _.x<=Math.max(et.x,_e.x)&&_.x>=Math.min(et.x,_e.x)&&_.y<=Math.max(et.y,_e.y)&&_.y>=Math.min(et.y,_e.y)}function sign(et){return et>0?1:et<0?-1:0}function intersectsPolygon(et,_){let _e=et;do{if(_e.i!==et.i&&_e.next.i!==et.i&&_e.i!==_.i&&_e.next.i!==_.i&&intersects(_e,_e.next,et,_))return!0;_e=_e.next}while(_e!==et);return!1}function locallyInside(et,_){return area(et.prev,et,et.next)<0?area(et,_,et.next)>=0&&area(et,et.prev,_)>=0:area(et,_,et.prev)<0||area(et,et.next,_)<0}function middleInside(et,_){let _e=et,tt=!1;const nt=(et.x+_.x)/2,it=(et.y+_.y)/2;do _e.y>it!=_e.next.y>it&&_e.next.y!==_e.y&&nt<(_e.next.x-_e.x)*(it-_e.y)/(_e.next.y-_e.y)+_e.x&&(tt=!tt),_e=_e.next;while(_e!==et);return tt}function splitPolygon(et,_){const _e=new Node(et.i,et.x,et.y),tt=new Node(_.i,_.x,_.y),nt=et.next,it=_.prev;return et.next=_,_.prev=et,_e.next=nt,nt.prev=_e,tt.next=_e,_e.prev=tt,it.next=tt,tt.prev=it,tt}function insertNode(et,_,_e,tt){const nt=new Node(et,_,_e);return tt?(nt.next=tt.next,nt.prev=tt,tt.next.prev=nt,tt.next=nt):(nt.prev=nt,nt.next=nt),nt}function removeNode(et){et.next.prev=et.prev,et.prev.next=et.next,et.prevZ&&(et.prevZ.nextZ=et.nextZ),et.nextZ&&(et.nextZ.prevZ=et.prevZ)}function Node(et,_,_e){this.i=et,this.x=_,this.y=_e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(et,_,_e,tt){let nt=0;for(let it=_,rt=_e-tt;it<_e;it+=tt)nt+=(et[rt]-et[it])*(et[it+1]+et[rt+1]),rt=it;return nt}class ShapeUtils{static area(_){const _e=_.length;let tt=0;for(let nt=_e-1,it=0;it<_e;nt=it++)tt+=_[nt].x*_[it].y-_[it].x*_[nt].y;return tt*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,_e){const tt=[],nt=[],it=[];removeDupEndPts(_),addContour(tt,_);let rt=_.length;_e.forEach(removeDupEndPts);for(let ot=0;ot<_e.length;ot++)nt.push(rt),rt+=_e[ot].length,addContour(tt,_e[ot]);const st=Earcut.triangulate(tt,nt);for(let ot=0;ot<st.length;ot+=3)it.push(st.slice(ot,ot+3));return it}}function removeDupEndPts(et){const _=et.length;_>2&&et[_-1].equals(et[0])&&et.pop()}function addContour(et,_){for(let _e=0;_e<_.length;_e++)et.push(_[_e].x),et.push(_[_e].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape$2([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),_e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:_e},_=Array.isArray(_)?_:[_];const tt=this,nt=[],it=[];for(let st=0,ot=_.length;st<ot;st++){const at=_[st];rt(at)}this.setAttribute("position",new Float32BufferAttribute(nt,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2)),this.computeVertexNormals();function rt(st){const ot=[],at=_e.curveSegments!==void 0?_e.curveSegments:12,At=_e.steps!==void 0?_e.steps:1,lt=_e.depth!==void 0?_e.depth:1;let gt=_e.bevelEnabled!==void 0?_e.bevelEnabled:!0,ct=_e.bevelThickness!==void 0?_e.bevelThickness:.2,dt=_e.bevelSize!==void 0?_e.bevelSize:ct-.1,ht=_e.bevelOffset!==void 0?_e.bevelOffset:0,mt=_e.bevelSegments!==void 0?_e.bevelSegments:3;const Ct=_e.extrudePath,ft=_e.UVGenerator!==void 0?_e.UVGenerator:WorldUVGenerator;let pt,Vt=!1,yt,Gt,Bt,vt;Ct&&(pt=Ct.getSpacedPoints(At),Vt=!0,gt=!1,yt=Ct.computeFrenetFrames(At,!1),Gt=new Vector3,Bt=new Vector3,vt=new Vector3),gt||(mt=0,ct=0,dt=0,ht=0);const wt=st.extractPoints(at);let Mt=wt.shape;const kt=wt.holes;if(!ShapeUtils.isClockWise(Mt)){Mt=Mt.reverse();for(let $t=0,tn=kt.length;$t<tn;$t++){const nn=kt[$t];ShapeUtils.isClockWise(nn)&&(kt[$t]=nn.reverse())}}const Yt=ShapeUtils.triangulateShape(Mt,kt),Lt=Mt;for(let $t=0,tn=kt.length;$t<tn;$t++){const nn=kt[$t];Mt=Mt.concat(nn)}function Xt($t,tn,nn){return tn||console.error("THREE.ExtrudeGeometry: vec does not exist"),tn.clone().multiplyScalar(nn).add($t)}const _t=Mt.length,Tt=Yt.length;function St($t,tn,nn){let Bn,Gn,kn;const pn=$t.x-tn.x,Rn=$t.y-tn.y,Mn=nn.x-$t.x,In=nn.y-$t.y,Dt=pn*pn+Rn*Rn,Kt=pn*In-Rn*Mn;if(Math.abs(Kt)>Number.EPSILON){const en=Math.sqrt(Dt),un=Math.sqrt(Mn*Mn+In*In),Sn=tn.x-Rn/en,wn=tn.y+pn/en,Fn=nn.x-In/un,_n=nn.y+Mn/un,fn=((Fn-Sn)*In-(_n-wn)*Mn)/(pn*In-Rn*Mn);Bn=Sn+pn*fn-$t.x,Gn=wn+Rn*fn-$t.y;const Nn=Bn*Bn+Gn*Gn;if(Nn<=2)return new Vector2(Bn,Gn);kn=Math.sqrt(Nn/2)}else{let en=!1;pn>Number.EPSILON?Mn>Number.EPSILON&&(en=!0):pn<-Number.EPSILON?Mn<-Number.EPSILON&&(en=!0):Math.sign(Rn)===Math.sign(In)&&(en=!0),en?(Bn=-Rn,Gn=pn,kn=Math.sqrt(Dt)):(Bn=pn,Gn=Rn,kn=Math.sqrt(Dt/2))}return new Vector2(Bn/kn,Gn/kn)}const Zt=[];for(let $t=0,tn=Lt.length,nn=tn-1,Bn=$t+1;$t<tn;$t++,nn++,Bn++)nn===tn&&(nn=0),Bn===tn&&(Bn=0),Zt[$t]=St(Lt[$t],Lt[nn],Lt[Bn]);const Et=[];let Wt,Ht=Zt.concat();for(let $t=0,tn=kt.length;$t<tn;$t++){const nn=kt[$t];Wt=[];for(let Bn=0,Gn=nn.length,kn=Gn-1,pn=Bn+1;Bn<Gn;Bn++,kn++,pn++)kn===Gn&&(kn=0),pn===Gn&&(pn=0),Wt[Bn]=St(nn[Bn],nn[kn],nn[pn]);Et.push(Wt),Ht=Ht.concat(Wt)}for(let $t=0;$t<mt;$t++){const tn=$t/mt,nn=ct*Math.cos(tn*Math.PI/2),Bn=dt*Math.sin(tn*Math.PI/2)+ht;for(let Gn=0,kn=Lt.length;Gn<kn;Gn++){const pn=Xt(Lt[Gn],Zt[Gn],Bn);rn(pn.x,pn.y,-nn)}for(let Gn=0,kn=kt.length;Gn<kn;Gn++){const pn=kt[Gn];Wt=Et[Gn];for(let Rn=0,Mn=pn.length;Rn<Mn;Rn++){const In=Xt(pn[Rn],Wt[Rn],Bn);rn(In.x,In.y,-nn)}}}const zt=dt+ht;for(let $t=0;$t<_t;$t++){const tn=gt?Xt(Mt[$t],Ht[$t],zt):Mt[$t];Vt?(Bt.copy(yt.normals[0]).multiplyScalar(tn.x),Gt.copy(yt.binormals[0]).multiplyScalar(tn.y),vt.copy(pt[0]).add(Bt).add(Gt),rn(vt.x,vt.y,vt.z)):rn(tn.x,tn.y,0)}for(let $t=1;$t<=At;$t++)for(let tn=0;tn<_t;tn++){const nn=gt?Xt(Mt[tn],Ht[tn],zt):Mt[tn];Vt?(Bt.copy(yt.normals[$t]).multiplyScalar(nn.x),Gt.copy(yt.binormals[$t]).multiplyScalar(nn.y),vt.copy(pt[$t]).add(Bt).add(Gt),rn(vt.x,vt.y,vt.z)):rn(nn.x,nn.y,lt/At*$t)}for(let $t=mt-1;$t>=0;$t--){const tn=$t/mt,nn=ct*Math.cos(tn*Math.PI/2),Bn=dt*Math.sin(tn*Math.PI/2)+ht;for(let Gn=0,kn=Lt.length;Gn<kn;Gn++){const pn=Xt(Lt[Gn],Zt[Gn],Bn);rn(pn.x,pn.y,lt+nn)}for(let Gn=0,kn=kt.length;Gn<kn;Gn++){const pn=kt[Gn];Wt=Et[Gn];for(let Rn=0,Mn=pn.length;Rn<Mn;Rn++){const In=Xt(pn[Rn],Wt[Rn],Bn);Vt?rn(In.x,In.y+pt[At-1].y,pt[At-1].x+nn):rn(In.x,In.y,lt+nn)}}}Pt(),Ot();function Pt(){const $t=nt.length/3;if(gt){let tn=0,nn=_t*tn;for(let Bn=0;Bn<Tt;Bn++){const Gn=Yt[Bn];sn(Gn[2]+nn,Gn[1]+nn,Gn[0]+nn)}tn=At+mt*2,nn=_t*tn;for(let Bn=0;Bn<Tt;Bn++){const Gn=Yt[Bn];sn(Gn[0]+nn,Gn[1]+nn,Gn[2]+nn)}}else{for(let tn=0;tn<Tt;tn++){const nn=Yt[tn];sn(nn[2],nn[1],nn[0])}for(let tn=0;tn<Tt;tn++){const nn=Yt[tn];sn(nn[0]+_t*At,nn[1]+_t*At,nn[2]+_t*At)}}tt.addGroup($t,nt.length/3-$t,0)}function Ot(){const $t=nt.length/3;let tn=0;Jt(Lt,tn),tn+=Lt.length;for(let nn=0,Bn=kt.length;nn<Bn;nn++){const Gn=kt[nn];Jt(Gn,tn),tn+=Gn.length}tt.addGroup($t,nt.length/3-$t,1)}function Jt($t,tn){let nn=$t.length;for(;--nn>=0;){const Bn=nn;let Gn=nn-1;Gn<0&&(Gn=$t.length-1);for(let kn=0,pn=At+mt*2;kn<pn;kn++){const Rn=_t*kn,Mn=_t*(kn+1),In=tn+Bn+Rn,Dt=tn+Gn+Rn,Kt=tn+Gn+Mn,en=tn+Bn+Mn;Vn(In,Dt,Kt,en)}}}function rn($t,tn,nn){ot.push($t),ot.push(tn),ot.push(nn)}function sn($t,tn,nn){dn($t),dn(tn),dn(nn);const Bn=nt.length/3,Gn=ft.generateTopUV(tt,nt,Bn-3,Bn-2,Bn-1);gn(Gn[0]),gn(Gn[1]),gn(Gn[2])}function Vn($t,tn,nn,Bn){dn($t),dn(tn),dn(Bn),dn(tn),dn(nn),dn(Bn);const Gn=nt.length/3,kn=ft.generateSideWallUV(tt,nt,Gn-6,Gn-3,Gn-2,Gn-1);gn(kn[0]),gn(kn[1]),gn(kn[3]),gn(kn[1]),gn(kn[2]),gn(kn[3])}function dn($t){nt.push(ot[$t*3+0]),nt.push(ot[$t*3+1]),nt.push(ot[$t*3+2])}function gn($t){it.push($t.x),it.push($t.y)}}}toJSON(){const _=super.toJSON(),_e=this.parameters.shapes,tt=this.parameters.options;return toJSON$1(_e,tt,_)}static fromJSON(_,_e){const tt=[];for(let it=0,rt=_.shapes.length;it<rt;it++){const st=_e[_.shapes[it]];tt.push(st)}const nt=_.options.extrudePath;return nt!==void 0&&(_.options.extrudePath=new Curves[nt.type]().fromJSON(nt)),new ExtrudeGeometry(tt,_.options)}}const WorldUVGenerator={generateTopUV:function(et,_,_e,tt,nt){const it=_[_e*3],rt=_[_e*3+1],st=_[tt*3],ot=_[tt*3+1],at=_[nt*3],At=_[nt*3+1];return[new Vector2(it,rt),new Vector2(st,ot),new Vector2(at,At)]},generateSideWallUV:function(et,_,_e,tt,nt,it){const rt=_[_e*3],st=_[_e*3+1],ot=_[_e*3+2],at=_[tt*3],At=_[tt*3+1],lt=_[tt*3+2],gt=_[nt*3],ct=_[nt*3+1],dt=_[nt*3+2],ht=_[it*3],mt=_[it*3+1],Ct=_[it*3+2];return Math.abs(st-At)<Math.abs(rt-at)?[new Vector2(rt,1-ot),new Vector2(at,1-lt),new Vector2(gt,1-dt),new Vector2(ht,1-Ct)]:[new Vector2(st,1-ot),new Vector2(At,1-lt),new Vector2(ct,1-dt),new Vector2(mt,1-Ct)]}};function toJSON$1(et,_,_e){if(_e.shapes=[],Array.isArray(et))for(let tt=0,nt=et.length;tt<nt;tt++){const it=et[tt];_e.shapes.push(it.uuid)}else _e.shapes.push(et.uuid);return _e.options=Object.assign({},_),_.extrudePath!==void 0&&(_e.options.extrudePath=_.extrudePath.toJSON()),_e}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const tt=(1+Math.sqrt(5))/2,nt=[-1,tt,0,1,tt,0,-1,-tt,0,1,-tt,0,0,-1,tt,0,1,tt,0,-1,-tt,0,1,-tt,tt,0,-1,tt,0,1,-tt,0,-1,-tt,0,1],it=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(nt,it,_,_e),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const tt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],nt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(tt,nt,_,_e),this.type="OctahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class RingGeometry extends BufferGeometry{constructor(_=.5,_e=1,tt=32,nt=1,it=0,rt=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:_e,thetaSegments:tt,phiSegments:nt,thetaStart:it,thetaLength:rt},tt=Math.max(3,tt),nt=Math.max(1,nt);const st=[],ot=[],at=[],At=[];let lt=_;const gt=(_e-_)/nt,ct=new Vector3,dt=new Vector2;for(let ht=0;ht<=nt;ht++){for(let mt=0;mt<=tt;mt++){const Ct=it+mt/tt*rt;ct.x=lt*Math.cos(Ct),ct.y=lt*Math.sin(Ct),ot.push(ct.x,ct.y,ct.z),at.push(0,0,1),dt.x=(ct.x/_e+1)/2,dt.y=(ct.y/_e+1)/2,At.push(dt.x,dt.y)}lt+=gt}for(let ht=0;ht<nt;ht++){const mt=ht*(tt+1);for(let Ct=0;Ct<tt;Ct++){const ft=Ct+mt,pt=ft,Vt=ft+tt+1,yt=ft+tt+2,Gt=ft+1;st.push(pt,Vt,Gt),st.push(Vt,yt,Gt)}}this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(ot,3)),this.setAttribute("normal",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(At,2))}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape$2([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),_e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:_e};const tt=[],nt=[],it=[],rt=[];let st=0,ot=0;if(Array.isArray(_)===!1)at(_);else for(let At=0;At<_.length;At++)at(_[At]),this.addGroup(st,ot,At),st+=ot,ot=0;this.setIndex(tt),this.setAttribute("position",new Float32BufferAttribute(nt,3)),this.setAttribute("normal",new Float32BufferAttribute(it,3)),this.setAttribute("uv",new Float32BufferAttribute(rt,2));function at(At){const lt=nt.length/3,gt=At.extractPoints(_e);let ct=gt.shape;const dt=gt.holes;ShapeUtils.isClockWise(ct)===!1&&(ct=ct.reverse());for(let mt=0,Ct=dt.length;mt<Ct;mt++){const ft=dt[mt];ShapeUtils.isClockWise(ft)===!0&&(dt[mt]=ft.reverse())}const ht=ShapeUtils.triangulateShape(ct,dt);for(let mt=0,Ct=dt.length;mt<Ct;mt++){const ft=dt[mt];ct=ct.concat(ft)}for(let mt=0,Ct=ct.length;mt<Ct;mt++){const ft=ct[mt];nt.push(ft.x,ft.y,0),it.push(0,0,1),rt.push(ft.x,ft.y)}for(let mt=0,Ct=ht.length;mt<Ct;mt++){const ft=ht[mt],pt=ft[0]+lt,Vt=ft[1]+lt,yt=ft[2]+lt;tt.push(pt,Vt,yt),ot+=3}}}toJSON(){const _=super.toJSON(),_e=this.parameters.shapes;return toJSON(_e,_)}static fromJSON(_,_e){const tt=[];for(let nt=0,it=_.shapes.length;nt<it;nt++){const rt=_e[_.shapes[nt]];tt.push(rt)}return new ShapeGeometry(tt,_.curveSegments)}}function toJSON(et,_){if(_.shapes=[],Array.isArray(et))for(let _e=0,tt=et.length;_e<tt;_e++){const nt=et[_e];_.shapes.push(nt.uuid)}else _.shapes.push(et.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,_e=32,tt=16,nt=0,it=Math.PI*2,rt=0,st=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:_e,heightSegments:tt,phiStart:nt,phiLength:it,thetaStart:rt,thetaLength:st},_e=Math.max(3,Math.floor(_e)),tt=Math.max(2,Math.floor(tt));const ot=Math.min(rt+st,Math.PI);let at=0;const At=[],lt=new Vector3,gt=new Vector3,ct=[],dt=[],ht=[],mt=[];for(let Ct=0;Ct<=tt;Ct++){const ft=[],pt=Ct/tt;let Vt=0;Ct==0&&rt==0?Vt=.5/_e:Ct==tt&&ot==Math.PI&&(Vt=-.5/_e);for(let yt=0;yt<=_e;yt++){const Gt=yt/_e;lt.x=-_*Math.cos(nt+Gt*it)*Math.sin(rt+pt*st),lt.y=_*Math.cos(rt+pt*st),lt.z=_*Math.sin(nt+Gt*it)*Math.sin(rt+pt*st),dt.push(lt.x,lt.y,lt.z),gt.copy(lt).normalize(),ht.push(gt.x,gt.y,gt.z),mt.push(Gt+Vt,1-pt),ft.push(at++)}At.push(ft)}for(let Ct=0;Ct<tt;Ct++)for(let ft=0;ft<_e;ft++){const pt=At[Ct][ft+1],Vt=At[Ct][ft],yt=At[Ct+1][ft],Gt=At[Ct+1][ft+1];(Ct!==0||rt>0)&&ct.push(pt,Vt,Gt),(Ct!==tt-1||ot<Math.PI)&&ct.push(Vt,yt,Gt)}this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(dt,3)),this.setAttribute("normal",new Float32BufferAttribute(ht,3)),this.setAttribute("uv",new Float32BufferAttribute(mt,2))}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,_e=0){const tt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],nt=[2,1,0,0,3,2,1,3,0,2,3,1];super(tt,nt,_,_e),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:_e}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,_e=.4,tt=12,nt=48,it=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:_e,radialSegments:tt,tubularSegments:nt,arc:it},tt=Math.floor(tt),nt=Math.floor(nt);const rt=[],st=[],ot=[],at=[],At=new Vector3,lt=new Vector3,gt=new Vector3;for(let ct=0;ct<=tt;ct++)for(let dt=0;dt<=nt;dt++){const ht=dt/nt*it,mt=ct/tt*Math.PI*2;lt.x=(_+_e*Math.cos(mt))*Math.cos(ht),lt.y=(_+_e*Math.cos(mt))*Math.sin(ht),lt.z=_e*Math.sin(mt),st.push(lt.x,lt.y,lt.z),At.x=_*Math.cos(ht),At.y=_*Math.sin(ht),gt.subVectors(lt,At).normalize(),ot.push(gt.x,gt.y,gt.z),at.push(dt/nt),at.push(ct/tt)}for(let ct=1;ct<=tt;ct++)for(let dt=1;dt<=nt;dt++){const ht=(nt+1)*ct+dt-1,mt=(nt+1)*(ct-1)+dt-1,Ct=(nt+1)*(ct-1)+dt,ft=(nt+1)*ct+dt;rt.push(ht,mt,ft),rt.push(mt,Ct,ft)}this.setIndex(rt),this.setAttribute("position",new Float32BufferAttribute(st,3)),this.setAttribute("normal",new Float32BufferAttribute(ot,3)),this.setAttribute("uv",new Float32BufferAttribute(at,2))}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,_e=.4,tt=64,nt=8,it=2,rt=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:_e,tubularSegments:tt,radialSegments:nt,p:it,q:rt},tt=Math.floor(tt),nt=Math.floor(nt);const st=[],ot=[],at=[],At=[],lt=new Vector3,gt=new Vector3,ct=new Vector3,dt=new Vector3,ht=new Vector3,mt=new Vector3,Ct=new Vector3;for(let pt=0;pt<=tt;++pt){const Vt=pt/tt*it*Math.PI*2;ft(Vt,it,rt,_,ct),ft(Vt+.01,it,rt,_,dt),mt.subVectors(dt,ct),Ct.addVectors(dt,ct),ht.crossVectors(mt,Ct),Ct.crossVectors(ht,mt),ht.normalize(),Ct.normalize();for(let yt=0;yt<=nt;++yt){const Gt=yt/nt*Math.PI*2,Bt=-_e*Math.cos(Gt),vt=_e*Math.sin(Gt);lt.x=ct.x+(Bt*Ct.x+vt*ht.x),lt.y=ct.y+(Bt*Ct.y+vt*ht.y),lt.z=ct.z+(Bt*Ct.z+vt*ht.z),ot.push(lt.x,lt.y,lt.z),gt.subVectors(lt,ct).normalize(),at.push(gt.x,gt.y,gt.z),At.push(pt/tt),At.push(yt/nt)}}for(let pt=1;pt<=tt;pt++)for(let Vt=1;Vt<=nt;Vt++){const yt=(nt+1)*(pt-1)+(Vt-1),Gt=(nt+1)*pt+(Vt-1),Bt=(nt+1)*pt+Vt,vt=(nt+1)*(pt-1)+Vt;st.push(yt,Gt,vt),st.push(Gt,Bt,vt)}this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(ot,3)),this.setAttribute("normal",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(At,2));function ft(pt,Vt,yt,Gt,Bt){const vt=Math.cos(pt),wt=Math.sin(pt),Mt=yt/Vt*pt,kt=Math.cos(Mt);Bt.x=Gt*(2+kt)*.5*vt,Bt.y=Gt*(2+kt)*wt*.5,Bt.z=Gt*Math.sin(Mt)*.5}}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),_e=64,tt=1,nt=8,it=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:_e,radius:tt,radialSegments:nt,closed:it};const rt=_.computeFrenetFrames(_e,it);this.tangents=rt.tangents,this.normals=rt.normals,this.binormals=rt.binormals;const st=new Vector3,ot=new Vector3,at=new Vector2;let At=new Vector3;const lt=[],gt=[],ct=[],dt=[];ht(),this.setIndex(dt),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(gt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2));function ht(){for(let pt=0;pt<_e;pt++)mt(pt);mt(it===!1?_e:0),ft(),Ct()}function mt(pt){At=_.getPointAt(pt/_e,At);const Vt=rt.normals[pt],yt=rt.binormals[pt];for(let Gt=0;Gt<=nt;Gt++){const Bt=Gt/nt*Math.PI*2,vt=Math.sin(Bt),wt=-Math.cos(Bt);ot.x=wt*Vt.x+vt*yt.x,ot.y=wt*Vt.y+vt*yt.y,ot.z=wt*Vt.z+vt*yt.z,ot.normalize(),gt.push(ot.x,ot.y,ot.z),st.x=At.x+tt*ot.x,st.y=At.y+tt*ot.y,st.z=At.z+tt*ot.z,lt.push(st.x,st.y,st.z)}}function Ct(){for(let pt=1;pt<=_e;pt++)for(let Vt=1;Vt<=nt;Vt++){const yt=(nt+1)*(pt-1)+(Vt-1),Gt=(nt+1)*pt+(Vt-1),Bt=(nt+1)*pt+Vt,vt=(nt+1)*(pt-1)+Vt;dt.push(yt,Gt,vt),dt.push(Gt,Bt,vt)}}function ft(){for(let pt=0;pt<=_e;pt++)for(let Vt=0;Vt<=nt;Vt++)at.x=pt/_e,at.y=Vt/nt,ct.push(at.x,at.y)}}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const _e=[],tt=new Set,nt=new Vector3,it=new Vector3;if(_.index!==null){const rt=_.attributes.position,st=_.index;let ot=_.groups;ot.length===0&&(ot=[{start:0,count:st.count,materialIndex:0}]);for(let at=0,At=ot.length;at<At;++at){const lt=ot[at],gt=lt.start,ct=lt.count;for(let dt=gt,ht=gt+ct;dt<ht;dt+=3)for(let mt=0;mt<3;mt++){const Ct=st.getX(dt+mt),ft=st.getX(dt+(mt+1)%3);nt.fromBufferAttribute(rt,Ct),it.fromBufferAttribute(rt,ft),isUniqueEdge(nt,it,tt)===!0&&(_e.push(nt.x,nt.y,nt.z),_e.push(it.x,it.y,it.z))}}}else{const rt=_.attributes.position;for(let st=0,ot=rt.count/3;st<ot;st++)for(let at=0;at<3;at++){const At=3*st+at,lt=3*st+(at+1)%3;nt.fromBufferAttribute(rt,At),it.fromBufferAttribute(rt,lt),isUniqueEdge(nt,it,tt)===!0&&(_e.push(nt.x,nt.y,nt.z),_e.push(it.x,it.y,it.z))}}this.setAttribute("position",new Float32BufferAttribute(_e,3))}}}function isUniqueEdge(et,_,_e){const tt=`${et.x},${et.y},${et.z}-${_.x},${_.y},${_.z}`,nt=`${_.x},${_.y},${_.z}-${et.x},${et.y},${et.z}`;return _e.has(tt)===!0||_e.has(nt)===!0?!1:(_e.add(tt),_e.add(nt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(_e){this.ior=(1+.4*_e)/(1-.4*_e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(_)}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function arraySlice(et,_,_e){return isTypedArray(et)?new et.constructor(et.subarray(_,_e!==void 0?_e:et.length)):et.slice(_,_e)}function convertArray(et,_,_e){return!et||!_e&&et.constructor===_?et:typeof _.BYTES_PER_ELEMENT=="number"?new _(et):Array.prototype.slice.call(et)}function isTypedArray(et){return ArrayBuffer.isView(et)&&!(et instanceof DataView)}function getKeyframeOrder(et){function _(nt,it){return et[nt]-et[it]}const _e=et.length,tt=new Array(_e);for(let nt=0;nt!==_e;++nt)tt[nt]=nt;return tt.sort(_),tt}function sortedArray(et,_,_e){const tt=et.length,nt=new et.constructor(tt);for(let it=0,rt=0;rt!==tt;++it){const st=_e[it]*_;for(let ot=0;ot!==_;++ot)nt[rt++]=et[st+ot]}return nt}function flattenJSON(et,_,_e,tt){let nt=1,it=et[0];for(;it!==void 0&&it[tt]===void 0;)it=et[nt++];if(it===void 0)return;let rt=it[tt];if(rt!==void 0)if(Array.isArray(rt))do rt=it[tt],rt!==void 0&&(_.push(it.time),_e.push.apply(_e,rt)),it=et[nt++];while(it!==void 0);else if(rt.toArray!==void 0)do rt=it[tt],rt!==void 0&&(_.push(it.time),rt.toArray(_e,_e.length)),it=et[nt++];while(it!==void 0);else do rt=it[tt],rt!==void 0&&(_.push(it.time),_e.push(rt)),it=et[nt++];while(it!==void 0)}function subclip(et,_,_e,tt,nt=30){const it=et.clone();it.name=_;const rt=[];for(let ot=0;ot<it.tracks.length;++ot){const at=it.tracks[ot],At=at.getValueSize(),lt=[],gt=[];for(let ct=0;ct<at.times.length;++ct){const dt=at.times[ct]*nt;if(!(dt<_e||dt>=tt)){lt.push(at.times[ct]);for(let ht=0;ht<At;++ht)gt.push(at.values[ct*At+ht])}}lt.length!==0&&(at.times=convertArray(lt,at.times.constructor),at.values=convertArray(gt,at.values.constructor),rt.push(at))}it.tracks=rt;let st=1/0;for(let ot=0;ot<it.tracks.length;++ot)st>it.tracks[ot].times[0]&&(st=it.tracks[ot].times[0]);for(let ot=0;ot<it.tracks.length;++ot)it.tracks[ot].shift(-1*st);return it.resetDuration(),it}function makeClipAdditive(et,_=0,_e=et,tt=30){tt<=0&&(tt=30);const nt=_e.tracks.length,it=_/tt;for(let rt=0;rt<nt;++rt){const st=_e.tracks[rt],ot=st.ValueTypeName;if(ot==="bool"||ot==="string")continue;const at=et.tracks.find(function(Ct){return Ct.name===st.name&&Ct.ValueTypeName===ot});if(at===void 0)continue;let At=0;const lt=st.getValueSize();st.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(At=lt/3);let gt=0;const ct=at.getValueSize();at.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(gt=ct/3);const dt=st.times.length-1;let ht;if(it<=st.times[0]){const Ct=At,ft=lt-At;ht=arraySlice(st.values,Ct,ft)}else if(it>=st.times[dt]){const Ct=dt*lt+At,ft=Ct+lt-At;ht=arraySlice(st.values,Ct,ft)}else{const Ct=st.createInterpolant(),ft=At,pt=lt-At;Ct.evaluate(it),ht=arraySlice(Ct.resultBuffer,ft,pt)}ot==="quaternion"&&new Quaternion$2().fromArray(ht).normalize().conjugate().toArray(ht);const mt=at.times.length;for(let Ct=0;Ct<mt;++Ct){const ft=Ct*ct+gt;if(ot==="quaternion")Quaternion$2.multiplyQuaternionsFlat(at.values,ft,ht,0,at.values,ft);else{const pt=ct-gt*2;for(let Vt=0;Vt<pt;++Vt)at.values[ft+Vt]-=ht[Vt]}}}return et.blendMode=AdditiveAnimationBlendMode,et}var AnimationUtils=Object.freeze({__proto__:null,arraySlice,convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive});class Interpolant{constructor(_,_e,tt,nt){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=nt!==void 0?nt:new _e.constructor(tt),this.sampleValues=_e,this.valueSize=tt,this.settings=null,this.DefaultSettings_={}}evaluate(_){const _e=this.parameterPositions;let tt=this._cachedIndex,nt=_e[tt],it=_e[tt-1];e:{t:{let rt;n:{i:if(!(_<nt)){for(let st=tt+2;;){if(nt===void 0){if(_<it)break i;return tt=_e.length,this._cachedIndex=tt,this.copySampleValue_(tt-1)}if(tt===st)break;if(it=nt,nt=_e[++tt],_<nt)break t}rt=_e.length;break n}if(!(_>=it)){const st=_e[1];_<st&&(tt=2,it=st);for(let ot=tt-2;;){if(it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(tt===ot)break;if(nt=it,it=_e[--tt-1],_>=it)break t}rt=tt,tt=0;break n}break e}for(;tt<rt;){const st=tt+rt>>>1;_<_e[st]?rt=st:tt=st+1}if(nt=_e[tt],it=_e[tt-1],it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(nt===void 0)return tt=_e.length,this._cachedIndex=tt,this.copySampleValue_(tt-1)}this._cachedIndex=tt,this.intervalChanged_(tt,it,nt)}return this.interpolate_(tt,it,_,nt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const _e=this.resultBuffer,tt=this.sampleValues,nt=this.valueSize,it=_*nt;for(let rt=0;rt!==nt;++rt)_e[rt]=tt[it+rt];return _e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,_e,tt,nt){super(_,_e,tt,nt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,_e,tt){const nt=this.parameterPositions;let it=_-2,rt=_+1,st=nt[it],ot=nt[rt];if(st===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:it=_,st=2*_e-tt;break;case WrapAroundEnding:it=nt.length-2,st=_e+nt[it]-nt[it+1];break;default:it=_,st=tt}if(ot===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:rt=_,ot=2*tt-_e;break;case WrapAroundEnding:rt=1,ot=tt+nt[1]-nt[0];break;default:rt=_-1,ot=_e}const at=(tt-_e)*.5,At=this.valueSize;this._weightPrev=at/(_e-st),this._weightNext=at/(ot-tt),this._offsetPrev=it*At,this._offsetNext=rt*At}interpolate_(_,_e,tt,nt){const it=this.resultBuffer,rt=this.sampleValues,st=this.valueSize,ot=_*st,at=ot-st,At=this._offsetPrev,lt=this._offsetNext,gt=this._weightPrev,ct=this._weightNext,dt=(tt-_e)/(nt-_e),ht=dt*dt,mt=ht*dt,Ct=-gt*mt+2*gt*ht-gt*dt,ft=(1+gt)*mt+(-1.5-2*gt)*ht+(-.5+gt)*dt+1,pt=(-1-ct)*mt+(1.5+ct)*ht+.5*dt,Vt=ct*mt-ct*ht;for(let yt=0;yt!==st;++yt)it[yt]=Ct*rt[At+yt]+ft*rt[at+yt]+pt*rt[ot+yt]+Vt*rt[lt+yt];return it}}class LinearInterpolant extends Interpolant{constructor(_,_e,tt,nt){super(_,_e,tt,nt)}interpolate_(_,_e,tt,nt){const it=this.resultBuffer,rt=this.sampleValues,st=this.valueSize,ot=_*st,at=ot-st,At=(tt-_e)/(nt-_e),lt=1-At;for(let gt=0;gt!==st;++gt)it[gt]=rt[at+gt]*lt+rt[ot+gt]*At;return it}}class DiscreteInterpolant extends Interpolant{constructor(_,_e,tt,nt){super(_,_e,tt,nt)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,_e,tt,nt){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(_e===void 0||_e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(_e,this.TimeBufferType),this.values=convertArray(tt,this.ValueBufferType),this.setInterpolation(nt||this.DefaultInterpolation)}static toJSON(_){const _e=_.constructor;let tt;if(_e.toJSON!==this.toJSON)tt=_e.toJSON(_);else{tt={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const nt=_.getInterpolation();nt!==_.DefaultInterpolation&&(tt.interpolation=nt)}return tt.type=_.ValueTypeName,tt}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let _e;switch(_){case InterpolateDiscrete:_e=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:_e=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:_e=this.InterpolantFactoryMethodSmooth;break}if(_e===void 0){const tt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(tt);return console.warn("THREE.KeyframeTrack:",tt),this}return this.createInterpolant=_e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const _e=this.times;for(let tt=0,nt=_e.length;tt!==nt;++tt)_e[tt]+=_}return this}scale(_){if(_!==1){const _e=this.times;for(let tt=0,nt=_e.length;tt!==nt;++tt)_e[tt]*=_}return this}trim(_,_e){const tt=this.times,nt=tt.length;let it=0,rt=nt-1;for(;it!==nt&&tt[it]<_;)++it;for(;rt!==-1&&tt[rt]>_e;)--rt;if(++rt,it!==0||rt!==nt){it>=rt&&(rt=Math.max(rt,1),it=rt-1);const st=this.getValueSize();this.times=arraySlice(tt,it,rt),this.values=arraySlice(this.values,it*st,rt*st)}return this}validate(){let _=!0;const _e=this.getValueSize();_e-Math.floor(_e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_=!1);const tt=this.times,nt=this.values,it=tt.length;it===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_=!1);let rt=null;for(let st=0;st!==it;st++){const ot=tt[st];if(typeof ot=="number"&&isNaN(ot)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,st,ot),_=!1;break}if(rt!==null&&rt>ot){console.error("THREE.KeyframeTrack: Out of order keys.",this,st,ot,rt),_=!1;break}rt=ot}if(nt!==void 0&&isTypedArray(nt))for(let st=0,ot=nt.length;st!==ot;++st){const at=nt[st];if(isNaN(at)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,st,at),_=!1;break}}return _}optimize(){const _=arraySlice(this.times),_e=arraySlice(this.values),tt=this.getValueSize(),nt=this.getInterpolation()===InterpolateSmooth,it=_.length-1;let rt=1;for(let st=1;st<it;++st){let ot=!1;const at=_[st],At=_[st+1];if(at!==At&&(st!==1||at!==_[0]))if(nt)ot=!0;else{const lt=st*tt,gt=lt-tt,ct=lt+tt;for(let dt=0;dt!==tt;++dt){const ht=_e[lt+dt];if(ht!==_e[gt+dt]||ht!==_e[ct+dt]){ot=!0;break}}}if(ot){if(st!==rt){_[rt]=_[st];const lt=st*tt,gt=rt*tt;for(let ct=0;ct!==tt;++ct)_e[gt+ct]=_e[lt+ct]}++rt}}if(it>0){_[rt]=_[it];for(let st=it*tt,ot=rt*tt,at=0;at!==tt;++at)_e[ot+at]=_e[st+at];++rt}return rt!==_.length?(this.times=arraySlice(_,0,rt),this.values=arraySlice(_e,0,rt*tt)):(this.times=_,this.values=_e),this}clone(){const _=arraySlice(this.times,0),_e=arraySlice(this.values,0),tt=this.constructor,nt=new tt(this.name,_,_e);return nt.createInterpolant=this.createInterpolant,nt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,_e,tt,nt){super(_,_e,tt,nt)}interpolate_(_,_e,tt,nt){const it=this.resultBuffer,rt=this.sampleValues,st=this.valueSize,ot=(tt-_e)/(nt-_e);let at=_*st;for(let At=at+st;at!==At;at+=4)Quaternion$2.slerpFlat(it,0,rt,at-st,rt,at,ot);return it}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_,_e=-1,tt,nt=NormalAnimationBlendMode){this.name=_,this.tracks=tt,this.duration=_e,this.blendMode=nt,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(_){const _e=[],tt=_.tracks,nt=1/(_.fps||1);for(let rt=0,st=tt.length;rt!==st;++rt)_e.push(parseKeyframeTrack(tt[rt]).scale(nt));const it=new this(_.name,_.duration,_e,_.blendMode);return it.uuid=_.uuid,it}static toJSON(_){const _e=[],tt=_.tracks,nt={name:_.name,duration:_.duration,tracks:_e,uuid:_.uuid,blendMode:_.blendMode};for(let it=0,rt=tt.length;it!==rt;++it)_e.push(KeyframeTrack.toJSON(tt[it]));return nt}static CreateFromMorphTargetSequence(_,_e,tt,nt){const it=_e.length,rt=[];for(let st=0;st<it;st++){let ot=[],at=[];ot.push((st+it-1)%it,st,(st+1)%it),at.push(0,1,0);const At=getKeyframeOrder(ot);ot=sortedArray(ot,1,At),at=sortedArray(at,1,At),!nt&&ot[0]===0&&(ot.push(it),at.push(at[0])),rt.push(new NumberKeyframeTrack(".morphTargetInfluences["+_e[st].name+"]",ot,at).scale(1/tt))}return new this(_,-1,rt)}static findByName(_,_e){let tt=_;if(!Array.isArray(_)){const nt=_;tt=nt.geometry&&nt.geometry.animations||nt.animations}for(let nt=0;nt<tt.length;nt++)if(tt[nt].name===_e)return tt[nt];return null}static CreateClipsFromMorphTargetSequences(_,_e,tt){const nt={},it=/^([\w-]*?)([\d]+)$/;for(let st=0,ot=_.length;st<ot;st++){const at=_[st],At=at.name.match(it);if(At&&At.length>1){const lt=At[1];let gt=nt[lt];gt||(nt[lt]=gt=[]),gt.push(at)}}const rt=[];for(const st in nt)rt.push(this.CreateFromMorphTargetSequence(st,nt[st],_e,tt));return rt}static parseAnimation(_,_e){if(!_)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const tt=function(lt,gt,ct,dt,ht){if(ct.length!==0){const mt=[],Ct=[];flattenJSON(ct,mt,Ct,dt),mt.length!==0&&ht.push(new lt(gt,mt,Ct))}},nt=[],it=_.name||"default",rt=_.fps||30,st=_.blendMode;let ot=_.length||-1;const at=_.hierarchy||[];for(let lt=0;lt<at.length;lt++){const gt=at[lt].keys;if(!(!gt||gt.length===0))if(gt[0].morphTargets){const ct={};let dt;for(dt=0;dt<gt.length;dt++)if(gt[dt].morphTargets)for(let ht=0;ht<gt[dt].morphTargets.length;ht++)ct[gt[dt].morphTargets[ht]]=-1;for(const ht in ct){const mt=[],Ct=[];for(let ft=0;ft!==gt[dt].morphTargets.length;++ft){const pt=gt[dt];mt.push(pt.time),Ct.push(pt.morphTarget===ht?1:0)}nt.push(new NumberKeyframeTrack(".morphTargetInfluence["+ht+"]",mt,Ct))}ot=ct.length*rt}else{const ct=".bones["+_e[lt].name+"]";tt(VectorKeyframeTrack,ct+".position",gt,"pos",nt),tt(QuaternionKeyframeTrack,ct+".quaternion",gt,"rot",nt),tt(VectorKeyframeTrack,ct+".scale",gt,"scl",nt)}}return nt.length===0?null:new this(it,ot,nt,st)}resetDuration(){const _=this.tracks;let _e=0;for(let tt=0,nt=_.length;tt!==nt;++tt){const it=this.tracks[tt];_e=Math.max(_e,it.times[it.times.length-1])}return this.duration=_e,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let _e=0;_e<this.tracks.length;_e++)_=_&&this.tracks[_e].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let _e=0;_e<this.tracks.length;_e++)_.push(this.tracks[_e].clone());return new this.constructor(this.name,this.duration,_,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(et){switch(et.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+et)}function parseKeyframeTrack(et){if(et.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(et.type);if(et.times===void 0){const _e=[],tt=[];flattenJSON(et.keys,_e,tt,"value"),et.times=_e,et.values=tt}return _.parse!==void 0?_.parse(et):new _(et.name,et.times,et.values,et.interpolation)}const Cache={enabled:!1,files:{},add:function(et,_){this.enabled!==!1&&(this.files[et]=_)},get:function(et){if(this.enabled!==!1)return this.files[et]},remove:function(et){delete this.files[et]},clear:function(){this.files={}}};class LoadingManager{constructor(_,_e,tt){const nt=this;let it=!1,rt=0,st=0,ot;const at=[];this.onStart=void 0,this.onLoad=_,this.onProgress=_e,this.onError=tt,this.itemStart=function(At){st++,it===!1&&nt.onStart!==void 0&&nt.onStart(At,rt,st),it=!0},this.itemEnd=function(At){rt++,nt.onProgress!==void 0&&nt.onProgress(At,rt,st),rt===st&&(it=!1,nt.onLoad!==void 0&&nt.onLoad())},this.itemError=function(At){nt.onError!==void 0&&nt.onError(At)},this.resolveURL=function(At){return ot?ot(At):At},this.setURLModifier=function(At){return ot=At,this},this.addHandler=function(At,lt){return at.push(At,lt),this},this.removeHandler=function(At){const lt=at.indexOf(At);return lt!==-1&&at.splice(lt,2),this},this.getHandler=function(At){for(let lt=0,gt=at.length;lt<gt;lt+=2){const ct=at[lt],dt=at[lt+1];if(ct.global&&(ct.lastIndex=0),ct.test(At))return dt}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,_e){const tt=this;return new Promise(function(nt,it){tt.load(_,nt,_e,it)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}}const loading={};class HttpError extends Error{constructor(_,_e){super(_),this.response=_e}}class FileLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=Cache.get(_);if(it!==void 0)return this.manager.itemStart(_),setTimeout(()=>{_e&&_e(it),this.manager.itemEnd(_)},0),it;if(loading[_]!==void 0){loading[_].push({onLoad:_e,onProgress:tt,onError:nt});return}loading[_]=[],loading[_].push({onLoad:_e,onProgress:tt,onError:nt});const rt=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),st=this.mimeType,ot=this.responseType;fetch(rt).then(at=>{if(at.status===200||at.status===0){if(at.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||at.body===void 0||at.body.getReader===void 0)return at;const At=loading[_],lt=at.body.getReader(),gt=at.headers.get("Content-Length")||at.headers.get("X-File-Size"),ct=gt?parseInt(gt):0,dt=ct!==0;let ht=0;const mt=new ReadableStream({start(Ct){ft();function ft(){lt.read().then(({done:pt,value:Vt})=>{if(pt)Ct.close();else{ht+=Vt.byteLength;const yt=new ProgressEvent("progress",{lengthComputable:dt,loaded:ht,total:ct});for(let Gt=0,Bt=At.length;Gt<Bt;Gt++){const vt=At[Gt];vt.onProgress&&vt.onProgress(yt)}Ct.enqueue(Vt),ft()}})}}});return new Response(mt)}else throw new HttpError(`fetch for "${at.url}" responded with ${at.status}: ${at.statusText}`,at)}).then(at=>{switch(ot){case"arraybuffer":return at.arrayBuffer();case"blob":return at.blob();case"document":return at.text().then(At=>new DOMParser().parseFromString(At,st));case"json":return at.json();default:if(st===void 0)return at.text();{const lt=/charset="?([^;"\s]*)"?/i.exec(st),gt=lt&&lt[1]?lt[1].toLowerCase():void 0,ct=new TextDecoder(gt);return at.arrayBuffer().then(dt=>ct.decode(dt))}}}).then(at=>{Cache.add(_,at);const At=loading[_];delete loading[_];for(let lt=0,gt=At.length;lt<gt;lt++){const ct=At[lt];ct.onLoad&&ct.onLoad(at)}}).catch(at=>{const At=loading[_];if(At===void 0)throw this.manager.itemError(_),at;delete loading[_];for(let lt=0,gt=At.length;lt<gt;lt++){const ct=At[lt];ct.onError&&ct.onError(at)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}}class AnimationLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=this,rt=new FileLoader(this.manager);rt.setPath(this.path),rt.setRequestHeader(this.requestHeader),rt.setWithCredentials(this.withCredentials),rt.load(_,function(st){try{_e(it.parse(JSON.parse(st)))}catch(ot){nt?nt(ot):console.error(ot),it.manager.itemError(_)}},tt,nt)}parse(_){const _e=[];for(let tt=0;tt<_.length;tt++){const nt=AnimationClip.parse(_[tt]);_e.push(nt)}return _e}}class CompressedTextureLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=this,rt=[],st=new CompressedTexture,ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(it.withCredentials);let at=0;function At(lt){ot.load(_[lt],function(gt){const ct=it.parse(gt,!0);rt[lt]={width:ct.width,height:ct.height,format:ct.format,mipmaps:ct.mipmaps},at+=1,at===6&&(ct.mipmapCount===1&&(st.minFilter=LinearFilter),st.image=rt,st.format=ct.format,st.needsUpdate=!0,_e&&_e(st))},tt,nt)}if(Array.isArray(_))for(let lt=0,gt=_.length;lt<gt;++lt)At(lt);else ot.load(_,function(lt){const gt=it.parse(lt,!0);if(gt.isCubemap){const ct=gt.mipmaps.length/gt.mipmapCount;for(let dt=0;dt<ct;dt++){rt[dt]={mipmaps:[]};for(let ht=0;ht<gt.mipmapCount;ht++)rt[dt].mipmaps.push(gt.mipmaps[dt*gt.mipmapCount+ht]),rt[dt].format=gt.format,rt[dt].width=gt.width,rt[dt].height=gt.height}st.image=rt}else st.image.width=gt.width,st.image.height=gt.height,st.mipmaps=gt.mipmaps;gt.mipmapCount===1&&(st.minFilter=LinearFilter),st.format=gt.format,st.needsUpdate=!0,_e&&_e(st)},tt,nt);return st}}class ImageLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,rt=Cache.get(_);if(rt!==void 0)return it.manager.itemStart(_),setTimeout(function(){_e&&_e(rt),it.manager.itemEnd(_)},0),rt;const st=createElementNS("img");function ot(){At(),Cache.add(_,this),_e&&_e(this),it.manager.itemEnd(_)}function at(lt){At(),nt&&nt(lt),it.manager.itemError(_),it.manager.itemEnd(_)}function At(){st.removeEventListener("load",ot,!1),st.removeEventListener("error",at,!1)}return st.addEventListener("load",ot,!1),st.addEventListener("error",at,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(st.crossOrigin=this.crossOrigin),it.manager.itemStart(_),st.src=_,st}}class CubeTextureLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=new CubeTexture,rt=new ImageLoader(this.manager);rt.setCrossOrigin(this.crossOrigin),rt.setPath(this.path);let st=0;function ot(at){rt.load(_[at],function(At){it.images[at]=At,st++,st===6&&(it.needsUpdate=!0,_e&&_e(it))},void 0,nt)}for(let at=0;at<_.length;++at)ot(at);return it}}class DataTextureLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=this,rt=new DataTexture,st=new FileLoader(this.manager);return st.setResponseType("arraybuffer"),st.setRequestHeader(this.requestHeader),st.setPath(this.path),st.setWithCredentials(it.withCredentials),st.load(_,function(ot){const at=it.parse(ot);at&&(at.image!==void 0?rt.image=at.image:at.data!==void 0&&(rt.image.width=at.width,rt.image.height=at.height,rt.image.data=at.data),rt.wrapS=at.wrapS!==void 0?at.wrapS:ClampToEdgeWrapping,rt.wrapT=at.wrapT!==void 0?at.wrapT:ClampToEdgeWrapping,rt.magFilter=at.magFilter!==void 0?at.magFilter:LinearFilter,rt.minFilter=at.minFilter!==void 0?at.minFilter:LinearFilter,rt.anisotropy=at.anisotropy!==void 0?at.anisotropy:1,at.encoding!==void 0&&(rt.encoding=at.encoding),at.flipY!==void 0&&(rt.flipY=at.flipY),at.format!==void 0&&(rt.format=at.format),at.type!==void 0&&(rt.type=at.type),at.mipmaps!==void 0&&(rt.mipmaps=at.mipmaps,rt.minFilter=LinearMipmapLinearFilter),at.mipmapCount===1&&(rt.minFilter=LinearFilter),at.generateMipmaps!==void 0&&(rt.generateMipmaps=at.generateMipmaps),rt.needsUpdate=!0,_e&&_e(rt,at))},tt,nt),rt}}class TextureLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=new Texture,rt=new ImageLoader(this.manager);return rt.setCrossOrigin(this.crossOrigin),rt.setPath(this.path),rt.load(_,function(st){it.image=st,it.needsUpdate=!0,_e!==void 0&&_e(it)},tt,nt),it}}class Light extends Object3D{constructor(_,_e=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(_),this.intensity=_e}dispose(){}copy(_,_e){return super.copy(_,_e),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const _e=super.toJSON(_);return _e.object.color=this.color.getHex(),_e.object.intensity=this.intensity,this.groundColor!==void 0&&(_e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(_e.object.distance=this.distance),this.angle!==void 0&&(_e.object.angle=this.angle),this.decay!==void 0&&(_e.object.decay=this.decay),this.penumbra!==void 0&&(_e.object.penumbra=this.penumbra),this.shadow!==void 0&&(_e.object.shadow=this.shadow.toJSON()),_e}}class HemisphereLight extends Light{constructor(_,_e,tt){super(_,tt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(_e)}copy(_,_e){return super.copy(_,_e),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const _e=this.camera,tt=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),_e.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),_e.lookAt(_lookTarget$1),_e.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),tt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),tt.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.bias=_.bias,this.radius=_.radius,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera$1(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(_){const _e=this.camera,tt=RAD2DEG*2*_.angle*this.focus,nt=this.mapSize.width/this.mapSize.height,it=_.distance||_e.far;(tt!==_e.fov||nt!==_e.aspect||it!==_e.far)&&(_e.fov=tt,_e.aspect=nt,_e.far=it,_e.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,_e,tt=0,nt=Math.PI/3,it=0,rt=2){super(_,_e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=tt,this.angle=nt,this.penumbra=it,this.decay=rt,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,_e){return super.copy(_,_e),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera$1(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,_e=0){const tt=this.camera,nt=this.matrix,it=_.distance||tt.far;it!==tt.far&&(tt.far=it,tt.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),tt.position.copy(_lightPositionWorld),_lookTarget.copy(tt.position),_lookTarget.add(this._cubeDirections[_e]),tt.up.copy(this._cubeUps[_e]),tt.lookAt(_lookTarget),tt.updateMatrixWorld(),nt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(_,_e,tt=0,nt=2){super(_,_e),this.isPointLight=!0,this.type="PointLight",this.distance=tt,this.decay=nt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,_e){return super.copy(_,_e),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,_e){super(_,_e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,_e){super(_,_e),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,_e,tt=10,nt=10){super(_,_e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=tt,this.height=nt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const _e=super.toJSON(_);return _e.object.width=this.width,_e.object.height=this.height,_e}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let _e=0;_e<9;_e++)this.coefficients[_e].copy(_[_e]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,_e){const tt=_.x,nt=_.y,it=_.z,rt=this.coefficients;return _e.copy(rt[0]).multiplyScalar(.282095),_e.addScaledVector(rt[1],.488603*nt),_e.addScaledVector(rt[2],.488603*it),_e.addScaledVector(rt[3],.488603*tt),_e.addScaledVector(rt[4],1.092548*(tt*nt)),_e.addScaledVector(rt[5],1.092548*(nt*it)),_e.addScaledVector(rt[6],.315392*(3*it*it-1)),_e.addScaledVector(rt[7],1.092548*(tt*it)),_e.addScaledVector(rt[8],.546274*(tt*tt-nt*nt)),_e}getIrradianceAt(_,_e){const tt=_.x,nt=_.y,it=_.z,rt=this.coefficients;return _e.copy(rt[0]).multiplyScalar(.886227),_e.addScaledVector(rt[1],2*.511664*nt),_e.addScaledVector(rt[2],2*.511664*it),_e.addScaledVector(rt[3],2*.511664*tt),_e.addScaledVector(rt[4],2*.429043*tt*nt),_e.addScaledVector(rt[5],2*.429043*nt*it),_e.addScaledVector(rt[6],.743125*it*it-.247708),_e.addScaledVector(rt[7],2*.429043*tt*it),_e.addScaledVector(rt[8],.429043*(tt*tt-nt*nt)),_e}add(_){for(let _e=0;_e<9;_e++)this.coefficients[_e].add(_.coefficients[_e]);return this}addScaledSH(_,_e){for(let tt=0;tt<9;tt++)this.coefficients[tt].addScaledVector(_.coefficients[tt],_e);return this}scale(_){for(let _e=0;_e<9;_e++)this.coefficients[_e].multiplyScalar(_);return this}lerp(_,_e){for(let tt=0;tt<9;tt++)this.coefficients[tt].lerp(_.coefficients[tt],_e);return this}equals(_){for(let _e=0;_e<9;_e++)if(!this.coefficients[_e].equals(_.coefficients[_e]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,_e=0){const tt=this.coefficients;for(let nt=0;nt<9;nt++)tt[nt].fromArray(_,_e+nt*3);return this}toArray(_=[],_e=0){const tt=this.coefficients;for(let nt=0;nt<9;nt++)tt[nt].toArray(_,_e+nt*3);return _}static getBasisAt(_,_e){const tt=_.x,nt=_.y,it=_.z;_e[0]=.282095,_e[1]=.488603*nt,_e[2]=.488603*it,_e[3]=.488603*tt,_e[4]=1.092548*tt*nt,_e[5]=1.092548*nt*it,_e[6]=.315392*(3*it*it-1),_e[7]=1.092548*tt*it,_e[8]=.546274*(tt*tt-nt*nt)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,_e=1){super(void 0,_e),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const _e=super.toJSON(_);return _e.object.sh=this.sh.toArray(),_e}}class MaterialLoader extends Loader{constructor(_){super(_),this.textures={}}load(_,_e,tt,nt){const it=this,rt=new FileLoader(it.manager);rt.setPath(it.path),rt.setRequestHeader(it.requestHeader),rt.setWithCredentials(it.withCredentials),rt.load(_,function(st){try{_e(it.parse(JSON.parse(st)))}catch(ot){nt?nt(ot):console.error(ot),it.manager.itemError(_)}},tt,nt)}parse(_){const _e=this.textures;function tt(it){return _e[it]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",it),_e[it]}const nt=MaterialLoader.createMaterialFromType(_.type);if(_.uuid!==void 0&&(nt.uuid=_.uuid),_.name!==void 0&&(nt.name=_.name),_.color!==void 0&&nt.color!==void 0&&nt.color.setHex(_.color),_.roughness!==void 0&&(nt.roughness=_.roughness),_.metalness!==void 0&&(nt.metalness=_.metalness),_.sheen!==void 0&&(nt.sheen=_.sheen),_.sheenColor!==void 0&&(nt.sheenColor=new Color().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(nt.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&nt.emissive!==void 0&&nt.emissive.setHex(_.emissive),_.specular!==void 0&&nt.specular!==void 0&&nt.specular.setHex(_.specular),_.specularIntensity!==void 0&&(nt.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&nt.specularColor!==void 0&&nt.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(nt.shininess=_.shininess),_.clearcoat!==void 0&&(nt.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(nt.clearcoatRoughness=_.clearcoatRoughness),_.iridescence!==void 0&&(nt.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(nt.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(nt.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(nt.transmission=_.transmission),_.thickness!==void 0&&(nt.thickness=_.thickness),_.attenuationDistance!==void 0&&(nt.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&nt.attenuationColor!==void 0&&nt.attenuationColor.setHex(_.attenuationColor),_.fog!==void 0&&(nt.fog=_.fog),_.flatShading!==void 0&&(nt.flatShading=_.flatShading),_.blending!==void 0&&(nt.blending=_.blending),_.combine!==void 0&&(nt.combine=_.combine),_.side!==void 0&&(nt.side=_.side),_.shadowSide!==void 0&&(nt.shadowSide=_.shadowSide),_.opacity!==void 0&&(nt.opacity=_.opacity),_.transparent!==void 0&&(nt.transparent=_.transparent),_.alphaTest!==void 0&&(nt.alphaTest=_.alphaTest),_.depthTest!==void 0&&(nt.depthTest=_.depthTest),_.depthWrite!==void 0&&(nt.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(nt.colorWrite=_.colorWrite),_.stencilWrite!==void 0&&(nt.stencilWrite=_.stencilWrite),_.stencilWriteMask!==void 0&&(nt.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(nt.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(nt.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(nt.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(nt.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(nt.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(nt.stencilZPass=_.stencilZPass),_.wireframe!==void 0&&(nt.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(nt.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(nt.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(nt.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(nt.rotation=_.rotation),_.linewidth!==1&&(nt.linewidth=_.linewidth),_.dashSize!==void 0&&(nt.dashSize=_.dashSize),_.gapSize!==void 0&&(nt.gapSize=_.gapSize),_.scale!==void 0&&(nt.scale=_.scale),_.polygonOffset!==void 0&&(nt.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(nt.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(nt.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(nt.dithering=_.dithering),_.alphaToCoverage!==void 0&&(nt.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(nt.premultipliedAlpha=_.premultipliedAlpha),_.visible!==void 0&&(nt.visible=_.visible),_.toneMapped!==void 0&&(nt.toneMapped=_.toneMapped),_.userData!==void 0&&(nt.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?nt.vertexColors=_.vertexColors>0:nt.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const it in _.uniforms){const rt=_.uniforms[it];switch(nt.uniforms[it]={},rt.type){case"t":nt.uniforms[it].value=tt(rt.value);break;case"c":nt.uniforms[it].value=new Color().setHex(rt.value);break;case"v2":nt.uniforms[it].value=new Vector2().fromArray(rt.value);break;case"v3":nt.uniforms[it].value=new Vector3().fromArray(rt.value);break;case"v4":nt.uniforms[it].value=new Vector4().fromArray(rt.value);break;case"m3":nt.uniforms[it].value=new Matrix3().fromArray(rt.value);break;case"m4":nt.uniforms[it].value=new Matrix4().fromArray(rt.value);break;default:nt.uniforms[it].value=rt.value}}if(_.defines!==void 0&&(nt.defines=_.defines),_.vertexShader!==void 0&&(nt.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(nt.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(nt.glslVersion=_.glslVersion),_.extensions!==void 0)for(const it in _.extensions)nt.extensions[it]=_.extensions[it];if(_.size!==void 0&&(nt.size=_.size),_.sizeAttenuation!==void 0&&(nt.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(nt.map=tt(_.map)),_.matcap!==void 0&&(nt.matcap=tt(_.matcap)),_.alphaMap!==void 0&&(nt.alphaMap=tt(_.alphaMap)),_.bumpMap!==void 0&&(nt.bumpMap=tt(_.bumpMap)),_.bumpScale!==void 0&&(nt.bumpScale=_.bumpScale),_.normalMap!==void 0&&(nt.normalMap=tt(_.normalMap)),_.normalMapType!==void 0&&(nt.normalMapType=_.normalMapType),_.normalScale!==void 0){let it=_.normalScale;Array.isArray(it)===!1&&(it=[it,it]),nt.normalScale=new Vector2().fromArray(it)}return _.displacementMap!==void 0&&(nt.displacementMap=tt(_.displacementMap)),_.displacementScale!==void 0&&(nt.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(nt.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(nt.roughnessMap=tt(_.roughnessMap)),_.metalnessMap!==void 0&&(nt.metalnessMap=tt(_.metalnessMap)),_.emissiveMap!==void 0&&(nt.emissiveMap=tt(_.emissiveMap)),_.emissiveIntensity!==void 0&&(nt.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(nt.specularMap=tt(_.specularMap)),_.specularIntensityMap!==void 0&&(nt.specularIntensityMap=tt(_.specularIntensityMap)),_.specularColorMap!==void 0&&(nt.specularColorMap=tt(_.specularColorMap)),_.envMap!==void 0&&(nt.envMap=tt(_.envMap)),_.envMapIntensity!==void 0&&(nt.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(nt.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(nt.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(nt.lightMap=tt(_.lightMap)),_.lightMapIntensity!==void 0&&(nt.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(nt.aoMap=tt(_.aoMap)),_.aoMapIntensity!==void 0&&(nt.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(nt.gradientMap=tt(_.gradientMap)),_.clearcoatMap!==void 0&&(nt.clearcoatMap=tt(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(nt.clearcoatRoughnessMap=tt(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(nt.clearcoatNormalMap=tt(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(nt.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(nt.iridescenceMap=tt(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(nt.iridescenceThicknessMap=tt(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(nt.transmissionMap=tt(_.transmissionMap)),_.thicknessMap!==void 0&&(nt.thicknessMap=tt(_.thicknessMap)),_.sheenColorMap!==void 0&&(nt.sheenColorMap=tt(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(nt.sheenRoughnessMap=tt(_.sheenRoughnessMap)),nt}setTextures(_){return this.textures=_,this}static createMaterialFromType(_){const _e={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new _e[_]}}class LoaderUtils{static decodeText(_){if(typeof TextDecoder<"u")return new TextDecoder().decode(_);let _e="";for(let tt=0,nt=_.length;tt<nt;tt++)_e+=String.fromCharCode(_[tt]);try{return decodeURIComponent(escape(_e))}catch{return _e}}static extractUrlBase(_){const _e=_.lastIndexOf("/");return _e===-1?"./":_.slice(0,_e+1)}static resolveURL(_,_e){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(_e)&&/^\//.test(_)&&(_e=_e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:_e+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=this,rt=new FileLoader(it.manager);rt.setPath(it.path),rt.setRequestHeader(it.requestHeader),rt.setWithCredentials(it.withCredentials),rt.load(_,function(st){try{_e(it.parse(JSON.parse(st)))}catch(ot){nt?nt(ot):console.error(ot),it.manager.itemError(_)}},tt,nt)}parse(_){const _e={},tt={};function nt(ct,dt){if(_e[dt]!==void 0)return _e[dt];const mt=ct.interleavedBuffers[dt],Ct=it(ct,mt.buffer),ft=getTypedArray(mt.type,Ct),pt=new InterleavedBuffer(ft,mt.stride);return pt.uuid=mt.uuid,_e[dt]=pt,pt}function it(ct,dt){if(tt[dt]!==void 0)return tt[dt];const mt=ct.arrayBuffers[dt],Ct=new Uint32Array(mt).buffer;return tt[dt]=Ct,Ct}const rt=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,st=_.data.index;if(st!==void 0){const ct=getTypedArray(st.type,st.array);rt.setIndex(new BufferAttribute(ct,1))}const ot=_.data.attributes;for(const ct in ot){const dt=ot[ct];let ht;if(dt.isInterleavedBufferAttribute){const mt=nt(_.data,dt.data);ht=new InterleavedBufferAttribute(mt,dt.itemSize,dt.offset,dt.normalized)}else{const mt=getTypedArray(dt.type,dt.array),Ct=dt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;ht=new Ct(mt,dt.itemSize,dt.normalized)}dt.name!==void 0&&(ht.name=dt.name),dt.usage!==void 0&&ht.setUsage(dt.usage),dt.updateRange!==void 0&&(ht.updateRange.offset=dt.updateRange.offset,ht.updateRange.count=dt.updateRange.count),rt.setAttribute(ct,ht)}const at=_.data.morphAttributes;if(at)for(const ct in at){const dt=at[ct],ht=[];for(let mt=0,Ct=dt.length;mt<Ct;mt++){const ft=dt[mt];let pt;if(ft.isInterleavedBufferAttribute){const Vt=nt(_.data,ft.data);pt=new InterleavedBufferAttribute(Vt,ft.itemSize,ft.offset,ft.normalized)}else{const Vt=getTypedArray(ft.type,ft.array);pt=new BufferAttribute(Vt,ft.itemSize,ft.normalized)}ft.name!==void 0&&(pt.name=ft.name),ht.push(pt)}rt.morphAttributes[ct]=ht}_.data.morphTargetsRelative&&(rt.morphTargetsRelative=!0);const lt=_.data.groups||_.data.drawcalls||_.data.offsets;if(lt!==void 0)for(let ct=0,dt=lt.length;ct!==dt;++ct){const ht=lt[ct];rt.addGroup(ht.start,ht.count,ht.materialIndex)}const gt=_.data.boundingSphere;if(gt!==void 0){const ct=new Vector3;gt.center!==void 0&&ct.fromArray(gt.center),rt.boundingSphere=new Sphere(ct,gt.radius)}return _.name&&(rt.name=_.name),_.userData&&(rt.userData=_.userData),rt}}class ObjectLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=this,rt=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||rt;const st=new FileLoader(this.manager);st.setPath(this.path),st.setRequestHeader(this.requestHeader),st.setWithCredentials(this.withCredentials),st.load(_,function(ot){let at=null;try{at=JSON.parse(ot)}catch(lt){nt!==void 0&&nt(lt),console.error("THREE:ObjectLoader: Can't parse "+_+".",lt.message);return}const At=at.metadata;if(At===void 0||At.type===void 0||At.type.toLowerCase()==="geometry"){nt!==void 0&&nt(new Error("THREE.ObjectLoader: Can't load "+_)),console.error("THREE.ObjectLoader: Can't load "+_);return}it.parse(at,_e)},tt,nt)}async loadAsync(_,_e){const tt=this,nt=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||nt;const it=new FileLoader(this.manager);it.setPath(this.path),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials);const rt=await it.loadAsync(_,_e),st=JSON.parse(rt),ot=st.metadata;if(ot===void 0||ot.type===void 0||ot.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await tt.parseAsync(st)}parse(_,_e){const tt=this.parseAnimations(_.animations),nt=this.parseShapes(_.shapes),it=this.parseGeometries(_.geometries,nt),rt=this.parseImages(_.images,function(){_e!==void 0&&_e(at)}),st=this.parseTextures(_.textures,rt),ot=this.parseMaterials(_.materials,st),at=this.parseObject(_.object,it,ot,st,tt),At=this.parseSkeletons(_.skeletons,at);if(this.bindSkeletons(at,At),_e!==void 0){let lt=!1;for(const gt in rt)if(rt[gt].data instanceof HTMLImageElement){lt=!0;break}lt===!1&&_e(at)}return at}async parseAsync(_){const _e=this.parseAnimations(_.animations),tt=this.parseShapes(_.shapes),nt=this.parseGeometries(_.geometries,tt),it=await this.parseImagesAsync(_.images),rt=this.parseTextures(_.textures,it),st=this.parseMaterials(_.materials,rt),ot=this.parseObject(_.object,nt,st,rt,_e),at=this.parseSkeletons(_.skeletons,ot);return this.bindSkeletons(ot,at),ot}parseShapes(_){const _e={};if(_!==void 0)for(let tt=0,nt=_.length;tt<nt;tt++){const it=new Shape$2().fromJSON(_[tt]);_e[it.uuid]=it}return _e}parseSkeletons(_,_e){const tt={},nt={};if(_e.traverse(function(it){it.isBone&&(nt[it.uuid]=it)}),_!==void 0)for(let it=0,rt=_.length;it<rt;it++){const st=new Skeleton().fromJSON(_[it],nt);tt[st.uuid]=st}return tt}parseGeometries(_,_e){const tt={};if(_!==void 0){const nt=new BufferGeometryLoader;for(let it=0,rt=_.length;it<rt;it++){let st;const ot=_[it];switch(ot.type){case"BufferGeometry":case"InstancedBufferGeometry":st=nt.parse(ot);break;default:ot.type in Geometries?st=Geometries[ot.type].fromJSON(ot,_e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${ot.type}"`)}st.uuid=ot.uuid,ot.name!==void 0&&(st.name=ot.name),st.isBufferGeometry===!0&&ot.userData!==void 0&&(st.userData=ot.userData),tt[ot.uuid]=st}}return tt}parseMaterials(_,_e){const tt={},nt={};if(_!==void 0){const it=new MaterialLoader;it.setTextures(_e);for(let rt=0,st=_.length;rt<st;rt++){const ot=_[rt];tt[ot.uuid]===void 0&&(tt[ot.uuid]=it.parse(ot)),nt[ot.uuid]=tt[ot.uuid]}}return nt}parseAnimations(_){const _e={};if(_!==void 0)for(let tt=0;tt<_.length;tt++){const nt=_[tt],it=AnimationClip.parse(nt);_e[it.uuid]=it}return _e}parseImages(_,_e){const tt=this,nt={};let it;function rt(ot){return tt.manager.itemStart(ot),it.load(ot,function(){tt.manager.itemEnd(ot)},void 0,function(){tt.manager.itemError(ot),tt.manager.itemEnd(ot)})}function st(ot){if(typeof ot=="string"){const at=ot,At=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(at)?at:tt.resourcePath+at;return rt(At)}else return ot.data?{data:getTypedArray(ot.type,ot.data),width:ot.width,height:ot.height}:null}if(_!==void 0&&_.length>0){const ot=new LoadingManager(_e);it=new ImageLoader(ot),it.setCrossOrigin(this.crossOrigin);for(let at=0,At=_.length;at<At;at++){const lt=_[at],gt=lt.url;if(Array.isArray(gt)){const ct=[];for(let dt=0,ht=gt.length;dt<ht;dt++){const mt=gt[dt],Ct=st(mt);Ct!==null&&(Ct instanceof HTMLImageElement?ct.push(Ct):ct.push(new DataTexture(Ct.data,Ct.width,Ct.height)))}nt[lt.uuid]=new Source(ct)}else{const ct=st(lt.url);nt[lt.uuid]=new Source(ct)}}}return nt}async parseImagesAsync(_){const _e=this,tt={};let nt;async function it(rt){if(typeof rt=="string"){const st=rt,ot=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(st)?st:_e.resourcePath+st;return await nt.loadAsync(ot)}else return rt.data?{data:getTypedArray(rt.type,rt.data),width:rt.width,height:rt.height}:null}if(_!==void 0&&_.length>0){nt=new ImageLoader(this.manager),nt.setCrossOrigin(this.crossOrigin);for(let rt=0,st=_.length;rt<st;rt++){const ot=_[rt],at=ot.url;if(Array.isArray(at)){const At=[];for(let lt=0,gt=at.length;lt<gt;lt++){const ct=at[lt],dt=await it(ct);dt!==null&&(dt instanceof HTMLImageElement?At.push(dt):At.push(new DataTexture(dt.data,dt.width,dt.height)))}tt[ot.uuid]=new Source(At)}else{const At=await it(ot.url);tt[ot.uuid]=new Source(At)}}}return tt}parseTextures(_,_e){function tt(it,rt){return typeof it=="number"?it:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",it),rt[it])}const nt={};if(_!==void 0)for(let it=0,rt=_.length;it<rt;it++){const st=_[it];st.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',st.uuid),_e[st.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",st.image);const ot=_e[st.image],at=ot.data;let At;Array.isArray(at)?(At=new CubeTexture,at.length===6&&(At.needsUpdate=!0)):(at&&at.data?At=new DataTexture:At=new Texture,at&&(At.needsUpdate=!0)),At.source=ot,At.uuid=st.uuid,st.name!==void 0&&(At.name=st.name),st.mapping!==void 0&&(At.mapping=tt(st.mapping,TEXTURE_MAPPING)),st.offset!==void 0&&At.offset.fromArray(st.offset),st.repeat!==void 0&&At.repeat.fromArray(st.repeat),st.center!==void 0&&At.center.fromArray(st.center),st.rotation!==void 0&&(At.rotation=st.rotation),st.wrap!==void 0&&(At.wrapS=tt(st.wrap[0],TEXTURE_WRAPPING),At.wrapT=tt(st.wrap[1],TEXTURE_WRAPPING)),st.format!==void 0&&(At.format=st.format),st.type!==void 0&&(At.type=st.type),st.encoding!==void 0&&(At.encoding=st.encoding),st.minFilter!==void 0&&(At.minFilter=tt(st.minFilter,TEXTURE_FILTER)),st.magFilter!==void 0&&(At.magFilter=tt(st.magFilter,TEXTURE_FILTER)),st.anisotropy!==void 0&&(At.anisotropy=st.anisotropy),st.flipY!==void 0&&(At.flipY=st.flipY),st.generateMipmaps!==void 0&&(At.generateMipmaps=st.generateMipmaps),st.premultiplyAlpha!==void 0&&(At.premultiplyAlpha=st.premultiplyAlpha),st.unpackAlignment!==void 0&&(At.unpackAlignment=st.unpackAlignment),st.userData!==void 0&&(At.userData=st.userData),nt[st.uuid]=At}return nt}parseObject(_,_e,tt,nt,it){let rt;function st(gt){return _e[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",gt),_e[gt]}function ot(gt){if(gt!==void 0){if(Array.isArray(gt)){const ct=[];for(let dt=0,ht=gt.length;dt<ht;dt++){const mt=gt[dt];tt[mt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",mt),ct.push(tt[mt])}return ct}return tt[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",gt),tt[gt]}}function at(gt){return nt[gt]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",gt),nt[gt]}let At,lt;switch(_.type){case"Scene":rt=new Scene,_.background!==void 0&&(Number.isInteger(_.background)?rt.background=new Color(_.background):rt.background=at(_.background)),_.environment!==void 0&&(rt.environment=at(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?rt.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(rt.fog=new FogExp2(_.fog.color,_.fog.density))),_.backgroundBlurriness!==void 0&&(rt.backgroundBlurriness=_.backgroundBlurriness);break;case"PerspectiveCamera":rt=new PerspectiveCamera$1(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(rt.focus=_.focus),_.zoom!==void 0&&(rt.zoom=_.zoom),_.filmGauge!==void 0&&(rt.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(rt.filmOffset=_.filmOffset),_.view!==void 0&&(rt.view=Object.assign({},_.view));break;case"OrthographicCamera":rt=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(rt.zoom=_.zoom),_.view!==void 0&&(rt.view=Object.assign({},_.view));break;case"AmbientLight":rt=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":rt=new DirectionalLight(_.color,_.intensity);break;case"PointLight":rt=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":rt=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":rt=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay);break;case"HemisphereLight":rt=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":rt=new LightProbe().fromJSON(_);break;case"SkinnedMesh":At=st(_.geometry),lt=ot(_.material),rt=new SkinnedMesh(At,lt),_.bindMode!==void 0&&(rt.bindMode=_.bindMode),_.bindMatrix!==void 0&&rt.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(rt.skeleton=_.skeleton);break;case"Mesh":At=st(_.geometry),lt=ot(_.material),rt=new Mesh(At,lt);break;case"InstancedMesh":At=st(_.geometry),lt=ot(_.material);const gt=_.count,ct=_.instanceMatrix,dt=_.instanceColor;rt=new InstancedMesh(At,lt,gt),rt.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ct.array),16),dt!==void 0&&(rt.instanceColor=new InstancedBufferAttribute(new Float32Array(dt.array),dt.itemSize));break;case"LOD":rt=new LOD;break;case"Line":rt=new Line(st(_.geometry),ot(_.material));break;case"LineLoop":rt=new LineLoop(st(_.geometry),ot(_.material));break;case"LineSegments":rt=new LineSegments(st(_.geometry),ot(_.material));break;case"PointCloud":case"Points":rt=new Points(st(_.geometry),ot(_.material));break;case"Sprite":rt=new Sprite(ot(_.material));break;case"Group":rt=new Group;break;case"Bone":rt=new Bone;break;default:rt=new Object3D}if(rt.uuid=_.uuid,_.name!==void 0&&(rt.name=_.name),_.matrix!==void 0?(rt.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(rt.matrixAutoUpdate=_.matrixAutoUpdate),rt.matrixAutoUpdate&&rt.matrix.decompose(rt.position,rt.quaternion,rt.scale)):(_.position!==void 0&&rt.position.fromArray(_.position),_.rotation!==void 0&&rt.rotation.fromArray(_.rotation),_.quaternion!==void 0&&rt.quaternion.fromArray(_.quaternion),_.scale!==void 0&&rt.scale.fromArray(_.scale)),_.castShadow!==void 0&&(rt.castShadow=_.castShadow),_.receiveShadow!==void 0&&(rt.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.bias!==void 0&&(rt.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(rt.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(rt.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&rt.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(rt.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(rt.visible=_.visible),_.frustumCulled!==void 0&&(rt.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(rt.renderOrder=_.renderOrder),_.userData!==void 0&&(rt.userData=_.userData),_.layers!==void 0&&(rt.layers.mask=_.layers),_.children!==void 0){const gt=_.children;for(let ct=0;ct<gt.length;ct++)rt.add(this.parseObject(gt[ct],_e,tt,nt,it))}if(_.animations!==void 0){const gt=_.animations;for(let ct=0;ct<gt.length;ct++){const dt=gt[ct];rt.animations.push(it[dt])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(rt.autoUpdate=_.autoUpdate);const gt=_.levels;for(let ct=0;ct<gt.length;ct++){const dt=gt[ct],ht=rt.getObjectByProperty("uuid",dt.object);ht!==void 0&&rt.addLevel(ht,dt.distance,dt.hysteresis)}}return rt}bindSkeletons(_,_e){Object.keys(_e).length!==0&&_.traverse(function(tt){if(tt.isSkinnedMesh===!0&&tt.skeleton!==void 0){const nt=_e[tt.skeleton];nt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",tt.skeleton):tt.bind(nt,tt.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(_){return this.options=_,this}load(_,_e,tt,nt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,rt=Cache.get(_);if(rt!==void 0)return it.manager.itemStart(_),setTimeout(function(){_e&&_e(rt),it.manager.itemEnd(_)},0),rt;const st={};st.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",st.headers=this.requestHeader,fetch(_,st).then(function(ot){return ot.blob()}).then(function(ot){return createImageBitmap(ot,Object.assign(it.options,{colorSpaceConversion:"none"}))}).then(function(ot){Cache.add(_,ot),_e&&_e(ot),it.manager.itemEnd(_)}).catch(function(ot){nt&&nt(ot),it.manager.itemError(_),it.manager.itemEnd(_)}),it.manager.itemStart(_)}}let _context$1;class AudioContext{static getContext(){return _context$1===void 0&&(_context$1=new(window.AudioContext||window.webkitAudioContext)),_context$1}static setContext(_){_context$1=_}}class AudioLoader extends Loader{constructor(_){super(_)}load(_,_e,tt,nt){const it=this,rt=new FileLoader(this.manager);rt.setResponseType("arraybuffer"),rt.setPath(this.path),rt.setRequestHeader(this.requestHeader),rt.setWithCredentials(this.withCredentials),rt.load(_,function(st){try{const ot=st.slice(0);AudioContext.getContext().decodeAudioData(ot,function(At){_e(At)})}catch(ot){nt?nt(ot):console.error(ot),it.manager.itemError(_)}},tt,nt)}}class HemisphereLightProbe extends LightProbe{constructor(_,_e,tt=1){super(void 0,tt),this.isHemisphereLightProbe=!0;const nt=new Color().set(_),it=new Color().set(_e),rt=new Vector3(nt.r,nt.g,nt.b),st=new Vector3(it.r,it.g,it.b),ot=Math.sqrt(Math.PI),at=ot*Math.sqrt(.75);this.sh.coefficients[0].copy(rt).add(st).multiplyScalar(ot),this.sh.coefficients[1].copy(rt).sub(st).multiplyScalar(at)}}class AmbientLightProbe extends LightProbe{constructor(_,_e=1){super(void 0,_e),this.isAmbientLightProbe=!0;const tt=new Color().set(_);this.sh.coefficients[0].set(tt.r,tt.g,tt.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera$1,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera$1,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const _e=this._cache;if(_e.focus!==_.focus||_e.fov!==_.fov||_e.aspect!==_.aspect*this.aspect||_e.near!==_.near||_e.far!==_.far||_e.zoom!==_.zoom||_e.eyeSep!==this.eyeSep){_e.focus=_.focus,_e.fov=_.fov,_e.aspect=_.aspect*this.aspect,_e.near=_.near,_e.far=_.far,_e.zoom=_.zoom,_e.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const nt=_e.eyeSep/2,it=nt*_e.near/_e.focus,rt=_e.near*Math.tan(DEG2RAD*_e.fov*.5)/_e.zoom;let st,ot;_eyeLeft.elements[12]=-nt,_eyeRight.elements[12]=nt,st=-rt*_e.aspect+it,ot=rt*_e.aspect+it,_projectionMatrix.elements[0]=2*_e.near/(ot-st),_projectionMatrix.elements[8]=(ot+st)/(ot-st),this.cameraL.projectionMatrix.copy(_projectionMatrix),st=-rt*_e.aspect-it,ot=rt*_e.aspect-it,_projectionMatrix.elements[0]=2*_e.near/(ot-st),_projectionMatrix.elements[8]=(ot+st)/(ot-st),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const _e=now$2();_=(_e-this.oldTime)/1e3,this.oldTime=_e,this.elapsedTime+=_}return _}}function now$2(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion$2,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const _e=this.context.listener,tt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),_e.positionX){const nt=this.context.currentTime+this.timeDelta;_e.positionX.linearRampToValueAtTime(_position$1.x,nt),_e.positionY.linearRampToValueAtTime(_position$1.y,nt),_e.positionZ.linearRampToValueAtTime(_position$1.z,nt),_e.forwardX.linearRampToValueAtTime(_orientation$1.x,nt),_e.forwardY.linearRampToValueAtTime(_orientation$1.y,nt),_e.forwardZ.linearRampToValueAtTime(_orientation$1.z,nt),_e.upX.linearRampToValueAtTime(tt.x,nt),_e.upY.linearRampToValueAtTime(tt.y,nt),_e.upZ.linearRampToValueAtTime(tt.z,nt)}else _e.setPosition(_position$1.x,_position$1.y,_position$1.z),_e.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,tt.x,tt.y,tt.z)}}class Audio extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const _e=this.context.createBufferSource();return _e.buffer=this.buffer,_e.loop=this.loop,_e.loopStart=this.loopStart,_e.loopEnd=this.loopEnd,_e.onended=this.onEnded.bind(this),_e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=_e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,_e=this.filters.length;_<_e;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,_e=this.filters.length;_<_e;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){if(this.detune=_,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion$2,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,_e,tt){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=_e,this.panner.coneOuterGain=tt,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const _e=this.panner;if(_e.positionX){const tt=this.context.currentTime+this.listener.timeDelta;_e.positionX.linearRampToValueAtTime(_position.x,tt),_e.positionY.linearRampToValueAtTime(_position.y,tt),_e.positionZ.linearRampToValueAtTime(_position.z,tt),_e.orientationX.linearRampToValueAtTime(_orientation.x,tt),_e.orientationY.linearRampToValueAtTime(_orientation.y,tt),_e.orientationZ.linearRampToValueAtTime(_orientation.z,tt)}else _e.setPosition(_position.x,_position.y,_position.z),_e.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,_e=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=_e,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const _e=this.getFrequencyData();for(let tt=0;tt<_e.length;tt++)_+=_e[tt];return _/_e.length}}class PropertyMixer{constructor(_,_e,tt){this.binding=_,this.valueSize=tt;let nt,it,rt;switch(_e){case"quaternion":nt=this._slerp,it=this._slerpAdditive,rt=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(tt*6),this._workIndex=5;break;case"string":case"bool":nt=this._select,it=this._select,rt=this._setAdditiveIdentityOther,this.buffer=new Array(tt*5);break;default:nt=this._lerp,it=this._lerpAdditive,rt=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(tt*5)}this._mixBufferRegion=nt,this._mixBufferRegionAdditive=it,this._setIdentity=rt,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,_e){const tt=this.buffer,nt=this.valueSize,it=_*nt+nt;let rt=this.cumulativeWeight;if(rt===0){for(let st=0;st!==nt;++st)tt[it+st]=tt[st];rt=_e}else{rt+=_e;const st=_e/rt;this._mixBufferRegion(tt,it,0,st,nt)}this.cumulativeWeight=rt}accumulateAdditive(_){const _e=this.buffer,tt=this.valueSize,nt=tt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(_e,nt,0,_,tt),this.cumulativeWeightAdditive+=_}apply(_){const _e=this.valueSize,tt=this.buffer,nt=_*_e+_e,it=this.cumulativeWeight,rt=this.cumulativeWeightAdditive,st=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,it<1){const ot=_e*this._origIndex;this._mixBufferRegion(tt,nt,ot,1-it,_e)}rt>0&&this._mixBufferRegionAdditive(tt,nt,this._addIndex*_e,1,_e);for(let ot=_e,at=_e+_e;ot!==at;++ot)if(tt[ot]!==tt[ot+_e]){st.setValue(tt,nt);break}}saveOriginalState(){const _=this.binding,_e=this.buffer,tt=this.valueSize,nt=tt*this._origIndex;_.getValue(_e,nt);for(let it=tt,rt=nt;it!==rt;++it)_e[it]=_e[nt+it%tt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,_e=_+this.valueSize;for(let tt=_;tt<_e;tt++)this.buffer[tt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,_e=this._addIndex*this.valueSize;for(let tt=0;tt<this.valueSize;tt++)this.buffer[_e+tt]=this.buffer[_+tt]}_select(_,_e,tt,nt,it){if(nt>=.5)for(let rt=0;rt!==it;++rt)_[_e+rt]=_[tt+rt]}_slerp(_,_e,tt,nt){Quaternion$2.slerpFlat(_,_e,_,_e,_,tt,nt)}_slerpAdditive(_,_e,tt,nt,it){const rt=this._workIndex*it;Quaternion$2.multiplyQuaternionsFlat(_,rt,_,_e,_,tt),Quaternion$2.slerpFlat(_,_e,_,_e,_,rt,nt)}_lerp(_,_e,tt,nt,it){const rt=1-nt;for(let st=0;st!==it;++st){const ot=_e+st;_[ot]=_[ot]*rt+_[tt+st]*nt}}_lerpAdditive(_,_e,tt,nt,it){for(let rt=0;rt!==it;++rt){const st=_e+rt;_[st]=_[st]+_[tt+rt]*nt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,_e,tt){const nt=tt||PropertyBinding.parseTrackName(_e);this._targetGroup=_,this._bindings=_.subscribe_(_e,nt)}getValue(_,_e){this.bind();const tt=this._targetGroup.nCachedObjects_,nt=this._bindings[tt];nt!==void 0&&nt.getValue(_,_e)}setValue(_,_e){const tt=this._bindings;for(let nt=this._targetGroup.nCachedObjects_,it=tt.length;nt!==it;++nt)tt[nt].setValue(_,_e)}bind(){const _=this._bindings;for(let _e=this._targetGroup.nCachedObjects_,tt=_.length;_e!==tt;++_e)_[_e].bind()}unbind(){const _=this._bindings;for(let _e=this._targetGroup.nCachedObjects_,tt=_.length;_e!==tt;++_e)_[_e].unbind()}}class PropertyBinding{constructor(_,_e,tt){this.path=_e,this.parsedPath=tt||PropertyBinding.parseTrackName(_e),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName)||_,this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,_e,tt){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,_e,tt):new PropertyBinding(_,_e,tt)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const _e=_trackRe.exec(_);if(_e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const tt={nodeName:_e[2],objectName:_e[3],objectIndex:_e[4],propertyName:_e[5],propertyIndex:_e[6]},nt=tt.nodeName&&tt.nodeName.lastIndexOf(".");if(nt!==void 0&&nt!==-1){const it=tt.nodeName.substring(nt+1);_supportedObjectNames.indexOf(it)!==-1&&(tt.nodeName=tt.nodeName.substring(0,nt),tt.objectName=it)}if(tt.propertyName===null||tt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return tt}static findNode(_,_e){if(_e===void 0||_e===""||_e==="."||_e===-1||_e===_.name||_e===_.uuid)return _;if(_.skeleton){const tt=_.skeleton.getBoneByName(_e);if(tt!==void 0)return tt}if(_.children){const tt=function(it){for(let rt=0;rt<it.length;rt++){const st=it[rt];if(st.name===_e||st.uuid===_e)return st;const ot=tt(st.children);if(ot)return ot}return null},nt=tt(_.children);if(nt)return nt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,_e){_[_e]=this.targetObject[this.propertyName]}_getValue_array(_,_e){const tt=this.resolvedProperty;for(let nt=0,it=tt.length;nt!==it;++nt)_[_e++]=tt[nt]}_getValue_arrayElement(_,_e){_[_e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,_e){this.resolvedProperty.toArray(_,_e)}_setValue_direct(_,_e){this.targetObject[this.propertyName]=_[_e]}_setValue_direct_setNeedsUpdate(_,_e){this.targetObject[this.propertyName]=_[_e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,_e){this.targetObject[this.propertyName]=_[_e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,_e){const tt=this.resolvedProperty;for(let nt=0,it=tt.length;nt!==it;++nt)tt[nt]=_[_e++]}_setValue_array_setNeedsUpdate(_,_e){const tt=this.resolvedProperty;for(let nt=0,it=tt.length;nt!==it;++nt)tt[nt]=_[_e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,_e){const tt=this.resolvedProperty;for(let nt=0,it=tt.length;nt!==it;++nt)tt[nt]=_[_e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,_e){this.resolvedProperty[this.propertyIndex]=_[_e]}_setValue_arrayElement_setNeedsUpdate(_,_e){this.resolvedProperty[this.propertyIndex]=_[_e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,_e){this.resolvedProperty[this.propertyIndex]=_[_e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,_e){this.resolvedProperty.fromArray(_,_e)}_setValue_fromArray_setNeedsUpdate(_,_e){this.resolvedProperty.fromArray(_,_e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,_e){this.resolvedProperty.fromArray(_,_e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,_e){this.bind(),this.getValue(_,_e)}_setValue_unbound(_,_e){this.bind(),this.setValue(_,_e)}bind(){let _=this.node;const _e=this.parsedPath,tt=_e.objectName,nt=_e.propertyName;let it=_e.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,_e.nodeName)||this.rootNode,this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(tt){let at=_e.objectIndex;switch(tt){case"materials":if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let At=0;At<_.length;At++)if(_[At].name===at){at=At;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[tt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[tt]}if(at!==void 0){if(_[at]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[at]}}const rt=_[nt];if(rt===void 0){const at=_e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+at+"."+nt+" but it wasn't found.",_);return}let st=this.Versioning.None;this.targetObject=_,_.needsUpdate!==void 0?st=this.Versioning.NeedsUpdate:_.matrixWorldNeedsUpdate!==void 0&&(st=this.Versioning.MatrixWorldNeedsUpdate);let ot=this.BindingType.Direct;if(it!==void 0){if(nt==="morphTargetInfluences"){if(!_.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[it]!==void 0&&(it=_.morphTargetDictionary[it])}ot=this.BindingType.ArrayElement,this.resolvedProperty=rt,this.propertyIndex=it}else rt.fromArray!==void 0&&rt.toArray!==void 0?(ot=this.BindingType.HasFromToArray,this.resolvedProperty=rt):Array.isArray(rt)?(ot=this.BindingType.EntireArray,this.resolvedProperty=rt):this.propertyName=nt;this.getValue=this.GetterByBindingType[ot],this.setValue=this.SetterByBindingTypeAndVersioning[ot][st]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let tt=0,nt=arguments.length;tt!==nt;++tt)_[arguments[tt].uuid]=tt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const _e=this;this.stats={objects:{get total(){return _e._objects.length},get inUse(){return this.total-_e.nCachedObjects_}},get bindingsPerObject(){return _e._bindings.length}}}add(){const _=this._objects,_e=this._indicesByUUID,tt=this._paths,nt=this._parsedPaths,it=this._bindings,rt=it.length;let st,ot=_.length,at=this.nCachedObjects_;for(let At=0,lt=arguments.length;At!==lt;++At){const gt=arguments[At],ct=gt.uuid;let dt=_e[ct];if(dt===void 0){dt=ot++,_e[ct]=dt,_.push(gt);for(let ht=0,mt=rt;ht!==mt;++ht)it[ht].push(new PropertyBinding(gt,tt[ht],nt[ht]))}else if(dt<at){st=_[dt];const ht=--at,mt=_[ht];_e[mt.uuid]=dt,_[dt]=mt,_e[ct]=ht,_[ht]=gt;for(let Ct=0,ft=rt;Ct!==ft;++Ct){const pt=it[Ct],Vt=pt[ht];let yt=pt[dt];pt[dt]=Vt,yt===void 0&&(yt=new PropertyBinding(gt,tt[Ct],nt[Ct])),pt[ht]=yt}}else _[dt]!==st&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=at}remove(){const _=this._objects,_e=this._indicesByUUID,tt=this._bindings,nt=tt.length;let it=this.nCachedObjects_;for(let rt=0,st=arguments.length;rt!==st;++rt){const ot=arguments[rt],at=ot.uuid,At=_e[at];if(At!==void 0&&At>=it){const lt=it++,gt=_[lt];_e[gt.uuid]=At,_[At]=gt,_e[at]=lt,_[lt]=ot;for(let ct=0,dt=nt;ct!==dt;++ct){const ht=tt[ct],mt=ht[lt],Ct=ht[At];ht[At]=mt,ht[lt]=Ct}}}this.nCachedObjects_=it}uncache(){const _=this._objects,_e=this._indicesByUUID,tt=this._bindings,nt=tt.length;let it=this.nCachedObjects_,rt=_.length;for(let st=0,ot=arguments.length;st!==ot;++st){const at=arguments[st],At=at.uuid,lt=_e[At];if(lt!==void 0)if(delete _e[At],lt<it){const gt=--it,ct=_[gt],dt=--rt,ht=_[dt];_e[ct.uuid]=lt,_[lt]=ct,_e[ht.uuid]=gt,_[gt]=ht,_.pop();for(let mt=0,Ct=nt;mt!==Ct;++mt){const ft=tt[mt],pt=ft[gt],Vt=ft[dt];ft[lt]=pt,ft[gt]=Vt,ft.pop()}}else{const gt=--rt,ct=_[gt];gt>0&&(_e[ct.uuid]=lt),_[lt]=ct,_.pop();for(let dt=0,ht=nt;dt!==ht;++dt){const mt=tt[dt];mt[lt]=mt[gt],mt.pop()}}}this.nCachedObjects_=it}subscribe_(_,_e){const tt=this._bindingsIndicesByPath;let nt=tt[_];const it=this._bindings;if(nt!==void 0)return it[nt];const rt=this._paths,st=this._parsedPaths,ot=this._objects,at=ot.length,At=this.nCachedObjects_,lt=new Array(at);nt=it.length,tt[_]=nt,rt.push(_),st.push(_e),it.push(lt);for(let gt=At,ct=ot.length;gt!==ct;++gt){const dt=ot[gt];lt[gt]=new PropertyBinding(dt,_,_e)}return lt}unsubscribe_(_){const _e=this._bindingsIndicesByPath,tt=_e[_];if(tt!==void 0){const nt=this._paths,it=this._parsedPaths,rt=this._bindings,st=rt.length-1,ot=rt[st],at=_[st];_e[at]=tt,rt[tt]=ot,rt.pop(),it[tt]=it[st],it.pop(),nt[tt]=nt[st],nt.pop()}}}class AnimationAction{constructor(_,_e,tt=null,nt=_e.blendMode){this._mixer=_,this._clip=_e,this._localRoot=tt,this.blendMode=nt;const it=_e.tracks,rt=it.length,st=new Array(rt),ot={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let at=0;at!==rt;++at){const At=it[at].createInterpolant(null);st[at]=At,At.settings=ot}this._interpolantSettings=ot,this._interpolants=st,this._propertyBindings=new Array(rt),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,_e){return this.loop=_,this.repetitions=_e,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,_e,tt){if(_.fadeOut(_e),this.fadeIn(_e),tt){const nt=this._clip.duration,it=_._clip.duration,rt=it/nt,st=nt/it;_.warp(1,rt,_e),this.warp(st,1,_e)}return this}crossFadeTo(_,_e,tt){return _.crossFadeFrom(this,_e,tt)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,_e,tt){const nt=this._mixer,it=nt.time,rt=this.timeScale;let st=this._timeScaleInterpolant;st===null&&(st=nt._lendControlInterpolant(),this._timeScaleInterpolant=st);const ot=st.parameterPositions,at=st.sampleValues;return ot[0]=it,ot[1]=it+tt,at[0]=_/rt,at[1]=_e/rt,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,_e,tt,nt){if(!this.enabled){this._updateWeight(_);return}const it=this._startTime;if(it!==null){const ot=(_-it)*tt;ot<0||tt===0?_e=0:(this._startTime=null,_e=tt*ot)}_e*=this._updateTimeScale(_);const rt=this._updateTime(_e),st=this._updateWeight(_);if(st>0){const ot=this._interpolants,at=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let At=0,lt=ot.length;At!==lt;++At)ot[At].evaluate(rt),at[At].accumulateAdditive(st);break;case NormalAnimationBlendMode:default:for(let At=0,lt=ot.length;At!==lt;++At)ot[At].evaluate(rt),at[At].accumulate(nt,st)}}}_updateWeight(_){let _e=0;if(this.enabled){_e=this.weight;const tt=this._weightInterpolant;if(tt!==null){const nt=tt.evaluate(_)[0];_e*=nt,_>tt.parameterPositions[1]&&(this.stopFading(),nt===0&&(this.enabled=!1))}}return this._effectiveWeight=_e,_e}_updateTimeScale(_){let _e=0;if(!this.paused){_e=this.timeScale;const tt=this._timeScaleInterpolant;if(tt!==null){const nt=tt.evaluate(_)[0];_e*=nt,_>tt.parameterPositions[1]&&(this.stopWarping(),_e===0?this.paused=!0:this.timeScale=_e)}}return this._effectiveTimeScale=_e,_e}_updateTime(_){const _e=this._clip.duration,tt=this.loop;let nt=this.time+_,it=this._loopCount;const rt=tt===LoopPingPong;if(_===0)return it===-1?nt:rt&&(it&1)===1?_e-nt:nt;if(tt===LoopOnce){it===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(nt>=_e)nt=_e;else if(nt<0)nt=0;else{this.time=nt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=nt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(it===-1&&(_>=0?(it=0,this._setEndings(!0,this.repetitions===0,rt)):this._setEndings(this.repetitions===0,!0,rt)),nt>=_e||nt<0){const st=Math.floor(nt/_e);nt-=_e*st,it+=Math.abs(st);const ot=this.repetitions-it;if(ot<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,nt=_>0?_e:0,this.time=nt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(ot===1){const at=_<0;this._setEndings(at,!at,rt)}else this._setEndings(!1,!1,rt);this._loopCount=it,this.time=nt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:st})}}else this.time=nt;if(rt&&(it&1)===1)return _e-nt}return nt}_setEndings(_,_e,tt){const nt=this._interpolantSettings;tt?(nt.endingStart=ZeroSlopeEnding,nt.endingEnd=ZeroSlopeEnding):(_?nt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:nt.endingStart=WrapAroundEnding,_e?nt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:nt.endingEnd=WrapAroundEnding)}_scheduleFading(_,_e,tt){const nt=this._mixer,it=nt.time;let rt=this._weightInterpolant;rt===null&&(rt=nt._lendControlInterpolant(),this._weightInterpolant=rt);const st=rt.parameterPositions,ot=rt.sampleValues;return st[0]=it,ot[0]=_e,st[1]=it+_,ot[1]=tt,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,_e){const tt=_._localRoot||this._root,nt=_._clip.tracks,it=nt.length,rt=_._propertyBindings,st=_._interpolants,ot=tt.uuid,at=this._bindingsByRootAndName;let At=at[ot];At===void 0&&(At={},at[ot]=At);for(let lt=0;lt!==it;++lt){const gt=nt[lt],ct=gt.name;let dt=At[ct];if(dt!==void 0)++dt.referenceCount,rt[lt]=dt;else{if(dt=rt[lt],dt!==void 0){dt._cacheIndex===null&&(++dt.referenceCount,this._addInactiveBinding(dt,ot,ct));continue}const ht=_e&&_e._propertyBindings[lt].binding.parsedPath;dt=new PropertyMixer(PropertyBinding.create(tt,ct,ht),gt.ValueTypeName,gt.getValueSize()),++dt.referenceCount,this._addInactiveBinding(dt,ot,ct),rt[lt]=dt}st[lt].resultBuffer=dt.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const tt=(_._localRoot||this._root).uuid,nt=_._clip.uuid,it=this._actionsByClip[nt];this._bindAction(_,it&&it.knownActions[0]),this._addInactiveAction(_,nt,tt)}const _e=_._propertyBindings;for(let tt=0,nt=_e.length;tt!==nt;++tt){const it=_e[tt];it.useCount++===0&&(this._lendBinding(it),it.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const _e=_._propertyBindings;for(let tt=0,nt=_e.length;tt!==nt;++tt){const it=_e[tt];--it.useCount===0&&(it.restoreOriginalState(),this._takeBackBinding(it))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const _e=_._cacheIndex;return _e!==null&&_e<this._nActiveActions}_addInactiveAction(_,_e,tt){const nt=this._actions,it=this._actionsByClip;let rt=it[_e];if(rt===void 0)rt={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,it[_e]=rt;else{const st=rt.knownActions;_._byClipCacheIndex=st.length,st.push(_)}_._cacheIndex=nt.length,nt.push(_),rt.actionByRoot[tt]=_}_removeInactiveAction(_){const _e=this._actions,tt=_e[_e.length-1],nt=_._cacheIndex;tt._cacheIndex=nt,_e[nt]=tt,_e.pop(),_._cacheIndex=null;const it=_._clip.uuid,rt=this._actionsByClip,st=rt[it],ot=st.knownActions,at=ot[ot.length-1],At=_._byClipCacheIndex;at._byClipCacheIndex=At,ot[At]=at,ot.pop(),_._byClipCacheIndex=null;const lt=st.actionByRoot,gt=(_._localRoot||this._root).uuid;delete lt[gt],ot.length===0&&delete rt[it],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const _e=_._propertyBindings;for(let tt=0,nt=_e.length;tt!==nt;++tt){const it=_e[tt];--it.referenceCount===0&&this._removeInactiveBinding(it)}}_lendAction(_){const _e=this._actions,tt=_._cacheIndex,nt=this._nActiveActions++,it=_e[nt];_._cacheIndex=nt,_e[nt]=_,it._cacheIndex=tt,_e[tt]=it}_takeBackAction(_){const _e=this._actions,tt=_._cacheIndex,nt=--this._nActiveActions,it=_e[nt];_._cacheIndex=nt,_e[nt]=_,it._cacheIndex=tt,_e[tt]=it}_addInactiveBinding(_,_e,tt){const nt=this._bindingsByRootAndName,it=this._bindings;let rt=nt[_e];rt===void 0&&(rt={},nt[_e]=rt),rt[tt]=_,_._cacheIndex=it.length,it.push(_)}_removeInactiveBinding(_){const _e=this._bindings,tt=_.binding,nt=tt.rootNode.uuid,it=tt.path,rt=this._bindingsByRootAndName,st=rt[nt],ot=_e[_e.length-1],at=_._cacheIndex;ot._cacheIndex=at,_e[at]=ot,_e.pop(),delete st[it],Object.keys(st).length===0&&delete rt[nt]}_lendBinding(_){const _e=this._bindings,tt=_._cacheIndex,nt=this._nActiveBindings++,it=_e[nt];_._cacheIndex=nt,_e[nt]=_,it._cacheIndex=tt,_e[tt]=it}_takeBackBinding(_){const _e=this._bindings,tt=_._cacheIndex,nt=--this._nActiveBindings,it=_e[nt];_._cacheIndex=nt,_e[nt]=_,it._cacheIndex=tt,_e[tt]=it}_lendControlInterpolant(){const _=this._controlInterpolants,_e=this._nActiveControlInterpolants++;let tt=_[_e];return tt===void 0&&(tt=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),tt.__cacheIndex=_e,_[_e]=tt),tt}_takeBackControlInterpolant(_){const _e=this._controlInterpolants,tt=_.__cacheIndex,nt=--this._nActiveControlInterpolants,it=_e[nt];_.__cacheIndex=nt,_e[nt]=_,it.__cacheIndex=tt,_e[tt]=it}clipAction(_,_e,tt){const nt=_e||this._root,it=nt.uuid;let rt=typeof _=="string"?AnimationClip.findByName(nt,_):_;const st=rt!==null?rt.uuid:_,ot=this._actionsByClip[st];let at=null;if(tt===void 0&&(rt!==null?tt=rt.blendMode:tt=NormalAnimationBlendMode),ot!==void 0){const lt=ot.actionByRoot[it];if(lt!==void 0&&lt.blendMode===tt)return lt;at=ot.knownActions[0],rt===null&&(rt=at._clip)}if(rt===null)return null;const At=new AnimationAction(this,rt,_e,tt);return this._bindAction(At,at),this._addInactiveAction(At,st,it),At}existingAction(_,_e){const tt=_e||this._root,nt=tt.uuid,it=typeof _=="string"?AnimationClip.findByName(tt,_):_,rt=it?it.uuid:_,st=this._actionsByClip[rt];return st!==void 0&&st.actionByRoot[nt]||null}stopAllAction(){const _=this._actions,_e=this._nActiveActions;for(let tt=_e-1;tt>=0;--tt)_[tt].stop();return this}update(_){_*=this.timeScale;const _e=this._actions,tt=this._nActiveActions,nt=this.time+=_,it=Math.sign(_),rt=this._accuIndex^=1;for(let at=0;at!==tt;++at)_e[at]._update(nt,_,it,rt);const st=this._bindings,ot=this._nActiveBindings;for(let at=0;at!==ot;++at)st[at].apply(rt);return this}setTime(_){this.time=0;for(let _e=0;_e<this._actions.length;_e++)this._actions[_e].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const _e=this._actions,tt=_.uuid,nt=this._actionsByClip,it=nt[tt];if(it!==void 0){const rt=it.knownActions;for(let st=0,ot=rt.length;st!==ot;++st){const at=rt[st];this._deactivateAction(at);const At=at._cacheIndex,lt=_e[_e.length-1];at._cacheIndex=null,at._byClipCacheIndex=null,lt._cacheIndex=At,_e[At]=lt,_e.pop(),this._removeInactiveBindingsForAction(at)}delete nt[tt]}}uncacheRoot(_){const _e=_.uuid,tt=this._actionsByClip;for(const rt in tt){const st=tt[rt].actionByRoot,ot=st[_e];ot!==void 0&&(this._deactivateAction(ot),this._removeInactiveAction(ot))}const nt=this._bindingsByRootAndName,it=nt[_e];if(it!==void 0)for(const rt in it){const st=it[rt];st.restoreOriginalState(),this._removeInactiveBinding(st)}}uncacheAction(_,_e){const tt=this.existingAction(_,_e);tt!==null&&(this._deactivateAction(tt),this._removeInactiveAction(tt))}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let id=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const _e=this.uniforms.indexOf(_);return _e!==-1&&this.uniforms.splice(_e,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(_){this.name=_.name,this.usage=_.usage;const _e=_.uniforms;this.uniforms.length=0;for(let tt=0,nt=_e.length;tt<nt;tt++)this.uniforms.push(_e[tt].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,_e,tt=1){super(_,_e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=tt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const _e=super.clone(_);return _e.meshPerAttribute=this.meshPerAttribute,_e}toJSON(_){const _e=super.toJSON(_);return _e.isInstancedInterleavedBuffer=!0,_e.meshPerAttribute=this.meshPerAttribute,_e}}class GLBufferAttribute{constructor(_,_e,tt,nt,it){this.isGLBufferAttribute=!0,this.buffer=_,this.type=_e,this.itemSize=tt,this.elementSize=nt,this.count=it,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,_e){return this.type=_,this.elementSize=_e,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}class Raycaster{constructor(_,_e,tt=0,nt=1/0){this.ray=new Ray$2(_,_e),this.near=tt,this.far=nt,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,_e){this.ray.set(_,_e)}setFromCamera(_,_e){_e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(_e.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(_e).sub(this.ray.origin).normalize(),this.camera=_e):_e.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(_e.near+_e.far)/(_e.near-_e.far)).unproject(_e),this.ray.direction.set(0,0,-1).transformDirection(_e.matrixWorld),this.camera=_e):console.error("THREE.Raycaster: Unsupported camera type: "+_e.type)}intersectObject(_,_e=!0,tt=[]){return intersectObject(_,this,tt,_e),tt.sort(ascSort),tt}intersectObjects(_,_e=!0,tt=[]){for(let nt=0,it=_.length;nt<it;nt++)intersectObject(_[nt],this,tt,_e);return tt.sort(ascSort),tt}}function ascSort(et,_){return et.distance-_.distance}function intersectObject(et,_,_e,tt){if(et.layers.test(_.layers)&&et.raycast(_,_e),tt===!0){const nt=et.children;for(let it=0,rt=nt.length;it<rt;it++)intersectObject(nt[it],_,_e,!0)}}class Spherical{constructor(_=1,_e=0,tt=0){return this.radius=_,this.phi=_e,this.theta=tt,this}set(_,_e,tt){return this.radius=_,this.phi=_e,this.theta=tt,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,_e,tt){return this.radius=Math.sqrt(_*_+_e*_e+tt*tt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,tt),this.phi=Math.acos(clamp$1(_e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,_e=0,tt=0){return this.radius=_,this.theta=_e,this.y=tt,this}set(_,_e,tt){return this.radius=_,this.theta=_e,this.y=tt,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,_e,tt){return this.radius=Math.sqrt(_*_+tt*tt),this.theta=Math.atan2(_,tt),this.y=_e,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),_e=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=_e}set(_,_e){return this.min.copy(_),this.max.copy(_e),this}setFromPoints(_){this.makeEmpty();for(let _e=0,tt=_.length;_e<tt;_e++)this.expandByPoint(_[_e]);return this}setFromCenterAndSize(_,_e){const tt=_vector$4.copy(_e).multiplyScalar(.5);return this.min.copy(_).sub(tt),this.max.copy(_).add(tt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return!(_.x<this.min.x||_.x>this.max.x||_.y<this.min.y||_.y>this.max.y)}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,_e){return _e.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return!(_.max.x<this.min.x||_.min.x>this.max.x||_.max.y<this.min.y||_.min.y>this.max.y)}clampPoint(_,_e){return _e.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return _vector$4.copy(_).clamp(this.min,this.max).sub(_).length()}intersect(_){return this.min.max(_.min),this.max.min(_.max),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(_=new Vector3,_e=new Vector3){this.start=_,this.end=_e}set(_,_e){return this.start.copy(_),this.end.copy(_e),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,_e){return this.delta(_e).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,_e){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const tt=_startEnd.dot(_startEnd);let it=_startEnd.dot(_startP)/tt;return _e&&(it=clamp$1(it,0,1)),it}closestPointToPoint(_,_e,tt){const nt=this.closestPointToPointParameter(_,_e);return this.delta(tt).multiplyScalar(nt).add(this.start)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,_e){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=_e,this.type="SpotLightHelper";const tt=new BufferGeometry,nt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let rt=0,st=1,ot=32;rt<ot;rt++,st++){const at=rt/ot*Math.PI*2,At=st/ot*Math.PI*2;nt.push(Math.cos(at),Math.sin(at),1,Math.cos(At),Math.sin(At),1)}tt.setAttribute("position",new Float32BufferAttribute(nt,3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(tt,it),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const _=this.light.distance?this.light.distance:1e3,_e=_*Math.tan(this.light.angle);this.cone.scale.set(_e,_e,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const _e=getBoneList(_),tt=new BufferGeometry,nt=[],it=[],rt=new Color(0,0,1),st=new Color(0,1,0);for(let at=0;at<_e.length;at++){const At=_e[at];At.parent&&At.parent.isBone&&(nt.push(0,0,0),nt.push(0,0,0),it.push(rt.r,rt.g,rt.b),it.push(st.r,st.g,st.b))}tt.setAttribute("position",new Float32BufferAttribute(nt,3)),tt.setAttribute("color",new Float32BufferAttribute(it,3));const ot=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(tt,ot),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=_e,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(_){const _e=this.bones,tt=this.geometry,nt=tt.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let it=0,rt=0;it<_e.length;it++){const st=_e[it];st.parent&&st.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,st.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),nt.setXYZ(rt,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,st.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),nt.setXYZ(rt+1,_vector$2.x,_vector$2.y,_vector$2.z),rt+=2)}tt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(et){const _=[];et.isBone===!0&&_.push(et);for(let _e=0;_e<et.children.length;_e++)_.push.apply(_,getBoneList(et.children[_e]));return _}class PointLightHelper extends Mesh{constructor(_,_e,tt){const nt=new SphereGeometry(_e,4,2),it=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(nt,it),this.light=_,this.color=tt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(_,_e,tt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=tt,this.type="HemisphereLightHelper";const nt=new OctahedronGeometry(_e);nt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const it=nt.getAttribute("position"),rt=new Float32Array(it.count*3);nt.setAttribute("color",new BufferAttribute(rt,3)),this.add(new Mesh(nt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const _e=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let tt=0,nt=_e.count;tt<nt;tt++){const it=tt<nt/2?_color1:_color2;_e.setXYZ(tt,it.r,it.g,it.b)}_e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,_e=10,tt=4473924,nt=8947848){tt=new Color(tt),nt=new Color(nt);const it=_e/2,rt=_/_e,st=_/2,ot=[],at=[];for(let gt=0,ct=0,dt=-st;gt<=_e;gt++,dt+=rt){ot.push(-st,0,dt,st,0,dt),ot.push(dt,0,-st,dt,0,st);const ht=gt===it?tt:nt;ht.toArray(at,ct),ct+=3,ht.toArray(at,ct),ct+=3,ht.toArray(at,ct),ct+=3,ht.toArray(at,ct),ct+=3}const At=new BufferGeometry;At.setAttribute("position",new Float32BufferAttribute(ot,3)),At.setAttribute("color",new Float32BufferAttribute(at,3));const lt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(At,lt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,_e=16,tt=8,nt=64,it=4473924,rt=8947848){it=new Color(it),rt=new Color(rt);const st=[],ot=[];if(_e>1)for(let lt=0;lt<_e;lt++){const gt=lt/_e*(Math.PI*2),ct=Math.sin(gt)*_,dt=Math.cos(gt)*_;st.push(0,0,0),st.push(ct,0,dt);const ht=lt&1?it:rt;ot.push(ht.r,ht.g,ht.b),ot.push(ht.r,ht.g,ht.b)}for(let lt=0;lt<tt;lt++){const gt=lt&1?it:rt,ct=_-_/tt*lt;for(let dt=0;dt<nt;dt++){let ht=dt/nt*(Math.PI*2),mt=Math.sin(ht)*ct,Ct=Math.cos(ht)*ct;st.push(mt,0,Ct),ot.push(gt.r,gt.g,gt.b),ht=(dt+1)/nt*(Math.PI*2),mt=Math.sin(ht)*ct,Ct=Math.cos(ht)*ct,st.push(mt,0,Ct),ot.push(gt.r,gt.g,gt.b)}}const at=new BufferGeometry;at.setAttribute("position",new Float32BufferAttribute(st,3)),at.setAttribute("color",new Float32BufferAttribute(ot,3));const At=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(at,At),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,_e,tt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=tt,this.type="DirectionalLightHelper",_e===void 0&&(_e=1);let nt=new BufferGeometry;nt.setAttribute("position",new Float32BufferAttribute([-_e,_e,0,_e,_e,0,_e,-_e,0,-_e,-_e,0,-_e,_e,0],3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(nt,it),this.add(this.lightPlane),nt=new BufferGeometry,nt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(nt,it),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera$1;class CameraHelper extends LineSegments{constructor(_){const _e=new BufferGeometry,tt=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),nt=[],it=[],rt={};st("n1","n2"),st("n2","n4"),st("n4","n3"),st("n3","n1"),st("f1","f2"),st("f2","f4"),st("f4","f3"),st("f3","f1"),st("n1","f1"),st("n2","f2"),st("n3","f3"),st("n4","f4"),st("p","n1"),st("p","n2"),st("p","n3"),st("p","n4"),st("u1","u2"),st("u2","u3"),st("u3","u1"),st("c","t"),st("p","c"),st("cn1","cn2"),st("cn3","cn4"),st("cf1","cf2"),st("cf3","cf4");function st(dt,ht){ot(dt),ot(ht)}function ot(dt){nt.push(0,0,0),it.push(0,0,0),rt[dt]===void 0&&(rt[dt]=[]),rt[dt].push(nt.length/3-1)}_e.setAttribute("position",new Float32BufferAttribute(nt,3)),_e.setAttribute("color",new Float32BufferAttribute(it,3)),super(_e,tt),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=rt,this.update();const at=new Color(16755200),At=new Color(16711680),lt=new Color(43775),gt=new Color(16777215),ct=new Color(3355443);this.setColors(at,At,lt,gt,ct)}setColors(_,_e,tt,nt,it){const st=this.geometry.getAttribute("color");st.setXYZ(0,_.r,_.g,_.b),st.setXYZ(1,_.r,_.g,_.b),st.setXYZ(2,_.r,_.g,_.b),st.setXYZ(3,_.r,_.g,_.b),st.setXYZ(4,_.r,_.g,_.b),st.setXYZ(5,_.r,_.g,_.b),st.setXYZ(6,_.r,_.g,_.b),st.setXYZ(7,_.r,_.g,_.b),st.setXYZ(8,_.r,_.g,_.b),st.setXYZ(9,_.r,_.g,_.b),st.setXYZ(10,_.r,_.g,_.b),st.setXYZ(11,_.r,_.g,_.b),st.setXYZ(12,_.r,_.g,_.b),st.setXYZ(13,_.r,_.g,_.b),st.setXYZ(14,_.r,_.g,_.b),st.setXYZ(15,_.r,_.g,_.b),st.setXYZ(16,_.r,_.g,_.b),st.setXYZ(17,_.r,_.g,_.b),st.setXYZ(18,_.r,_.g,_.b),st.setXYZ(19,_.r,_.g,_.b),st.setXYZ(20,_.r,_.g,_.b),st.setXYZ(21,_.r,_.g,_.b),st.setXYZ(22,_.r,_.g,_.b),st.setXYZ(23,_.r,_.g,_.b),st.setXYZ(24,_e.r,_e.g,_e.b),st.setXYZ(25,_e.r,_e.g,_e.b),st.setXYZ(26,_e.r,_e.g,_e.b),st.setXYZ(27,_e.r,_e.g,_e.b),st.setXYZ(28,_e.r,_e.g,_e.b),st.setXYZ(29,_e.r,_e.g,_e.b),st.setXYZ(30,_e.r,_e.g,_e.b),st.setXYZ(31,_e.r,_e.g,_e.b),st.setXYZ(32,tt.r,tt.g,tt.b),st.setXYZ(33,tt.r,tt.g,tt.b),st.setXYZ(34,tt.r,tt.g,tt.b),st.setXYZ(35,tt.r,tt.g,tt.b),st.setXYZ(36,tt.r,tt.g,tt.b),st.setXYZ(37,tt.r,tt.g,tt.b),st.setXYZ(38,nt.r,nt.g,nt.b),st.setXYZ(39,nt.r,nt.g,nt.b),st.setXYZ(40,it.r,it.g,it.b),st.setXYZ(41,it.r,it.g,it.b),st.setXYZ(42,it.r,it.g,it.b),st.setXYZ(43,it.r,it.g,it.b),st.setXYZ(44,it.r,it.g,it.b),st.setXYZ(45,it.r,it.g,it.b),st.setXYZ(46,it.r,it.g,it.b),st.setXYZ(47,it.r,it.g,it.b),st.setXYZ(48,it.r,it.g,it.b),st.setXYZ(49,it.r,it.g,it.b),st.needsUpdate=!0}update(){const _=this.geometry,_e=this.pointMap,tt=1,nt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",_e,_,_camera,0,0,-1),setPoint("t",_e,_,_camera,0,0,1),setPoint("n1",_e,_,_camera,-tt,-nt,-1),setPoint("n2",_e,_,_camera,tt,-nt,-1),setPoint("n3",_e,_,_camera,-tt,nt,-1),setPoint("n4",_e,_,_camera,tt,nt,-1),setPoint("f1",_e,_,_camera,-tt,-nt,1),setPoint("f2",_e,_,_camera,tt,-nt,1),setPoint("f3",_e,_,_camera,-tt,nt,1),setPoint("f4",_e,_,_camera,tt,nt,1),setPoint("u1",_e,_,_camera,tt*.7,nt*1.1,-1),setPoint("u2",_e,_,_camera,-tt*.7,nt*1.1,-1),setPoint("u3",_e,_,_camera,0,nt*2,-1),setPoint("cf1",_e,_,_camera,-tt,0,1),setPoint("cf2",_e,_,_camera,tt,0,1),setPoint("cf3",_e,_,_camera,0,-nt,1),setPoint("cf4",_e,_,_camera,0,nt,1),setPoint("cn1",_e,_,_camera,-tt,0,-1),setPoint("cn2",_e,_,_camera,tt,0,-1),setPoint("cn3",_e,_,_camera,0,-nt,-1),setPoint("cn4",_e,_,_camera,0,nt,-1),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(et,_,_e,tt,nt,it,rt){_vector.set(nt,it,rt).unproject(tt);const st=_[et];if(st!==void 0){const ot=_e.getAttribute("position");for(let at=0,At=st.length;at<At;at++)ot.setXYZ(st[at],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,_e=16776960){const tt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),nt=new Float32Array(8*3),it=new BufferGeometry;it.setIndex(new BufferAttribute(tt,1)),it.setAttribute("position",new BufferAttribute(nt,3)),super(it,new LineBasicMaterial({color:_e,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(_){if(_!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const _e=_box.min,tt=_box.max,nt=this.geometry.attributes.position,it=nt.array;it[0]=tt.x,it[1]=tt.y,it[2]=tt.z,it[3]=_e.x,it[4]=tt.y,it[5]=tt.z,it[6]=_e.x,it[7]=_e.y,it[8]=tt.z,it[9]=tt.x,it[10]=_e.y,it[11]=tt.z,it[12]=tt.x,it[13]=tt.y,it[14]=_e.z,it[15]=_e.x,it[16]=tt.y,it[17]=_e.z,it[18]=_e.x,it[19]=_e.y,it[20]=_e.z,it[21]=tt.x,it[22]=_e.y,it[23]=_e.z,nt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,_e){return super.copy(_,_e),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,_e=16776960){const tt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),nt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],it=new BufferGeometry;it.setIndex(new BufferAttribute(tt,1)),it.setAttribute("position",new Float32BufferAttribute(nt,3)),super(it,new LineBasicMaterial({color:_e,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const _e=this.box;_e.isEmpty()||(_e.getCenter(this.position),_e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,_e=1,tt=16776960){const nt=tt,it=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute(it,3)),rt.computeBoundingSphere(),super(rt,new LineBasicMaterial({color:nt,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=_e;const st=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],ot=new BufferGeometry;ot.setAttribute("position",new Float32BufferAttribute(st,3)),ot.computeBoundingSphere(),this.add(new Mesh(ot,new MeshBasicMaterial({color:nt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),_e=new Vector3(0,0,0),tt=1,nt=16776960,it=tt*.2,rt=it*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(_e),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:nt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:nt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(tt,it,rt)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const _e=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,_e)}}setLength(_,_e=_*.2,tt=_e*.2){this.line.scale.set(1,Math.max(1e-4,_-_e),1),this.line.updateMatrix(),this.cone.scale.set(tt,_e,tt),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const _e=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],tt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],nt=new BufferGeometry;nt.setAttribute("position",new Float32BufferAttribute(_e,3)),nt.setAttribute("color",new Float32BufferAttribute(tt,3));const it=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(nt,it),this.type="AxesHelper"}setColors(_,_e,tt){const nt=new Color,it=this.geometry.attributes.color.array;return nt.set(_),nt.toArray(it,0),nt.toArray(it,3),nt.set(_e),nt.toArray(it,6),nt.toArray(it,9),nt.set(tt),nt.toArray(it,12),nt.toArray(it,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(_,_e){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,_e),this}lineTo(_,_e){return this.currentPath.lineTo(_,_e),this}quadraticCurveTo(_,_e,tt,nt){return this.currentPath.quadraticCurveTo(_,_e,tt,nt),this}bezierCurveTo(_,_e,tt,nt,it,rt){return this.currentPath.bezierCurveTo(_,_e,tt,nt,it,rt),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function _e(Ct){const ft=[];for(let pt=0,Vt=Ct.length;pt<Vt;pt++){const yt=Ct[pt],Gt=new Shape$2;Gt.curves=yt.curves,ft.push(Gt)}return ft}function tt(Ct,ft){const pt=ft.length;let Vt=!1;for(let yt=pt-1,Gt=0;Gt<pt;yt=Gt++){let Bt=ft[yt],vt=ft[Gt],wt=vt.x-Bt.x,Mt=vt.y-Bt.y;if(Math.abs(Mt)>Number.EPSILON){if(Mt<0&&(Bt=ft[Gt],wt=-wt,vt=ft[yt],Mt=-Mt),Ct.y<Bt.y||Ct.y>vt.y)continue;if(Ct.y===Bt.y){if(Ct.x===Bt.x)return!0}else{const kt=Mt*(Ct.x-Bt.x)-wt*(Ct.y-Bt.y);if(kt===0)return!0;if(kt<0)continue;Vt=!Vt}}else{if(Ct.y!==Bt.y)continue;if(vt.x<=Ct.x&&Ct.x<=Bt.x||Bt.x<=Ct.x&&Ct.x<=vt.x)return!0}}return Vt}const nt=ShapeUtils.isClockWise,it=this.subPaths;if(it.length===0)return[];let rt,st,ot;const at=[];if(it.length===1)return st=it[0],ot=new Shape$2,ot.curves=st.curves,at.push(ot),at;let At=!nt(it[0].getPoints());At=_?!At:At;const lt=[],gt=[];let ct=[],dt=0,ht;gt[dt]=void 0,ct[dt]=[];for(let Ct=0,ft=it.length;Ct<ft;Ct++)st=it[Ct],ht=st.getPoints(),rt=nt(ht),rt=_?!rt:rt,rt?(!At&&gt[dt]&&dt++,gt[dt]={s:new Shape$2,p:ht},gt[dt].s.curves=st.curves,At&&dt++,ct[dt]=[]):ct[dt].push({h:st,p:ht[0]});if(!gt[0])return _e(it);if(gt.length>1){let Ct=!1,ft=0;for(let pt=0,Vt=gt.length;pt<Vt;pt++)lt[pt]=[];for(let pt=0,Vt=gt.length;pt<Vt;pt++){const yt=ct[pt];for(let Gt=0;Gt<yt.length;Gt++){const Bt=yt[Gt];let vt=!0;for(let wt=0;wt<gt.length;wt++)tt(Bt.p,gt[wt].p)&&(pt!==wt&&ft++,vt?(vt=!1,lt[wt].push(Bt)):Ct=!0);vt&&lt[pt].push(Bt)}}ft>0&&Ct===!1&&(ct=lt)}let mt;for(let Ct=0,ft=gt.length;Ct<ft;Ct++){ot=gt[Ct].s,at.push(ot),mt=ct[Ct];for(let pt=0,Vt=mt.length;pt<Vt;pt++)ot.holes.push(mt[pt].h)}return at}}const _tables=_generateTables();function _generateTables(){const et=new ArrayBuffer(4),_=new Float32Array(et),_e=new Uint32Array(et),tt=new Uint32Array(512),nt=new Uint32Array(512);for(let ot=0;ot<256;++ot){const at=ot-127;at<-27?(tt[ot]=0,tt[ot|256]=32768,nt[ot]=24,nt[ot|256]=24):at<-14?(tt[ot]=1024>>-at-14,tt[ot|256]=1024>>-at-14|32768,nt[ot]=-at-1,nt[ot|256]=-at-1):at<=15?(tt[ot]=at+15<<10,tt[ot|256]=at+15<<10|32768,nt[ot]=13,nt[ot|256]=13):at<128?(tt[ot]=31744,tt[ot|256]=64512,nt[ot]=24,nt[ot|256]=24):(tt[ot]=31744,tt[ot|256]=64512,nt[ot]=13,nt[ot|256]=13)}const it=new Uint32Array(2048),rt=new Uint32Array(64),st=new Uint32Array(64);for(let ot=1;ot<1024;++ot){let at=ot<<13,At=0;for(;!(at&8388608);)at<<=1,At-=8388608;at&=-8388609,At+=947912704,it[ot]=at|At}for(let ot=1024;ot<2048;++ot)it[ot]=939524096+(ot-1024<<13);for(let ot=1;ot<31;++ot)rt[ot]=ot<<23;rt[31]=1199570944,rt[32]=2147483648;for(let ot=33;ot<63;++ot)rt[ot]=2147483648+(ot-32<<23);rt[63]=3347054592;for(let ot=1;ot<64;++ot)ot!==32&&(st[ot]=1024);return{floatView:_,uint32View:_e,baseTable:tt,shiftTable:nt,mantissaTable:it,exponentTable:rt,offsetTable:st}}function toHalfFloat(et){Math.abs(et)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),et=clamp$1(et,-65504,65504),_tables.floatView[0]=et;const _=_tables.uint32View[0],_e=_>>23&511;return _tables.baseTable[_e]+((_&8388607)>>_tables.shiftTable[_e])}function fromHalfFloat(et){const _=et>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(et&1023)]+_tables.exponentTable[_],_tables.floatView[0]}var DataUtils=Object.freeze({__proto__:null,toHalfFloat,fromHalfFloat});function ImmediateRenderObject(){console.error("THREE.ImmediateRenderObject has been removed.")}class WebGLMultisampleRenderTarget extends WebGLRenderTarget{constructor(_,_e,tt){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(_,_e,tt),this.samples=4}}class DataTexture2DArray extends DataArrayTexture{constructor(_,_e,tt,nt){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(_,_e,tt,nt)}}class DataTexture3D extends Data3DTexture{constructor(_,_e,tt,nt){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(_,_e,tt,nt)}}class BoxBufferGeometry extends BoxGeometry{constructor(_,_e,tt,nt,it,rt){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(_,_e,tt,nt,it,rt)}}class CapsuleBufferGeometry extends CapsuleGeometry{constructor(_,_e,tt,nt){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(_,_e,tt,nt)}}class CircleBufferGeometry extends CircleGeometry{constructor(_,_e,tt,nt){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(_,_e,tt,nt)}}class ConeBufferGeometry extends ConeGeometry{constructor(_,_e,tt,nt,it,rt,st){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(_,_e,tt,nt,it,rt,st)}}class CylinderBufferGeometry extends CylinderGeometry{constructor(_,_e,tt,nt,it,rt,st,ot){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(_,_e,tt,nt,it,rt,st,ot)}}class DodecahedronBufferGeometry extends DodecahedronGeometry{constructor(_,_e){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(_,_e)}}class ExtrudeBufferGeometry extends ExtrudeGeometry{constructor(_,_e){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(_,_e)}}class IcosahedronBufferGeometry extends IcosahedronGeometry{constructor(_,_e){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(_,_e)}}class LatheBufferGeometry extends LatheGeometry{constructor(_,_e,tt,nt){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(_,_e,tt,nt)}}class OctahedronBufferGeometry extends OctahedronGeometry{constructor(_,_e){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(_,_e)}}class PlaneBufferGeometry extends PlaneGeometry{constructor(_,_e,tt,nt){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(_,_e,tt,nt)}}class PolyhedronBufferGeometry extends PolyhedronGeometry{constructor(_,_e,tt,nt){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(_,_e,tt,nt)}}class RingBufferGeometry extends RingGeometry{constructor(_,_e,tt,nt,it,rt){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(_,_e,tt,nt,it,rt)}}class ShapeBufferGeometry extends ShapeGeometry{constructor(_,_e){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(_,_e)}}class SphereBufferGeometry extends SphereGeometry{constructor(_,_e,tt,nt,it,rt,st){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(_,_e,tt,nt,it,rt,st)}}class TetrahedronBufferGeometry extends TetrahedronGeometry{constructor(_,_e){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(_,_e)}}class TorusBufferGeometry extends TorusGeometry{constructor(_,_e,tt,nt,it){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(_,_e,tt,nt,it)}}class TorusKnotBufferGeometry extends TorusKnotGeometry{constructor(_,_e,tt,nt,it,rt){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(_,_e,tt,nt,it,rt)}}class TubeBufferGeometry extends TubeGeometry{constructor(_,_e,tt,nt,it){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(_,_e,tt,nt,it)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxBufferGeometry,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera:Camera$1,CameraHelper,CanvasTexture,CapsuleBufferGeometry,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleBufferGeometry,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedTexture,CompressedTextureLoader,ConeBufferGeometry,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderBufferGeometry,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTexture2DArray,DataTexture3D,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronBufferGeometry,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeBufferGeometry,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterDepth,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronBufferGeometry,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,ImmediateRenderObject,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheBufferGeometry,LatheGeometry,Layers,LessDepth,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronBufferGeometry,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera:PerspectiveCamera$1,Plane:Plane$1,PlaneBufferGeometry,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronBufferGeometry,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion:Quaternion$2,QuaternionKeyframeTrack,QuaternionLinearInterpolant,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBFormat,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray:Ray$2,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingBufferGeometry,RingGeometry,SRGBColorSpace,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape:Shape$2,ShapeBufferGeometry,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereBufferGeometry,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronBufferGeometry,TetrahedronGeometry,Texture,TextureLoader,TorusBufferGeometry,TorusGeometry,TorusKnotBufferGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeBufferGeometry,TubeGeometry,TwoPassDoubleSide,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLMultisampleRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$2(et){let _;const _e=new Set,tt=(at,At)=>{const lt=typeof at=="function"?at(_):at;if(lt!==_){const gt=_;_=At?lt:Object.assign({},_,lt),_e.forEach(ct=>ct(_,gt))}},nt=()=>_,it=(at,At=nt,lt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let gt=At(_);function ct(){const dt=At(_);if(!lt(gt,dt)){const ht=gt;at(gt=dt,ht)}}return _e.add(ct),()=>_e.delete(ct)},ot={setState:tt,getState:nt,subscribe:(at,At,lt)=>At||lt?it(at,At,lt):(_e.add(at),()=>_e.delete(at)),destroy:()=>_e.clear()};return _=et(tt,nt,ot),ot}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(et){const _=typeof et=="function"?createStore$2(et):et,_e=(tt=_.getState,nt=Object.is)=>{const[,it]=reactExports.useReducer(mt=>mt+1,0),rt=_.getState(),st=reactExports.useRef(rt),ot=reactExports.useRef(tt),at=reactExports.useRef(nt),At=reactExports.useRef(!1),lt=reactExports.useRef();lt.current===void 0&&(lt.current=tt(rt));let gt,ct=!1;(st.current!==rt||ot.current!==tt||at.current!==nt||At.current)&&(gt=tt(rt),ct=!nt(lt.current,gt)),useIsomorphicLayoutEffect$1(()=>{ct&&(lt.current=gt),st.current=rt,ot.current=tt,at.current=nt,At.current=!1});const dt=reactExports.useRef(rt);useIsomorphicLayoutEffect$1(()=>{const mt=()=>{try{const ft=_.getState(),pt=ot.current(ft);at.current(lt.current,pt)||(st.current=ft,lt.current=pt,it())}catch{At.current=!0,it()}},Ct=_.subscribe(mt);return _.getState()!==dt.current&&mt(),Ct},[]);const ht=ct?gt:lt.current;return reactExports.useDebugValue(ht),ht};return Object.assign(_e,_),_e[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const tt=[_e,_];return{next(){const nt=tt.length<=0;return{value:tt.shift(),done:nt}}}},_e}var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function _(St,Zt){var Et=St.length;St.push(Zt);e:for(;0<Et;){var Wt=Et-1>>>1,Ht=St[Wt];if(0<nt(Ht,Zt))St[Wt]=Zt,St[Et]=Ht,Et=Wt;else break e}}function _e(St){return St.length===0?null:St[0]}function tt(St){if(St.length===0)return null;var Zt=St[0],Et=St.pop();if(Et!==Zt){St[0]=Et;e:for(var Wt=0,Ht=St.length,zt=Ht>>>1;Wt<zt;){var Pt=2*(Wt+1)-1,Ot=St[Pt],Jt=Pt+1,rn=St[Jt];if(0>nt(Ot,Et))Jt<Ht&&0>nt(rn,Ot)?(St[Wt]=rn,St[Jt]=Et,Wt=Jt):(St[Wt]=Ot,St[Pt]=Et,Wt=Pt);else if(Jt<Ht&&0>nt(rn,Et))St[Wt]=rn,St[Jt]=Et,Wt=Jt;else break e}}return Zt}function nt(St,Zt){var Et=St.sortIndex-Zt.sortIndex;return Et!==0?Et:St.id-Zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;et.unstable_now=function(){return it.now()}}else{var rt=Date,st=rt.now();et.unstable_now=function(){return rt.now()-st}}var ot=[],at=[],At=1,lt=null,gt=3,ct=!1,dt=!1,ht=!1,mt=typeof setTimeout=="function"?setTimeout:null,Ct=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function pt(St){for(var Zt=_e(at);Zt!==null;){if(Zt.callback===null)tt(at);else if(Zt.startTime<=St)tt(at),Zt.sortIndex=Zt.expirationTime,_(ot,Zt);else break;Zt=_e(at)}}function Vt(St){if(ht=!1,pt(St),!dt)if(_e(ot)!==null)dt=!0,_t(yt);else{var Zt=_e(at);Zt!==null&&Tt(Vt,Zt.startTime-St)}}function yt(St,Zt){dt=!1,ht&&(ht=!1,Ct(vt),vt=-1),ct=!0;var Et=gt;try{for(pt(Zt),lt=_e(ot);lt!==null&&(!(lt.expirationTime>Zt)||St&&!kt());){var Wt=lt.callback;if(typeof Wt=="function"){lt.callback=null,gt=lt.priorityLevel;var Ht=Wt(lt.expirationTime<=Zt);Zt=et.unstable_now(),typeof Ht=="function"?lt.callback=Ht:lt===_e(ot)&&tt(ot),pt(Zt)}else tt(ot);lt=_e(ot)}if(lt!==null)var zt=!0;else{var Pt=_e(at);Pt!==null&&Tt(Vt,Pt.startTime-Zt),zt=!1}return zt}finally{lt=null,gt=Et,ct=!1}}var Gt=!1,Bt=null,vt=-1,wt=5,Mt=-1;function kt(){return!(et.unstable_now()-Mt<wt)}function Nt(){if(Bt!==null){var St=et.unstable_now();Mt=St;var Zt=!0;try{Zt=Bt(!0,St)}finally{Zt?Yt():(Gt=!1,Bt=null)}}else Gt=!1}var Yt;if(typeof ft=="function")Yt=function(){ft(Nt)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,Xt=Lt.port2;Lt.port1.onmessage=Nt,Yt=function(){Xt.postMessage(null)}}else Yt=function(){mt(Nt,0)};function _t(St){Bt=St,Gt||(Gt=!0,Yt())}function Tt(St,Zt){vt=mt(function(){St(et.unstable_now())},Zt)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(St){St.callback=null},et.unstable_continueExecution=function(){dt||ct||(dt=!0,_t(yt))},et.unstable_forceFrameRate=function(St){0>St||125<St?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<St?Math.floor(1e3/St):5},et.unstable_getCurrentPriorityLevel=function(){return gt},et.unstable_getFirstCallbackNode=function(){return _e(ot)},et.unstable_next=function(St){switch(gt){case 1:case 2:case 3:var Zt=3;break;default:Zt=gt}var Et=gt;gt=Zt;try{return St()}finally{gt=Et}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(St,Zt){switch(St){case 1:case 2:case 3:case 4:case 5:break;default:St=3}var Et=gt;gt=St;try{return Zt()}finally{gt=Et}},et.unstable_scheduleCallback=function(St,Zt,Et){var Wt=et.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?Wt+Et:Wt):Et=Wt,St){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=Et+Ht,St={id:At++,callback:Zt,priorityLevel:St,startTime:Et,expirationTime:Ht,sortIndex:-1},Et>Wt?(St.sortIndex=Et,_(at,St),_e(ot)===null&&St===_e(at)&&(ht?(Ct(vt),vt=-1):ht=!0,Tt(Vt,Et-Wt))):(St.sortIndex=Ht,_(ot,St),dt||ct||(dt=!0,_t(yt))),St},et.unstable_shouldYield=kt,et.unstable_wrapCallback=function(St){var Zt=gt;return function(){var Et=gt;gt=Zt;try{return St.apply(this,arguments)}finally{gt=Et}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(_){var _e={},tt=reactExports,nt=schedulerExports,it=Object.assign;function rt(ut){for(var It="https://reactjs.org/docs/error-decoder.html?invariant="+ut,bt=1;bt<arguments.length;bt++)It+="&args[]="+encodeURIComponent(arguments[bt]);return"Minified React error #"+ut+"; visit "+It+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var st=tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ot=Symbol.for("react.element"),at=Symbol.for("react.portal"),At=Symbol.for("react.fragment"),lt=Symbol.for("react.strict_mode"),gt=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),dt=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),mt=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),pt=Symbol.for("react.lazy"),Vt=Symbol.for("react.offscreen"),yt=Symbol.iterator;function Gt(ut){return ut===null||typeof ut!="object"?null:(ut=yt&&ut[yt]||ut["@@iterator"],typeof ut=="function"?ut:null)}function Bt(ut){if(ut==null)return null;if(typeof ut=="function")return ut.displayName||ut.name||null;if(typeof ut=="string")return ut;switch(ut){case At:return"Fragment";case at:return"Portal";case gt:return"Profiler";case lt:return"StrictMode";case mt:return"Suspense";case Ct:return"SuspenseList"}if(typeof ut=="object")switch(ut.$$typeof){case dt:return(ut.displayName||"Context")+".Consumer";case ct:return(ut._context.displayName||"Context")+".Provider";case ht:var It=ut.render;return ut=ut.displayName,ut||(ut=It.displayName||It.name||"",ut=ut!==""?"ForwardRef("+ut+")":"ForwardRef"),ut;case ft:return It=ut.displayName||null,It!==null?It:Bt(ut.type)||"Memo";case pt:It=ut._payload,ut=ut._init;try{return Bt(ut(It))}catch{}}return null}function vt(ut){var It=ut.type;switch(ut.tag){case 24:return"Cache";case 9:return(It.displayName||"Context")+".Consumer";case 10:return(It._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ut=It.render,ut=ut.displayName||ut.name||"",It.displayName||(ut!==""?"ForwardRef("+ut+")":"ForwardRef");case 7:return"Fragment";case 5:return It;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bt(It);case 8:return It===lt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof It=="function")return It.displayName||It.name||null;if(typeof It=="string")return It}return null}function wt(ut){var It=ut,bt=ut;if(ut.alternate)for(;It.return;)It=It.return;else{ut=It;do It=ut,It.flags&4098&&(bt=It.return),ut=It.return;while(ut)}return It.tag===3?bt:null}function Mt(ut){if(wt(ut)!==ut)throw Error(rt(188))}function kt(ut){var It=ut.alternate;if(!It){if(It=wt(ut),It===null)throw Error(rt(188));return It!==ut?null:ut}for(var bt=ut,xt=It;;){var Rt=bt.return;if(Rt===null)break;var Ft=Rt.alternate;if(Ft===null){if(xt=Rt.return,xt!==null){bt=xt;continue}break}if(Rt.child===Ft.child){for(Ft=Rt.child;Ft;){if(Ft===bt)return Mt(Rt),ut;if(Ft===xt)return Mt(Rt),It;Ft=Ft.sibling}throw Error(rt(188))}if(bt.return!==xt.return)bt=Rt,xt=Ft;else{for(var Qt=!1,on=Rt.child;on;){if(on===bt){Qt=!0,bt=Rt,xt=Ft;break}if(on===xt){Qt=!0,xt=Rt,bt=Ft;break}on=on.sibling}if(!Qt){for(on=Ft.child;on;){if(on===bt){Qt=!0,bt=Ft,xt=Rt;break}if(on===xt){Qt=!0,xt=Ft,bt=Rt;break}on=on.sibling}if(!Qt)throw Error(rt(189))}}if(bt.alternate!==xt)throw Error(rt(190))}if(bt.tag!==3)throw Error(rt(188));return bt.stateNode.current===bt?ut:It}function Nt(ut){return ut=kt(ut),ut!==null?Yt(ut):null}function Yt(ut){if(ut.tag===5||ut.tag===6)return ut;for(ut=ut.child;ut!==null;){var It=Yt(ut);if(It!==null)return It;ut=ut.sibling}return null}function Lt(ut){if(ut.tag===5||ut.tag===6)return ut;for(ut=ut.child;ut!==null;){if(ut.tag!==4){var It=Lt(ut);if(It!==null)return It}ut=ut.sibling}return null}var Xt=Array.isArray,_t=_.getPublicInstance,Tt=_.getRootHostContext,St=_.getChildHostContext,Zt=_.prepareForCommit,Et=_.resetAfterCommit,Wt=_.createInstance,Ht=_.appendInitialChild,zt=_.finalizeInitialChildren,Pt=_.prepareUpdate,Ot=_.shouldSetTextContent,Jt=_.createTextInstance,rn=_.scheduleTimeout,sn=_.cancelTimeout,Vn=_.noTimeout,dn=_.isPrimaryRenderer,gn=_.supportsMutation,$t=_.supportsPersistence,tn=_.supportsHydration,nn=_.getInstanceFromNode,Bn=_.preparePortalMount,Gn=_.getCurrentEventPriority,kn=_.detachDeletedInstance,pn=_.supportsMicrotasks,Rn=_.scheduleMicrotask,Mn=_.supportsTestSelectors,In=_.findFiberRoot,Dt=_.getBoundingRect,Kt=_.getTextContent,en=_.isHiddenSubtree,un=_.matchAccessibilityRole,Sn=_.setFocusIfFocusable,wn=_.setupIntersectionObserver,Fn=_.appendChild,_n=_.appendChildToContainer,fn=_.commitTextUpdate,Nn=_.commitMount,jt=_.commitUpdate,cn=_.insertBefore,yn=_.insertInContainerBefore,bn=_.removeChild,En=_.removeChildFromContainer,Dn=_.resetTextContent,jn=_.hideInstance,qt=_.hideTextInstance,hn=_.unhideInstance,Wn=_.unhideTextInstance,Ln=_.clearContainer,Kn=_.cloneInstance,tr=_.createContainerChildSet,ur=_.appendChildToContainerChildSet,pr=_.finalizeContainerChildren,Ir=_.replaceContainerChildren,Cr=_.cloneHiddenInstance,dr=_.cloneHiddenTextInstance,cr=_.canHydrateInstance,Jr=_.canHydrateTextInstance,zr=_.canHydrateSuspenseInstance,mr=_.isSuspenseInstancePending,wr=_.isSuspenseInstanceFallback,Ut=_.registerSuspenseInstanceRetry,ln=_.getNextHydratableSibling,mn=_.getFirstHydratableChild,An=_.getFirstHydratableChildWithinContainer,Zn=_.getFirstHydratableChildWithinSuspenseInstance,zn=_.hydrateInstance,On=_.hydrateTextInstance,nr=_.hydrateSuspenseInstance,ir=_.getNextHydratableInstanceAfterSuspenseInstance,rr=_.commitHydratedContainer,sr=_.commitHydratedSuspenseInstance,lr=_.clearSuspenseBoundary,Br=_.clearSuspenseBoundaryFromContainer,Fr=_.shouldDeleteUnhydratedTailInstances,ts=_.didNotMatchHydratedContainerTextInstance,ds=_.didNotMatchHydratedTextInstance,Hn;function $n(ut){if(Hn===void 0)try{throw Error()}catch(bt){var It=bt.stack.trim().match(/\n( *(at )?)/);Hn=It&&It[1]||""}return`
`+Hn+ut}var Ys=!1;function br(ut,It){if(!ut||Ys)return"";Ys=!0;var bt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(It)if(It=function(){throw Error()},Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(Tn){var xt=Tn}Reflect.construct(ut,[],It)}else{try{It.call()}catch(Tn){xt=Tn}ut.call(It.prototype)}else{try{throw Error()}catch(Tn){xt=Tn}ut()}}catch(Tn){if(Tn&&xt&&typeof Tn.stack=="string"){for(var Rt=Tn.stack.split(`
`),Ft=xt.stack.split(`
`),Qt=Rt.length-1,on=Ft.length-1;1<=Qt&&0<=on&&Rt[Qt]!==Ft[on];)on--;for(;1<=Qt&&0<=on;Qt--,on--)if(Rt[Qt]!==Ft[on]){if(Qt!==1||on!==1)do if(Qt--,on--,0>on||Rt[Qt]!==Ft[on]){var xn=`
`+Rt[Qt].replace(" at new "," at ");return ut.displayName&&xn.includes("<anonymous>")&&(xn=xn.replace("<anonymous>",ut.displayName)),xn}while(1<=Qt&&0<=on);break}}}finally{Ys=!1,Error.prepareStackTrace=bt}return(ut=ut?ut.displayName||ut.name:"")?$n(ut):""}var ys=Object.prototype.hasOwnProperty,Ms=[],Pr=-1;function Dr(ut){return{current:ut}}function qn(ut){0>Pr||(ut.current=Ms[Pr],Ms[Pr]=null,Pr--)}function ar(ut,It){Pr++,Ms[Pr]=ut.current,ut.current=It}var ns={},hr=Dr(ns),Wr=Dr(!1),rs=ns;function hs(ut,It){var bt=ut.type.contextTypes;if(!bt)return ns;var xt=ut.stateNode;if(xt&&xt.__reactInternalMemoizedUnmaskedChildContext===It)return xt.__reactInternalMemoizedMaskedChildContext;var Rt={},Ft;for(Ft in bt)Rt[Ft]=It[Ft];return xt&&(ut=ut.stateNode,ut.__reactInternalMemoizedUnmaskedChildContext=It,ut.__reactInternalMemoizedMaskedChildContext=Rt),Rt}function _r(ut){return ut=ut.childContextTypes,ut!=null}function qs(){qn(Wr),qn(hr)}function xo(ut,It,bt){if(hr.current!==ns)throw Error(rt(168));ar(hr,It),ar(Wr,bt)}function So(ut,It,bt){var xt=ut.stateNode;if(It=It.childContextTypes,typeof xt.getChildContext!="function")return bt;xt=xt.getChildContext();for(var Rt in xt)if(!(Rt in It))throw Error(rt(108,vt(ut)||"Unknown",Rt));return it({},bt,xt)}function Fs(ut){return ut=(ut=ut.stateNode)&&ut.__reactInternalMemoizedMergedChildContext||ns,rs=hr.current,ar(hr,ut),ar(Wr,Wr.current),!0}function AA(ut,It,bt){var xt=ut.stateNode;if(!xt)throw Error(rt(169));bt?(ut=So(ut,It,rs),xt.__reactInternalMemoizedMergedChildContext=ut,qn(Wr),qn(hr),ar(hr,ut)):qn(Wr),ar(Wr,bt)}var Or=Math.clz32?Math.clz32:lA,wo=Math.log,co=Math.LN2;function lA(ut){return ut>>>=0,ut===0?32:31-(wo(ut)/co|0)|0}var Ks=64,zs=4194304;function Ps(ut){switch(ut&-ut){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ut&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ut&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ut}}function uo(ut,It){var bt=ut.pendingLanes;if(bt===0)return 0;var xt=0,Rt=ut.suspendedLanes,Ft=ut.pingedLanes,Qt=bt&268435455;if(Qt!==0){var on=Qt&~Rt;on!==0?xt=Ps(on):(Ft&=Qt,Ft!==0&&(xt=Ps(Ft)))}else Qt=bt&~Rt,Qt!==0?xt=Ps(Qt):Ft!==0&&(xt=Ps(Ft));if(xt===0)return 0;if(It!==0&&It!==xt&&!(It&Rt)&&(Rt=xt&-xt,Ft=It&-It,Rt>=Ft||Rt===16&&(Ft&4194240)!==0))return It;if(xt&4&&(xt|=bt&16),It=ut.entangledLanes,It!==0)for(ut=ut.entanglements,It&=xt;0<It;)bt=31-Or(It),Rt=1<<bt,xt|=ut[bt],It&=~Rt;return xt}function gA(ut,It){switch(ut){case 1:case 2:case 4:return It+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return It+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(ut,It){for(var bt=ut.suspendedLanes,xt=ut.pingedLanes,Rt=ut.expirationTimes,Ft=ut.pendingLanes;0<Ft;){var Qt=31-Or(Ft),on=1<<Qt,xn=Rt[Qt];xn===-1?(!(on&bt)||on&xt)&&(Rt[Qt]=gA(on,It)):xn<=It&&(ut.expiredLanes|=on),Ft&=~on}}function Ds(ut){return ut=ut.pendingLanes&-1073741825,ut!==0?ut:ut&1073741824?1073741824:0}function Zo(ut){for(var It=[],bt=0;31>bt;bt++)It.push(ut);return It}function ks(ut,It,bt){ut.pendingLanes|=It,It!==536870912&&(ut.suspendedLanes=0,ut.pingedLanes=0),ut=ut.eventTimes,It=31-Or(It),ut[It]=bt}function eo(ut,It){var bt=ut.pendingLanes&~It;ut.pendingLanes=It,ut.suspendedLanes=0,ut.pingedLanes=0,ut.expiredLanes&=It,ut.mutableReadLanes&=It,ut.entangledLanes&=It,It=ut.entanglements;var xt=ut.eventTimes;for(ut=ut.expirationTimes;0<bt;){var Rt=31-Or(bt),Ft=1<<Rt;It[Rt]=0,xt[Rt]=-1,ut[Rt]=-1,bt&=~Ft}}function Es(ut,It){var bt=ut.entangledLanes|=It;for(ut=ut.entanglements;bt;){var xt=31-Or(bt),Rt=1<<xt;Rt&It|ut[xt]&It&&(ut[xt]|=It),bt&=~Rt}}var gr=0;function Po(ut){return ut&=-ut,1<ut?4<ut?ut&268435455?16:536870912:4:1}var Us=nt.unstable_scheduleCallback,Ro=nt.unstable_cancelCallback,Do=nt.unstable_shouldYield,cA=nt.unstable_requestPaint,xr=nt.unstable_now,to=nt.unstable_ImmediatePriority,uA=nt.unstable_UserBlockingPriority,ss=nt.unstable_NormalPriority,Uo=nt.unstable_IdlePriority,no=null,Is=null;function Jo(ut){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(no,ut,void 0,(ut.current.flags&128)===128)}catch{}}function Wo(ut,It){return ut===It&&(ut!==0||1/ut===1/It)||ut!==ut&&It!==It}var Cs=typeof Object.is=="function"?Object.is:Wo,os=null,Ts=!1,bs=!1;function Oo(ut){os===null?os=[ut]:os.push(ut)}function Qo(ut){Ts=!0,Oo(ut)}function ls(){if(!bs&&os!==null){bs=!0;var ut=0,It=gr;try{var bt=os;for(gr=1;ut<bt.length;ut++){var xt=bt[ut];do xt=xt(!0);while(xt!==null)}os=null,Ts=!1}catch(Rt){throw os!==null&&(os=os.slice(ut+1)),Us(to,ls),Rt}finally{gr=It,bs=!1}}return null}var ho=st.ReactCurrentBatchConfig;function Io(ut,It){if(Cs(ut,It))return!0;if(typeof ut!="object"||ut===null||typeof It!="object"||It===null)return!1;var bt=Object.keys(ut),xt=Object.keys(It);if(bt.length!==xt.length)return!1;for(xt=0;xt<bt.length;xt++){var Rt=bt[xt];if(!ys.call(It,Rt)||!Cs(ut[Rt],It[Rt]))return!1}return!0}function Co(ut){switch(ut.tag){case 5:return $n(ut.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 2:case 15:return ut=br(ut.type,!1),ut;case 11:return ut=br(ut.type.render,!1),ut;case 1:return ut=br(ut.type,!0),ut;default:return""}}function Qr(ut,It){if(ut&&ut.defaultProps){It=it({},It),ut=ut.defaultProps;for(var bt in ut)It[bt]===void 0&&(It[bt]=ut[bt]);return It}return It}var Lr=Dr(null),_o=null,Rs=null,io=null;function Mo(){io=Rs=_o=null}function dA(ut,It,bt){dn?(ar(Lr,It._currentValue),It._currentValue=bt):(ar(Lr,It._currentValue2),It._currentValue2=bt)}function Ns(ut){var It=Lr.current;qn(Lr),dn?ut._currentValue=It:ut._currentValue2=It}function kr(ut,It,bt){for(;ut!==null;){var xt=ut.alternate;if((ut.childLanes&It)!==It?(ut.childLanes|=It,xt!==null&&(xt.childLanes|=It)):xt!==null&&(xt.childLanes&It)!==It&&(xt.childLanes|=It),ut===bt)break;ut=ut.return}}function Xr(ut,It){_o=ut,io=Rs=null,ut=ut.dependencies,ut!==null&&ut.firstContext!==null&&(ut.lanes&It&&(ms=!0),ut.firstContext=null)}function vr(ut){var It=dn?ut._currentValue:ut._currentValue2;if(io!==ut)if(ut={context:ut,memoizedValue:It,next:null},Rs===null){if(_o===null)throw Error(rt(308));Rs=ut,_o.dependencies={lanes:0,firstContext:ut}}else Rs=Rs.next=ut;return It}var Nr=null,Ws=!1;function $A(ut){ut.updateQueue={baseState:ut.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function du(ut,It){ut=ut.updateQueue,It.updateQueue===ut&&(It.updateQueue={baseState:ut.baseState,firstBaseUpdate:ut.firstBaseUpdate,lastBaseUpdate:ut.lastBaseUpdate,shared:ut.shared,effects:ut.effects})}function Js(ut,It){return{eventTime:ut,lane:It,tag:0,payload:null,callback:null,next:null}}function ro(ut,It){var bt=ut.updateQueue;bt!==null&&(bt=bt.shared,Er!==null&&ut.mode&1&&!(Ar&2)?(ut=bt.interleaved,ut===null?(It.next=It,Nr===null?Nr=[bt]:Nr.push(bt)):(It.next=ut.next,ut.next=It),bt.interleaved=It):(ut=bt.pending,ut===null?It.next=It:(It.next=ut.next,ut.next=It),bt.pending=It))}function hA(ut,It,bt){if(It=It.updateQueue,It!==null&&(It=It.shared,(bt&4194240)!==0)){var xt=It.lanes;xt&=ut.pendingLanes,bt|=xt,It.lanes=bt,Es(ut,bt)}}function hu(ut,It){var bt=ut.updateQueue,xt=ut.alternate;if(xt!==null&&(xt=xt.updateQueue,bt===xt)){var Rt=null,Ft=null;if(bt=bt.firstBaseUpdate,bt!==null){do{var Qt={eventTime:bt.eventTime,lane:bt.lane,tag:bt.tag,payload:bt.payload,callback:bt.callback,next:null};Ft===null?Rt=Ft=Qt:Ft=Ft.next=Qt,bt=bt.next}while(bt!==null);Ft===null?Rt=Ft=It:Ft=Ft.next=It}else Rt=Ft=It;bt={baseState:xt.baseState,firstBaseUpdate:Rt,lastBaseUpdate:Ft,shared:xt.shared,effects:xt.effects},ut.updateQueue=bt;return}ut=bt.lastBaseUpdate,ut===null?bt.firstBaseUpdate=It:ut.next=It,bt.lastBaseUpdate=It}function IA(ut,It,bt,xt){var Rt=ut.updateQueue;Ws=!1;var Ft=Rt.firstBaseUpdate,Qt=Rt.lastBaseUpdate,on=Rt.shared.pending;if(on!==null){Rt.shared.pending=null;var xn=on,Tn=xn.next;xn.next=null,Qt===null?Ft=Tn:Qt.next=Tn,Qt=xn;var Pn=ut.alternate;Pn!==null&&(Pn=Pn.updateQueue,on=Pn.lastBaseUpdate,on!==Qt&&(on===null?Pn.firstBaseUpdate=Tn:on.next=Tn,Pn.lastBaseUpdate=xn))}if(Ft!==null){var _i=Rt.baseState;Qt=0,Pn=Tn=xn=null,on=Ft;do{var Qn=on.lane,Gr=on.eventTime;if((xt&Qn)===Qn){Pn!==null&&(Pn=Pn.next={eventTime:Gr,lane:0,tag:on.tag,payload:on.payload,callback:on.callback,next:null});e:{var Jn=ut,es=on;switch(Qn=It,Gr=bt,es.tag){case 1:if(Jn=es.payload,typeof Jn=="function"){_i=Jn.call(Gr,_i,Qn);break e}_i=Jn;break e;case 3:Jn.flags=Jn.flags&-65537|128;case 0:if(Jn=es.payload,Qn=typeof Jn=="function"?Jn.call(Gr,_i,Qn):Jn,Qn==null)break e;_i=it({},_i,Qn);break e;case 2:Ws=!0}}on.callback!==null&&on.lane!==0&&(ut.flags|=64,Qn=Rt.effects,Qn===null?Rt.effects=[on]:Qn.push(on))}else Gr={eventTime:Gr,lane:Qn,tag:on.tag,payload:on.payload,callback:on.callback,next:null},Pn===null?(Tn=Pn=Gr,xn=_i):Pn=Pn.next=Gr,Qt|=Qn;if(on=on.next,on===null){if(on=Rt.shared.pending,on===null)break;Qn=on,on=Qn.next,Qn.next=null,Rt.lastBaseUpdate=Qn,Rt.shared.pending=null}}while(1);if(Pn===null&&(xn=_i),Rt.baseState=xn,Rt.firstBaseUpdate=Tn,Rt.lastBaseUpdate=Pn,It=Rt.shared.interleaved,It!==null){Rt=It;do Qt|=Rt.lane,Rt=Rt.next;while(Rt!==It)}else Ft===null&&(Rt.shared.lanes=0);Yo|=Qt,ut.lanes=Qt,ut.memoizedState=_i}}function Iu(ut,It,bt){if(ut=It.effects,It.effects=null,ut!==null)for(It=0;It<ut.length;It++){var xt=ut[It],Rt=xt.callback;if(Rt!==null){if(xt.callback=null,xt=bt,typeof Rt!="function")throw Error(rt(191,Rt));Rt.call(xt)}}}var Cu=new tt.Component().refs;function qA(ut,It,bt,xt){It=ut.memoizedState,bt=bt(xt,It),bt=bt==null?It:it({},It,bt),ut.memoizedState=bt,ut.lanes===0&&(ut.updateQueue.baseState=bt)}var CA={isMounted:function(ut){return(ut=ut._reactInternals)?wt(ut)===ut:!1},enqueueSetState:function(ut,It,bt){ut=ut._reactInternals;var xt=As(),Rt=ao(ut),Ft=Js(xt,Rt);Ft.payload=It,bt!=null&&(Ft.callback=bt),ro(ut,Ft),It=Ss(ut,Rt,xt),It!==null&&hA(It,ut,Rt)},enqueueReplaceState:function(ut,It,bt){ut=ut._reactInternals;var xt=As(),Rt=ao(ut),Ft=Js(xt,Rt);Ft.tag=1,Ft.payload=It,bt!=null&&(Ft.callback=bt),ro(ut,Ft),It=Ss(ut,Rt,xt),It!==null&&hA(It,ut,Rt)},enqueueForceUpdate:function(ut,It){ut=ut._reactInternals;var bt=As(),xt=ao(ut),Rt=Js(bt,xt);Rt.tag=2,It!=null&&(Rt.callback=It),ro(ut,Rt),It=Ss(ut,xt,bt),It!==null&&hA(It,ut,xt)}};function pu(ut,It,bt,xt,Rt,Ft,Qt){return ut=ut.stateNode,typeof ut.shouldComponentUpdate=="function"?ut.shouldComponentUpdate(xt,Ft,Qt):It.prototype&&It.prototype.isPureReactComponent?!Io(bt,xt)||!Io(Rt,Ft):!0}function fu(ut,It,bt){var xt=!1,Rt=ns,Ft=It.contextType;return typeof Ft=="object"&&Ft!==null?Ft=vr(Ft):(Rt=_r(It)?rs:hr.current,xt=It.contextTypes,Ft=(xt=xt!=null)?hs(ut,Rt):ns),It=new It(bt,Ft),ut.memoizedState=It.state!==null&&It.state!==void 0?It.state:null,It.updater=CA,ut.stateNode=It,It._reactInternals=ut,xt&&(ut=ut.stateNode,ut.__reactInternalMemoizedUnmaskedChildContext=Rt,ut.__reactInternalMemoizedMaskedChildContext=Ft),It}function mu(ut,It,bt,xt){ut=It.state,typeof It.componentWillReceiveProps=="function"&&It.componentWillReceiveProps(bt,xt),typeof It.UNSAFE_componentWillReceiveProps=="function"&&It.UNSAFE_componentWillReceiveProps(bt,xt),It.state!==ut&&CA.enqueueReplaceState(It,It.state,null)}function Al(ut,It,bt,xt){var Rt=ut.stateNode;Rt.props=bt,Rt.state=ut.memoizedState,Rt.refs=Cu,$A(ut);var Ft=It.contextType;typeof Ft=="object"&&Ft!==null?Rt.context=vr(Ft):(Ft=_r(It)?rs:hr.current,Rt.context=hs(ut,Ft)),Rt.state=ut.memoizedState,Ft=It.getDerivedStateFromProps,typeof Ft=="function"&&(qA(ut,It,Ft,bt),Rt.state=ut.memoizedState),typeof It.getDerivedStateFromProps=="function"||typeof Rt.getSnapshotBeforeUpdate=="function"||typeof Rt.UNSAFE_componentWillMount!="function"&&typeof Rt.componentWillMount!="function"||(It=Rt.state,typeof Rt.componentWillMount=="function"&&Rt.componentWillMount(),typeof Rt.UNSAFE_componentWillMount=="function"&&Rt.UNSAFE_componentWillMount(),It!==Rt.state&&CA.enqueueReplaceState(Rt,Rt.state,null),IA(ut,bt,Rt,xt),Rt.state=ut.memoizedState),typeof Rt.componentDidMount=="function"&&(ut.flags|=4194308)}var Fo=[],ko=0,pA=null,fA=0,vs=[],Gs=0,po=null,Os=1,Qs="";function fo(ut,It){Fo[ko++]=fA,Fo[ko++]=pA,pA=ut,fA=It}function Vu(ut,It,bt){vs[Gs++]=Os,vs[Gs++]=Qs,vs[Gs++]=po,po=ut;var xt=Os;ut=Qs;var Rt=32-Or(xt)-1;xt&=~(1<<Rt),bt+=1;var Ft=32-Or(It)+Rt;if(30<Ft){var Qt=Rt-Rt%5;Ft=(xt&(1<<Qt)-1).toString(32),xt>>=Qt,Rt-=Qt,Os=1<<32-Or(It)+Rt|bt<<Rt|xt,Qs=Ft+ut}else Os=1<<Ft|bt<<Rt|xt,Qs=ut}function Il(ut){ut.return!==null&&(fo(ut,1),Vu(ut,1,0))}function Cl(ut){for(;ut===pA;)pA=Fo[--ko],Fo[ko]=null,fA=Fo[--ko],Fo[ko]=null;for(;ut===po;)po=vs[--Gs],vs[Gs]=null,Qs=vs[--Gs],vs[Gs]=null,Os=vs[--Gs],vs[Gs]=null}var ps=null,fs=null,Sr=!1,jo=!1,_s=null;function yu(ut,It){var bt=ws(5,null,null,0);bt.elementType="DELETED",bt.stateNode=It,bt.return=ut,It=ut.deletions,It===null?(ut.deletions=[bt],ut.flags|=16):It.push(bt)}function bu(ut,It){switch(ut.tag){case 5:return It=cr(It,ut.type,ut.pendingProps),It!==null?(ut.stateNode=It,ps=ut,fs=mn(It),!0):!1;case 6:return It=Jr(It,ut.pendingProps),It!==null?(ut.stateNode=It,ps=ut,fs=null,!0):!1;case 13:if(It=zr(It),It!==null){var bt=po!==null?{id:Os,overflow:Qs}:null;return ut.memoizedState={dehydrated:It,treeContext:bt,retryLane:1073741824},bt=ws(18,null,null,0),bt.stateNode=It,bt.return=ut,ut.child=bt,ps=ut,fs=null,!0}return!1;default:return!1}}function Vl(ut){return(ut.mode&1)!==0&&(ut.flags&128)===0}function yl(ut){if(Sr){var It=fs;if(It){var bt=It;if(!bu(ut,It)){if(Vl(ut))throw Error(rt(418));It=ln(bt);var xt=ps;It&&bu(ut,It)?yu(xt,bt):(ut.flags=ut.flags&-4097|2,Sr=!1,ps=ut)}}else{if(Vl(ut))throw Error(rt(418));ut.flags=ut.flags&-4097|2,Sr=!1,ps=ut}}}function vu(ut){for(ut=ut.return;ut!==null&&ut.tag!==5&&ut.tag!==3&&ut.tag!==13;)ut=ut.return;ps=ut}function $o(ut){if(!tn||ut!==ps)return!1;if(!Sr)return vu(ut),Sr=!0,!1;if(ut.tag!==3&&(ut.tag!==5||Fr(ut.type)&&!Ot(ut.type,ut.memoizedProps))){var It=fs;if(It){if(Vl(ut)){for(ut=fs;ut;)ut=ln(ut);throw Error(rt(418))}for(;It;)yu(ut,It),It=ln(It)}}if(vu(ut),ut.tag===13){if(!tn)throw Error(rt(316));if(ut=ut.memoizedState,ut=ut!==null?ut.dehydrated:null,!ut)throw Error(rt(317));fs=ir(ut)}else fs=ps?ln(ut.stateNode):null;return!0}function Eo(){tn&&(fs=ps=null,jo=Sr=!1)}function Gl(ut){_s===null?_s=[ut]:_s.push(ut)}function qo(ut,It,bt){if(ut=bt.ref,ut!==null&&typeof ut!="function"&&typeof ut!="object"){if(bt._owner){if(bt=bt._owner,bt){if(bt.tag!==1)throw Error(rt(309));var xt=bt.stateNode}if(!xt)throw Error(rt(147,ut));var Rt=xt,Ft=""+ut;return It!==null&&It.ref!==null&&typeof It.ref=="function"&&It.ref._stringRef===Ft?It.ref:(It=function(Qt){var on=Rt.refs;on===Cu&&(on=Rt.refs={}),Qt===null?delete on[Ft]:on[Ft]=Qt},It._stringRef=Ft,It)}if(typeof ut!="string")throw Error(rt(284));if(!bt._owner)throw Error(rt(290,ut))}return ut}function mA(ut,It){throw ut=Object.prototype.toString.call(It),Error(rt(31,ut==="[object Object]"?"object with keys {"+Object.keys(It).join(", ")+"}":ut))}function Gu(ut){var It=ut._init;return It(ut._payload)}function Bu(ut){function It(Cn,an){if(ut){var vn=Cn.deletions;vn===null?(Cn.deletions=[an],Cn.flags|=16):vn.push(an)}}function bt(Cn,an){if(!ut)return null;for(;an!==null;)It(Cn,an),an=an.sibling;return null}function xt(Cn,an){for(Cn=new Map;an!==null;)an.key!==null?Cn.set(an.key,an):Cn.set(an.index,an),an=an.sibling;return Cn}function Rt(Cn,an){return Cn=lo(Cn,an),Cn.index=0,Cn.sibling=null,Cn}function Ft(Cn,an,vn){return Cn.index=vn,ut?(vn=Cn.alternate,vn!==null?(vn=vn.index,vn<an?(Cn.flags|=2,an):vn):(Cn.flags|=2,an)):(Cn.flags|=1048576,an)}function Qt(Cn){return ut&&Cn.alternate===null&&(Cn.flags|=2),Cn}function on(Cn,an,vn,Yn){return an===null||an.tag!==6?(an=lu(vn,Cn.mode,Yn),an.return=Cn,an):(an=Rt(an,vn),an.return=Cn,an)}function xn(Cn,an,vn,Yn){var Un=vn.type;return Un===At?Pn(Cn,an,vn.props.children,Yn,vn.key):an!==null&&(an.elementType===Un||typeof Un=="object"&&Un!==null&&Un.$$typeof===pt&&Gu(Un)===an.type)?(Yn=Rt(an,vn.props),Yn.ref=qo(Cn,an,vn),Yn.return=Cn,Yn):(Yn=QA(vn.type,vn.key,vn.props,null,Cn.mode,Yn),Yn.ref=qo(Cn,an,vn),Yn.return=Cn,Yn)}function Tn(Cn,an,vn,Yn){return an===null||an.tag!==4||an.stateNode.containerInfo!==vn.containerInfo||an.stateNode.implementation!==vn.implementation?(an=gu(vn,Cn.mode,Yn),an.return=Cn,an):(an=Rt(an,vn.children||[]),an.return=Cn,an)}function Pn(Cn,an,vn,Yn,Un){return an===null||an.tag!==7?(an=Bo(vn,Cn.mode,Yn,Un),an.return=Cn,an):(an=Rt(an,vn),an.return=Cn,an)}function _i(Cn,an,vn){if(typeof an=="string"&&an!==""||typeof an=="number")return an=lu(""+an,Cn.mode,vn),an.return=Cn,an;if(typeof an=="object"&&an!==null){switch(an.$$typeof){case ot:return vn=QA(an.type,an.key,an.props,null,Cn.mode,vn),vn.ref=qo(Cn,null,an),vn.return=Cn,vn;case at:return an=gu(an,Cn.mode,vn),an.return=Cn,an;case pt:var Yn=an._init;return _i(Cn,Yn(an._payload),vn)}if(Xt(an)||Gt(an))return an=Bo(an,Cn.mode,vn,null),an.return=Cn,an;mA(Cn,an)}return null}function Qn(Cn,an,vn,Yn){var Un=an!==null?an.key:null;if(typeof vn=="string"&&vn!==""||typeof vn=="number")return Un!==null?null:on(Cn,an,""+vn,Yn);if(typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case ot:return vn.key===Un?xn(Cn,an,vn,Yn):null;case at:return vn.key===Un?Tn(Cn,an,vn,Yn):null;case pt:return Un=vn._init,Qn(Cn,an,Un(vn._payload),Yn)}if(Xt(vn)||Gt(vn))return Un!==null?null:Pn(Cn,an,vn,Yn,null);mA(Cn,vn)}return null}function Gr(Cn,an,vn,Yn,Un){if(typeof Yn=="string"&&Yn!==""||typeof Yn=="number")return Cn=Cn.get(vn)||null,on(an,Cn,""+Yn,Un);if(typeof Yn=="object"&&Yn!==null){switch(Yn.$$typeof){case ot:return Cn=Cn.get(Yn.key===null?vn:Yn.key)||null,xn(an,Cn,Yn,Un);case at:return Cn=Cn.get(Yn.key===null?vn:Yn.key)||null,Tn(an,Cn,Yn,Un);case pt:var or=Yn._init;return Gr(Cn,an,vn,or(Yn._payload),Un)}if(Xt(Yn)||Gt(Yn))return Cn=Cn.get(vn)||null,Pn(an,Cn,Yn,Un,null);mA(an,Yn)}return null}function Jn(Cn,an,vn,Yn){for(var Un=null,or=null,er=an,Vr=an=0,Kr=null;er!==null&&Vr<vn.length;Vr++){er.index>Vr?(Kr=er,er=null):Kr=er.sibling;var yr=Qn(Cn,er,vn[Vr],Yn);if(yr===null){er===null&&(er=Kr);break}ut&&er&&yr.alternate===null&&It(Cn,er),an=Ft(yr,an,Vr),or===null?Un=yr:or.sibling=yr,or=yr,er=Kr}if(Vr===vn.length)return bt(Cn,er),Sr&&fo(Cn,Vr),Un;if(er===null){for(;Vr<vn.length;Vr++)er=_i(Cn,vn[Vr],Yn),er!==null&&(an=Ft(er,an,Vr),or===null?Un=er:or.sibling=er,or=er);return Sr&&fo(Cn,Vr),Un}for(er=xt(Cn,er);Vr<vn.length;Vr++)Kr=Gr(er,Cn,Vr,vn[Vr],Yn),Kr!==null&&(ut&&Kr.alternate!==null&&er.delete(Kr.key===null?Vr:Kr.key),an=Ft(Kr,an,Vr),or===null?Un=Kr:or.sibling=Kr,or=Kr);return ut&&er.forEach(function(go){return It(Cn,go)}),Sr&&fo(Cn,Vr),Un}function es(Cn,an,vn,Yn){var Un=Gt(vn);if(typeof Un!="function")throw Error(rt(150));if(vn=Un.call(vn),vn==null)throw Error(rt(151));for(var or=Un=null,er=an,Vr=an=0,Kr=null,yr=vn.next();er!==null&&!yr.done;Vr++,yr=vn.next()){er.index>Vr?(Kr=er,er=null):Kr=er.sibling;var go=Qn(Cn,er,yr.value,Yn);if(go===null){er===null&&(er=Kr);break}ut&&er&&go.alternate===null&&It(Cn,er),an=Ft(go,an,Vr),or===null?Un=go:or.sibling=go,or=go,er=Kr}if(yr.done)return bt(Cn,er),Sr&&fo(Cn,Vr),Un;if(er===null){for(;!yr.done;Vr++,yr=vn.next())yr=_i(Cn,yr.value,Yn),yr!==null&&(an=Ft(yr,an,Vr),or===null?Un=yr:or.sibling=yr,or=yr);return Sr&&fo(Cn,Vr),Un}for(er=xt(Cn,er);!yr.done;Vr++,yr=vn.next())yr=Gr(er,Cn,Vr,yr.value,Yn),yr!==null&&(ut&&yr.alternate!==null&&er.delete(yr.key===null?Vr:yr.key),an=Ft(yr,an,Vr),or===null?Un=yr:or.sibling=yr,or=yr);return ut&&er.forEach(function(dC){return It(Cn,dC)}),Sr&&fo(Cn,Vr),Un}function Zs(Cn,an,vn,Yn){if(typeof vn=="object"&&vn!==null&&vn.type===At&&vn.key===null&&(vn=vn.props.children),typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case ot:e:{for(var Un=vn.key,or=an;or!==null;){if(or.key===Un){if(Un=vn.type,Un===At){if(or.tag===7){bt(Cn,or.sibling),an=Rt(or,vn.props.children),an.return=Cn,Cn=an;break e}}else if(or.elementType===Un||typeof Un=="object"&&Un!==null&&Un.$$typeof===pt&&Gu(Un)===or.type){bt(Cn,or.sibling),an=Rt(or,vn.props),an.ref=qo(Cn,or,vn),an.return=Cn,Cn=an;break e}bt(Cn,or);break}else It(Cn,or);or=or.sibling}vn.type===At?(an=Bo(vn.props.children,Cn.mode,Yn,vn.key),an.return=Cn,Cn=an):(Yn=QA(vn.type,vn.key,vn.props,null,Cn.mode,Yn),Yn.ref=qo(Cn,an,vn),Yn.return=Cn,Cn=Yn)}return Qt(Cn);case at:e:{for(or=vn.key;an!==null;){if(an.key===or)if(an.tag===4&&an.stateNode.containerInfo===vn.containerInfo&&an.stateNode.implementation===vn.implementation){bt(Cn,an.sibling),an=Rt(an,vn.children||[]),an.return=Cn,Cn=an;break e}else{bt(Cn,an);break}else It(Cn,an);an=an.sibling}an=gu(vn,Cn.mode,Yn),an.return=Cn,Cn=an}return Qt(Cn);case pt:return or=vn._init,Zs(Cn,an,or(vn._payload),Yn)}if(Xt(vn))return Jn(Cn,an,vn,Yn);if(Gt(vn))return es(Cn,an,vn,Yn);mA(Cn,vn)}return typeof vn=="string"&&vn!==""||typeof vn=="number"?(vn=""+vn,an!==null&&an.tag===6?(bt(Cn,an.sibling),an=Rt(an,vn),an.return=Cn,Cn=an):(bt(Cn,an),an=lu(vn,Cn.mode,Yn),an.return=Cn,Cn=an),Qt(Cn)):bt(Cn,an)}return Zs}var To=Bu(!0),xu=Bu(!1),na={},Bs=Dr(na),ga=Dr(na),No=Dr(na);function Hs(ut){if(ut===na)throw Error(rt(174));return ut}function Bl(ut,It){ar(No,It),ar(ga,ut),ar(Bs,na),ut=Tt(It),qn(Bs),ar(Bs,ut)}function Ho(){qn(Bs),qn(ga),qn(No)}function Su(ut){var It=Hs(No.current),bt=Hs(Bs.current);It=St(bt,ut.type,It),bt!==It&&(ar(ga,ut),ar(Bs,It))}function xl(ut){ga.current===ut&&(qn(Bs),qn(ga))}var Zr=Dr(0);function VA(ut){for(var It=ut;It!==null;){if(It.tag===13){var bt=It.memoizedState;if(bt!==null&&(bt=bt.dehydrated,bt===null||mr(bt)||wr(bt)))return It}else if(It.tag===19&&It.memoizedProps.revealOrder!==void 0){if(It.flags&128)return It}else if(It.child!==null){It.child.return=It,It=It.child;continue}if(It===ut)break;for(;It.sibling===null;){if(It.return===null||It.return===ut)return null;It=It.return}It.sibling.return=It.return,It=It.sibling}return null}var Sl=[];function Zl(){for(var ut=0;ut<Sl.length;ut++){var It=Sl[ut];dn?It._workInProgressVersionPrimary=null:It._workInProgressVersionSecondary=null}Sl.length=0}var yA=st.ReactCurrentDispatcher,xs=st.ReactCurrentBatchConfig,Lo=0,Rr=null,jr=null,Yr=null,bA=!1,ba=!1,xa=0,NI=0;function $r(){throw Error(rt(321))}function Rl(ut,It){if(It===null)return!1;for(var bt=0;bt<It.length&&bt<ut.length;bt++)if(!Cs(ut[bt],It[bt]))return!1;return!0}function Wl(ut,It,bt,xt,Rt,Ft){if(Lo=Ft,Rr=It,It.memoizedState=null,It.updateQueue=null,It.lanes=0,yA.current=ut===null||ut.memoizedState===null?YI:KI,ut=bt(xt,Rt),ba){Ft=0;do{if(ba=!1,xa=0,25<=Ft)throw Error(rt(301));Ft+=1,Yr=jr=null,It.updateQueue=null,yA.current=zI,ut=bt(xt,Rt)}while(ba)}if(yA.current=SA,It=jr!==null&&jr.next!==null,Lo=0,Yr=jr=Rr=null,bA=!1,It)throw Error(rt(300));return ut}function _l(){var ut=xa!==0;return xa=0,ut}function js(){var ut={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?Rr.memoizedState=Yr=ut:Yr=Yr.next=ut,Yr}function Ls(){if(jr===null){var ut=Rr.alternate;ut=ut!==null?ut.memoizedState:null}else ut=jr.next;var It=Yr===null?Rr.memoizedState:Yr.next;if(It!==null)Yr=It,jr=ut;else{if(ut===null)throw Error(rt(310));jr=ut,ut={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Yr===null?Rr.memoizedState=Yr=ut:Yr=Yr.next=ut}return Yr}function mo(ut,It){return typeof It=="function"?It(ut):It}function vA(ut){var It=Ls(),bt=It.queue;if(bt===null)throw Error(rt(311));bt.lastRenderedReducer=ut;var xt=jr,Rt=xt.baseQueue,Ft=bt.pending;if(Ft!==null){if(Rt!==null){var Qt=Rt.next;Rt.next=Ft.next,Ft.next=Qt}xt.baseQueue=Rt=Ft,bt.pending=null}if(Rt!==null){Ft=Rt.next,xt=xt.baseState;var on=Qt=null,xn=null,Tn=Ft;do{var Pn=Tn.lane;if((Lo&Pn)===Pn)xn!==null&&(xn=xn.next={lane:0,action:Tn.action,hasEagerState:Tn.hasEagerState,eagerState:Tn.eagerState,next:null}),xt=Tn.hasEagerState?Tn.eagerState:ut(xt,Tn.action);else{var _i={lane:Pn,action:Tn.action,hasEagerState:Tn.hasEagerState,eagerState:Tn.eagerState,next:null};xn===null?(on=xn=_i,Qt=xt):xn=xn.next=_i,Rr.lanes|=Pn,Yo|=Pn}Tn=Tn.next}while(Tn!==null&&Tn!==Ft);xn===null?Qt=xt:xn.next=on,Cs(xt,It.memoizedState)||(ms=!0),It.memoizedState=xt,It.baseState=Qt,It.baseQueue=xn,bt.lastRenderedState=xt}if(ut=bt.interleaved,ut!==null){Rt=ut;do Ft=Rt.lane,Rr.lanes|=Ft,Yo|=Ft,Rt=Rt.next;while(Rt!==ut)}else Rt===null&&(bt.lanes=0);return[It.memoizedState,bt.dispatch]}function GA(ut){var It=Ls(),bt=It.queue;if(bt===null)throw Error(rt(311));bt.lastRenderedReducer=ut;var xt=bt.dispatch,Rt=bt.pending,Ft=It.memoizedState;if(Rt!==null){bt.pending=null;var Qt=Rt=Rt.next;do Ft=ut(Ft,Qt.action),Qt=Qt.next;while(Qt!==Rt);Cs(Ft,It.memoizedState)||(ms=!0),It.memoizedState=Ft,It.baseQueue===null&&(It.baseState=Ft),bt.lastRenderedState=Ft}return[Ft,xt]}function wu(){}function Zu(ut,It){var bt=Rr,xt=Ls(),Rt=It(),Ft=!Cs(xt.memoizedState,Rt);if(Ft&&(xt.memoizedState=Rt,ms=!0),xt=xt.queue,$a(_u.bind(null,bt,xt,ut),[ut]),xt.getSnapshot!==It||Ft||Yr!==null&&Yr.memoizedState.tag&1){if(bt.flags|=2048,_a(9,Wu.bind(null,bt,xt,Rt,It),void 0,null),Er===null)throw Error(rt(349));Lo&30||Ru(bt,It,Rt)}return Rt}function Ru(ut,It,bt){ut.flags|=16384,ut={getSnapshot:It,value:bt},It=Rr.updateQueue,It===null?(It={lastEffect:null,stores:null},Rr.updateQueue=It,It.stores=[ut]):(bt=It.stores,bt===null?It.stores=[ut]:bt.push(ut))}function Wu(ut,It,bt,xt){It.value=bt,It.getSnapshot=xt,Mu(It)&&Ss(ut,1,-1)}function _u(ut,It,bt){return bt(function(){Mu(It)&&Ss(ut,1,-1)})}function Mu(ut){var It=ut.getSnapshot;ut=ut.value;try{var bt=It();return!Cs(ut,bt)}catch{return!0}}function Ml(ut){var It=js();return typeof ut=="function"&&(ut=ut()),It.memoizedState=It.baseState=ut,ut={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mo,lastRenderedState:ut},It.queue=ut,ut=ut.dispatch=XI.bind(null,Rr,ut),[It.memoizedState,ut]}function _a(ut,It,bt,xt){return ut={tag:ut,create:It,destroy:bt,deps:xt,next:null},It=Rr.updateQueue,It===null?(It={lastEffect:null,stores:null},Rr.updateQueue=It,It.lastEffect=ut.next=ut):(bt=It.lastEffect,bt===null?It.lastEffect=ut.next=ut:(xt=bt.next,bt.next=ut,ut.next=xt,It.lastEffect=ut)),ut}function Fu(){return Ls().memoizedState}function BA(ut,It,bt,xt){var Rt=js();Rr.flags|=ut,Rt.memoizedState=_a(1|It,bt,void 0,xt===void 0?null:xt)}function xA(ut,It,bt,xt){var Rt=Ls();xt=xt===void 0?null:xt;var Ft=void 0;if(jr!==null){var Qt=jr.memoizedState;if(Ft=Qt.destroy,xt!==null&&Rl(xt,Qt.deps)){Rt.memoizedState=_a(It,bt,Ft,xt);return}}Rr.flags|=ut,Rt.memoizedState=_a(1|It,bt,Ft,xt)}function Fl(ut,It){return BA(8390656,8,ut,It)}function $a(ut,It){return xA(2048,8,ut,It)}function ku(ut,It){return xA(4,2,ut,It)}function Eu(ut,It){return xA(4,4,ut,It)}function Tu(ut,It){if(typeof It=="function")return ut=ut(),It(ut),function(){It(null)};if(It!=null)return ut=ut(),It.current=ut,function(){It.current=null}}function Nu(ut,It,bt){return bt=bt!=null?bt.concat([ut]):null,xA(4,4,Tu.bind(null,It,ut),bt)}function El(){}function Hu(ut,It){var bt=Ls();It=It===void 0?null:It;var xt=bt.memoizedState;return xt!==null&&It!==null&&Rl(It,xt[1])?xt[0]:(bt.memoizedState=[ut,It],ut)}function Lu(ut,It){var bt=Ls();It=It===void 0?null:It;var xt=bt.memoizedState;return xt!==null&&It!==null&&Rl(It,xt[1])?xt[0]:(ut=ut(),bt.memoizedState=[ut,It],ut)}function HI(ut,It){var bt=gr;gr=bt!==0&&4>bt?bt:4,ut(!0);var xt=xs.transition;xs.transition={};try{ut(!1),It()}finally{gr=bt,xs.transition=xt}}function Xu(){return Ls().memoizedState}function LI(ut,It,bt){var xt=ao(ut);bt={lane:xt,action:bt,hasEagerState:!1,eagerState:null,next:null},Yu(ut)?Ku(It,bt):(zu(ut,It,bt),bt=As(),ut=Ss(ut,xt,bt),ut!==null&&Pu(ut,It,xt))}function XI(ut,It,bt){var xt=ao(ut),Rt={lane:xt,action:bt,hasEagerState:!1,eagerState:null,next:null};if(Yu(ut))Ku(It,Rt);else{zu(ut,It,Rt);var Ft=ut.alternate;if(ut.lanes===0&&(Ft===null||Ft.lanes===0)&&(Ft=It.lastRenderedReducer,Ft!==null))try{var Qt=It.lastRenderedState,on=Ft(Qt,bt);if(Rt.hasEagerState=!0,Rt.eagerState=on,Cs(on,Qt))return}catch{}finally{}bt=As(),ut=Ss(ut,xt,bt),ut!==null&&Pu(ut,It,xt)}}function Yu(ut){var It=ut.alternate;return ut===Rr||It!==null&&It===Rr}function Ku(ut,It){ba=bA=!0;var bt=ut.pending;bt===null?It.next=It:(It.next=bt.next,bt.next=It),ut.pending=It}function zu(ut,It,bt){Er!==null&&ut.mode&1&&!(Ar&2)?(ut=It.interleaved,ut===null?(bt.next=bt,Nr===null?Nr=[It]:Nr.push(It)):(bt.next=ut.next,ut.next=bt),It.interleaved=bt):(ut=It.pending,ut===null?bt.next=bt:(bt.next=ut.next,ut.next=bt),It.pending=bt)}function Pu(ut,It,bt){if(bt&4194240){var xt=It.lanes;xt&=ut.pendingLanes,bt|=xt,It.lanes=bt,Es(ut,bt)}}var SA={readContext:vr,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},YI={readContext:vr,useCallback:function(ut,It){return js().memoizedState=[ut,It===void 0?null:It],ut},useContext:vr,useEffect:Fl,useImperativeHandle:function(ut,It,bt){return bt=bt!=null?bt.concat([ut]):null,BA(4194308,4,Tu.bind(null,It,ut),bt)},useLayoutEffect:function(ut,It){return BA(4194308,4,ut,It)},useInsertionEffect:function(ut,It){return BA(4,2,ut,It)},useMemo:function(ut,It){var bt=js();return It=It===void 0?null:It,ut=ut(),bt.memoizedState=[ut,It],ut},useReducer:function(ut,It,bt){var xt=js();return It=bt!==void 0?bt(It):It,xt.memoizedState=xt.baseState=It,ut={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:It},xt.queue=ut,ut=ut.dispatch=LI.bind(null,Rr,ut),[xt.memoizedState,ut]},useRef:function(ut){var It=js();return ut={current:ut},It.memoizedState=ut},useState:Ml,useDebugValue:El,useDeferredValue:function(ut){var It=Ml(ut),bt=It[0],xt=It[1];return Fl(function(){var Rt=xs.transition;xs.transition={};try{xt(ut)}finally{xs.transition=Rt}},[ut]),bt},useTransition:function(){var ut=Ml(!1),It=ut[0];return ut=HI.bind(null,ut[1]),js().memoizedState=ut,[It,ut]},useMutableSource:function(){},useSyncExternalStore:function(ut,It,bt){var xt=Rr,Rt=js();if(Sr){if(bt===void 0)throw Error(rt(407));bt=bt()}else{if(bt=It(),Er===null)throw Error(rt(349));Lo&30||Ru(xt,It,bt)}Rt.memoizedState=bt;var Ft={value:bt,getSnapshot:It};return Rt.queue=Ft,Fl(_u.bind(null,xt,Ft,ut),[ut]),xt.flags|=2048,_a(9,Wu.bind(null,xt,Ft,bt,It),void 0,null),bt},useId:function(){var ut=js(),It=Er.identifierPrefix;if(Sr){var bt=Qs,xt=Os;bt=(xt&~(1<<32-Or(xt)-1)).toString(32)+bt,It=":"+It+"R"+bt,bt=xa++,0<bt&&(It+="H"+bt.toString(32)),It+=":"}else bt=NI++,It=":"+It+"r"+bt.toString(32)+":";return ut.memoizedState=It},unstable_isNewReconciler:!1},KI={readContext:vr,useCallback:Hu,useContext:vr,useEffect:$a,useImperativeHandle:Nu,useInsertionEffect:ku,useLayoutEffect:Eu,useMemo:Lu,useReducer:vA,useRef:Fu,useState:function(){return vA(mo)},useDebugValue:El,useDeferredValue:function(ut){var It=vA(mo),bt=It[0],xt=It[1];return $a(function(){var Rt=xs.transition;xs.transition={};try{xt(ut)}finally{xs.transition=Rt}},[ut]),bt},useTransition:function(){var ut=vA(mo)[0],It=Ls().memoizedState;return[ut,It]},useMutableSource:wu,useSyncExternalStore:Zu,useId:Xu,unstable_isNewReconciler:!1},zI={readContext:vr,useCallback:Hu,useContext:vr,useEffect:$a,useImperativeHandle:Nu,useInsertionEffect:ku,useLayoutEffect:Eu,useMemo:Lu,useReducer:GA,useRef:Fu,useState:function(){return GA(mo)},useDebugValue:El,useDeferredValue:function(ut){var It=GA(mo),bt=It[0],xt=It[1];return $a(function(){var Rt=xs.transition;xs.transition={};try{xt(ut)}finally{xs.transition=Rt}},[ut]),bt},useTransition:function(){var ut=GA(mo)[0],It=Ls().memoizedState;return[ut,It]},useMutableSource:wu,useSyncExternalStore:Zu,useId:Xu,unstable_isNewReconciler:!1};function Tl(ut,It){try{var bt="",xt=It;do bt+=Co(xt),xt=xt.return;while(xt);var Rt=bt}catch(Ft){Rt=`
Error generating stack: `+Ft.message+`
`+Ft.stack}return{value:ut,source:It,stack:Rt}}function Nl(ut,It){try{console.error(It.value)}catch(bt){setTimeout(function(){throw bt})}}var PI=typeof WeakMap=="function"?WeakMap:Map;function Du(ut,It,bt){bt=Js(-1,bt),bt.tag=3,bt.payload={element:null};var xt=It.value;return bt.callback=function(){KA||(KA=!0,nu=xt),Nl(ut,It)},bt}function Uu(ut,It,bt){bt=Js(-1,bt),bt.tag=3;var xt=ut.type.getDerivedStateFromError;if(typeof xt=="function"){var Rt=It.value;bt.payload=function(){return xt(Rt)},bt.callback=function(){Nl(ut,It)}}var Ft=ut.stateNode;return Ft!==null&&typeof Ft.componentDidCatch=="function"&&(bt.callback=function(){Nl(ut,It),typeof xt!="function"&&(so===null?so=new Set([this]):so.add(this));var Qt=It.stack;this.componentDidCatch(It.value,{componentStack:Qt!==null?Qt:""})}),bt}function Ju(ut,It,bt){var xt=ut.pingCache;if(xt===null){xt=ut.pingCache=new PI;var Rt=new Set;xt.set(It,Rt)}else Rt=xt.get(It),Rt===void 0&&(Rt=new Set,xt.set(It,Rt));Rt.has(bt)||(Rt.add(bt),ut=sC.bind(null,ut,It,bt),It.then(ut,ut))}function Ou(ut){do{var It;if((It=ut.tag===13)&&(It=ut.memoizedState,It=It!==null?It.dehydrated!==null:!0),It)return ut;ut=ut.return}while(ut!==null);return null}function Qu(ut,It,bt,xt,Rt){return ut.mode&1?(ut.flags|=65536,ut.lanes=Rt,ut):(ut===It?ut.flags|=65536:(ut.flags|=128,bt.flags|=131072,bt.flags&=-52805,bt.tag===1&&(bt.alternate===null?bt.tag=17:(It=Js(-1,1),It.tag=2,ro(bt,It))),bt.lanes|=1),ut)}function Xs(ut){ut.flags|=4}function ju(ut,It){if(ut!==null&&ut.child===It.child)return!0;if(It.flags&16)return!1;for(ut=It.child;ut!==null;){if(ut.flags&12854||ut.subtreeFlags&12854)return!1;ut=ut.sibling}return!0}var eA,tA,wA,ZA;if(gn)eA=function(ut,It){for(var bt=It.child;bt!==null;){if(bt.tag===5||bt.tag===6)Ht(ut,bt.stateNode);else if(bt.tag!==4&&bt.child!==null){bt.child.return=bt,bt=bt.child;continue}if(bt===It)break;for(;bt.sibling===null;){if(bt.return===null||bt.return===It)return;bt=bt.return}bt.sibling.return=bt.return,bt=bt.sibling}},tA=function(){},wA=function(ut,It,bt,xt,Rt){if(ut=ut.memoizedProps,ut!==xt){var Ft=It.stateNode,Qt=Hs(Bs.current);bt=Pt(Ft,bt,ut,xt,Rt,Qt),(It.updateQueue=bt)&&Xs(It)}},ZA=function(ut,It,bt,xt){bt!==xt&&Xs(It)};else if($t){eA=function(ut,It,bt,xt){for(var Rt=It.child;Rt!==null;){if(Rt.tag===5){var Ft=Rt.stateNode;bt&&xt&&(Ft=Cr(Ft,Rt.type,Rt.memoizedProps,Rt)),Ht(ut,Ft)}else if(Rt.tag===6)Ft=Rt.stateNode,bt&&xt&&(Ft=dr(Ft,Rt.memoizedProps,Rt)),Ht(ut,Ft);else if(Rt.tag!==4){if(Rt.tag===22&&Rt.memoizedState!==null)Ft=Rt.child,Ft!==null&&(Ft.return=Rt),eA(ut,Rt,!0,!0);else if(Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}}if(Rt===It)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===It)return;Rt=Rt.return}Rt.sibling.return=Rt.return,Rt=Rt.sibling}};var $u=function(ut,It,bt,xt){for(var Rt=It.child;Rt!==null;){if(Rt.tag===5){var Ft=Rt.stateNode;bt&&xt&&(Ft=Cr(Ft,Rt.type,Rt.memoizedProps,Rt)),ur(ut,Ft)}else if(Rt.tag===6)Ft=Rt.stateNode,bt&&xt&&(Ft=dr(Ft,Rt.memoizedProps,Rt)),ur(ut,Ft);else if(Rt.tag!==4){if(Rt.tag===22&&Rt.memoizedState!==null)Ft=Rt.child,Ft!==null&&(Ft.return=Rt),$u(ut,Rt,!0,!0);else if(Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}}if(Rt===It)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===It)return;Rt=Rt.return}Rt.sibling.return=Rt.return,Rt=Rt.sibling}};tA=function(ut,It){var bt=It.stateNode;if(!ju(ut,It)){ut=bt.containerInfo;var xt=tr(ut);$u(xt,It,!1,!1),bt.pendingChildren=xt,Xs(It),pr(ut,xt)}},wA=function(ut,It,bt,xt,Rt){var Ft=ut.stateNode,Qt=ut.memoizedProps;if((ut=ju(ut,It))&&Qt===xt)It.stateNode=Ft;else{var on=It.stateNode,xn=Hs(Bs.current),Tn=null;Qt!==xt&&(Tn=Pt(on,bt,Qt,xt,Rt,xn)),ut&&Tn===null?It.stateNode=Ft:(Ft=Kn(Ft,Tn,bt,Qt,xt,It,ut,on),zt(Ft,bt,xt,Rt,xn)&&Xs(It),It.stateNode=Ft,ut?Xs(It):eA(Ft,It,!1,!1))}},ZA=function(ut,It,bt,xt){bt!==xt?(ut=Hs(No.current),bt=Hs(Bs.current),It.stateNode=Jt(xt,ut,bt,It),Xs(It)):It.stateNode=ut.stateNode}}else tA=function(){},wA=function(){},ZA=function(){};function nA(ut,It){if(!Sr)switch(ut.tailMode){case"hidden":It=ut.tail;for(var bt=null;It!==null;)It.alternate!==null&&(bt=It),It=It.sibling;bt===null?ut.tail=null:bt.sibling=null;break;case"collapsed":bt=ut.tail;for(var xt=null;bt!==null;)bt.alternate!==null&&(xt=bt),bt=bt.sibling;xt===null?It||ut.tail===null?ut.tail=null:ut.tail.sibling=null:xt.sibling=null}}function qr(ut){var It=ut.alternate!==null&&ut.alternate.child===ut.child,bt=0,xt=0;if(It)for(var Rt=ut.child;Rt!==null;)bt|=Rt.lanes|Rt.childLanes,xt|=Rt.subtreeFlags&14680064,xt|=Rt.flags&14680064,Rt.return=ut,Rt=Rt.sibling;else for(Rt=ut.child;Rt!==null;)bt|=Rt.lanes|Rt.childLanes,xt|=Rt.subtreeFlags,xt|=Rt.flags,Rt.return=ut,Rt=Rt.sibling;return ut.subtreeFlags|=xt,ut.childLanes=bt,It}function DI(ut,It,bt){var xt=It.pendingProps;switch(Cl(It),It.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(It),null;case 1:return _r(It.type)&&qs(),qr(It),null;case 3:return xt=It.stateNode,Ho(),qn(Wr),qn(hr),Zl(),xt.pendingContext&&(xt.context=xt.pendingContext,xt.pendingContext=null),(ut===null||ut.child===null)&&($o(It)?Xs(It):ut===null||ut.memoizedState.isDehydrated&&!(It.flags&256)||(It.flags|=1024,_s!==null&&(su(_s),_s=null))),tA(ut,It),qr(It),null;case 5:xl(It),bt=Hs(No.current);var Rt=It.type;if(ut!==null&&It.stateNode!=null)wA(ut,It,Rt,xt,bt),ut.ref!==It.ref&&(It.flags|=512,It.flags|=2097152);else{if(!xt){if(It.stateNode===null)throw Error(rt(166));return qr(It),null}if(ut=Hs(Bs.current),$o(It)){if(!tn)throw Error(rt(175));ut=zn(It.stateNode,It.type,It.memoizedProps,bt,ut,It,!jo),It.updateQueue=ut,ut!==null&&Xs(It)}else{var Ft=Wt(Rt,xt,bt,ut,It);eA(Ft,It,!1,!1),It.stateNode=Ft,zt(Ft,Rt,xt,bt,ut)&&Xs(It)}It.ref!==null&&(It.flags|=512,It.flags|=2097152)}return qr(It),null;case 6:if(ut&&It.stateNode!=null)ZA(ut,It,ut.memoizedProps,xt);else{if(typeof xt!="string"&&It.stateNode===null)throw Error(rt(166));if(ut=Hs(No.current),bt=Hs(Bs.current),$o(It)){if(!tn)throw Error(rt(176));if(ut=It.stateNode,xt=It.memoizedProps,(bt=On(ut,xt,It,!jo))&&(Rt=ps,Rt!==null))switch(Ft=(Rt.mode&1)!==0,Rt.tag){case 3:ts(Rt.stateNode.containerInfo,ut,xt,Ft);break;case 5:ds(Rt.type,Rt.memoizedProps,Rt.stateNode,ut,xt,Ft)}bt&&Xs(It)}else It.stateNode=Jt(xt,ut,bt,It)}return qr(It),null;case 13:if(qn(Zr),xt=It.memoizedState,Sr&&fs!==null&&It.mode&1&&!(It.flags&128)){for(ut=fs;ut;)ut=ln(ut);return Eo(),It.flags|=98560,It}if(xt!==null&&xt.dehydrated!==null){if(xt=$o(It),ut===null){if(!xt)throw Error(rt(318));if(!tn)throw Error(rt(344));if(ut=It.memoizedState,ut=ut!==null?ut.dehydrated:null,!ut)throw Error(rt(317));nr(ut,It)}else Eo(),!(It.flags&128)&&(It.memoizedState=null),It.flags|=4;return qr(It),null}return _s!==null&&(su(_s),_s=null),It.flags&128?(It.lanes=bt,It):(xt=xt!==null,bt=!1,ut===null?$o(It):bt=ut.memoizedState!==null,xt&&!bt&&(It.child.flags|=8192,It.mode&1&&(ut===null||Zr.current&1?Hr===0&&(Hr=3):au())),It.updateQueue!==null&&(It.flags|=4),qr(It),null);case 4:return Ho(),tA(ut,It),ut===null&&Bn(It.stateNode.containerInfo),qr(It),null;case 10:return Ns(It.type._context),qr(It),null;case 17:return _r(It.type)&&qs(),qr(It),null;case 19:if(qn(Zr),Rt=It.memoizedState,Rt===null)return qr(It),null;if(xt=(It.flags&128)!==0,Ft=Rt.rendering,Ft===null)if(xt)nA(Rt,!1);else{if(Hr!==0||ut!==null&&ut.flags&128)for(ut=It.child;ut!==null;){if(Ft=VA(ut),Ft!==null){for(It.flags|=128,nA(Rt,!1),ut=Ft.updateQueue,ut!==null&&(It.updateQueue=ut,It.flags|=4),It.subtreeFlags=0,ut=bt,xt=It.child;xt!==null;)bt=xt,Rt=ut,bt.flags&=14680066,Ft=bt.alternate,Ft===null?(bt.childLanes=0,bt.lanes=Rt,bt.child=null,bt.subtreeFlags=0,bt.memoizedProps=null,bt.memoizedState=null,bt.updateQueue=null,bt.dependencies=null,bt.stateNode=null):(bt.childLanes=Ft.childLanes,bt.lanes=Ft.lanes,bt.child=Ft.child,bt.subtreeFlags=0,bt.deletions=null,bt.memoizedProps=Ft.memoizedProps,bt.memoizedState=Ft.memoizedState,bt.updateQueue=Ft.updateQueue,bt.type=Ft.type,Rt=Ft.dependencies,bt.dependencies=Rt===null?null:{lanes:Rt.lanes,firstContext:Rt.firstContext}),xt=xt.sibling;return ar(Zr,Zr.current&1|2),It.child}ut=ut.sibling}Rt.tail!==null&&xr()>tu&&(It.flags|=128,xt=!0,nA(Rt,!1),It.lanes=4194304)}else{if(!xt)if(ut=VA(Ft),ut!==null){if(It.flags|=128,xt=!0,ut=ut.updateQueue,ut!==null&&(It.updateQueue=ut,It.flags|=4),nA(Rt,!0),Rt.tail===null&&Rt.tailMode==="hidden"&&!Ft.alternate&&!Sr)return qr(It),null}else 2*xr()-Rt.renderingStartTime>tu&&bt!==1073741824&&(It.flags|=128,xt=!0,nA(Rt,!1),It.lanes=4194304);Rt.isBackwards?(Ft.sibling=It.child,It.child=Ft):(ut=Rt.last,ut!==null?ut.sibling=Ft:It.child=Ft,Rt.last=Ft)}return Rt.tail!==null?(It=Rt.tail,Rt.rendering=It,Rt.tail=It.sibling,Rt.renderingStartTime=xr(),It.sibling=null,ut=Zr.current,ar(Zr,xt?ut&1|2:ut&1),It):(qr(It),null);case 22:case 23:return ou(),xt=It.memoizedState!==null,ut!==null&&ut.memoizedState!==null!==xt&&(It.flags|=8192),xt&&It.mode&1?Vs&1073741824&&(qr(It),gn&&It.subtreeFlags&6&&(It.flags|=8192)):qr(It),null;case 24:return null;case 25:return null}throw Error(rt(156,It.tag))}var UI=st.ReactCurrentOwner,ms=!1;function as(ut,It,bt,xt){It.child=ut===null?xu(It,null,bt,xt):To(It,ut.child,bt,xt)}function qu(ut,It,bt,xt,Rt){bt=bt.render;var Ft=It.ref;return Xr(It,Rt),xt=Wl(ut,It,bt,xt,Ft,Rt),bt=_l(),ut!==null&&!ms?(It.updateQueue=ut.updateQueue,It.flags&=-2053,ut.lanes&=~Rt,$s(ut,It,Rt)):(Sr&&bt&&Il(It),It.flags|=1,as(ut,It,xt,Rt),It.child)}function _d(ut,It,bt,xt,Rt){if(ut===null){var Ft=bt.type;return typeof Ft=="function"&&!Au(Ft)&&Ft.defaultProps===void 0&&bt.compare===null&&bt.defaultProps===void 0?(It.tag=15,It.type=Ft,_h(ut,It,Ft,xt,Rt)):(ut=QA(bt.type,null,xt,It,It.mode,Rt),ut.ref=It.ref,ut.return=It,It.child=ut)}if(Ft=ut.child,!(ut.lanes&Rt)){var Qt=Ft.memoizedProps;if(bt=bt.compare,bt=bt!==null?bt:Io,bt(Qt,xt)&&ut.ref===It.ref)return $s(ut,It,Rt)}return It.flags|=1,ut=lo(Ft,xt),ut.ref=It.ref,ut.return=It,It.child=ut}function _h(ut,It,bt,xt,Rt){if(ut!==null&&Io(ut.memoizedProps,xt)&&ut.ref===It.ref)if(ms=!1,(ut.lanes&Rt)!==0)ut.flags&131072&&(ms=!0);else return It.lanes=ut.lanes,$s(ut,It,Rt);return Hl(ut,It,bt,xt,Rt)}function eI(ut,It,bt){var xt=It.pendingProps,Rt=xt.children,Ft=ut!==null?ut.memoizedState:null;if(xt.mode==="hidden")if(!(It.mode&1))It.memoizedState={baseLanes:0,cachePool:null},ar(Xo,Vs),Vs|=bt;else if(bt&1073741824)It.memoizedState={baseLanes:0,cachePool:null},xt=Ft!==null?Ft.baseLanes:bt,ar(Xo,Vs),Vs|=xt;else return ut=Ft!==null?Ft.baseLanes|bt:bt,It.lanes=It.childLanes=1073741824,It.memoizedState={baseLanes:ut,cachePool:null},It.updateQueue=null,ar(Xo,Vs),Vs|=ut,null;else Ft!==null?(xt=Ft.baseLanes|bt,It.memoizedState=null):xt=bt,ar(Xo,Vs),Vs|=xt;return as(ut,It,Rt,bt),It.child}function tI(ut,It){var bt=It.ref;(ut===null&&bt!==null||ut!==null&&ut.ref!==bt)&&(It.flags|=512,It.flags|=2097152)}function Hl(ut,It,bt,xt,Rt){var Ft=_r(bt)?rs:hr.current;return Ft=hs(It,Ft),Xr(It,Rt),bt=Wl(ut,It,bt,xt,Ft,Rt),xt=_l(),ut!==null&&!ms?(It.updateQueue=ut.updateQueue,It.flags&=-2053,ut.lanes&=~Rt,$s(ut,It,Rt)):(Sr&&xt&&Il(It),It.flags|=1,as(ut,It,bt,Rt),It.child)}function nI(ut,It,bt,xt,Rt){if(_r(bt)){var Ft=!0;Fs(It)}else Ft=!1;if(Xr(It,Rt),It.stateNode===null)ut!==null&&(ut.alternate=null,It.alternate=null,It.flags|=2),fu(It,bt,xt),Al(It,bt,xt,Rt),xt=!0;else if(ut===null){var Qt=It.stateNode,on=It.memoizedProps;Qt.props=on;var xn=Qt.context,Tn=bt.contextType;typeof Tn=="object"&&Tn!==null?Tn=vr(Tn):(Tn=_r(bt)?rs:hr.current,Tn=hs(It,Tn));var Pn=bt.getDerivedStateFromProps,_i=typeof Pn=="function"||typeof Qt.getSnapshotBeforeUpdate=="function";_i||typeof Qt.UNSAFE_componentWillReceiveProps!="function"&&typeof Qt.componentWillReceiveProps!="function"||(on!==xt||xn!==Tn)&&mu(It,Qt,xt,Tn),Ws=!1;var Qn=It.memoizedState;Qt.state=Qn,IA(It,xt,Qt,Rt),xn=It.memoizedState,on!==xt||Qn!==xn||Wr.current||Ws?(typeof Pn=="function"&&(qA(It,bt,Pn,xt),xn=It.memoizedState),(on=Ws||pu(It,bt,on,xt,Qn,xn,Tn))?(_i||typeof Qt.UNSAFE_componentWillMount!="function"&&typeof Qt.componentWillMount!="function"||(typeof Qt.componentWillMount=="function"&&Qt.componentWillMount(),typeof Qt.UNSAFE_componentWillMount=="function"&&Qt.UNSAFE_componentWillMount()),typeof Qt.componentDidMount=="function"&&(It.flags|=4194308)):(typeof Qt.componentDidMount=="function"&&(It.flags|=4194308),It.memoizedProps=xt,It.memoizedState=xn),Qt.props=xt,Qt.state=xn,Qt.context=Tn,xt=on):(typeof Qt.componentDidMount=="function"&&(It.flags|=4194308),xt=!1)}else{Qt=It.stateNode,du(ut,It),on=It.memoizedProps,Tn=It.type===It.elementType?on:Qr(It.type,on),Qt.props=Tn,_i=It.pendingProps,Qn=Qt.context,xn=bt.contextType,typeof xn=="object"&&xn!==null?xn=vr(xn):(xn=_r(bt)?rs:hr.current,xn=hs(It,xn));var Gr=bt.getDerivedStateFromProps;(Pn=typeof Gr=="function"||typeof Qt.getSnapshotBeforeUpdate=="function")||typeof Qt.UNSAFE_componentWillReceiveProps!="function"&&typeof Qt.componentWillReceiveProps!="function"||(on!==_i||Qn!==xn)&&mu(It,Qt,xt,xn),Ws=!1,Qn=It.memoizedState,Qt.state=Qn,IA(It,xt,Qt,Rt);var Jn=It.memoizedState;on!==_i||Qn!==Jn||Wr.current||Ws?(typeof Gr=="function"&&(qA(It,bt,Gr,xt),Jn=It.memoizedState),(Tn=Ws||pu(It,bt,Tn,xt,Qn,Jn,xn)||!1)?(Pn||typeof Qt.UNSAFE_componentWillUpdate!="function"&&typeof Qt.componentWillUpdate!="function"||(typeof Qt.componentWillUpdate=="function"&&Qt.componentWillUpdate(xt,Jn,xn),typeof Qt.UNSAFE_componentWillUpdate=="function"&&Qt.UNSAFE_componentWillUpdate(xt,Jn,xn)),typeof Qt.componentDidUpdate=="function"&&(It.flags|=4),typeof Qt.getSnapshotBeforeUpdate=="function"&&(It.flags|=1024)):(typeof Qt.componentDidUpdate!="function"||on===ut.memoizedProps&&Qn===ut.memoizedState||(It.flags|=4),typeof Qt.getSnapshotBeforeUpdate!="function"||on===ut.memoizedProps&&Qn===ut.memoizedState||(It.flags|=1024),It.memoizedProps=xt,It.memoizedState=Jn),Qt.props=xt,Qt.state=Jn,Qt.context=xn,xt=Tn):(typeof Qt.componentDidUpdate!="function"||on===ut.memoizedProps&&Qn===ut.memoizedState||(It.flags|=4),typeof Qt.getSnapshotBeforeUpdate!="function"||on===ut.memoizedProps&&Qn===ut.memoizedState||(It.flags|=1024),xt=!1)}return Ll(ut,It,bt,xt,Ft,Rt)}function Ll(ut,It,bt,xt,Rt,Ft){tI(ut,It);var Qt=(It.flags&128)!==0;if(!xt&&!Qt)return Rt&&AA(It,bt,!1),$s(ut,It,Ft);xt=It.stateNode,UI.current=It;var on=Qt&&typeof bt.getDerivedStateFromError!="function"?null:xt.render();return It.flags|=1,ut!==null&&Qt?(It.child=To(It,ut.child,null,Ft),It.child=To(It,null,on,Ft)):as(ut,It,on,Ft),It.memoizedState=xt.state,Rt&&AA(It,bt,!0),It.child}function iI(ut){var It=ut.stateNode;It.pendingContext?xo(ut,It.pendingContext,It.pendingContext!==It.context):It.context&&xo(ut,It.context,!1),Bl(ut,It.containerInfo)}function rI(ut,It,bt,xt,Rt){return Eo(),Gl(Rt),It.flags|=256,as(ut,It,bt,xt),It.child}var RA={dehydrated:null,treeContext:null,retryLane:0};function WA(ut){return{baseLanes:ut,cachePool:null}}function sI(ut,It,bt){var xt=It.pendingProps,Rt=Zr.current,Ft=!1,Qt=(It.flags&128)!==0,on;if((on=Qt)||(on=ut!==null&&ut.memoizedState===null?!1:(Rt&2)!==0),on?(Ft=!0,It.flags&=-129):(ut===null||ut.memoizedState!==null)&&(Rt|=1),ar(Zr,Rt&1),ut===null)return yl(It),ut=It.memoizedState,ut!==null&&(ut=ut.dehydrated,ut!==null)?(It.mode&1?wr(ut)?It.lanes=8:It.lanes=1073741824:It.lanes=1,null):(Rt=xt.children,ut=xt.fallback,Ft?(xt=It.mode,Ft=It.child,Rt={mode:"hidden",children:Rt},!(xt&1)&&Ft!==null?(Ft.childLanes=0,Ft.pendingProps=Rt):Ft=jA(Rt,xt,0,null),ut=Bo(ut,xt,bt,null),Ft.return=It,ut.return=It,Ft.sibling=ut,It.child=Ft,It.child.memoizedState=WA(bt),It.memoizedState=RA,ut):Xl(It,Rt));if(Rt=ut.memoizedState,Rt!==null){if(on=Rt.dehydrated,on!==null){if(Qt)return It.flags&256?(It.flags&=-257,_A(ut,It,bt,Error(rt(422)))):It.memoizedState!==null?(It.child=ut.child,It.flags|=128,null):(Ft=xt.fallback,Rt=It.mode,xt=jA({mode:"visible",children:xt.children},Rt,0,null),Ft=Bo(Ft,Rt,bt,null),Ft.flags|=2,xt.return=It,Ft.return=It,xt.sibling=Ft,It.child=xt,It.mode&1&&To(It,ut.child,null,bt),It.child.memoizedState=WA(bt),It.memoizedState=RA,Ft);if(!(It.mode&1))It=_A(ut,It,bt,null);else if(wr(on))It=_A(ut,It,bt,Error(rt(419)));else if(xt=(bt&ut.childLanes)!==0,ms||xt){if(xt=Er,xt!==null){switch(bt&-bt){case 4:Ft=2;break;case 16:Ft=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ft=32;break;case 536870912:Ft=268435456;break;default:Ft=0}xt=Ft&(xt.suspendedLanes|bt)?0:Ft,xt!==0&&xt!==Rt.retryLane&&(Rt.retryLane=xt,Ss(ut,xt,-1))}au(),It=_A(ut,It,bt,Error(rt(421)))}else mr(on)?(It.flags|=128,It.child=ut.child,It=oC.bind(null,ut),Ut(on,It),It=null):(bt=Rt.treeContext,tn&&(fs=Zn(on),ps=It,Sr=!0,_s=null,jo=!1,bt!==null&&(vs[Gs++]=Os,vs[Gs++]=Qs,vs[Gs++]=po,Os=bt.id,Qs=bt.overflow,po=It)),It=Xl(It,It.pendingProps.children),It.flags|=4096);return It}return Ft?(xt=aI(ut,It,xt.children,xt.fallback,bt),Ft=It.child,Rt=ut.child.memoizedState,Ft.memoizedState=Rt===null?WA(bt):{baseLanes:Rt.baseLanes|bt,cachePool:null},Ft.childLanes=ut.childLanes&~bt,It.memoizedState=RA,xt):(bt=oI(ut,It,xt.children,bt),It.memoizedState=null,bt)}return Ft?(xt=aI(ut,It,xt.children,xt.fallback,bt),Ft=It.child,Rt=ut.child.memoizedState,Ft.memoizedState=Rt===null?WA(bt):{baseLanes:Rt.baseLanes|bt,cachePool:null},Ft.childLanes=ut.childLanes&~bt,It.memoizedState=RA,xt):(bt=oI(ut,It,xt.children,bt),It.memoizedState=null,bt)}function Xl(ut,It){return It=jA({mode:"visible",children:It},ut.mode,0,null),It.return=ut,ut.child=It}function oI(ut,It,bt,xt){var Rt=ut.child;return ut=Rt.sibling,bt=lo(Rt,{mode:"visible",children:bt}),!(It.mode&1)&&(bt.lanes=xt),bt.return=It,bt.sibling=null,ut!==null&&(xt=It.deletions,xt===null?(It.deletions=[ut],It.flags|=16):xt.push(ut)),It.child=bt}function aI(ut,It,bt,xt,Rt){var Ft=It.mode;ut=ut.child;var Qt=ut.sibling,on={mode:"hidden",children:bt};return!(Ft&1)&&It.child!==ut?(bt=It.child,bt.childLanes=0,bt.pendingProps=on,It.deletions=null):(bt=lo(ut,on),bt.subtreeFlags=ut.subtreeFlags&14680064),Qt!==null?xt=lo(Qt,xt):(xt=Bo(xt,Ft,Rt,null),xt.flags|=2),xt.return=It,bt.return=It,bt.sibling=xt,It.child=bt,xt}function _A(ut,It,bt,xt){return xt!==null&&Gl(xt),To(It,ut.child,null,bt),ut=Xl(It,It.pendingProps.children),ut.flags|=2,It.memoizedState=null,ut}function AI(ut,It,bt){ut.lanes|=It;var xt=ut.alternate;xt!==null&&(xt.lanes|=It),kr(ut.return,It,bt)}function Yl(ut,It,bt,xt,Rt){var Ft=ut.memoizedState;Ft===null?ut.memoizedState={isBackwards:It,rendering:null,renderingStartTime:0,last:xt,tail:bt,tailMode:Rt}:(Ft.isBackwards=It,Ft.rendering=null,Ft.renderingStartTime=0,Ft.last=xt,Ft.tail=bt,Ft.tailMode=Rt)}function lI(ut,It,bt){var xt=It.pendingProps,Rt=xt.revealOrder,Ft=xt.tail;if(as(ut,It,xt.children,bt),xt=Zr.current,xt&2)xt=xt&1|2,It.flags|=128;else{if(ut!==null&&ut.flags&128)e:for(ut=It.child;ut!==null;){if(ut.tag===13)ut.memoizedState!==null&&AI(ut,bt,It);else if(ut.tag===19)AI(ut,bt,It);else if(ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===It)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===It)break e;ut=ut.return}ut.sibling.return=ut.return,ut=ut.sibling}xt&=1}if(ar(Zr,xt),!(It.mode&1))It.memoizedState=null;else switch(Rt){case"forwards":for(bt=It.child,Rt=null;bt!==null;)ut=bt.alternate,ut!==null&&VA(ut)===null&&(Rt=bt),bt=bt.sibling;bt=Rt,bt===null?(Rt=It.child,It.child=null):(Rt=bt.sibling,bt.sibling=null),Yl(It,!1,Rt,bt,Ft);break;case"backwards":for(bt=null,Rt=It.child,It.child=null;Rt!==null;){if(ut=Rt.alternate,ut!==null&&VA(ut)===null){It.child=Rt;break}ut=Rt.sibling,Rt.sibling=bt,bt=Rt,Rt=ut}Yl(It,!0,bt,null,Ft);break;case"together":Yl(It,!1,null,null,void 0);break;default:It.memoizedState=null}return It.child}function $s(ut,It,bt){if(ut!==null&&(It.dependencies=ut.dependencies),Yo|=It.lanes,!(bt&It.childLanes))return null;if(ut!==null&&It.child!==ut.child)throw Error(rt(153));if(It.child!==null){for(ut=It.child,bt=lo(ut,ut.pendingProps),It.child=bt,bt.return=It;ut.sibling!==null;)ut=ut.sibling,bt=bt.sibling=lo(ut,ut.pendingProps),bt.return=It;bt.sibling=null}return It.child}function JI(ut,It,bt){switch(It.tag){case 3:iI(It),Eo();break;case 5:Su(It);break;case 1:_r(It.type)&&Fs(It);break;case 4:Bl(It,It.stateNode.containerInfo);break;case 10:dA(It,It.type._context,It.memoizedProps.value);break;case 13:var xt=It.memoizedState;if(xt!==null)return xt.dehydrated!==null?(ar(Zr,Zr.current&1),It.flags|=128,null):bt&It.child.childLanes?sI(ut,It,bt):(ar(Zr,Zr.current&1),ut=$s(ut,It,bt),ut!==null?ut.sibling:null);ar(Zr,Zr.current&1);break;case 19:if(xt=(bt&It.childLanes)!==0,ut.flags&128){if(xt)return lI(ut,It,bt);It.flags|=128}var Rt=It.memoizedState;if(Rt!==null&&(Rt.rendering=null,Rt.tail=null,Rt.lastEffect=null),ar(Zr,Zr.current),xt)break;return null;case 22:case 23:return It.lanes=0,eI(ut,It,bt)}return $s(ut,It,bt)}function OI(ut,It){switch(Cl(It),It.tag){case 1:return _r(It.type)&&qs(),ut=It.flags,ut&65536?(It.flags=ut&-65537|128,It):null;case 3:return Ho(),qn(Wr),qn(hr),Zl(),ut=It.flags,ut&65536&&!(ut&128)?(It.flags=ut&-65537|128,It):null;case 5:return xl(It),null;case 13:if(qn(Zr),ut=It.memoizedState,ut!==null&&ut.dehydrated!==null){if(It.alternate===null)throw Error(rt(340));Eo()}return ut=It.flags,ut&65536?(It.flags=ut&-65537|128,It):null;case 19:return qn(Zr),null;case 4:return Ho(),null;case 10:return Ns(It.type._context),null;case 22:case 23:return ou(),null;case 24:return null;default:return null}}var MA=!1,Vo=!1,QI=typeof WeakSet=="function"?WeakSet:Set,Xn=null;function FA(ut,It){var bt=ut.ref;if(bt!==null)if(typeof bt=="function")try{bt(null)}catch(xt){us(ut,It,xt)}else bt.current=null}function Kl(ut,It,bt){try{bt()}catch(xt){us(ut,It,xt)}}var gI=!1;function jI(ut,It){for(Zt(ut.containerInfo),Xn=It;Xn!==null;)if(ut=Xn,It=ut.child,(ut.subtreeFlags&1028)!==0&&It!==null)It.return=ut,Xn=It;else for(;Xn!==null;){ut=Xn;try{var bt=ut.alternate;if(ut.flags&1024)switch(ut.tag){case 0:case 11:case 15:break;case 1:if(bt!==null){var xt=bt.memoizedProps,Rt=bt.memoizedState,Ft=ut.stateNode,Qt=Ft.getSnapshotBeforeUpdate(ut.elementType===ut.type?xt:Qr(ut.type,xt),Rt);Ft.__reactInternalSnapshotBeforeUpdate=Qt}break;case 3:gn&&Ln(ut.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(on){us(ut,ut.return,on)}if(It=ut.sibling,It!==null){It.return=ut.return,Xn=It;break}Xn=ut.return}return bt=gI,gI=!1,bt}function yo(ut,It,bt){var xt=It.updateQueue;if(xt=xt!==null?xt.lastEffect:null,xt!==null){var Rt=xt=xt.next;do{if((Rt.tag&ut)===ut){var Ft=Rt.destroy;Rt.destroy=void 0,Ft!==void 0&&Kl(It,bt,Ft)}Rt=Rt.next}while(Rt!==xt)}}function iA(ut,It){if(It=It.updateQueue,It=It!==null?It.lastEffect:null,It!==null){var bt=It=It.next;do{if((bt.tag&ut)===ut){var xt=bt.create;bt.destroy=xt()}bt=bt.next}while(bt!==It)}}function zl(ut){var It=ut.ref;if(It!==null){var bt=ut.stateNode;switch(ut.tag){case 5:ut=_t(bt);break;default:ut=bt}typeof It=="function"?It(ut):It.current=ut}}function cI(ut,It,bt){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(no,It)}catch{}switch(It.tag){case 0:case 11:case 14:case 15:if(ut=It.updateQueue,ut!==null&&(ut=ut.lastEffect,ut!==null)){var xt=ut=ut.next;do{var Rt=xt,Ft=Rt.destroy;Rt=Rt.tag,Ft!==void 0&&(Rt&2||Rt&4)&&Kl(It,bt,Ft),xt=xt.next}while(xt!==ut)}break;case 1:if(FA(It,bt),ut=It.stateNode,typeof ut.componentWillUnmount=="function")try{ut.props=It.memoizedProps,ut.state=It.memoizedState,ut.componentWillUnmount()}catch(Qt){us(It,bt,Qt)}break;case 5:FA(It,bt);break;case 4:gn?pI(ut,It,bt):$t&&$t&&(It=It.stateNode.containerInfo,bt=tr(It),Ir(It,bt))}}function uI(ut,It,bt){for(var xt=It;;)if(cI(ut,xt,bt),xt.child===null||gn&&xt.tag===4){if(xt===It)break;for(;xt.sibling===null;){if(xt.return===null||xt.return===It)return;xt=xt.return}xt.sibling.return=xt.return,xt=xt.sibling}else xt.child.return=xt,xt=xt.child}function dI(ut){var It=ut.alternate;It!==null&&(ut.alternate=null,dI(It)),ut.child=null,ut.deletions=null,ut.sibling=null,ut.tag===5&&(It=ut.stateNode,It!==null&&kn(It)),ut.stateNode=null,ut.return=null,ut.dependencies=null,ut.memoizedProps=null,ut.memoizedState=null,ut.pendingProps=null,ut.stateNode=null,ut.updateQueue=null}function hI(ut){return ut.tag===5||ut.tag===3||ut.tag===4}function II(ut){e:for(;;){for(;ut.sibling===null;){if(ut.return===null||hI(ut.return))return null;ut=ut.return}for(ut.sibling.return=ut.return,ut=ut.sibling;ut.tag!==5&&ut.tag!==6&&ut.tag!==18;){if(ut.flags&2||ut.child===null||ut.tag===4)continue e;ut.child.return=ut,ut=ut.child}if(!(ut.flags&2))return ut.stateNode}}function CI(ut){if(gn){e:{for(var It=ut.return;It!==null;){if(hI(It))break e;It=It.return}throw Error(rt(160))}var bt=It;switch(bt.tag){case 5:It=bt.stateNode,bt.flags&32&&(Dn(It),bt.flags&=-33),bt=II(ut),Dl(ut,bt,It);break;case 3:case 4:It=bt.stateNode.containerInfo,bt=II(ut),Pl(ut,bt,It);break;default:throw Error(rt(161))}}}function Pl(ut,It,bt){var xt=ut.tag;if(xt===5||xt===6)ut=ut.stateNode,It?yn(bt,ut,It):_n(bt,ut);else if(xt!==4&&(ut=ut.child,ut!==null))for(Pl(ut,It,bt),ut=ut.sibling;ut!==null;)Pl(ut,It,bt),ut=ut.sibling}function Dl(ut,It,bt){var xt=ut.tag;if(xt===5||xt===6)ut=ut.stateNode,It?cn(bt,ut,It):Fn(bt,ut);else if(xt!==4&&(ut=ut.child,ut!==null))for(Dl(ut,It,bt),ut=ut.sibling;ut!==null;)Dl(ut,It,bt),ut=ut.sibling}function pI(ut,It,bt){for(var xt=It,Rt=!1,Ft,Qt;;){if(!Rt){Rt=xt.return;e:for(;;){if(Rt===null)throw Error(rt(160));switch(Ft=Rt.stateNode,Rt.tag){case 5:Qt=!1;break e;case 3:Ft=Ft.containerInfo,Qt=!0;break e;case 4:Ft=Ft.containerInfo,Qt=!0;break e}Rt=Rt.return}Rt=!0}if(xt.tag===5||xt.tag===6)uI(ut,xt,bt),Qt?En(Ft,xt.stateNode):bn(Ft,xt.stateNode);else if(xt.tag===18)Qt?Br(Ft,xt.stateNode):lr(Ft,xt.stateNode);else if(xt.tag===4){if(xt.child!==null){Ft=xt.stateNode.containerInfo,Qt=!0,xt.child.return=xt,xt=xt.child;continue}}else if(cI(ut,xt,bt),xt.child!==null){xt.child.return=xt,xt=xt.child;continue}if(xt===It)break;for(;xt.sibling===null;){if(xt.return===null||xt.return===It)return;xt=xt.return,xt.tag===4&&(Rt=!1)}xt.sibling.return=xt.return,xt=xt.sibling}}function Ul(ut,It){if(gn){switch(It.tag){case 0:case 11:case 14:case 15:yo(3,It,It.return),iA(3,It),yo(5,It,It.return);return;case 1:return;case 5:var bt=It.stateNode;if(bt!=null){var xt=It.memoizedProps;ut=ut!==null?ut.memoizedProps:xt;var Rt=It.type,Ft=It.updateQueue;It.updateQueue=null,Ft!==null&&jt(bt,Ft,Rt,ut,xt,It)}return;case 6:if(It.stateNode===null)throw Error(rt(162));bt=It.memoizedProps,fn(It.stateNode,ut!==null?ut.memoizedProps:bt,bt);return;case 3:tn&&ut!==null&&ut.memoizedState.isDehydrated&&rr(It.stateNode.containerInfo);return;case 12:return;case 13:kA(It);return;case 19:kA(It);return;case 17:return}throw Error(rt(163))}switch(It.tag){case 0:case 11:case 14:case 15:yo(3,It,It.return),iA(3,It),yo(5,It,It.return);return;case 12:return;case 13:kA(It);return;case 19:kA(It);return;case 3:tn&&ut!==null&&ut.memoizedState.isDehydrated&&rr(It.stateNode.containerInfo);break;case 22:case 23:return}e:if($t){switch(It.tag){case 1:case 5:case 6:break e;case 3:case 4:It=It.stateNode,Ir(It.containerInfo,It.pendingChildren);break e}throw Error(rt(163))}}function kA(ut){var It=ut.updateQueue;if(It!==null){ut.updateQueue=null;var bt=ut.stateNode;bt===null&&(bt=ut.stateNode=new QI),It.forEach(function(xt){var Rt=aC.bind(null,ut,xt);bt.has(xt)||(bt.add(xt),xt.then(Rt,Rt))})}}function $I(ut,It){for(Xn=It;Xn!==null;){It=Xn;var bt=It.deletions;if(bt!==null)for(var xt=0;xt<bt.length;xt++){var Rt=bt[xt];try{var Ft=ut;gn?pI(Ft,Rt,It):uI(Ft,Rt,It);var Qt=Rt.alternate;Qt!==null&&(Qt.return=null),Rt.return=null}catch(Un){us(Rt,It,Un)}}if(bt=It.child,It.subtreeFlags&12854&&bt!==null)bt.return=It,Xn=bt;else for(;Xn!==null;){It=Xn;try{var on=It.flags;if(on&32&&gn&&Dn(It.stateNode),on&512){var xn=It.alternate;if(xn!==null){var Tn=xn.ref;Tn!==null&&(typeof Tn=="function"?Tn(null):Tn.current=null)}}if(on&8192)switch(It.tag){case 13:if(It.memoizedState!==null){var Pn=It.alternate;(Pn===null||Pn.memoizedState===null)&&(eu=xr())}break;case 22:var _i=It.memoizedState!==null,Qn=It.alternate,Gr=Qn!==null&&Qn.memoizedState!==null;if(bt=It,gn){e:if(xt=bt,Rt=_i,Ft=null,gn)for(var Jn=xt;;){if(Jn.tag===5){if(Ft===null){Ft=Jn;var es=Jn.stateNode;Rt?jn(es):hn(Jn.stateNode,Jn.memoizedProps)}}else if(Jn.tag===6){if(Ft===null){var Zs=Jn.stateNode;Rt?qt(Zs):Wn(Zs,Jn.memoizedProps)}}else if((Jn.tag!==22&&Jn.tag!==23||Jn.memoizedState===null||Jn===xt)&&Jn.child!==null){Jn.child.return=Jn,Jn=Jn.child;continue}if(Jn===xt)break;for(;Jn.sibling===null;){if(Jn.return===null||Jn.return===xt)break e;Ft===Jn&&(Ft=null),Jn=Jn.return}Ft===Jn&&(Ft=null),Jn.sibling.return=Jn.return,Jn=Jn.sibling}}if(_i&&!Gr&&bt.mode&1){Xn=bt;for(var Cn=bt.child;Cn!==null;){for(bt=Xn=Cn;Xn!==null;){xt=Xn;var an=xt.child;switch(xt.tag){case 0:case 11:case 14:case 15:yo(4,xt,xt.return);break;case 1:FA(xt,xt.return);var vn=xt.stateNode;if(typeof vn.componentWillUnmount=="function"){var Yn=xt.return;try{vn.props=xt.memoizedProps,vn.state=xt.memoizedState,vn.componentWillUnmount()}catch(Un){us(xt,Yn,Un)}}break;case 5:FA(xt,xt.return);break;case 22:if(xt.memoizedState!==null){VI(bt);continue}}an!==null?(an.return=xt,Xn=an):VI(bt)}Cn=Cn.sibling}}}switch(on&4102){case 2:CI(It),It.flags&=-3;break;case 6:CI(It),It.flags&=-3,Ul(It.alternate,It);break;case 4096:It.flags&=-4097;break;case 4100:It.flags&=-4097,Ul(It.alternate,It);break;case 4:Ul(It.alternate,It)}}catch(Un){us(It,It.return,Un)}if(bt=It.sibling,bt!==null){bt.return=It.return,Xn=bt;break}Xn=It.return}}}function qI(ut,It,bt){Xn=ut,fI(ut)}function fI(ut,It,bt){for(var xt=(ut.mode&1)!==0;Xn!==null;){var Rt=Xn,Ft=Rt.child;if(Rt.tag===22&&xt){var Qt=Rt.memoizedState!==null||MA;if(!Qt){var on=Rt.alternate,xn=on!==null&&on.memoizedState!==null||Vo;on=MA;var Tn=Vo;if(MA=Qt,(Vo=xn)&&!Tn)for(Xn=Rt;Xn!==null;)Qt=Xn,xn=Qt.child,Qt.tag===22&&Qt.memoizedState!==null?yI(Rt):xn!==null?(xn.return=Qt,Xn=xn):yI(Rt);for(;Ft!==null;)Xn=Ft,fI(Ft),Ft=Ft.sibling;Xn=Rt,MA=on,Vo=Tn}mI(ut)}else Rt.subtreeFlags&8772&&Ft!==null?(Ft.return=Rt,Xn=Ft):mI(ut)}}function mI(ut){for(;Xn!==null;){var It=Xn;if(It.flags&8772){var bt=It.alternate;try{if(It.flags&8772)switch(It.tag){case 0:case 11:case 15:Vo||iA(5,It);break;case 1:var xt=It.stateNode;if(It.flags&4&&!Vo)if(bt===null)xt.componentDidMount();else{var Rt=It.elementType===It.type?bt.memoizedProps:Qr(It.type,bt.memoizedProps);xt.componentDidUpdate(Rt,bt.memoizedState,xt.__reactInternalSnapshotBeforeUpdate)}var Ft=It.updateQueue;Ft!==null&&Iu(It,Ft,xt);break;case 3:var Qt=It.updateQueue;if(Qt!==null){if(bt=null,It.child!==null)switch(It.child.tag){case 5:bt=_t(It.child.stateNode);break;case 1:bt=It.child.stateNode}Iu(It,Qt,bt)}break;case 5:var on=It.stateNode;bt===null&&It.flags&4&&Nn(on,It.type,It.memoizedProps,It);break;case 6:break;case 4:break;case 12:break;case 13:if(tn&&It.memoizedState===null){var xn=It.alternate;if(xn!==null){var Tn=xn.memoizedState;if(Tn!==null){var Pn=Tn.dehydrated;Pn!==null&&sr(Pn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(rt(163))}Vo||It.flags&512&&zl(It)}catch(_i){us(It,It.return,_i)}}if(It===ut){Xn=null;break}if(bt=It.sibling,bt!==null){bt.return=It.return,Xn=bt;break}Xn=It.return}}function VI(ut){for(;Xn!==null;){var It=Xn;if(It===ut){Xn=null;break}var bt=It.sibling;if(bt!==null){bt.return=It.return,Xn=bt;break}Xn=It.return}}function yI(ut){for(;Xn!==null;){var It=Xn;try{switch(It.tag){case 0:case 11:case 15:var bt=It.return;try{iA(4,It)}catch(xn){us(It,bt,xn)}break;case 1:var xt=It.stateNode;if(typeof xt.componentDidMount=="function"){var Rt=It.return;try{xt.componentDidMount()}catch(xn){us(It,Rt,xn)}}var Ft=It.return;try{zl(It)}catch(xn){us(It,Ft,xn)}break;case 5:var Qt=It.return;try{zl(It)}catch(xn){us(It,Qt,xn)}}}catch(xn){us(It,It.return,xn)}if(It===ut){Xn=null;break}var on=It.sibling;if(on!==null){on.return=It.return,Xn=on;break}Xn=It.return}}var EA=0,TA=1,NA=2,HA=3,LA=4;if(typeof Symbol=="function"&&Symbol.for){var rA=Symbol.for;EA=rA("selector.component"),TA=rA("selector.has_pseudo_class"),NA=rA("selector.role"),HA=rA("selector.test_id"),LA=rA("selector.text")}function Jl(ut){var It=nn(ut);if(It!=null){if(typeof It.memoizedProps["data-testname"]!="string")throw Error(rt(364));return It}if(ut=In(ut),ut===null)throw Error(rt(362));return ut.stateNode.current}function Ol(ut,It){switch(It.$$typeof){case EA:if(ut.type===It.value)return!0;break;case TA:e:{It=It.value,ut=[ut,0];for(var bt=0;bt<ut.length;){var xt=ut[bt++],Rt=ut[bt++],Ft=It[Rt];if(xt.tag!==5||!en(xt)){for(;Ft!=null&&Ol(xt,Ft);)Rt++,Ft=It[Rt];if(Rt===It.length){It=!0;break e}else for(xt=xt.child;xt!==null;)ut.push(xt,Rt),xt=xt.sibling}}It=!1}return It;case NA:if(ut.tag===5&&un(ut.stateNode,It.value))return!0;break;case LA:if((ut.tag===5||ut.tag===6)&&(ut=Kt(ut),ut!==null&&0<=ut.indexOf(It.value)))return!0;break;case HA:if(ut.tag===5&&(ut=ut.memoizedProps["data-testname"],typeof ut=="string"&&ut.toLowerCase()===It.value.toLowerCase()))return!0;break;default:throw Error(rt(365))}return!1}function Ql(ut){switch(ut.$$typeof){case EA:return"<"+(Bt(ut.value)||"Unknown")+">";case TA:return":has("+(Ql(ut)||"")+")";case NA:return'[role="'+ut.value+'"]';case LA:return'"'+ut.value+'"';case HA:return'[data-testname="'+ut.value+'"]';default:throw Error(rt(365))}}function bI(ut,It){var bt=[];ut=[ut,0];for(var xt=0;xt<ut.length;){var Rt=ut[xt++],Ft=ut[xt++],Qt=It[Ft];if(Rt.tag!==5||!en(Rt)){for(;Qt!=null&&Ol(Rt,Qt);)Ft++,Qt=It[Ft];if(Ft===It.length)bt.push(Rt);else for(Rt=Rt.child;Rt!==null;)ut.push(Rt,Ft),Rt=Rt.sibling}}return bt}function $l(ut,It){if(!Mn)throw Error(rt(363));ut=Jl(ut),ut=bI(ut,It),It=[],ut=Array.from(ut);for(var bt=0;bt<ut.length;){var xt=ut[bt++];if(xt.tag===5)en(xt)||It.push(xt.stateNode);else for(xt=xt.child;xt!==null;)ut.push(xt),xt=xt.sibling}return It}var eC=Math.ceil,XA=st.ReactCurrentDispatcher,_g=st.ReactCurrentOwner,Mr=st.ReactCurrentBatchConfig,Ar=0,Er=null,Tr=null,Ur=0,Vs=0,Xo=Dr(0),Hr=0,sA=null,Yo=0,YA=0,_c=0,oA=null,gs=null,eu=0,tu=1/0;function Ko(){tu=xr()+500}var KA=!1,nu=null,so=null,zA=!1,oo=null,PA=0,aA=0,iu=null,DA=-1,UA=0;function As(){return Ar&6?xr():DA!==-1?DA:DA=xr()}function ao(ut){return ut.mode&1?Ar&2&&Ur!==0?Ur&-Ur:ho.transition!==null?(UA===0&&(ut=Ks,Ks<<=1,!(Ks&4194240)&&(Ks=64),UA=ut),UA):(ut=gr,ut!==0?ut:Gn()):1}function Ss(ut,It,bt){if(50<aA)throw aA=0,iu=null,Error(rt(185));var xt=JA(ut,It);return xt===null?null:(ks(xt,It,bt),(!(Ar&2)||xt!==Er)&&(xt===Er&&(!(Ar&2)&&(YA|=It),Hr===4&&Ao(xt,Ur)),cs(xt,bt),It===1&&Ar===0&&!(ut.mode&1)&&(Ko(),Ts&&ls())),xt)}function JA(ut,It){ut.lanes|=It;var bt=ut.alternate;for(bt!==null&&(bt.lanes|=It),bt=ut,ut=ut.return;ut!==null;)ut.childLanes|=It,bt=ut.alternate,bt!==null&&(bt.childLanes|=It),bt=ut,ut=ut.return;return bt.tag===3?bt.stateNode:null}function cs(ut,It){var bt=ut.callbackNode;zo(ut,It);var xt=uo(ut,ut===Er?Ur:0);if(xt===0)bt!==null&&Ro(bt),ut.callbackNode=null,ut.callbackPriority=0;else if(It=xt&-xt,ut.callbackPriority!==It){if(bt!=null&&Ro(bt),It===1)ut.tag===0?Qo(GI.bind(null,ut)):Oo(GI.bind(null,ut)),pn?Rn(function(){Ar===0&&ls()}):Us(to,ls),bt=null;else{switch(Po(xt)){case 1:bt=to;break;case 4:bt=uA;break;case 16:bt=ss;break;case 536870912:bt=Uo;break;default:bt=ss}bt=MI(bt,vI.bind(null,ut))}ut.callbackPriority=It,ut.callbackNode=bt}}function vI(ut,It){if(DA=-1,UA=0,Ar&6)throw Error(rt(327));var bt=ut.callbackNode;if(Go()&&ut.callbackNode!==bt)return null;var xt=uo(ut,ut===Er?Ur:0);if(xt===0)return null;if(xt&30||xt&ut.expiredLanes||It)It=OA(ut,xt);else{It=xt;var Rt=Ar;Ar|=2;var Ft=SI();(Er!==ut||Ur!==It)&&(Ko(),bo(ut,It));do try{iC();break}catch(on){xI(ut,on)}while(1);Mo(),XA.current=Ft,Ar=Rt,Tr!==null?It=0:(Er=null,Ur=0,It=Hr)}if(It!==0){if(It===2&&(Rt=Ds(ut),Rt!==0&&(xt=Rt,It=ru(ut,Rt))),It===1)throw bt=sA,bo(ut,0),Ao(ut,xt),cs(ut,xr()),bt;if(It===6)Ao(ut,xt);else{if(Rt=ut.current.alternate,!(xt&30)&&!tC(Rt)&&(It=OA(ut,xt),It===2&&(Ft=Ds(ut),Ft!==0&&(xt=Ft,It=ru(ut,Ft))),It===1))throw bt=sA,bo(ut,0),Ao(ut,xt),cs(ut,xr()),bt;switch(ut.finishedWork=Rt,ut.finishedLanes=xt,It){case 0:case 1:throw Error(rt(345));case 2:vo(ut,gs);break;case 3:if(Ao(ut,xt),(xt&130023424)===xt&&(It=eu+500-xr(),10<It)){if(uo(ut,0)!==0)break;if(Rt=ut.suspendedLanes,(Rt&xt)!==xt){As(),ut.pingedLanes|=ut.suspendedLanes&Rt;break}ut.timeoutHandle=rn(vo.bind(null,ut,gs),It);break}vo(ut,gs);break;case 4:if(Ao(ut,xt),(xt&4194240)===xt)break;for(It=ut.eventTimes,Rt=-1;0<xt;){var Qt=31-Or(xt);Ft=1<<Qt,Qt=It[Qt],Qt>Rt&&(Rt=Qt),xt&=~Ft}if(xt=Rt,xt=xr()-xt,xt=(120>xt?120:480>xt?480:1080>xt?1080:1920>xt?1920:3e3>xt?3e3:4320>xt?4320:1960*eC(xt/1960))-xt,10<xt){ut.timeoutHandle=rn(vo.bind(null,ut,gs),xt);break}vo(ut,gs);break;case 5:vo(ut,gs);break;default:throw Error(rt(329))}}}return cs(ut,xr()),ut.callbackNode===bt?vI.bind(null,ut):null}function ru(ut,It){var bt=oA;return ut.current.memoizedState.isDehydrated&&(bo(ut,It).flags|=256),ut=OA(ut,It),ut!==2&&(It=gs,gs=bt,It!==null&&su(It)),ut}function su(ut){gs===null?gs=ut:gs.push.apply(gs,ut)}function tC(ut){for(var It=ut;;){if(It.flags&16384){var bt=It.updateQueue;if(bt!==null&&(bt=bt.stores,bt!==null))for(var xt=0;xt<bt.length;xt++){var Rt=bt[xt],Ft=Rt.getSnapshot;Rt=Rt.value;try{if(!Cs(Ft(),Rt))return!1}catch{return!1}}}if(bt=It.child,It.subtreeFlags&16384&&bt!==null)bt.return=It,It=bt;else{if(It===ut)break;for(;It.sibling===null;){if(It.return===null||It.return===ut)return!0;It=It.return}It.sibling.return=It.return,It=It.sibling}}return!0}function Ao(ut,It){for(It&=~_c,It&=~YA,ut.suspendedLanes|=It,ut.pingedLanes&=~It,ut=ut.expirationTimes;0<It;){var bt=31-Or(It),xt=1<<bt;ut[bt]=-1,It&=~xt}}function GI(ut){if(Ar&6)throw Error(rt(327));Go();var It=uo(ut,0);if(!(It&1))return cs(ut,xr()),null;var bt=OA(ut,It);if(ut.tag!==0&&bt===2){var xt=Ds(ut);xt!==0&&(It=xt,bt=ru(ut,xt))}if(bt===1)throw bt=sA,bo(ut,0),Ao(ut,It),cs(ut,xr()),bt;if(bt===6)throw Error(rt(345));return ut.finishedWork=ut.current.alternate,ut.finishedLanes=It,vo(ut,gs),cs(ut,xr()),null}function BI(ut){oo!==null&&oo.tag===0&&!(Ar&6)&&Go();var It=Ar;Ar|=1;var bt=Mr.transition,xt=gr;try{if(Mr.transition=null,gr=1,ut)return ut()}finally{gr=xt,Mr.transition=bt,Ar=It,!(Ar&6)&&ls()}}function ou(){Vs=Xo.current,qn(Xo)}function bo(ut,It){ut.finishedWork=null,ut.finishedLanes=0;var bt=ut.timeoutHandle;if(bt!==Vn&&(ut.timeoutHandle=Vn,sn(bt)),Tr!==null)for(bt=Tr.return;bt!==null;){var xt=bt;switch(Cl(xt),xt.tag){case 1:xt=xt.type.childContextTypes,xt!=null&&qs();break;case 3:Ho(),qn(Wr),qn(hr),Zl();break;case 5:xl(xt);break;case 4:Ho();break;case 13:qn(Zr);break;case 19:qn(Zr);break;case 10:Ns(xt.type._context);break;case 22:case 23:ou()}bt=bt.return}if(Er=ut,Tr=ut=lo(ut.current,null),Ur=Vs=It,Hr=0,sA=null,_c=YA=Yo=0,gs=oA=null,Nr!==null){for(It=0;It<Nr.length;It++)if(bt=Nr[It],xt=bt.interleaved,xt!==null){bt.interleaved=null;var Rt=xt.next,Ft=bt.pending;if(Ft!==null){var Qt=Ft.next;Ft.next=Rt,xt.next=Qt}bt.pending=xt}Nr=null}return ut}function xI(ut,It){do{var bt=Tr;try{if(Mo(),yA.current=SA,bA){for(var xt=Rr.memoizedState;xt!==null;){var Rt=xt.queue;Rt!==null&&(Rt.pending=null),xt=xt.next}bA=!1}if(Lo=0,Yr=jr=Rr=null,ba=!1,xa=0,_g.current=null,bt===null||bt.return===null){Hr=1,sA=It,Tr=null;break}e:{var Ft=ut,Qt=bt.return,on=bt,xn=It;if(It=Ur,on.flags|=32768,xn!==null&&typeof xn=="object"&&typeof xn.then=="function"){var Tn=xn,Pn=on,_i=Pn.tag;if(!(Pn.mode&1)&&(_i===0||_i===11||_i===15)){var Qn=Pn.alternate;Qn?(Pn.updateQueue=Qn.updateQueue,Pn.memoizedState=Qn.memoizedState,Pn.lanes=Qn.lanes):(Pn.updateQueue=null,Pn.memoizedState=null)}var Gr=Ou(Qt);if(Gr!==null){Gr.flags&=-257,Qu(Gr,Qt,on,Ft,It),Gr.mode&1&&Ju(Ft,Tn,It),It=Gr,xn=Tn;var Jn=It.updateQueue;if(Jn===null){var es=new Set;es.add(xn),It.updateQueue=es}else Jn.add(xn);break e}else{if(!(It&1)){Ju(Ft,Tn,It),au();break e}xn=Error(rt(426))}}else if(Sr&&on.mode&1){var Zs=Ou(Qt);if(Zs!==null){!(Zs.flags&65536)&&(Zs.flags|=256),Qu(Zs,Qt,on,Ft,It),Gl(xn);break e}}Ft=xn,Hr!==4&&(Hr=2),oA===null?oA=[Ft]:oA.push(Ft),xn=Tl(xn,on),on=Qt;do{switch(on.tag){case 3:on.flags|=65536,It&=-It,on.lanes|=It;var Cn=Du(on,xn,It);hu(on,Cn);break e;case 1:Ft=xn;var an=on.type,vn=on.stateNode;if(!(on.flags&128)&&(typeof an.getDerivedStateFromError=="function"||vn!==null&&typeof vn.componentDidCatch=="function"&&(so===null||!so.has(vn)))){on.flags|=65536,It&=-It,on.lanes|=It;var Yn=Uu(on,Ft,It);hu(on,Yn);break e}}on=on.return}while(on!==null)}ZI(bt)}catch(Un){It=Un,Tr===bt&&bt!==null&&(Tr=bt=bt.return);continue}break}while(1)}function SI(){var ut=XA.current;return XA.current=SA,ut===null?SA:ut}function au(){(Hr===0||Hr===3||Hr===2)&&(Hr=4),Er===null||!(Yo&268435455)&&!(YA&268435455)||Ao(Er,Ur)}function OA(ut,It){var bt=Ar;Ar|=2;var xt=SI();Er===ut&&Ur===It||bo(ut,It);do try{nC();break}catch(Rt){xI(ut,Rt)}while(1);if(Mo(),Ar=bt,XA.current=xt,Tr!==null)throw Error(rt(261));return Er=null,Ur=0,Hr}function nC(){for(;Tr!==null;)wI(Tr)}function iC(){for(;Tr!==null&&!Do();)wI(Tr)}function wI(ut){var It=_I(ut.alternate,ut,Vs);ut.memoizedProps=ut.pendingProps,It===null?ZI(ut):Tr=It,_g.current=null}function ZI(ut){var It=ut;do{var bt=It.alternate;if(ut=It.return,It.flags&32768){if(bt=OI(bt,It),bt!==null){bt.flags&=32767,Tr=bt;return}if(ut!==null)ut.flags|=32768,ut.subtreeFlags=0,ut.deletions=null;else{Hr=6,Tr=null;return}}else if(bt=DI(bt,It,Vs),bt!==null){Tr=bt;return}if(It=It.sibling,It!==null){Tr=It;return}Tr=It=ut}while(It!==null);Hr===0&&(Hr=5)}function vo(ut,It){var bt=gr,xt=Mr.transition;try{Mr.transition=null,gr=1,rC(ut,It,bt)}finally{Mr.transition=xt,gr=bt}return null}function rC(ut,It,bt){do Go();while(oo!==null);if(Ar&6)throw Error(rt(327));var xt=ut.finishedWork,Rt=ut.finishedLanes;if(xt===null)return null;if(ut.finishedWork=null,ut.finishedLanes=0,xt===ut.current)throw Error(rt(177));ut.callbackNode=null,ut.callbackPriority=0;var Ft=xt.lanes|xt.childLanes;if(eo(ut,Ft),ut===Er&&(Tr=Er=null,Ur=0),!(xt.subtreeFlags&2064)&&!(xt.flags&2064)||zA||(zA=!0,MI(ss,function(){return Go(),null})),Ft=(xt.flags&15990)!==0,xt.subtreeFlags&15990||Ft){Ft=Mr.transition,Mr.transition=null;var Qt=gr;gr=1;var on=Ar;Ar|=4,_g.current=null,jI(ut,xt),$I(ut,xt),Et(ut.containerInfo),ut.current=xt,qI(xt),cA(),Ar=on,gr=Qt,Mr.transition=Ft}else ut.current=xt;if(zA&&(zA=!1,oo=ut,PA=Rt),Ft=ut.pendingLanes,Ft===0&&(so=null),Jo(xt.stateNode),cs(ut,xr()),It!==null)for(bt=ut.onRecoverableError,xt=0;xt<It.length;xt++)bt(It[xt]);if(KA)throw KA=!1,ut=nu,nu=null,ut;return PA&1&&ut.tag!==0&&Go(),Ft=ut.pendingLanes,Ft&1?ut===iu?aA++:(aA=0,iu=ut):aA=0,ls(),null}function Go(){if(oo!==null){var ut=Po(PA),It=Mr.transition,bt=gr;try{if(Mr.transition=null,gr=16>ut?16:ut,oo===null)var xt=!1;else{if(ut=oo,oo=null,PA=0,Ar&6)throw Error(rt(331));var Rt=Ar;for(Ar|=4,Xn=ut.current;Xn!==null;){var Ft=Xn,Qt=Ft.child;if(Xn.flags&16){var on=Ft.deletions;if(on!==null){for(var xn=0;xn<on.length;xn++){var Tn=on[xn];for(Xn=Tn;Xn!==null;){var Pn=Xn;switch(Pn.tag){case 0:case 11:case 15:yo(8,Pn,Ft)}var _i=Pn.child;if(_i!==null)_i.return=Pn,Xn=_i;else for(;Xn!==null;){Pn=Xn;var Qn=Pn.sibling,Gr=Pn.return;if(dI(Pn),Pn===Tn){Xn=null;break}if(Qn!==null){Qn.return=Gr,Xn=Qn;break}Xn=Gr}}}var Jn=Ft.alternate;if(Jn!==null){var es=Jn.child;if(es!==null){Jn.child=null;do{var Zs=es.sibling;es.sibling=null,es=Zs}while(es!==null)}}Xn=Ft}}if(Ft.subtreeFlags&2064&&Qt!==null)Qt.return=Ft,Xn=Qt;else e:for(;Xn!==null;){if(Ft=Xn,Ft.flags&2048)switch(Ft.tag){case 0:case 11:case 15:yo(9,Ft,Ft.return)}var Cn=Ft.sibling;if(Cn!==null){Cn.return=Ft.return,Xn=Cn;break e}Xn=Ft.return}}var an=ut.current;for(Xn=an;Xn!==null;){Qt=Xn;var vn=Qt.child;if(Qt.subtreeFlags&2064&&vn!==null)vn.return=Qt,Xn=vn;else e:for(Qt=an;Xn!==null;){if(on=Xn,on.flags&2048)try{switch(on.tag){case 0:case 11:case 15:iA(9,on)}}catch(Un){us(on,on.return,Un)}if(on===Qt){Xn=null;break e}var Yn=on.sibling;if(Yn!==null){Yn.return=on.return,Xn=Yn;break e}Xn=on.return}}if(Ar=Rt,ls(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(no,ut)}catch{}xt=!0}return xt}finally{gr=bt,Mr.transition=It}}return!1}function RI(ut,It,bt){It=Tl(bt,It),It=Du(ut,It,1),ro(ut,It),It=As(),ut=JA(ut,1),ut!==null&&(ks(ut,1,It),cs(ut,It))}function us(ut,It,bt){if(ut.tag===3)RI(ut,ut,bt);else for(;It!==null;){if(It.tag===3){RI(It,ut,bt);break}else if(It.tag===1){var xt=It.stateNode;if(typeof It.type.getDerivedStateFromError=="function"||typeof xt.componentDidCatch=="function"&&(so===null||!so.has(xt))){ut=Tl(bt,ut),ut=Uu(It,ut,1),ro(It,ut),ut=As(),It=JA(It,1),It!==null&&(ks(It,1,ut),cs(It,ut));break}}It=It.return}}function sC(ut,It,bt){var xt=ut.pingCache;xt!==null&&xt.delete(It),It=As(),ut.pingedLanes|=ut.suspendedLanes&bt,Er===ut&&(Ur&bt)===bt&&(Hr===4||Hr===3&&(Ur&130023424)===Ur&&500>xr()-eu?bo(ut,0):_c|=bt),cs(ut,It)}function WI(ut,It){It===0&&(ut.mode&1?(It=zs,zs<<=1,!(zs&130023424)&&(zs=4194304)):It=1);var bt=As();ut=JA(ut,It),ut!==null&&(ks(ut,It,bt),cs(ut,bt))}function oC(ut){var It=ut.memoizedState,bt=0;It!==null&&(bt=It.retryLane),WI(ut,bt)}function aC(ut,It){var bt=0;switch(ut.tag){case 13:var xt=ut.stateNode,Rt=ut.memoizedState;Rt!==null&&(bt=Rt.retryLane);break;case 19:xt=ut.stateNode;break;default:throw Error(rt(314))}xt!==null&&xt.delete(It),WI(ut,bt)}var _I;_I=function(ut,It,bt){if(ut!==null)if(ut.memoizedProps!==It.pendingProps||Wr.current)ms=!0;else{if(!(ut.lanes&bt)&&!(It.flags&128))return ms=!1,JI(ut,It,bt);ms=!!(ut.flags&131072)}else ms=!1,Sr&&It.flags&1048576&&Vu(It,fA,It.index);switch(It.lanes=0,It.tag){case 2:var xt=It.type;ut!==null&&(ut.alternate=null,It.alternate=null,It.flags|=2),ut=It.pendingProps;var Rt=hs(It,hr.current);Xr(It,bt),Rt=Wl(null,It,xt,ut,Rt,bt);var Ft=_l();return It.flags|=1,typeof Rt=="object"&&Rt!==null&&typeof Rt.render=="function"&&Rt.$$typeof===void 0?(It.tag=1,It.memoizedState=null,It.updateQueue=null,_r(xt)?(Ft=!0,Fs(It)):Ft=!1,It.memoizedState=Rt.state!==null&&Rt.state!==void 0?Rt.state:null,$A(It),Rt.updater=CA,It.stateNode=Rt,Rt._reactInternals=It,Al(It,xt,ut,bt),It=Ll(null,It,xt,!0,Ft,bt)):(It.tag=0,Sr&&Ft&&Il(It),as(null,It,Rt,bt),It=It.child),It;case 16:xt=It.elementType;e:{switch(ut!==null&&(ut.alternate=null,It.alternate=null,It.flags|=2),ut=It.pendingProps,Rt=xt._init,xt=Rt(xt._payload),It.type=xt,Rt=It.tag=lC(xt),ut=Qr(xt,ut),Rt){case 0:It=Hl(null,It,xt,ut,bt);break e;case 1:It=nI(null,It,xt,ut,bt);break e;case 11:It=qu(null,It,xt,ut,bt);break e;case 14:It=_d(null,It,xt,Qr(xt.type,ut),bt);break e}throw Error(rt(306,xt,""))}return It;case 0:return xt=It.type,Rt=It.pendingProps,Rt=It.elementType===xt?Rt:Qr(xt,Rt),Hl(ut,It,xt,Rt,bt);case 1:return xt=It.type,Rt=It.pendingProps,Rt=It.elementType===xt?Rt:Qr(xt,Rt),nI(ut,It,xt,Rt,bt);case 3:e:{if(iI(It),ut===null)throw Error(rt(387));xt=It.pendingProps,Ft=It.memoizedState,Rt=Ft.element,du(ut,It),IA(It,xt,null,bt);var Qt=It.memoizedState;if(xt=Qt.element,tn&&Ft.isDehydrated)if(Ft={element:xt,isDehydrated:!1,cache:Qt.cache,transitions:Qt.transitions},It.updateQueue.baseState=Ft,It.memoizedState=Ft,It.flags&256){Rt=Error(rt(423)),It=rI(ut,It,xt,bt,Rt);break e}else if(xt!==Rt){Rt=Error(rt(424)),It=rI(ut,It,xt,bt,Rt);break e}else for(tn&&(fs=An(It.stateNode.containerInfo),ps=It,Sr=!0,_s=null,jo=!1),bt=xu(It,null,xt,bt),It.child=bt;bt;)bt.flags=bt.flags&-3|4096,bt=bt.sibling;else{if(Eo(),xt===Rt){It=$s(ut,It,bt);break e}as(ut,It,xt,bt)}It=It.child}return It;case 5:return Su(It),ut===null&&yl(It),xt=It.type,Rt=It.pendingProps,Ft=ut!==null?ut.memoizedProps:null,Qt=Rt.children,Ot(xt,Rt)?Qt=null:Ft!==null&&Ot(xt,Ft)&&(It.flags|=32),tI(ut,It),as(ut,It,Qt,bt),It.child;case 6:return ut===null&&yl(It),null;case 13:return sI(ut,It,bt);case 4:return Bl(It,It.stateNode.containerInfo),xt=It.pendingProps,ut===null?It.child=To(It,null,xt,bt):as(ut,It,xt,bt),It.child;case 11:return xt=It.type,Rt=It.pendingProps,Rt=It.elementType===xt?Rt:Qr(xt,Rt),qu(ut,It,xt,Rt,bt);case 7:return as(ut,It,It.pendingProps,bt),It.child;case 8:return as(ut,It,It.pendingProps.children,bt),It.child;case 12:return as(ut,It,It.pendingProps.children,bt),It.child;case 10:e:{if(xt=It.type._context,Rt=It.pendingProps,Ft=It.memoizedProps,Qt=Rt.value,dA(It,xt,Qt),Ft!==null)if(Cs(Ft.value,Qt)){if(Ft.children===Rt.children&&!Wr.current){It=$s(ut,It,bt);break e}}else for(Ft=It.child,Ft!==null&&(Ft.return=It);Ft!==null;){var on=Ft.dependencies;if(on!==null){Qt=Ft.child;for(var xn=on.firstContext;xn!==null;){if(xn.context===xt){if(Ft.tag===1){xn=Js(-1,bt&-bt),xn.tag=2;var Tn=Ft.updateQueue;if(Tn!==null){Tn=Tn.shared;var Pn=Tn.pending;Pn===null?xn.next=xn:(xn.next=Pn.next,Pn.next=xn),Tn.pending=xn}}Ft.lanes|=bt,xn=Ft.alternate,xn!==null&&(xn.lanes|=bt),kr(Ft.return,bt,It),on.lanes|=bt;break}xn=xn.next}}else if(Ft.tag===10)Qt=Ft.type===It.type?null:Ft.child;else if(Ft.tag===18){if(Qt=Ft.return,Qt===null)throw Error(rt(341));Qt.lanes|=bt,on=Qt.alternate,on!==null&&(on.lanes|=bt),kr(Qt,bt,It),Qt=Ft.sibling}else Qt=Ft.child;if(Qt!==null)Qt.return=Ft;else for(Qt=Ft;Qt!==null;){if(Qt===It){Qt=null;break}if(Ft=Qt.sibling,Ft!==null){Ft.return=Qt.return,Qt=Ft;break}Qt=Qt.return}Ft=Qt}as(ut,It,Rt.children,bt),It=It.child}return It;case 9:return Rt=It.type,xt=It.pendingProps.children,Xr(It,bt),Rt=vr(Rt),xt=xt(Rt),It.flags|=1,as(ut,It,xt,bt),It.child;case 14:return xt=It.type,Rt=Qr(xt,It.pendingProps),Rt=Qr(xt.type,Rt),_d(ut,It,xt,Rt,bt);case 15:return _h(ut,It,It.type,It.pendingProps,bt);case 17:return xt=It.type,Rt=It.pendingProps,Rt=It.elementType===xt?Rt:Qr(xt,Rt),ut!==null&&(ut.alternate=null,It.alternate=null,It.flags|=2),It.tag=1,_r(xt)?(ut=!0,Fs(It)):ut=!1,Xr(It,bt),fu(It,xt,Rt),Al(It,xt,Rt,bt),Ll(null,It,xt,!0,ut,bt);case 19:return lI(ut,It,bt);case 22:return eI(ut,It,bt)}throw Error(rt(156,It.tag))};function MI(ut,It){return Us(ut,It)}function AC(ut,It,bt,xt){this.tag=ut,this.key=bt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=It,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=xt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(ut,It,bt,xt){return new AC(ut,It,bt,xt)}function Au(ut){return ut=ut.prototype,!(!ut||!ut.isReactComponent)}function lC(ut){if(typeof ut=="function")return Au(ut)?1:0;if(ut!=null){if(ut=ut.$$typeof,ut===ht)return 11;if(ut===ft)return 14}return 2}function lo(ut,It){var bt=ut.alternate;return bt===null?(bt=ws(ut.tag,It,ut.key,ut.mode),bt.elementType=ut.elementType,bt.type=ut.type,bt.stateNode=ut.stateNode,bt.alternate=ut,ut.alternate=bt):(bt.pendingProps=It,bt.type=ut.type,bt.flags=0,bt.subtreeFlags=0,bt.deletions=null),bt.flags=ut.flags&14680064,bt.childLanes=ut.childLanes,bt.lanes=ut.lanes,bt.child=ut.child,bt.memoizedProps=ut.memoizedProps,bt.memoizedState=ut.memoizedState,bt.updateQueue=ut.updateQueue,It=ut.dependencies,bt.dependencies=It===null?null:{lanes:It.lanes,firstContext:It.firstContext},bt.sibling=ut.sibling,bt.index=ut.index,bt.ref=ut.ref,bt}function QA(ut,It,bt,xt,Rt,Ft){var Qt=2;if(xt=ut,typeof ut=="function")Au(ut)&&(Qt=1);else if(typeof ut=="string")Qt=5;else e:switch(ut){case At:return Bo(bt.children,Rt,Ft,It);case lt:Qt=8,Rt|=8;break;case gt:return ut=ws(12,bt,It,Rt|2),ut.elementType=gt,ut.lanes=Ft,ut;case mt:return ut=ws(13,bt,It,Rt),ut.elementType=mt,ut.lanes=Ft,ut;case Ct:return ut=ws(19,bt,It,Rt),ut.elementType=Ct,ut.lanes=Ft,ut;case Vt:return jA(bt,Rt,Ft,It);default:if(typeof ut=="object"&&ut!==null)switch(ut.$$typeof){case ct:Qt=10;break e;case dt:Qt=9;break e;case ht:Qt=11;break e;case ft:Qt=14;break e;case pt:Qt=16,xt=null;break e}throw Error(rt(130,ut==null?ut:typeof ut,""))}return It=ws(Qt,bt,It,Rt),It.elementType=ut,It.type=xt,It.lanes=Ft,It}function Bo(ut,It,bt,xt){return ut=ws(7,ut,xt,It),ut.lanes=bt,ut}function jA(ut,It,bt,xt){return ut=ws(22,ut,xt,It),ut.elementType=Vt,ut.lanes=bt,ut.stateNode={},ut}function lu(ut,It,bt){return ut=ws(6,ut,null,It),ut.lanes=bt,ut}function gu(ut,It,bt){return It=ws(4,ut.children!==null?ut.children:[],ut.key,It),It.lanes=bt,It.stateNode={containerInfo:ut.containerInfo,pendingChildren:null,implementation:ut.implementation},It}function gC(ut,It,bt,xt,Rt){this.tag=It,this.containerInfo=ut,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vn,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zo(0),this.expirationTimes=Zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zo(0),this.identifierPrefix=xt,this.onRecoverableError=Rt,tn&&(this.mutableSourceEagerHydrationData=null)}function FI(ut,It,bt,xt,Rt,Ft,Qt,on,xn){return ut=new gC(ut,It,bt,on,xn),It===1?(It=1,Ft===!0&&(It|=8)):It=0,Ft=ws(3,null,null,It),ut.current=Ft,Ft.stateNode=ut,Ft.memoizedState={element:xt,isDehydrated:bt,cache:null,transitions:null},$A(Ft),ut}function kI(ut){if(!ut)return ns;ut=ut._reactInternals;e:{if(wt(ut)!==ut||ut.tag!==1)throw Error(rt(170));var It=ut;do{switch(It.tag){case 3:It=It.stateNode.context;break e;case 1:if(_r(It.type)){It=It.stateNode.__reactInternalMemoizedMergedChildContext;break e}}It=It.return}while(It!==null);throw Error(rt(171))}if(ut.tag===1){var bt=ut.type;if(_r(bt))return So(ut,bt,It)}return It}function EI(ut){var It=ut._reactInternals;if(It===void 0)throw typeof ut.render=="function"?Error(rt(188)):(ut=Object.keys(ut).join(","),Error(rt(268,ut)));return ut=Nt(It),ut===null?null:ut.stateNode}function TI(ut,It){if(ut=ut.memoizedState,ut!==null&&ut.dehydrated!==null){var bt=ut.retryLane;ut.retryLane=bt!==0&&bt<It?bt:It}}function cu(ut,It){TI(ut,It),(ut=ut.alternate)&&TI(ut,It)}function cC(ut){return ut=Nt(ut),ut===null?null:ut.stateNode}function uC(){return null}return _e.attemptContinuousHydration=function(ut){if(ut.tag===13){var It=As();Ss(ut,134217728,It),cu(ut,134217728)}},_e.attemptHydrationAtCurrentPriority=function(ut){if(ut.tag===13){var It=As(),bt=ao(ut);Ss(ut,bt,It),cu(ut,bt)}},_e.attemptSynchronousHydration=function(ut){switch(ut.tag){case 3:var It=ut.stateNode;if(It.current.memoizedState.isDehydrated){var bt=Ps(It.pendingLanes);bt!==0&&(Es(It,bt|1),cs(It,xr()),!(Ar&6)&&(Ko(),ls()))}break;case 13:var xt=As();BI(function(){return Ss(ut,1,xt)}),cu(ut,1)}},_e.batchedUpdates=function(ut,It){var bt=Ar;Ar|=1;try{return ut(It)}finally{Ar=bt,Ar===0&&(Ko(),Ts&&ls())}},_e.createComponentSelector=function(ut){return{$$typeof:EA,value:ut}},_e.createContainer=function(ut,It,bt,xt,Rt,Ft,Qt){return FI(ut,It,!1,null,bt,xt,Rt,Ft,Qt)},_e.createHasPseudoClassSelector=function(ut){return{$$typeof:TA,value:ut}},_e.createHydrationContainer=function(ut,It,bt,xt,Rt,Ft,Qt,on,xn){return ut=FI(bt,xt,!0,ut,Rt,Ft,Qt,on,xn),ut.context=kI(null),bt=ut.current,xt=As(),Rt=ao(bt),Ft=Js(xt,Rt),Ft.callback=It??null,ro(bt,Ft),ut.current.lanes=Rt,ks(ut,Rt,xt),cs(ut,xt),ut},_e.createPortal=function(ut,It,bt){var xt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:at,key:xt==null?null:""+xt,children:ut,containerInfo:It,implementation:bt}},_e.createRoleSelector=function(ut){return{$$typeof:NA,value:ut}},_e.createTestNameSelector=function(ut){return{$$typeof:HA,value:ut}},_e.createTextSelector=function(ut){return{$$typeof:LA,value:ut}},_e.deferredUpdates=function(ut){var It=gr,bt=Mr.transition;try{return Mr.transition=null,gr=16,ut()}finally{gr=It,Mr.transition=bt}},_e.discreteUpdates=function(ut,It,bt,xt,Rt){var Ft=gr,Qt=Mr.transition;try{return Mr.transition=null,gr=1,ut(It,bt,xt,Rt)}finally{gr=Ft,Mr.transition=Qt,Ar===0&&Ko()}},_e.findAllNodes=$l,_e.findBoundingRects=function(ut,It){if(!Mn)throw Error(rt(363));It=$l(ut,It),ut=[];for(var bt=0;bt<It.length;bt++)ut.push(Dt(It[bt]));for(It=ut.length-1;0<It;It--){bt=ut[It];for(var xt=bt.x,Rt=xt+bt.width,Ft=bt.y,Qt=Ft+bt.height,on=It-1;0<=on;on--)if(It!==on){var xn=ut[on],Tn=xn.x,Pn=Tn+xn.width,_i=xn.y,Qn=_i+xn.height;if(xt>=Tn&&Ft>=_i&&Rt<=Pn&&Qt<=Qn){ut.splice(It,1);break}else if(xt!==Tn||bt.width!==xn.width||Qn<Ft||_i>Qt){if(!(Ft!==_i||bt.height!==xn.height||Pn<xt||Tn>Rt)){Tn>xt&&(xn.width+=Tn-xt,xn.x=xt),Pn<Rt&&(xn.width=Rt-Tn),ut.splice(It,1);break}}else{_i>Ft&&(xn.height+=_i-Ft,xn.y=Ft),Qn<Qt&&(xn.height=Qt-_i),ut.splice(It,1);break}}}return ut},_e.findHostInstance=EI,_e.findHostInstanceWithNoPortals=function(ut){return ut=kt(ut),ut=ut!==null?Lt(ut):null,ut===null?null:ut.stateNode},_e.findHostInstanceWithWarning=function(ut){return EI(ut)},_e.flushControlled=function(ut){var It=Ar;Ar|=1;var bt=Mr.transition,xt=gr;try{Mr.transition=null,gr=1,ut()}finally{gr=xt,Mr.transition=bt,Ar=It,Ar===0&&(Ko(),ls())}},_e.flushPassiveEffects=Go,_e.flushSync=BI,_e.focusWithin=function(ut,It){if(!Mn)throw Error(rt(363));for(ut=Jl(ut),It=bI(ut,It),It=Array.from(It),ut=0;ut<It.length;){var bt=It[ut++];if(!en(bt)){if(bt.tag===5&&Sn(bt.stateNode))return!0;for(bt=bt.child;bt!==null;)It.push(bt),bt=bt.sibling}}return!1},_e.getCurrentUpdatePriority=function(){return gr},_e.getFindAllNodesFailureDescription=function(ut,It){if(!Mn)throw Error(rt(363));var bt=0,xt=[];ut=[Jl(ut),0];for(var Rt=0;Rt<ut.length;){var Ft=ut[Rt++],Qt=ut[Rt++],on=It[Qt];if((Ft.tag!==5||!en(Ft))&&(Ol(Ft,on)&&(xt.push(Ql(on)),Qt++,Qt>bt&&(bt=Qt)),Qt<It.length))for(Ft=Ft.child;Ft!==null;)ut.push(Ft,Qt),Ft=Ft.sibling}if(bt<It.length){for(ut=[];bt<It.length;bt++)ut.push(Ql(It[bt]));return`findAllNodes was able to match part of the selector:
  `+(xt.join(" > ")+`

No matching component was found for:
  `)+ut.join(" > ")}return null},_e.getPublicRootInstance=function(ut){if(ut=ut.current,!ut.child)return null;switch(ut.child.tag){case 5:return _t(ut.child.stateNode);default:return ut.child.stateNode}},_e.injectIntoDevTools=function(ut){if(ut={bundleType:ut.bundleType,version:ut.version,rendererPackageName:ut.rendererPackageName,rendererConfig:ut.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:st.ReactCurrentDispatcher,findHostInstanceByFiber:cC,findFiberByHostInstance:ut.findFiberByHostInstance||uC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")ut=!1;else{var It=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(It.isDisabled||!It.supportsFiber)ut=!0;else{try{no=It.inject(ut),Is=It}catch{}ut=!!It.checkDCE}}return ut},_e.isAlreadyRendering=function(){return!1},_e.observeVisibleRects=function(ut,It,bt,xt){if(!Mn)throw Error(rt(363));ut=$l(ut,It);var Rt=wn(ut,bt,xt).disconnect;return{disconnect:function(){Rt()}}},_e.registerMutableSourceForHydration=function(ut,It){var bt=It._getVersion;bt=bt(It._source),ut.mutableSourceEagerHydrationData==null?ut.mutableSourceEagerHydrationData=[It,bt]:ut.mutableSourceEagerHydrationData.push(It,bt)},_e.runWithPriority=function(ut,It){var bt=gr;try{return gr=ut,It()}finally{gr=bt}},_e.shouldError=function(){return null},_e.shouldSuspend=function(){return!1},_e.updateContainer=function(ut,It,bt,xt){var Rt=It.current,Ft=As(),Qt=ao(Rt);return bt=kI(bt),It.context===null?It.context=bt:It.pendingContext=bt,It=Js(Ft,Qt),It.payload={element:ut},xt=xt===void 0?null:xt,xt!==null&&(It.callback=xt),ro(Rt,It),ut=Ss(Rt,Qt,Ft),ut!==null&&hA(ut,Rt,Qt),Qt},_e};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);function shallowEqualArrays(et,_,_e=(tt,nt)=>tt===nt){if(et===_)return!0;if(!et||!_)return!1;const tt=et.length;if(_.length!==tt)return!1;for(let nt=0;nt<tt;nt++)if(!_e(et[nt],_[nt]))return!1;return!0}const globalCache=[];function query(et,_,_e=!1,tt={}){for(const it of globalCache)if(shallowEqualArrays(_,it.keys,it.equal)){if(_e)return;if(Object.prototype.hasOwnProperty.call(it,"error"))throw it.error;if(Object.prototype.hasOwnProperty.call(it,"response"))return it.response;if(!_e)throw it.promise}const nt={keys:_,equal:tt.equal,promise:et(..._).then(it=>nt.response=it).then(()=>{tt.lifespan&&tt.lifespan>0&&setTimeout(()=>{const it=globalCache.indexOf(nt);it!==-1&&globalCache.splice(it,1)},tt.lifespan)}).catch(it=>nt.error=it)};if(globalCache.push(nt),!_e)throw nt.promise}const suspend=(et,_,_e)=>query(et,_,!1,_e),preload=(et,_,_e)=>void query(et,_,!0,_e),clear=et=>{if(et===void 0||et.length===0)globalCache.splice(0,globalCache.length);else{const _=globalCache.find(_e=>shallowEqualArrays(et,_e.keys,_e.equal));if(_){const _e=globalCache.indexOf(_);_e!==-1&&globalCache.splice(_e,1)}}},catalogue={},extend=et=>void Object.assign(catalogue,et);function createRenderer(et,_){function _e(At,{args:lt=[],attach:gt,...ct},dt){let ht=`${At[0].toUpperCase()}${At.slice(1)}`,mt;if(At==="primitive"){if(ct.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const Ct=ct.object;mt=prepare$1(Ct,{type:At,root:dt,attach:gt,primitive:!0})}else{const Ct=catalogue[ht];if(!Ct)throw new Error(`R3F: ${ht} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(lt))throw new Error("R3F: The args prop must be an array!");mt=prepare$1(new Ct(...lt),{type:At,root:dt,attach:gt,memoizedProps:{args:lt}})}return mt.__r3f.attach===void 0&&(mt instanceof BufferGeometry?mt.__r3f.attach="geometry":mt instanceof Material&&(mt.__r3f.attach="material")),ht!=="inject"&&applyProps$1(mt,ct),mt}function tt(At,lt){let gt=!1;if(lt){var ct,dt;(ct=lt.__r3f)!=null&&ct.attach?attach(At,lt,lt.__r3f.attach):lt.isObject3D&&At.isObject3D&&(At.add(lt),gt=!0),gt||(dt=At.__r3f)==null||dt.objects.push(lt),lt.__r3f||prepare$1(lt,{}),lt.__r3f.parent=At,updateInstance(lt),invalidateInstance(lt)}}function nt(At,lt,gt){let ct=!1;if(lt){var dt,ht;if((dt=lt.__r3f)!=null&&dt.attach)attach(At,lt,lt.__r3f.attach);else if(lt.isObject3D&&At.isObject3D){lt.parent=At,lt.dispatchEvent({type:"added"});const mt=At.children.filter(ft=>ft!==lt),Ct=mt.indexOf(gt);At.children=[...mt.slice(0,Ct),lt,...mt.slice(Ct)],ct=!0}ct||(ht=At.__r3f)==null||ht.objects.push(lt),lt.__r3f||prepare$1(lt,{}),lt.__r3f.parent=At,updateInstance(lt),invalidateInstance(lt)}}function it(At,lt,gt=!1){At&&[...At].forEach(ct=>rt(lt,ct,gt))}function rt(At,lt,gt){if(lt){var ct,dt,ht;if(lt.__r3f&&(lt.__r3f.parent=null),(ct=At.__r3f)!=null&&ct.objects&&(At.__r3f.objects=At.__r3f.objects.filter(Vt=>Vt!==lt)),(dt=lt.__r3f)!=null&&dt.attach)detach(At,lt,lt.__r3f.attach);else if(lt.isObject3D&&At.isObject3D){var mt;At.remove(lt),(mt=lt.__r3f)!=null&&mt.root&&removeInteractivity(lt.__r3f.root,lt)}const ft=(ht=lt.__r3f)==null?void 0:ht.primitive,pt=gt===void 0?lt.dispose!==null&&!ft:gt;if(!ft){var Ct;it((Ct=lt.__r3f)==null?void 0:Ct.objects,lt,pt),it(lt.children,lt,pt)}lt.__r3f&&(delete lt.__r3f.root,delete lt.__r3f.objects,delete lt.__r3f.handlers,delete lt.__r3f.memoizedProps,ft||delete lt.__r3f),pt&&lt.dispose&&lt.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{lt.dispose()}catch{}}),invalidateInstance(At)}}function st(At,lt,gt,ct){var dt;const ht=(dt=At.__r3f)==null?void 0:dt.parent;if(!ht)return;const mt=_e(lt,gt,At.__r3f.root);if(At.children){for(const Ct of At.children)Ct.__r3f&&tt(mt,Ct);At.children=At.children.filter(Ct=>!Ct.__r3f)}At.__r3f.objects.forEach(Ct=>tt(mt,Ct)),At.__r3f.objects=[],At.__r3f.autoRemovedBeforeAppend||rt(ht,At),mt.parent&&(mt.__r3f.autoRemovedBeforeAppend=!0),tt(ht,mt),mt.raycast&&mt.__r3f.eventCount&&mt.__r3f.root.getState().internal.interaction.push(mt),[ct,ct.alternate].forEach(Ct=>{Ct!==null&&(Ct.stateNode=mt,Ct.ref&&(typeof Ct.ref=="function"?Ct.ref(mt):Ct.ref.current=mt))})}const ot=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:_e,removeChild:rt,appendChild:tt,appendInitialChild:tt,insertBefore:nt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(At,lt)=>{if(!lt)return;const gt=At.getState().scene;gt.__r3f&&(gt.__r3f.root=At,tt(gt,lt))},removeChildFromContainer:(At,lt)=>{lt&&rt(At.getState().scene,lt)},insertInContainerBefore:(At,lt,gt)=>{if(!lt||!gt)return;const ct=At.getState().scene;ct.__r3f&&nt(ct,lt,gt)},getRootHostContext:()=>null,getChildHostContext:At=>At,finalizeInitialChildren(At){var lt;return!!((lt=At==null?void 0:At.__r3f)!=null?lt:{}).handlers},prepareUpdate(At,lt,gt,ct){if(At.__r3f.primitive&&ct.object&&ct.object!==At)return[!0];{const{args:dt=[],children:ht,...mt}=ct,{args:Ct=[],children:ft,...pt}=gt;if(!Array.isArray(dt))throw new Error("R3F: the args prop must be an array!");if(dt.some((yt,Gt)=>yt!==Ct[Gt]))return[!0];const Vt=diffProps(At,mt,pt,!0);return Vt.changes.length?[!1,Vt]:null}},commitUpdate(At,[lt,gt],ct,dt,ht,mt){lt?st(At,ct,ht,mt):applyProps$1(At,gt)},commitMount(At,lt,gt,ct){var dt;const ht=(dt=At.__r3f)!=null?dt:{};At.raycast&&ht.handlers&&ht.eventCount&&At.__r3f.root.getState().internal.interaction.push(At)},getPublicInstance:At=>At,prepareForCommit:()=>null,preparePortalMount:At=>prepare$1(At.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(At){var lt;const{attach:gt,parent:ct}=(lt=At.__r3f)!=null?lt:{};gt&&ct&&detach(ct,At,gt),At.isObject3D&&(At.visible=!1),invalidateInstance(At)},unhideInstance(At,lt){var gt;const{attach:ct,parent:dt}=(gt=At.__r3f)!=null?gt:{};ct&&dt&&attach(dt,At,ct),(At.isObject3D&&lt.visible==null||lt.visible)&&(At.visible=!0),invalidateInstance(At)},createTextInstance:ot,hideTextInstance:ot,unhideTextInstance:ot,getCurrentEventPriority:()=>_?_():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace=et=>"colorSpace"in et||"outputColorSpace"in et,getColorManagement=()=>{var et;return(et=catalogue.ColorManagement)!=null?et:null},isOrthographicCamera=et=>et&&et.isOrthographicCamera,isRef$1=et=>et&&et.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(et){const _=reactExports.useRef(et);return useIsomorphicLayoutEffect(()=>void(_.current=et),[et]),_}function Block({set:et}){return useIsomorphicLayoutEffect(()=>(et(new Promise(()=>null)),()=>et(!1)),[et]),null}class ErrorBoundary extends reactExports.Component{constructor(..._){super(..._),this.state={error:!1}}componentDidCatch(_){this.props.set(_)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=et=>et&&!!et.memoized&&!!et.changes;function calculateDpr(et){var _;const _e=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(et)?Math.min(Math.max(et[0],_e),et[1]):et}const getRootState=et=>{var _;return(_=et.__r3f)==null?void 0:_.root.getState()},is={obj:et=>et===Object(et)&&!is.arr(et)&&typeof et!="function",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",boo:et=>typeof et=="boolean",und:et=>et===void 0,arr:et=>Array.isArray(et),equ(et,_,{arrays:_e="shallow",objects:tt="reference",strict:nt=!0}={}){if(typeof et!=typeof _||!!et!=!!_)return!1;if(is.str(et)||is.num(et))return et===_;const it=is.obj(et);if(it&&tt==="reference")return et===_;const rt=is.arr(et);if(rt&&_e==="reference")return et===_;if((rt||it)&&et===_)return!0;let st;for(st in et)if(!(st in _))return!1;if(it&&_e==="shallow"&&tt==="shallow"){for(st in nt?_:et)if(!is.equ(et[st],_[st],{strict:nt,objects:"reference"}))return!1}else for(st in nt?_:et)if(et[st]!==_[st])return!1;if(is.und(st)){if(rt&&et.length===0&&_.length===0||it&&Object.keys(et).length===0&&Object.keys(_).length===0)return!0;if(et!==_)return!1}return!0}};function buildGraph(et){const _={nodes:{},materials:{}};return et&&et.traverse(_e=>{_e.name&&(_.nodes[_e.name]=_e),_e.material&&!_.materials[_e.material.name]&&(_.materials[_e.material.name]=_e.material)}),_}function dispose(et){et.dispose&&et.type!=="Scene"&&et.dispose();for(const _ in et)_.dispose==null||_.dispose(),delete et[_]}function prepare$1(et,_){const _e=et;return(_!=null&&_.primitive||!_e.__r3f)&&(_e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,..._}),et}function resolve(et,_){let _e=et;if(_.includes("-")){const tt=_.split("-"),nt=tt.pop();return _e=tt.reduce((it,rt)=>it[rt],et),{target:_e,key:nt}}else return{target:_e,key:_}}const INDEX_REGEX=/-\d+$/;function attach(et,_,_e){if(is.str(_e)){if(INDEX_REGEX.test(_e)){const it=_e.replace(INDEX_REGEX,""),{target:rt,key:st}=resolve(et,it);Array.isArray(rt[st])||(rt[st]=[])}const{target:tt,key:nt}=resolve(et,_e);_.__r3f.previousAttach=tt[nt],tt[nt]=_}else _.__r3f.previousAttach=_e(et,_)}function detach(et,_,_e){var tt,nt;if(is.str(_e)){const{target:it,key:rt}=resolve(et,_e),st=_.__r3f.previousAttach;st===void 0?delete it[rt]:it[rt]=st}else(tt=_.__r3f)==null||tt.previousAttach==null||tt.previousAttach(et,_);(nt=_.__r3f)==null||delete nt.previousAttach}function diffProps(et,{children:_,key:_e,ref:tt,...nt},{children:it,key:rt,ref:st,...ot}={},at=!1){var At;const lt=(At=et==null?void 0:et.__r3f)!=null?At:{},gt=Object.entries(nt),ct=[];if(at){const ht=Object.keys(ot);for(let mt=0;mt<ht.length;mt++)nt.hasOwnProperty(ht[mt])||gt.unshift([ht[mt],DEFAULT+"remove"])}gt.forEach(([ht,mt])=>{var Ct;if((Ct=et.__r3f)!=null&&Ct.primitive&&ht==="object"||is.equ(mt,ot[ht]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(ht))return ct.push([ht,mt,!0,[]]);let ft=[];ht.includes("-")&&(ft=ht.split("-")),ct.push([ht,mt,!1,ft]);for(const pt in nt){const Vt=nt[pt];pt.startsWith(`${ht}-`)&&ct.push([pt,Vt,!1,pt.split("-")])}});const dt={...nt};return lt.memoizedProps&&lt.memoizedProps.args&&(dt.args=lt.memoizedProps.args),lt.memoizedProps&&lt.memoizedProps.attach&&(dt.attach=lt.memoizedProps.attach),{memoized:dt,changes:ct}}function applyProps$1(et,_){var _e,tt,nt;const it=(_e=et.__r3f)!=null?_e:{},rt=it.root,st=(tt=rt==null||rt.getState==null?void 0:rt.getState())!=null?tt:{},{memoized:ot,changes:at}=isDiffSet(_)?_:diffProps(et,_),At=it.eventCount;et.__r3f&&(et.__r3f.memoizedProps=ot);for(let gt=0;gt<at.length;gt++){let[ct,dt,ht,mt]=at[gt];if(hasColorSpace(et)){const Vt="srgb",yt="srgb-linear";ct==="encoding"?(ct="colorSpace",dt=dt===3001?Vt:yt):ct==="outputEncoding"&&(ct="outputColorSpace",dt=dt===3001?Vt:yt)}let Ct=et,ft=Ct[ct];if(mt.length&&(ft=mt.reduce((pt,Vt)=>pt[Vt],et),!(ft&&ft.set))){const[pt,...Vt]=mt.reverse();Ct=Vt.reverse().reduce((yt,Gt)=>yt[Gt],et),ct=pt}if(dt===DEFAULT+"remove")if(Ct.constructor){let pt=DEFAULTS.get(Ct.constructor);pt||(pt=new Ct.constructor,DEFAULTS.set(Ct.constructor,pt)),dt=pt[ct]}else dt=0;if(ht)dt?it.handlers[ct]=dt:delete it.handlers[ct],it.eventCount=Object.keys(it.handlers).length;else if(ft&&ft.set&&(ft.copy||ft instanceof Layers)){if(Array.isArray(dt))ft.fromArray?ft.fromArray(dt):ft.set(...dt);else if(ft.copy&&dt&&dt.constructor&&ft.constructor===dt.constructor)ft.copy(dt);else if(dt!==void 0){const pt=ft instanceof Color;!pt&&ft.setScalar?ft.setScalar(dt):ft instanceof Layers&&dt instanceof Layers?ft.mask=dt.mask:ft.set(dt),!getColorManagement()&&!st.linear&&pt&&ft.convertSRGBToLinear()}}else if(Ct[ct]=dt,Ct[ct]instanceof Texture&&Ct[ct].format===RGBAFormat&&Ct[ct].type===UnsignedByteType){const pt=Ct[ct];hasColorSpace(pt)&&hasColorSpace(st.gl)?pt.colorSpace=st.gl.outputColorSpace:pt.encoding=st.gl.outputEncoding}invalidateInstance(et)}if(it.parent&&st.internal&&et.raycast&&At!==it.eventCount){const gt=st.internal.interaction.indexOf(et);gt>-1&&st.internal.interaction.splice(gt,1),it.eventCount&&st.internal.interaction.push(et)}return!(at.length===1&&at[0][0]==="onUpdate")&&at.length&&(nt=et.__r3f)!=null&&nt.parent&&updateInstance(et),et}function invalidateInstance(et){var _,_e;const tt=(_=et.__r3f)==null||(_e=_.root)==null||_e.getState==null?void 0:_e.getState();tt&&tt.internal.frames===0&&tt.invalidate()}function updateInstance(et){et.onUpdate==null||et.onUpdate(et)}function updateCamera(et,_){et.manual||(isOrthographicCamera(et)?(et.left=_.width/-2,et.right=_.width/2,et.top=_.height/2,et.bottom=_.height/-2):et.aspect=_.width/_.height,et.updateProjectionMatrix(),et.updateMatrixWorld())}function makeId(et){return(et.eventObject||et.object).uuid+"/"+et.index+et.instanceId}function getEventPriority(){var et;const _=typeof self<"u"&&self||typeof window<"u"&&window;if(!_)return constantsExports.DefaultEventPriority;switch((et=_.event)==null?void 0:et.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(et,_,_e,tt){const nt=_e.get(_);nt&&(_e.delete(_),_e.size===0&&(et.delete(tt),nt.target.releasePointerCapture(tt)))}function removeInteractivity(et,_){const{internal:_e}=et.getState();_e.interaction=_e.interaction.filter(tt=>tt!==_),_e.initialHits=_e.initialHits.filter(tt=>tt!==_),_e.hovered.forEach((tt,nt)=>{(tt.eventObject===_||tt.object===_)&&_e.hovered.delete(nt)}),_e.capturedMap.forEach((tt,nt)=>{releaseInternalPointerCapture(_e.capturedMap,_,tt,nt)})}function createEvents(et){function _(ot){const{internal:at}=et.getState(),At=ot.offsetX-at.initialClick[0],lt=ot.offsetY-at.initialClick[1];return Math.round(Math.sqrt(At*At+lt*lt))}function _e(ot){return ot.filter(at=>["Move","Over","Enter","Out","Leave"].some(At=>{var lt;return(lt=at.__r3f)==null?void 0:lt.handlers["onPointer"+At]}))}function tt(ot,at){const At=et.getState(),lt=new Set,gt=[],ct=at?at(At.internal.interaction):At.internal.interaction;for(let Ct=0;Ct<ct.length;Ct++){const ft=getRootState(ct[Ct]);ft&&(ft.raycaster.camera=void 0)}At.previousRoot||At.events.compute==null||At.events.compute(ot,At);function dt(Ct){const ft=getRootState(Ct);if(!ft||!ft.events.enabled||ft.raycaster.camera===null)return[];if(ft.raycaster.camera===void 0){var pt;ft.events.compute==null||ft.events.compute(ot,ft,(pt=ft.previousRoot)==null?void 0:pt.getState()),ft.raycaster.camera===void 0&&(ft.raycaster.camera=null)}return ft.raycaster.camera?ft.raycaster.intersectObject(Ct,!0):[]}let ht=ct.flatMap(dt).sort((Ct,ft)=>{const pt=getRootState(Ct.object),Vt=getRootState(ft.object);return!pt||!Vt?Ct.distance-ft.distance:Vt.events.priority-pt.events.priority||Ct.distance-ft.distance}).filter(Ct=>{const ft=makeId(Ct);return lt.has(ft)?!1:(lt.add(ft),!0)});At.events.filter&&(ht=At.events.filter(ht,At));for(const Ct of ht){let ft=Ct.object;for(;ft;){var mt;(mt=ft.__r3f)!=null&&mt.eventCount&&gt.push({...Ct,eventObject:ft}),ft=ft.parent}}if("pointerId"in ot&&At.internal.capturedMap.has(ot.pointerId))for(let Ct of At.internal.capturedMap.get(ot.pointerId).values())lt.has(makeId(Ct.intersection))||gt.push(Ct.intersection);return gt}function nt(ot,at,At,lt){const gt=et.getState();if(ot.length){const ct={stopped:!1};for(const dt of ot){const ht=getRootState(dt.object)||gt,{raycaster:mt,pointer:Ct,camera:ft,internal:pt}=ht,Vt=new Vector3(Ct.x,Ct.y,0).unproject(ft),yt=Mt=>{var kt,Nt;return(kt=(Nt=pt.capturedMap.get(Mt))==null?void 0:Nt.has(dt.eventObject))!=null?kt:!1},Gt=Mt=>{const kt={intersection:dt,target:at.target};pt.capturedMap.has(Mt)?pt.capturedMap.get(Mt).set(dt.eventObject,kt):pt.capturedMap.set(Mt,new Map([[dt.eventObject,kt]])),at.target.setPointerCapture(Mt)},Bt=Mt=>{const kt=pt.capturedMap.get(Mt);kt&&releaseInternalPointerCapture(pt.capturedMap,dt.eventObject,kt,Mt)};let vt={};for(let Mt in at){let kt=at[Mt];typeof kt!="function"&&(vt[Mt]=kt)}let wt={...dt,...vt,pointer:Ct,intersections:ot,stopped:ct.stopped,delta:At,unprojectedPoint:Vt,ray:mt.ray,camera:ft,stopPropagation(){const Mt="pointerId"in at&&pt.capturedMap.get(at.pointerId);if((!Mt||Mt.has(dt.eventObject))&&(wt.stopped=ct.stopped=!0,pt.hovered.size&&Array.from(pt.hovered.values()).find(kt=>kt.eventObject===dt.eventObject))){const kt=ot.slice(0,ot.indexOf(dt));it([...kt,dt])}},target:{hasPointerCapture:yt,setPointerCapture:Gt,releasePointerCapture:Bt},currentTarget:{hasPointerCapture:yt,setPointerCapture:Gt,releasePointerCapture:Bt},nativeEvent:at};if(lt(wt),ct.stopped===!0)break}}return ot}function it(ot){const{internal:at}=et.getState();for(const At of at.hovered.values())if(!ot.length||!ot.find(lt=>lt.object===At.object&&lt.index===At.index&&lt.instanceId===At.instanceId)){const gt=At.eventObject.__r3f,ct=gt==null?void 0:gt.handlers;if(at.hovered.delete(makeId(At)),gt!=null&&gt.eventCount){const dt={...At,intersections:ot};ct.onPointerOut==null||ct.onPointerOut(dt),ct.onPointerLeave==null||ct.onPointerLeave(dt)}}}function rt(ot,at){for(let At=0;At<at.length;At++){const lt=at[At].__r3f;lt==null||lt.handlers.onPointerMissed==null||lt.handlers.onPointerMissed(ot)}}function st(ot){switch(ot){case"onPointerLeave":case"onPointerCancel":return()=>it([]);case"onLostPointerCapture":return at=>{const{internal:At}=et.getState();"pointerId"in at&&At.capturedMap.has(at.pointerId)&&requestAnimationFrame(()=>{At.capturedMap.has(at.pointerId)&&(At.capturedMap.delete(at.pointerId),it([]))})}}return function(At){const{onPointerMissed:lt,internal:gt}=et.getState();gt.lastEvent.current=At;const ct=ot==="onPointerMove",dt=ot==="onClick"||ot==="onContextMenu"||ot==="onDoubleClick",mt=tt(At,ct?_e:void 0),Ct=dt?_(At):0;ot==="onPointerDown"&&(gt.initialClick=[At.offsetX,At.offsetY],gt.initialHits=mt.map(pt=>pt.eventObject)),dt&&!mt.length&&Ct<=2&&(rt(At,gt.interaction),lt&&lt(At)),ct&&it(mt);function ft(pt){const Vt=pt.eventObject,yt=Vt.__r3f,Gt=yt==null?void 0:yt.handlers;if(yt!=null&&yt.eventCount)if(ct){if(Gt.onPointerOver||Gt.onPointerEnter||Gt.onPointerOut||Gt.onPointerLeave){const Bt=makeId(pt),vt=gt.hovered.get(Bt);vt?vt.stopped&&pt.stopPropagation():(gt.hovered.set(Bt,pt),Gt.onPointerOver==null||Gt.onPointerOver(pt),Gt.onPointerEnter==null||Gt.onPointerEnter(pt))}Gt.onPointerMove==null||Gt.onPointerMove(pt)}else{const Bt=Gt[ot];Bt?(!dt||gt.initialHits.includes(Vt))&&(rt(At,gt.interaction.filter(vt=>!gt.initialHits.includes(vt))),Bt(pt)):dt&&gt.initialHits.includes(Vt)&&rt(At,gt.interaction.filter(vt=>!gt.initialHits.includes(vt)))}}nt(mt,At,Ct,ft)}}return{handlePointer:st}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=et=>!!(et!=null&&et.render),context$1=reactExports.createContext(null),createStore$1=(et,_)=>{const _e=create$1((st,ot)=>{const at=new Vector3,At=new Vector3,lt=new Vector3;function gt(Ct=ot().camera,ft=At,pt=ot().size){const{width:Vt,height:yt,top:Gt,left:Bt}=pt,vt=Vt/yt;ft instanceof Vector3?lt.copy(ft):lt.set(...ft);const wt=Ct.getWorldPosition(at).distanceTo(lt);if(isOrthographicCamera(Ct))return{width:Vt/Ct.zoom,height:yt/Ct.zoom,top:Gt,left:Bt,factor:1,distance:wt,aspect:vt};{const Mt=Ct.fov*Math.PI/180,kt=2*Math.tan(Mt/2)*wt,Nt=kt*(Vt/yt);return{width:Nt,height:kt,top:Gt,left:Bt,factor:Vt/Nt,distance:wt,aspect:vt}}}let ct;const dt=Ct=>st(ft=>({performance:{...ft.performance,current:Ct}})),ht=new Vector2;return{set:st,get:ot,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(Ct=1)=>et(ot(),Ct),advance:(Ct,ft)=>_(Ct,ft,ot()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:ht,mouse:ht,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Ct=ot();ct&&clearTimeout(ct),Ct.performance.current!==Ct.performance.min&&dt(Ct.performance.min),ct=setTimeout(()=>dt(ot().performance.max),Ct.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:gt},setEvents:Ct=>st(ft=>({...ft,events:{...ft.events,...Ct}})),setSize:(Ct,ft,pt,Vt,yt)=>{const Gt=ot().camera,Bt={width:Ct,height:ft,top:Vt||0,left:yt||0,updateStyle:pt};st(vt=>({size:Bt,viewport:{...vt.viewport,...gt(Gt,At,Bt)}}))},setDpr:Ct=>st(ft=>{const pt=calculateDpr(Ct);return{viewport:{...ft.viewport,dpr:pt,initialDpr:ft.viewport.initialDpr||pt}}}),setFrameloop:(Ct="always")=>{const ft=ot().clock;ft.stop(),ft.elapsedTime=0,Ct!=="never"&&(ft.start(),ft.elapsedTime=0),st(()=>({frameloop:Ct}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Ct,ft,pt)=>{const Vt=ot().internal;return Vt.priority=Vt.priority+(ft>0?1:0),Vt.subscribers.push({ref:Ct,priority:ft,store:pt}),Vt.subscribers=Vt.subscribers.sort((yt,Gt)=>yt.priority-Gt.priority),()=>{const yt=ot().internal;yt!=null&&yt.subscribers&&(yt.priority=yt.priority-(ft>0?1:0),yt.subscribers=yt.subscribers.filter(Gt=>Gt.ref!==Ct))}}}}}),tt=_e.getState();let nt=tt.size,it=tt.viewport.dpr,rt=tt.camera;return _e.subscribe(()=>{const{camera:st,size:ot,viewport:at,gl:At,set:lt}=_e.getState();if(ot!==nt||at.dpr!==it){var gt;nt=ot,it=at.dpr,updateCamera(st,ot),At.setPixelRatio(at.dpr);const ct=(gt=ot.updateStyle)!=null?gt:typeof HTMLCanvasElement<"u"&&At.domElement instanceof HTMLCanvasElement;At.setSize(ot.width,ot.height,ct)}st!==rt&&(rt=st,lt(ct=>({viewport:{...ct.viewport,...ct.viewport.getCurrentViewport(st)}})))}),_e.subscribe(st=>et(st)),_e};function createSubs(et,_){const _e={callback:et};return _.add(_e),()=>void _.delete(_e)}let i$2,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;const addEffect=et=>createSubs(et,globalEffects),addAfterEffect=et=>createSubs(et,globalAfterEffects),addTail=et=>createSubs(et,globalTailEffects);function run(et,_){if(et.size)for(const{callback:_e}of et.values())_e(_)}function flushGlobalEffects(et,_){switch(et){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function render$1(et,_,_e){let tt=_.clock.getDelta();for(_.frameloop==="never"&&typeof et=="number"&&(tt=et-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=et),subscribers=_.internal.subscribers,i$2=0;i$2<subscribers.length;i$2++)subscription=subscribers[i$2],subscription.ref.current(subscription.store.getState(),tt,_e);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}function createLoop(et){let _=!1,_e,tt,nt;function it(ot){tt=requestAnimationFrame(it),_=!0,_e=0,flushGlobalEffects("before",ot);for(const At of et.values()){var at;nt=At.store.getState(),nt.internal.active&&(nt.frameloop==="always"||nt.internal.frames>0)&&!((at=nt.gl.xr)!=null&&at.isPresenting)&&(_e+=render$1(ot,nt))}if(flushGlobalEffects("after",ot),_e===0)return flushGlobalEffects("tail",ot),_=!1,cancelAnimationFrame(tt)}function rt(ot,at=1){var At;if(!ot)return et.forEach(lt=>rt(lt.store.getState()),at);(At=ot.gl.xr)!=null&&At.isPresenting||!ot.internal.active||ot.frameloop==="never"||(ot.internal.frames=Math.min(60,ot.internal.frames+at),_||(_=!0,requestAnimationFrame(it)))}function st(ot,at=!0,At,lt){if(at&&flushGlobalEffects("before",ot),At)render$1(ot,At,lt);else for(const gt of et.values())render$1(ot,gt.store.getState());at&&flushGlobalEffects("after",ot)}return{loop:it,invalidate:rt,advance:st}}function useStore$1(){const et=reactExports.useContext(context$1);if(!et)throw new Error("R3F: Hooks can only be used within the Canvas component!");return et}function useThree(et=_e=>_e,_){return useStore$1()(et,_)}function useFrame(et,_=0){const _e=useStore$1(),tt=_e.getState().internal.subscribe,nt=useMutableCallback(et);return useIsomorphicLayoutEffect(()=>tt(nt,_,_e),[_,tt,_e]),null}function loadingFn(et,_){return function(_e,...tt){const nt=new _e;return et&&et(nt),Promise.all(tt.map(it=>new Promise((rt,st)=>nt.load(it,ot=>{ot.scene&&Object.assign(ot,buildGraph(ot.scene)),rt(ot)},_,ot=>st(new Error(`Could not load ${it}: ${ot.message})`))))))}}function useLoader(et,_,_e,tt){const nt=Array.isArray(_)?_:[_],it=suspend(loadingFn(_e,tt),[et,...nt],{equal:is.equ});return Array.isArray(_)?it:it[0]}useLoader.preload=function(et,_,_e){const tt=Array.isArray(_)?_:[_];return preload(loadingFn(_e),[et,...tt])};useLoader.clear=function(et,_){const _e=Array.isArray(_)?_:[_];return clear([et,..._e])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(et,_)=>{const _e=typeof et=="function"?et(_):et;return isRenderer(_e)?_e:new WebGLRenderer({powerPreference:"high-performance",canvas:_,antialias:!0,alpha:!0,...et})};function computeInitialSize(et,_){if(_)return _;if(typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement&&et.parentElement){const{width:_e,height:tt,top:nt,left:it}=et.parentElement.getBoundingClientRect();return{width:_e,height:tt,top:nt,left:it}}else if(typeof OffscreenCanvas<"u"&&et instanceof OffscreenCanvas)return{width:et.width,height:et.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot$1(et){const _=roots.get(et),_e=_==null?void 0:_.fiber,tt=_==null?void 0:_.store;_&&console.warn("R3F.createRoot should only be called once!");const nt=typeof reportError=="function"?reportError:console.error,it=tt||createStore$1(invalidate,advance),rt=_e||reconciler.createContainer(it,constantsExports.ConcurrentRoot,null,!1,null,"",nt,null);_||roots.set(et,{fiber:rt,store:it});let st,ot=!1,at;return{configure(At={}){let{gl:lt,size:gt,scene:ct,events:dt,onCreated:ht,shadows:mt=!1,linear:Ct=!1,flat:ft=!1,legacy:pt=!1,orthographic:Vt=!1,frameloop:yt="always",dpr:Gt=[1,2],performance:Bt,raycaster:vt,camera:wt,onPointerMissed:Mt}=At,kt=it.getState(),Nt=kt.gl;kt.gl||kt.set({gl:Nt=createRendererInstance(lt,et)});let Yt=kt.raycaster;Yt||kt.set({raycaster:Yt=new Raycaster});const{params:Lt,...Xt}=vt||{};if(is.equ(Xt,Yt,shallowLoose)||applyProps(Yt,{...Xt}),is.equ(Lt,Yt.params,shallowLoose)||applyProps(Yt,{params:{...Yt.params,...Lt}}),!kt.camera||kt.camera===at&&!is.equ(at,wt,shallowLoose)){at=wt;const Wt=wt instanceof Camera$1,Ht=Wt?wt:Vt?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera$1(75,0,.1,1e3);Wt||(Ht.position.z=5,wt&&applyProps(Ht,wt),!kt.camera&&!(wt!=null&&wt.rotation)&&Ht.lookAt(0,0,0)),kt.set({camera:Ht})}if(!kt.scene){let Wt;ct instanceof Scene?Wt=ct:(Wt=new Scene,ct&&applyProps(Wt,ct)),kt.set({scene:prepare$1(Wt)})}if(!kt.xr){const Wt=(Pt,Ot)=>{const Jt=it.getState();Jt.frameloop!=="never"&&advance(Pt,!0,Jt,Ot)},Ht=()=>{const Pt=it.getState();Pt.gl.xr.enabled=Pt.gl.xr.isPresenting,Pt.gl.xr.setAnimationLoop(Pt.gl.xr.isPresenting?Wt:null),Pt.gl.xr.isPresenting||invalidate(Pt)},zt={connect(){const Pt=it.getState().gl;Pt.xr.addEventListener("sessionstart",Ht),Pt.xr.addEventListener("sessionend",Ht)},disconnect(){const Pt=it.getState().gl;Pt.xr.removeEventListener("sessionstart",Ht),Pt.xr.removeEventListener("sessionend",Ht)}};Nt.xr&&zt.connect(),kt.set({xr:zt})}if(Nt.shadowMap){const Wt=Nt.shadowMap.enabled,Ht=Nt.shadowMap.type;if(Nt.shadowMap.enabled=!!mt,is.boo(mt))Nt.shadowMap.type=PCFSoftShadowMap;else if(is.str(mt)){var _t;const zt={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Nt.shadowMap.type=(_t=zt[mt])!=null?_t:PCFSoftShadowMap}else is.obj(mt)&&Object.assign(Nt.shadowMap,mt);(Wt!==Nt.shadowMap.enabled||Ht!==Nt.shadowMap.type)&&(Nt.shadowMap.needsUpdate=!0)}const Tt=getColorManagement();Tt&&("enabled"in Tt?Tt.enabled=!pt:"legacyMode"in Tt&&(Tt.legacyMode=pt)),applyProps(Nt,{outputEncoding:Ct?3e3:3001,toneMapping:ft?NoToneMapping:ACESFilmicToneMapping}),kt.legacy!==pt&&kt.set(()=>({legacy:pt})),kt.linear!==Ct&&kt.set(()=>({linear:Ct})),kt.flat!==ft&&kt.set(()=>({flat:ft})),lt&&!is.fun(lt)&&!isRenderer(lt)&&!is.equ(lt,Nt,shallowLoose)&&applyProps(Nt,lt),dt&&!kt.events.handlers&&kt.set({events:dt(it)});const Et=computeInitialSize(et,gt);return is.equ(Et,kt.size,shallowLoose)||kt.setSize(Et.width,Et.height,Et.updateStyle,Et.top,Et.left),Gt&&kt.viewport.dpr!==calculateDpr(Gt)&&kt.setDpr(Gt),kt.frameloop!==yt&&kt.setFrameloop(yt),kt.onPointerMissed||kt.set({onPointerMissed:Mt}),Bt&&!is.equ(Bt,kt.performance,shallowLoose)&&kt.set(Wt=>({performance:{...Wt.performance,...Bt}})),st=ht,ot=!0,this},render(At){return ot||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:it,children:At,onCreated:st,rootElement:et}),rt,null,()=>{}),it},unmount(){unmountComponentAtNode(et)}}}function Provider({store:et,children:_,onCreated:_e,rootElement:tt}){return useIsomorphicLayoutEffect(()=>{const nt=et.getState();nt.set(it=>({internal:{...it.internal,active:!0}})),_e&&_e(nt),et.getState().events.connected||nt.events.connect==null||nt.events.connect(tt)},[]),reactExports.createElement(context$1.Provider,{value:et},_)}function unmountComponentAtNode(et,_){const _e=roots.get(et),tt=_e==null?void 0:_e.fiber;if(tt){const nt=_e==null?void 0:_e.store.getState();nt&&(nt.internal.active=!1),reconciler.updateContainer(null,tt,null,()=>{nt&&setTimeout(()=>{try{var it,rt,st,ot;nt.events.disconnect==null||nt.events.disconnect(),(it=nt.gl)==null||(rt=it.renderLists)==null||rt.dispose==null||rt.dispose(),(st=nt.gl)==null||st.forceContextLoss==null||st.forceContextLoss(),(ot=nt.gl)!=null&&ot.xr&&nt.xr.disconnect(),dispose(nt),roots.delete(et),_&&_(et)}catch{}},500)})}}function createPortal(et,_,_e){return reactExports.createElement(Portal,{key:_.uuid,children:et,container:_,state:_e})}function Portal({state:et={},children:_,container:_e}){const{events:tt,size:nt,...it}=et,rt=useStore$1(),[st]=reactExports.useState(()=>new Raycaster),[ot]=reactExports.useState(()=>new Vector2),at=reactExports.useCallback((lt,gt)=>{const ct={...lt};Object.keys(lt).forEach(ht=>{(privateKeys.includes(ht)||lt[ht]!==gt[ht]&&gt[ht])&&delete ct[ht]});let dt;if(gt&&nt){const ht=gt.camera;dt=lt.viewport.getCurrentViewport(ht,new Vector3,nt),ht!==lt.camera&&updateCamera(ht,nt)}return{...ct,scene:_e,raycaster:st,pointer:ot,mouse:ot,previousRoot:rt,events:{...lt.events,...gt==null?void 0:gt.events,...tt},size:{...lt.size,...nt},viewport:{...lt.viewport,...dt},...it}},[et]),[At]=reactExports.useState(()=>{const lt=rt.getState();return create$1((ct,dt)=>({...lt,scene:_e,raycaster:st,pointer:ot,mouse:ot,previousRoot:rt,events:{...lt.events,...tt},size:{...lt.size,...nt},...it,set:ct,get:dt,setEvents:ht=>ct(mt=>({...mt,events:{...mt.events,...ht}}))}))});return reactExports.useEffect(()=>{const lt=rt.subscribe(gt=>At.setState(ct=>at(gt,ct)));return()=>{lt(),At.destroy()}},[]),reactExports.useEffect(()=>{At.setState(lt=>at(rt.getState(),lt))},[at]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context$1.Provider,{value:At},_),At,null))}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends(){return _extends=Object.assign?Object.assign.bind():function(et){for(var _=1;_<arguments.length;_++){var _e=arguments[_];for(var tt in _e)Object.prototype.hasOwnProperty.call(_e,tt)&&(et[tt]=_e[tt])}return et},_extends.apply(this,arguments)}function debounce(et,_,_e){var tt,nt,it,rt,st;_==null&&(_=100);function ot(){var At=Date.now()-rt;At<_&&At>=0?tt=setTimeout(ot,_-At):(tt=null,_e||(st=et.apply(it,nt),it=nt=null))}var at=function(){it=this,nt=arguments,rt=Date.now();var At=_e&&!tt;return tt||(tt=setTimeout(ot,_)),At&&(st=et.apply(it,nt),it=nt=null),st};return at.clear=function(){tt&&(clearTimeout(tt),tt=null)},at.flush=function(){tt&&(st=et.apply(it,nt),it=nt=null,clearTimeout(tt),tt=null)},at}debounce.debounce=debounce;var debounce_1=debounce;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(et){let{debounce:_,scroll:_e,polyfill:tt,offsetSize:nt}=et===void 0?{debounce:0,scroll:!1,offsetSize:!1}:et;const it=tt||(typeof window>"u"?class{}:window.ResizeObserver);if(!it)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[rt,st]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),ot=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:rt}),at=_?typeof _=="number"?_:_.scroll:null,At=_?typeof _=="number"?_:_.resize:null,lt=reactExports.useRef(!1);reactExports.useEffect(()=>(lt.current=!0,()=>void(lt.current=!1)));const[gt,ct,dt]=reactExports.useMemo(()=>{const ft=()=>{if(!ot.current.element)return;const{left:pt,top:Vt,width:yt,height:Gt,bottom:Bt,right:vt,x:wt,y:Mt}=ot.current.element.getBoundingClientRect(),kt={left:pt,top:Vt,width:yt,height:Gt,bottom:Bt,right:vt,x:wt,y:Mt};ot.current.element instanceof HTMLElement&&nt&&(kt.height=ot.current.element.offsetHeight,kt.width=ot.current.element.offsetWidth),Object.freeze(kt),lt.current&&!areBoundsEqual(ot.current.lastBounds,kt)&&st(ot.current.lastBounds=kt)};return[ft,At?createDebounce(ft,At):ft,at?createDebounce(ft,at):ft]},[st,nt,at,At]);function ht(){ot.current.scrollContainers&&(ot.current.scrollContainers.forEach(ft=>ft.removeEventListener("scroll",dt,!0)),ot.current.scrollContainers=null),ot.current.resizeObserver&&(ot.current.resizeObserver.disconnect(),ot.current.resizeObserver=null)}function mt(){ot.current.element&&(ot.current.resizeObserver=new it(dt),ot.current.resizeObserver.observe(ot.current.element),_e&&ot.current.scrollContainers&&ot.current.scrollContainers.forEach(ft=>ft.addEventListener("scroll",dt,{capture:!0,passive:!0})))}const Ct=ft=>{!ft||ft===ot.current.element||(ht(),ot.current.element=ft,ot.current.scrollContainers=findScrollContainers(ft),mt())};return useOnWindowScroll(dt,!!_e),useOnWindowResize(ct),reactExports.useEffect(()=>{ht(),mt()},[_e,dt,ct]),reactExports.useEffect(()=>ht,[]),[Ct,rt,gt]}function useOnWindowResize(et){reactExports.useEffect(()=>{const _=et;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[et])}function useOnWindowScroll(et,_){reactExports.useEffect(()=>{if(_){const _e=et;return window.addEventListener("scroll",_e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",_e,!0)}},[et,_])}function findScrollContainers(et){const _=[];if(!et||et===document.body)return _;const{overflow:_e,overflowX:tt,overflowY:nt}=window.getComputedStyle(et);return[_e,tt,nt].some(it=>it==="auto"||it==="scroll")&&_.push(et),[..._,...findScrollContainers(et.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(et,_)=>keys.every(_e=>et[_e]===_[_e]);var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(et,_,_e)=>_ in et?__defProp$1(et,_,{enumerable:!0,configurable:!0,writable:!0,value:_e}):et[_]=_e,__spreadValues=(et,_)=>{for(var _e in _||(_={}))__hasOwnProp.call(_,_e)&&__defNormalProp$1(et,_e,_[_e]);if(__getOwnPropSymbols)for(var _e of __getOwnPropSymbols(_))__propIsEnum.call(_,_e)&&__defNormalProp$1(et,_e,_[_e]);return et},__spreadProps=(et,_)=>__defProps(et,__getOwnPropDescs(_));function traverseFiber(et,_,_e){if(!et)return;if(_e(et)===!0)return et;let tt=_?et.return:et.child;for(;tt;){const nt=traverseFiber(tt,_,_e);if(nt)return nt;tt=_?null:tt.sibling}}function wrapContext(et){try{return Object.defineProperties(et,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return et}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function useFiber(){const et=reactExports.useContext(FiberContext);if(et===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const tt of[ReactCurrentOwner==null?void 0:ReactCurrentOwner.current,et,et==null?void 0:et.alternate]){if(!tt)continue;const nt=traverseFiber(tt,!1,it=>{let rt=it.memoizedState;for(;rt;){if(rt.memoizedState===_)return!0;rt=rt.next}});if(nt)return nt}},[et,_])}function useContextMap(){var et,_;const _e=useFiber(),[tt]=reactExports.useState(()=>new Map);tt.clear();let nt=_e;for(;nt;){const it=(et=nt.type)==null?void 0:et._context;it&&it!==FiberContext&&!tt.has(it)&&tt.set(it,(_=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:_.readContext(wrapContext(it))),nt=nt.return}return tt}function useContextBridge(){const et=useContextMap();return reactExports.useMemo(()=>Array.from(et.keys()).reduce((_,_e)=>tt=>reactExports.createElement(_,null,reactExports.createElement(_e.Provider,__spreadProps(__spreadValues({},tt),{value:et.get(_e)}))),_=>reactExports.createElement(FiberProvider,__spreadValues({},_))),[et])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(et){const{handlePointer:_}=createEvents(et);return{priority:1,enabled:!0,compute(_e,tt,nt){tt.pointer.set(_e.offsetX/tt.size.width*2-1,-(_e.offsetY/tt.size.height)*2+1),tt.raycaster.setFromCamera(tt.pointer,tt.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((_e,tt)=>({..._e,[tt]:_(tt)}),{}),update:()=>{var _e;const{events:tt,internal:nt}=et.getState();(_e=nt.lastEvent)!=null&&_e.current&&tt.handlers&&tt.handlers.onPointerMove(nt.lastEvent.current)},connect:_e=>{var tt;const{set:nt,events:it}=et.getState();it.disconnect==null||it.disconnect(),nt(rt=>({events:{...rt.events,connected:_e}})),Object.entries((tt=it.handlers)!=null?tt:[]).forEach(([rt,st])=>{const[ot,at]=DOM_EVENTS[rt];_e.addEventListener(ot,st,{passive:at})})},disconnect:()=>{const{set:_e,events:tt}=et.getState();if(tt.connected){var nt;Object.entries((nt=tt.handlers)!=null?nt:[]).forEach(([it,rt])=>{if(tt&&tt.connected instanceof HTMLElement){const[st]=DOM_EVENTS[it];tt.connected.removeEventListener(st,rt)}}),_e(it=>({events:{...it.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function({children:_,fallback:_e,resize:tt,style:nt,gl:it,events:rt=createPointerEvents,eventSource:st,eventPrefix:ot,shadows:at,linear:At,flat:lt,legacy:gt,orthographic:ct,frameloop:dt,dpr:ht,performance:mt,raycaster:Ct,camera:ft,onPointerMissed:pt,onCreated:Vt,...yt},Gt){reactExports.useMemo(()=>extend(THREE),[]);const Bt=useContextBridge(),[vt,wt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...tt}),Mt=reactExports.useRef(null),kt=reactExports.useRef(null);reactExports.useImperativeHandle(Gt,()=>Mt.current);const Nt=useMutableCallback(pt),[Yt,Lt]=reactExports.useState(!1),[Xt,_t]=reactExports.useState(!1);if(Yt)throw Yt;if(Xt)throw Xt;const Tt=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Zt=Mt.current;wt.width>0&&wt.height>0&&Zt&&(Tt.current||(Tt.current=createRoot$1(Zt)),Tt.current.configure({gl:it,events:rt,shadows:at,linear:At,flat:lt,legacy:gt,orthographic:ct,frameloop:dt,dpr:ht,performance:mt,raycaster:Ct,camera:ft,size:wt,onPointerMissed:(...Et)=>Nt.current==null?void 0:Nt.current(...Et),onCreated:Et=>{Et.events.connect==null||Et.events.connect(st?isRef$1(st)?st.current:st:kt.current),ot&&Et.setEvents({compute:(Wt,Ht)=>{const zt=Wt[ot+"X"],Pt=Wt[ot+"Y"];Ht.pointer.set(zt/Ht.size.width*2-1,-(Pt/Ht.size.height)*2+1),Ht.raycaster.setFromCamera(Ht.pointer,Ht.camera)}}),Vt==null||Vt(Et)}}),Tt.current.render(reactExports.createElement(Bt,null,reactExports.createElement(ErrorBoundary,{set:_t},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:Lt})},_)))))}),reactExports.useEffect(()=>{const Zt=Mt.current;if(Zt)return()=>unmountComponentAtNode(Zt)},[]);const St=st?"none":"auto";return reactExports.createElement("div",_extends({ref:kt,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:St,...nt}},yt),reactExports.createElement("div",{ref:vt,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Mt,style:{display:"block"}},_e)))}),Canvas=reactExports.forwardRef(function(_,_e){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends({},_,{ref:_e})))});var createRoot,m$3=reactDomExports;createRoot=m$3.createRoot,m$3.hydrateRoot;const v1$2=new Vector3,v2$2=new Vector3,v3=new Vector3;function defaultCalculatePosition(et,_,_e){const tt=v1$2.setFromMatrixPosition(et.matrixWorld);tt.project(_);const nt=_e.width/2,it=_e.height/2;return[tt.x*nt+nt,-(tt.y*it)+it]}function isObjectBehindCamera(et,_){const _e=v1$2.setFromMatrixPosition(et.matrixWorld),tt=v2$2.setFromMatrixPosition(_.matrixWorld),nt=_e.sub(tt),it=_.getWorldDirection(v3);return nt.angleTo(it)>Math.PI/2}function isObjectVisible(et,_,_e,tt){const nt=v1$2.setFromMatrixPosition(et.matrixWorld),it=nt.clone();it.project(_),_e.setFromCamera(it,_);const rt=_e.intersectObjects(tt,!0);if(rt.length){const st=rt[0].distance;return nt.distanceTo(_e.ray.origin)<st}return!0}function objectScale(et,_){if(_ instanceof OrthographicCamera)return _.zoom;if(_ instanceof PerspectiveCamera$1){const _e=v1$2.setFromMatrixPosition(et.matrixWorld),tt=v2$2.setFromMatrixPosition(_.matrixWorld),nt=_.fov*Math.PI/180,it=_e.distanceTo(tt);return 1/(2*Math.tan(nt/2)*it)}else return 1}function objectZIndex(et,_,_e){if(_ instanceof PerspectiveCamera$1||_ instanceof OrthographicCamera){const tt=v1$2.setFromMatrixPosition(et.matrixWorld),nt=v2$2.setFromMatrixPosition(_.matrixWorld),it=tt.distanceTo(nt),rt=(_e[1]-_e[0])/(_.far-_.near),st=_e[1]-rt*_.far;return Math.round(rt*it+st)}}const epsilon=et=>Math.abs(et)<1e-10?0:et;function getCSSMatrix(et,_,_e=""){let tt="matrix3d(";for(let nt=0;nt!==16;nt++)tt+=epsilon(_[nt]*et.elements[nt])+(nt!==15?",":")");return _e+tt}const getCameraCSSMatrix=(et=>_=>getCSSMatrix(_,et))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),getObjectCSSMatrix=(et=>(_,_e)=>getCSSMatrix(_,et(_e),"translate(-50%,-50%)"))(et=>[1/et,1/et,1/et,1,-1/et,-1/et,-1/et,-1,1/et,1/et,1/et,1,1,1,1,1]);function isRefObject(et){return et&&typeof et=="object"&&"current"in et}const Html$1=reactExports.forwardRef(({children:et,eps:_=.001,style:_e,className:tt,prepend:nt,center:it,fullscreen:rt,portal:st,distanceFactor:ot,sprite:at=!1,transform:At=!1,occlude:lt,onOcclude:gt,castShadow:ct,receiveShadow:dt,material:ht,geometry:mt,zIndexRange:Ct=[16777271,0],calculatePosition:ft=defaultCalculatePosition,as:pt="div",wrapperClass:Vt,pointerEvents:yt="auto",...Gt},Bt)=>{const{gl:vt,camera:wt,scene:Mt,size:kt,raycaster:Nt,events:Yt,viewport:Lt}=useThree(),[Xt]=reactExports.useState(()=>document.createElement(pt)),_t=reactExports.useRef(),Tt=reactExports.useRef(null),St=reactExports.useRef(0),Zt=reactExports.useRef([0,0]),Et=reactExports.useRef(null),Wt=reactExports.useRef(null),Ht=(st==null?void 0:st.current)||Yt.connected||vt.domElement.parentNode,zt=reactExports.useRef(null),Pt=reactExports.useRef(!1),Ot=reactExports.useMemo(()=>lt&&lt!=="blending"||Array.isArray(lt)&&lt.length&&isRefObject(lt[0]),[lt]);reactExports.useLayoutEffect(()=>{const dn=vt.domElement;lt?(dn.style.zIndex=`${Math.floor(Ct[0]/2)}`,dn.style.position="absolute",dn.style.pointerEvents="none"):(dn.style.zIndex=null,dn.style.position=null,dn.style.pointerEvents=null)},[lt,Ot]),reactExports.useLayoutEffect(()=>{if(Tt.current){const dn=_t.current=createRoot(Xt);if(Mt.updateMatrixWorld(),At)Xt.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const gn=ft(Tt.current,wt,kt);Xt.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${gn[0]}px,${gn[1]}px,0);transform-origin:0 0;`}return Ht&&(nt?Ht.prepend(Xt):Ht.appendChild(Xt)),()=>{Ht&&Ht.removeChild(Xt),dn.unmount()}}},[Ht,At]),reactExports.useLayoutEffect(()=>{Vt&&(Xt.className=Vt)},[Vt]);const Jt=reactExports.useMemo(()=>At?{position:"absolute",top:0,left:0,width:kt.width,height:kt.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:it?"translate3d(-50%,-50%,0)":"none",...rt&&{top:-kt.height/2,left:-kt.width/2,width:kt.width,height:kt.height},..._e},[_e,it,rt,kt,At]),rn=reactExports.useMemo(()=>({position:"absolute",pointerEvents:yt}),[yt]);reactExports.useLayoutEffect(()=>{if(Pt.current=!1,At){var dn;(dn=_t.current)==null||dn.render(reactExports.createElement("div",{ref:Et,style:Jt},reactExports.createElement("div",{ref:Wt,style:rn},reactExports.createElement("div",{ref:Bt,className:tt,style:_e,children:et}))))}else{var gn;(gn=_t.current)==null||gn.render(reactExports.createElement("div",{ref:Bt,style:Jt,className:tt,children:et}))}});const sn=reactExports.useRef(!0);useFrame(dn=>{if(Tt.current){wt.updateMatrixWorld(),Tt.current.updateWorldMatrix(!0,!1);const gn=At?Zt.current:ft(Tt.current,wt,kt);if(At||Math.abs(St.current-wt.zoom)>_||Math.abs(Zt.current[0]-gn[0])>_||Math.abs(Zt.current[1]-gn[1])>_){const $t=isObjectBehindCamera(Tt.current,wt);let tn=!1;Ot&&(lt!=="blending"?tn=[Mt]:Array.isArray(lt)&&(tn=lt.map(kn=>kn.current)));const nn=sn.current;if(tn){const kn=isObjectVisible(Tt.current,wt,Nt,tn);sn.current=kn&&!$t}else sn.current=!$t;nn!==sn.current&&(gt?gt(!sn.current):Xt.style.display=sn.current?"block":"none");const Bn=Math.floor(Ct[0]/2),Gn=lt?Ot?[Ct[0],Bn]:[Bn-1,0]:Ct;if(Xt.style.zIndex=`${objectZIndex(Tt.current,wt,Gn)}`,At){const[kn,pn]=[kt.width/2,kt.height/2],Rn=wt.projectionMatrix.elements[5]*pn,{isOrthographicCamera:Mn,top:In,left:Dt,bottom:Kt,right:en}=wt,un=getCameraCSSMatrix(wt.matrixWorldInverse),Sn=Mn?`scale(${Rn})translate(${epsilon(-(en+Dt)/2)}px,${epsilon((In+Kt)/2)}px)`:`translateZ(${Rn}px)`;let wn=Tt.current.matrixWorld;at&&(wn=wt.matrixWorldInverse.clone().transpose().copyPosition(wn).scale(Tt.current.scale),wn.elements[3]=wn.elements[7]=wn.elements[11]=0,wn.elements[15]=1),Xt.style.width=kt.width+"px",Xt.style.height=kt.height+"px",Xt.style.perspective=Mn?"":`${Rn}px`,Et.current&&Wt.current&&(Et.current.style.transform=`${Sn}${un}translate(${kn}px,${pn}px)`,Wt.current.style.transform=getObjectCSSMatrix(wn,1/((ot||10)/400)))}else{const kn=ot===void 0?1:objectScale(Tt.current,wt)*ot;Xt.style.transform=`translate3d(${gn[0]}px,${gn[1]}px,0) scale(${kn})`}Zt.current=gn,St.current=wt.zoom}}if(!Ot&&zt.current&&!Pt.current)if(At){if(Et.current){const gn=Et.current.children[0];if(gn!=null&&gn.clientWidth&&gn!=null&&gn.clientHeight){const{isOrthographicCamera:$t}=wt;if($t||mt)Gt.scale&&(Array.isArray(Gt.scale)?Gt.scale instanceof Vector3?zt.current.scale.copy(Gt.scale.clone().divideScalar(1)):zt.current.scale.set(1/Gt.scale[0],1/Gt.scale[1],1/Gt.scale[2]):zt.current.scale.setScalar(1/Gt.scale));else{const tn=(ot||10)/400,nn=gn.clientWidth*tn,Bn=gn.clientHeight*tn;zt.current.scale.set(nn,Bn,1)}Pt.current=!0}}}else{const gn=Xt.children[0];if(gn!=null&&gn.clientWidth&&gn!=null&&gn.clientHeight){const $t=1/Lt.factor,tn=gn.clientWidth*$t,nn=gn.clientHeight*$t;zt.current.scale.set(tn,nn,1),Pt.current=!0}zt.current.lookAt(dn.camera.position)}});const Vn=reactExports.useMemo(()=>({vertexShader:At?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[At]);return reactExports.createElement("group",_extends({},Gt,{ref:Tt}),lt&&!Ot&&reactExports.createElement("mesh",{castShadow:ct,receiveShadow:dt,ref:zt},mt||reactExports.createElement("planeGeometry",null),ht||reactExports.createElement("shaderMaterial",{side:DoubleSide,vertexShader:Vn.vertexShader,fragmentShader:Vn.fragmentShader})))});function mergeRefs(et){return function(_){et.forEach(function(_e){typeof _e=="function"?_e(_):_e!=null&&(_e.current=_)})}}const subscribeWithSelector=et=>(_,_e,tt)=>{const nt=tt.subscribe;return tt.subscribe=(rt,st,ot)=>{let at=rt;if(st){const At=(ot==null?void 0:ot.equalityFn)||Object.is;let lt=rt(tt.getState());at=gt=>{const ct=rt(gt);if(!At(lt,ct)){const dt=lt;st(lt=ct,dt)}},ot!=null&&ot.fireImmediately&&st(lt,lt)}return nt(at)},et(_,_e,tt)},context=reactExports.createContext(null);function KeyboardControls({map:et,children:_,onChange:_e,domElement:tt}){const nt=et.map(ot=>ot.name+ot.keys).join("-"),it=reactExports.useMemo(()=>create$1(subscribeWithSelector(()=>et.reduce((ot,at)=>({...ot,[at.name]:!1}),{}))),[nt]),rt=reactExports.useMemo(()=>[it.subscribe,it.getState,it],[nt]),st=it.setState;return reactExports.useEffect(()=>{const at=et.map(({name:ct,keys:dt,up:ht})=>({keys:dt,up:ht,fn:mt=>{st({[ct]:mt}),_e&&_e(ct,mt,rt[2]())}})).reduce((ct,{keys:dt,fn:ht,up:mt=!0})=>(dt.forEach(Ct=>ct[Ct]={fn:ht,pressed:!1,up:mt}),ct),{}),At=({key:ct,code:dt})=>{const ht=at[ct]||at[dt];if(!ht)return;const{fn:mt,pressed:Ct,up:ft}=ht;ht.pressed=!0,(ft||!Ct)&&mt(!0)},lt=({key:ct,code:dt})=>{const ht=at[ct]||at[dt];if(!ht)return;const{fn:mt,up:Ct}=ht;ht.pressed=!1,Ct&&mt(!1)},gt=tt||window;return gt.addEventListener("keydown",At,{passive:!0}),gt.addEventListener("keyup",lt,{passive:!0}),()=>{gt.removeEventListener("keydown",At),gt.removeEventListener("keyup",lt)}},[tt,nt]),reactExports.createElement(context.Provider,{value:rt,children:_})}function useKeyboardControls(et){const[_,_e,tt]=reactExports.useContext(context);return et?tt(et):[_,_e]}function estimateBytesUsed(et){let _=0;for(let tt in et.attributes){const nt=et.getAttribute(tt);_+=nt.count*nt.itemSize*nt.array.BYTES_PER_ELEMENT}const _e=et.getIndex();return _+=_e?_e.count*_e.itemSize*_e.array.BYTES_PER_ELEMENT:0,_}function toTrianglesDrawMode$1(et,_){if(_===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),et;if(_===TriangleFanDrawMode||_===TriangleStripDrawMode){let _e=et.getIndex();if(_e===null){const rt=[],st=et.getAttribute("position");if(st!==void 0){for(let ot=0;ot<st.count;ot++)rt.push(ot);et.setIndex(rt),_e=et.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),et}const tt=_e.count-2,nt=[];if(_e)if(_===TriangleFanDrawMode)for(let rt=1;rt<=tt;rt++)nt.push(_e.getX(0)),nt.push(_e.getX(rt)),nt.push(_e.getX(rt+1));else for(let rt=0;rt<tt;rt++)rt%2===0?(nt.push(_e.getX(rt)),nt.push(_e.getX(rt+1)),nt.push(_e.getX(rt+2))):(nt.push(_e.getX(rt+2)),nt.push(_e.getX(rt+1)),nt.push(_e.getX(rt)));nt.length/3!==tt&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const it=et.clone();return it.setIndex(nt),it.clearGroups(),it}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",_),et}const isCubeTexture=et=>et&&et.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(_,_e){var tt,nt;const it=isCubeTexture(_),st=((nt=it?(tt=_.image[0])==null?void 0:tt.width:_.image.width)!=null?nt:1024)/4,ot=Math.floor(Math.log2(st)),at=Math.pow(2,ot),At=3*Math.max(at,16*7),lt=4*at,gt=[it?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/At}`,`#define CUBEUV_TEXEL_HEIGHT ${1/lt}`,`#define CUBEUV_MAX_MIP ${ot}.0`],ct=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,dt=gt.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,ht={map:{value:_},height:{value:(_e==null?void 0:_e.height)||15},radius:{value:(_e==null?void 0:_e.radius)||100}},mt=new IcosahedronGeometry(1,16),Ct=new ShaderMaterial({uniforms:ht,fragmentShader:dt,vertexShader:ct,side:DoubleSide});super(mt,Ct)}set radius(_){this.material.uniforms.radius.value=_}get radius(){return this.material.uniforms.radius.value}set height(_){this.material.uniforms.height.value=_}get height(){return this.material.uniforms.height.value}}function retarget(et,_,_e={}){const tt=new Vector3,nt=new Quaternion$2,it=new Vector3,rt=new Matrix4,st=new Matrix4,ot=new Matrix4;_e.preserveMatrix=_e.preserveMatrix!==void 0?_e.preserveMatrix:!0,_e.preservePosition=_e.preservePosition!==void 0?_e.preservePosition:!0,_e.preserveHipPosition=_e.preserveHipPosition!==void 0?_e.preserveHipPosition:!1,_e.useTargetMatrix=_e.useTargetMatrix!==void 0?_e.useTargetMatrix:!1,_e.hip=_e.hip!==void 0?_e.hip:"hip",_e.names=_e.names||{};const at=_.isObject3D?_.skeleton.bones:getBones(_),At=et.isObject3D?et.skeleton.bones:getBones(et);let lt,gt,ct,dt,ht;if(et.isObject3D?et.skeleton.pose():(_e.useTargetMatrix=!0,_e.preserveMatrix=!1),_e.preservePosition){ht=[];for(let mt=0;mt<At.length;mt++)ht.push(At[mt].position.clone())}if(_e.preserveMatrix){et.updateMatrixWorld(),et.matrixWorld.identity();for(let mt=0;mt<et.children.length;++mt)et.children[mt].updateMatrixWorld(!0)}if(_e.offsets){lt=[];for(let mt=0;mt<At.length;++mt)gt=At[mt],ct=_e.names[gt.name]||gt.name,_e.offsets[ct]&&(gt.matrix.multiply(_e.offsets[ct]),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale),gt.updateMatrixWorld()),lt.push(gt.matrixWorld.clone())}for(let mt=0;mt<At.length;++mt){if(gt=At[mt],ct=_e.names[gt.name]||gt.name,dt=getBoneByName(ct,at),ot.copy(gt.matrixWorld),dt){if(dt.updateMatrixWorld(),_e.useTargetMatrix?st.copy(dt.matrixWorld):(st.copy(et.matrixWorld).invert(),st.multiply(dt.matrixWorld)),it.setFromMatrixScale(st),st.scale(it.set(1/it.x,1/it.y,1/it.z)),ot.makeRotationFromQuaternion(nt.setFromRotationMatrix(st)),et.isObject3D){const Ct=At.indexOf(gt),ft=lt?lt[Ct]:rt.copy(et.skeleton.boneInverses[Ct]).invert();ot.multiply(ft)}ot.copyPosition(st)}gt.parent&&gt.parent.isBone?(gt.matrix.copy(gt.parent.matrixWorld).invert(),gt.matrix.multiply(ot)):gt.matrix.copy(ot),_e.preserveHipPosition&&ct===_e.hip&&gt.matrix.setPosition(tt.set(0,gt.position.y,0)),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale),gt.updateMatrixWorld()}if(_e.preservePosition)for(let mt=0;mt<At.length;++mt)gt=At[mt],ct=_e.names[gt.name]||gt.name,ct!==_e.hip&&gt.position.copy(ht[mt]);_e.preserveMatrix&&et.updateMatrixWorld(!0)}function retargetClip(et,_,_e,tt={}){tt.useFirstFramePosition=tt.useFirstFramePosition!==void 0?tt.useFirstFramePosition:!1,tt.fps=tt.fps!==void 0?tt.fps:30,tt.names=tt.names||[],_.isObject3D||(_=getHelperFromSkeleton(_));const nt=Math.round(_e.duration*(tt.fps/1e3)*1e3),it=1/tt.fps,rt=[],st=new AnimationMixer(_),ot=getBones(et.skeleton),at=[];let At,lt,gt,ct,dt;st.clipAction(_e).play(),st.update(0),_.updateMatrixWorld();for(let ht=0;ht<nt;++ht){const mt=ht*it;retarget(et,_,tt);for(let Ct=0;Ct<ot.length;++Ct)dt=tt.names[ot[Ct].name]||ot[Ct].name,gt=getBoneByName(dt,_.skeleton),gt&&(lt=ot[Ct],ct=at[Ct]=at[Ct]||{bone:lt},tt.hip===dt&&(ct.pos||(ct.pos={times:new Float32Array(nt),values:new Float32Array(nt*3)}),tt.useFirstFramePosition&&(ht===0&&(At=lt.position.clone()),lt.position.sub(At)),ct.pos.times[ht]=mt,lt.position.toArray(ct.pos.values,ht*3)),ct.quat||(ct.quat={times:new Float32Array(nt),values:new Float32Array(nt*4)}),ct.quat.times[ht]=mt,lt.quaternion.toArray(ct.quat.values,ht*4));st.update(it),_.updateMatrixWorld()}for(let ht=0;ht<at.length;++ht)ct=at[ht],ct&&(ct.pos&&rt.push(new VectorKeyframeTrack(".bones["+ct.bone.name+"].position",ct.pos.times,ct.pos.values)),rt.push(new QuaternionKeyframeTrack(".bones["+ct.bone.name+"].quaternion",ct.quat.times,ct.quat.values)));return st.uncacheAction(_e),new AnimationClip(_e.name,-1,rt)}function clone(et){const _=new Map,_e=new Map,tt=et.clone();return parallelTraverse(et,tt,function(nt,it){_.set(it,nt),_e.set(nt,it)}),tt.traverse(function(nt){if(!nt.isSkinnedMesh)return;const it=nt,rt=_.get(nt),st=rt.skeleton.bones;it.skeleton=rt.skeleton.clone(),it.bindMatrix.copy(rt.bindMatrix),it.skeleton.bones=st.map(function(ot){return _e.get(ot)}),it.bind(it.skeleton,it.bindMatrix)}),tt}function getBoneByName(et,_){for(let _e=0,tt=getBones(_);_e<tt.length;_e++)if(et===tt[_e].name)return tt[_e]}function getBones(et){return Array.isArray(et)?et:et.bones}function getHelperFromSkeleton(et){const _=new SkeletonHelper(et.bones[0]);return _.skeleton=et,_}function parallelTraverse(et,_,_e){_e(et,_);for(let tt=0;tt<et.children.length;tt++)parallelTraverse(et.children[tt],_.children[tt],_e)}const SkeletonUtils={retarget,retargetClip,clone};var __defProp=Object.defineProperty,__defNormalProp=(et,_,_e)=>_ in et?__defProp(et,_,{enumerable:!0,configurable:!0,writable:!0,value:_e}):et[_]=_e,__publicField=(et,_,_e)=>(__defNormalProp(et,typeof _!="symbol"?_+"":_,_e),_e);const moduloWrapAround=(et,_)=>(et%_+_)%_;let OrbitControls$1=class extends EventDispatcher{constructor(_,_e){super(),__publicField(this,"object"),__publicField(this,"domElement"),__publicField(this,"enabled",!0),__publicField(this,"target",new Vector3),__publicField(this,"minDistance",0),__publicField(this,"maxDistance",1/0),__publicField(this,"minZoom",0),__publicField(this,"maxZoom",1/0),__publicField(this,"minPolarAngle",0),__publicField(this,"maxPolarAngle",Math.PI),__publicField(this,"minAzimuthAngle",-1/0),__publicField(this,"maxAzimuthAngle",1/0),__publicField(this,"enableDamping",!1),__publicField(this,"dampingFactor",.05),__publicField(this,"enableZoom",!0),__publicField(this,"zoomSpeed",1),__publicField(this,"enableRotate",!0),__publicField(this,"rotateSpeed",1),__publicField(this,"enablePan",!0),__publicField(this,"panSpeed",1),__publicField(this,"screenSpacePanning",!0),__publicField(this,"keyPanSpeed",7),__publicField(this,"autoRotate",!1),__publicField(this,"autoRotateSpeed",2),__publicField(this,"reverseOrbit",!1),__publicField(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField(this,"target0"),__publicField(this,"position0"),__publicField(this,"zoom0"),__publicField(this,"_domElementKeyEvents",null),__publicField(this,"getPolarAngle"),__publicField(this,"getAzimuthalAngle"),__publicField(this,"setPolarAngle"),__publicField(this,"setAzimuthalAngle"),__publicField(this,"getDistance"),__publicField(this,"listenToKeyEvents"),__publicField(this,"saveState"),__publicField(this,"reset"),__publicField(this,"update"),__publicField(this,"connect"),__publicField(this,"dispose"),this.object=_,this.domElement=_e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>At.phi,this.getAzimuthalAngle=()=>At.theta,this.setPolarAngle=jt=>{let cn=moduloWrapAround(jt,2*Math.PI),yn=At.phi;yn<0&&(yn+=2*Math.PI),cn<0&&(cn+=2*Math.PI);let bn=Math.abs(cn-yn);2*Math.PI-bn<bn&&(cn<yn?cn+=2*Math.PI:yn+=2*Math.PI),lt.phi=cn-yn,tt.update()},this.setAzimuthalAngle=jt=>{let cn=moduloWrapAround(jt,2*Math.PI),yn=At.theta;yn<0&&(yn+=2*Math.PI),cn<0&&(cn+=2*Math.PI);let bn=Math.abs(cn-yn);2*Math.PI-bn<bn&&(cn<yn?cn+=2*Math.PI:yn+=2*Math.PI),lt.theta=cn-yn,tt.update()},this.getDistance=()=>tt.object.position.distanceTo(tt.target),this.listenToKeyEvents=jt=>{jt.addEventListener("keydown",en),this._domElementKeyEvents=jt},this.saveState=()=>{tt.target0.copy(tt.target),tt.position0.copy(tt.object.position),tt.zoom0=tt.object.zoom},this.reset=()=>{tt.target.copy(tt.target0),tt.object.position.copy(tt.position0),tt.object.zoom=tt.zoom0,tt.object.updateProjectionMatrix(),tt.dispatchEvent(nt),tt.update(),ot=st.NONE},this.update=(()=>{const jt=new Vector3,cn=new Quaternion$2().setFromUnitVectors(_.up,new Vector3(0,1,0)),yn=cn.clone().invert(),bn=new Vector3,En=new Quaternion$2,Dn=2*Math.PI;return function(){const qt=tt.object.position;jt.copy(qt).sub(tt.target),jt.applyQuaternion(cn),At.setFromVector3(jt),tt.autoRotate&&ot===st.NONE&&Nt(Mt()),tt.enableDamping?(At.theta+=lt.theta*tt.dampingFactor,At.phi+=lt.phi*tt.dampingFactor):(At.theta+=lt.theta,At.phi+=lt.phi);let hn=tt.minAzimuthAngle,Wn=tt.maxAzimuthAngle;return isFinite(hn)&&isFinite(Wn)&&(hn<-Math.PI?hn+=Dn:hn>Math.PI&&(hn-=Dn),Wn<-Math.PI?Wn+=Dn:Wn>Math.PI&&(Wn-=Dn),hn<=Wn?At.theta=Math.max(hn,Math.min(Wn,At.theta)):At.theta=At.theta>(hn+Wn)/2?Math.max(hn,At.theta):Math.min(Wn,At.theta)),At.phi=Math.max(tt.minPolarAngle,Math.min(tt.maxPolarAngle,At.phi)),At.makeSafe(),At.radius*=gt,At.radius=Math.max(tt.minDistance,Math.min(tt.maxDistance,At.radius)),tt.enableDamping===!0?tt.target.addScaledVector(ct,tt.dampingFactor):tt.target.add(ct),jt.setFromSpherical(At),jt.applyQuaternion(yn),qt.copy(tt.target).add(jt),tt.object.lookAt(tt.target),tt.enableDamping===!0?(lt.theta*=1-tt.dampingFactor,lt.phi*=1-tt.dampingFactor,ct.multiplyScalar(1-tt.dampingFactor)):(lt.set(0,0,0),ct.set(0,0,0)),gt=1,dt||bn.distanceToSquared(tt.object.position)>at||8*(1-En.dot(tt.object.quaternion))>at?(tt.dispatchEvent(nt),bn.copy(tt.object.position),En.copy(tt.object.quaternion),dt=!1,!0):!1}})(),this.connect=jt=>{jt===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),tt.domElement=jt,tt.domElement.style.touchAction="none",tt.domElement.addEventListener("contextmenu",wn),tt.domElement.addEventListener("pointerdown",kn),tt.domElement.addEventListener("pointercancel",Mn),tt.domElement.addEventListener("wheel",Kt)},this.dispose=()=>{var jt,cn,yn,bn,En,Dn;(jt=tt.domElement)==null||jt.removeEventListener("contextmenu",wn),(cn=tt.domElement)==null||cn.removeEventListener("pointerdown",kn),(yn=tt.domElement)==null||yn.removeEventListener("pointercancel",Mn),(bn=tt.domElement)==null||bn.removeEventListener("wheel",Kt),(En=tt.domElement)==null||En.ownerDocument.removeEventListener("pointermove",pn),(Dn=tt.domElement)==null||Dn.ownerDocument.removeEventListener("pointerup",Rn),tt._domElementKeyEvents!==null&&tt._domElementKeyEvents.removeEventListener("keydown",en)};const tt=this,nt={type:"change"},it={type:"start"},rt={type:"end"},st={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let ot=st.NONE;const at=1e-6,At=new Spherical,lt=new Spherical;let gt=1;const ct=new Vector3;let dt=!1;const ht=new Vector2,mt=new Vector2,Ct=new Vector2,ft=new Vector2,pt=new Vector2,Vt=new Vector2,yt=new Vector2,Gt=new Vector2,Bt=new Vector2,vt=[],wt={};function Mt(){return 2*Math.PI/60/60*tt.autoRotateSpeed}function kt(){return Math.pow(.95,tt.zoomSpeed)}function Nt(jt){tt.reverseOrbit?lt.theta+=jt:lt.theta-=jt}function Yt(jt){tt.reverseOrbit?lt.phi+=jt:lt.phi-=jt}const Lt=(()=>{const jt=new Vector3;return function(yn,bn){jt.setFromMatrixColumn(bn,0),jt.multiplyScalar(-yn),ct.add(jt)}})(),Xt=(()=>{const jt=new Vector3;return function(yn,bn){tt.screenSpacePanning===!0?jt.setFromMatrixColumn(bn,1):(jt.setFromMatrixColumn(bn,0),jt.crossVectors(tt.object.up,jt)),jt.multiplyScalar(yn),ct.add(jt)}})(),_t=(()=>{const jt=new Vector3;return function(yn,bn){const En=tt.domElement;if(En&&tt.object instanceof PerspectiveCamera$1&&tt.object.isPerspectiveCamera){const Dn=tt.object.position;jt.copy(Dn).sub(tt.target);let jn=jt.length();jn*=Math.tan(tt.object.fov/2*Math.PI/180),Lt(2*yn*jn/En.clientHeight,tt.object.matrix),Xt(2*bn*jn/En.clientHeight,tt.object.matrix)}else En&&tt.object instanceof OrthographicCamera&&tt.object.isOrthographicCamera?(Lt(yn*(tt.object.right-tt.object.left)/tt.object.zoom/En.clientWidth,tt.object.matrix),Xt(bn*(tt.object.top-tt.object.bottom)/tt.object.zoom/En.clientHeight,tt.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),tt.enablePan=!1)}})();function Tt(jt){tt.object instanceof PerspectiveCamera$1&&tt.object.isPerspectiveCamera?gt/=jt:tt.object instanceof OrthographicCamera&&tt.object.isOrthographicCamera?(tt.object.zoom=Math.max(tt.minZoom,Math.min(tt.maxZoom,tt.object.zoom*jt)),tt.object.updateProjectionMatrix(),dt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),tt.enableZoom=!1)}function St(jt){tt.object instanceof PerspectiveCamera$1&&tt.object.isPerspectiveCamera?gt*=jt:tt.object instanceof OrthographicCamera&&tt.object.isOrthographicCamera?(tt.object.zoom=Math.max(tt.minZoom,Math.min(tt.maxZoom,tt.object.zoom/jt)),tt.object.updateProjectionMatrix(),dt=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),tt.enableZoom=!1)}function Zt(jt){ht.set(jt.clientX,jt.clientY)}function Et(jt){yt.set(jt.clientX,jt.clientY)}function Wt(jt){ft.set(jt.clientX,jt.clientY)}function Ht(jt){mt.set(jt.clientX,jt.clientY),Ct.subVectors(mt,ht).multiplyScalar(tt.rotateSpeed);const cn=tt.domElement;cn&&(Nt(2*Math.PI*Ct.x/cn.clientHeight),Yt(2*Math.PI*Ct.y/cn.clientHeight)),ht.copy(mt),tt.update()}function zt(jt){Gt.set(jt.clientX,jt.clientY),Bt.subVectors(Gt,yt),Bt.y>0?Tt(kt()):Bt.y<0&&St(kt()),yt.copy(Gt),tt.update()}function Pt(jt){pt.set(jt.clientX,jt.clientY),Vt.subVectors(pt,ft).multiplyScalar(tt.panSpeed),_t(Vt.x,Vt.y),ft.copy(pt),tt.update()}function Ot(jt){jt.deltaY<0?St(kt()):jt.deltaY>0&&Tt(kt()),tt.update()}function Jt(jt){let cn=!1;switch(jt.code){case tt.keys.UP:_t(0,tt.keyPanSpeed),cn=!0;break;case tt.keys.BOTTOM:_t(0,-tt.keyPanSpeed),cn=!0;break;case tt.keys.LEFT:_t(tt.keyPanSpeed,0),cn=!0;break;case tt.keys.RIGHT:_t(-tt.keyPanSpeed,0),cn=!0;break}cn&&(jt.preventDefault(),tt.update())}function rn(){if(vt.length==1)ht.set(vt[0].pageX,vt[0].pageY);else{const jt=.5*(vt[0].pageX+vt[1].pageX),cn=.5*(vt[0].pageY+vt[1].pageY);ht.set(jt,cn)}}function sn(){if(vt.length==1)ft.set(vt[0].pageX,vt[0].pageY);else{const jt=.5*(vt[0].pageX+vt[1].pageX),cn=.5*(vt[0].pageY+vt[1].pageY);ft.set(jt,cn)}}function Vn(){const jt=vt[0].pageX-vt[1].pageX,cn=vt[0].pageY-vt[1].pageY,yn=Math.sqrt(jt*jt+cn*cn);yt.set(0,yn)}function dn(){tt.enableZoom&&Vn(),tt.enablePan&&sn()}function gn(){tt.enableZoom&&Vn(),tt.enableRotate&&rn()}function $t(jt){if(vt.length==1)mt.set(jt.pageX,jt.pageY);else{const yn=Nn(jt),bn=.5*(jt.pageX+yn.x),En=.5*(jt.pageY+yn.y);mt.set(bn,En)}Ct.subVectors(mt,ht).multiplyScalar(tt.rotateSpeed);const cn=tt.domElement;cn&&(Nt(2*Math.PI*Ct.x/cn.clientHeight),Yt(2*Math.PI*Ct.y/cn.clientHeight)),ht.copy(mt)}function tn(jt){if(vt.length==1)pt.set(jt.pageX,jt.pageY);else{const cn=Nn(jt),yn=.5*(jt.pageX+cn.x),bn=.5*(jt.pageY+cn.y);pt.set(yn,bn)}Vt.subVectors(pt,ft).multiplyScalar(tt.panSpeed),_t(Vt.x,Vt.y),ft.copy(pt)}function nn(jt){const cn=Nn(jt),yn=jt.pageX-cn.x,bn=jt.pageY-cn.y,En=Math.sqrt(yn*yn+bn*bn);Gt.set(0,En),Bt.set(0,Math.pow(Gt.y/yt.y,tt.zoomSpeed)),Tt(Bt.y),yt.copy(Gt)}function Bn(jt){tt.enableZoom&&nn(jt),tt.enablePan&&tn(jt)}function Gn(jt){tt.enableZoom&&nn(jt),tt.enableRotate&&$t(jt)}function kn(jt){var cn,yn;tt.enabled!==!1&&(vt.length===0&&((cn=tt.domElement)==null||cn.ownerDocument.addEventListener("pointermove",pn),(yn=tt.domElement)==null||yn.ownerDocument.addEventListener("pointerup",Rn)),Fn(jt),jt.pointerType==="touch"?un(jt):In(jt))}function pn(jt){tt.enabled!==!1&&(jt.pointerType==="touch"?Sn(jt):Dt(jt))}function Rn(jt){var cn,yn,bn;_n(jt),vt.length===0&&((cn=tt.domElement)==null||cn.releasePointerCapture(jt.pointerId),(yn=tt.domElement)==null||yn.ownerDocument.removeEventListener("pointermove",pn),(bn=tt.domElement)==null||bn.ownerDocument.removeEventListener("pointerup",Rn)),tt.dispatchEvent(rt),ot=st.NONE}function Mn(jt){_n(jt)}function In(jt){let cn;switch(jt.button){case 0:cn=tt.mouseButtons.LEFT;break;case 1:cn=tt.mouseButtons.MIDDLE;break;case 2:cn=tt.mouseButtons.RIGHT;break;default:cn=-1}switch(cn){case MOUSE.DOLLY:if(tt.enableZoom===!1)return;Et(jt),ot=st.DOLLY;break;case MOUSE.ROTATE:if(jt.ctrlKey||jt.metaKey||jt.shiftKey){if(tt.enablePan===!1)return;Wt(jt),ot=st.PAN}else{if(tt.enableRotate===!1)return;Zt(jt),ot=st.ROTATE}break;case MOUSE.PAN:if(jt.ctrlKey||jt.metaKey||jt.shiftKey){if(tt.enableRotate===!1)return;Zt(jt),ot=st.ROTATE}else{if(tt.enablePan===!1)return;Wt(jt),ot=st.PAN}break;default:ot=st.NONE}ot!==st.NONE&&tt.dispatchEvent(it)}function Dt(jt){if(tt.enabled!==!1)switch(ot){case st.ROTATE:if(tt.enableRotate===!1)return;Ht(jt);break;case st.DOLLY:if(tt.enableZoom===!1)return;zt(jt);break;case st.PAN:if(tt.enablePan===!1)return;Pt(jt);break}}function Kt(jt){tt.enabled===!1||tt.enableZoom===!1||ot!==st.NONE&&ot!==st.ROTATE||(jt.preventDefault(),tt.dispatchEvent(it),Ot(jt),tt.dispatchEvent(rt))}function en(jt){tt.enabled===!1||tt.enablePan===!1||Jt(jt)}function un(jt){switch(fn(jt),vt.length){case 1:switch(tt.touches.ONE){case TOUCH.ROTATE:if(tt.enableRotate===!1)return;rn(),ot=st.TOUCH_ROTATE;break;case TOUCH.PAN:if(tt.enablePan===!1)return;sn(),ot=st.TOUCH_PAN;break;default:ot=st.NONE}break;case 2:switch(tt.touches.TWO){case TOUCH.DOLLY_PAN:if(tt.enableZoom===!1&&tt.enablePan===!1)return;dn(),ot=st.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(tt.enableZoom===!1&&tt.enableRotate===!1)return;gn(),ot=st.TOUCH_DOLLY_ROTATE;break;default:ot=st.NONE}break;default:ot=st.NONE}ot!==st.NONE&&tt.dispatchEvent(it)}function Sn(jt){switch(fn(jt),ot){case st.TOUCH_ROTATE:if(tt.enableRotate===!1)return;$t(jt),tt.update();break;case st.TOUCH_PAN:if(tt.enablePan===!1)return;tn(jt),tt.update();break;case st.TOUCH_DOLLY_PAN:if(tt.enableZoom===!1&&tt.enablePan===!1)return;Bn(jt),tt.update();break;case st.TOUCH_DOLLY_ROTATE:if(tt.enableZoom===!1&&tt.enableRotate===!1)return;Gn(jt),tt.update();break;default:ot=st.NONE}}function wn(jt){tt.enabled!==!1&&jt.preventDefault()}function Fn(jt){vt.push(jt)}function _n(jt){delete wt[jt.pointerId];for(let cn=0;cn<vt.length;cn++)if(vt[cn].pointerId==jt.pointerId){vt.splice(cn,1);return}}function fn(jt){let cn=wt[jt.pointerId];cn===void 0&&(cn=new Vector2,wt[jt.pointerId]=cn),cn.set(jt.pageX,jt.pageY)}function Nn(jt){const cn=jt.pointerId===vt[0].pointerId?vt[1]:vt[0];return wt[cn.pointerId]}_e!==void 0&&this.connect(_e),this.update()}},GLTFLoader$1=class extends Loader{constructor(_){super(_),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(_e){return new GLTFMaterialsClearcoatExtension$1(_e)}),this.register(function(_e){return new GLTFTextureBasisUExtension$1(_e)}),this.register(function(_e){return new GLTFTextureWebPExtension$1(_e)}),this.register(function(_e){return new GLTFTextureAVIFExtension(_e)}),this.register(function(_e){return new GLTFMaterialsSheenExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsTransmissionExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsVolumeExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsIorExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsEmissiveStrengthExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsSpecularExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsIridescenceExtension$1(_e)}),this.register(function(_e){return new GLTFMaterialsAnisotropyExtension(_e)}),this.register(function(_e){return new GLTFLightsExtension$1(_e)}),this.register(function(_e){return new GLTFMeshoptCompression$1(_e)}),this.register(function(_e){return new GLTFMeshGpuInstancing$1(_e)})}load(_,_e,tt,nt){const it=this;let rt;this.resourcePath!==""?rt=this.resourcePath:this.path!==""?rt=this.path:rt=LoaderUtils.extractUrlBase(_),this.manager.itemStart(_);const st=function(at){nt?nt(at):console.error(at),it.manager.itemError(_),it.manager.itemEnd(_)},ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(_,function(at){try{it.parse(at,rt,function(At){_e(At),it.manager.itemEnd(_)},st)}catch(At){st(At)}},tt,st)}setDRACOLoader(_){return this.dracoLoader=_,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(_){return this.ktx2Loader=_,this}setMeshoptDecoder(_){return this.meshoptDecoder=_,this}register(_){return this.pluginCallbacks.indexOf(_)===-1&&this.pluginCallbacks.push(_),this}unregister(_){return this.pluginCallbacks.indexOf(_)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_),1),this}parse(_,_e,tt,nt){let it;const rt={},st={};if(typeof _=="string")it=JSON.parse(_);else if(_ instanceof ArrayBuffer)if(LoaderUtils.decodeText(new Uint8Array(_.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC$1){try{rt[EXTENSIONS$1.KHR_BINARY_GLTF]=new GLTFBinaryExtension$1(_)}catch(At){nt&&nt(At);return}it=JSON.parse(rt[EXTENSIONS$1.KHR_BINARY_GLTF].content)}else it=JSON.parse(LoaderUtils.decodeText(new Uint8Array(_)));else it=_;if(it.asset===void 0||it.asset.version[0]<2){nt&&nt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const ot=new GLTFParser$1(it,{path:_e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ot.fileLoader.setRequestHeader(this.requestHeader);for(let at=0;at<this.pluginCallbacks.length;at++){const At=this.pluginCallbacks[at](ot);st[At.name]=At,rt[At.name]=!0}if(it.extensionsUsed)for(let at=0;at<it.extensionsUsed.length;++at){const At=it.extensionsUsed[at],lt=it.extensionsRequired||[];switch(At){case EXTENSIONS$1.KHR_MATERIALS_UNLIT:rt[At]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION:rt[At]=new GLTFDracoMeshCompressionExtension$1(it,this.dracoLoader);break;case EXTENSIONS$1.KHR_TEXTURE_TRANSFORM:rt[At]=new GLTFTextureTransformExtension$1;break;case EXTENSIONS$1.KHR_MESH_QUANTIZATION:rt[At]=new GLTFMeshQuantizationExtension$1;break;default:lt.indexOf(At)>=0&&st[At]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+At+'".')}}ot.setExtensions(rt),ot.setPlugins(st),ot.parse(tt,nt)}parseAsync(_,_e){const tt=this;return new Promise(function(nt,it){tt.parse(_,_e,nt,it)})}};function GLTFRegistry$1(){let et={};return{get:function(_){return et[_]},add:function(_,_e){et[_]=_e},remove:function(_){delete et[_]},removeAll:function(){et={}}}}const EXTENSIONS$1={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let GLTFLightsExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const _=this.parser,_e=this.parser.json.nodes||[];for(let tt=0,nt=_e.length;tt<nt;tt++){const it=_e[tt];it.extensions&&it.extensions[this.name]&&it.extensions[this.name].light!==void 0&&_._addNodeRef(this.cache,it.extensions[this.name].light)}}_loadLight(_){const _e=this.parser,tt="light:"+_;let nt=_e.cache.get(tt);if(nt)return nt;const it=_e.json,ot=((it.extensions&&it.extensions[this.name]||{}).lights||[])[_];let at;const At=new Color(16777215);ot.color!==void 0&&At.fromArray(ot.color);const lt=ot.range!==void 0?ot.range:0;switch(ot.type){case"directional":at=new DirectionalLight(At),at.target.position.set(0,0,-1),at.add(at.target);break;case"point":at=new PointLight(At),at.distance=lt;break;case"spot":at=new SpotLight(At),at.distance=lt,ot.spot=ot.spot||{},ot.spot.innerConeAngle=ot.spot.innerConeAngle!==void 0?ot.spot.innerConeAngle:0,ot.spot.outerConeAngle=ot.spot.outerConeAngle!==void 0?ot.spot.outerConeAngle:Math.PI/4,at.angle=ot.spot.outerConeAngle,at.penumbra=1-ot.spot.innerConeAngle/ot.spot.outerConeAngle,at.target.position.set(0,0,-1),at.add(at.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ot.type)}return at.position.set(0,0,0),at.decay=2,assignExtrasToUserData$1(at,ot),ot.intensity!==void 0&&(at.intensity=ot.intensity),at.name=_e.createUniqueName(ot.name||"light_"+_),nt=Promise.resolve(at),_e.cache.add(tt,nt),nt}getDependency(_,_e){if(_==="light")return this._loadLight(_e)}createNodeAttachment(_){const _e=this,tt=this.parser,it=tt.json.nodes[_],st=(it.extensions&&it.extensions[this.name]||{}).light;return st===void 0?null:this._loadLight(st).then(function(ot){return tt._getNodeRef(_e.cache,st,ot)})}},GLTFMaterialsUnlitExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(_,_e,tt){const nt=[];_.color=new Color(1,1,1),_.opacity=1;const it=_e.pbrMetallicRoughness;if(it){if(Array.isArray(it.baseColorFactor)){const rt=it.baseColorFactor;_.color.fromArray(rt),_.opacity=rt[3]}it.baseColorTexture!==void 0&&nt.push(tt.assignTexture(_,"map",it.baseColorTexture,3001))}return Promise.all(nt)}},GLTFMaterialsEmissiveStrengthExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(_,_e){const nt=this.parser.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=nt.extensions[this.name].emissiveStrength;return it!==void 0&&(_e.emissiveIntensity=it),Promise.resolve()}},GLTFMaterialsClearcoatExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_CLEARCOAT}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];if(rt.clearcoatFactor!==void 0&&(_e.clearcoat=rt.clearcoatFactor),rt.clearcoatTexture!==void 0&&it.push(tt.assignTexture(_e,"clearcoatMap",rt.clearcoatTexture)),rt.clearcoatRoughnessFactor!==void 0&&(_e.clearcoatRoughness=rt.clearcoatRoughnessFactor),rt.clearcoatRoughnessTexture!==void 0&&it.push(tt.assignTexture(_e,"clearcoatRoughnessMap",rt.clearcoatRoughnessTexture)),rt.clearcoatNormalTexture!==void 0&&(it.push(tt.assignTexture(_e,"clearcoatNormalMap",rt.clearcoatNormalTexture)),rt.clearcoatNormalTexture.scale!==void 0)){const st=rt.clearcoatNormalTexture.scale;_e.clearcoatNormalScale=new Vector2(st,st)}return Promise.all(it)}},GLTFMaterialsIridescenceExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_IRIDESCENCE}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];return rt.iridescenceFactor!==void 0&&(_e.iridescence=rt.iridescenceFactor),rt.iridescenceTexture!==void 0&&it.push(tt.assignTexture(_e,"iridescenceMap",rt.iridescenceTexture)),rt.iridescenceIor!==void 0&&(_e.iridescenceIOR=rt.iridescenceIor),_e.iridescenceThicknessRange===void 0&&(_e.iridescenceThicknessRange=[100,400]),rt.iridescenceThicknessMinimum!==void 0&&(_e.iridescenceThicknessRange[0]=rt.iridescenceThicknessMinimum),rt.iridescenceThicknessMaximum!==void 0&&(_e.iridescenceThicknessRange[1]=rt.iridescenceThicknessMaximum),rt.iridescenceThicknessTexture!==void 0&&it.push(tt.assignTexture(_e,"iridescenceThicknessMap",rt.iridescenceThicknessTexture)),Promise.all(it)}},GLTFMaterialsSheenExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_SHEEN}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[];_e.sheenColor=new Color(0,0,0),_e.sheenRoughness=0,_e.sheen=1;const rt=nt.extensions[this.name];return rt.sheenColorFactor!==void 0&&_e.sheenColor.fromArray(rt.sheenColorFactor),rt.sheenRoughnessFactor!==void 0&&(_e.sheenRoughness=rt.sheenRoughnessFactor),rt.sheenColorTexture!==void 0&&it.push(tt.assignTexture(_e,"sheenColorMap",rt.sheenColorTexture,3001)),rt.sheenRoughnessTexture!==void 0&&it.push(tt.assignTexture(_e,"sheenRoughnessMap",rt.sheenRoughnessTexture)),Promise.all(it)}},GLTFMaterialsTransmissionExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_TRANSMISSION}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];return rt.transmissionFactor!==void 0&&(_e.transmission=rt.transmissionFactor),rt.transmissionTexture!==void 0&&it.push(tt.assignTexture(_e,"transmissionMap",rt.transmissionTexture)),Promise.all(it)}},GLTFMaterialsVolumeExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_VOLUME}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];_e.thickness=rt.thicknessFactor!==void 0?rt.thicknessFactor:0,rt.thicknessTexture!==void 0&&it.push(tt.assignTexture(_e,"thicknessMap",rt.thicknessTexture)),_e.attenuationDistance=rt.attenuationDistance||1/0;const st=rt.attenuationColor||[1,1,1];return _e.attenuationColor=new Color(st[0],st[1],st[2]),Promise.all(it)}},GLTFMaterialsIorExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_IOR}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=nt.extensions[this.name];return _e.ior=it.ior!==void 0?it.ior:1.5,Promise.resolve()}},GLTFMaterialsSpecularExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_SPECULAR}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];_e.specularIntensity=rt.specularFactor!==void 0?rt.specularFactor:1,rt.specularTexture!==void 0&&it.push(tt.assignTexture(_e,"specularIntensityMap",rt.specularTexture));const st=rt.specularColorFactor||[1,1,1];return _e.specularColor=new Color(st[0],st[1],st[2]),rt.specularColorTexture!==void 0&&it.push(tt.assignTexture(_e,"specularColorMap",rt.specularColorTexture,3001)),Promise.all(it)}};class GLTFMaterialsAnisotropyExtension{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_MATERIALS_ANISOTROPY}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];return rt.anisotropyStrength!==void 0&&(_e.anisotropy=rt.anisotropyStrength),rt.anisotropyRotation!==void 0&&(_e.anisotropyRotation=rt.anisotropyRotation),rt.anisotropyTexture!==void 0&&it.push(tt.assignTexture(_e,"anisotropyMap",rt.anisotropyTexture)),Promise.all(it)}}let GLTFTextureBasisUExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.KHR_TEXTURE_BASISU}loadTexture(_){const _e=this.parser,tt=_e.json,nt=tt.textures[_];if(!nt.extensions||!nt.extensions[this.name])return null;const it=nt.extensions[this.name],rt=_e.options.ktx2Loader;if(!rt){if(tt.extensionsRequired&&tt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return _e.loadTextureImage(_,it.source,rt)}},GLTFTextureWebPExtension$1=class{constructor(_){this.parser=_,this.name=EXTENSIONS$1.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(_){const _e=this.name,tt=this.parser,nt=tt.json,it=nt.textures[_];if(!it.extensions||!it.extensions[_e])return null;const rt=it.extensions[_e],st=nt.images[rt.source];let ot=tt.textureLoader;if(st.uri){const at=tt.options.manager.getHandler(st.uri);at!==null&&(ot=at)}return this.detectSupport().then(function(at){if(at)return tt.loadTextureImage(_,rt.source,ot);if(nt.extensionsRequired&&nt.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return tt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const _e=new Image;_e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",_e.onload=_e.onerror=function(){_(_e.height===1)}})),this.isSupported}};class GLTFTextureAVIFExtension{constructor(_){this.parser=_,this.name=EXTENSIONS$1.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(_){const _e=this.name,tt=this.parser,nt=tt.json,it=nt.textures[_];if(!it.extensions||!it.extensions[_e])return null;const rt=it.extensions[_e],st=nt.images[rt.source];let ot=tt.textureLoader;if(st.uri){const at=tt.options.manager.getHandler(st.uri);at!==null&&(ot=at)}return this.detectSupport().then(function(at){if(at)return tt.loadTextureImage(_,rt.source,ot);if(nt.extensionsRequired&&nt.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return tt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const _e=new Image;_e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",_e.onload=_e.onerror=function(){_(_e.height===1)}})),this.isSupported}}let GLTFMeshoptCompression$1=class{constructor(_){this.name=EXTENSIONS$1.EXT_MESHOPT_COMPRESSION,this.parser=_}loadBufferView(_){const _e=this.parser.json,tt=_e.bufferViews[_];if(tt.extensions&&tt.extensions[this.name]){const nt=tt.extensions[this.name],it=this.parser.getDependency("buffer",nt.buffer),rt=this.parser.options.meshoptDecoder;if(!rt||!rt.supported){if(_e.extensionsRequired&&_e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return it.then(function(st){const ot=nt.byteOffset||0,at=nt.byteLength||0,At=nt.count,lt=nt.byteStride,gt=new Uint8Array(st,ot,at);return rt.decodeGltfBufferAsync?rt.decodeGltfBufferAsync(At,lt,gt,nt.mode,nt.filter).then(function(ct){return ct.buffer}):rt.ready.then(function(){const ct=new ArrayBuffer(At*lt);return rt.decodeGltfBuffer(new Uint8Array(ct),At,lt,gt,nt.mode,nt.filter),ct})})}else return null}},GLTFMeshGpuInstancing$1=class{constructor(_){this.name=EXTENSIONS$1.EXT_MESH_GPU_INSTANCING,this.parser=_}createNodeMesh(_){const _e=this.parser.json,tt=_e.nodes[_];if(!tt.extensions||!tt.extensions[this.name]||tt.mesh===void 0)return null;const nt=_e.meshes[tt.mesh];for(const at of nt.primitives)if(at.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&at.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&at.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&at.mode!==void 0)return null;const rt=tt.extensions[this.name].attributes,st=[],ot={};for(const at in rt)st.push(this.parser.getDependency("accessor",rt[at]).then(At=>(ot[at]=At,ot[at])));return st.length<1?null:(st.push(this.parser.createNodeMesh(_)),Promise.all(st).then(at=>{const At=at.pop(),lt=At.isGroup?At.children:[At],gt=at[0].count,ct=[];for(const dt of lt){const ht=new Matrix4,mt=new Vector3,Ct=new Quaternion$2,ft=new Vector3(1,1,1),pt=new InstancedMesh(dt.geometry,dt.material,gt);for(let Vt=0;Vt<gt;Vt++)ot.TRANSLATION&&mt.fromBufferAttribute(ot.TRANSLATION,Vt),ot.ROTATION&&Ct.fromBufferAttribute(ot.ROTATION,Vt),ot.SCALE&&ft.fromBufferAttribute(ot.SCALE,Vt),pt.setMatrixAt(Vt,ht.compose(mt,Ct,ft));for(const Vt in ot)Vt!=="TRANSLATION"&&Vt!=="ROTATION"&&Vt!=="SCALE"&&dt.geometry.setAttribute(Vt,ot[Vt]);Object3D.prototype.copy.call(pt,dt),this.parser.assignFinalMaterial(pt),ct.push(pt)}return At.isGroup?(At.clear(),At.add(...ct),At):ct[0]}))}};const BINARY_EXTENSION_HEADER_MAGIC$1="glTF",BINARY_EXTENSION_HEADER_LENGTH$1=12,BINARY_EXTENSION_CHUNK_TYPES$1={JSON:1313821514,BIN:5130562};let GLTFBinaryExtension$1=class{constructor(_){this.name=EXTENSIONS$1.KHR_BINARY_GLTF,this.content=null,this.body=null;const _e=new DataView(_,0,BINARY_EXTENSION_HEADER_LENGTH$1);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(_.slice(0,4))),version:_e.getUint32(4,!0),length:_e.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC$1)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const tt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH$1,nt=new DataView(_,BINARY_EXTENSION_HEADER_LENGTH$1);let it=0;for(;it<tt;){const rt=nt.getUint32(it,!0);it+=4;const st=nt.getUint32(it,!0);if(it+=4,st===BINARY_EXTENSION_CHUNK_TYPES$1.JSON){const ot=new Uint8Array(_,BINARY_EXTENSION_HEADER_LENGTH$1+it,rt);this.content=LoaderUtils.decodeText(ot)}else if(st===BINARY_EXTENSION_CHUNK_TYPES$1.BIN){const ot=BINARY_EXTENSION_HEADER_LENGTH$1+it;this.body=_.slice(ot,ot+rt)}it+=rt}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},GLTFDracoMeshCompressionExtension$1=class{constructor(_,_e){if(!_e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=_e,this.dracoLoader.preload()}decodePrimitive(_,_e){const tt=this.json,nt=this.dracoLoader,it=_.extensions[this.name].bufferView,rt=_.extensions[this.name].attributes,st={},ot={},at={};for(const At in rt){const lt=ATTRIBUTES$1[At]||At.toLowerCase();st[lt]=rt[At]}for(const At in _.attributes){const lt=ATTRIBUTES$1[At]||At.toLowerCase();if(rt[At]!==void 0){const gt=tt.accessors[_.attributes[At]],ct=WEBGL_COMPONENT_TYPES$1[gt.componentType];at[lt]=ct.name,ot[lt]=gt.normalized===!0}}return _e.getDependency("bufferView",it).then(function(At){return new Promise(function(lt){nt.decodeDracoFile(At,function(gt){for(const ct in gt.attributes){const dt=gt.attributes[ct],ht=ot[ct];ht!==void 0&&(dt.normalized=ht)}lt(gt)},st,at)})})}},GLTFTextureTransformExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_TEXTURE_TRANSFORM}extendTexture(_,_e){return(_e.texCoord===void 0||_e.texCoord===_.channel)&&_e.offset===void 0&&_e.rotation===void 0&&_e.scale===void 0||(_=_.clone(),_e.texCoord!==void 0&&(_.channel=_e.texCoord),_e.offset!==void 0&&_.offset.fromArray(_e.offset),_e.rotation!==void 0&&(_.rotation=_e.rotation),_e.scale!==void 0&&_.repeat.fromArray(_e.scale),_.needsUpdate=!0),_}},GLTFMeshQuantizationExtension$1=class{constructor(){this.name=EXTENSIONS$1.KHR_MESH_QUANTIZATION}},GLTFCubicSplineInterpolant$1=class extends Interpolant{constructor(_,_e,tt,nt){super(_,_e,tt,nt)}copySampleValue_(_){const _e=this.resultBuffer,tt=this.sampleValues,nt=this.valueSize,it=_*nt*3+nt;for(let rt=0;rt!==nt;rt++)_e[rt]=tt[it+rt];return _e}interpolate_(_,_e,tt,nt){const it=this.resultBuffer,rt=this.sampleValues,st=this.valueSize,ot=st*2,at=st*3,At=nt-_e,lt=(tt-_e)/At,gt=lt*lt,ct=gt*lt,dt=_*at,ht=dt-at,mt=-2*ct+3*gt,Ct=ct-gt,ft=1-mt,pt=Ct-gt+lt;for(let Vt=0;Vt!==st;Vt++){const yt=rt[ht+Vt+st],Gt=rt[ht+Vt+ot]*At,Bt=rt[dt+Vt+st],vt=rt[dt+Vt]*At;it[Vt]=ft*yt+pt*Gt+mt*Bt+Ct*vt}return it}};const _q$1=new Quaternion$2;let GLTFCubicSplineQuaternionInterpolant$1=class extends GLTFCubicSplineInterpolant$1{interpolate_(_,_e,tt,nt){const it=super.interpolate_(_,_e,tt,nt);return _q$1.fromArray(it).normalize().toArray(it),it}};const WEBGL_CONSTANTS$1={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES$1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS$1={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS$1={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES$1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES$1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...REVISION.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION$1={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES$1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial$1(et){return et.DefaultMaterial===void 0&&(et.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),et.DefaultMaterial}function addUnknownExtensionsToUserData$1(et,_,_e){for(const tt in _e.extensions)et[tt]===void 0&&(_.userData.gltfExtensions=_.userData.gltfExtensions||{},_.userData.gltfExtensions[tt]=_e.extensions[tt])}function assignExtrasToUserData$1(et,_){_.extras!==void 0&&(typeof _.extras=="object"?Object.assign(et.userData,_.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_.extras))}function addMorphTargets$1(et,_,_e){let tt=!1,nt=!1,it=!1;for(let at=0,At=_.length;at<At;at++){const lt=_[at];if(lt.POSITION!==void 0&&(tt=!0),lt.NORMAL!==void 0&&(nt=!0),lt.COLOR_0!==void 0&&(it=!0),tt&&nt&&it)break}if(!tt&&!nt&&!it)return Promise.resolve(et);const rt=[],st=[],ot=[];for(let at=0,At=_.length;at<At;at++){const lt=_[at];if(tt){const gt=lt.POSITION!==void 0?_e.getDependency("accessor",lt.POSITION):et.attributes.position;rt.push(gt)}if(nt){const gt=lt.NORMAL!==void 0?_e.getDependency("accessor",lt.NORMAL):et.attributes.normal;st.push(gt)}if(it){const gt=lt.COLOR_0!==void 0?_e.getDependency("accessor",lt.COLOR_0):et.attributes.color;ot.push(gt)}}return Promise.all([Promise.all(rt),Promise.all(st),Promise.all(ot)]).then(function(at){const At=at[0],lt=at[1],gt=at[2];return tt&&(et.morphAttributes.position=At),nt&&(et.morphAttributes.normal=lt),it&&(et.morphAttributes.color=gt),et.morphTargetsRelative=!0,et})}function updateMorphTargets$1(et,_){if(et.updateMorphTargets(),_.weights!==void 0)for(let _e=0,tt=_.weights.length;_e<tt;_e++)et.morphTargetInfluences[_e]=_.weights[_e];if(_.extras&&Array.isArray(_.extras.targetNames)){const _e=_.extras.targetNames;if(et.morphTargetInfluences.length===_e.length){et.morphTargetDictionary={};for(let tt=0,nt=_e.length;tt<nt;tt++)et.morphTargetDictionary[_e[tt]]=tt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey$1(et){let _;const _e=et.extensions&&et.extensions[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION];if(_e?_="draco:"+_e.bufferView+":"+_e.indices+":"+createAttributesKey$1(_e.attributes):_=et.indices+":"+createAttributesKey$1(et.attributes)+":"+et.mode,et.targets!==void 0)for(let tt=0,nt=et.targets.length;tt<nt;tt++)_+=":"+createAttributesKey$1(et.targets[tt]);return _}function createAttributesKey$1(et){let _="";const _e=Object.keys(et).sort();for(let tt=0,nt=_e.length;tt<nt;tt++)_+=_e[tt]+":"+et[_e[tt]]+";";return _}function getNormalizedComponentScale$1(et){switch(et){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType$1(et){return et.search(/\.jpe?g($|\?)/i)>0||et.search(/^data\:image\/jpeg/)===0?"image/jpeg":et.search(/\.webp($|\?)/i)>0||et.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix$1=new Matrix4;let GLTFParser$1=class{constructor(_={},_e={}){this.json=_,this.extensions={},this.plugins={},this.options=_e,this.cache=new GLTFRegistry$1,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let tt=!1,nt=!1,it=-1;typeof navigator<"u"&&(tt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,nt=navigator.userAgent.indexOf("Firefox")>-1,it=nt?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||tt||nt&&it<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(_){this.extensions=_}setPlugins(_){this.plugins=_}parse(_,_e){const tt=this,nt=this.json,it=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(rt){return rt._markDefs&&rt._markDefs()}),Promise.all(this._invokeAll(function(rt){return rt.beforeRoot&&rt.beforeRoot()})).then(function(){return Promise.all([tt.getDependencies("scene"),tt.getDependencies("animation"),tt.getDependencies("camera")])}).then(function(rt){const st={scene:rt[0][nt.scene||0],scenes:rt[0],animations:rt[1],cameras:rt[2],asset:nt.asset,parser:tt,userData:{}};addUnknownExtensionsToUserData$1(it,st,nt),assignExtrasToUserData$1(st,nt),Promise.all(tt._invokeAll(function(ot){return ot.afterRoot&&ot.afterRoot(st)})).then(function(){_(st)})}).catch(_e)}_markDefs(){const _=this.json.nodes||[],_e=this.json.skins||[],tt=this.json.meshes||[];for(let nt=0,it=_e.length;nt<it;nt++){const rt=_e[nt].joints;for(let st=0,ot=rt.length;st<ot;st++)_[rt[st]].isBone=!0}for(let nt=0,it=_.length;nt<it;nt++){const rt=_[nt];rt.mesh!==void 0&&(this._addNodeRef(this.meshCache,rt.mesh),rt.skin!==void 0&&(tt[rt.mesh].isSkinnedMesh=!0)),rt.camera!==void 0&&this._addNodeRef(this.cameraCache,rt.camera)}}_addNodeRef(_,_e){_e!==void 0&&(_.refs[_e]===void 0&&(_.refs[_e]=_.uses[_e]=0),_.refs[_e]++)}_getNodeRef(_,_e,tt){if(_.refs[_e]<=1)return tt;const nt=tt.clone(),it=(rt,st)=>{const ot=this.associations.get(rt);ot!=null&&this.associations.set(st,ot);for(const[at,At]of rt.children.entries())it(At,st.children[at])};return it(tt,nt),nt.name+="_instance_"+_.uses[_e]++,nt}_invokeOne(_){const _e=Object.values(this.plugins);_e.push(this);for(let tt=0;tt<_e.length;tt++){const nt=_(_e[tt]);if(nt)return nt}return null}_invokeAll(_){const _e=Object.values(this.plugins);_e.unshift(this);const tt=[];for(let nt=0;nt<_e.length;nt++){const it=_(_e[nt]);it&&tt.push(it)}return tt}getDependency(_,_e){const tt=_+":"+_e;let nt=this.cache.get(tt);if(!nt){switch(_){case"scene":nt=this.loadScene(_e);break;case"node":nt=this._invokeOne(function(it){return it.loadNode&&it.loadNode(_e)});break;case"mesh":nt=this._invokeOne(function(it){return it.loadMesh&&it.loadMesh(_e)});break;case"accessor":nt=this.loadAccessor(_e);break;case"bufferView":nt=this._invokeOne(function(it){return it.loadBufferView&&it.loadBufferView(_e)});break;case"buffer":nt=this.loadBuffer(_e);break;case"material":nt=this._invokeOne(function(it){return it.loadMaterial&&it.loadMaterial(_e)});break;case"texture":nt=this._invokeOne(function(it){return it.loadTexture&&it.loadTexture(_e)});break;case"skin":nt=this.loadSkin(_e);break;case"animation":nt=this._invokeOne(function(it){return it.loadAnimation&&it.loadAnimation(_e)});break;case"camera":nt=this.loadCamera(_e);break;default:if(nt=this._invokeOne(function(it){return it!=this&&it.getDependency&&it.getDependency(_,_e)}),!nt)throw new Error("Unknown type: "+_);break}this.cache.add(tt,nt)}return nt}getDependencies(_){let _e=this.cache.get(_);if(!_e){const tt=this,nt=this.json[_+(_==="mesh"?"es":"s")]||[];_e=Promise.all(nt.map(function(it,rt){return tt.getDependency(_,rt)})),this.cache.add(_,_e)}return _e}loadBuffer(_){const _e=this.json.buffers[_],tt=this.fileLoader;if(_e.type&&_e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_e.type+" buffer type is not supported.");if(_e.uri===void 0&&_===0)return Promise.resolve(this.extensions[EXTENSIONS$1.KHR_BINARY_GLTF].body);const nt=this.options;return new Promise(function(it,rt){tt.load(LoaderUtils.resolveURL(_e.uri,nt.path),it,void 0,function(){rt(new Error('THREE.GLTFLoader: Failed to load buffer "'+_e.uri+'".'))})})}loadBufferView(_){const _e=this.json.bufferViews[_];return this.getDependency("buffer",_e.buffer).then(function(tt){const nt=_e.byteLength||0,it=_e.byteOffset||0;return tt.slice(it,it+nt)})}loadAccessor(_){const _e=this,tt=this.json,nt=this.json.accessors[_];if(nt.bufferView===void 0&&nt.sparse===void 0){const rt=WEBGL_TYPE_SIZES$1[nt.type],st=WEBGL_COMPONENT_TYPES$1[nt.componentType],ot=nt.normalized===!0,at=new st(nt.count*rt);return Promise.resolve(new BufferAttribute(at,rt,ot))}const it=[];return nt.bufferView!==void 0?it.push(this.getDependency("bufferView",nt.bufferView)):it.push(null),nt.sparse!==void 0&&(it.push(this.getDependency("bufferView",nt.sparse.indices.bufferView)),it.push(this.getDependency("bufferView",nt.sparse.values.bufferView))),Promise.all(it).then(function(rt){const st=rt[0],ot=WEBGL_TYPE_SIZES$1[nt.type],at=WEBGL_COMPONENT_TYPES$1[nt.componentType],At=at.BYTES_PER_ELEMENT,lt=At*ot,gt=nt.byteOffset||0,ct=nt.bufferView!==void 0?tt.bufferViews[nt.bufferView].byteStride:void 0,dt=nt.normalized===!0;let ht,mt;if(ct&&ct!==lt){const Ct=Math.floor(gt/ct),ft="InterleavedBuffer:"+nt.bufferView+":"+nt.componentType+":"+Ct+":"+nt.count;let pt=_e.cache.get(ft);pt||(ht=new at(st,Ct*ct,nt.count*ct/At),pt=new InterleavedBuffer(ht,ct/At),_e.cache.add(ft,pt)),mt=new InterleavedBufferAttribute(pt,ot,gt%ct/At,dt)}else st===null?ht=new at(nt.count*ot):ht=new at(st,gt,nt.count*ot),mt=new BufferAttribute(ht,ot,dt);if(nt.sparse!==void 0){const Ct=WEBGL_TYPE_SIZES$1.SCALAR,ft=WEBGL_COMPONENT_TYPES$1[nt.sparse.indices.componentType],pt=nt.sparse.indices.byteOffset||0,Vt=nt.sparse.values.byteOffset||0,yt=new ft(rt[1],pt,nt.sparse.count*Ct),Gt=new at(rt[2],Vt,nt.sparse.count*ot);st!==null&&(mt=new BufferAttribute(mt.array.slice(),mt.itemSize,mt.normalized));for(let Bt=0,vt=yt.length;Bt<vt;Bt++){const wt=yt[Bt];if(mt.setX(wt,Gt[Bt*ot]),ot>=2&&mt.setY(wt,Gt[Bt*ot+1]),ot>=3&&mt.setZ(wt,Gt[Bt*ot+2]),ot>=4&&mt.setW(wt,Gt[Bt*ot+3]),ot>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return mt})}loadTexture(_){const _e=this.json,tt=this.options,it=_e.textures[_].source,rt=_e.images[it];let st=this.textureLoader;if(rt.uri){const ot=tt.manager.getHandler(rt.uri);ot!==null&&(st=ot)}return this.loadTextureImage(_,it,st)}loadTextureImage(_,_e,tt){const nt=this,it=this.json,rt=it.textures[_],st=it.images[_e],ot=(st.uri||st.bufferView)+":"+rt.sampler;if(this.textureCache[ot])return this.textureCache[ot];const at=this.loadImageSource(_e,tt).then(function(At){At.flipY=!1,At.name=rt.name||st.name||"",At.name===""&&typeof st.uri=="string"&&st.uri.startsWith("data:image/")===!1&&(At.name=st.uri);const gt=(it.samplers||{})[rt.sampler]||{};return At.magFilter=WEBGL_FILTERS$1[gt.magFilter]||LinearFilter,At.minFilter=WEBGL_FILTERS$1[gt.minFilter]||LinearMipmapLinearFilter,At.wrapS=WEBGL_WRAPPINGS$1[gt.wrapS]||RepeatWrapping,At.wrapT=WEBGL_WRAPPINGS$1[gt.wrapT]||RepeatWrapping,nt.associations.set(At,{textures:_}),At}).catch(function(){return null});return this.textureCache[ot]=at,at}loadImageSource(_,_e){const tt=this,nt=this.json,it=this.options;if(this.sourceCache[_]!==void 0)return this.sourceCache[_].then(lt=>lt.clone());const rt=nt.images[_],st=self.URL||self.webkitURL;let ot=rt.uri||"",at=!1;if(rt.bufferView!==void 0)ot=tt.getDependency("bufferView",rt.bufferView).then(function(lt){at=!0;const gt=new Blob([lt],{type:rt.mimeType});return ot=st.createObjectURL(gt),ot});else if(rt.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+_+" is missing URI and bufferView");const At=Promise.resolve(ot).then(function(lt){return new Promise(function(gt,ct){let dt=gt;_e.isImageBitmapLoader===!0&&(dt=function(ht){const mt=new Texture(ht);mt.needsUpdate=!0,gt(mt)}),_e.load(LoaderUtils.resolveURL(lt,it.path),dt,void 0,ct)})}).then(function(lt){return at===!0&&st.revokeObjectURL(ot),lt.userData.mimeType=rt.mimeType||getImageURIMimeType$1(rt.uri),lt}).catch(function(lt){throw console.error("THREE.GLTFLoader: Couldn't load texture",ot),lt});return this.sourceCache[_]=At,At}assignTexture(_,_e,tt,nt){const it=this;return this.getDependency("texture",tt.index).then(function(rt){if(!rt)return null;if(tt.texCoord!==void 0&&tt.texCoord>0&&(rt=rt.clone(),rt.channel=tt.texCoord),it.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM]){const st=tt.extensions!==void 0?tt.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM]:void 0;if(st){const ot=it.associations.get(rt);rt=it.extensions[EXTENSIONS$1.KHR_TEXTURE_TRANSFORM].extendTexture(rt,st),it.associations.set(rt,ot)}}return nt!==void 0&&("colorSpace"in rt?rt.colorSpace=nt===3001?"srgb":"srgb-linear":rt.encoding=nt),_[_e]=rt,rt})}assignFinalMaterial(_){const _e=_.geometry;let tt=_.material;const nt=_e.attributes.tangent===void 0,it=_e.attributes.color!==void 0,rt=_e.attributes.normal===void 0;if(_.isPoints){const st="PointsMaterial:"+tt.uuid;let ot=this.cache.get(st);ot||(ot=new PointsMaterial,Material.prototype.copy.call(ot,tt),ot.color.copy(tt.color),ot.map=tt.map,ot.sizeAttenuation=!1,this.cache.add(st,ot)),tt=ot}else if(_.isLine){const st="LineBasicMaterial:"+tt.uuid;let ot=this.cache.get(st);ot||(ot=new LineBasicMaterial,Material.prototype.copy.call(ot,tt),ot.color.copy(tt.color),ot.map=tt.map,this.cache.add(st,ot)),tt=ot}if(nt||it||rt){let st="ClonedMaterial:"+tt.uuid+":";nt&&(st+="derivative-tangents:"),it&&(st+="vertex-colors:"),rt&&(st+="flat-shading:");let ot=this.cache.get(st);ot||(ot=tt.clone(),it&&(ot.vertexColors=!0),rt&&(ot.flatShading=!0),nt&&(ot.normalScale&&(ot.normalScale.y*=-1),ot.clearcoatNormalScale&&(ot.clearcoatNormalScale.y*=-1)),this.cache.add(st,ot),this.associations.set(ot,this.associations.get(tt))),tt=ot}_.material=tt}getMaterialType(){return MeshStandardMaterial}loadMaterial(_){const _e=this,tt=this.json,nt=this.extensions,it=tt.materials[_];let rt;const st={},ot=it.extensions||{},at=[];if(ot[EXTENSIONS$1.KHR_MATERIALS_UNLIT]){const lt=nt[EXTENSIONS$1.KHR_MATERIALS_UNLIT];rt=lt.getMaterialType(),at.push(lt.extendParams(st,it,_e))}else{const lt=it.pbrMetallicRoughness||{};if(st.color=new Color(1,1,1),st.opacity=1,Array.isArray(lt.baseColorFactor)){const gt=lt.baseColorFactor;st.color.fromArray(gt),st.opacity=gt[3]}lt.baseColorTexture!==void 0&&at.push(_e.assignTexture(st,"map",lt.baseColorTexture,3001)),st.metalness=lt.metallicFactor!==void 0?lt.metallicFactor:1,st.roughness=lt.roughnessFactor!==void 0?lt.roughnessFactor:1,lt.metallicRoughnessTexture!==void 0&&(at.push(_e.assignTexture(st,"metalnessMap",lt.metallicRoughnessTexture)),at.push(_e.assignTexture(st,"roughnessMap",lt.metallicRoughnessTexture))),rt=this._invokeOne(function(gt){return gt.getMaterialType&&gt.getMaterialType(_)}),at.push(Promise.all(this._invokeAll(function(gt){return gt.extendMaterialParams&&gt.extendMaterialParams(_,st)})))}it.doubleSided===!0&&(st.side=DoubleSide);const At=it.alphaMode||ALPHA_MODES$1.OPAQUE;if(At===ALPHA_MODES$1.BLEND?(st.transparent=!0,st.depthWrite=!1):(st.transparent=!1,At===ALPHA_MODES$1.MASK&&(st.alphaTest=it.alphaCutoff!==void 0?it.alphaCutoff:.5)),it.normalTexture!==void 0&&rt!==MeshBasicMaterial&&(at.push(_e.assignTexture(st,"normalMap",it.normalTexture)),st.normalScale=new Vector2(1,1),it.normalTexture.scale!==void 0)){const lt=it.normalTexture.scale;st.normalScale.set(lt,lt)}return it.occlusionTexture!==void 0&&rt!==MeshBasicMaterial&&(at.push(_e.assignTexture(st,"aoMap",it.occlusionTexture)),it.occlusionTexture.strength!==void 0&&(st.aoMapIntensity=it.occlusionTexture.strength)),it.emissiveFactor!==void 0&&rt!==MeshBasicMaterial&&(st.emissive=new Color().fromArray(it.emissiveFactor)),it.emissiveTexture!==void 0&&rt!==MeshBasicMaterial&&at.push(_e.assignTexture(st,"emissiveMap",it.emissiveTexture,3001)),Promise.all(at).then(function(){const lt=new rt(st);return it.name&&(lt.name=it.name),assignExtrasToUserData$1(lt,it),_e.associations.set(lt,{materials:_}),it.extensions&&addUnknownExtensionsToUserData$1(nt,lt,it),lt})}createUniqueName(_){const _e=PropertyBinding.sanitizeNodeName(_||"");return _e in this.nodeNamesUsed?_e+"_"+ ++this.nodeNamesUsed[_e]:(this.nodeNamesUsed[_e]=0,_e)}loadGeometries(_){const _e=this,tt=this.extensions,nt=this.primitiveCache;function it(st){return tt[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(st,_e).then(function(ot){return addPrimitiveAttributes$1(ot,st,_e)})}const rt=[];for(let st=0,ot=_.length;st<ot;st++){const at=_[st],At=createPrimitiveKey$1(at),lt=nt[At];if(lt)rt.push(lt.promise);else{let gt;at.extensions&&at.extensions[EXTENSIONS$1.KHR_DRACO_MESH_COMPRESSION]?gt=it(at):gt=addPrimitiveAttributes$1(new BufferGeometry,at,_e),nt[At]={primitive:at,promise:gt},rt.push(gt)}}return Promise.all(rt)}loadMesh(_){const _e=this,tt=this.json,nt=this.extensions,it=tt.meshes[_],rt=it.primitives,st=[];for(let ot=0,at=rt.length;ot<at;ot++){const At=rt[ot].material===void 0?createDefaultMaterial$1(this.cache):this.getDependency("material",rt[ot].material);st.push(At)}return st.push(_e.loadGeometries(rt)),Promise.all(st).then(function(ot){const at=ot.slice(0,ot.length-1),At=ot[ot.length-1],lt=[];for(let ct=0,dt=At.length;ct<dt;ct++){const ht=At[ct],mt=rt[ct];let Ct;const ft=at[ct];if(mt.mode===WEBGL_CONSTANTS$1.TRIANGLES||mt.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||mt.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||mt.mode===void 0)Ct=it.isSkinnedMesh===!0?new SkinnedMesh(ht,ft):new Mesh(ht,ft),Ct.isSkinnedMesh===!0&&Ct.normalizeSkinWeights(),mt.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?Ct.geometry=toTrianglesDrawMode$1(Ct.geometry,TriangleStripDrawMode):mt.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(Ct.geometry=toTrianglesDrawMode$1(Ct.geometry,TriangleFanDrawMode));else if(mt.mode===WEBGL_CONSTANTS$1.LINES)Ct=new LineSegments(ht,ft);else if(mt.mode===WEBGL_CONSTANTS$1.LINE_STRIP)Ct=new Line(ht,ft);else if(mt.mode===WEBGL_CONSTANTS$1.LINE_LOOP)Ct=new LineLoop(ht,ft);else if(mt.mode===WEBGL_CONSTANTS$1.POINTS)Ct=new Points(ht,ft);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+mt.mode);Object.keys(Ct.geometry.morphAttributes).length>0&&updateMorphTargets$1(Ct,it),Ct.name=_e.createUniqueName(it.name||"mesh_"+_),assignExtrasToUserData$1(Ct,it),mt.extensions&&addUnknownExtensionsToUserData$1(nt,Ct,mt),_e.assignFinalMaterial(Ct),lt.push(Ct)}for(let ct=0,dt=lt.length;ct<dt;ct++)_e.associations.set(lt[ct],{meshes:_,primitives:ct});if(lt.length===1)return it.extensions&&addUnknownExtensionsToUserData$1(nt,lt[0],it),lt[0];const gt=new Group;it.extensions&&addUnknownExtensionsToUserData$1(nt,gt,it),_e.associations.set(gt,{meshes:_});for(let ct=0,dt=lt.length;ct<dt;ct++)gt.add(lt[ct]);return gt})}loadCamera(_){let _e;const tt=this.json.cameras[_],nt=tt[tt.type];if(!nt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return tt.type==="perspective"?_e=new PerspectiveCamera$1(MathUtils.radToDeg(nt.yfov),nt.aspectRatio||1,nt.znear||1,nt.zfar||2e6):tt.type==="orthographic"&&(_e=new OrthographicCamera(-nt.xmag,nt.xmag,nt.ymag,-nt.ymag,nt.znear,nt.zfar)),tt.name&&(_e.name=this.createUniqueName(tt.name)),assignExtrasToUserData$1(_e,tt),Promise.resolve(_e)}loadSkin(_){const _e=this.json.skins[_],tt=[];for(let nt=0,it=_e.joints.length;nt<it;nt++)tt.push(this._loadNodeShallow(_e.joints[nt]));return _e.inverseBindMatrices!==void 0?tt.push(this.getDependency("accessor",_e.inverseBindMatrices)):tt.push(null),Promise.all(tt).then(function(nt){const it=nt.pop(),rt=nt,st=[],ot=[];for(let at=0,At=rt.length;at<At;at++){const lt=rt[at];if(lt){st.push(lt);const gt=new Matrix4;it!==null&&gt.fromArray(it.array,at*16),ot.push(gt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_e.joints[at])}return new Skeleton(st,ot)})}loadAnimation(_){const tt=this.json.animations[_],nt=tt.name?tt.name:"animation_"+_,it=[],rt=[],st=[],ot=[],at=[];for(let At=0,lt=tt.channels.length;At<lt;At++){const gt=tt.channels[At],ct=tt.samplers[gt.sampler],dt=gt.target,ht=dt.node,mt=tt.parameters!==void 0?tt.parameters[ct.input]:ct.input,Ct=tt.parameters!==void 0?tt.parameters[ct.output]:ct.output;dt.node!==void 0&&(it.push(this.getDependency("node",ht)),rt.push(this.getDependency("accessor",mt)),st.push(this.getDependency("accessor",Ct)),ot.push(ct),at.push(dt))}return Promise.all([Promise.all(it),Promise.all(rt),Promise.all(st),Promise.all(ot),Promise.all(at)]).then(function(At){const lt=At[0],gt=At[1],ct=At[2],dt=At[3],ht=At[4],mt=[];for(let Ct=0,ft=lt.length;Ct<ft;Ct++){const pt=lt[Ct],Vt=gt[Ct],yt=ct[Ct],Gt=dt[Ct],Bt=ht[Ct];if(pt===void 0)continue;pt.updateMatrix();let vt;switch(PATH_PROPERTIES$1[Bt.path]){case PATH_PROPERTIES$1.weights:vt=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:vt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:default:vt=VectorKeyframeTrack;break}const wt=pt.name?pt.name:pt.uuid,Mt=Gt.interpolation!==void 0?INTERPOLATION$1[Gt.interpolation]:InterpolateLinear,kt=[];PATH_PROPERTIES$1[Bt.path]===PATH_PROPERTIES$1.weights?pt.traverse(function(Yt){Yt.morphTargetInfluences&&kt.push(Yt.name?Yt.name:Yt.uuid)}):kt.push(wt);let Nt=yt.array;if(yt.normalized){const Yt=getNormalizedComponentScale$1(Nt.constructor),Lt=new Float32Array(Nt.length);for(let Xt=0,_t=Nt.length;Xt<_t;Xt++)Lt[Xt]=Nt[Xt]*Yt;Nt=Lt}for(let Yt=0,Lt=kt.length;Yt<Lt;Yt++){const Xt=new vt(kt[Yt]+"."+PATH_PROPERTIES$1[Bt.path],Vt.array,Nt,Mt);Gt.interpolation==="CUBICSPLINE"&&(Xt.createInterpolant=function(Tt){const St=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant$1:GLTFCubicSplineInterpolant$1;return new St(this.times,this.values,this.getValueSize()/3,Tt)},Xt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),mt.push(Xt)}}return new AnimationClip(nt,void 0,mt)})}createNodeMesh(_){const _e=this.json,tt=this,nt=_e.nodes[_];return nt.mesh===void 0?null:tt.getDependency("mesh",nt.mesh).then(function(it){const rt=tt._getNodeRef(tt.meshCache,nt.mesh,it);return nt.weights!==void 0&&rt.traverse(function(st){if(st.isMesh)for(let ot=0,at=nt.weights.length;ot<at;ot++)st.morphTargetInfluences[ot]=nt.weights[ot]}),rt})}loadNode(_){const _e=this.json,tt=this,nt=_e.nodes[_],it=tt._loadNodeShallow(_),rt=[],st=nt.children||[];for(let at=0,At=st.length;at<At;at++)rt.push(tt.getDependency("node",st[at]));const ot=nt.skin===void 0?Promise.resolve(null):tt.getDependency("skin",nt.skin);return Promise.all([it,Promise.all(rt),ot]).then(function(at){const At=at[0],lt=at[1],gt=at[2];gt!==null&&At.traverse(function(ct){ct.isSkinnedMesh&&ct.bind(gt,_identityMatrix$1)});for(let ct=0,dt=lt.length;ct<dt;ct++)At.add(lt[ct]);return At})}_loadNodeShallow(_){const _e=this.json,tt=this.extensions,nt=this;if(this.nodeCache[_]!==void 0)return this.nodeCache[_];const it=_e.nodes[_],rt=it.name?nt.createUniqueName(it.name):"",st=[],ot=nt._invokeOne(function(at){return at.createNodeMesh&&at.createNodeMesh(_)});return ot&&st.push(ot),it.camera!==void 0&&st.push(nt.getDependency("camera",it.camera).then(function(at){return nt._getNodeRef(nt.cameraCache,it.camera,at)})),nt._invokeAll(function(at){return at.createNodeAttachment&&at.createNodeAttachment(_)}).forEach(function(at){st.push(at)}),this.nodeCache[_]=Promise.all(st).then(function(at){let At;if(it.isBone===!0?At=new Bone:at.length>1?At=new Group:at.length===1?At=at[0]:At=new Object3D,At!==at[0])for(let lt=0,gt=at.length;lt<gt;lt++)At.add(at[lt]);if(it.name&&(At.userData.name=it.name,At.name=rt),assignExtrasToUserData$1(At,it),it.extensions&&addUnknownExtensionsToUserData$1(tt,At,it),it.matrix!==void 0){const lt=new Matrix4;lt.fromArray(it.matrix),At.applyMatrix4(lt)}else it.translation!==void 0&&At.position.fromArray(it.translation),it.rotation!==void 0&&At.quaternion.fromArray(it.rotation),it.scale!==void 0&&At.scale.fromArray(it.scale);return nt.associations.has(At)||nt.associations.set(At,{}),nt.associations.get(At).nodes=_,At}),this.nodeCache[_]}loadScene(_){const _e=this.extensions,tt=this.json.scenes[_],nt=this,it=new Group;tt.name&&(it.name=nt.createUniqueName(tt.name)),assignExtrasToUserData$1(it,tt),tt.extensions&&addUnknownExtensionsToUserData$1(_e,it,tt);const rt=tt.nodes||[],st=[];for(let ot=0,at=rt.length;ot<at;ot++)st.push(nt.getDependency("node",rt[ot]));return Promise.all(st).then(function(ot){for(let At=0,lt=ot.length;At<lt;At++)it.add(ot[At]);const at=At=>{const lt=new Map;for(const[gt,ct]of nt.associations)(gt instanceof Material||gt instanceof Texture)&&lt.set(gt,ct);return At.traverse(gt=>{const ct=nt.associations.get(gt);ct!=null&&lt.set(gt,ct)}),lt};return nt.associations=at(it),it})}};function computeBounds$1(et,_,_e){const tt=_.attributes,nt=new Box3;if(tt.POSITION!==void 0){const st=_e.json.accessors[tt.POSITION],ot=st.min,at=st.max;if(ot!==void 0&&at!==void 0){if(nt.set(new Vector3(ot[0],ot[1],ot[2]),new Vector3(at[0],at[1],at[2])),st.normalized){const At=getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES$1[st.componentType]);nt.min.multiplyScalar(At),nt.max.multiplyScalar(At)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const it=_.targets;if(it!==void 0){const st=new Vector3,ot=new Vector3;for(let at=0,At=it.length;at<At;at++){const lt=it[at];if(lt.POSITION!==void 0){const gt=_e.json.accessors[lt.POSITION],ct=gt.min,dt=gt.max;if(ct!==void 0&&dt!==void 0){if(ot.setX(Math.max(Math.abs(ct[0]),Math.abs(dt[0]))),ot.setY(Math.max(Math.abs(ct[1]),Math.abs(dt[1]))),ot.setZ(Math.max(Math.abs(ct[2]),Math.abs(dt[2]))),gt.normalized){const ht=getNormalizedComponentScale$1(WEBGL_COMPONENT_TYPES$1[gt.componentType]);ot.multiplyScalar(ht)}st.max(ot)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}nt.expandByVector(st)}et.boundingBox=nt;const rt=new Sphere;nt.getCenter(rt.center),rt.radius=nt.min.distanceTo(nt.max)/2,et.boundingSphere=rt}function addPrimitiveAttributes$1(et,_,_e){const tt=_.attributes,nt=[];function it(rt,st){return _e.getDependency("accessor",rt).then(function(ot){et.setAttribute(st,ot)})}for(const rt in tt){const st=ATTRIBUTES$1[rt]||rt.toLowerCase();st in et.attributes||nt.push(it(tt[rt],st))}if(_.indices!==void 0&&!et.index){const rt=_e.getDependency("accessor",_.indices).then(function(st){et.setIndex(st)});nt.push(rt)}return assignExtrasToUserData$1(et,_),computeBounds$1(et,_,_e),Promise.all(nt).then(function(){return _.targets!==void 0?addMorphTargets$1(et,_.targets,_e):et})}class RGBELoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const st=function(pt,Vt){switch(pt){case 1:console.error("THREE.RGBELoader Read Error: "+(Vt||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(Vt||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(Vt||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(Vt||""))}return-1},lt=`
`,gt=function(pt,Vt,yt){Vt=Vt||1024;let Bt=pt.pos,vt=-1,wt=0,Mt="",kt=String.fromCharCode.apply(null,new Uint16Array(pt.subarray(Bt,Bt+128)));for(;0>(vt=kt.indexOf(lt))&&wt<Vt&&Bt<pt.byteLength;)Mt+=kt,wt+=kt.length,Bt+=128,kt+=String.fromCharCode.apply(null,new Uint16Array(pt.subarray(Bt,Bt+128)));return-1<vt?(yt!==!1&&(pt.pos+=wt+vt+1),Mt+kt.slice(0,vt)):!1},ct=function(pt){const Vt=/^#\?(\S+)/,yt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Gt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Bt=/^\s*FORMAT=(\S+)\s*$/,vt=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,wt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Mt,kt;if(pt.pos>=pt.byteLength||!(Mt=gt(pt)))return st(1,"no header found");if(!(kt=Mt.match(Vt)))return st(3,"bad initial token");for(wt.valid|=1,wt.programtype=kt[1],wt.string+=Mt+`
`;Mt=gt(pt),Mt!==!1;){if(wt.string+=Mt+`
`,Mt.charAt(0)==="#"){wt.comments+=Mt+`
`;continue}if((kt=Mt.match(yt))&&(wt.gamma=parseFloat(kt[1])),(kt=Mt.match(Gt))&&(wt.exposure=parseFloat(kt[1])),(kt=Mt.match(Bt))&&(wt.valid|=2,wt.format=kt[1]),(kt=Mt.match(vt))&&(wt.valid|=4,wt.height=parseInt(kt[1],10),wt.width=parseInt(kt[2],10)),wt.valid&2&&wt.valid&4)break}return wt.valid&2?wt.valid&4?wt:st(3,"missing image size specifier"):st(3,"missing format specifier")},dt=function(pt,Vt,yt){const Gt=Vt;if(Gt<8||Gt>32767||pt[0]!==2||pt[1]!==2||pt[2]&128)return new Uint8Array(pt);if(Gt!==(pt[2]<<8|pt[3]))return st(3,"wrong scanline width");const Bt=new Uint8Array(4*Vt*yt);if(!Bt.length)return st(4,"unable to allocate buffer space");let vt=0,wt=0;const Mt=4*Gt,kt=new Uint8Array(4),Nt=new Uint8Array(Mt);let Yt=yt;for(;Yt>0&&wt<pt.byteLength;){if(wt+4>pt.byteLength)return st(1);if(kt[0]=pt[wt++],kt[1]=pt[wt++],kt[2]=pt[wt++],kt[3]=pt[wt++],kt[0]!=2||kt[1]!=2||(kt[2]<<8|kt[3])!=Gt)return st(3,"bad rgbe scanline format");let Lt=0,Xt;for(;Lt<Mt&&wt<pt.byteLength;){Xt=pt[wt++];const Tt=Xt>128;if(Tt&&(Xt-=128),Xt===0||Lt+Xt>Mt)return st(3,"bad scanline data");if(Tt){const St=pt[wt++];for(let Zt=0;Zt<Xt;Zt++)Nt[Lt++]=St}else Nt.set(pt.subarray(wt,wt+Xt),Lt),Lt+=Xt,wt+=Xt}const _t=Gt;for(let Tt=0;Tt<_t;Tt++){let St=0;Bt[vt]=Nt[Tt+St],St+=Gt,Bt[vt+1]=Nt[Tt+St],St+=Gt,Bt[vt+2]=Nt[Tt+St],St+=Gt,Bt[vt+3]=Nt[Tt+St],vt+=4}Yt--}return Bt},ht=function(pt,Vt,yt,Gt){const Bt=pt[Vt+3],vt=Math.pow(2,Bt-128)/255;yt[Gt+0]=pt[Vt+0]*vt,yt[Gt+1]=pt[Vt+1]*vt,yt[Gt+2]=pt[Vt+2]*vt,yt[Gt+3]=1},mt=function(pt,Vt,yt,Gt){const Bt=pt[Vt+3],vt=Math.pow(2,Bt-128)/255;yt[Gt+0]=DataUtils.toHalfFloat(Math.min(pt[Vt+0]*vt,65504)),yt[Gt+1]=DataUtils.toHalfFloat(Math.min(pt[Vt+1]*vt,65504)),yt[Gt+2]=DataUtils.toHalfFloat(Math.min(pt[Vt+2]*vt,65504)),yt[Gt+3]=DataUtils.toHalfFloat(1)},Ct=new Uint8Array(_);Ct.pos=0;const ft=ct(Ct);if(ft!==-1){const pt=ft.width,Vt=ft.height,yt=dt(Ct.subarray(Ct.pos),pt,Vt);if(yt!==-1){let Gt,Bt,vt;switch(this.type){case FloatType:vt=yt.length/4;const wt=new Float32Array(vt*4);for(let kt=0;kt<vt;kt++)ht(yt,kt*4,wt,kt*4);Gt=wt,Bt=FloatType;break;case HalfFloatType:vt=yt.length/4;const Mt=new Uint16Array(vt*4);for(let kt=0;kt<vt;kt++)mt(yt,kt*4,Mt,kt*4);Gt=Mt,Bt=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:pt,height:Vt,data:Gt,header:ft.string,gamma:ft.gamma,exposure:ft.exposure,type:Bt}}}return null}setDataType(_){return this.type=_,this}load(_,_e,tt,nt){function it(rt,st){switch(rt.type){case FloatType:case HalfFloatType:"colorSpace"in rt?rt.colorSpace="srgb-linear":rt.encoding=3e3,rt.minFilter=LinearFilter,rt.magFilter=LinearFilter,rt.generateMipmaps=!1,rt.flipY=!0;break}_e&&_e(rt,st)}return super.load(_,it,tt,nt)}}const _taskCache$1=new WeakMap;let DRACOLoader$1=class extends Loader{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,_e,tt,nt){const it=new FileLoader(this.manager);it.setPath(this.path),it.setResponseType("arraybuffer"),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials),it.load(_,rt=>{const st={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(rt,st).then(_e).catch(nt)},tt,nt)}decodeDracoFile(_,_e,tt,nt){const it={attributeIDs:tt||this.defaultAttributeIDs,attributeTypes:nt||this.defaultAttributeTypes,useUniqueIDs:!!tt};this.decodeGeometry(_,it).then(_e)}decodeGeometry(_,_e){for(const ot in _e.attributeTypes){const at=_e.attributeTypes[ot];at.BYTES_PER_ELEMENT!==void 0&&(_e.attributeTypes[ot]=at.name)}const tt=JSON.stringify(_e);if(_taskCache$1.has(_)){const ot=_taskCache$1.get(_);if(ot.key===tt)return ot.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let nt;const it=this.workerNextTaskID++,rt=_.byteLength,st=this._getWorker(it,rt).then(ot=>(nt=ot,new Promise((at,At)=>{nt._callbacks[it]={resolve:at,reject:At},nt.postMessage({type:"decode",id:it,taskConfig:_e,buffer:_},[_])}))).then(ot=>this._createGeometry(ot.geometry));return st.catch(()=>!0).then(()=>{nt&&it&&this._releaseTask(nt,it)}),_taskCache$1.set(_,{key:tt,promise:st}),st}_createGeometry(_){const _e=new BufferGeometry;_.index&&_e.setIndex(new BufferAttribute(_.index.array,1));for(let tt=0;tt<_.attributes.length;tt++){const nt=_.attributes[tt],it=nt.name,rt=nt.array,st=nt.itemSize;_e.setAttribute(it,new BufferAttribute(rt,st))}return _e}_loadLibrary(_,_e){const tt=new FileLoader(this.manager);return tt.setPath(this.decoderPath),tt.setResponseType(_e),tt.setWithCredentials(this.withCredentials),new Promise((nt,it)=>{tt.load(_,nt,void 0,it)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",_e=[];return _?_e.push(this._loadLibrary("draco_decoder.js","text")):(_e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),_e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(_e).then(tt=>{const nt=tt[0];_||(this.decoderConfig.wasmBinary=tt[1]);const it=DRACOWorker$1.toString(),rt=["/* draco decoder */",nt,"","/* worker */",it.substring(it.indexOf("{")+1,it.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([rt]))}),this.decoderPending}_getWorker(_,_e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const nt=new Worker(this.workerSourceURL);nt._callbacks={},nt._taskCosts={},nt._taskLoad=0,nt.postMessage({type:"init",decoderConfig:this.decoderConfig}),nt.onmessage=function(it){const rt=it.data;switch(rt.type){case"decode":nt._callbacks[rt.id].resolve(rt);break;case"error":nt._callbacks[rt.id].reject(rt);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+rt.type+'"')}},this.workerPool.push(nt)}else this.workerPool.sort(function(nt,it){return nt._taskLoad>it._taskLoad?-1:1});const tt=this.workerPool[this.workerPool.length-1];return tt._taskCosts[_]=_e,tt._taskLoad+=_e,tt})}_releaseTask(_,_e){_._taskLoad-=_._taskCosts[_e],delete _._callbacks[_e],delete _._taskCosts[_e]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}};function DRACOWorker$1(){let et,_;onmessage=function(rt){const st=rt.data;switch(st.type){case"init":et=st.decoderConfig,_=new Promise(function(At){et.onModuleLoaded=function(lt){At({draco:lt})},DracoDecoderModule(et)});break;case"decode":const ot=st.buffer,at=st.taskConfig;_.then(At=>{const lt=At.draco,gt=new lt.Decoder,ct=new lt.DecoderBuffer;ct.Init(new Int8Array(ot),ot.byteLength);try{const dt=_e(lt,gt,ct,at),ht=dt.attributes.map(mt=>mt.array.buffer);dt.index&&ht.push(dt.index.array.buffer),self.postMessage({type:"decode",id:st.id,geometry:dt},ht)}catch(dt){console.error(dt),self.postMessage({type:"error",id:st.id,error:dt.message})}finally{lt.destroy(ct),lt.destroy(gt)}});break}};function _e(rt,st,ot,at){const At=at.attributeIDs,lt=at.attributeTypes;let gt,ct;const dt=st.GetEncodedGeometryType(ot);if(dt===rt.TRIANGULAR_MESH)gt=new rt.Mesh,ct=st.DecodeBufferToMesh(ot,gt);else if(dt===rt.POINT_CLOUD)gt=new rt.PointCloud,ct=st.DecodeBufferToPointCloud(ot,gt);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ct.ok()||gt.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ct.error_msg());const ht={index:null,attributes:[]};for(const mt in At){const Ct=self[lt[mt]];let ft,pt;if(at.useUniqueIDs)pt=At[mt],ft=st.GetAttributeByUniqueId(gt,pt);else{if(pt=st.GetAttributeId(gt,rt[At[mt]]),pt===-1)continue;ft=st.GetAttribute(gt,pt)}ht.attributes.push(nt(rt,st,gt,mt,Ct,ft))}return dt===rt.TRIANGULAR_MESH&&(ht.index=tt(rt,st,gt)),rt.destroy(gt),ht}function tt(rt,st,ot){const At=ot.num_faces()*3,lt=At*4,gt=rt._malloc(lt);st.GetTrianglesUInt32Array(ot,lt,gt);const ct=new Uint32Array(rt.HEAPF32.buffer,gt,At).slice();return rt._free(gt),{array:ct,itemSize:1}}function nt(rt,st,ot,at,At,lt){const gt=lt.num_components(),dt=ot.num_points()*gt,ht=dt*At.BYTES_PER_ELEMENT,mt=it(rt,At),Ct=rt._malloc(ht);st.GetAttributeDataArrayForAllPoints(ot,lt,mt,ht,Ct);const ft=new At(rt.HEAPF32.buffer,Ct,dt).slice();return rt._free(Ct),{name:at,array:ft,itemSize:gt}}function it(rt,st){switch(st){case Float32Array:return rt.DT_FLOAT32;case Int8Array:return rt.DT_INT8;case Int16Array:return rt.DT_INT16;case Int32Array:return rt.DT_INT32;case Uint8Array:return rt.DT_UINT8;case Uint16Array:return rt.DT_UINT16;case Uint32Array:return rt.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const et="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",_="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",_e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),tt=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let nt=et;WebAssembly.validate(_e)&&(nt=_);let it;const rt=WebAssembly.instantiate(st(nt),{}).then(lt=>{it=lt.instance,it.exports.__wasm_call_ctors()});function st(lt){const gt=new Uint8Array(lt.length);for(let dt=0;dt<lt.length;++dt){const ht=lt.charCodeAt(dt);gt[dt]=ht>96?ht-71:ht>64?ht-65:ht>47?ht+4:ht>46?63:62}let ct=0;for(let dt=0;dt<lt.length;++dt)gt[ct++]=gt[dt]<60?tt[gt[dt]]:(gt[dt]-60)*64+gt[++dt];return gt.buffer.slice(0,ct)}function ot(lt,gt,ct,dt,ht,mt){const Ct=it.exports.sbrk,ft=ct+3&-4,pt=Ct(ft*dt),Vt=Ct(ht.length),yt=new Uint8Array(it.exports.memory.buffer);yt.set(ht,Vt);const Gt=lt(pt,ct,dt,Vt,ht.length);if(Gt===0&&mt&&mt(pt,ft,dt),gt.set(yt.subarray(pt,pt+ct*dt)),Ct(pt-Ct(0)),Gt!==0)throw new Error(`Malformed buffer data: ${Gt}`)}const at={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},At={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:rt,supported:!0,decodeVertexBuffer(lt,gt,ct,dt,ht){ot(it.exports.meshopt_decodeVertexBuffer,lt,gt,ct,dt,it.exports[at[ht]])},decodeIndexBuffer(lt,gt,ct,dt){ot(it.exports.meshopt_decodeIndexBuffer,lt,gt,ct,dt)},decodeIndexSequence(lt,gt,ct,dt){ot(it.exports.meshopt_decodeIndexSequence,lt,gt,ct,dt)},decodeGltfBuffer(lt,gt,ct,dt,ht,mt){ot(it.exports[At[ht]],lt,gt,ct,dt,it.exports[at[mt]])}},generated};function workerBootstrap(){var et=Object.create(null);function _(nt,it){var rt=nt.id,st=nt.name,ot=nt.dependencies;ot===void 0&&(ot=[]);var at=nt.init;at===void 0&&(at=function(){});var At=nt.getTransferables;if(At===void 0&&(At=null),!et[rt])try{ot=ot.map(function(gt){return gt&&gt.isWorkerModule&&(_(gt,function(ct){if(ct instanceof Error)throw ct}),gt=et[gt.id].value),gt}),at=tt("<"+st+">.init",at),At&&(At=tt("<"+st+">.getTransferables",At));var lt=null;typeof at=="function"?lt=at.apply(void 0,ot):console.error("worker module init function failed to rehydrate"),et[rt]={id:rt,value:lt,getTransferables:At},it(lt)}catch(gt){gt&&gt.noLog||console.error(gt),it(gt)}}function _e(nt,it){var rt,st=nt.id,ot=nt.args;(!et[st]||typeof et[st].value!="function")&&it(new Error("Worker module "+st+": not found or its 'init' did not return a function"));try{var at=(rt=et[st]).value.apply(rt,ot);at&&typeof at.then=="function"?at.then(At,function(lt){return it(lt instanceof Error?lt:new Error(""+lt))}):At(at)}catch(lt){it(lt)}function At(lt){try{var gt=et[st].getTransferables&&et[st].getTransferables(lt);(!gt||!Array.isArray(gt)||!gt.length)&&(gt=void 0),it(lt,gt)}catch(ct){console.error(ct),it(ct)}}}function tt(nt,it){var rt=void 0;self.troikaDefine=function(ot){return rt=ot};var st=URL.createObjectURL(new Blob(["/** "+nt.replace(/\*/g,"")+` **/

troikaDefine(
`+it+`
)`],{type:"application/javascript"}));try{importScripts(st)}catch(ot){console.error(ot)}return URL.revokeObjectURL(st),delete self.troikaDefine,rt}self.addEventListener("message",function(nt){var it=nt.data,rt=it.messageId,st=it.action,ot=it.data;try{st==="registerModule"&&_(ot,function(at){at instanceof Error?postMessage({messageId:rt,success:!1,error:at.message}):postMessage({messageId:rt,success:!0,result:{isCallable:typeof at=="function"}})}),st==="callModule"&&_e(ot,function(at,At){at instanceof Error?postMessage({messageId:rt,success:!1,error:at.message}):postMessage({messageId:rt,success:!0,result:at},At||void 0)})}catch(at){postMessage({messageId:rt,success:!1,error:at.stack})}})}function defineMainThreadModule(et){var _=function(){for(var _e=[],tt=arguments.length;tt--;)_e[tt]=arguments[tt];return _._getInitResult().then(function(nt){if(typeof nt=="function")return nt.apply(void 0,_e);throw new Error("Worker module function was called but `init` did not return a callable function")})};return _._getInitResult=function(){var _e=et.dependencies,tt=et.init;_e=Array.isArray(_e)?_e.map(function(it){return it&&it._getInitResult?it._getInitResult():it}):[];var nt=Promise.all(_e).then(function(it){return tt.apply(null,it)});return _._getInitResult=function(){return nt},nt},_}var supportsWorkers=function(){var et=!1;if(typeof window<"u"&&typeof window.document<"u")try{var _=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));_.terminate(),et=!0}catch(_e){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+_e.message+"]")}return supportsWorkers=function(){return et},et},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(et){if((!et||typeof et.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var _=et.dependencies,_e=et.init,tt=et.getTransferables,nt=et.workerId;if(!supportsWorkers())return defineMainThreadModule(et);nt==null&&(nt="#default");var it="workerModule"+ ++_workerModuleId,rt=et.name||it,st=null;_=_&&_.map(function(at){return typeof at=="function"&&!at.workerModuleData&&(_allowInitAsString=!0,at=defineWorkerModule({workerId:nt,name:"<"+rt+"> function dependency: "+at.name,init:`function(){return (
`+stringifyFunction(at)+`
)}`}),_allowInitAsString=!1),at&&at.workerModuleData&&(at=at.workerModuleData),at});function ot(){for(var at=[],At=arguments.length;At--;)at[At]=arguments[At];if(!st){st=callWorker(nt,"registerModule",ot.workerModuleData);var lt=function(){st=null,registeredModules[nt].delete(lt)};(registeredModules[nt]||(registeredModules[nt]=new Set)).add(lt)}return st.then(function(gt){var ct=gt.isCallable;if(ct)return callWorker(nt,"callModule",{id:it,args:at});throw new Error("Worker module function was called but `init` did not return a callable function")})}return ot.workerModuleData={isWorkerModule:!0,id:it,name:rt,dependencies:_,init:stringifyFunction(_e),getTransferables:tt&&stringifyFunction(tt)},ot}function terminateWorker(et){registeredModules[et]&&registeredModules[et].forEach(function(_){_()}),workers[et]&&(workers[et].terminate(),delete workers[et])}function stringifyFunction(et){var _=et.toString();return!/^function/.test(_)&&/^\w+\s*\(/.test(_)&&(_="function "+_),_}function getWorker(et){var _=workers[et];if(!_){var _e=stringifyFunction(workerBootstrap);_=workers[et]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+et.replace(/\*/g,"")+` **/

;(`+_e+")()"],{type:"application/javascript"}))),_.onmessage=function(tt){var nt=tt.data,it=nt.messageId,rt=openRequests[it];if(!rt)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[it],rt(nt)}}return _}function callWorker(et,_,_e){return new Promise(function(tt,nt){var it=++_messageId;openRequests[it]=function(rt){rt.success?tt(rt.result):nt(new Error("Error in worker "+_+" call: "+rt.error))},getWorker(et).postMessage({messageId:it,action:_,data:_e})})}function SDFGenerator(){var et=function(_){function _e(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt){var rn=1-Ot;Jt.x=rn*rn*Zt+2*rn*Ot*Wt+Ot*Ot*zt,Jt.y=rn*rn*Et+2*rn*Ot*Ht+Ot*Ot*Pt}function tt(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn){var Vn=1-rn;sn.x=Vn*Vn*Vn*Zt+3*Vn*Vn*rn*Wt+3*Vn*rn*rn*zt+rn*rn*rn*Ot,sn.y=Vn*Vn*Vn*Et+3*Vn*Vn*rn*Ht+3*Vn*rn*rn*Pt+rn*rn*rn*Jt}function nt(Zt,Et){for(var Wt=/([MLQCZ])([^MLQCZ]*)/g,Ht,zt,Pt,Ot,Jt;Ht=Wt.exec(Zt);){var rn=Ht[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(sn){return parseFloat(sn)});switch(Ht[1]){case"M":Ot=zt=rn[0],Jt=Pt=rn[1];break;case"L":(rn[0]!==Ot||rn[1]!==Jt)&&Et("L",Ot,Jt,Ot=rn[0],Jt=rn[1]);break;case"Q":{Et("Q",Ot,Jt,Ot=rn[2],Jt=rn[3],rn[0],rn[1]);break}case"C":{Et("C",Ot,Jt,Ot=rn[4],Jt=rn[5],rn[0],rn[1],rn[2],rn[3]);break}case"Z":(Ot!==zt||Jt!==Pt)&&Et("L",Ot,Jt,zt,Pt);break}}}function it(Zt,Et,Wt){Wt===void 0&&(Wt=16);var Ht={x:0,y:0};nt(Zt,function(zt,Pt,Ot,Jt,rn,sn,Vn,dn,gn){switch(zt){case"L":Et(Pt,Ot,Jt,rn);break;case"Q":{for(var $t=Pt,tn=Ot,nn=1;nn<Wt;nn++)_e(Pt,Ot,sn,Vn,Jt,rn,nn/(Wt-1),Ht),Et($t,tn,Ht.x,Ht.y),$t=Ht.x,tn=Ht.y;break}case"C":{for(var Bn=Pt,Gn=Ot,kn=1;kn<Wt;kn++)tt(Pt,Ot,sn,Vn,dn,gn,Jt,rn,kn/(Wt-1),Ht),Et(Bn,Gn,Ht.x,Ht.y),Bn=Ht.x,Gn=Ht.y;break}}})}var rt="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",st="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",ot=new WeakMap,at={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function At(Zt,Et){var Wt=Zt.getContext?Zt.getContext("webgl",at):Zt,Ht=ot.get(Wt);if(!Ht){let Bn=function(In){var Dt=Pt[In];if(!Dt&&(Dt=Pt[In]=Wt.getExtension(In),!Dt))throw new Error(In+" not supported");return Dt},Gn=function(In,Dt){var Kt=Wt.createShader(Dt);return Wt.shaderSource(Kt,In),Wt.compileShader(Kt),Kt},kn=function(In,Dt,Kt,en){if(!Ot[In]){var un={},Sn={},wn=Wt.createProgram();Wt.attachShader(wn,Gn(Dt,Wt.VERTEX_SHADER)),Wt.attachShader(wn,Gn(Kt,Wt.FRAGMENT_SHADER)),Wt.linkProgram(wn),Ot[In]={program:wn,transaction:function(_n){Wt.useProgram(wn),_n({setUniform:function(Nn,jt){for(var cn=[],yn=arguments.length-2;yn-- >0;)cn[yn]=arguments[yn+2];var bn=Sn[jt]||(Sn[jt]=Wt.getUniformLocation(wn,jt));Wt["uniform"+Nn].apply(Wt,[bn].concat(cn))},setAttribute:function(Nn,jt,cn,yn,bn){var En=un[Nn];En||(En=un[Nn]={buf:Wt.createBuffer(),loc:Wt.getAttribLocation(wn,Nn),data:null}),Wt.bindBuffer(Wt.ARRAY_BUFFER,En.buf),Wt.vertexAttribPointer(En.loc,jt,Wt.FLOAT,!1,0,0),Wt.enableVertexAttribArray(En.loc),zt?Wt.vertexAttribDivisor(En.loc,yn):Bn("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(En.loc,yn),bn!==En.data&&(Wt.bufferData(Wt.ARRAY_BUFFER,bn,cn),En.data=bn)}})}}}Ot[In].transaction(en)},pn=function(In,Dt){rn++;try{Wt.activeTexture(Wt.TEXTURE0+rn);var Kt=Jt[In];Kt||(Kt=Jt[In]=Wt.createTexture(),Wt.bindTexture(Wt.TEXTURE_2D,Kt),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MIN_FILTER,Wt.NEAREST),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MAG_FILTER,Wt.NEAREST)),Wt.bindTexture(Wt.TEXTURE_2D,Kt),Dt(Kt,rn)}finally{rn--}},Rn=function(In,Dt,Kt){var en=Wt.createFramebuffer();sn.push(en),Wt.bindFramebuffer(Wt.FRAMEBUFFER,en),Wt.activeTexture(Wt.TEXTURE0+Dt),Wt.bindTexture(Wt.TEXTURE_2D,In),Wt.framebufferTexture2D(Wt.FRAMEBUFFER,Wt.COLOR_ATTACHMENT0,Wt.TEXTURE_2D,In,0);try{Kt(en)}finally{Wt.deleteFramebuffer(en),Wt.bindFramebuffer(Wt.FRAMEBUFFER,sn[--sn.length-1]||null)}},Mn=function(){Pt={},Ot={},Jt={},rn=-1,sn.length=0};var Vn=Bn,dn=Gn,gn=kn,$t=pn,tn=Rn,nn=Mn,zt=typeof WebGL2RenderingContext<"u"&&Wt instanceof WebGL2RenderingContext,Pt={},Ot={},Jt={},rn=-1,sn=[];Wt.canvas.addEventListener("webglcontextlost",function(In){Mn(),In.preventDefault()},!1),ot.set(Wt,Ht={gl:Wt,isWebGL2:zt,getExtension:Bn,withProgram:kn,withTexture:pn,withTextureFramebuffer:Rn,handleContextLoss:Mn})}Et(Ht)}function lt(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt){Ot===void 0&&(Ot=15),Jt===void 0&&(Jt=null),At(Zt,function(rn){var sn=rn.gl,Vn=rn.withProgram,dn=rn.withTexture;dn("copy",function(gn,$t){sn.texImage2D(sn.TEXTURE_2D,0,sn.RGBA,zt,Pt,0,sn.RGBA,sn.UNSIGNED_BYTE,Et),Vn("copy",rt,st,function(tn){var nn=tn.setUniform,Bn=tn.setAttribute;Bn("aUV",2,sn.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),nn("1i","image",$t),sn.bindFramebuffer(sn.FRAMEBUFFER,Jt||null),sn.disable(sn.BLEND),sn.colorMask(Ot&8,Ot&4,Ot&2,Ot&1),sn.viewport(Wt,Ht,zt,Pt),sn.scissor(Wt,Ht,zt,Pt),sn.drawArrays(sn.TRIANGLES,0,3)})})})}function gt(Zt,Et,Wt){var Ht=Zt.width,zt=Zt.height;At(Zt,function(Pt){var Ot=Pt.gl,Jt=new Uint8Array(Ht*zt*4);Ot.readPixels(0,0,Ht,zt,Ot.RGBA,Ot.UNSIGNED_BYTE,Jt),Zt.width=Et,Zt.height=Wt,lt(Ot,Jt,0,0,Ht,zt)})}var ct=Object.freeze({__proto__:null,withWebGLContext:At,renderImageData:lt,resizeWebGLCanvasWithoutClearing:gt});function dt(Zt,Et,Wt,Ht,zt,Pt){Pt===void 0&&(Pt=1);var Ot=new Uint8Array(Zt*Et),Jt=Ht[2]-Ht[0],rn=Ht[3]-Ht[1],sn=[];it(Wt,function(Bn,Gn,kn,pn){sn.push({x1:Bn,y1:Gn,x2:kn,y2:pn,minX:Math.min(Bn,kn),minY:Math.min(Gn,pn),maxX:Math.max(Bn,kn),maxY:Math.max(Gn,pn)})}),sn.sort(function(Bn,Gn){return Bn.maxX-Gn.maxX});for(var Vn=0;Vn<Zt;Vn++)for(var dn=0;dn<Et;dn++){var gn=tn(Ht[0]+Jt*(Vn+.5)/Zt,Ht[1]+rn*(dn+.5)/Et),$t=Math.pow(1-Math.abs(gn)/zt,Pt)/2;gn<0&&($t=1-$t),$t=Math.max(0,Math.min(255,Math.round($t*255))),Ot[dn*Zt+Vn]=$t}return Ot;function tn(Bn,Gn){for(var kn=1/0,pn=1/0,Rn=sn.length;Rn--;){var Mn=sn[Rn];if(Mn.maxX+pn<=Bn)break;if(Bn+pn>Mn.minX&&Gn-pn<Mn.maxY&&Gn+pn>Mn.minY){var In=Ct(Bn,Gn,Mn.x1,Mn.y1,Mn.x2,Mn.y2);In<kn&&(kn=In,pn=Math.sqrt(kn))}}return nn(Bn,Gn)&&(pn=-pn),pn}function nn(Bn,Gn){for(var kn=0,pn=sn.length;pn--;){var Rn=sn[pn];if(Rn.maxX<=Bn)break;var Mn=Rn.y1>Gn!=Rn.y2>Gn&&Bn<(Rn.x2-Rn.x1)*(Gn-Rn.y1)/(Rn.y2-Rn.y1)+Rn.x1;Mn&&(kn+=Rn.y1<Rn.y2?1:-1)}return kn!==0}}function ht(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn){Pt===void 0&&(Pt=1),Jt===void 0&&(Jt=0),rn===void 0&&(rn=0),sn===void 0&&(sn=0),mt(Zt,Et,Wt,Ht,zt,Pt,Ot,null,Jt,rn,sn)}function mt(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn,Vn){Pt===void 0&&(Pt=1),rn===void 0&&(rn=0),sn===void 0&&(sn=0),Vn===void 0&&(Vn=0);for(var dn=dt(Zt,Et,Wt,Ht,zt,Pt),gn=new Uint8Array(dn.length*4),$t=0;$t<dn.length;$t++)gn[$t*4+Vn]=dn[$t];lt(Ot,gn,rn,sn,Zt,Et,1<<3-Vn,Jt)}function Ct(Zt,Et,Wt,Ht,zt,Pt){var Ot=zt-Wt,Jt=Pt-Ht,rn=Ot*Ot+Jt*Jt,sn=rn?Math.max(0,Math.min(1,((Zt-Wt)*Ot+(Et-Ht)*Jt)/rn)):0,Vn=Zt-(Wt+sn*Ot),dn=Et-(Ht+sn*Jt);return Vn*Vn+dn*dn}var ft=Object.freeze({__proto__:null,generate:dt,generateIntoCanvas:ht,generateIntoFramebuffer:mt}),pt="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",Vt="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",yt="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",Gt=new Float32Array([0,0,2,0,0,2]),Bt=null,vt=!1,wt={},Mt=new WeakMap;function kt(Zt){if(!vt&&!Xt(Zt))throw new Error("WebGL generation not supported")}function Nt(Zt,Et,Wt,Ht,zt,Pt,Ot){if(Pt===void 0&&(Pt=1),Ot===void 0&&(Ot=null),!Ot&&(Ot=Bt,!Ot)){var Jt=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Jt)throw new Error("OffscreenCanvas or DOM canvas not supported");Ot=Bt=Jt.getContext("webgl",{depth:!1})}kt(Ot);var rn=new Uint8Array(Zt*Et*4);At(Ot,function(gn){var $t=gn.gl,tn=gn.withTexture,nn=gn.withTextureFramebuffer;tn("readable",function(Bn,Gn){$t.texImage2D($t.TEXTURE_2D,0,$t.RGBA,Zt,Et,0,$t.RGBA,$t.UNSIGNED_BYTE,null),nn(Bn,Gn,function(kn){Lt(Zt,Et,Wt,Ht,zt,Pt,$t,kn,0,0,0),$t.readPixels(0,0,Zt,Et,$t.RGBA,$t.UNSIGNED_BYTE,rn)})})});for(var sn=new Uint8Array(Zt*Et),Vn=0,dn=0;Vn<rn.length;Vn+=4)sn[dn++]=rn[Vn];return sn}function Yt(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn){Pt===void 0&&(Pt=1),Jt===void 0&&(Jt=0),rn===void 0&&(rn=0),sn===void 0&&(sn=0),Lt(Zt,Et,Wt,Ht,zt,Pt,Ot,null,Jt,rn,sn)}function Lt(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn,Vn){Pt===void 0&&(Pt=1),rn===void 0&&(rn=0),sn===void 0&&(sn=0),Vn===void 0&&(Vn=0),kt(Ot);var dn=[];it(Wt,function(gn,$t,tn,nn){dn.push(gn,$t,tn,nn)}),dn=new Float32Array(dn),At(Ot,function(gn){var $t=gn.gl,tn=gn.isWebGL2,nn=gn.getExtension,Bn=gn.withProgram,Gn=gn.withTexture,kn=gn.withTextureFramebuffer,pn=gn.handleContextLoss;if(Gn("rawDistances",function(Rn,Mn){(Zt!==Rn._lastWidth||Et!==Rn._lastHeight)&&$t.texImage2D($t.TEXTURE_2D,0,$t.RGBA,Rn._lastWidth=Zt,Rn._lastHeight=Et,0,$t.RGBA,$t.UNSIGNED_BYTE,null),Bn("main",pt,Vt,function(In){var Dt=In.setAttribute,Kt=In.setUniform,en=!tn&&nn("ANGLE_instanced_arrays"),un=!tn&&nn("EXT_blend_minmax");Dt("aUV",2,$t.STATIC_DRAW,0,Gt),Dt("aLineSegment",4,$t.DYNAMIC_DRAW,1,dn),Kt.apply(void 0,["4f","uGlyphBounds"].concat(Ht)),Kt("1f","uMaxDistance",zt),Kt("1f","uExponent",Pt),kn(Rn,Mn,function(Sn){$t.enable($t.BLEND),$t.colorMask(!0,!0,!0,!0),$t.viewport(0,0,Zt,Et),$t.scissor(0,0,Zt,Et),$t.blendFunc($t.ONE,$t.ONE),$t.blendEquationSeparate($t.FUNC_ADD,tn?$t.MAX:un.MAX_EXT),$t.clear($t.COLOR_BUFFER_BIT),tn?$t.drawArraysInstanced($t.TRIANGLES,0,3,dn.length/4):en.drawArraysInstancedANGLE($t.TRIANGLES,0,3,dn.length/4)})}),Bn("post",rt,yt,function(In){In.setAttribute("aUV",2,$t.STATIC_DRAW,0,Gt),In.setUniform("1i","tex",Mn),$t.bindFramebuffer($t.FRAMEBUFFER,Jt),$t.disable($t.BLEND),$t.colorMask(Vn===0,Vn===1,Vn===2,Vn===3),$t.viewport(rn,sn,Zt,Et),$t.scissor(rn,sn,Zt,Et),$t.drawArrays($t.TRIANGLES,0,3)})}),$t.isContextLost())throw pn(),new Error("webgl context lost")})}function Xt(Zt){var Et=!Zt||Zt===Bt?wt:Zt.canvas||Zt,Wt=Mt.get(Et);if(Wt===void 0){vt=!0;var Ht=null;try{var zt=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Pt=Nt(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Zt);Wt=Pt&&zt.length===Pt.length&&Pt.every(function(Ot,Jt){return Ot===zt[Jt]}),Wt||(Ht="bad trial run results",console.info(zt,Pt))}catch(Ot){Wt=!1,Ht=Ot.message}Ht&&console.warn("WebGL SDF generation not supported:",Ht),vt=!1,Mt.set(Et,Wt)}return Wt}var _t=Object.freeze({__proto__:null,generate:Nt,generateIntoCanvas:Yt,generateIntoFramebuffer:Lt,isSupported:Xt});function Tt(Zt,Et,Wt,Ht,zt,Pt){zt===void 0&&(zt=Math.max(Ht[2]-Ht[0],Ht[3]-Ht[1])/2),Pt===void 0&&(Pt=1);try{return Nt.apply(_t,arguments)}catch(Ot){return console.info("WebGL SDF generation failed, falling back to JS",Ot),dt.apply(ft,arguments)}}function St(Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn){zt===void 0&&(zt=Math.max(Ht[2]-Ht[0],Ht[3]-Ht[1])/2),Pt===void 0&&(Pt=1),Jt===void 0&&(Jt=0),rn===void 0&&(rn=0),sn===void 0&&(sn=0);try{return Yt.apply(_t,arguments)}catch(Vn){return console.info("WebGL SDF generation failed, falling back to JS",Vn),ht.apply(ft,arguments)}}return _.forEachPathCommand=nt,_.generate=Tt,_.generateIntoCanvas=St,_.javascript=ft,_.pathToLineSegments=it,_.webgl=_t,_.webglUtils=ct,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return et}function bidiFactory(){var et=function(_){var _e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},tt={},nt={};tt.L=1,nt[1]="L",Object.keys(_e).forEach(function(pn,Rn){tt[pn]=1<<Rn+1,nt[tt[pn]]=pn}),Object.freeze(tt);var it=tt.LRI|tt.RLI|tt.FSI,rt=tt.L|tt.R|tt.AL,st=tt.B|tt.S|tt.WS|tt.ON|tt.FSI|tt.LRI|tt.RLI|tt.PDI,ot=tt.BN|tt.RLE|tt.LRE|tt.RLO|tt.LRO|tt.PDF,at=tt.S|tt.WS|tt.B|it|tt.PDI|ot,At=null;function lt(){if(!At){At=new Map;var pn=function(Mn){if(_e.hasOwnProperty(Mn)){var In=0;_e[Mn].split(",").forEach(function(Dt){var Kt=Dt.split("+"),en=Kt[0],un=Kt[1];en=parseInt(en,36),un=un?parseInt(un,36):0,At.set(In+=en,tt[Mn]);for(var Sn=0;Sn<un;Sn++)At.set(++In,tt[Mn])})}};for(var Rn in _e)pn(Rn)}}function gt(pn){return lt(),At.get(pn.codePointAt(0))||tt.L}function ct(pn){return nt[gt(pn)]}var dt={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function ht(pn,Rn){var Mn=36,In=0,Dt=new Map,Kt=Rn&&new Map,en;return pn.split(",").forEach(function un(Sn){if(Sn.indexOf("+")!==-1)for(var wn=+Sn;wn--;)un(en);else{en=Sn;var Fn=Sn.split(">"),_n=Fn[0],fn=Fn[1];_n=String.fromCodePoint(In+=parseInt(_n,Mn)),fn=String.fromCodePoint(In+=parseInt(fn,Mn)),Dt.set(_n,fn),Rn&&Kt.set(fn,_n)}}),{map:Dt,reverseMap:Kt}}var mt,Ct,ft;function pt(){if(!mt){var pn=ht(dt.pairs,!0),Rn=pn.map,Mn=pn.reverseMap;mt=Rn,Ct=Mn,ft=ht(dt.canonical,!1).map}}function Vt(pn){return pt(),mt.get(pn)||null}function yt(pn){return pt(),Ct.get(pn)||null}function Gt(pn){return pt(),ft.get(pn)||null}var Bt=tt.L,vt=tt.R,wt=tt.EN,Mt=tt.ES,kt=tt.ET,Nt=tt.AN,Yt=tt.CS,Lt=tt.B,Xt=tt.S,_t=tt.ON,Tt=tt.BN,St=tt.NSM,Zt=tt.AL,Et=tt.LRO,Wt=tt.RLO,Ht=tt.LRE,zt=tt.RLE,Pt=tt.PDF,Ot=tt.LRI,Jt=tt.RLI,rn=tt.FSI,sn=tt.PDI;function Vn(pn,Rn){for(var Mn=125,In=new Uint32Array(pn.length),Dt=0;Dt<pn.length;Dt++)In[Dt]=gt(pn[Dt]);var Kt=new Map;function en(kr,Xr){var vr=In[kr];In[kr]=Xr,Kt.set(vr,Kt.get(vr)-1),vr&st&&Kt.set(st,Kt.get(st)-1),Kt.set(Xr,(Kt.get(Xr)||0)+1),Xr&st&&Kt.set(st,(Kt.get(st)||0)+1)}for(var un=new Uint8Array(pn.length),Sn=new Map,wn=[],Fn=null,_n=0;_n<pn.length;_n++)Fn||wn.push(Fn={start:_n,end:pn.length-1,level:Rn==="rtl"?1:Rn==="ltr"?0:Mo(_n,!1)}),In[_n]&Lt&&(Fn.end=_n,Fn=null);for(var fn=zt|Ht|Wt|Et|it|sn|Pt|Lt,Nn=function(kr){return kr+(kr&1?1:2)},jt=function(kr){return kr+(kr&1?2:1)},cn=0;cn<wn.length;cn++){Fn=wn[cn];var yn=[{_level:Fn.level,_override:0,_isolate:0}],bn=void 0,En=0,Dn=0,jn=0;Kt.clear();for(var qt=Fn.start;qt<=Fn.end;qt++){var hn=In[qt];if(bn=yn[yn.length-1],Kt.set(hn,(Kt.get(hn)||0)+1),hn&st&&Kt.set(st,(Kt.get(st)||0)+1),hn&fn)if(hn&(zt|Ht)){un[qt]=bn._level;var Wn=(hn===zt?jt:Nn)(bn._level);Wn<=Mn&&!En&&!Dn?yn.push({_level:Wn,_override:0,_isolate:0}):En||Dn++}else if(hn&(Wt|Et)){un[qt]=bn._level;var Ln=(hn===Wt?jt:Nn)(bn._level);Ln<=Mn&&!En&&!Dn?yn.push({_level:Ln,_override:hn&Wt?vt:Bt,_isolate:0}):En||Dn++}else if(hn&it){hn&rn&&(hn=Mo(qt+1,!0)===1?Jt:Ot),un[qt]=bn._level,bn._override&&en(qt,bn._override);var Kn=(hn===Jt?jt:Nn)(bn._level);Kn<=Mn&&En===0&&Dn===0?(jn++,yn.push({_level:Kn,_override:0,_isolate:1,_isolInitIndex:qt})):En++}else if(hn&sn){if(En>0)En--;else if(jn>0){for(Dn=0;!yn[yn.length-1]._isolate;)yn.pop();var tr=yn[yn.length-1]._isolInitIndex;tr!=null&&(Sn.set(tr,qt),Sn.set(qt,tr)),yn.pop(),jn--}bn=yn[yn.length-1],un[qt]=bn._level,bn._override&&en(qt,bn._override)}else hn&Pt?(En===0&&(Dn>0?Dn--:!bn._isolate&&yn.length>1&&(yn.pop(),bn=yn[yn.length-1])),un[qt]=bn._level):hn&Lt&&(un[qt]=Fn.level);else un[qt]=bn._level,bn._override&&hn!==Tt&&en(qt,bn._override)}for(var ur=[],pr=null,Ir=Fn.start;Ir<=Fn.end;Ir++){var Cr=In[Ir];if(!(Cr&ot)){var dr=un[Ir],cr=Cr&it,Jr=Cr===sn;pr&&dr===pr._level?(pr._end=Ir,pr._endsWithIsolInit=cr):ur.push(pr={_start:Ir,_end:Ir,_level:dr,_startsWithPDI:Jr,_endsWithIsolInit:cr})}}for(var zr=[],mr=0;mr<ur.length;mr++){var wr=ur[mr];if(!wr._startsWithPDI||wr._startsWithPDI&&!Sn.has(wr._start)){for(var Ut=[pr=wr],ln=void 0;pr&&pr._endsWithIsolInit&&(ln=Sn.get(pr._end))!=null;)for(var mn=mr+1;mn<ur.length;mn++)if(ur[mn]._start===ln){Ut.push(pr=ur[mn]);break}for(var An=[],Zn=0;Zn<Ut.length;Zn++)for(var zn=Ut[Zn],On=zn._start;On<=zn._end;On++)An.push(On);for(var nr=un[An[0]],ir=Fn.level,rr=An[0]-1;rr>=0;rr--)if(!(In[rr]&ot)){ir=un[rr];break}var sr=An[An.length-1],lr=un[sr],Br=Fn.level;if(!(In[sr]&it)){for(var Fr=sr+1;Fr<=Fn.end;Fr++)if(!(In[Fr]&ot)){Br=un[Fr];break}}zr.push({_seqIndices:An,_sosType:Math.max(ir,nr)%2?vt:Bt,_eosType:Math.max(Br,lr)%2?vt:Bt})}}for(var ts=0;ts<zr.length;ts++){var ds=zr[ts],Hn=ds._seqIndices,$n=ds._sosType,Ys=ds._eosType;if(Kt.get(St))for(var br=0;br<Hn.length;br++){var ys=Hn[br];if(In[ys]&St){for(var Ms=$n,Pr=br-1;Pr>=0;Pr--)if(!(In[Hn[Pr]]&ot)){Ms=In[Hn[Pr]];break}en(ys,Ms&(it|sn)?_t:Ms)}}if(Kt.get(wt))for(var Dr=0;Dr<Hn.length;Dr++){var qn=Hn[Dr];if(In[qn]&wt)for(var ar=Dr-1;ar>=-1;ar--){var ns=ar===-1?$n:In[Hn[ar]];if(ns&rt){ns===Zt&&en(qn,Nt);break}}}if(Kt.get(Zt))for(var hr=0;hr<Hn.length;hr++){var Wr=Hn[hr];In[Wr]&Zt&&en(Wr,vt)}if(Kt.get(Mt)||Kt.get(Yt))for(var rs=1;rs<Hn.length-1;rs++){var hs=Hn[rs];if(In[hs]&(Mt|Yt)){for(var _r=0,qs=0,xo=rs-1;xo>=0&&(_r=In[Hn[xo]],!!(_r&ot));xo--);for(var So=rs+1;So<Hn.length&&(qs=In[Hn[So]],!!(qs&ot));So++);_r===qs&&(In[hs]===Mt?_r===wt:_r&(wt|Nt))&&en(hs,_r)}}if(Kt.get(wt))for(var Fs=0;Fs<Hn.length;Fs++){var AA=Hn[Fs];if(In[AA]&wt){for(var Or=Fs-1;Or>=0&&In[Hn[Or]]&(kt|ot);Or--)en(Hn[Or],wt);for(var wo=Fs+1;wo<Hn.length&&In[Hn[wo]]&(kt|ot);wo++)en(Hn[wo],wt)}}if(Kt.get(kt)||Kt.get(Mt)||Kt.get(Yt))for(var co=0;co<Hn.length;co++){var lA=Hn[co];if(In[lA]&(kt|Mt|Yt)){en(lA,_t);for(var Ks=co-1;Ks>=0&&In[Hn[Ks]]&ot;Ks--)en(Hn[Ks],_t);for(var zs=co+1;zs<Hn.length&&In[Hn[zs]]&ot;zs++)en(Hn[zs],_t)}}if(Kt.get(wt))for(var Ps=0,uo=$n;Ps<Hn.length;Ps++){var gA=Hn[Ps],zo=In[gA];zo&wt?uo===Bt&&en(gA,Bt):zo&rt&&(uo=zo)}if(Kt.get(st)){var Ds=vt|wt|Nt,Zo=Ds|Bt,ks=[];{for(var eo=[],Es=0;Es<Hn.length;Es++)if(In[Hn[Es]]&st){var gr=pn[Hn[Es]],Po=void 0;if(Vt(gr)!==null)if(eo.length<63)eo.push({char:gr,seqIndex:Es});else break;else if((Po=yt(gr))!==null)for(var Us=eo.length-1;Us>=0;Us--){var Ro=eo[Us].char;if(Ro===Po||Ro===yt(Gt(gr))||Vt(Gt(Ro))===gr){ks.push([eo[Us].seqIndex,Es]),eo.length=Us;break}}}ks.sort(function(kr,Xr){return kr[0]-Xr[0]})}for(var Do=0;Do<ks.length;Do++){for(var cA=ks[Do],xr=cA[0],to=cA[1],uA=!1,ss=0,Uo=xr+1;Uo<to;Uo++){var no=Hn[Uo];if(In[no]&Zo){uA=!0;var Is=In[no]&Ds?vt:Bt;if(Is===Ns(no)){ss=Is;break}}}if(uA&&!ss){ss=$n;for(var Jo=xr-1;Jo>=0;Jo--){var Wo=Hn[Jo];if(In[Wo]&Zo){var Cs=In[Wo]&Ds?vt:Bt;Cs!==Ns(Wo)?ss=Cs:ss=Ns(Wo);break}}}if(ss){if(In[Hn[xr]]=In[Hn[to]]=ss,ss!==Ns(Hn[xr])){for(var os=xr+1;os<Hn.length;os++)if(!(In[Hn[os]]&ot)){gt(pn[Hn[os]])&St&&(In[Hn[os]]=ss);break}}if(ss!==Ns(Hn[to])){for(var Ts=to+1;Ts<Hn.length;Ts++)if(!(In[Hn[Ts]]&ot)){gt(pn[Hn[Ts]])&St&&(In[Hn[Ts]]=ss);break}}}}for(var bs=0;bs<Hn.length;bs++)if(In[Hn[bs]]&st){for(var Oo=bs,Qo=bs,ls=$n,ho=bs-1;ho>=0;ho--)if(In[Hn[ho]]&ot)Oo=ho;else{ls=In[Hn[ho]]&Ds?vt:Bt;break}for(var Io=Ys,Co=bs+1;Co<Hn.length;Co++)if(In[Hn[Co]]&(st|ot))Qo=Co;else{Io=In[Hn[Co]]&Ds?vt:Bt;break}for(var Qr=Oo;Qr<=Qo;Qr++)In[Hn[Qr]]=ls===Io?ls:Ns(Hn[Qr]);bs=Qo}}}for(var Lr=Fn.start;Lr<=Fn.end;Lr++){var _o=un[Lr],Rs=In[Lr];if(_o&1?Rs&(Bt|wt|Nt)&&un[Lr]++:Rs&vt?un[Lr]++:Rs&(Nt|wt)&&(un[Lr]+=2),Rs&ot&&(un[Lr]=Lr===0?Fn.level:un[Lr-1]),Lr===Fn.end||gt(pn[Lr])&(Xt|Lt))for(var io=Lr;io>=0&&gt(pn[io])&at;io--)un[io]=Fn.level}}return{levels:un,paragraphs:wn};function Mo(kr,Xr){for(var vr=kr;vr<pn.length;vr++){var Nr=In[vr];if(Nr&(vt|Zt))return 1;if(Nr&(Lt|Bt)||Xr&&Nr===sn)return 0;if(Nr&it){var Ws=dA(vr);vr=Ws===-1?pn.length:Ws}}return 0}function dA(kr){for(var Xr=1,vr=kr+1;vr<pn.length;vr++){var Nr=In[vr];if(Nr&Lt)break;if(Nr&sn){if(--Xr===0)return vr}else Nr&it&&Xr++}return-1}function Ns(kr){return un[kr]&1?vt:Bt}}var dn="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",gn;function $t(){if(!gn){var pn=ht(dn,!0),Rn=pn.map,Mn=pn.reverseMap;Mn.forEach(function(In,Dt){Rn.set(Dt,In)}),gn=Rn}}function tn(pn){return $t(),gn.get(pn)||null}function nn(pn,Rn,Mn,In){var Dt=pn.length;Mn=Math.max(0,Mn==null?0:+Mn),In=Math.min(Dt-1,In==null?Dt-1:+In);for(var Kt=new Map,en=Mn;en<=In;en++)if(Rn[en]&1){var un=tn(pn[en]);un!==null&&Kt.set(en,un)}return Kt}function Bn(pn,Rn,Mn,In){var Dt=pn.length;Mn=Math.max(0,Mn==null?0:+Mn),In=Math.min(Dt-1,In==null?Dt-1:+In);var Kt=[];return Rn.paragraphs.forEach(function(en){var un=Math.max(Mn,en.start),Sn=Math.min(In,en.end);if(un<Sn){for(var wn=Rn.levels.slice(un,Sn+1),Fn=Sn;Fn>=un&&gt(pn[Fn])&at;Fn--)wn[Fn]=en.level;for(var _n=en.level,fn=1/0,Nn=0;Nn<wn.length;Nn++){var jt=wn[Nn];jt>_n&&(_n=jt),jt<fn&&(fn=jt|1)}for(var cn=_n;cn>=fn;cn--)for(var yn=0;yn<wn.length;yn++)if(wn[yn]>=cn){for(var bn=yn;yn+1<wn.length&&wn[yn+1]>=cn;)yn++;yn>bn&&Kt.push([bn+Mn,yn+Mn])}}}),Kt}function Gn(pn,Rn,Mn,In){var Dt=kn(pn,Rn,Mn,In),Kt=[].concat(pn);return Dt.forEach(function(en,un){Kt[un]=(Rn.levels[en]&1?tn(pn[en]):null)||pn[en]}),Kt.join("")}function kn(pn,Rn,Mn,In){for(var Dt=Bn(pn,Rn,Mn,In),Kt=[],en=0;en<pn.length;en++)Kt[en]=en;return Dt.forEach(function(un){for(var Sn=un[0],wn=un[1],Fn=Kt.slice(Sn,wn+1),_n=Fn.length;_n--;)Kt[wn-_n]=Fn[_n]}),Kt}return _.closingToOpeningBracket=yt,_.getBidiCharType=gt,_.getBidiCharTypeName=ct,_.getCanonicalBracket=Gt,_.getEmbeddingLevels=Vn,_.getMirroredCharacter=tn,_.getMirroredCharactersMap=nn,_.getReorderSegments=Bn,_.getReorderedIndices=kn,_.getReorderedString=Gn,_.openingToClosingBracket=Vt,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return et}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(et){const _=/^[ \t]*#include +<([\w\d./]+)>/gm;function _e(tt,nt){let it=ShaderChunk[nt];return it?expandShaderIncludes(it):tt}return et.replace(_,_e)}const _lut=[];for(let et=0;et<256;et++)_lut[et]=(et<16?"0":"")+et.toString(16);function generateUUID(){const et=Math.random()*4294967295|0,_=Math.random()*4294967295|0,_e=Math.random()*4294967295|0,tt=Math.random()*4294967295|0;return(_lut[et&255]+_lut[et>>8&255]+_lut[et>>16&255]+_lut[et>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[_e&63|128]+_lut[_e>>8&255]+"-"+_lut[_e>>16&255]+_lut[_e>>24&255]+_lut[tt&255]+_lut[tt>>8&255]+_lut[tt>>16&255]+_lut[tt>>24&255]).toUpperCase()}const assign$1=Object.assign||function(){let et=arguments[0];for(let _=1,_e=arguments.length;_<_e;_++){let tt=arguments[_];if(tt)for(let nt in tt)tt.hasOwnProperty(nt)&&(et[nt]=tt[nt])}return et},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(et,_){const _e=getKeyForOptions(_);let tt=CONSTRUCTOR_CACHE.get(et);if(tt||CONSTRUCTOR_CACHE.set(et,tt=Object.create(null)),tt[_e])return new tt[_e];const nt=`_onBeforeCompile${_e}`,it=function(at){et.onBeforeCompile.call(this,at);const At=this.customProgramCacheKey()+"|"+at.vertexShader+"|"+at.fragmentShader;let lt=SHADER_UPGRADE_CACHE[At];if(!lt){const gt=upgradeShaders(at,_,_e);lt=SHADER_UPGRADE_CACHE[At]=gt}at.vertexShader=lt.vertexShader,at.fragmentShader=lt.fragmentShader,assign$1(at.uniforms,this.uniforms),_.timeUniform&&(at.uniforms[_.timeUniform]={get value(){return Date.now()-epoch}}),this[nt]&&this[nt](at)},rt=function(){return st(_.chained?et:et.clone())},st=function(at){const At=Object.create(at,ot);return Object.defineProperty(At,"baseMaterial",{value:et}),Object.defineProperty(At,"id",{value:materialInstanceId++}),At.uuid=generateUUID(),At.uniforms=assign$1({},at.uniforms,_.uniforms),At.defines=assign$1({},at.defines,_.defines),At.defines[`TROIKA_DERIVED_MATERIAL_${_e}`]="",At.extensions=assign$1({},at.extensions,_.extensions),At._listeners=void 0,At},ot={constructor:{value:rt},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return et.customProgramCacheKey()+"|"+_e}},onBeforeCompile:{get(){return it},set(at){this[nt]=at}},copy:{writable:!0,configurable:!0,value:function(at){return et.copy.call(this,at),!et.isShaderMaterial&&!et.isDerivedMaterial&&(assign$1(this.extensions,at.extensions),assign$1(this.defines,at.defines),assign$1(this.uniforms,UniformsUtils.clone(at.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const at=new et.constructor;return st(at).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let at=this._depthMaterial;return at||(at=this._depthMaterial=createDerivedMaterial(et.isDerivedMaterial?et.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),_),at.defines.IS_DEPTH_MATERIAL="",at.uniforms=this.uniforms),at}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let at=this._distanceMaterial;return at||(at=this._distanceMaterial=createDerivedMaterial(et.isDerivedMaterial?et.getDistanceMaterial():new MeshDistanceMaterial,_),at.defines.IS_DISTANCE_MATERIAL="",at.uniforms=this.uniforms),at}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:at,_distanceMaterial:At}=this;at&&at.dispose(),At&&At.dispose(),et.dispose.call(this)}}};return tt[_e]=rt,new rt}function upgradeShaders({vertexShader:et,fragmentShader:_},_e,tt){let{vertexDefs:nt,vertexMainIntro:it,vertexMainOutro:rt,vertexTransform:st,fragmentDefs:ot,fragmentMainIntro:at,fragmentMainOutro:At,fragmentColorTransform:lt,customRewriter:gt,timeUniform:ct}=_e;if(nt=nt||"",it=it||"",rt=rt||"",ot=ot||"",at=at||"",At=At||"",(st||gt)&&(et=expandShaderIncludes(et)),(lt||gt)&&(_=_.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),_=expandShaderIncludes(_)),gt){let dt=gt({vertexShader:et,fragmentShader:_});et=dt.vertexShader,_=dt.fragmentShader}if(lt){let dt=[];_=_.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,ht=>(dt.push(ht),"")),At=`${lt}
${dt.join(`
`)}
${At}`}if(ct){const dt=`
uniform float ${ct};
`;nt=dt+nt,ot=dt+ot}return st&&(et=`vec3 troika_position_${tt};
vec3 troika_normal_${tt};
vec2 troika_uv_${tt};
${et}
`,nt=`${nt}
void troikaVertexTransform${tt}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${st}
}
`,it=`
troika_position_${tt} = vec3(position);
troika_normal_${tt} = vec3(normal);
troika_uv_${tt} = vec2(uv);
troikaVertexTransform${tt}(troika_position_${tt}, troika_normal_${tt}, troika_uv_${tt});
${it}
`,et=et.replace(/\b(position|normal|uv)\b/g,(dt,ht,mt,Ct)=>/\battribute\s+vec[23]\s+$/.test(Ct.substr(0,mt))?ht:`troika_${ht}_${tt}`)),et=injectIntoShaderCode(et,tt,nt,it,rt),_=injectIntoShaderCode(_,tt,ot,at,At),{vertexShader:et,fragmentShader:_}}function injectIntoShaderCode(et,_,_e,tt,nt){return(tt||nt||_e)&&(et=et.replace(voidMainRegExp,`
${_e}
void troikaOrigMain${_}() {`),et+=`
void main() {
  ${tt}
  troikaOrigMain${_}();
  ${nt}
}`),et}function optionsJsonReplacer(et,_){return et==="uniforms"?void 0:typeof _=="function"?_.toString():_}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(et){const _=JSON.stringify(et,optionsJsonReplacer);let _e=optionsHashesToIds.get(_);return _e==null&&optionsHashesToIds.set(_,_e=++_idCtr),_e}function createTypesetter(et,_,_e){const{defaultFontURL:tt}=_e,nt=Object.create(null),it=1/0,rt=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,st="[^\\S\\u00A0]",ot=new RegExp(`${st}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function at(ft,pt){function Vt(){const yt=Gt=>{console.error(`Failure loading font ${ft}${ft===tt?"":"; trying fallback"}`,Gt),ft!==tt&&(ft=tt,Vt())};try{const Gt=new XMLHttpRequest;Gt.open("get",ft,!0),Gt.responseType="arraybuffer",Gt.onload=function(){if(Gt.status>=400)yt(new Error(Gt.statusText));else if(Gt.status>0)try{const Bt=et(Gt.response);pt(Bt)}catch(Bt){yt(Bt)}},Gt.onerror=yt,Gt.send()}catch(Gt){yt(Gt)}}Vt()}function At(ft,pt){ft||(ft=tt);let Vt=nt[ft];Vt?Vt.pending?Vt.pending.push(pt):pt(Vt):(nt[ft]={pending:[pt]},at(ft,yt=>{let Gt=nt[ft].pending;nt[ft]=yt,Gt.forEach(Bt=>Bt(yt))}))}function lt({text:ft="",font:pt=tt,sdfGlyphSize:Vt=64,fontSize:yt=1,letterSpacing:Gt=0,lineHeight:Bt="normal",maxWidth:vt=it,direction:wt,textAlign:Mt="left",textIndent:kt=0,whiteSpace:Nt="normal",overflowWrap:Yt="normal",anchorX:Lt=0,anchorY:Xt=0,includeCaretPositions:_t=!1,chunkedBoundsSize:Tt=8192,colorRanges:St=null},Zt,Et=!1){const Wt=ht(),Ht={fontLoad:0,typesetting:0};ft.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),ft=ft.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),yt=+yt,Gt=+Gt,vt=+vt,Bt=Bt||"normal",kt=+kt,At(pt,zt=>{const Pt=isFinite(vt);let Ot=null,Jt=null,rn=null,sn=null,Vn=null,dn=null,gn=null,$t=0,tn=0,nn=Nt!=="nowrap";const{ascender:Bn,descender:Gn,unitsPerEm:kn,lineGap:pn,capHeight:Rn,xHeight:Mn}=zt;Ht.fontLoad=ht()-Wt;const In=ht(),Dt=yt/kn;Bt==="normal"&&(Bt=(Bn-Gn+pn)/kn),Bt=Bt*yt;const Kt=(Bt-(Bn-Gn)*Dt)/2,en=-(Bn*Dt+Kt),un=Math.min(Bt,(Bn-Gn)*Dt),Sn=(Bn+Gn)/2*Dt-un/2;let wn=kt,Fn=new mt;const _n=[Fn];zt.forEachGlyph(ft,yt,Gt,(jt,cn,yn)=>{const bn=ft.charAt(yn),En=jt.advanceWidth*Dt,Dn=Fn.count;let jn;if("isEmpty"in jt||(jt.isWhitespace=!!bn&&new RegExp(st).test(bn),jt.canBreakAfter=!!bn&&ot.test(bn),jt.isEmpty=jt.xMin===jt.xMax||jt.yMin===jt.yMax||rt.test(bn)),!jt.isWhitespace&&!jt.isEmpty&&tn++,nn&&Pt&&!jt.isWhitespace&&cn+En+wn>vt&&Dn){if(Fn.glyphAt(Dn-1).glyphObj.canBreakAfter)jn=new mt,wn=-cn;else for(let hn=Dn;hn--;)if(hn===0&&Yt==="break-word"){jn=new mt,wn=-cn;break}else if(Fn.glyphAt(hn).glyphObj.canBreakAfter){jn=Fn.splitAt(hn+1);const Wn=jn.glyphAt(0).x;wn-=Wn;for(let Ln=jn.count;Ln--;)jn.glyphAt(Ln).x-=Wn;break}jn&&(Fn.isSoftWrapped=!0,Fn=jn,_n.push(Fn),$t=vt)}let qt=Fn.glyphAt(Fn.count);qt.glyphObj=jt,qt.x=cn+wn,qt.width=En,qt.charIndex=yn,bn===`
`&&(Fn=new mt,_n.push(Fn),wn=-(cn+En+Gt*yt)+kt)}),_n.forEach(jt=>{for(let cn=jt.count;cn--;){let{glyphObj:yn,x:bn,width:En}=jt.glyphAt(cn);if(!yn.isWhitespace){jt.width=bn+En,jt.width>$t&&($t=jt.width);return}}});let fn=0,Nn=0;if(Lt&&(typeof Lt=="number"?fn=-Lt:typeof Lt=="string"&&(fn=-$t*(Lt==="left"?0:Lt==="center"?.5:Lt==="right"?1:ct(Lt)))),Xt){if(typeof Xt=="number")Nn=-Xt;else if(typeof Xt=="string"){let jt=_n.length*Bt;Nn=Xt==="top"?0:Xt==="top-baseline"?-en:Xt==="top-cap"?-en-Rn*Dt:Xt==="top-ex"?-en-Mn*Dt:Xt==="middle"?jt/2:Xt==="bottom"?jt:Xt==="bottom-baseline"?jt-Kt+Gn*Dt:ct(Xt)*jt}}if(!Et){const jt=_.getEmbeddingLevels(ft,wt);Ot=new Uint16Array(tn),Jt=new Float32Array(tn*2),rn={},dn=[it,it,-it,-it],gn=[];let cn=en;_t&&(Vn=new Float32Array(ft.length*3)),St&&(sn=new Uint8Array(tn*3));let yn=0,bn=-1,En=-1,Dn,jn;if(_n.forEach((qt,hn)=>{let{count:Wn,width:Ln}=qt;if(Wn>0){let Kn=0;for(let dr=Wn;dr--&&qt.glyphAt(dr).glyphObj.isWhitespace;)Kn++;let tr=0,ur=0;if(Mt==="center")tr=($t-Ln)/2;else if(Mt==="right")tr=$t-Ln;else if(Mt==="justify"&&qt.isSoftWrapped){let dr=0;for(let cr=Wn-Kn;cr--;)qt.glyphAt(cr).glyphObj.isWhitespace&&dr++;ur=($t-Ln)/dr}if(ur||tr){let dr=0;for(let cr=0;cr<Wn;cr++){let Jr=qt.glyphAt(cr);const zr=Jr.glyphObj;Jr.x+=tr+dr,ur!==0&&zr.isWhitespace&&cr<Wn-Kn&&(dr+=ur,Jr.width+=ur)}}const pr=_.getReorderSegments(ft,jt,qt.glyphAt(0).charIndex,qt.glyphAt(qt.count-1).charIndex);for(let dr=0;dr<pr.length;dr++){const[cr,Jr]=pr[dr];let zr=1/0,mr=-1/0;for(let wr=0;wr<Wn;wr++)if(qt.glyphAt(wr).charIndex>=cr){let Ut=wr,ln=wr;for(;ln<Wn;ln++){let mn=qt.glyphAt(ln);if(mn.charIndex>Jr)break;ln<Wn-Kn&&(zr=Math.min(zr,mn.x),mr=Math.max(mr,mn.x+mn.width))}for(let mn=Ut;mn<ln;mn++){const An=qt.glyphAt(mn);An.x=mr-(An.x+An.width-zr)}break}}let Ir;const Cr=dr=>Ir=dr;for(let dr=0;dr<Wn;dr++){let cr=qt.glyphAt(dr);Ir=cr.glyphObj;const Jr=Ir.index,zr=jt.levels[cr.charIndex]&1;if(zr){const mr=_.getMirroredCharacter(ft[cr.charIndex]);mr&&zt.forEachGlyph(mr,0,0,Cr)}if(_t){const{charIndex:mr}=cr,wr=cr.x+fn,Ut=cr.x+cr.width+fn;Vn[mr*3]=zr?Ut:wr,Vn[mr*3+1]=zr?wr:Ut,Vn[mr*3+2]=cn+Sn+Nn;const ln=mr-bn;ln>1&&dt(Vn,bn,ln),bn=mr}if(St){const{charIndex:mr}=cr;for(;mr>En;)En++,St.hasOwnProperty(En)&&(jn=St[En])}if(!Ir.isWhitespace&&!Ir.isEmpty){const mr=yn++;rn[Jr]||(rn[Jr]={path:Ir.path,pathBounds:[Ir.xMin,Ir.yMin,Ir.xMax,Ir.yMax]});const wr=cr.x+fn,Ut=cn+Nn;Jt[mr*2]=wr,Jt[mr*2+1]=Ut;const ln=wr+Ir.xMin*Dt,mn=Ut+Ir.yMin*Dt,An=wr+Ir.xMax*Dt,Zn=Ut+Ir.yMax*Dt;ln<dn[0]&&(dn[0]=ln),mn<dn[1]&&(dn[1]=mn),An>dn[2]&&(dn[2]=An),Zn>dn[3]&&(dn[3]=Zn),mr%Tt===0&&(Dn={start:mr,end:mr,rect:[it,it,-it,-it]},gn.push(Dn)),Dn.end++;const zn=Dn.rect;if(ln<zn[0]&&(zn[0]=ln),mn<zn[1]&&(zn[1]=mn),An>zn[2]&&(zn[2]=An),Zn>zn[3]&&(zn[3]=Zn),Ot[mr]=Jr,St){const On=mr*3;sn[On]=jn>>16&255,sn[On+1]=jn>>8&255,sn[On+2]=jn&255}}}}cn-=Bt}),Vn){const qt=ft.length-bn;qt>1&&dt(Vn,bn,qt)}}Ht.typesetting=ht()-In,Zt({glyphIds:Ot,glyphPositions:Jt,glyphData:rn,caretPositions:Vn,caretHeight:un,glyphColors:sn,chunkedBounds:gn,fontSize:yt,unitsPerEm:kn,ascender:Bn*Dt,descender:Gn*Dt,capHeight:Rn*Dt,xHeight:Mn*Dt,lineHeight:Bt,topBaseline:en,blockBounds:[fn,Nn-_n.length*Bt,fn+$t,Nn],visibleBounds:dn,timings:Ht})})}function gt(ft,pt){lt(ft,Vt=>{const[yt,Gt,Bt,vt]=Vt.blockBounds;pt({width:Bt-yt,height:vt-Gt})},{metricsOnly:!0})}function ct(ft){let pt=ft.match(/^([\d.]+)%$/),Vt=pt?parseFloat(pt[1]):NaN;return isNaN(Vt)?0:Vt/100}function dt(ft,pt,Vt){const yt=ft[pt*3],Gt=ft[pt*3+1],Bt=ft[pt*3+2],vt=(Gt-yt)/Vt;for(let wt=0;wt<Vt;wt++){const Mt=(pt+wt)*3;ft[Mt]=yt+vt*wt,ft[Mt+1]=yt+vt*(wt+1),ft[Mt+2]=Bt}}function ht(){return(self.performance||Date).now()}function mt(){this.data=[]}const Ct=["glyphObj","x","width","charIndex"];return mt.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/Ct.length)},glyphAt(ft){let pt=mt.flyweight;return pt.data=this.data,pt.index=ft,pt},splitAt(ft){let pt=new mt;return pt.data=this.data.splice(ft*Ct.length),pt}},mt.flyweight=Ct.reduce((ft,pt,Vt,yt)=>(Object.defineProperty(ft,pt,{get(){return this.data[this.index*Ct.length+Vt]},set(Gt){this.data[this.index*Ct.length+Vt]=Gt}}),ft),{data:null,index:0}),{typeset:lt,measure:gt,loadFont:At}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned;function generateSDF(et,_,_e,tt,nt,it,rt,st,ot,at,At=!0){return At?generateSDF_GL(et,_,_e,tt,nt,it,rt,st,ot,at).then(null,lt=>(warned||(console.warn("WebGL SDF generation failed, falling back to JS",lt),warned=!0),generateSDF_JS_Worker(et,_,_e,tt,nt,it,rt,st,ot,at))):generateSDF_JS_Worker(et,_,_e,tt,nt,it,rt,st,ot,at)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const et=now();for(;queue.length&&now()-et<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(...et)=>new Promise((_,_e)=>{queue.push(()=>{const tt=now();try{mainThreadGenerator.webgl.generateIntoCanvas(...et),_({timing:now()-tt})}catch(nt){_e(nt)}}),timer||(timer=setTimeout(nextChunk,0))}),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(et,_,_e,tt,nt,it,rt,st,ot,at){const At="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let lt=threads[At];return lt||(lt=threads[At]={workerModule:defineWorkerModule({name:At,workerId:At,dependencies:[SDFGenerator,now],init(gt,ct){const dt=gt().javascript.generate;return function(...ht){const mt=ct();return{textureData:dt(...ht),timing:ct()-mt}}},getTransferables(gt){return[gt.textureData.buffer]}}),requests:0,idleTimer:null}),lt.requests++,clearTimeout(lt.idleTimer),lt.workerModule(et,_,_e,tt,nt,it).then(({textureData:gt,timing:ct})=>{const dt=now(),ht=new Uint8Array(gt.length*4);for(let mt=0;mt<gt.length;mt++)ht[mt*4+at]=gt[mt];return mainThreadGenerator.webglUtils.renderImageData(rt,ht,st,ot,et,_,1<<3-at),ct+=now()-dt,--lt.requests===0&&(lt.idleTimer=setTimeout(()=>{terminateWorker(At)},idleTimeout)),{timing:ct}})}function warmUpSDFCanvas(et){et._warm||(mainThreadGenerator.webgl.isSupported(et),et._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return typeof window>"u"&&(self.window=self),function(et){var _={parse:function(nt){var it=_._bin,rt=new Uint8Array(nt);if(it.readASCII(rt,0,4)=="ttcf"){var st=4;it.readUshort(rt,st),st+=2,it.readUshort(rt,st),st+=2;var ot=it.readUint(rt,st);st+=4;for(var at=[],At=0;At<ot;At++){var lt=it.readUint(rt,st);st+=4,at.push(_._readFont(rt,lt))}return at}return[_._readFont(rt,0)]},_readFont:function(nt,it){var rt=_._bin,st=it;rt.readFixed(nt,it),it+=4;var ot=rt.readUshort(nt,it);it+=2,rt.readUshort(nt,it),it+=2,rt.readUshort(nt,it),it+=2,rt.readUshort(nt,it),it+=2;for(var at=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],At={_data:nt,_offset:st},lt={},gt=0;gt<ot;gt++){var ct=rt.readASCII(nt,it,4);it+=4,rt.readUint(nt,it),it+=4;var dt=rt.readUint(nt,it);it+=4;var ht=rt.readUint(nt,it);it+=4,lt[ct]={offset:dt,length:ht}}for(gt=0;gt<at.length;gt++){var mt=at[gt];lt[mt]&&(At[mt.trim()]=_[mt.trim()].parse(nt,lt[mt].offset,lt[mt].length,At))}return At},_tabOffset:function(nt,it,rt){for(var st=_._bin,ot=st.readUshort(nt,rt+4),at=rt+12,At=0;At<ot;At++){var lt=st.readASCII(nt,at,4);at+=4,st.readUint(nt,at),at+=4;var gt=st.readUint(nt,at);if(at+=4,st.readUint(nt,at),at+=4,lt==it)return gt}return 0}};_._bin={readFixed:function(nt,it){return(nt[it]<<8|nt[it+1])+(nt[it+2]<<8|nt[it+3])/65540},readF2dot14:function(nt,it){return _._bin.readShort(nt,it)/16384},readInt:function(nt,it){return _._bin._view(nt).getInt32(it)},readInt8:function(nt,it){return _._bin._view(nt).getInt8(it)},readShort:function(nt,it){return _._bin._view(nt).getInt16(it)},readUshort:function(nt,it){return _._bin._view(nt).getUint16(it)},readUshorts:function(nt,it,rt){for(var st=[],ot=0;ot<rt;ot++)st.push(_._bin.readUshort(nt,it+2*ot));return st},readUint:function(nt,it){return _._bin._view(nt).getUint32(it)},readUint64:function(nt,it){return 4294967296*_._bin.readUint(nt,it)+_._bin.readUint(nt,it+4)},readASCII:function(nt,it,rt){for(var st="",ot=0;ot<rt;ot++)st+=String.fromCharCode(nt[it+ot]);return st},readUnicode:function(nt,it,rt){for(var st="",ot=0;ot<rt;ot++){var at=nt[it++]<<8|nt[it++];st+=String.fromCharCode(at)}return st},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(nt,it,rt){var st=_._bin._tdec;return st&&it==0&&rt==nt.length?st.decode(nt):_._bin.readASCII(nt,it,rt)},readBytes:function(nt,it,rt){for(var st=[],ot=0;ot<rt;ot++)st.push(nt[it+ot]);return st},readASCIIArray:function(nt,it,rt){for(var st=[],ot=0;ot<rt;ot++)st.push(String.fromCharCode(nt[it+ot]));return st},_view:function(nt){return nt._dataView||(nt._dataView=nt.buffer?new DataView(nt.buffer,nt.byteOffset,nt.byteLength):new DataView(new Uint8Array(nt).buffer))}},_._lctf={},_._lctf.parse=function(nt,it,rt,st,ot){var at=_._bin,At={},lt=it;at.readFixed(nt,it),it+=4;var gt=at.readUshort(nt,it);it+=2;var ct=at.readUshort(nt,it);it+=2;var dt=at.readUshort(nt,it);return it+=2,At.scriptList=_._lctf.readScriptList(nt,lt+gt),At.featureList=_._lctf.readFeatureList(nt,lt+ct),At.lookupList=_._lctf.readLookupList(nt,lt+dt,ot),At},_._lctf.readLookupList=function(nt,it,rt){var st=_._bin,ot=it,at=[],At=st.readUshort(nt,it);it+=2;for(var lt=0;lt<At;lt++){var gt=st.readUshort(nt,it);it+=2;var ct=_._lctf.readLookupTable(nt,ot+gt,rt);at.push(ct)}return at},_._lctf.readLookupTable=function(nt,it,rt){var st=_._bin,ot=it,at={tabs:[]};at.ltype=st.readUshort(nt,it),it+=2,at.flag=st.readUshort(nt,it),it+=2;var At=st.readUshort(nt,it);it+=2;for(var lt=at.ltype,gt=0;gt<At;gt++){var ct=st.readUshort(nt,it);it+=2;var dt=rt(nt,lt,ot+ct,at);at.tabs.push(dt)}return at},_._lctf.numOfOnes=function(nt){for(var it=0,rt=0;rt<32;rt++)nt>>>rt&1&&it++;return it},_._lctf.readClassDef=function(nt,it){var rt=_._bin,st=[],ot=rt.readUshort(nt,it);if(it+=2,ot==1){var at=rt.readUshort(nt,it);it+=2;var At=rt.readUshort(nt,it);it+=2;for(var lt=0;lt<At;lt++)st.push(at+lt),st.push(at+lt),st.push(rt.readUshort(nt,it)),it+=2}if(ot==2){var gt=rt.readUshort(nt,it);for(it+=2,lt=0;lt<gt;lt++)st.push(rt.readUshort(nt,it)),it+=2,st.push(rt.readUshort(nt,it)),it+=2,st.push(rt.readUshort(nt,it)),it+=2}return st},_._lctf.getInterval=function(nt,it){for(var rt=0;rt<nt.length;rt+=3){var st=nt[rt],ot=nt[rt+1];if(nt[rt+2],st<=it&&it<=ot)return rt}return-1},_._lctf.readCoverage=function(nt,it){var rt=_._bin,st={};st.fmt=rt.readUshort(nt,it),it+=2;var ot=rt.readUshort(nt,it);return it+=2,st.fmt==1&&(st.tab=rt.readUshorts(nt,it,ot)),st.fmt==2&&(st.tab=rt.readUshorts(nt,it,3*ot)),st},_._lctf.coverageIndex=function(nt,it){var rt=nt.tab;if(nt.fmt==1)return rt.indexOf(it);if(nt.fmt==2){var st=_._lctf.getInterval(rt,it);if(st!=-1)return rt[st+2]+(it-rt[st])}return-1},_._lctf.readFeatureList=function(nt,it){var rt=_._bin,st=it,ot=[],at=rt.readUshort(nt,it);it+=2;for(var At=0;At<at;At++){var lt=rt.readASCII(nt,it,4);it+=4;var gt=rt.readUshort(nt,it);it+=2;var ct=_._lctf.readFeatureTable(nt,st+gt);ct.tag=lt.trim(),ot.push(ct)}return ot},_._lctf.readFeatureTable=function(nt,it){var rt=_._bin,st=it,ot={},at=rt.readUshort(nt,it);it+=2,at>0&&(ot.featureParams=st+at);var At=rt.readUshort(nt,it);it+=2,ot.tab=[];for(var lt=0;lt<At;lt++)ot.tab.push(rt.readUshort(nt,it+2*lt));return ot},_._lctf.readScriptList=function(nt,it){var rt=_._bin,st=it,ot={},at=rt.readUshort(nt,it);it+=2;for(var At=0;At<at;At++){var lt=rt.readASCII(nt,it,4);it+=4;var gt=rt.readUshort(nt,it);it+=2,ot[lt.trim()]=_._lctf.readScriptTable(nt,st+gt)}return ot},_._lctf.readScriptTable=function(nt,it){var rt=_._bin,st=it,ot={},at=rt.readUshort(nt,it);it+=2,ot.default=_._lctf.readLangSysTable(nt,st+at);var At=rt.readUshort(nt,it);it+=2;for(var lt=0;lt<At;lt++){var gt=rt.readASCII(nt,it,4);it+=4;var ct=rt.readUshort(nt,it);it+=2,ot[gt.trim()]=_._lctf.readLangSysTable(nt,st+ct)}return ot},_._lctf.readLangSysTable=function(nt,it){var rt=_._bin,st={};rt.readUshort(nt,it),it+=2,st.reqFeature=rt.readUshort(nt,it),it+=2;var ot=rt.readUshort(nt,it);return it+=2,st.features=rt.readUshorts(nt,it,ot),st},_.CFF={},_.CFF.parse=function(nt,it,rt){var st=_._bin;(nt=new Uint8Array(nt.buffer,it,rt))[it=0],nt[++it],nt[++it],nt[++it],it++;var ot=[];it=_.CFF.readIndex(nt,it,ot);for(var at=[],At=0;At<ot.length-1;At++)at.push(st.readASCII(nt,it+ot[At],ot[At+1]-ot[At]));it+=ot[ot.length-1];var lt=[];it=_.CFF.readIndex(nt,it,lt);var gt=[];for(At=0;At<lt.length-1;At++)gt.push(_.CFF.readDict(nt,it+lt[At],it+lt[At+1]));it+=lt[lt.length-1];var ct=gt[0],dt=[];it=_.CFF.readIndex(nt,it,dt);var ht=[];for(At=0;At<dt.length-1;At++)ht.push(st.readASCII(nt,it+dt[At],dt[At+1]-dt[At]));if(it+=dt[dt.length-1],_.CFF.readSubrs(nt,it,ct),ct.CharStrings){it=ct.CharStrings,dt=[],it=_.CFF.readIndex(nt,it,dt);var mt=[];for(At=0;At<dt.length-1;At++)mt.push(st.readBytes(nt,it+dt[At],dt[At+1]-dt[At]));ct.CharStrings=mt}if(ct.ROS){it=ct.FDArray;var Ct=[];for(it=_.CFF.readIndex(nt,it,Ct),ct.FDArray=[],At=0;At<Ct.length-1;At++){var ft=_.CFF.readDict(nt,it+Ct[At],it+Ct[At+1]);_.CFF._readFDict(nt,ft,ht),ct.FDArray.push(ft)}it+=Ct[Ct.length-1],it=ct.FDSelect,ct.FDSelect=[];var pt=nt[it];if(it++,pt!=3)throw pt;var Vt=st.readUshort(nt,it);for(it+=2,At=0;At<Vt+1;At++)ct.FDSelect.push(st.readUshort(nt,it),nt[it+2]),it+=3}return ct.Encoding&&(ct.Encoding=_.CFF.readEncoding(nt,ct.Encoding,ct.CharStrings.length)),ct.charset&&(ct.charset=_.CFF.readCharset(nt,ct.charset,ct.CharStrings.length)),_.CFF._readFDict(nt,ct,ht),ct},_.CFF._readFDict=function(nt,it,rt){var st;for(var ot in it.Private&&(st=it.Private[1],it.Private=_.CFF.readDict(nt,st,st+it.Private[0]),it.Private.Subrs&&_.CFF.readSubrs(nt,st+it.Private.Subrs,it.Private)),it)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(ot)!=-1&&(it[ot]=rt[it[ot]-426+35])},_.CFF.readSubrs=function(nt,it,rt){var st=_._bin,ot=[];it=_.CFF.readIndex(nt,it,ot);var at,At=ot.length;at=At<1240?107:At<33900?1131:32768,rt.Bias=at,rt.Subrs=[];for(var lt=0;lt<ot.length-1;lt++)rt.Subrs.push(st.readBytes(nt,it+ot[lt],ot[lt+1]-ot[lt]))},_.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],_.CFF.glyphByUnicode=function(nt,it){for(var rt=0;rt<nt.charset.length;rt++)if(nt.charset[rt]==it)return rt;return-1},_.CFF.glyphBySE=function(nt,it){return it<0||it>255?-1:_.CFF.glyphByUnicode(nt,_.CFF.tableSE[it])},_.CFF.readEncoding=function(nt,it,rt){_._bin;var st=[".notdef"],ot=nt[it];if(it++,ot!=0)throw"error: unknown encoding format: "+ot;var at=nt[it];it++;for(var At=0;At<at;At++)st.push(nt[it+At]);return st},_.CFF.readCharset=function(nt,it,rt){var st=_._bin,ot=[".notdef"],at=nt[it];if(it++,at==0)for(var At=0;At<rt;At++){var lt=st.readUshort(nt,it);it+=2,ot.push(lt)}else{if(at!=1&&at!=2)throw"error: format: "+at;for(;ot.length<rt;){lt=st.readUshort(nt,it),it+=2;var gt=0;for(at==1?(gt=nt[it],it++):(gt=st.readUshort(nt,it),it+=2),At=0;At<=gt;At++)ot.push(lt),lt++}}return ot},_.CFF.readIndex=function(nt,it,rt){var st=_._bin,ot=st.readUshort(nt,it)+1,at=nt[it+=2];if(it++,at==1)for(var At=0;At<ot;At++)rt.push(nt[it+At]);else if(at==2)for(At=0;At<ot;At++)rt.push(st.readUshort(nt,it+2*At));else if(at==3)for(At=0;At<ot;At++)rt.push(16777215&st.readUint(nt,it+3*At-1));else if(ot!=1)throw"unsupported offset size: "+at+", count: "+ot;return(it+=ot*at)-1},_.CFF.getCharString=function(nt,it,rt){var st=_._bin,ot=nt[it],at=nt[it+1];nt[it+2],nt[it+3],nt[it+4];var At=1,lt=null,gt=null;ot<=20&&(lt=ot,At=1),ot==12&&(lt=100*ot+at,At=2),21<=ot&&ot<=27&&(lt=ot,At=1),ot==28&&(gt=st.readShort(nt,it+1),At=3),29<=ot&&ot<=31&&(lt=ot,At=1),32<=ot&&ot<=246&&(gt=ot-139,At=1),247<=ot&&ot<=250&&(gt=256*(ot-247)+at+108,At=2),251<=ot&&ot<=254&&(gt=256*-(ot-251)-at-108,At=2),ot==255&&(gt=st.readInt(nt,it+1)/65535,At=5),rt.val=gt??"o"+lt,rt.size=At},_.CFF.readCharString=function(nt,it,rt){for(var st=it+rt,ot=_._bin,at=[];it<st;){var At=nt[it],lt=nt[it+1];nt[it+2],nt[it+3],nt[it+4];var gt=1,ct=null,dt=null;At<=20&&(ct=At,gt=1),At==12&&(ct=100*At+lt,gt=2),At!=19&&At!=20||(ct=At,gt=2),21<=At&&At<=27&&(ct=At,gt=1),At==28&&(dt=ot.readShort(nt,it+1),gt=3),29<=At&&At<=31&&(ct=At,gt=1),32<=At&&At<=246&&(dt=At-139,gt=1),247<=At&&At<=250&&(dt=256*(At-247)+lt+108,gt=2),251<=At&&At<=254&&(dt=256*-(At-251)-lt-108,gt=2),At==255&&(dt=ot.readInt(nt,it+1)/65535,gt=5),at.push(dt??"o"+ct),it+=gt}return at},_.CFF.readDict=function(nt,it,rt){for(var st=_._bin,ot={},at=[];it<rt;){var At=nt[it],lt=nt[it+1];nt[it+2],nt[it+3],nt[it+4];var gt=1,ct=null,dt=null;if(At==28&&(dt=st.readShort(nt,it+1),gt=3),At==29&&(dt=st.readInt(nt,it+1),gt=5),32<=At&&At<=246&&(dt=At-139,gt=1),247<=At&&At<=250&&(dt=256*(At-247)+lt+108,gt=2),251<=At&&At<=254&&(dt=256*-(At-251)-lt-108,gt=2),At==255)throw dt=st.readInt(nt,it+1)/65535,gt=5,"unknown number";if(At==30){var ht=[];for(gt=1;;){var mt=nt[it+gt];gt++;var Ct=mt>>4,ft=15&mt;if(Ct!=15&&ht.push(Ct),ft!=15&&ht.push(ft),ft==15)break}for(var pt="",Vt=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],yt=0;yt<ht.length;yt++)pt+=Vt[ht[yt]];dt=parseFloat(pt)}At<=21&&(ct=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][At],gt=1,At==12&&(ct=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][lt],gt=2)),ct!=null?(ot[ct]=at.length==1?at[0]:at,at=[]):at.push(dt),it+=gt}return ot},_.cmap={},_.cmap.parse=function(nt,it,rt){nt=new Uint8Array(nt.buffer,it,rt),it=0;var st=_._bin,ot={};st.readUshort(nt,it),it+=2;var at=st.readUshort(nt,it);it+=2;var At=[];ot.tables=[];for(var lt=0;lt<at;lt++){var gt=st.readUshort(nt,it);it+=2;var ct=st.readUshort(nt,it);it+=2;var dt=st.readUint(nt,it);it+=4;var ht="p"+gt+"e"+ct,mt=At.indexOf(dt);if(mt==-1){var Ct;mt=ot.tables.length,At.push(dt);var ft=st.readUshort(nt,dt);ft==0?Ct=_.cmap.parse0(nt,dt):ft==4?Ct=_.cmap.parse4(nt,dt):ft==6?Ct=_.cmap.parse6(nt,dt):ft==12?Ct=_.cmap.parse12(nt,dt):console.debug("unknown format: "+ft,gt,ct,dt),ot.tables.push(Ct)}if(ot[ht]!=null)throw"multiple tables for one platform+encoding";ot[ht]=mt}return ot},_.cmap.parse0=function(nt,it){var rt=_._bin,st={};st.format=rt.readUshort(nt,it),it+=2;var ot=rt.readUshort(nt,it);it+=2,rt.readUshort(nt,it),it+=2,st.map=[];for(var at=0;at<ot-6;at++)st.map.push(nt[it+at]);return st},_.cmap.parse4=function(nt,it){var rt=_._bin,st=it,ot={};ot.format=rt.readUshort(nt,it),it+=2;var at=rt.readUshort(nt,it);it+=2,rt.readUshort(nt,it),it+=2;var At=rt.readUshort(nt,it);it+=2;var lt=At/2;ot.searchRange=rt.readUshort(nt,it),it+=2,ot.entrySelector=rt.readUshort(nt,it),it+=2,ot.rangeShift=rt.readUshort(nt,it),it+=2,ot.endCount=rt.readUshorts(nt,it,lt),it+=2*lt,it+=2,ot.startCount=rt.readUshorts(nt,it,lt),it+=2*lt,ot.idDelta=[];for(var gt=0;gt<lt;gt++)ot.idDelta.push(rt.readShort(nt,it)),it+=2;for(ot.idRangeOffset=rt.readUshorts(nt,it,lt),it+=2*lt,ot.glyphIdArray=[];it<st+at;)ot.glyphIdArray.push(rt.readUshort(nt,it)),it+=2;return ot},_.cmap.parse6=function(nt,it){var rt=_._bin,st={};st.format=rt.readUshort(nt,it),it+=2,rt.readUshort(nt,it),it+=2,rt.readUshort(nt,it),it+=2,st.firstCode=rt.readUshort(nt,it),it+=2;var ot=rt.readUshort(nt,it);it+=2,st.glyphIdArray=[];for(var at=0;at<ot;at++)st.glyphIdArray.push(rt.readUshort(nt,it)),it+=2;return st},_.cmap.parse12=function(nt,it){var rt=_._bin,st={};st.format=rt.readUshort(nt,it),it+=2,it+=2,rt.readUint(nt,it),it+=4,rt.readUint(nt,it),it+=4;var ot=rt.readUint(nt,it);it+=4,st.groups=[];for(var at=0;at<ot;at++){var At=it+12*at,lt=rt.readUint(nt,At+0),gt=rt.readUint(nt,At+4),ct=rt.readUint(nt,At+8);st.groups.push([lt,gt,ct])}return st},_.glyf={},_.glyf.parse=function(nt,it,rt,st){for(var ot=[],at=0;at<st.maxp.numGlyphs;at++)ot.push(null);return ot},_.glyf._parseGlyf=function(nt,it){var rt=_._bin,st=nt._data,ot=_._tabOffset(st,"glyf",nt._offset)+nt.loca[it];if(nt.loca[it]==nt.loca[it+1])return null;var at={};if(at.noc=rt.readShort(st,ot),ot+=2,at.xMin=rt.readShort(st,ot),ot+=2,at.yMin=rt.readShort(st,ot),ot+=2,at.xMax=rt.readShort(st,ot),ot+=2,at.yMax=rt.readShort(st,ot),ot+=2,at.xMin>=at.xMax||at.yMin>=at.yMax)return null;if(at.noc>0){at.endPts=[];for(var At=0;At<at.noc;At++)at.endPts.push(rt.readUshort(st,ot)),ot+=2;var lt=rt.readUshort(st,ot);if(ot+=2,st.length-ot<lt)return null;at.instructions=rt.readBytes(st,ot,lt),ot+=lt;var gt=at.endPts[at.noc-1]+1;for(at.flags=[],At=0;At<gt;At++){var ct=st[ot];if(ot++,at.flags.push(ct),(8&ct)!=0){var dt=st[ot];ot++;for(var ht=0;ht<dt;ht++)at.flags.push(ct),At++}}for(at.xs=[],At=0;At<gt;At++){var mt=(2&at.flags[At])!=0,Ct=(16&at.flags[At])!=0;mt?(at.xs.push(Ct?st[ot]:-st[ot]),ot++):Ct?at.xs.push(0):(at.xs.push(rt.readShort(st,ot)),ot+=2)}for(at.ys=[],At=0;At<gt;At++)mt=(4&at.flags[At])!=0,Ct=(32&at.flags[At])!=0,mt?(at.ys.push(Ct?st[ot]:-st[ot]),ot++):Ct?at.ys.push(0):(at.ys.push(rt.readShort(st,ot)),ot+=2);var ft=0,pt=0;for(At=0;At<gt;At++)ft+=at.xs[At],pt+=at.ys[At],at.xs[At]=ft,at.ys[At]=pt}else{var Vt;at.parts=[];do{Vt=rt.readUshort(st,ot),ot+=2;var yt={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(at.parts.push(yt),yt.glyphIndex=rt.readUshort(st,ot),ot+=2,1&Vt){var Gt=rt.readShort(st,ot);ot+=2;var Bt=rt.readShort(st,ot);ot+=2}else Gt=rt.readInt8(st,ot),ot++,Bt=rt.readInt8(st,ot),ot++;2&Vt?(yt.m.tx=Gt,yt.m.ty=Bt):(yt.p1=Gt,yt.p2=Bt),8&Vt?(yt.m.a=yt.m.d=rt.readF2dot14(st,ot),ot+=2):64&Vt?(yt.m.a=rt.readF2dot14(st,ot),ot+=2,yt.m.d=rt.readF2dot14(st,ot),ot+=2):128&Vt&&(yt.m.a=rt.readF2dot14(st,ot),ot+=2,yt.m.b=rt.readF2dot14(st,ot),ot+=2,yt.m.c=rt.readF2dot14(st,ot),ot+=2,yt.m.d=rt.readF2dot14(st,ot),ot+=2)}while(32&Vt);if(256&Vt){var vt=rt.readUshort(st,ot);for(ot+=2,at.instr=[],At=0;At<vt;At++)at.instr.push(st[ot]),ot++}}return at},_.GPOS={},_.GPOS.parse=function(nt,it,rt,st){return _._lctf.parse(nt,it,rt,st,_.GPOS.subt)},_.GPOS.subt=function(nt,it,rt,st){var ot=_._bin,at=rt,At={};if(At.fmt=ot.readUshort(nt,rt),rt+=2,it==1||it==2||it==3||it==7||it==8&&At.fmt<=2){var lt=ot.readUshort(nt,rt);rt+=2,At.coverage=_._lctf.readCoverage(nt,lt+at)}if(it==1&&At.fmt==1){var gt=ot.readUshort(nt,rt);rt+=2;var ct=_._lctf.numOfOnes(gt);gt!=0&&(At.pos=_.GPOS.readValueRecord(nt,rt,gt))}else if(it==2&&At.fmt>=1&&At.fmt<=2){gt=ot.readUshort(nt,rt),rt+=2;var dt=ot.readUshort(nt,rt);rt+=2,ct=_._lctf.numOfOnes(gt);var ht=_._lctf.numOfOnes(dt);if(At.fmt==1){At.pairsets=[];var mt=ot.readUshort(nt,rt);rt+=2;for(var Ct=0;Ct<mt;Ct++){var ft=at+ot.readUshort(nt,rt);rt+=2;var pt=ot.readUshort(nt,ft);ft+=2;for(var Vt=[],yt=0;yt<pt;yt++){var Gt=ot.readUshort(nt,ft);ft+=2,gt!=0&&(Nt=_.GPOS.readValueRecord(nt,ft,gt),ft+=2*ct),dt!=0&&(Yt=_.GPOS.readValueRecord(nt,ft,dt),ft+=2*ht),Vt.push({gid2:Gt,val1:Nt,val2:Yt})}At.pairsets.push(Vt)}}if(At.fmt==2){var Bt=ot.readUshort(nt,rt);rt+=2;var vt=ot.readUshort(nt,rt);rt+=2;var wt=ot.readUshort(nt,rt);rt+=2;var Mt=ot.readUshort(nt,rt);for(rt+=2,At.classDef1=_._lctf.readClassDef(nt,at+Bt),At.classDef2=_._lctf.readClassDef(nt,at+vt),At.matrix=[],Ct=0;Ct<wt;Ct++){var kt=[];for(yt=0;yt<Mt;yt++){var Nt=null,Yt=null;gt!=0&&(Nt=_.GPOS.readValueRecord(nt,rt,gt),rt+=2*ct),dt!=0&&(Yt=_.GPOS.readValueRecord(nt,rt,dt),rt+=2*ht),kt.push({val1:Nt,val2:Yt})}At.matrix.push(kt)}}}else{if(it==9&&At.fmt==1){var Lt=ot.readUshort(nt,rt);rt+=2;var Xt=ot.readUint(nt,rt);if(rt+=4,st.ltype==9)st.ltype=Lt;else if(st.ltype!=Lt)throw"invalid extension substitution";return _.GPOS.subt(nt,st.ltype,at+Xt)}console.debug("unsupported GPOS table LookupType",it,"format",At.fmt)}return At},_.GPOS.readValueRecord=function(nt,it,rt){var st=_._bin,ot=[];return ot.push(1&rt?st.readShort(nt,it):0),it+=1&rt?2:0,ot.push(2&rt?st.readShort(nt,it):0),it+=2&rt?2:0,ot.push(4&rt?st.readShort(nt,it):0),it+=4&rt?2:0,ot.push(8&rt?st.readShort(nt,it):0),it+=8&rt?2:0,ot},_.GSUB={},_.GSUB.parse=function(nt,it,rt,st){return _._lctf.parse(nt,it,rt,st,_.GSUB.subt)},_.GSUB.subt=function(nt,it,rt,st){var ot=_._bin,at=rt,At={};if(At.fmt=ot.readUshort(nt,rt),rt+=2,it!=1&&it!=4&&it!=5&&it!=6)return null;if(it==1||it==4||it==5&&At.fmt<=2||it==6&&At.fmt<=2){var lt=ot.readUshort(nt,rt);rt+=2,At.coverage=_._lctf.readCoverage(nt,at+lt)}if(it==1&&At.fmt>=1&&At.fmt<=2){if(At.fmt==1)At.delta=ot.readShort(nt,rt),rt+=2;else if(At.fmt==2){var gt=ot.readUshort(nt,rt);rt+=2,At.newg=ot.readUshorts(nt,rt,gt),rt+=2*At.newg.length}}else if(it==4){At.vals=[],gt=ot.readUshort(nt,rt),rt+=2;for(var ct=0;ct<gt;ct++){var dt=ot.readUshort(nt,rt);rt+=2,At.vals.push(_.GSUB.readLigatureSet(nt,at+dt))}}else if(it==5&&At.fmt==2){if(At.fmt==2){var ht=ot.readUshort(nt,rt);rt+=2,At.cDef=_._lctf.readClassDef(nt,at+ht),At.scset=[];var mt=ot.readUshort(nt,rt);for(rt+=2,ct=0;ct<mt;ct++){var Ct=ot.readUshort(nt,rt);rt+=2,At.scset.push(Ct==0?null:_.GSUB.readSubClassSet(nt,at+Ct))}}}else if(it==6&&At.fmt==3){if(At.fmt==3){for(ct=0;ct<3;ct++){gt=ot.readUshort(nt,rt),rt+=2;for(var ft=[],pt=0;pt<gt;pt++)ft.push(_._lctf.readCoverage(nt,at+ot.readUshort(nt,rt+2*pt)));rt+=2*gt,ct==0&&(At.backCvg=ft),ct==1&&(At.inptCvg=ft),ct==2&&(At.ahedCvg=ft)}gt=ot.readUshort(nt,rt),rt+=2,At.lookupRec=_.GSUB.readSubstLookupRecords(nt,rt,gt)}}else{if(it==7&&At.fmt==1){var Vt=ot.readUshort(nt,rt);rt+=2;var yt=ot.readUint(nt,rt);if(rt+=4,st.ltype==9)st.ltype=Vt;else if(st.ltype!=Vt)throw"invalid extension substitution";return _.GSUB.subt(nt,st.ltype,at+yt)}console.debug("unsupported GSUB table LookupType",it,"format",At.fmt)}return At},_.GSUB.readSubClassSet=function(nt,it){var rt=_._bin.readUshort,st=it,ot=[],at=rt(nt,it);it+=2;for(var At=0;At<at;At++){var lt=rt(nt,it);it+=2,ot.push(_.GSUB.readSubClassRule(nt,st+lt))}return ot},_.GSUB.readSubClassRule=function(nt,it){var rt=_._bin.readUshort,st={},ot=rt(nt,it),at=rt(nt,it+=2);it+=2,st.input=[];for(var At=0;At<ot-1;At++)st.input.push(rt(nt,it)),it+=2;return st.substLookupRecords=_.GSUB.readSubstLookupRecords(nt,it,at),st},_.GSUB.readSubstLookupRecords=function(nt,it,rt){for(var st=_._bin.readUshort,ot=[],at=0;at<rt;at++)ot.push(st(nt,it),st(nt,it+2)),it+=4;return ot},_.GSUB.readChainSubClassSet=function(nt,it){var rt=_._bin,st=it,ot=[],at=rt.readUshort(nt,it);it+=2;for(var At=0;At<at;At++){var lt=rt.readUshort(nt,it);it+=2,ot.push(_.GSUB.readChainSubClassRule(nt,st+lt))}return ot},_.GSUB.readChainSubClassRule=function(nt,it){for(var rt=_._bin,st={},ot=["backtrack","input","lookahead"],at=0;at<ot.length;at++){var At=rt.readUshort(nt,it);it+=2,at==1&&At--,st[ot[at]]=rt.readUshorts(nt,it,At),it+=2*st[ot[at]].length}return At=rt.readUshort(nt,it),it+=2,st.subst=rt.readUshorts(nt,it,2*At),it+=2*st.subst.length,st},_.GSUB.readLigatureSet=function(nt,it){var rt=_._bin,st=it,ot=[],at=rt.readUshort(nt,it);it+=2;for(var At=0;At<at;At++){var lt=rt.readUshort(nt,it);it+=2,ot.push(_.GSUB.readLigature(nt,st+lt))}return ot},_.GSUB.readLigature=function(nt,it){var rt=_._bin,st={chain:[]};st.nglyph=rt.readUshort(nt,it),it+=2;var ot=rt.readUshort(nt,it);it+=2;for(var at=0;at<ot-1;at++)st.chain.push(rt.readUshort(nt,it)),it+=2;return st},_.head={},_.head.parse=function(nt,it,rt){var st=_._bin,ot={};return st.readFixed(nt,it),it+=4,ot.fontRevision=st.readFixed(nt,it),it+=4,st.readUint(nt,it),it+=4,st.readUint(nt,it),it+=4,ot.flags=st.readUshort(nt,it),it+=2,ot.unitsPerEm=st.readUshort(nt,it),it+=2,ot.created=st.readUint64(nt,it),it+=8,ot.modified=st.readUint64(nt,it),it+=8,ot.xMin=st.readShort(nt,it),it+=2,ot.yMin=st.readShort(nt,it),it+=2,ot.xMax=st.readShort(nt,it),it+=2,ot.yMax=st.readShort(nt,it),it+=2,ot.macStyle=st.readUshort(nt,it),it+=2,ot.lowestRecPPEM=st.readUshort(nt,it),it+=2,ot.fontDirectionHint=st.readShort(nt,it),it+=2,ot.indexToLocFormat=st.readShort(nt,it),it+=2,ot.glyphDataFormat=st.readShort(nt,it),it+=2,ot},_.hhea={},_.hhea.parse=function(nt,it,rt){var st=_._bin,ot={};return st.readFixed(nt,it),it+=4,ot.ascender=st.readShort(nt,it),it+=2,ot.descender=st.readShort(nt,it),it+=2,ot.lineGap=st.readShort(nt,it),it+=2,ot.advanceWidthMax=st.readUshort(nt,it),it+=2,ot.minLeftSideBearing=st.readShort(nt,it),it+=2,ot.minRightSideBearing=st.readShort(nt,it),it+=2,ot.xMaxExtent=st.readShort(nt,it),it+=2,ot.caretSlopeRise=st.readShort(nt,it),it+=2,ot.caretSlopeRun=st.readShort(nt,it),it+=2,ot.caretOffset=st.readShort(nt,it),it+=2,it+=8,ot.metricDataFormat=st.readShort(nt,it),it+=2,ot.numberOfHMetrics=st.readUshort(nt,it),it+=2,ot},_.hmtx={},_.hmtx.parse=function(nt,it,rt,st){for(var ot=_._bin,at={aWidth:[],lsBearing:[]},At=0,lt=0,gt=0;gt<st.maxp.numGlyphs;gt++)gt<st.hhea.numberOfHMetrics&&(At=ot.readUshort(nt,it),it+=2,lt=ot.readShort(nt,it),it+=2),at.aWidth.push(At),at.lsBearing.push(lt);return at},_.kern={},_.kern.parse=function(nt,it,rt,st){var ot=_._bin,at=ot.readUshort(nt,it);if(it+=2,at==1)return _.kern.parseV1(nt,it-2,rt,st);var At=ot.readUshort(nt,it);it+=2;for(var lt={glyph1:[],rval:[]},gt=0;gt<At;gt++){it+=2,rt=ot.readUshort(nt,it),it+=2;var ct=ot.readUshort(nt,it);it+=2;var dt=ct>>>8;if((dt&=15)!=0)throw"unknown kern table format: "+dt;it=_.kern.readFormat0(nt,it,lt)}return lt},_.kern.parseV1=function(nt,it,rt,st){var ot=_._bin;ot.readFixed(nt,it),it+=4;var at=ot.readUint(nt,it);it+=4;for(var At={glyph1:[],rval:[]},lt=0;lt<at;lt++){ot.readUint(nt,it),it+=4;var gt=ot.readUshort(nt,it);it+=2,ot.readUshort(nt,it),it+=2;var ct=gt>>>8;if((ct&=15)!=0)throw"unknown kern table format: "+ct;it=_.kern.readFormat0(nt,it,At)}return At},_.kern.readFormat0=function(nt,it,rt){var st=_._bin,ot=-1,at=st.readUshort(nt,it);it+=2,st.readUshort(nt,it),it+=2,st.readUshort(nt,it),it+=2,st.readUshort(nt,it),it+=2;for(var At=0;At<at;At++){var lt=st.readUshort(nt,it);it+=2;var gt=st.readUshort(nt,it);it+=2;var ct=st.readShort(nt,it);it+=2,lt!=ot&&(rt.glyph1.push(lt),rt.rval.push({glyph2:[],vals:[]}));var dt=rt.rval[rt.rval.length-1];dt.glyph2.push(gt),dt.vals.push(ct),ot=lt}return it},_.loca={},_.loca.parse=function(nt,it,rt,st){var ot=_._bin,at=[],At=st.head.indexToLocFormat,lt=st.maxp.numGlyphs+1;if(At==0)for(var gt=0;gt<lt;gt++)at.push(ot.readUshort(nt,it+(gt<<1))<<1);if(At==1)for(gt=0;gt<lt;gt++)at.push(ot.readUint(nt,it+(gt<<2)));return at},_.maxp={},_.maxp.parse=function(nt,it,rt){var st=_._bin,ot={},at=st.readUint(nt,it);return it+=4,ot.numGlyphs=st.readUshort(nt,it),it+=2,at==65536&&(ot.maxPoints=st.readUshort(nt,it),it+=2,ot.maxContours=st.readUshort(nt,it),it+=2,ot.maxCompositePoints=st.readUshort(nt,it),it+=2,ot.maxCompositeContours=st.readUshort(nt,it),it+=2,ot.maxZones=st.readUshort(nt,it),it+=2,ot.maxTwilightPoints=st.readUshort(nt,it),it+=2,ot.maxStorage=st.readUshort(nt,it),it+=2,ot.maxFunctionDefs=st.readUshort(nt,it),it+=2,ot.maxInstructionDefs=st.readUshort(nt,it),it+=2,ot.maxStackElements=st.readUshort(nt,it),it+=2,ot.maxSizeOfInstructions=st.readUshort(nt,it),it+=2,ot.maxComponentElements=st.readUshort(nt,it),it+=2,ot.maxComponentDepth=st.readUshort(nt,it),it+=2),ot},_.name={},_.name.parse=function(nt,it,rt){var st=_._bin,ot={};st.readUshort(nt,it),it+=2;var at=st.readUshort(nt,it);it+=2,st.readUshort(nt,it);for(var At,lt=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],gt=it+=2,ct=0;ct<at;ct++){var dt=st.readUshort(nt,it);it+=2;var ht=st.readUshort(nt,it);it+=2;var mt=st.readUshort(nt,it);it+=2;var Ct=st.readUshort(nt,it);it+=2;var ft=st.readUshort(nt,it);it+=2;var pt=st.readUshort(nt,it);it+=2;var Vt,yt=lt[Ct],Gt=gt+12*at+pt;if(dt==0)Vt=st.readUnicode(nt,Gt,ft/2);else if(dt==3&&ht==0)Vt=st.readUnicode(nt,Gt,ft/2);else if(ht==0)Vt=st.readASCII(nt,Gt,ft);else if(ht==1)Vt=st.readUnicode(nt,Gt,ft/2);else if(ht==3)Vt=st.readUnicode(nt,Gt,ft/2);else{if(dt!=1)throw"unknown encoding "+ht+", platformID: "+dt;Vt=st.readASCII(nt,Gt,ft),console.debug("reading unknown MAC encoding "+ht+" as ASCII")}var Bt="p"+dt+","+mt.toString(16);ot[Bt]==null&&(ot[Bt]={}),ot[Bt][yt!==void 0?yt:Ct]=Vt,ot[Bt]._lang=mt}for(var vt in ot)if(ot[vt].postScriptName!=null&&ot[vt]._lang==1033)return ot[vt];for(var vt in ot)if(ot[vt].postScriptName!=null&&ot[vt]._lang==0)return ot[vt];for(var vt in ot)if(ot[vt].postScriptName!=null&&ot[vt]._lang==3084)return ot[vt];for(var vt in ot)if(ot[vt].postScriptName!=null)return ot[vt];for(var vt in ot){At=vt;break}return console.debug("returning name table with languageID "+ot[At]._lang),ot[At]},_["OS/2"]={},_["OS/2"].parse=function(nt,it,rt){var st=_._bin.readUshort(nt,it);it+=2;var ot={};if(st==0)_["OS/2"].version0(nt,it,ot);else if(st==1)_["OS/2"].version1(nt,it,ot);else if(st==2||st==3||st==4)_["OS/2"].version2(nt,it,ot);else{if(st!=5)throw"unknown OS/2 table version: "+st;_["OS/2"].version5(nt,it,ot)}return ot},_["OS/2"].version0=function(nt,it,rt){var st=_._bin;return rt.xAvgCharWidth=st.readShort(nt,it),it+=2,rt.usWeightClass=st.readUshort(nt,it),it+=2,rt.usWidthClass=st.readUshort(nt,it),it+=2,rt.fsType=st.readUshort(nt,it),it+=2,rt.ySubscriptXSize=st.readShort(nt,it),it+=2,rt.ySubscriptYSize=st.readShort(nt,it),it+=2,rt.ySubscriptXOffset=st.readShort(nt,it),it+=2,rt.ySubscriptYOffset=st.readShort(nt,it),it+=2,rt.ySuperscriptXSize=st.readShort(nt,it),it+=2,rt.ySuperscriptYSize=st.readShort(nt,it),it+=2,rt.ySuperscriptXOffset=st.readShort(nt,it),it+=2,rt.ySuperscriptYOffset=st.readShort(nt,it),it+=2,rt.yStrikeoutSize=st.readShort(nt,it),it+=2,rt.yStrikeoutPosition=st.readShort(nt,it),it+=2,rt.sFamilyClass=st.readShort(nt,it),it+=2,rt.panose=st.readBytes(nt,it,10),it+=10,rt.ulUnicodeRange1=st.readUint(nt,it),it+=4,rt.ulUnicodeRange2=st.readUint(nt,it),it+=4,rt.ulUnicodeRange3=st.readUint(nt,it),it+=4,rt.ulUnicodeRange4=st.readUint(nt,it),it+=4,rt.achVendID=[st.readInt8(nt,it),st.readInt8(nt,it+1),st.readInt8(nt,it+2),st.readInt8(nt,it+3)],it+=4,rt.fsSelection=st.readUshort(nt,it),it+=2,rt.usFirstCharIndex=st.readUshort(nt,it),it+=2,rt.usLastCharIndex=st.readUshort(nt,it),it+=2,rt.sTypoAscender=st.readShort(nt,it),it+=2,rt.sTypoDescender=st.readShort(nt,it),it+=2,rt.sTypoLineGap=st.readShort(nt,it),it+=2,rt.usWinAscent=st.readUshort(nt,it),it+=2,rt.usWinDescent=st.readUshort(nt,it),it+=2},_["OS/2"].version1=function(nt,it,rt){var st=_._bin;return it=_["OS/2"].version0(nt,it,rt),rt.ulCodePageRange1=st.readUint(nt,it),it+=4,rt.ulCodePageRange2=st.readUint(nt,it),it+=4},_["OS/2"].version2=function(nt,it,rt){var st=_._bin;return it=_["OS/2"].version1(nt,it,rt),rt.sxHeight=st.readShort(nt,it),it+=2,rt.sCapHeight=st.readShort(nt,it),it+=2,rt.usDefault=st.readUshort(nt,it),it+=2,rt.usBreak=st.readUshort(nt,it),it+=2,rt.usMaxContext=st.readUshort(nt,it),it+=2},_["OS/2"].version5=function(nt,it,rt){var st=_._bin;return it=_["OS/2"].version2(nt,it,rt),rt.usLowerOpticalPointSize=st.readUshort(nt,it),it+=2,rt.usUpperOpticalPointSize=st.readUshort(nt,it),it+=2},_.post={},_.post.parse=function(nt,it,rt){var st=_._bin,ot={};return ot.version=st.readFixed(nt,it),it+=4,ot.italicAngle=st.readFixed(nt,it),it+=4,ot.underlinePosition=st.readShort(nt,it),it+=2,ot.underlineThickness=st.readShort(nt,it),it+=2,ot},_==null&&(_={}),_.U==null&&(_.U={}),_.U.codeToGlyph=function(nt,it){var rt=nt.cmap,st=-1;if(rt.p0e4!=null?st=rt.p0e4:rt.p3e1!=null?st=rt.p3e1:rt.p1e0!=null?st=rt.p1e0:rt.p0e3!=null&&(st=rt.p0e3),st==-1)throw"no familiar platform and encoding!";var ot=rt.tables[st];if(ot.format==0)return it>=ot.map.length?0:ot.map[it];if(ot.format==4){for(var at=-1,At=0;At<ot.endCount.length;At++)if(it<=ot.endCount[At]){at=At;break}return at==-1||ot.startCount[at]>it?0:65535&(ot.idRangeOffset[at]!=0?ot.glyphIdArray[it-ot.startCount[at]+(ot.idRangeOffset[at]>>1)-(ot.idRangeOffset.length-at)]:it+ot.idDelta[at])}if(ot.format==12){if(it>ot.groups[ot.groups.length-1][1])return 0;for(At=0;At<ot.groups.length;At++){var lt=ot.groups[At];if(lt[0]<=it&&it<=lt[1])return lt[2]+(it-lt[0])}return 0}throw"unknown cmap table format "+ot.format},_.U.glyphToPath=function(nt,it){var rt={cmds:[],crds:[]};if(nt.SVG&&nt.SVG.entries[it]){var st=nt.SVG.entries[it];return st==null?rt:(typeof st=="string"&&(st=_.SVG.toPath(st),nt.SVG.entries[it]=st),st)}if(nt.CFF){var ot={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:nt.CFF.Private?nt.CFF.Private.defaultWidthX:0,open:!1},at=nt.CFF,At=nt.CFF.Private;if(at.ROS){for(var lt=0;at.FDSelect[lt+2]<=it;)lt+=2;At=at.FDArray[at.FDSelect[lt+1]].Private}_.U._drawCFF(nt.CFF.CharStrings[it],ot,at,At,rt)}else nt.glyf&&_.U._drawGlyf(it,nt,rt);return rt},_.U._drawGlyf=function(nt,it,rt){var st=it.glyf[nt];st==null&&(st=it.glyf[nt]=_.glyf._parseGlyf(it,nt)),st!=null&&(st.noc>-1?_.U._simpleGlyph(st,rt):_.U._compoGlyph(st,it,rt))},_.U._simpleGlyph=function(nt,it){for(var rt=0;rt<nt.noc;rt++){for(var st=rt==0?0:nt.endPts[rt-1]+1,ot=nt.endPts[rt],at=st;at<=ot;at++){var At=at==st?ot:at-1,lt=at==ot?st:at+1,gt=1&nt.flags[at],ct=1&nt.flags[At],dt=1&nt.flags[lt],ht=nt.xs[at],mt=nt.ys[at];if(at==st)if(gt){if(!ct){_.U.P.moveTo(it,ht,mt);continue}_.U.P.moveTo(it,nt.xs[At],nt.ys[At])}else ct?_.U.P.moveTo(it,nt.xs[At],nt.ys[At]):_.U.P.moveTo(it,(nt.xs[At]+ht)/2,(nt.ys[At]+mt)/2);gt?ct&&_.U.P.lineTo(it,ht,mt):dt?_.U.P.qcurveTo(it,ht,mt,nt.xs[lt],nt.ys[lt]):_.U.P.qcurveTo(it,ht,mt,(ht+nt.xs[lt])/2,(mt+nt.ys[lt])/2)}_.U.P.closePath(it)}},_.U._compoGlyph=function(nt,it,rt){for(var st=0;st<nt.parts.length;st++){var ot={cmds:[],crds:[]},at=nt.parts[st];_.U._drawGlyf(at.glyphIndex,it,ot);for(var At=at.m,lt=0;lt<ot.crds.length;lt+=2){var gt=ot.crds[lt],ct=ot.crds[lt+1];rt.crds.push(gt*At.a+ct*At.b+At.tx),rt.crds.push(gt*At.c+ct*At.d+At.ty)}for(lt=0;lt<ot.cmds.length;lt++)rt.cmds.push(ot.cmds[lt])}},_.U._getGlyphClass=function(nt,it){var rt=_._lctf.getInterval(it,nt);return rt==-1?0:it[rt+2]},_.U.getPairAdjustment=function(nt,it,rt){var st=!1;if(nt.GPOS)for(var ot=nt.GPOS,at=ot.lookupList,At=ot.featureList,lt=[],gt=0;gt<At.length;gt++){var ct=At[gt];if(ct.tag=="kern"){st=!0;for(var dt=0;dt<ct.tab.length;dt++)if(!lt[ct.tab[dt]]){lt[ct.tab[dt]]=!0;for(var ht=at[ct.tab[dt]],mt=0;mt<ht.tabs.length;mt++)if(ht.tabs[mt]!=null){var Ct,ft=ht.tabs[mt];if((!ft.coverage||(Ct=_._lctf.coverageIndex(ft.coverage,it))!=-1)&&ht.ltype!=1){if(ht.ltype==2){var pt=null;if(ft.fmt==1){var Vt=ft.pairsets[Ct];for(gt=0;gt<Vt.length;gt++)Vt[gt].gid2==rt&&(pt=Vt[gt])}else if(ft.fmt==2){var yt=_.U._getGlyphClass(it,ft.classDef1),Gt=_.U._getGlyphClass(rt,ft.classDef2);pt=ft.matrix[yt][Gt]}if(pt){var Bt=0;return pt.val1&&pt.val1[2]&&(Bt+=pt.val1[2]),pt.val2&&pt.val2[0]&&(Bt+=pt.val2[0]),Bt}}}}}}}if(nt.kern&&!st){var vt=nt.kern.glyph1.indexOf(it);if(vt!=-1){var wt=nt.kern.rval[vt].glyph2.indexOf(rt);if(wt!=-1)return nt.kern.rval[vt].vals[wt]}}return 0},_.U._applySubs=function(nt,it,rt,st){for(var ot=nt.length-it-1,at=0;at<rt.tabs.length;at++)if(rt.tabs[at]!=null){var At,lt=rt.tabs[at];if(!lt.coverage||(At=_._lctf.coverageIndex(lt.coverage,nt[it]))!=-1){if(rt.ltype==1)nt[it],lt.fmt==1?nt[it]=nt[it]+lt.delta:nt[it]=lt.newg[At];else if(rt.ltype==4)for(var gt=lt.vals[At],ct=0;ct<gt.length;ct++){var dt=gt[ct],ht=dt.chain.length;if(!(ht>ot)){for(var mt=!0,Ct=0,ft=0;ft<ht;ft++){for(;nt[it+Ct+(1+ft)]==-1;)Ct++;dt.chain[ft]!=nt[it+Ct+(1+ft)]&&(mt=!1)}if(mt){for(nt[it]=dt.nglyph,ft=0;ft<ht+Ct;ft++)nt[it+ft+1]=-1;break}}}else if(rt.ltype==5&&lt.fmt==2)for(var pt=_._lctf.getInterval(lt.cDef,nt[it]),Vt=lt.cDef[pt+2],yt=lt.scset[Vt],Gt=0;Gt<yt.length;Gt++){var Bt=yt[Gt],vt=Bt.input;if(!(vt.length>ot)){for(mt=!0,ft=0;ft<vt.length;ft++){var wt=_._lctf.getInterval(lt.cDef,nt[it+1+ft]);if(pt==-1&&lt.cDef[wt+2]!=vt[ft]){mt=!1;break}}if(mt){var Mt=Bt.substLookupRecords;for(ct=0;ct<Mt.length;ct+=2)Mt[ct],Mt[ct+1]}}}else if(rt.ltype==6&&lt.fmt==3){if(!_.U._glsCovered(nt,lt.backCvg,it-lt.backCvg.length)||!_.U._glsCovered(nt,lt.inptCvg,it)||!_.U._glsCovered(nt,lt.ahedCvg,it+lt.inptCvg.length))continue;var kt=lt.lookupRec;for(Gt=0;Gt<kt.length;Gt+=2){pt=kt[Gt];var Nt=st[kt[Gt+1]];_.U._applySubs(nt,it+pt,Nt,st)}}}}},_.U._glsCovered=function(nt,it,rt){for(var st=0;st<it.length;st++)if(_._lctf.coverageIndex(it[st],nt[rt+st])==-1)return!1;return!0},_.U.glyphsToPath=function(nt,it,rt){for(var st={cmds:[],crds:[]},ot=0,at=0;at<it.length;at++){var At=it[at];if(At!=-1){for(var lt=at<it.length-1&&it[at+1]!=-1?it[at+1]:0,gt=_.U.glyphToPath(nt,At),ct=0;ct<gt.crds.length;ct+=2)st.crds.push(gt.crds[ct]+ot),st.crds.push(gt.crds[ct+1]);for(rt&&st.cmds.push(rt),ct=0;ct<gt.cmds.length;ct++)st.cmds.push(gt.cmds[ct]);rt&&st.cmds.push("X"),ot+=nt.hmtx.aWidth[At],at<it.length-1&&(ot+=_.U.getPairAdjustment(nt,At,lt))}}return st},_.U.P={},_.U.P.moveTo=function(nt,it,rt){nt.cmds.push("M"),nt.crds.push(it,rt)},_.U.P.lineTo=function(nt,it,rt){nt.cmds.push("L"),nt.crds.push(it,rt)},_.U.P.curveTo=function(nt,it,rt,st,ot,at,At){nt.cmds.push("C"),nt.crds.push(it,rt,st,ot,at,At)},_.U.P.qcurveTo=function(nt,it,rt,st,ot){nt.cmds.push("Q"),nt.crds.push(it,rt,st,ot)},_.U.P.closePath=function(nt){nt.cmds.push("Z")},_.U._drawCFF=function(nt,it,rt,st,ot){for(var at=it.stack,At=it.nStems,lt=it.haveWidth,gt=it.width,ct=it.open,dt=0,ht=it.x,mt=it.y,Ct=0,ft=0,pt=0,Vt=0,yt=0,Gt=0,Bt=0,vt=0,wt=0,Mt=0,kt={val:0,size:0};dt<nt.length;){_.CFF.getCharString(nt,dt,kt);var Nt=kt.val;if(dt+=kt.size,Nt=="o1"||Nt=="o18")at.length%2!=0&&!lt&&(gt=at.shift()+st.nominalWidthX),At+=at.length>>1,at.length=0,lt=!0;else if(Nt=="o3"||Nt=="o23")at.length%2!=0&&!lt&&(gt=at.shift()+st.nominalWidthX),At+=at.length>>1,at.length=0,lt=!0;else if(Nt=="o4")at.length>1&&!lt&&(gt=at.shift()+st.nominalWidthX,lt=!0),ct&&_.U.P.closePath(ot),mt+=at.pop(),_.U.P.moveTo(ot,ht,mt),ct=!0;else if(Nt=="o5")for(;at.length>0;)ht+=at.shift(),mt+=at.shift(),_.U.P.lineTo(ot,ht,mt);else if(Nt=="o6"||Nt=="o7")for(var Yt=at.length,Lt=Nt=="o6",Xt=0;Xt<Yt;Xt++){var _t=at.shift();Lt?ht+=_t:mt+=_t,Lt=!Lt,_.U.P.lineTo(ot,ht,mt)}else if(Nt=="o8"||Nt=="o24"){Yt=at.length;for(var Tt=0;Tt+6<=Yt;)Ct=ht+at.shift(),ft=mt+at.shift(),pt=Ct+at.shift(),Vt=ft+at.shift(),ht=pt+at.shift(),mt=Vt+at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,ht,mt),Tt+=6;Nt=="o24"&&(ht+=at.shift(),mt+=at.shift(),_.U.P.lineTo(ot,ht,mt))}else{if(Nt=="o11")break;if(Nt=="o1234"||Nt=="o1235"||Nt=="o1236"||Nt=="o1237")Nt=="o1234"&&(ft=mt,pt=(Ct=ht+at.shift())+at.shift(),Mt=Vt=ft+at.shift(),Gt=Vt,vt=mt,ht=(Bt=(yt=(wt=pt+at.shift())+at.shift())+at.shift())+at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,wt,Mt),_.U.P.curveTo(ot,yt,Gt,Bt,vt,ht,mt)),Nt=="o1235"&&(Ct=ht+at.shift(),ft=mt+at.shift(),pt=Ct+at.shift(),Vt=ft+at.shift(),wt=pt+at.shift(),Mt=Vt+at.shift(),yt=wt+at.shift(),Gt=Mt+at.shift(),Bt=yt+at.shift(),vt=Gt+at.shift(),ht=Bt+at.shift(),mt=vt+at.shift(),at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,wt,Mt),_.U.P.curveTo(ot,yt,Gt,Bt,vt,ht,mt)),Nt=="o1236"&&(Ct=ht+at.shift(),ft=mt+at.shift(),pt=Ct+at.shift(),Mt=Vt=ft+at.shift(),Gt=Vt,Bt=(yt=(wt=pt+at.shift())+at.shift())+at.shift(),vt=Gt+at.shift(),ht=Bt+at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,wt,Mt),_.U.P.curveTo(ot,yt,Gt,Bt,vt,ht,mt)),Nt=="o1237"&&(Ct=ht+at.shift(),ft=mt+at.shift(),pt=Ct+at.shift(),Vt=ft+at.shift(),wt=pt+at.shift(),Mt=Vt+at.shift(),yt=wt+at.shift(),Gt=Mt+at.shift(),Bt=yt+at.shift(),vt=Gt+at.shift(),Math.abs(Bt-ht)>Math.abs(vt-mt)?ht=Bt+at.shift():mt=vt+at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,wt,Mt),_.U.P.curveTo(ot,yt,Gt,Bt,vt,ht,mt));else if(Nt=="o14"){if(at.length>0&&!lt&&(gt=at.shift()+rt.nominalWidthX,lt=!0),at.length==4){var St=at.shift(),Zt=at.shift(),Et=at.shift(),Wt=at.shift(),Ht=_.CFF.glyphBySE(rt,Et),zt=_.CFF.glyphBySE(rt,Wt);_.U._drawCFF(rt.CharStrings[Ht],it,rt,st,ot),it.x=St,it.y=Zt,_.U._drawCFF(rt.CharStrings[zt],it,rt,st,ot)}ct&&(_.U.P.closePath(ot),ct=!1)}else if(Nt=="o19"||Nt=="o20")at.length%2!=0&&!lt&&(gt=at.shift()+st.nominalWidthX),At+=at.length>>1,at.length=0,lt=!0,dt+=At+7>>3;else if(Nt=="o21")at.length>2&&!lt&&(gt=at.shift()+st.nominalWidthX,lt=!0),mt+=at.pop(),ht+=at.pop(),ct&&_.U.P.closePath(ot),_.U.P.moveTo(ot,ht,mt),ct=!0;else if(Nt=="o22")at.length>1&&!lt&&(gt=at.shift()+st.nominalWidthX,lt=!0),ht+=at.pop(),ct&&_.U.P.closePath(ot),_.U.P.moveTo(ot,ht,mt),ct=!0;else if(Nt=="o25"){for(;at.length>6;)ht+=at.shift(),mt+=at.shift(),_.U.P.lineTo(ot,ht,mt);Ct=ht+at.shift(),ft=mt+at.shift(),pt=Ct+at.shift(),Vt=ft+at.shift(),ht=pt+at.shift(),mt=Vt+at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,ht,mt)}else if(Nt=="o26")for(at.length%2&&(ht+=at.shift());at.length>0;)Ct=ht,ft=mt+at.shift(),ht=pt=Ct+at.shift(),mt=(Vt=ft+at.shift())+at.shift(),_.U.P.curveTo(ot,Ct,ft,pt,Vt,ht,mt);else if(Nt=="o27")for(at.length%2&&(mt+=at.shift());at.length>0;)ft=mt,pt=(Ct=ht+at.shift())+at.shift(),Vt=ft+at.shift(),ht=pt+at.shift(),mt=Vt,_.U.P.curveTo(ot,Ct,ft,pt,Vt,ht,mt);else if(Nt=="o10"||Nt=="o29"){var Pt=Nt=="o10"?st:rt;if(at.length==0)console.debug("error: empty stack");else{var Ot=at.pop(),Jt=Pt.Subrs[Ot+Pt.Bias];it.x=ht,it.y=mt,it.nStems=At,it.haveWidth=lt,it.width=gt,it.open=ct,_.U._drawCFF(Jt,it,rt,st,ot),ht=it.x,mt=it.y,At=it.nStems,lt=it.haveWidth,gt=it.width,ct=it.open}}else if(Nt=="o30"||Nt=="o31"){var rn=at.length,sn=(Tt=0,Nt=="o31");for(Tt+=rn-(Yt=-3&rn);Tt<Yt;)sn?(ft=mt,pt=(Ct=ht+at.shift())+at.shift(),mt=(Vt=ft+at.shift())+at.shift(),Yt-Tt==5?(ht=pt+at.shift(),Tt++):ht=pt,sn=!1):(Ct=ht,ft=mt+at.shift(),pt=Ct+at.shift(),Vt=ft+at.shift(),ht=pt+at.shift(),Yt-Tt==5?(mt=Vt+at.shift(),Tt++):mt=Vt,sn=!0),_.U.P.curveTo(ot,Ct,ft,pt,Vt,ht,mt),Tt+=4}else{if((Nt+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Nt,nt),Nt;at.push(Nt)}}}it.x=ht,it.y=mt,it.nStems=At,it.haveWidth=lt,it.width=gt,it.open=ct};var _e=_,tt={Typr:_e};return et.Typr=_e,et.default=tt,Object.defineProperty(et,"__esModule",{value:!0}),et}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function woff2otfFactory(){return function(et){var _=Uint8Array,_e=Uint16Array,tt=Uint32Array,nt=new _([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),it=new _([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rt=new _([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),st=function(Nt,Yt){for(var Lt=new _e(31),Xt=0;Xt<31;++Xt)Lt[Xt]=Yt+=1<<Nt[Xt-1];var _t=new tt(Lt[30]);for(Xt=1;Xt<30;++Xt)for(var Tt=Lt[Xt];Tt<Lt[Xt+1];++Tt)_t[Tt]=Tt-Lt[Xt]<<5|Xt;return[Lt,_t]},ot=st(nt,2),at=ot[0],At=ot[1];at[28]=258,At[258]=28;for(var lt=st(it,0)[0],gt=new _e(32768),ct=0;ct<32768;++ct){var dt=(43690&ct)>>>1|(21845&ct)<<1;dt=(61680&(dt=(52428&dt)>>>2|(13107&dt)<<2))>>>4|(3855&dt)<<4,gt[ct]=((65280&dt)>>>8|(255&dt)<<8)>>>1}var ht=function(Nt,Yt,Lt){for(var Xt=Nt.length,_t=0,Tt=new _e(Yt);_t<Xt;++_t)++Tt[Nt[_t]-1];var St,Zt=new _e(Yt);for(_t=0;_t<Yt;++_t)Zt[_t]=Zt[_t-1]+Tt[_t-1]<<1;if(Lt){St=new _e(1<<Yt);var Et=15-Yt;for(_t=0;_t<Xt;++_t)if(Nt[_t])for(var Wt=_t<<4|Nt[_t],Ht=Yt-Nt[_t],zt=Zt[Nt[_t]-1]++<<Ht,Pt=zt|(1<<Ht)-1;zt<=Pt;++zt)St[gt[zt]>>>Et]=Wt}else for(St=new _e(Xt),_t=0;_t<Xt;++_t)Nt[_t]&&(St[_t]=gt[Zt[Nt[_t]-1]++]>>>15-Nt[_t]);return St},mt=new _(288);for(ct=0;ct<144;++ct)mt[ct]=8;for(ct=144;ct<256;++ct)mt[ct]=9;for(ct=256;ct<280;++ct)mt[ct]=7;for(ct=280;ct<288;++ct)mt[ct]=8;var Ct=new _(32);for(ct=0;ct<32;++ct)Ct[ct]=5;var ft=ht(mt,9,1),pt=ht(Ct,5,1),Vt=function(Nt){for(var Yt=Nt[0],Lt=1;Lt<Nt.length;++Lt)Nt[Lt]>Yt&&(Yt=Nt[Lt]);return Yt},yt=function(Nt,Yt,Lt){var Xt=Yt/8|0;return(Nt[Xt]|Nt[Xt+1]<<8)>>(7&Yt)&Lt},Gt=function(Nt,Yt){var Lt=Yt/8|0;return(Nt[Lt]|Nt[Lt+1]<<8|Nt[Lt+2]<<16)>>(7&Yt)},Bt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vt=function(Nt,Yt,Lt){var Xt=new Error(Yt||Bt[Nt]);if(Xt.code=Nt,Error.captureStackTrace&&Error.captureStackTrace(Xt,vt),!Lt)throw Xt;return Xt},wt=function(Nt,Yt,Lt){var Xt=Nt.length;if(!Xt||Lt&&!Lt.l&&Xt<5)return Yt||new _(0);var _t=!Yt||Lt,Tt=!Lt||Lt.i;Lt||(Lt={}),Yt||(Yt=new _(3*Xt));var St,Zt=function(bn){var En=Yt.length;if(bn>En){var Dn=new _(Math.max(2*En,bn));Dn.set(Yt),Yt=Dn}},Et=Lt.f||0,Wt=Lt.p||0,Ht=Lt.b||0,zt=Lt.l,Pt=Lt.d,Ot=Lt.m,Jt=Lt.n,rn=8*Xt;do{if(!zt){Lt.f=Et=yt(Nt,Wt,1);var sn=yt(Nt,Wt+1,3);if(Wt+=3,!sn){var Vn=Nt[(Mn=((St=Wt)/8|0)+(7&St&&1)+4)-4]|Nt[Mn-3]<<8,dn=Mn+Vn;if(dn>Xt){Tt&&vt(0);break}_t&&Zt(Ht+Vn),Yt.set(Nt.subarray(Mn,dn),Ht),Lt.b=Ht+=Vn,Lt.p=Wt=8*dn;continue}if(sn==1)zt=ft,Pt=pt,Ot=9,Jt=5;else if(sn==2){var gn=yt(Nt,Wt,31)+257,$t=yt(Nt,Wt+10,15)+4,tn=gn+yt(Nt,Wt+5,31)+1;Wt+=14;for(var nn=new _(tn),Bn=new _(19),Gn=0;Gn<$t;++Gn)Bn[rt[Gn]]=yt(Nt,Wt+3*Gn,7);Wt+=3*$t;var kn=Vt(Bn),pn=(1<<kn)-1,Rn=ht(Bn,kn,1);for(Gn=0;Gn<tn;){var Mn,In=Rn[yt(Nt,Wt,pn)];if(Wt+=15&In,(Mn=In>>>4)<16)nn[Gn++]=Mn;else{var Dt=0,Kt=0;for(Mn==16?(Kt=3+yt(Nt,Wt,3),Wt+=2,Dt=nn[Gn-1]):Mn==17?(Kt=3+yt(Nt,Wt,7),Wt+=3):Mn==18&&(Kt=11+yt(Nt,Wt,127),Wt+=7);Kt--;)nn[Gn++]=Dt}}var en=nn.subarray(0,gn),un=nn.subarray(gn);Ot=Vt(en),Jt=Vt(un),zt=ht(en,Ot,1),Pt=ht(un,Jt,1)}else vt(1);if(Wt>rn){Tt&&vt(0);break}}_t&&Zt(Ht+131072);for(var Sn=(1<<Ot)-1,wn=(1<<Jt)-1,Fn=Wt;;Fn=Wt){var _n=(Dt=zt[Gt(Nt,Wt)&Sn])>>>4;if((Wt+=15&Dt)>rn){Tt&&vt(0);break}if(Dt||vt(2),_n<256)Yt[Ht++]=_n;else{if(_n==256){Fn=Wt,zt=null;break}var fn=_n-254;if(_n>264){var Nn=nt[Gn=_n-257];fn=yt(Nt,Wt,(1<<Nn)-1)+at[Gn],Wt+=Nn}var jt=Pt[Gt(Nt,Wt)&wn],cn=jt>>>4;if(jt||vt(3),Wt+=15&jt,un=lt[cn],cn>3&&(Nn=it[cn],un+=Gt(Nt,Wt)&(1<<Nn)-1,Wt+=Nn),Wt>rn){Tt&&vt(0);break}_t&&Zt(Ht+131072);for(var yn=Ht+fn;Ht<yn;Ht+=4)Yt[Ht]=Yt[Ht-un],Yt[Ht+1]=Yt[Ht+1-un],Yt[Ht+2]=Yt[Ht+2-un],Yt[Ht+3]=Yt[Ht+3-un];Ht=yn}}Lt.l=zt,Lt.p=Fn,Lt.b=Ht,zt&&(Et=1,Lt.m=Ot,Lt.d=Pt,Lt.n=Jt)}while(!Et);return Ht==Yt.length?Yt:function(bn,En,Dn){(En==null||En<0)&&(En=0),(Dn==null||Dn>bn.length)&&(Dn=bn.length);var jn=new(bn instanceof _e?_e:bn instanceof tt?tt:_)(Dn-En);return jn.set(bn.subarray(En,Dn)),jn}(Yt,0,Ht)},Mt=new _(0),kt=typeof TextDecoder<"u"&&new TextDecoder;try{kt.decode(Mt,{stream:!0})}catch{}return et.convert_streams=function(Nt){var Yt=new DataView(Nt),Lt=0;function Xt(){var gn=Yt.getUint16(Lt);return Lt+=2,gn}function _t(){var gn=Yt.getUint32(Lt);return Lt+=4,gn}function Tt(gn){Vn.setUint16(dn,gn),dn+=2}function St(gn){Vn.setUint32(dn,gn),dn+=4}for(var Zt={signature:_t(),flavor:_t(),length:_t(),numTables:Xt(),reserved:Xt(),totalSfntSize:_t(),majorVersion:Xt(),minorVersion:Xt(),metaOffset:_t(),metaLength:_t(),metaOrigLength:_t(),privOffset:_t(),privLength:_t()},Et=0;Math.pow(2,Et)<=Zt.numTables;)Et++;Et--;for(var Wt=16*Math.pow(2,Et),Ht=16*Zt.numTables-Wt,zt=12,Pt=[],Ot=0;Ot<Zt.numTables;Ot++)Pt.push({tag:_t(),offset:_t(),compLength:_t(),origLength:_t(),origChecksum:_t()}),zt+=16;var Jt,rn=new Uint8Array(12+16*Pt.length+Pt.reduce(function(gn,$t){return gn+$t.origLength+4},0)),sn=rn.buffer,Vn=new DataView(sn),dn=0;return St(Zt.flavor),Tt(Zt.numTables),Tt(Wt),Tt(Et),Tt(Ht),Pt.forEach(function(gn){St(gn.tag),St(gn.origChecksum),St(zt),St(gn.origLength),gn.outOffset=zt,(zt+=gn.origLength)%4!=0&&(zt+=4-zt%4)}),Pt.forEach(function(gn){var $t,tn=Nt.slice(gn.offset,gn.offset+gn.compLength);if(gn.compLength!=gn.origLength){var nn=new Uint8Array(gn.origLength);$t=new Uint8Array(tn,2),wt($t,nn)}else nn=new Uint8Array(tn);rn.set(nn,gn.outOffset);var Bn=0;(zt=gn.outOffset+gn.origLength)%4!=0&&(Bn=4-zt%4),rn.set(new Uint8Array(Bn).buffer,gn.outOffset+gn.origLength),Jt=zt+Bn}),sn.slice(0,Jt)},Object.defineProperty(et,"__esModule",{value:!0}),et}({}).convert_streams}function parserFactory(et,_){const _e={M:2,L:2,Q:4,C:6,Z:0},tt={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},nt=1,it=2,rt=4,st=8,ot=16,at=32;let At;function lt(yt){if(!At){const Gt={R:it,L:nt,D:rt,C:ot,U:at,T:st};At=new Map;for(let Bt in tt){let vt=0;tt[Bt].split(",").forEach(wt=>{let[Mt,kt]=wt.split("+");Mt=parseInt(Mt,36),kt=kt?parseInt(kt,36):0,At.set(vt+=Mt,Gt[Bt]);for(let Nt=kt;Nt--;)At.set(++vt,Gt[Bt])})}}return At.get(yt)||at}const gt=1,ct=2,dt=3,ht=4,mt=[null,"isol","init","fina","medi"];function Ct(yt){const Gt=new Uint8Array(yt.length);let Bt=at,vt=gt,wt=-1;for(let Mt=0;Mt<yt.length;Mt++){const kt=yt.codePointAt(Mt);let Nt=lt(kt)|0,Yt=gt;Nt&st||(Bt&(nt|rt|ot)?Nt&(it|rt|ot)?(Yt=dt,(vt===gt||vt===dt)&&Gt[wt]++):Nt&(nt|at)&&(vt===ct||vt===ht)&&Gt[wt]--:Bt&(it|at)&&(vt===ct||vt===ht)&&Gt[wt]--,vt=Gt[Mt]=Yt,Bt=Nt,wt=Mt,kt>65535&&Mt++)}return Gt}function ft(yt,Gt){const Bt=[];for(let wt=0;wt<Gt.length;wt++){const Mt=Gt.codePointAt(wt);Mt>65535&&wt++,Bt.push(et.U.codeToGlyph(yt,Mt))}const vt=yt.GSUB;if(vt){const{lookupList:wt,featureList:Mt}=vt;let kt;const Nt=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Yt=[];Mt.forEach(Lt=>{if(Nt.test(Lt.tag))for(let Xt=0;Xt<Lt.tab.length;Xt++){if(Yt[Lt.tab[Xt]])continue;Yt[Lt.tab[Xt]]=!0;const _t=wt[Lt.tab[Xt]],Tt=/^(isol|init|fina|medi)$/.test(Lt.tag);Tt&&!kt&&(kt=Ct(Gt));for(let St=0;St<Bt.length;St++)(!kt||!Tt||mt[kt[St]]===Lt.tag)&&et.U._applySubs(Bt,St,_t,wt)}})}return Bt}function pt(...yt){for(let Gt=0;Gt<yt.length;Gt++)if(typeof yt[Gt]=="number")return yt[Gt]}function Vt(yt){const Gt=Object.create(null),Bt=yt["OS/2"],vt=yt.hhea,wt=yt.head.unitsPerEm,Mt=pt(Bt&&Bt.sTypoAscender,vt&&vt.ascender,wt),kt={unitsPerEm:wt,ascender:Mt,descender:pt(Bt&&Bt.sTypoDescender,vt&&vt.descender,0),capHeight:pt(Bt&&Bt.sCapHeight,Mt),xHeight:pt(Bt&&Bt.sxHeight,Mt),lineGap:pt(Bt&&Bt.sTypoLineGap,vt&&vt.lineGap),forEachGlyph(Nt,Yt,Lt,Xt){let _t=0;const Tt=1/kt.unitsPerEm*Yt,St=ft(yt,Nt);let Zt=0,Et=-1;return St.forEach((Wt,Ht)=>{if(Wt!==-1){let zt=Gt[Wt];if(!zt){const{cmds:Pt,crds:Ot}=et.U.glyphToPath(yt,Wt);let Jt="",rn=0;for(let $t=0,tn=Pt.length;$t<tn;$t++){const nn=_e[Pt[$t]];Jt+=Pt[$t];for(let Bn=1;Bn<=nn;Bn++)Jt+=(Bn>1?",":"")+Ot[rn++]}let sn,Vn,dn,gn;if(Ot.length){sn=Vn=1/0,dn=gn=-1/0;for(let $t=0,tn=Ot.length;$t<tn;$t+=2){let nn=Ot[$t],Bn=Ot[$t+1];nn<sn&&(sn=nn),Bn<Vn&&(Vn=Bn),nn>dn&&(dn=nn),Bn>gn&&(gn=Bn)}}else sn=dn=Vn=gn=0;zt=Gt[Wt]={index:Wt,advanceWidth:yt.hmtx.aWidth[Wt],xMin:sn,yMin:Vn,xMax:dn,yMax:gn,path:Jt,pathCommandCount:Pt.length}}Et!==-1&&(_t+=et.U.getPairAdjustment(yt,Et,Wt)*Tt),Xt.call(null,zt,_t,Zt),zt.advanceWidth&&(_t+=zt.advanceWidth*Tt),Lt&&(_t+=Lt*Yt),Et=Wt}Zt+=Nt.codePointAt(Zt)>65535?2:1}),_t}};return kt}return function(Gt){const Bt=new Uint8Array(Gt,0,4),vt=et._bin.readASCII(Bt,0,4);if(vt==="wOFF")Gt=_(Gt);else if(vt==="wOF2")throw new Error("woff2 fonts not supported");return Vt(et.parse(Gt)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(et,_,_e){const tt=et(),nt=_();return _e(tt,nt)}}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(et,_){et=assign({},et);const _e=now$1();if(et.font=toAbsoluteURL(et.font||CONFIG.defaultFontURL),et.text=""+et.text,et.sdfGlyphSize=et.sdfGlyphSize||CONFIG.sdfGlyphSize,et.colorRanges!=null){let lt={};for(let gt in et.colorRanges)if(et.colorRanges.hasOwnProperty(gt)){let ct=et.colorRanges[gt];typeof ct!="number"&&(ct=tempColor.set(ct).getHex()),lt[gt]=ct}et.colorRanges=lt}Object.freeze(et);const{textureWidth:tt,sdfExponent:nt}=CONFIG,{sdfGlyphSize:it}=et,rt=tt/it*4;let st=atlases[it];if(!st){const lt=document.createElement("canvas");lt.width=tt,lt.height=it*256/rt,st=atlases[it]={glyphCount:0,sdfGlyphSize:it,sdfCanvas:lt,sdfTexture:new Texture(lt,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},st.sdfTexture.generateMipmaps=!1,initContextLossHandling(st)}const{sdfTexture:ot,sdfCanvas:at}=st;let At=st.glyphsByFont.get(et.font);At||st.glyphsByFont.set(et.font,At=new Map),typesetInWorker(et).then(lt=>{const{glyphIds:gt,glyphPositions:ct,fontSize:dt,unitsPerEm:ht,timings:mt}=lt,Ct=[],ft=new Float32Array(gt.length*4),pt=dt/ht;let Vt=0,yt=0;const Gt=now$1();gt.forEach((kt,Nt)=>{let Yt=At.get(kt);if(!Yt){const{path:Tt,pathBounds:St}=lt.glyphData[kt],Zt=Math.max(St[2]-St[0],St[3]-St[1])/it*(CONFIG.sdfMargin*it+.5),Et=st.glyphCount++,Wt=[St[0]-Zt,St[1]-Zt,St[2]+Zt,St[3]+Zt];At.set(kt,Yt={path:Tt,atlasIndex:Et,sdfViewBox:Wt}),Ct.push(Yt)}const{sdfViewBox:Lt}=Yt,Xt=ct[yt++],_t=ct[yt++];ft[Vt++]=Xt+Lt[0]*pt,ft[Vt++]=_t+Lt[1]*pt,ft[Vt++]=Xt+Lt[2]*pt,ft[Vt++]=_t+Lt[3]*pt,gt[Nt]=Yt.atlasIndex}),mt.quads=(mt.quads||0)+(now$1()-Gt);const Bt=now$1();mt.sdf={};const vt=at.height,wt=Math.ceil(st.glyphCount/rt),Mt=Math.pow(2,Math.ceil(Math.log2(wt*it)));Mt>vt&&(console.info(`Increasing SDF texture size ${vt}->${Mt}`),resizeWebGLCanvasWithoutClearing(at,tt,Mt),ot.dispose()),Promise.all(Ct.map(kt=>generateGlyphSDF(kt,st,et.gpuAccelerateSDF).then(({timing:Nt})=>{mt.sdf[kt.atlasIndex]=Nt}))).then(()=>{Ct.length&&!st.contextLost&&(safariPre15Workaround(st),ot.needsUpdate=!0),mt.sdfTotal=now$1()-Bt,mt.total=now$1()-_e,_(Object.freeze({parameters:et,sdfTexture:ot,sdfGlyphSize:it,sdfExponent:nt,glyphBounds:ft,glyphAtlasIndices:gt,glyphColors:lt.glyphColors,caretPositions:lt.caretPositions,caretHeight:lt.caretHeight,chunkedBounds:lt.chunkedBounds,ascender:lt.ascender,descender:lt.descender,lineHeight:lt.lineHeight,capHeight:lt.capHeight,xHeight:lt.xHeight,topBaseline:lt.topBaseline,blockBounds:lt.blockBounds,visibleBounds:lt.visibleBounds,timings:lt.timings}))})}),Promise.resolve().then(()=>{st.contextLost||warmUpSDFCanvas(at)})}function generateGlyphSDF({path:et,atlasIndex:_,sdfViewBox:_e},{sdfGlyphSize:tt,sdfCanvas:nt,contextLost:it},rt){if(it)return Promise.resolve({timing:-1});const{textureWidth:st,sdfExponent:ot}=CONFIG,at=Math.max(_e[2]-_e[0],_e[3]-_e[1]),At=Math.floor(_/4),lt=At%(st/tt)*tt,gt=Math.floor(At/(st/tt))*tt,ct=_%4;return generateSDF(tt,tt,et,_e,at,ot,nt,lt,gt,ct,rt)}function initContextLossHandling(et){const _=et.sdfCanvas;_.addEventListener("webglcontextlost",_e=>{console.log("Context Lost",_e),_e.preventDefault(),et.contextLost=!0}),_.addEventListener("webglcontextrestored",_e=>{console.log("Context Restored",_e),et.contextLost=!1;const tt=[];et.glyphsByFont.forEach(nt=>{nt.forEach(it=>{tt.push(generateGlyphSDF(it,et,!0))})}),Promise.all(tt).then(()=>{safariPre15Workaround(et),et.sdfTexture.needsUpdate=!0})})}function preloadFont({font:et,characters:_,sdfGlyphSize:_e},tt){let nt=Array.isArray(_)?_.join(`
`):""+_;getTextRenderInfo({font:et,sdfGlyphSize:_e,text:nt},tt)}function assign(et,_){for(let _e in _)_.hasOwnProperty(_e)&&(et[_e]=_[_e]);return et}let linkEl;function toAbsoluteURL(et){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=et,linkEl.href}function safariPre15Workaround(et){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:_,sdfTexture:_e}=et,{width:tt,height:nt}=_,it=et.sdfCanvas.getContext("webgl");let rt=_e.image.data;(!rt||rt.length!==tt*nt*4)&&(rt=new Uint8Array(tt*nt*4),_e.image={width:tt,height:nt,data:rt},_e.flipY=!1,_e.isDataTexture=!0),it.readPixels(0,0,tt,nt,it.RGBA,it.UNSIGNED_BYTE,rt)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidiFactory],init(et,_,_e,tt){const{defaultFontURL:nt}=et;return _e(_,tt(),{defaultFontURL:nt})}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init(et){return function(_){return new Promise(_e=>{et.typeset(_,_e)})}},getTransferables(et){const _=[et.glyphPositions.buffer,et.glyphIds.buffer];return et.caretPositions&&_.push(et.caretPositions.buffer),et.glyphColors&&_.push(et.glyphColors.buffer),_}}),templateGeometries={};function getTemplateGeometry(et){let _=templateGeometries[et];if(!_){const _e=new PlaneGeometry(1,1,et,et),tt=_e.clone(),nt=_e.attributes,it=tt.attributes,rt=new BufferGeometry,st=nt.uv.count;for(let ot=0;ot<st;ot++)it.position.array[ot*3]*=-1,it.normal.array[ot*3+2]*=-1;["position","normal","uv"].forEach(ot=>{rt.setAttribute(ot,new Float32BufferAttribute([...nt[ot].array,...it[ot].array],nt[ot].itemSize))}),rt.setIndex([..._e.index.array,...tt.index.array.map(ot=>ot+st)]),rt.translate(.5,.5,0),_=templateGeometries[et]=rt}return _}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(_){const _e=this.getIndex().count;this.setDrawRange(_===BackSide?_e/2:0,_===DoubleSide?_e:_e/2)}set detail(_){if(_!==this._detail){this._detail=_,(typeof _!="number"||_<1)&&(_=1);let _e=getTemplateGeometry(_);["position","normal","uv"].forEach(tt=>{this.attributes[tt]=_e.attributes[tt].clone()}),this.setIndex(_e.getIndex().clone())}}get detail(){return this._detail}set curveRadius(_){_!==this._curveRadius&&(this._curveRadius=_,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(_,_e,tt,nt,it){updateBufferAttr(this,glyphBoundsAttrName,_,4),updateBufferAttr(this,glyphIndexAttrName,_e,1),updateBufferAttr(this,glyphColorAttrName,it,3),this._blockBounds=tt,this._chunkedBounds=nt,this.instanceCount=_e.length,this._updateBounds()}_updateBounds(){const _=this._blockBounds;if(_){const{curveRadius:_e,boundingBox:tt}=this;if(_e){const{PI:nt,floor:it,min:rt,max:st,sin:ot,cos:at}=Math,At=nt/2,lt=nt*2,gt=Math.abs(_e),ct=_[0]/gt,dt=_[2]/gt,ht=it((ct+At)/lt)!==it((dt+At)/lt)?-gt:rt(ot(ct)*gt,ot(dt)*gt),mt=it((ct-At)/lt)!==it((dt-At)/lt)?gt:st(ot(ct)*gt,ot(dt)*gt),Ct=it((ct+nt)/lt)!==it((dt+nt)/lt)?gt*2:st(gt-at(ct)*gt,gt-at(dt)*gt);tt.min.set(ht,_[1],_e<0?-Ct:0),tt.max.set(mt,_[3],_e<0?0:Ct)}else tt.min.set(_[0],_[1],0),tt.max.set(_[2],_[3],0);tt.getBoundingSphere(this.boundingSphere)}}applyClipRect(_){let _e=this.getAttribute(glyphIndexAttrName).count,tt=this._chunkedBounds;if(tt)for(let nt=tt.length;nt--;){_e=tt[nt].end;let it=tt[nt].rect;if(it[1]<_.w&&it[3]>_.y&&it[0]<_.z&&it[2]>_.x)break}this.instanceCount=_e}}function updateBufferAttr(et,_,_e,tt){const nt=et.getAttribute(_);_e?nt&&nt.array.length===_e.length?(nt.array.set(_e),nt.needsUpdate=!0):(et.setAttribute(_,new InstancedBufferAttribute(_e,tt)),delete et._maxInstanceCount,et.dispose()):nt&&et.deleteAttribute(_)}const VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(et){const _=createDerivedMaterial(et,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:_e,fragmentShader:tt}){let nt=/\buniform\s+vec3\s+diffuse\b/;return nt.test(tt)&&(tt=tt.replace(nt,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),nt.test(_e)||(_e=_e.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:_e,fragmentShader:tt}}});return _.transparent=!0,Object.defineProperties(_,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),_}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(et){return Array.isArray(et)?et[0]:et}let getFlatRaycastMesh=()=>{const et=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>et,et},getCurvedRaycastMesh=()=>{const et=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>et,et};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$1=class extends Mesh{constructor(){const _=new GlyphsGeometry;super(_,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(_){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(_):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},_e=>{this._isSyncing=!1,this._textRenderInfo=_e,this.geometry.updateGlyphs(_e.glyphBounds,_e.glyphAtlasIndices,_e.blockBounds,_e.chunkedBounds,_e.glyphColors);const tt=this._queuedSyncs;tt&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{tt.forEach(nt=>nt&&nt())})),this.dispatchEvent(syncCompleteEvent),_&&_()})))}onBeforeRender(_,_e,tt,nt,it,rt){this.sync(),it.isTroikaTextMaterial&&this._prepareForRender(it),it._hadOwnSide=it.hasOwnProperty("side"),this.geometry.setSide(it._actualSide=it.side),it.side=FrontSide}onAfterRender(_,_e,tt,nt,it,rt){it._hadOwnSide?it.side=it._actualSide:delete it.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let _=this._derivedMaterial;const _e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!_||_.baseMaterial!==_e)&&(_=this._derivedMaterial=createTextDerivedMaterial(_e),_e.addEventListener("dispose",function tt(){_e.removeEventListener("dispose",tt),_.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let tt=_._outlineMtl;return tt||(tt=_._outlineMtl=Object.create(_,{id:{value:_.id+.1}}),tt.isTextOutlineMaterial=!0,tt.depthWrite=!1,tt.map=null,_.addEventListener("dispose",function nt(){_.removeEventListener("dispose",nt),tt.dispose()})),[tt,_]}else return _}set material(_){_&&_.isTroikaTextMaterial?(this._derivedMaterial=_,this._baseMaterial=_.baseMaterial):this._baseMaterial=_}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(_){this.geometry.detail=_}get curveRadius(){return this.geometry.curveRadius}set curveRadius(_){this.geometry.curveRadius=_}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(_){const _e=_.isTextOutlineMaterial,tt=_.uniforms,nt=this.textRenderInfo;if(nt){const{sdfTexture:st,blockBounds:ot}=nt;tt.uTroikaSDFTexture.value=st,tt.uTroikaSDFTextureSize.value.set(st.image.width,st.image.height),tt.uTroikaSDFGlyphSize.value=nt.sdfGlyphSize,tt.uTroikaSDFExponent.value=nt.sdfExponent,tt.uTroikaTotalBounds.value.fromArray(ot),tt.uTroikaUseGlyphColors.value=!_e&&!!nt.glyphColors;let at=0,At=0,lt=0,gt,ct,dt,ht=0,mt=0;if(_e){let{outlineWidth:ft,outlineOffsetX:pt,outlineOffsetY:Vt,outlineBlur:yt,outlineOpacity:Gt}=this;at=this._parsePercent(ft)||0,At=Math.max(0,this._parsePercent(yt)||0),gt=Gt,ht=this._parsePercent(pt)||0,mt=this._parsePercent(Vt)||0}else lt=Math.max(0,this._parsePercent(this.strokeWidth)||0),lt&&(dt=this.strokeColor,tt.uTroikaStrokeColor.value.set(dt??defaultStrokeColor),ct=this.strokeOpacity,ct==null&&(ct=1)),gt=this.fillOpacity;tt.uTroikaDistanceOffset.value=at,tt.uTroikaPositionOffset.value.set(ht,mt),tt.uTroikaBlurRadius.value=At,tt.uTroikaStrokeWidth.value=lt,tt.uTroikaStrokeOpacity.value=ct,tt.uTroikaFillOpacity.value=gt??1,tt.uTroikaCurveRadius.value=this.curveRadius||0;let Ct=this.clipRect;if(Ct&&Array.isArray(Ct)&&Ct.length===4)tt.uTroikaClipRect.value.fromArray(Ct);else{const ft=(this.fontSize||.1)*100;tt.uTroikaClipRect.value.set(ot[0]-ft,ot[1]-ft,ot[2]+ft,ot[3]+ft)}this.geometry.applyClipRect(tt.uTroikaClipRect.value)}tt.uTroikaSDFDebug.value=!!this.debugSDF,_.polygonOffset=!!this.depthOffset,_.polygonOffsetFactor=_.polygonOffsetUnits=this.depthOffset||0;const it=_e?this.outlineColor||0:this.color;if(it==null)delete _.color;else{const st=_.hasOwnProperty("color")?_.color:_.color=new Color;(it!==st._input||typeof it=="object")&&st.set(st._input=it)}let rt=this.orientation||defaultOrient;if(rt!==_._orientation){let st=tt.uTroikaOrient.value;rt=rt.replace(/[^-+xyz]/g,"");let ot=rt!==defaultOrient&&rt.match(/^([-+])([xyz])([-+])([xyz])$/);if(ot){let[,at,At,lt,gt]=ot;tempVec3a.set(0,0,0)[At]=at==="-"?1:-1,tempVec3b.set(0,0,0)[gt]=lt==="-"?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),st.setFromMatrix4(tempMat4)}else st.identity();_._orientation=rt}}_parsePercent(_){if(typeof _=="string"){let _e=_.match(/^(-?[\d.]+)%$/),tt=_e?parseFloat(_e[1]):NaN;_=(isNaN(tt)?0:tt/100)*this.fontSize}return _}localPositionToTextCoords(_,_e=new Vector2){_e.copy(_);const tt=this.curveRadius;return tt&&(_e.x=Math.atan2(_.x,Math.abs(tt)-Math.abs(_.z))*Math.abs(tt)),_e}worldPositionToTextCoords(_,_e=new Vector2){return tempVec3a.copy(_),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),_e)}raycast(_,_e){const{textRenderInfo:tt,curveRadius:nt}=this;if(tt){const it=tt.blockBounds,rt=nt?getCurvedRaycastMesh():getFlatRaycastMesh(),st=rt.geometry,{position:ot,uv:at}=st.attributes;for(let At=0;At<at.count;At++){let lt=it[0]+at.getX(At)*(it[2]-it[0]);const gt=it[1]+at.getY(At)*(it[3]-it[1]);let ct=0;nt&&(ct=nt-Math.cos(lt/nt)*nt,lt=Math.sin(lt/nt)*nt),ot.setXYZ(At,lt,gt,ct)}st.boundingSphere=this.geometry.boundingSphere,st.boundingBox=this.geometry.boundingBox,rt.matrixWorld=this.matrixWorld,rt.material.side=this.material.side,tempArray.length=0,rt.raycast(_,tempArray);for(let At=0;At<tempArray.length;At++)tempArray[At].object=this,_e.push(tempArray[At])}}copy(_){const _e=this.geometry;return super.copy(_),this.geometry=_e,COPYABLE_PROPS.forEach(tt=>{this[tt]=_[tt]}),this}clone(){return new this.constructor().copy(this)}};SYNCABLE_PROPS.forEach(et=>{const _="_private_"+et;Object.defineProperty(Text$1.prototype,et,{get(){return this[_]},set(_e){_e!==this[_]&&(this[_]=_e,this._needsSync=!0)}})});const Text=reactExports.forwardRef(({anchorX:et="center",anchorY:_="middle",font:_e,fontSize:tt=1,children:nt,characters:it,onSync:rt,...st},ot)=>{const at=useThree(({invalidate:ct})=>ct),[At]=reactExports.useState(()=>new Text$1),[lt,gt]=reactExports.useMemo(()=>{const ct=[];let dt="";return reactExports.Children.forEach(nt,ht=>{typeof ht=="string"||typeof ht=="number"?dt+=ht:ct.push(ht)}),[ct,dt]},[nt]);return suspend(()=>new Promise(ct=>preloadFont({font:_e,characters:it},ct)),["troika-text",_e,it]),reactExports.useLayoutEffect(()=>void At.sync(()=>{at(),rt&&rt(At)})),reactExports.useEffect(()=>()=>At.dispose(),[At]),reactExports.createElement("primitive",_extends({object:At,ref:ot,font:_e,text:gt,anchorX:et,anchorY:_,fontSize:tt},st),lt)});var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")();function apply$1(et,_,_e){switch(_e.length){case 0:return et.call(_);case 1:return et.call(_,_e[0]);case 2:return et.call(_,_e[0],_e[1]);case 3:return et.call(_,_e[0],_e[1],_e[2])}return et.apply(_,_e)}function arrayMap(et,_){for(var _e=-1,tt=et?et.length:0,nt=Array(tt);++_e<tt;)nt[_e]=_(et[_e],_e,et);return nt}function arrayPush(et,_){for(var _e=-1,tt=_.length,nt=et.length;++_e<tt;)et[nt+_e]=_[_e];return et}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol$1=root$1.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0,nativeMax=Math.max;function baseFlatten(et,_,_e,tt,nt){var it=-1,rt=et.length;for(_e||(_e=isFlattenable),nt||(nt=[]);++it<rt;){var st=et[it];_>0&&_e(st)?_>1?baseFlatten(st,_-1,_e,tt,nt):arrayPush(nt,st):tt||(nt[nt.length]=st)}return nt}function basePick(et,_){return et=Object(et),basePickBy(et,_,function(_e,tt){return tt in et})}function basePickBy(et,_,_e){for(var tt=-1,nt=_.length,it={};++tt<nt;){var rt=_[tt],st=et[rt];_e(st,rt)&&(it[rt]=st)}return it}function baseRest(et,_){return _=nativeMax(_===void 0?et.length-1:_,0),function(){for(var _e=arguments,tt=-1,nt=nativeMax(_e.length-_,0),it=Array(nt);++tt<nt;)it[tt]=_e[_+tt];tt=-1;for(var rt=Array(_+1);++tt<_;)rt[tt]=_e[tt];return rt[_]=it,apply$1(et,this,rt)}}function isFlattenable(et){return isArray(et)||isArguments(et)||!!(spreadableSymbol&&et&&et[spreadableSymbol])}function toKey(et){if(typeof et=="string"||isSymbol(et))return et;var _=et+"";return _=="0"&&1/et==-INFINITY?"-0":_}function isArguments(et){return isArrayLikeObject(et)&&hasOwnProperty.call(et,"callee")&&(!propertyIsEnumerable.call(et,"callee")||objectToString.call(et)==argsTag)}var isArray=Array.isArray;function isArrayLike(et){return et!=null&&isLength(et.length)&&!isFunction$1(et)}function isArrayLikeObject(et){return isObjectLike(et)&&isArrayLike(et)}function isFunction$1(et){var _=isObject(et)?objectToString.call(et):"";return _==funcTag||_==genTag}function isLength(et){return typeof et=="number"&&et>-1&&et%1==0&&et<=MAX_SAFE_INTEGER}function isObject(et){var _=typeof et;return!!et&&(_=="object"||_=="function")}function isObjectLike(et){return!!et&&typeof et=="object"}function isSymbol(et){return typeof et=="symbol"||isObjectLike(et)&&objectToString.call(et)==symbolTag}var pick=baseRest(function(et,_){return et==null?{}:basePick(et,arrayMap(baseFlatten(_,1),toKey))}),lodash_pick=pick;const pick$1=getDefaultExportFromCjs(lodash_pick);function createSpread(et,{keys:_=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:_e,inject:tt,castShadow:nt,receiveShadow:it}){let rt=pick$1(et,_);return _e&&(rt.geometry&&_e!=="materialsOnly"&&(rt.geometry=rt.geometry.clone()),rt.material&&_e!=="geometriesOnly"&&(rt.material=rt.material.clone())),tt&&(typeof tt=="function"?rt={...rt,children:tt(et)}:reactExports.isValidElement(tt)?rt={...rt,children:tt}:rt={...rt,...tt}),et instanceof Mesh&&(nt&&(rt.castShadow=!0),it&&(rt.receiveShadow=!0)),rt}const Clone=reactExports.forwardRef(({isChild:et=!1,object:_,children:_e,deep:tt,castShadow:nt,receiveShadow:it,inject:rt,keys:st,...ot},at)=>{var At;const lt={keys:st,deep:tt,inject:rt,castShadow:nt,receiveShadow:it};if(_=reactExports.useMemo(()=>{if(et===!1&&!Array.isArray(_)){let ht=!1;if(_.traverse(mt=>{mt.isSkinnedMesh&&(ht=!0)}),ht)return SkeletonUtils.clone(_)}return _},[_,et]),Array.isArray(_))return reactExports.createElement("group",_extends({},ot,{ref:at}),_.map(ht=>reactExports.createElement(Clone,_extends({key:ht.uuid,object:ht},lt))),_e);const{children:gt,...ct}=createSpread(_,lt),dt=_.type[0].toLowerCase()+_.type.slice(1);return reactExports.createElement(dt,_extends({},ct,ot,{ref:at}),((At=_)==null?void 0:At.children).map(ht=>ht.type==="Bone"?reactExports.createElement("primitive",_extends({key:ht.uuid,object:ht},lt)):reactExports.createElement(Clone,_extends({key:ht.uuid,object:ht},lt,{isChild:!0}))),_e,gt)});let dracoLoader=null;function extensions(et,_,_e){return tt=>{_e&&_e(tt),et&&(dracoLoader||(dracoLoader=new DRACOLoader$1),dracoLoader.setDecoderPath(typeof et=="string"?et:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),tt.setDRACOLoader(dracoLoader)),_&&tt.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}function useGLTF(et,_=!0,_e=!0,tt){return useLoader(GLTFLoader$1,et,extensions(_,_e,tt))}useGLTF.preload=(et,_=!0,_e=!0,tt)=>useLoader.preload(GLTFLoader$1,et,extensions(_,_e,tt));useGLTF.clear=et=>useLoader.clear(GLTFLoader$1,et);function useFBO(et,_,_e){const{gl:tt,size:nt,viewport:it}=useThree(),rt=typeof et=="number"?et:nt.width*it.dpr,st=typeof _=="number"?_:nt.height*it.dpr,ot=(typeof et=="number"?_e:et)||{},{samples:at,...At}=ot,lt=reactExports.useMemo(()=>{let gt;return gt=new WebGLRenderTarget(rt,st,{minFilter:LinearFilter,magFilter:LinearFilter,encoding:tt.outputEncoding,type:HalfFloatType,...At}),gt.samples=at,gt},[]);return reactExports.useLayoutEffect(()=>{lt.setSize(rt,st),at&&(lt.samples=at)},[at,lt,rt,st]),reactExports.useEffect(()=>()=>lt.dispose(),[]),lt}const isFunction=et=>typeof et=="function",PerspectiveCamera=reactExports.forwardRef(({envMap:et,resolution:_=256,frames:_e=1/0,makeDefault:tt,children:nt,...it},rt)=>{const st=useThree(({set:mt})=>mt),ot=useThree(({camera:mt})=>mt),at=useThree(({size:mt})=>mt),At=reactExports.useRef(null),lt=reactExports.useRef(null),gt=useFBO(_);reactExports.useLayoutEffect(()=>{it.manual||(At.current.aspect=at.width/at.height)},[at,it]),reactExports.useLayoutEffect(()=>{At.current.updateProjectionMatrix()});let ct=0,dt=null;const ht=isFunction(nt);return useFrame(mt=>{ht&&(_e===1/0||ct<_e)&&(lt.current.visible=!1,mt.gl.setRenderTarget(gt),dt=mt.scene.background,et&&(mt.scene.background=et),mt.gl.render(mt.scene,At.current),mt.scene.background=dt,mt.gl.setRenderTarget(null),lt.current.visible=!0,ct++)}),reactExports.useLayoutEffect(()=>{if(tt){const mt=ot;return st(()=>({camera:At.current})),()=>st(()=>({camera:mt}))}},[At,tt,st]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("perspectiveCamera",_extends({ref:mergeRefs([At,rt])},it),!ht&&nt),reactExports.createElement("group",{ref:lt},ht&&nt(gt.texture)))}),OrbitControls=reactExports.forwardRef(({makeDefault:et,camera:_,regress:_e,domElement:tt,enableDamping:nt=!0,onChange:it,onStart:rt,onEnd:st,...ot},at)=>{const At=useThree(Vt=>Vt.invalidate),lt=useThree(Vt=>Vt.camera),gt=useThree(Vt=>Vt.gl),ct=useThree(Vt=>Vt.events),dt=useThree(Vt=>Vt.set),ht=useThree(Vt=>Vt.get),mt=useThree(Vt=>Vt.performance),Ct=_||lt,ft=tt||ct.connected||gt.domElement,pt=reactExports.useMemo(()=>new OrbitControls$1(Ct),[Ct]);return useFrame(()=>{pt.enabled&&pt.update()},-1),reactExports.useEffect(()=>(pt.connect(ft),()=>void pt.dispose()),[ft,_e,pt,At]),reactExports.useEffect(()=>{const Vt=yt=>{At(),_e&&mt.regress(),it&&it(yt)};return pt.addEventListener("change",Vt),rt&&pt.addEventListener("start",rt),st&&pt.addEventListener("end",st),()=>{rt&&pt.removeEventListener("start",rt),st&&pt.removeEventListener("end",st),pt.removeEventListener("change",Vt)}},[it,rt,st,pt,At]),reactExports.useEffect(()=>{if(et){const Vt=ht().controls;return dt({controls:pt}),()=>dt({controls:Vt})}},[et,pt]),reactExports.createElement("primitive",_extends({ref:at,object:pt,enableDamping:nt},ot))});function e$3(et,_,_e,tt){return new(_e||(_e=Promise))(function(nt,it){function rt(at){try{ot(tt.next(at))}catch(At){it(At)}}function st(at){try{ot(tt.throw(at))}catch(At){it(At)}}function ot(at){var At;at.done?nt(at.value):(At=at.value,At instanceof _e?At:new _e(function(lt){lt(At)})).then(rt,st)}ot((tt=tt.apply(et,_||[])).next())})}const t$3=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function n$3(et){return et=et.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const r$3=typeof window>"u",o$1=(()=>{if(r$3)return;const{userAgent:et,platform:_,maxTouchPoints:_e}=window.navigator,tt=/(iphone|ipod|ipad)/i.test(et),nt=_==="iPad"||_==="MacIntel"&&_e>0&&!window.MSStream;return{isIpad:nt,isMobile:/android/i.test(et)||tt||nt,isSafari12:/Version\/12.+Safari/.test(et)}})();function a$3(et,_,_e){if(!_e)return[_];const tt=function(at){const At=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,lt=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,gt=at.createShader(35633),ct=at.createShader(35632),dt=at.createProgram();if(!(ct&&gt&&dt))return;at.shaderSource(gt,At),at.shaderSource(ct,lt),at.compileShader(gt),at.compileShader(ct),at.attachShader(dt,gt),at.attachShader(dt,ct),at.linkProgram(dt),at.detachShader(dt,gt),at.detachShader(dt,ct),at.deleteShader(gt),at.deleteShader(ct),at.useProgram(dt);const ht=at.createBuffer();at.bindBuffer(34962,ht),at.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const mt=at.getAttribLocation(dt,"aPosition");at.vertexAttribPointer(mt,3,5126,!1,0,0),at.enableVertexAttribArray(mt),at.clearColor(1,1,1,1),at.clear(16384),at.viewport(0,0,1,1),at.drawArrays(4,0,3);const Ct=new Uint8Array(4);return at.readPixels(0,0,1,1,6408,5121,Ct),at.deleteProgram(dt),at.deleteBuffer(ht),Ct.join("")}(et),nt="801621810",it="8016218135",rt="80162181161",st=o$1!=null&&o$1.isIpad?[["a7",rt,12],["a8",it,15],["a8x",it,15],["a9",it,15],["a9x",it,15],["a10",it,15],["a10x",it,15],["a12",nt,15],["a12x",nt,15],["a12z",nt,15],["a14",nt,15],["m1",nt,15]]:[["a7",rt,12],["a8",it,12],["a9",it,15],["a10",it,15],["a11",nt,15],["a12",nt,15],["a13",nt,15],["a14",nt,15]];let ot;return tt==="80162181255"?ot=st.filter(([,,at])=>at>=14):(ot=st.filter(([,at])=>at===tt),ot.length||(ot=st)),ot.map(([at])=>`apple ${at} gpu`)}let i$1=class extends Error{constructor(_){super(_),Object.setPrototypeOf(this,new.target.prototype)}};const c$3=[],d$1=[];function l$2(et,_){if(et===_)return 0;const _e=et;et.length>_.length&&(et=_,_=_e);let tt=et.length,nt=_.length;for(;tt>0&&et.charCodeAt(~-tt)===_.charCodeAt(~-nt);)tt--,nt--;let it,rt=0;for(;rt<tt&&et.charCodeAt(rt)===_.charCodeAt(rt);)rt++;if(tt-=rt,nt-=rt,tt===0)return nt;let st,ot,at=0,At=0,lt=0;for(;At<tt;)d$1[At]=et.charCodeAt(rt+At),c$3[At]=++At;for(;lt<nt;)for(it=_.charCodeAt(rt+lt),st=lt++,at=lt,At=0;At<tt;At++)ot=it===d$1[At]?st:st+1,st=c$3[At],at=c$3[At]=st>at?ot>at?at+1:ot:ot>st?st+1:ot;return at}function s$2(et){return et!=null}const f$1=({mobileTiers:et=[0,15,30,60],desktopTiers:_=[0,15,30,60],override:_e={},glContext:tt,failIfMajorPerformanceCaveat:nt=!1,benchmarksURL:it="https://unpkg.com/detect-gpu@5.0.22/dist/benchmarks"}={})=>e$3(void 0,void 0,void 0,function*(){const rt={};if(r$3)return{tier:0,type:"SSR"};const{isIpad:st=!!(o$1!=null&&o$1.isIpad),isMobile:ot=!!(o$1!=null&&o$1.isMobile),screenSize:at=window.screen,loadBenchmarks:At=yt=>e$3(void 0,void 0,void 0,function*(){const Gt=yield fetch(`${it}/${yt}`).then(Bt=>Bt.json());if(parseInt(Gt.shift().split(".")[0],10)<4)throw new i$1("Detect GPU benchmark data is out of date. Please update to version 4x");return Gt})}=_e;let{renderer:lt}=_e;const gt=(yt,Gt,Bt,vt,wt)=>({device:wt,fps:vt,gpu:Bt,isMobile:ot,tier:yt,type:Gt});let ct,dt="";if(lt)lt=n$3(lt),ct=[lt];else{const yt=tt||function(Bt,vt=!1){const wt={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:vt,powerPreference:"high-performance",stencil:!1};Bt&&delete wt.powerPreference;const Mt=window.document.createElement("canvas"),kt=Mt.getContext("webgl",wt)||Mt.getContext("experimental-webgl",wt);return kt??void 0}(o$1==null?void 0:o$1.isSafari12,nt);if(!yt)return gt(0,"WEBGL_UNSUPPORTED");const Gt=yt.getExtension("WEBGL_debug_renderer_info");if(Gt&&(lt=yt.getParameter(Gt.UNMASKED_RENDERER_WEBGL)),!lt)return gt(1,"FALLBACK");dt=lt,lt=n$3(lt),ct=function(Bt,vt,wt){return vt==="apple gpu"?a$3(Bt,vt,wt):[vt]}(yt,lt,ot)}const ht=(yield Promise.all(ct.map(function(yt){var Gt;return e$3(this,void 0,void 0,function*(){const Bt=(zt=>{const Pt=ot?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const Ot of Pt)if(zt.includes(Ot))return Ot})(yt);if(!Bt)return;const vt=`${ot?"m":"d"}-${Bt}${st?"-ipad":""}.json`,wt=rt[vt]=(Gt=rt[vt])!==null&&Gt!==void 0?Gt:At(vt);let Mt;try{Mt=yield wt}catch(zt){if(zt instanceof i$1)throw zt;return}const kt=function(zt){var Pt;const Ot=(zt=zt.replace(/\([^)]+\)/,"")).match(/\d+/)||zt.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(Pt=Ot==null?void 0:Ot.join("").replace(/\W|amd/g,""))!==null&&Pt!==void 0?Pt:""}(yt);let Nt=Mt.filter(([,zt])=>zt===kt);Nt.length||(Nt=Mt.filter(([zt])=>zt.includes(yt)));const Yt=Nt.length;if(Yt===0)return;const Lt=yt.split(/[.,()\[\]/\s]/g).sort().filter((zt,Pt,Ot)=>Pt===0||zt!==Ot[Pt-1]).join(" ");let Xt,[_t,,,,Tt]=Yt>1?Nt.map(zt=>[zt,l$2(Lt,zt[2])]).sort(([,zt],[,Pt])=>zt-Pt)[0][0]:Nt[0],St=Number.MAX_VALUE;const{devicePixelRatio:Zt}=window,Et=at.width*Zt*at.height*Zt;for(const zt of Tt){const[Pt,Ot]=zt,Jt=Pt*Ot,rn=Math.abs(Et-Jt);rn<St&&(St=rn,Xt=zt)}if(!Xt)return;const[,,Wt,Ht]=Xt;return[St,Wt,_t,Ht]})}))).filter(s$2).sort(([yt=Number.MAX_VALUE,Gt],[Bt=Number.MAX_VALUE,vt])=>yt===Bt?Gt-vt:yt-Bt);if(!ht.length){const yt=t$3.find(Gt=>lt.includes(Gt));return yt?gt(0,"BLOCKLISTED",yt):gt(1,"FALLBACK",`${lt} (${dt})`)}const[,mt,Ct,ft]=ht[0];if(mt===-1)return gt(0,"BLOCKLISTED",Ct,mt,ft);const pt=ot?et:_;let Vt=0;for(let yt=0;yt<pt.length;yt++)mt>=pt[yt]&&(Vt=yt);return gt(Vt,"BENCHMARK",Ct,mt,ft)}),useDetectGPU=et=>suspend(()=>f$1(et),["useDetectGPU"]),presetsObj={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},CUBEMAP_ROOT="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/",isRef=et=>et.current&&et.current.isScene,resolveScene=et=>isRef(et)?et.current:et;function setEnvProps(et,_,_e,tt,nt=0){const it=resolveScene(_||_e),rt=it.background,st=it.environment,ot=it.backgroundBlurriness||0;return et!=="only"&&(it.environment=tt),et&&(it.background=tt),et&&it.backgroundBlurriness!==void 0&&(it.backgroundBlurriness=nt),()=>{et!=="only"&&(it.environment=st),et&&(it.background=rt),et&&it.backgroundBlurriness!==void 0&&(it.backgroundBlurriness=ot)}}function EnvironmentMap({scene:et,background:_=!1,blur:_e,map:tt}){const nt=useThree(it=>it.scene);return reactExports.useLayoutEffect(()=>{if(tt)return setEnvProps(_,et,nt,tt,_e)},[nt,et,tt,_,_e]),null}function useEnvironment({files:et=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:_="",preset:_e=void 0,encoding:tt=void 0,extensions:nt}){if(_e){if(!(_e in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "));et=presetsObj[_e],_=CUBEMAP_ROOT}const it=Array.isArray(et),st=useLoader(it?CubeTextureLoader:RGBELoader,it?[et]:et,at=>{at.setPath(_),nt&&nt(at)}),ot=it?st[0]:st;return ot.mapping=it?CubeReflectionMapping:EquirectangularReflectionMapping,ot.encoding=tt??it?sRGBEncoding:LinearEncoding,ot}function EnvironmentCube({background:et=!1,scene:_,blur:_e,...tt}){const nt=useEnvironment(tt),it=useThree(rt=>rt.scene);return reactExports.useLayoutEffect(()=>setEnvProps(et,_,it,nt,_e),[nt,et,_,it,_e]),null}function EnvironmentPortal({children:et,near:_=1,far:_e=1e3,resolution:tt=256,frames:nt=1,map:it,background:rt=!1,blur:st,scene:ot,files:at,path:At,preset:lt=void 0,extensions:gt}){const ct=useThree(pt=>pt.gl),dt=useThree(pt=>pt.scene),ht=reactExports.useRef(null),[mt]=reactExports.useState(()=>new Scene),Ct=reactExports.useMemo(()=>{const pt=new WebGLCubeRenderTarget(tt);return pt.texture.type=HalfFloatType,pt},[tt]);reactExports.useLayoutEffect(()=>(nt===1&&ht.current.update(ct,mt),setEnvProps(rt,ot,dt,Ct.texture,st)),[et,mt,Ct.texture,ot,dt,rt,nt,ct]);let ft=1;return useFrame(()=>{(nt===1/0||ft<nt)&&(ht.current.update(ct,mt),ft++)}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,et,reactExports.createElement("cubeCamera",{ref:ht,args:[_,_e,Ct]}),at||lt?reactExports.createElement(EnvironmentCube,{background:!0,files:at,preset:lt,path:At,extensions:gt}):it?reactExports.createElement(EnvironmentMap,{background:!0,map:it,extensions:gt}):null),mt))}function EnvironmentGround(et){var _,_e,tt,nt;const it=useEnvironment(et),rt=et.map||it;reactExports.useMemo(()=>extend({GroundProjectedEnvImpl:GroundProjectedEnv}),[]);const st=reactExports.useMemo(()=>[rt],[rt]),ot=(_=et.ground)==null?void 0:_.height,at=(_e=et.ground)==null?void 0:_e.radius,At=(tt=(nt=et.ground)==null?void 0:nt.scale)!==null&&tt!==void 0?tt:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends({},et,{map:rt})),reactExports.createElement("groundProjectedEnvImpl",{args:st,scale:At,height:ot,radius:at}))}function Environment(et){return et.ground?reactExports.createElement(EnvironmentGround,et):et.map?reactExports.createElement(EnvironmentMap,et):et.children?reactExports.createElement(EnvironmentPortal,et):reactExports.createElement(EnvironmentCube,et)}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function et(tt,nt,it,rt,st,ot){if(ot!==ReactPropTypesSecret){var at=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw at.name="Invariant Violation",at}}et.isRequired=et;function _(){return et}var _e={array:et,bigint:et,bool:et,func:et,number:et,object:et,string:et,symbol:et,any:et,arrayOf:_,element:et,elementType:et,instanceOf:_,node:et,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return _e.PropTypes=_e,_e};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);PropTypes.func.isRequired,PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.element,PropTypes.func])).isRequired;const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;class PositionMesh extends Group{constructor(){super(),this.color=new Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var _;return(_=this.instance.current)==null?void 0:_.geometry}raycast(_,_e){const tt=this.instance.current;if(!tt||!tt.geometry||!tt.material)return;_mesh.geometry=tt.geometry;const nt=tt.matrixWorld,it=tt.userData.instances.indexOf(this.instanceKey);if(!(it===-1||it>tt.count)){tt.getMatrixAt(it,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(nt,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,tt.material instanceof Material?_mesh.material.side=tt.material.side:_mesh.material.side=tt.material[0].side,_mesh.raycast(_,_instanceIntersects);for(let rt=0,st=_instanceIntersects.length;rt<st;rt++){const ot=_instanceIntersects[rt];ot.instanceId=it,ot.object=this,_e.push(ot)}_instanceIntersects.length=0}}}const globalContext=reactExports.createContext(null),parentMatrix=new Matrix4,instanceMatrix=new Matrix4,tempMatrix=new Matrix4,translation=new Vector3,rotation=new Quaternion$2,scale=new Vector3,Instance=reactExports.forwardRef(({context:et,children:_,..._e},tt)=>{reactExports.useMemo(()=>extend({PositionMesh}),[]);const nt=reactExports.useRef(),{subscribe:it,getParent:rt}=reactExports.useContext(et||globalContext);return reactExports.useLayoutEffect(()=>it(nt),[]),reactExports.createElement("positionMesh",_extends({instance:rt(),instanceKey:nt,ref:mergeRefs([tt,nt])},_e),_)}),Instances=reactExports.forwardRef(({children:et,range:_,limit:_e=1e3,frames:tt=1/0,...nt},it)=>{const[{context:rt,instance:st}]=reactExports.useState(()=>{const mt=reactExports.createContext(null);return{context:mt,instance:reactExports.forwardRef((Ct,ft)=>reactExports.createElement(Instance,_extends({context:mt},Ct,{ref:ft})))}}),ot=reactExports.useRef(null),[at,At]=reactExports.useState([]),[[lt,gt]]=reactExports.useState(()=>{const mt=new Float32Array(_e*16);for(let Ct=0;Ct<_e;Ct++)tempMatrix.identity().toArray(mt,Ct*16);return[mt,new Float32Array([...new Array(_e*3)].map(()=>1))]});reactExports.useEffect(()=>{ot.current.instanceMatrix.needsUpdate=!0});let ct=0,dt=0;useFrame(()=>{if(tt===1/0||ct<tt){ot.current.updateMatrix(),ot.current.updateMatrixWorld(),parentMatrix.copy(ot.current.matrixWorld).invert(),dt=Math.min(_e,_!==void 0?_:_e,at.length),ot.current.count=dt,ot.current.instanceMatrix.updateRange.count=dt*16,ot.current.instanceColor.updateRange.count=dt*3;for(let mt=0;mt<at.length;mt++){const Ct=at[mt].current;Ct.matrixWorld.decompose(translation,rotation,scale),instanceMatrix.compose(translation,rotation,scale).premultiply(parentMatrix),instanceMatrix.toArray(lt,mt*16),ot.current.instanceMatrix.needsUpdate=!0,Ct.color.toArray(gt,mt*3),ot.current.instanceColor.needsUpdate=!0}ct++}});const ht=reactExports.useMemo(()=>({getParent:()=>ot,subscribe:mt=>(At(Ct=>[...Ct,mt]),()=>At(Ct=>Ct.filter(ft=>ft.current!==mt.current)))}),[]);return reactExports.createElement("instancedMesh",_extends({userData:{instances:at},matrixAutoUpdate:!1,ref:mergeRefs([it,ot]),args:[null,null,0],raycast:()=>null},nt),reactExports.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:lt.length/16,array:lt,itemSize:16,usage:DynamicDrawUsage}),reactExports.createElement("instancedBufferAttribute",{attach:"instanceColor",count:gt.length/3,array:gt,itemSize:3,usage:DynamicDrawUsage}),typeof et=="function"?reactExports.createElement(rt.Provider,{value:ht},et(st)):reactExports.createElement(globalContext.Provider,{value:ht},et))}),createStoreImpl=et=>{let _;const _e=new Set,tt=(ot,at)=>{const At=typeof ot=="function"?ot(_):ot;if(!Object.is(At,_)){const lt=_;_=at??typeof At!="object"?At:Object.assign({},_,At),_e.forEach(gt=>gt(_,lt))}},nt=()=>_,st={setState:tt,getState:nt,subscribe:ot=>(_e.add(ot),()=>_e.delete(ot)),destroy:()=>{({BASE_URL:"/circuit-rush/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),_e.clear()}};return _=et(tt,nt,st),st},createStore=et=>et?createStoreImpl(et):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=reactExports;function h$3(et,_){return et===_&&(et!==0||1/et===1/_)||et!==et&&_!==_}var k$1=typeof Object.is=="function"?Object.is:h$3,l$1=e$2.useState,m$2=e$2.useEffect,n$2=e$2.useLayoutEffect,p$2=e$2.useDebugValue;function q$4(et,_){var _e=_(),tt=l$1({inst:{value:_e,getSnapshot:_}}),nt=tt[0].inst,it=tt[1];return n$2(function(){nt.value=_e,nt.getSnapshot=_,r$2(nt)&&it({inst:nt})},[et,_e,_]),m$2(function(){return r$2(nt)&&it({inst:nt}),et(function(){r$2(nt)&&it({inst:nt})})},[et]),p$2(_e),_e}function r$2(et){var _=et.getSnapshot;et=et.value;try{var _e=_();return!k$1(et,_e)}catch{return!0}}function t$2(et,_){return _()}var u$2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$2:q$4;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u$2;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$2=reactExports,n$1=shimExports;function p$1(et,_){return et===_&&(et!==0||1/et===1/_)||et!==et&&_!==_}var q$3=typeof Object.is=="function"?Object.is:p$1,r$1=n$1.useSyncExternalStore,t$1=h$2.useRef,u$1=h$2.useEffect,v$3=h$2.useMemo,w$2=h$2.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(et,_,_e,tt,nt){var it=t$1(null);if(it.current===null){var rt={hasValue:!1,value:null};it.current=rt}else rt=it.current;it=v$3(function(){function ot(ct){if(!at){if(at=!0,At=ct,ct=tt(ct),nt!==void 0&&rt.hasValue){var dt=rt.value;if(nt(dt,ct))return lt=dt}return lt=ct}if(dt=lt,q$3(At,ct))return dt;var ht=tt(ct);return nt!==void 0&&nt(dt,ht)?dt:(At=ct,lt=ht)}var at=!1,At,lt,gt=_e===void 0?null:_e;return[function(){return ot(_())},gt===null?void 0:function(){return ot(gt())}]},[_,_e,tt,nt]);var st=r$1(et,it[0],it[1]);return u$1(function(){rt.hasValue=!0,rt.value=st},[st]),w$2(st),st};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;function useStore(et,_=et.getState,_e){const tt=useSyncExternalStoreWithSelector(et.subscribe,et.getState,et.getServerState||et.getState,_,_e);return reactExports.useDebugValue(tt),tt}const createImpl=et=>{({BASE_URL:"/circuit-rush/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof et!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const _=typeof et=="function"?createStore(et):et,_e=(tt,nt)=>useStore(_,tt,nt);return Object.assign(_e,_),_e},create=et=>et?createImpl(et):createImpl;var react=et=>(({BASE_URL:"/circuit-rush/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),create(et)),e$1="colors",t="sizes",r="space",n={gap:r,gridGap:r,columnGap:r,gridColumnGap:r,rowGap:r,gridRowGap:r,inset:r,insetBlock:r,insetBlockEnd:r,insetBlockStart:r,insetInline:r,insetInlineEnd:r,insetInlineStart:r,margin:r,marginTop:r,marginRight:r,marginBottom:r,marginLeft:r,marginBlock:r,marginBlockEnd:r,marginBlockStart:r,marginInline:r,marginInlineEnd:r,marginInlineStart:r,padding:r,paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r,paddingBlock:r,paddingBlockEnd:r,paddingBlockStart:r,paddingInline:r,paddingInlineEnd:r,paddingInlineStart:r,top:r,right:r,bottom:r,left:r,scrollMargin:r,scrollMarginTop:r,scrollMarginRight:r,scrollMarginBottom:r,scrollMarginLeft:r,scrollMarginX:r,scrollMarginY:r,scrollMarginBlock:r,scrollMarginBlockEnd:r,scrollMarginBlockStart:r,scrollMarginInline:r,scrollMarginInlineEnd:r,scrollMarginInlineStart:r,scrollPadding:r,scrollPaddingTop:r,scrollPaddingRight:r,scrollPaddingBottom:r,scrollPaddingLeft:r,scrollPaddingX:r,scrollPaddingY:r,scrollPaddingBlock:r,scrollPaddingBlockEnd:r,scrollPaddingBlockStart:r,scrollPaddingInline:r,scrollPaddingInlineEnd:r,scrollPaddingInlineStart:r,fontSize:"fontSizes",background:e$1,backgroundColor:e$1,backgroundImage:e$1,borderImage:e$1,border:e$1,borderBlock:e$1,borderBlockEnd:e$1,borderBlockStart:e$1,borderBottom:e$1,borderBottomColor:e$1,borderColor:e$1,borderInline:e$1,borderInlineEnd:e$1,borderInlineStart:e$1,borderLeft:e$1,borderLeftColor:e$1,borderRight:e$1,borderRightColor:e$1,borderTop:e$1,borderTopColor:e$1,caretColor:e$1,color:e$1,columnRuleColor:e$1,fill:e$1,outline:e$1,outlineColor:e$1,stroke:e$1,textDecorationColor:e$1,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t,minBlockSize:t,maxBlockSize:t,inlineSize:t,minInlineSize:t,maxInlineSize:t,width:t,minWidth:t,maxWidth:t,height:t,minHeight:t,maxHeight:t,flexBasis:t,gridTemplateColumns:t,gridTemplateRows:t,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i=(et,_)=>typeof _=="function"?{"()":Function.prototype.toString.call(_)}:_,o=()=>{const et=Object.create(null);return(_,_e,...tt)=>{const nt=(it=>JSON.stringify(it,i))(_);return nt in et?et[nt]:et[nt]=_e(_,...tt)}},l=Symbol.for("sxs.internal"),s$1=(et,_)=>Object.defineProperties(et,Object.getOwnPropertyDescriptors(_)),a$2=et=>{for(const _ in et)return!0;return!1},{hasOwnProperty:c$2}=Object.prototype,d=et=>et.includes("-")?et:et.replace(/[A-Z]/g,_=>"-"+_.toLowerCase()),g=/\s+(?![^()]*\))/,p=et=>_=>et(...typeof _=="string"?String(_).split(g):[_]),u={appearance:et=>({WebkitAppearance:et,appearance:et}),backfaceVisibility:et=>({WebkitBackfaceVisibility:et,backfaceVisibility:et}),backdropFilter:et=>({WebkitBackdropFilter:et,backdropFilter:et}),backgroundClip:et=>({WebkitBackgroundClip:et,backgroundClip:et}),boxDecorationBreak:et=>({WebkitBoxDecorationBreak:et,boxDecorationBreak:et}),clipPath:et=>({WebkitClipPath:et,clipPath:et}),content:et=>({content:et.includes('"')||et.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(et)?et:`"${et}"`}),hyphens:et=>({WebkitHyphens:et,hyphens:et}),maskImage:et=>({WebkitMaskImage:et,maskImage:et}),maskSize:et=>({WebkitMaskSize:et,maskSize:et}),tabSize:et=>({MozTabSize:et,tabSize:et}),textSizeAdjust:et=>({WebkitTextSizeAdjust:et,textSizeAdjust:et}),userSelect:et=>({WebkitUserSelect:et,userSelect:et}),marginBlock:p((et,_)=>({marginBlockStart:et,marginBlockEnd:_||et})),marginInline:p((et,_)=>({marginInlineStart:et,marginInlineEnd:_||et})),maxSize:p((et,_)=>({maxBlockSize:et,maxInlineSize:_||et})),minSize:p((et,_)=>({minBlockSize:et,minInlineSize:_||et})),paddingBlock:p((et,_)=>({paddingBlockStart:et,paddingBlockEnd:_||et})),paddingInline:p((et,_)=>({paddingInlineStart:et,paddingInlineEnd:_||et}))},h$1=/([\d.]+)([^]*)/,f=(et,_)=>et.length?et.reduce((_e,tt)=>(_e.push(..._.map(nt=>nt.includes("&")?nt.replace(/&/g,/[ +>|~]/.test(tt)&&/&.*&/.test(nt)?`:is(${tt})`:tt):tt+" "+nt)),_e),[]):_,m$1=(et,_)=>et in b$2&&typeof _=="string"?_.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(_e,tt,nt,it)=>tt+(nt==="stretch"?`-moz-available${it};${d(et)}:${tt}-webkit-fill-available`:`-moz-fit-content${it};${d(et)}:${tt}fit-content`)+it):String(_),b$2={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S=et=>et?et+"-":"",k=(et,_,_e)=>et.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(tt,nt,it,rt,st)=>rt=="$"==!!it?tt:(nt||rt=="--"?"calc(":"")+"var(--"+(rt==="$"?S(_)+(st.includes("$")?"":S(_e))+st.replace(/\$/g,"-"):st)+")"+(nt||rt=="--"?"*"+(nt||"")+(it||"1")+")":"")),y=/\s*,\s*(?![^()]*\))/,B=Object.prototype.toString,$=(et,_,_e,tt,nt)=>{let it,rt,st;const ot=(at,At,lt)=>{let gt,ct;const dt=ht=>{for(gt in ht){const ft=gt.charCodeAt(0)===64,pt=ft&&Array.isArray(ht[gt])?ht[gt]:[ht[gt]];for(ct of pt){const Vt=/[A-Z]/.test(Ct=gt)?Ct:Ct.replace(/-[^]/g,Gt=>Gt[1].toUpperCase()),yt=typeof ct=="object"&&ct&&ct.toString===B&&(!tt.utils[Vt]||!At.length);if(Vt in tt.utils&&!yt){const Gt=tt.utils[Vt];if(Gt!==rt){rt=Gt,dt(Gt(ct)),rt=null;continue}}else if(Vt in u){const Gt=u[Vt];if(Gt!==st){st=Gt,dt(Gt(ct)),st=null;continue}}if(ft&&(mt=gt.slice(1)in tt.media?"@media "+tt.media[gt.slice(1)]:gt,gt=mt.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(Gt,Bt,vt,wt,Mt,kt)=>{const Nt=h$1.test(Bt),Yt=.0625*(Nt?-1:1),[Lt,Xt]=Nt?[wt,Bt]:[Bt,wt];return"("+(vt[0]==="="?"":vt[0]===">"===Nt?"max-":"min-")+Lt+":"+(vt[0]!=="="&&vt.length===1?Xt.replace(h$1,(_t,Tt,St)=>Number(Tt)+Yt*(vt===">"?1:-1)+St):Xt)+(Mt?") and ("+(Mt[0]===">"?"min-":"max-")+Lt+":"+(Mt.length===1?kt.replace(h$1,(_t,Tt,St)=>Number(Tt)+Yt*(Mt===">"?-1:1)+St):kt):"")+")"})),yt){const Gt=ft?lt.concat(gt):[...lt],Bt=ft?[...At]:f(At,gt.split(y));it!==void 0&&nt(x(...it)),it=void 0,ot(ct,Bt,Gt)}else it===void 0&&(it=[[],At,lt]),gt=ft||gt.charCodeAt(0)!==36?gt:`--${S(tt.prefix)}${gt.slice(1).replace(/\$/g,"-")}`,ct=yt?ct:typeof ct=="number"?ct&&Vt in I?String(ct)+"px":String(ct):k(m$1(Vt,ct??""),tt.prefix,tt.themeMap[Vt]),it[0].push(`${ft?`${gt} `:`${d(gt)}:`}${ct}`)}}var mt,Ct};dt(at),it!==void 0&&nt(x(...it)),it=void 0};ot(et,_,_e)},x=(et,_,_e)=>`${_e.map(tt=>`${tt}{`).join("")}${_.length?`${_.join(",")}{`:""}${et.join(";")}${_.length?"}":""}${Array(_e.length?_e.length+1:0).join("}")}`,I={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R$1=et=>String.fromCharCode(et+(et>25?39:97)),z=et=>(_=>{let _e,tt="";for(_e=Math.abs(_);_e>52;_e=_e/52|0)tt=R$1(_e%52)+tt;return R$1(_e%52)+tt})(((_,_e)=>{let tt=_e.length;for(;tt;)_=33*_^_e.charCodeAt(--tt);return _})(5381,JSON.stringify(et))>>>0),W=["themed","global","styled","onevar","resonevar","allvar","inline"],j=et=>{if(et.href&&!et.href.startsWith(location.origin))return!1;try{return!!et.cssRules}catch{return!1}},E=et=>{let _;const _e=()=>{const{cssRules:nt}=_.sheet;return[].map.call(nt,(it,rt)=>{const{cssText:st}=it;let ot="";if(st.startsWith("--sxs"))return"";if(nt[rt-1]&&(ot=nt[rt-1].cssText).startsWith("--sxs")){if(!it.cssRules.length)return"";for(const at in _.rules)if(_.rules[at].group===it)return`--sxs{--sxs:${[..._.rules[at].cache].join(" ")}}${st}`;return it.cssRules.length?`${ot}${st}`:""}return st}).join("")},tt=()=>{if(_){const{rules:st,sheet:ot}=_;if(!ot.deleteRule){for(;Object(Object(ot.cssRules)[0]).type===3;)ot.cssRules.splice(0,1);ot.cssRules=[]}for(const at in st)delete st[at]}const nt=Object(et).styleSheets||[];for(const st of nt)if(j(st)){for(let ot=0,at=st.cssRules;at[ot];++ot){const At=Object(at[ot]);if(At.type!==1)continue;const lt=Object(at[ot+1]);if(lt.type!==4)continue;++ot;const{cssText:gt}=At;if(!gt.startsWith("--sxs"))continue;const ct=gt.slice(14,-3).trim().split(/\s+/),dt=W[ct[0]];dt&&(_||(_={sheet:st,reset:tt,rules:{},toString:_e}),_.rules[dt]={group:lt,index:ot,cache:new Set(ct)})}if(_)break}if(!_){const st=(ot,at)=>({type:at,cssRules:[],insertRule(At,lt){this.cssRules.splice(lt,0,st(At,{import:3,undefined:1}[(At.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return ot==="@media{}"?`@media{${[].map.call(this.cssRules,At=>At.cssText).join("")}}`:ot}});_={sheet:et?(et.head||et).appendChild(document.createElement("style")).sheet:st("","text/css"),rules:{},reset:tt,toString:_e}}const{sheet:it,rules:rt}=_;for(let st=W.length-1;st>=0;--st){const ot=W[st];if(!rt[ot]){const at=W[st+1],At=rt[at]?rt[at].index:it.cssRules.length;it.insertRule("@media{}",At),it.insertRule(`--sxs{--sxs:${st}}`,At),rt[ot]={group:it.cssRules[At+1],index:At,cache:new Set([st])}}v$2(rt[ot])}};return tt(),_},v$2=et=>{const _=et.group;let _e=_.cssRules.length;et.apply=tt=>{try{_.insertRule(tt,_e),++_e}catch{}}},T=Symbol(),w$1=o(),M=(et,_)=>w$1(et,()=>(..._e)=>{let tt={type:null,composers:new Set};for(const nt of _e)if(nt!=null)if(nt[l]){tt.type==null&&(tt.type=nt[l].type);for(const it of nt[l].composers)tt.composers.add(it)}else nt.constructor!==Object||nt.$$typeof?tt.type==null&&(tt.type=nt):tt.composers.add(C(nt,et));return tt.type==null&&(tt.type="span"),tt.composers.size||tt.composers.add(["PJLV",{},[],[],{},[]]),P(et,tt,_)}),C=({variants:et,compoundVariants:_,defaultVariants:_e,...tt},nt)=>{const it=`${S(nt.prefix)}c-${z(tt)}`,rt=[],st=[],ot=Object.create(null),at=[];for(const gt in _e)ot[gt]=String(_e[gt]);if(typeof et=="object"&&et)for(const gt in et){At=ot,lt=gt,c$2.call(At,lt)||(ot[gt]="undefined");const ct=et[gt];for(const dt in ct){const ht={[gt]:String(dt)};String(dt)==="undefined"&&at.push(gt);const mt=ct[dt],Ct=[ht,mt,!a$2(mt)];rt.push(Ct)}}var At,lt;if(typeof _=="object"&&_)for(const gt of _){let{css:ct,...dt}=gt;ct=typeof ct=="object"&&ct||{};for(const mt in dt)dt[mt]=String(dt[mt]);const ht=[dt,ct,!a$2(ct)];st.push(ht)}return[it,tt,rt,st,ot,at]},P=(et,_,_e)=>{const[tt,nt,it,rt]=L(_.composers),st=typeof _.type=="function"||_.type.$$typeof?(lt=>{function gt(){for(let ct=0;ct<gt[T].length;ct++){const[dt,ht]=gt[T][ct];lt.rules[dt].apply(ht)}return gt[T]=[],null}return gt[T]=[],gt.rules={},W.forEach(ct=>gt.rules[ct]={apply:dt=>gt[T].push([ct,dt])}),gt})(_e):null,ot=(st||_e).rules,at=`.${tt}${nt.length>1?`:where(.${nt.slice(1).join(".")})`:""}`,At=lt=>{lt=typeof lt=="object"&&lt||A;const{css:gt,...ct}=lt,dt={};for(const Ct in it)if(delete ct[Ct],Ct in lt){let ft=lt[Ct];typeof ft=="object"&&ft?dt[Ct]={"@initial":it[Ct],...ft}:(ft=String(ft),dt[Ct]=ft!=="undefined"||rt.has(Ct)?ft:it[Ct])}else dt[Ct]=it[Ct];const ht=new Set([...nt]);for(const[Ct,ft,pt,Vt]of _.composers){_e.rules.styled.cache.has(Ct)||(_e.rules.styled.cache.add(Ct),$(ft,[`.${Ct}`],[],et,Bt=>{ot.styled.apply(Bt)}));const yt=O(pt,dt,et.media),Gt=O(Vt,dt,et.media,!0);for(const Bt of yt)if(Bt!==void 0)for(const[vt,wt,Mt]of Bt){const kt=`${Ct}-${z(wt)}-${vt}`;ht.add(kt);const Nt=(Mt?_e.rules.resonevar:_e.rules.onevar).cache,Yt=Mt?ot.resonevar:ot.onevar;Nt.has(kt)||(Nt.add(kt),$(wt,[`.${kt}`],[],et,Lt=>{Yt.apply(Lt)}))}for(const Bt of Gt)if(Bt!==void 0)for(const[vt,wt]of Bt){const Mt=`${Ct}-${z(wt)}-${vt}`;ht.add(Mt),_e.rules.allvar.cache.has(Mt)||(_e.rules.allvar.cache.add(Mt),$(wt,[`.${Mt}`],[],et,kt=>{ot.allvar.apply(kt)}))}}if(typeof gt=="object"&&gt){const Ct=`${tt}-i${z(gt)}-css`;ht.add(Ct),_e.rules.inline.cache.has(Ct)||(_e.rules.inline.cache.add(Ct),$(gt,[`.${Ct}`],[],et,ft=>{ot.inline.apply(ft)}))}for(const Ct of String(lt.className||"").trim().split(/\s+/))Ct&&ht.add(Ct);const mt=ct.className=[...ht].join(" ");return{type:_.type,className:mt,selector:at,props:ct,toString:()=>mt,deferredInjector:st}};return s$1(At,{className:tt,selector:at,[l]:_,toString:()=>(_e.rules.styled.cache.has(tt)||At(),tt)})},L=et=>{let _="";const _e=[],tt={},nt=[];for(const[it,,,,rt,st]of et){_===""&&(_=it),_e.push(it),nt.push(...st);for(const ot in rt){const at=rt[ot];(tt[ot]===void 0||at!=="undefined"||st.includes(at))&&(tt[ot]=at)}}return[_,_e,tt,new Set(nt)]},O=(et,_,_e,tt)=>{const nt=[];e:for(let[it,rt,st]of et){if(st)continue;let ot,at=0,At=!1;for(ot in it){const lt=it[ot];let gt=_[ot];if(gt!==lt){if(typeof gt!="object"||!gt)continue e;{let ct,dt,ht=0;for(const mt in gt){if(lt===String(gt[mt])){if(mt!=="@initial"){const Ct=mt.slice(1);(dt=dt||[]).push(Ct in _e?_e[Ct]:mt.replace(/^@media ?/,"")),At=!0}at+=ht,ct=!0}++ht}if(dt&&dt.length&&(rt={["@media "+dt.join(", ")]:rt}),!ct)continue e}}}(nt[at]=nt[at]||[]).push([tt?"cv":`${ot}-${it[ot]}`,rt,At])}return nt},A={},N=o(),D=(et,_)=>N(et,()=>(..._e)=>{const tt=()=>{for(let nt of _e){nt=typeof nt=="object"&&nt||{};let it=z(nt);if(!_.rules.global.cache.has(it)){if(_.rules.global.cache.add(it),"@import"in nt){let rt=[].indexOf.call(_.sheet.cssRules,_.rules.themed.group)-1;for(let st of[].concat(nt["@import"]))st=st.includes('"')||st.includes("'")?st:`"${st}"`,_.sheet.insertRule(`@import ${st};`,rt++);delete nt["@import"]}$(nt,[],[],et,rt=>{_.rules.global.apply(rt)})}}return""};return s$1(tt,{toString:tt})}),H=o(),V=(et,_)=>H(et,()=>_e=>{const tt=`${S(et.prefix)}k-${z(_e)}`,nt=()=>{if(!_.rules.global.cache.has(tt)){_.rules.global.cache.add(tt);const it=[];$(_e,[],[],et,st=>it.push(st));const rt=`@keyframes ${tt}{${it.join("")}}`;_.rules.global.apply(rt)}return tt};return s$1(nt,{get name(){return nt()},toString:nt})}),G=class{constructor(et,_,_e,tt){this.token=et==null?"":String(et),this.value=_==null?"":String(_),this.scale=_e==null?"":String(_e),this.prefix=tt==null?"":String(tt)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S(this.prefix)+S(this.scale)+this.token}toString(){return this.computedValue}},F=o(),J=(et,_)=>F(et,()=>(_e,tt)=>{tt=typeof _e=="object"&&_e||Object(tt);const nt=`.${_e=(_e=typeof _e=="string"?_e:"")||`${S(et.prefix)}t-${z(tt)}`}`,it={},rt=[];for(const ot in tt){it[ot]={};for(const at in tt[ot]){const At=`--${S(et.prefix)}${ot}-${at}`,lt=k(String(tt[ot][at]),et.prefix,ot);it[ot][at]=new G(at,lt,ot,et.prefix),rt.push(`${At}:${lt}`)}}const st=()=>{if(rt.length&&!_.rules.themed.cache.has(_e)){_.rules.themed.cache.add(_e);const ot=`${tt===et.theme?":root,":""}.${_e}{${rt.join(";")}}`;_.rules.themed.apply(ot)}return _e};return{...it,get className(){return st()},selector:nt,toString:st}}),U=o(),X,Y=o(),q$2=et=>{const _=(_e=>{let tt=!1;const nt=U(_e,it=>{tt=!0;const rt="prefix"in(it=typeof it=="object"&&it||{})?String(it.prefix):"",st=typeof it.media=="object"&&it.media||{},ot=typeof it.root=="object"?it.root||null:globalThis.document||null,at=typeof it.theme=="object"&&it.theme||{},At={prefix:rt,media:st,theme:at,themeMap:typeof it.themeMap=="object"&&it.themeMap||{...n},utils:typeof it.utils=="object"&&it.utils||{}},lt=E(ot),gt={css:M(At,lt),globalCss:D(At,lt),keyframes:V(At,lt),createTheme:J(At,lt),reset(){lt.reset(),gt.theme.toString()},theme:{},sheet:lt,config:At,prefix:rt,getCssText:lt.toString,toString:lt.toString};return String(gt.theme=gt.createTheme(at)),gt});return tt||nt.reset(),nt})(et);return _.styled=(({config:_e,sheet:tt})=>Y(_e,()=>{const nt=M(_e,tt);return(...it)=>{const rt=nt(...it),st=rt[l].type,ot=React.forwardRef((at,At)=>{const lt=at&&at.as||st,{props:gt,deferredInjector:ct}=rt(at);return delete gt.as,gt.ref=At,ct?React.createElement(React.Fragment,null,React.createElement(lt,gt),React.createElement(ct,null)):React.createElement(lt,gt)});return ot.className=rt.className,ot.displayName=`Styled.${st.displayName||st.name||st}`,ot.selector=rt.selector,ot.toString=()=>rt.selector,ot[l]=rt[l],ot}}))(_),_},K=()=>X||(X=q$2()),re=(...et)=>K().styled(...et);function _objectWithoutPropertiesLoose$2(et,_){if(et==null)return{};var _e={},tt=Object.keys(et),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(_e[nt]=et[nt]);return _e}var _excluded$1$1=["color"],ActivityLogIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$1$1);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$o=["color"],BarChartIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$o);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$H=["color"],ButtonIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$H);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1w=["color"],CubeIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$1w);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1H=["color"],DotIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$1H);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1W=["color"],DropdownMenuIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$1W);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$25=["color"],EyeNoneIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$25);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$26=["color"],EyeOpenIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$26);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$2C=["color"],ImageIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$2C);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$2H=["color"],LapTimerIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$2H);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$2J=["color"],LayersIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$2J);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$2Q=["color"],LightningBoltIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$2Q);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$34=["color"],MarginIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$34);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$37=["color"],MinusIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$37);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$3m=["color"],PauseIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$3m);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$3H=["color"],RocketIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$3H);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$3L=["color"],RulerHorizontalIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$3L);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$4q=["color"],TextAlignJustifyIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$4q);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$4H=["color"],TriangleDownIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$4H);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:tt}))}),_excluded$4K=["color"],TriangleUpIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$4K);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:tt}))}),_excluded$4R=["color"],VercelLogoIcon=reactExports.forwardRef(function(et,_){var _e=et.color,tt=_e===void 0?"currentColor":_e,nt=_objectWithoutPropertiesLoose$2(et,_excluded$4R);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt,{ref:_}),reactExports.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:tt,fillRule:"evenodd",clipRule:"evenodd"}))});function _toPrimitive$1(et,_){if(typeof et!="object"||et===null)return et;var _e=et[Symbol.toPrimitive];if(_e!==void 0){var tt=_e.call(et,_||"default");if(typeof tt!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(et)}function _toPropertyKey$1(et){var _=_toPrimitive$1(et,"string");return typeof _=="symbol"?_:String(_)}function _defineProperty$1(et,_,_e){return _=_toPropertyKey$1(_),_ in et?Object.defineProperty(et,_,{value:_e,enumerable:!0,configurable:!0,writable:!0}):et[_]=_e,et}function ownKeys$1(et,_){var _e=Object.keys(et);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(et);_&&(tt=tt.filter(function(nt){return Object.getOwnPropertyDescriptor(et,nt).enumerable})),_e.push.apply(_e,tt)}return _e}function _objectSpread2$1(et){for(var _=1;_<arguments.length;_++){var _e=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(_e),!0).forEach(function(tt){_defineProperty$1(et,tt,_e[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(_e)):ownKeys$1(Object(_e)).forEach(function(tt){Object.defineProperty(et,tt,Object.getOwnPropertyDescriptor(_e,tt))})}return et}const overLimitFps={value:0,fpsLimit:60,isOverLimit:0},average=et=>(et==null?void 0:et.reduce((_,_e)=>_+_e,0))/et.length;class GLPerf{constructor(_={}){this.names=[""],this.finished=[],this.gl=void 0,this.extension=void 0,this.query=void 0,this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,_),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=MathUtils.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let _=0;const _e=tt=>{++_<20?this.rafId=window.requestAnimationFrame(_e):(this.detected=Math.ceil(1e3*_/(tt-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=tt)};this.rafId=window.requestAnimationFrame(_e)}addUI(_){this.names.indexOf(_)===-1&&(this.names.push(_),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(_){const _e=16.666666666666668,tt=_e-_.timeRemaining(),nt=_e*overLimitFps.fpsLimit/10/tt;nt<0||(overLimitFps.value=nt,overLimitFps.isOverLimit<25?overLimitFps.isOverLimit++:usePerfStore.setState({overclockingFps:!0}))}nextFrame(_){this.frameId++;const _e=_||this.now();let tt=_e-this.paramTime,nt=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=_e;else if(_e>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const it=this.frameId-this.paramFrame,rt=it*1e3/tt,st=usePerfStore.getState().overclockingFps?overLimitFps.value:rt;if(nt=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/tt,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const ot=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=ot.duration,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(rt),this.logsAccums.fps.push(st),this.logsAccums.gpu.push(nt),this.overClock&&typeof window.requestIdleCallback<"u"&&(overLimitFps.isOverLimit>0&&st>rt?overLimitFps.isOverLimit--:usePerfStore.getState().overclockingFps&&usePerfStore.setState({overclockingFps:!1})),_e>=this.paramTime+180&&(this.paramLogger({cpu:average(this.logsAccums.cpu),gpu:average(this.logsAccums.gpu),mem:average(this.logsAccums.mem),fps:average(this.logsAccums.fps),duration:Math.round(tt),maxMemory:this.maxMemory,frameCount:it}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=_e),this.overClock&&_e-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=_,overLimitFps.fpsLimit=Math.round(average(this.logsAccums.fpsFixed)/10)*100,usePerfStore.setState({fpsLimit:overLimitFps.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=_e)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=_e,this.circularId=0;else{const it=_e-this.chartTime;let rt=this.chartHz*it/1e3;for(;--rt>0&&this.detected;){const ot=(this.frameId-this.chartFrame)/it*1e3,at=usePerfStore.getState().overclockingFps?overLimitFps.value:ot;this.fpsChart[this.circularId%this.chartLen]=at;const At=1e3/this.currentMem,lt=this.currentCpu,gt=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/tt*100))+4;gt>0&&(this.gpuChart[this.circularId%this.chartLen]=gt),lt>0&&(this.cpuChart[this.circularId%this.chartLen]=lt),At>0&&(this.memChart[this.circularId%this.chartLen]=At);for(let ct=0;ct<this.names.length;ct++)this.chartLogger({i:ct,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=_e}}}startGpu(){const _=this.gl,_e=this.extension;if(!(!_||!_e)&&this.isWebGL2){let tt=!1,nt,it;if(this.query){this.queryHasResult=!1;let rt=this.query;if(tt=_.getQueryParameter(rt,_.QUERY_RESULT_AVAILABLE),nt=_.getParameter(_e.GPU_DISJOINT_EXT),tt&&!nt){it=_.getQueryParameter(this.query,_.QUERY_RESULT);const st=it*1e-6;tt&&st>0&&(nt||this.activeAccums.forEach((ot,at)=>{this.gpuAccums[at]=st}))}}(tt||!this.query)&&(this.queryCreated=!0,this.query=_.createQuery(),_.beginQuery(_e.TIME_ELAPSED_EXT,this.query))}}endGpu(){const _=this.extension,_e=this.gl;this.isWebGL2&&this.queryCreated&&_e.getQuery(_.TIME_ELAPSED_EXT,_e.CURRENT_QUERY)&&_e.endQuery(_.TIME_ELAPSED_EXT)}begin(_){this.startGpu(),this.updateAccums(_)}end(_){this.endGpu(),this.updateAccums(_)}updateAccums(_){let _e=this.names.indexOf(_);_e===-1&&(_e=this.names.length,this.addUI(_));const tt=this.now();this.activeAccums[_e]=!this.activeAccums[_e],this.t0=tt}}const countGeoDrawCalls=et=>{et.forEach((_,_e)=>{const{meshes:tt}=_;if(!tt)return;let nt={total:0,type:"Triangle",data:[]};Object.keys(tt).forEach(it=>{const rt=tt[it],{geometry:st,material:ot}=rt;let at=st.index;const At=st.attributes.position;if(!At)return;let lt=1;ot.wireframe===!0&&(lt=0);const gt=at!==null?at.count:At.count,ct=st.drawRange.start*lt,dt=st.drawRange.count*lt,ht=ct,mt=Math.min(gt,ct+dt)-1;let Ct=1;const ft=rt.count||1;let pt="Triangle",Vt=0;rt.isMesh?ot.wireframe===!0?(pt="Line",Ct=Ct/2):(pt="Triangle",Ct=Ct/3):rt.isLine?(pt="Line",rt.isLineSegments?Ct=Ct/2:rt.isLineLoop?Ct=Ct:Ct=Ct-1):rt.isPoints?(pt="Point",Ct=Ct):rt.isSprite&&(pt="Triangle",Ct=Ct/3);const yt=Math.round(Math.max(0,mt-ht+1)*(Ct*ft));yt>Vt&&(Vt=yt,nt.type=pt),nt.total+=yt,nt.data.push({drawCount:yt,type:pt}),rt.userData.drawCount={type:pt,count:yt}}),_.drawCounts=nt})},updateMatrixWorldTemp=Object3D.prototype.updateMatrixWorld,updateWorldMatrixTemp=Object3D.prototype.updateWorldMatrix,updateMatrixTemp=Object3D.prototype.updateMatrix;let matriceWorldCount={value:0},matriceCount={value:0};const isUUID=et=>{let _=""+et;return _=_.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),_!==null},addMuiPerfID=(et,_)=>{et.defines||(et.defines={}),et.defines&&!et.defines.muiPerf&&(et.defines=Object.assign(et.defines||{},{muiPerf:et.uuid}));const _e=et.uuid;return _[_e]||(_[_e]={meshes:{},material:et},et.needsUpdate=!0),et.needsUpdate=!1,_e},getMUIIndex=et=>et==="muiPerf",usePerfStore=react(et=>({log:null,paused:!1,triggerProgramsUpdate:0,customData:0,fpsLimit:60,overclockingFps:!1,chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos"})),Headless=({trackCPU:et,overClock:_,chart:_e,deepAnalyze:tt,matrixUpdate:nt})=>{const{gl:it,scene:rt}=useThree();usePerfStore.setState({gl:it,scene:rt});const st=reactExports.useMemo(()=>{const ot=new GLPerf({trackGPU:!0,overClock:_,chartLen:_e?_e.length:120,chartHz:_e?_e.hz:60,gl:it.getContext(),chartLogger:lt=>{usePerfStore.setState({chart:lt})},paramLogger:lt=>{usePerfStore.setState({log:{maxMemory:lt.maxMemory,gpu:lt.gpu,cpu:lt.cpu,mem:lt.mem,fps:lt.fps,totalTime:lt.duration,frameCount:lt.frameCount}})}}),at=new Map,At=new Map;return Object.defineProperty(Scene.prototype,"onBeforeRender",{get(){return(...lt)=>{var gt;ot&&ot.begin("profiler"),(gt=at.get(this))===null||gt===void 0||gt(...lt)}},set(lt){at.set(this,lt)},configurable:!0}),Object.defineProperty(Scene.prototype,"onAfterRender",{get(){return(...lt)=>{var gt;ot&&ot.end("profiler"),(gt=At.get(this))===null||gt===void 0||gt(...lt)}},set(lt){At.set(this,lt)},configurable:!0}),ot},[]);return reactExports.useEffect(()=>{st&&(st.overClock=_||!1,_===!1&&(usePerfStore.setState({overclockingFps:!1}),overLimitFps.value=0,overLimitFps.isOverLimit=0),st.chartHz=(_e==null?void 0:_e.hz)||60,st.chartLen=(_e==null?void 0:_e.length)||120)},[_,st,_e==null?void 0:_e.length,_e==null?void 0:_e.hz]),reactExports.useEffect(()=>{nt&&(Object3D.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&matriceWorldCount.value++,updateMatrixWorldTemp.apply(this,arguments)},Object3D.prototype.updateWorldMatrix=function(){matriceWorldCount.value++,updateWorldMatrixTemp.apply(this,arguments)},Object3D.prototype.updateMatrix=function(){matriceCount.value++,updateMatrixTemp.apply(this,arguments)}),it.info.autoReset=!1;let ot=null,at=null;if(it.info)return ot=addEffect(function(){usePerfStore.getState().paused&&usePerfStore.setState({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),st.startCpuProfiling=!0),matriceCount.value-=1,matriceWorldCount.value=0,matriceCount.value=0,it.info&&it.info.reset()}),at=addAfterEffect(function(){if(st&&!st.paused&&(st.nextFrame(window.performance.now()),_&&typeof window.requestIdleCallback<"u"&&(st.idleCbId=requestIdleCallback(st.nextFps))),tt){var lt,gt;const ct={},dt=new Map;rt.traverse(function(mt){if((mt instanceof Mesh||mt instanceof Points)&&mt.material){let Ct=mt.material.uuid;Array.isArray(mt.material)&&mt.material.length>1?Ct=addMuiPerfID(mt.material[1],ct):Ct=addMuiPerfID(mt.material,ct),ct[Ct].meshes[mt.uuid]=mt}}),it==null||(lt=it.info)===null||lt===void 0||(gt=lt.programs)===null||gt===void 0||gt.forEach(ht=>{const mt=ht.cacheKey.split(","),Ct=mt[mt.findIndex(getMUIIndex)+1];if(isUUID(Ct)&&ct[Ct]){const{material:ft,meshes:pt}=ct[Ct];dt.set(Ct,{program:ht,material:ft,meshes:pt,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),dt.size!==usePerfStore.getState().programs.size&&(countGeoDrawCalls(dt),usePerfStore.setState({programs:dt,triggerProgramsUpdate:usePerfStore.getState().triggerProgramsUpdate++}))}}),()=>{st&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(st.idleCbId),window.cancelAnimationFrame(st.rafId),window.cancelAnimationFrame(st.checkQueryId)),nt&&(Object3D.prototype.updateMatrixWorld=updateMatrixTemp),ot(),at()}},[st,it,et,_e,nt]),reactExports.useEffect(()=>{const ot=addTail(function(){return st&&(st.paused=!0,matriceCount.value=0,matriceWorldCount.value=0,usePerfStore.setState({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{ot()}},[]),null},PerfS=re("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),PerfSmallI=re("small",{position:"absolute",right:0,fontSize:"10px"}),PerfI=re("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),PerfB=re("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),PerfIContainer=re("div",{display:"flex"}),ProgramHeader=re("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),Graph=re("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),Graphpc=re("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),Toggle=re("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),ToggleVisible=re("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),ProgramGeo=re("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),ProgramTitle=re("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),ContainerScroll=re("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),ProgramsContainer=re("div",{marginTop:"0"}),ProgramsULHeader=re("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),ProgramsUL=re("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),ProgramConsole=re("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),ToggleContainer=re("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),ProgramsGeoLi=re("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}}),TextHighHZ=reactExports.memo(({isPerf:et,color:_,colorBlind:_e,customData:tt,isMemory:nt,isShadersInfo:it,metric:rt,fontSize:st,offsetY:ot=0,offsetX:at,round:At,hasInstance:lt})=>{const{width:gt,height:ct}=useThree(mt=>mt.viewport),dt=reactExports.useRef(null),ht=reactExports.useRef(null);return useFrame(function(){const Ct=usePerfStore.getState().gl,ft=usePerfStore.getState().log;if(!ft||!dt.current||(tt&&(dt.current.text=usePerfStore.getState().customData),!rt))return;let pt=ft[rt];if(it){var Vt;pt=(Vt=Ct.info.programs)===null||Vt===void 0?void 0:Vt.length}else rt==="matriceCount"?pt=matriceCount.value:!et&&Ct.info.render&&(pt=(nt?Ct.info.memory:Ct.info.render)[rt]);if(rt==="fps"&&(dt.current.color=usePerfStore.getState().overclockingFps?colorsGraph(_e).overClock.toString():`rgb(${colorsGraph(_e).fps.toString()})`),dt.current.text=(Math.round(pt*Math.pow(10,At))/Math.pow(10,At)).toFixed(At),lt){const yt=Ct.info.instance;if(typeof yt>"u"&&rt!=="matriceCount")return;let Gt;rt==="matriceCount"?Gt=matriceWorldCount.value:Gt=yt[rt],Gt>0?(dt.current.fontSize=st/1.15,ht.current.fontSize=pt>0?st/1.4:st,dt.current.position.y=ct/2-ot-st/1.9,ht.current.text=" ±	"+(Math.round(Gt*Math.pow(10,At))/Math.pow(10,At)).toFixed(At)):(dt.current.position.y=ct/2-ot-st,dt.current.fontSize=st)}matriceCount.value-=1,dt.current.updateMatrix(),dt.current.matrixWorld.copy(dt.current.matrix)}),jsxs(reactExports.Suspense,{fallback:null,children:[jsxs(Text,{textAlign:"justify",matrixAutoUpdate:!1,ref:dt,fontSize:st,position:[-gt/2+at+st,ct/2-ot-st,0],color:_,characters:"0123456789",onUpdate:mt=>{mt.updateMatrix(),matriceCount.value-=1,mt.matrixWorld.copy(mt.matrix)},children:[jsx("meshBasicMaterial",{blending:NormalBlending}),"0"]}),lt&&jsx(Text,{textAlign:"justify",matrixAutoUpdate:!1,ref:ht,fontSize:8,position:[-gt/2+at+st,ct/2-ot-st*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:mt=>{mt.updateMatrix(),matriceCount.value-=1,mt.matrixWorld.copy(mt.matrix)},children:jsx("meshBasicMaterial",{blending:NormalBlending})})]})}),TextsHighHZ=({colorBlind:et,customData:_,minimal:_e,matrixUpdate:tt})=>jsxs(Fragment,{children:[jsx(TextHighHZ,{colorBlind:et,color:`rgb(${colorsGraph(et).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),jsx(TextHighHZ,{color:`rgb(${colorsGraph(et).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),jsx(TextHighHZ,{color:`rgb(${colorsGraph(et).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),_e?null:jsxs(Fragment,{children:[jsx(TextHighHZ,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),jsx(TextHighHZ,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),jsx(TextHighHZ,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),jsx(TextHighHZ,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),jsx(TextHighHZ,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),jsx(TextHighHZ,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),jsx(TextHighHZ,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),tt&&jsx(TextHighHZ,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),_&&jsx(TextHighHZ,{color:`rgb(${colorsGraph(et).custom.toString()})`,customData:_,fontSize:14,offsetY:0,offsetX:_e?200:320,round:0})]}),ChartCurve=({colorBlind:et,minimal:_,chart:_e={length:30,hz:15}})=>{const tt=reactExports.useMemo(()=>({fps:new Float32Array(_e.length*3),cpu:new Float32Array(_e.length*3),gpu:new Float32Array(_e.length*3)}),[_e]),nt=reactExports.useRef(null),it=reactExports.useRef(null),rt=reactExports.useRef(null),st=reactExports.useRef(null),ot=reactExports.useMemo(()=>new Vector3(0,0,0),[]),at=(At,lt=1,gt,ct)=>{let dt=0;const{width:ht,height:mt}=ct,Ct=usePerfStore.getState().chart.data[At];if(!Ct||Ct.length===0)return;const ft=_?2:6,pt=_?12:50;let Vt=Ct.length;for(let yt=0;yt<Vt;yt++){let Gt=(usePerfStore.getState().chart.circularId+yt+1)%Vt;Ct[Gt]!==void 0&&(Ct[Gt]>dt&&(dt=Ct[Gt]*lt),ot.set(ft+yt/(Vt-1)*(ht-ft*2)-ht/2,Math.min(100,Ct[Gt])*lt/100*(mt-ft*2-pt)-mt/2,0),ot.toArray(gt.attributes.position.array,yt*3))}gt.attributes.position.needsUpdate=!0};return useFrame(function({viewport:lt}){at("fps",1,nt.current,lt),it.current&&it.current.color.set(usePerfStore.getState().overclockingFps?colorsGraph(et).overClock.toString():`rgb(${colorsGraph(et).fps.toString()})`),at("gpu",5,rt.current,lt),at("cpu",5,st.current,lt)}),jsxs(Fragment,{children:[jsxs("line",{children:[jsx("bufferGeometry",{ref:nt,children:jsx("bufferAttribute",{attach:"attributes-position",count:_e.length,array:tt.fps,itemSize:3,usage:DynamicDrawUsage,needsUpdate:!0})}),jsx("lineBasicMaterial",{ref:it,color:`rgb(${colorsGraph(et).fps.toString()})`,transparent:!0,opacity:.5})]}),jsxs("line",{children:[jsx("bufferGeometry",{ref:rt,children:jsx("bufferAttribute",{attach:"attributes-position",count:_e.length,array:tt.gpu,itemSize:3,usage:DynamicDrawUsage,needsUpdate:!0})}),jsx("lineBasicMaterial",{color:`rgb(${colorsGraph(et).gpu.toString()})`,transparent:!0,opacity:.5})]}),jsxs("line",{children:[jsx("bufferGeometry",{ref:st,children:jsx("bufferAttribute",{attach:"attributes-position",count:_e.length,array:tt.cpu,itemSize:3,usage:DynamicDrawUsage,needsUpdate:!0})}),jsx("lineBasicMaterial",{color:`rgb(${colorsGraph(et).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},ChartUI=({colorBlind:et,chart:_,customData:_e,matrixUpdate:tt,showGraph:nt=!0,antialias:it=!0,minimal:rt})=>{const st=reactExports.useRef(void 0),ot=usePerfStore(at=>at.paused);return jsxs(Graph,{style:{display:"flex",position:"absolute",height:`${rt?37:nt?100:60}px`,minWidth:`${rt?"100px":_e?"370px":"310px"}`},children:[jsx(Canvas,{ref:st,orthographic:!0,dpr:it?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:at})=>{at.traverse(At=>{At.matrixWorldAutoUpdate=!1,At.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${rt?37:nt?100:60}px`},children:ot?null:jsxs(Fragment,{children:[jsx(Renderer,{}),jsx(TextsHighHZ,{customData:_e,minimal:rt,matrixUpdate:tt}),nt&&jsx(ChartCurve,{colorBlind:et,minimal:rt,chart:_})]})}),ot&&jsxs(Graphpc,{children:[jsx(PauseIcon,{})," PAUSED"]})]})},Renderer=()=>(useFrame(function({gl:_,scene:_e,camera:tt}){tt.updateMatrix(),matriceCount.value-=1,tt.matrixWorld.copy(tt.matrix),tt.matrixWorldInverse.copy(tt.matrixWorld).invert(),_.render(_e,tt),matriceWorldCount.value=0,matriceCount.value=0},1/0),null);function _objectWithoutPropertiesLoose$1(et,_){if(et==null)return{};var _e={},tt=Object.keys(et),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(_e[nt]=et[nt]);return _e}function _objectWithoutProperties$1(et,_){if(et==null)return{};var _e=_objectWithoutPropertiesLoose$1(et,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,tt)&&(_e[tt]=et[tt])}return _e}const _excluded$2=["portal","className","children"],Html=reactExports.forwardRef((et,_)=>{let{portal:_e,className:tt,children:nt}=et,it=_objectWithoutProperties$1(et,_excluded$2);const rt=useThree(At=>At.gl),st=reactExports.useRef(null),ot=reactExports.useRef(null),at=(_e==null?void 0:_e.current)!=null?_e.current:rt.domElement.parentNode;return reactExports.useLayoutEffect(()=>{if(!st.current||!at)return;const At=document.createElement("div"),lt=ot.current=createRoot(At);return at.appendChild(At),()=>{lt.unmount(),ot.current=null,at.removeChild(At)}},[at]),reactExports.useLayoutEffect(()=>{const At=ot.current;At&&At.render(jsx("div",{ref:_,className:tt,children:nt}))}),jsx("group",_objectSpread2$1(_objectSpread2$1({},it),{},{ref:st}))}),addTextureUniforms=(et,_)=>{const _e=nt=>{switch(nt){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},tt=nt=>{switch(nt){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:et,url:_.image.currentSrc,encoding:tt(_.encoding),wrapT:_e(_.image.wrapT),flipY:_.flipY.toString()}},UniformsGL=({program:et,material:_,setTexNumber:_e})=>{const tt=usePerfStore(rt=>rt.gl),[nt,it]=reactExports.useState(null);return reactExports.useEffect(()=>{if(tt){const rt=et==null?void 0:et.getUniforms();let st=0;const ot=new Map;rt.seq.forEach(at=>{if(!at.id.includes("uTroika")&&at.id!=="isOrthographic"&&at.id!=="uvTransform"&&at.id!=="lightProbe"&&at.id!=="projectionMatrix"&&at.id!=="viewMatrix"&&at.id!=="normalMatrix"&&at.id!=="modelMatrix"&&at.id!=="modelViewMatrix"){let At=[],lt={name:at.id};at.cache&&(at.cache.forEach(gt=>{typeof gt<"u"&&At.push(gt.toString().substring(0,4))}),lt.value=At.join(),_[at.id]&&_[at.id].image&&_[at.id].image&&(st++,lt.value=addTextureUniforms(at.id,_[at.id])),lt.value||(lt.value="empty"),ot.set(at.id,lt))}}),_.uniforms&&Object.keys(_.uniforms).forEach(at=>{const At=_.uniforms[at];if(At.value){const{value:lt}=At;let gt={name:at};if(at.includes("uTroika"))return;if(lt instanceof Texture)st++,gt.value=addTextureUniforms(at,lt);else{let ct=JSON.stringify(lt);try{ct=JSON.stringify(lt)}catch{ct=lt.toString()}gt.value=ct}ot.set(at,gt)}}),st>0&&_e(st),it(ot)}},[]),jsx(ProgramsUL,{children:nt&&Array.from(nt.values()).map(rt=>jsx("span",{children:typeof rt.value=="string"?jsx("li",{children:jsxs("span",{children:[rt.name," :"," ",jsxs("b",{children:[rt.value.substring(0,30),rt.value.length>30?"...":""]})]})}):jsxs(Fragment,{children:[jsx("li",{children:jsxs("b",{children:[rt.value.name,":"]})}),jsxs("div",{children:[Object.keys(rt.value).map(st=>st!=="name"?jsx("div",{children:st==="url"?jsx("a",{href:rt.value[st],target:"_blank",children:jsx("img",{src:rt.value[st]})}):jsxs("li",{children:[st,": ",jsx("b",{children:rt.value[st]})]})},st):null),jsxs(ProgramConsole,{onClick:()=>{var st;console.info(_[rt.value.name]||(_==null||(st=_.uniforms[rt.value.name])===null||st===void 0?void 0:st.value))},children:["console.info(",rt.value.name,");"]})]})]})},rt.name))})},DynamicDrawCallInfo=({el:et})=>{usePerfStore(tt=>tt.log);const _=usePerfStore(tt=>tt.gl),_e=tt=>{if(!_)return 0;const nt=Math.round(tt.drawCounts.total/(_.info.render.triangles+_.info.render.lines+_.info.render.points)*100*10)/10;return isFinite(nt)&&nt||0};return jsx(Fragment,{children:et.drawCounts.total>0&&jsxs(PerfI,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[et.drawCounts.type==="Triangle"?jsx(VercelLogoIcon,{style:{top:"-1px"}}):jsx(ActivityLogIcon,{style:{top:"-1px"}}),et.drawCounts.total,jsxs("small",{children:[et.drawCounts.type,"s"]}),_&&jsxs(PerfB,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[et.visible&&!et.material.wireframe?_e(et):0,"%"]})]})})},ProgramUI=({el:et})=>{const[_,_e]=reactExports.useState(et.visible),[tt,nt]=reactExports.useState(et.expand),[it,rt]=reactExports.useState(0),{meshes:st,program:ot,material:at}=et;return jsxs(ProgramGeo,{children:[jsxs(ProgramHeader,{onClick:()=>{et.expand=!tt,Object.keys(st).forEach(At=>{const lt=st[At];lt.material.wireframe=!1}),nt(!tt)},children:[jsx(Toggle,{style:{marginRight:"6px"},children:tt?jsx("span",{children:jsx(TriangleDownIcon,{})}):jsx("span",{children:jsx(TriangleUpIcon,{})})}),ot&&jsxs("span",{children:[jsx(ProgramTitle,{children:ot.name}),jsxs(PerfI,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[jsx(LayersIcon,{style:{top:"-1px"}}),Object.keys(st).length,jsx("small",{children:Object.keys(st).length>1?"users":"user"})]}),it>0&&jsxs(PerfI,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[it>1?jsx(ImageIcon,{style:{top:"-1px"}}):jsx(ImageIcon,{style:{top:"-1px"}}),it,jsx("small",{children:"tex"})]}),jsx(DynamicDrawCallInfo,{el:et}),at.glslVersion==="300 es"&&jsxs(PerfI,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[jsx(RocketIcon,{style:{top:"-1px"}}),"300",jsx("small",{children:"es"}),jsx(PerfB,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),jsx(ToggleVisible,{onPointerEnter:()=>{Object.keys(st).forEach(At=>{const lt=st[At];lt.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(st).forEach(At=>{const lt=st[At];lt.material.wireframe=!1})},onClick:At=>{At.stopPropagation(),Object.keys(st).forEach(lt=>{const gt=st[lt],ct=!_;gt.visible=ct,et.visible=ct,_e(ct)})},children:_?jsx(EyeOpenIcon,{}):jsx(EyeNoneIcon,{})})]}),jsxs("div",{style:{maxHeight:tt?"9999px":0,overflow:"hidden"},children:[jsxs(ProgramsULHeader,{children:[jsx(ButtonIcon,{})," Uniforms:"]}),jsx(UniformsGL,{program:ot,material:at,setTexNumber:rt}),jsxs(ProgramsULHeader,{children:[jsx(CubeIcon,{})," Geometries:"]}),jsx(ProgramsUL,{children:st&&Object.keys(st).map(At=>st[At]&&st[At].geometry&&jsxs(ProgramsGeoLi,{children:[jsxs("span",{children:[st[At].geometry.type,": "]}),st[At].userData&&st[At].userData.drawCount&&jsxs("b",{children:[jsxs("div",{children:[st[At].userData.drawCount.count,jsxs("small",{children:[" ",st[At].userData.drawCount.type,"s"]})]}),jsx("br",{}),jsxs("div",{children:[Math.round(estimateBytesUsed(st[At].geometry)/1024*1e3)/1e3,"Kb",jsx("small",{children:" memory used"})]})]})]},At))}),jsxs(ProgramConsole,{onClick:()=>{console.info(at)},children:["console.info(",at.type,")"]})]})]})},ProgramsUI=()=>{usePerfStore(_=>_.triggerProgramsUpdate);const et=usePerfStore(_=>_.programs);return jsx(ProgramsContainer,{children:et&&Array.from(et.values()).map(_=>_&&_?jsx(ProgramUI,{el:_},_.material.uuid):null)})},colorsGraph=et=>({overClock:"#ff6eff",fps:et?"100, 143, 255":"238,38,110",cpu:et?"254, 254, 98":"66,226,46",gpu:et?"254,254,254":"253,151,31",custom:et?"86,180,233":"40,255,255"}),DynamicUIPerf=({showGraph:et,colorBlind:_})=>{const _e=usePerfStore(nt=>nt.overclockingFps),tt=usePerfStore(nt=>nt.fpsLimit);return jsxs(PerfB,{style:et?{color:_e?colorsGraph(_).overClock.toString():`rgb(${colorsGraph(_).fps})`}:{},children:["FPS ",_e?`${tt}🚀`:""]})},DynamicUI=({showGraph:et,colorBlind:_,customData:_e,minimal:tt})=>{const nt=usePerfStore(it=>it.gl);return nt?jsxs(PerfIContainer,{children:[jsxs(PerfI,{children:[jsx(LightningBoltIcon,{}),jsx(PerfB,{style:et?{color:`rgb(${colorsGraph(_).gpu.toString()})`}:{},children:"GPU"}),jsx(PerfSmallI,{children:"ms"})]}),jsxs(PerfI,{children:[jsx(RulerHorizontalIcon,{}),jsx(PerfB,{style:et?{color:`rgb(${colorsGraph(_).cpu.toString()})`}:{},children:"CPU"}),jsx(PerfSmallI,{children:"ms"})]}),jsxs(PerfI,{children:[jsx(LapTimerIcon,{}),jsx(DynamicUIPerf,{showGraph:et,colorBlind:_})]}),!tt&&nt&&jsxs(PerfI,{children:[jsx(TextAlignJustifyIcon,{}),jsx(PerfB,{children:nt.info.render.calls===1?"call":"calls"})]}),!tt&&nt&&jsxs(PerfI,{children:[jsx(VercelLogoIcon,{}),jsx(PerfB,{children:"Triangles"})]}),_e&&jsxs(PerfI,{children:[jsx(BarChartIcon,{}),jsx(PerfB,{style:et?{color:`rgb(${colorsGraph(_).custom})`}:{},children:_e.name}),_e.info&&jsx(PerfSmallI,{children:_e.info})]})]}):null},PerfUI=({showGraph:et,colorBlind:_,deepAnalyze:_e,customData:tt,matrixUpdate:nt,openByDefault:it,minimal:rt})=>jsxs(Fragment,{children:[jsx(DynamicUI,{showGraph:et,colorBlind:_,customData:tt,minimal:rt}),!rt&&jsx(PerfThree,{matrixUpdate:nt,openByDefault:it,deepAnalyze:_e,showGraph:et})]}),InfoUI=({matrixUpdate:et})=>jsxs("div",{children:[jsxs(PerfI,{children:[jsx(MarginIcon,{}),jsx(PerfB,{children:"Geometries"})]}),jsxs(PerfI,{children:[jsx(ImageIcon,{}),jsx(PerfB,{children:"Textures"})]}),jsxs(PerfI,{children:[jsx(ActivityLogIcon,{}),jsx(PerfB,{children:"shaders"})]}),jsxs(PerfI,{children:[jsx(MinusIcon,{}),jsx(PerfB,{children:"Lines"})]}),jsxs(PerfI,{children:[jsx(DotIcon,{}),jsx(PerfB,{children:"Points"})]}),et&&jsxs(PerfI,{children:[jsx(DropdownMenuIcon,{}),jsx(PerfB,{children:"Matrices"})]})]}),ToggleEl=({tab:et,title:_,set:_e})=>{const tt=usePerfStore(nt=>nt.tab);return jsx(Toggle,{className:`${tt===et?" __perf_toggle_tab_active":""}`,onClick:()=>{_e(!0),usePerfStore.setState({tab:et})},children:jsx("span",{children:_})})},PerfThree=({openByDefault:et,showGraph:_,deepAnalyze:_e,matrixUpdate:tt})=>{const[nt,it]=React.useState(et);return jsxs("span",{children:[jsx(TabContainers,{show:nt,showGraph:_,matrixUpdate:tt}),et&&!_e?null:jsxs(ToggleContainer,{className:"__perf_toggle",children:[_e&&jsx(ToggleEl,{tab:"programs",title:"Programs",set:it}),_e&&jsx(ToggleEl,{tab:"infos",title:"Infos",set:it}),jsx(Toggle,{onClick:()=>{it(!nt)},children:nt?jsxs("span",{children:[jsx(TriangleDownIcon,{})," Minimize"]}):jsxs("span",{children:[jsx(TriangleUpIcon,{})," More"]})})]})]})},TabContainers=({show:et,showGraph:_,matrixUpdate:_e})=>{const tt=usePerfStore(nt=>nt.tab);return jsxs(Fragment,{children:[jsx(InfoUI,{matrixUpdate:_e}),et&&jsx("div",{children:jsx(ContainerScroll,{style:{marginTop:_?"38px":0},children:tt==="programs"&&jsx(ProgramsUI,{})})})]})},Gui=({showGraph:et,colorBlind:_,openByDefault:_e,className:tt,overClock:nt,style:it,position:rt,chart:st,deepAnalyze:ot,antialias:at,customData:At,matrixUpdate:lt,minimal:gt})=>{const ct=reactExports.useRef(null);return jsxs(Fragment,{children:[jsx(Headless,{chart:st,overClock:nt,deepAnalyze:ot,matrixUpdate:lt}),jsx(Html,{transform:!1,children:jsxs(PerfS,{className:(tt?" ".concat(tt):" ")+` ${rt||""} ${gt?"minimal":""}`,style:_objectSpread2$1({minHeight:gt?"37px":et?"100px":"60px"},it),ref:ct,children:[jsx(ChartUI,{perfContainerRef:ct,colorBlind:_,chart:st,showGraph:et,antialias:at,customData:At,minimal:gt,matrixUpdate:lt}),jsx(PerfUI,{colorBlind:_,showGraph:et,deepAnalyze:ot,openByDefault:_e,customData:At,matrixUpdate:lt,minimal:gt})]})})]})},Perf=({headless:et=!1,colorBlind:_=!1,overClock:_e=!1,showGraph:tt=!0,trackCPU:nt=!1,deepAnalyze:it=!1,antialias:rt=!0,openByDefault:st=!0,customData:ot,matrixUpdate:at=!1,position:At="top-right",chart:lt={length:30,hz:15},className:gt,style:ct,minimal:dt=!1})=>et?jsx(Headless,{chart:lt,deepAnalyze:it,matrixUpdate:at,overClock:_e}):jsx(Gui,{colorBlind:_,showGraph:tt,trackCPU:nt,openByDefault:st,className:gt,style:ct,overClock:_e,position:At,antialias:rt,chart:lt,deepAnalyze:it,minimal:dt,customData:ot,matrixUpdate:at});function Circuit(){const{scene:et}=useGLTF("./circuit.glb");return et.traverse(_=>{_.isMesh&&(_.material=new MeshStandardMaterial({color:"#fff",roughness:1,metalness:0,emissive:"#fff",emissiveIntensity:1}),_.castShadow=!0,_.receiveShadow=!0)}),jsx(Fragment,{children:jsx(Clone,{object:et,position:[0,0,0]})})}class GLTFLoader extends Loader{constructor(_){super(_),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(_e){return new GLTFMaterialsClearcoatExtension(_e)}),this.register(function(_e){return new GLTFTextureBasisUExtension(_e)}),this.register(function(_e){return new GLTFTextureWebPExtension(_e)}),this.register(function(_e){return new GLTFMaterialsSheenExtension(_e)}),this.register(function(_e){return new GLTFMaterialsTransmissionExtension(_e)}),this.register(function(_e){return new GLTFMaterialsVolumeExtension(_e)}),this.register(function(_e){return new GLTFMaterialsIorExtension(_e)}),this.register(function(_e){return new GLTFMaterialsEmissiveStrengthExtension(_e)}),this.register(function(_e){return new GLTFMaterialsSpecularExtension(_e)}),this.register(function(_e){return new GLTFMaterialsIridescenceExtension(_e)}),this.register(function(_e){return new GLTFLightsExtension(_e)}),this.register(function(_e){return new GLTFMeshoptCompression(_e)}),this.register(function(_e){return new GLTFMeshGpuInstancing(_e)})}load(_,_e,tt,nt){const it=this;let rt;this.resourcePath!==""?rt=this.resourcePath:this.path!==""?rt=this.path:rt=LoaderUtils.extractUrlBase(_),this.manager.itemStart(_);const st=function(at){nt?nt(at):console.error(at),it.manager.itemError(_),it.manager.itemEnd(_)},ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(_,function(at){try{it.parse(at,rt,function(At){_e(At),it.manager.itemEnd(_)},st)}catch(At){st(At)}},tt,st)}setDRACOLoader(_){return this.dracoLoader=_,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(_){return this.ktx2Loader=_,this}setMeshoptDecoder(_){return this.meshoptDecoder=_,this}register(_){return this.pluginCallbacks.indexOf(_)===-1&&this.pluginCallbacks.push(_),this}unregister(_){return this.pluginCallbacks.indexOf(_)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(_),1),this}parse(_,_e,tt,nt){let it;const rt={},st={};if(typeof _=="string")it=JSON.parse(_);else if(_ instanceof ArrayBuffer)if(LoaderUtils.decodeText(new Uint8Array(_,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{rt[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(_)}catch(At){nt&&nt(At);return}it=JSON.parse(rt[EXTENSIONS.KHR_BINARY_GLTF].content)}else it=JSON.parse(LoaderUtils.decodeText(new Uint8Array(_)));else it=_;if(it.asset===void 0||it.asset.version[0]<2){nt&&nt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const ot=new GLTFParser(it,{path:_e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ot.fileLoader.setRequestHeader(this.requestHeader);for(let at=0;at<this.pluginCallbacks.length;at++){const At=this.pluginCallbacks[at](ot);st[At.name]=At,rt[At.name]=!0}if(it.extensionsUsed)for(let at=0;at<it.extensionsUsed.length;++at){const At=it.extensionsUsed[at],lt=it.extensionsRequired||[];switch(At){case EXTENSIONS.KHR_MATERIALS_UNLIT:rt[At]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:rt[At]=new GLTFDracoMeshCompressionExtension(it,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:rt[At]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:rt[At]=new GLTFMeshQuantizationExtension;break;default:lt.indexOf(At)>=0&&st[At]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+At+'".')}}ot.setExtensions(rt),ot.setPlugins(st),ot.parse(tt,nt)}parseAsync(_,_e){const tt=this;return new Promise(function(nt,it){tt.parse(_,_e,nt,it)})}}function GLTFRegistry(){let et={};return{get:function(_){return et[_]},add:function(_,_e){et[_]=_e},remove:function(_){delete et[_]},removeAll:function(){et={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const _=this.parser,_e=this.parser.json.nodes||[];for(let tt=0,nt=_e.length;tt<nt;tt++){const it=_e[tt];it.extensions&&it.extensions[this.name]&&it.extensions[this.name].light!==void 0&&_._addNodeRef(this.cache,it.extensions[this.name].light)}}_loadLight(_){const _e=this.parser,tt="light:"+_;let nt=_e.cache.get(tt);if(nt)return nt;const it=_e.json,ot=((it.extensions&&it.extensions[this.name]||{}).lights||[])[_];let at;const At=new Color(16777215);ot.color!==void 0&&At.fromArray(ot.color);const lt=ot.range!==void 0?ot.range:0;switch(ot.type){case"directional":at=new DirectionalLight(At),at.target.position.set(0,0,-1),at.add(at.target);break;case"point":at=new PointLight(At),at.distance=lt;break;case"spot":at=new SpotLight(At),at.distance=lt,ot.spot=ot.spot||{},ot.spot.innerConeAngle=ot.spot.innerConeAngle!==void 0?ot.spot.innerConeAngle:0,ot.spot.outerConeAngle=ot.spot.outerConeAngle!==void 0?ot.spot.outerConeAngle:Math.PI/4,at.angle=ot.spot.outerConeAngle,at.penumbra=1-ot.spot.innerConeAngle/ot.spot.outerConeAngle,at.target.position.set(0,0,-1),at.add(at.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ot.type)}return at.position.set(0,0,0),at.decay=2,assignExtrasToUserData(at,ot),ot.intensity!==void 0&&(at.intensity=ot.intensity),at.name=_e.createUniqueName(ot.name||"light_"+_),nt=Promise.resolve(at),_e.cache.add(tt,nt),nt}getDependency(_,_e){if(_==="light")return this._loadLight(_e)}createNodeAttachment(_){const _e=this,tt=this.parser,it=tt.json.nodes[_],st=(it.extensions&&it.extensions[this.name]||{}).light;return st===void 0?null:this._loadLight(st).then(function(ot){return tt._getNodeRef(_e.cache,st,ot)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(_,_e,tt){const nt=[];_.color=new Color(1,1,1),_.opacity=1;const it=_e.pbrMetallicRoughness;if(it){if(Array.isArray(it.baseColorFactor)){const rt=it.baseColorFactor;_.color.fromArray(rt),_.opacity=rt[3]}it.baseColorTexture!==void 0&&nt.push(tt.assignTexture(_,"map",it.baseColorTexture,sRGBEncoding))}return Promise.all(nt)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(_,_e){const nt=this.parser.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=nt.extensions[this.name].emissiveStrength;return it!==void 0&&(_e.emissiveIntensity=it),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];if(rt.clearcoatFactor!==void 0&&(_e.clearcoat=rt.clearcoatFactor),rt.clearcoatTexture!==void 0&&it.push(tt.assignTexture(_e,"clearcoatMap",rt.clearcoatTexture)),rt.clearcoatRoughnessFactor!==void 0&&(_e.clearcoatRoughness=rt.clearcoatRoughnessFactor),rt.clearcoatRoughnessTexture!==void 0&&it.push(tt.assignTexture(_e,"clearcoatRoughnessMap",rt.clearcoatRoughnessTexture)),rt.clearcoatNormalTexture!==void 0&&(it.push(tt.assignTexture(_e,"clearcoatNormalMap",rt.clearcoatNormalTexture)),rt.clearcoatNormalTexture.scale!==void 0)){const st=rt.clearcoatNormalTexture.scale;_e.clearcoatNormalScale=new Vector2(st,st)}return Promise.all(it)}}class GLTFMaterialsIridescenceExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];return rt.iridescenceFactor!==void 0&&(_e.iridescence=rt.iridescenceFactor),rt.iridescenceTexture!==void 0&&it.push(tt.assignTexture(_e,"iridescenceMap",rt.iridescenceTexture)),rt.iridescenceIor!==void 0&&(_e.iridescenceIOR=rt.iridescenceIor),_e.iridescenceThicknessRange===void 0&&(_e.iridescenceThicknessRange=[100,400]),rt.iridescenceThicknessMinimum!==void 0&&(_e.iridescenceThicknessRange[0]=rt.iridescenceThicknessMinimum),rt.iridescenceThicknessMaximum!==void 0&&(_e.iridescenceThicknessRange[1]=rt.iridescenceThicknessMaximum),rt.iridescenceThicknessTexture!==void 0&&it.push(tt.assignTexture(_e,"iridescenceThicknessMap",rt.iridescenceThicknessTexture)),Promise.all(it)}}class GLTFMaterialsSheenExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[];_e.sheenColor=new Color(0,0,0),_e.sheenRoughness=0,_e.sheen=1;const rt=nt.extensions[this.name];return rt.sheenColorFactor!==void 0&&_e.sheenColor.fromArray(rt.sheenColorFactor),rt.sheenRoughnessFactor!==void 0&&(_e.sheenRoughness=rt.sheenRoughnessFactor),rt.sheenColorTexture!==void 0&&it.push(tt.assignTexture(_e,"sheenColorMap",rt.sheenColorTexture,sRGBEncoding)),rt.sheenRoughnessTexture!==void 0&&it.push(tt.assignTexture(_e,"sheenRoughnessMap",rt.sheenRoughnessTexture)),Promise.all(it)}}class GLTFMaterialsTransmissionExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];return rt.transmissionFactor!==void 0&&(_e.transmission=rt.transmissionFactor),rt.transmissionTexture!==void 0&&it.push(tt.assignTexture(_e,"transmissionMap",rt.transmissionTexture)),Promise.all(it)}}class GLTFMaterialsVolumeExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];_e.thickness=rt.thicknessFactor!==void 0?rt.thicknessFactor:0,rt.thicknessTexture!==void 0&&it.push(tt.assignTexture(_e,"thicknessMap",rt.thicknessTexture)),_e.attenuationDistance=rt.attenuationDistance||1/0;const st=rt.attenuationColor||[1,1,1];return _e.attenuationColor=new Color(st[0],st[1],st[2]),Promise.all(it)}}class GLTFMaterialsIorExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const nt=this.parser.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=nt.extensions[this.name];return _e.ior=it.ior!==void 0?it.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(_){const tt=this.parser.json.materials[_];return!tt.extensions||!tt.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(_,_e){const tt=this.parser,nt=tt.json.materials[_];if(!nt.extensions||!nt.extensions[this.name])return Promise.resolve();const it=[],rt=nt.extensions[this.name];_e.specularIntensity=rt.specularFactor!==void 0?rt.specularFactor:1,rt.specularTexture!==void 0&&it.push(tt.assignTexture(_e,"specularIntensityMap",rt.specularTexture));const st=rt.specularColorFactor||[1,1,1];return _e.specularColor=new Color(st[0],st[1],st[2]),rt.specularColorTexture!==void 0&&it.push(tt.assignTexture(_e,"specularColorMap",rt.specularColorTexture,sRGBEncoding)),Promise.all(it)}}class GLTFTextureBasisUExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(_){const _e=this.parser,tt=_e.json,nt=tt.textures[_];if(!nt.extensions||!nt.extensions[this.name])return null;const it=nt.extensions[this.name],rt=_e.options.ktx2Loader;if(!rt){if(tt.extensionsRequired&&tt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return _e.loadTextureImage(_,it.source,rt)}}class GLTFTextureWebPExtension{constructor(_){this.parser=_,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(_){const _e=this.name,tt=this.parser,nt=tt.json,it=nt.textures[_];if(!it.extensions||!it.extensions[_e])return null;const rt=it.extensions[_e],st=nt.images[rt.source];let ot=tt.textureLoader;if(st.uri){const at=tt.options.manager.getHandler(st.uri);at!==null&&(ot=at)}return this.detectSupport().then(function(at){if(at)return tt.loadTextureImage(_,rt.source,ot);if(nt.extensionsRequired&&nt.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return tt.loadTexture(_)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(_){const _e=new Image;_e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",_e.onload=_e.onerror=function(){_(_e.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(_){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=_}loadBufferView(_){const _e=this.parser.json,tt=_e.bufferViews[_];if(tt.extensions&&tt.extensions[this.name]){const nt=tt.extensions[this.name],it=this.parser.getDependency("buffer",nt.buffer),rt=this.parser.options.meshoptDecoder;if(!rt||!rt.supported){if(_e.extensionsRequired&&_e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return it.then(function(st){const ot=nt.byteOffset||0,at=nt.byteLength||0,At=nt.count,lt=nt.byteStride,gt=new Uint8Array(st,ot,at);return rt.decodeGltfBufferAsync?rt.decodeGltfBufferAsync(At,lt,gt,nt.mode,nt.filter).then(function(ct){return ct.buffer}):rt.ready.then(function(){const ct=new ArrayBuffer(At*lt);return rt.decodeGltfBuffer(new Uint8Array(ct),At,lt,gt,nt.mode,nt.filter),ct})})}else return null}}class GLTFMeshGpuInstancing{constructor(_){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=_}createNodeMesh(_){const _e=this.parser.json,tt=_e.nodes[_];if(!tt.extensions||!tt.extensions[this.name]||tt.mesh===void 0)return null;const nt=_e.meshes[tt.mesh];for(const at of nt.primitives)if(at.mode!==WEBGL_CONSTANTS.TRIANGLES&&at.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&at.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&at.mode!==void 0)return null;const rt=tt.extensions[this.name].attributes,st=[],ot={};for(const at in rt)st.push(this.parser.getDependency("accessor",rt[at]).then(At=>(ot[at]=At,ot[at])));return st.length<1?null:(st.push(this.parser.createNodeMesh(_)),Promise.all(st).then(at=>{const At=at.pop(),lt=At.isGroup?At.children:[At],gt=at[0].count,ct=[];for(const dt of lt){const ht=new Matrix4,mt=new Vector3,Ct=new Quaternion$2,ft=new Vector3(1,1,1),pt=new InstancedMesh(dt.geometry,dt.material,gt);for(let Vt=0;Vt<gt;Vt++)ot.TRANSLATION&&mt.fromBufferAttribute(ot.TRANSLATION,Vt),ot.ROTATION&&Ct.fromBufferAttribute(ot.ROTATION,Vt),ot.SCALE&&ft.fromBufferAttribute(ot.SCALE,Vt),pt.setMatrixAt(Vt,ht.compose(mt,Ct,ft));for(const Vt in ot)Vt!=="TRANSLATION"&&Vt!=="ROTATION"&&Vt!=="SCALE"&&dt.geometry.setAttribute(Vt,ot[Vt]);Object3D.prototype.copy.call(pt,dt),pt.frustumCulled=!1,this.parser.assignFinalMaterial(pt),ct.push(pt)}return At.isGroup?(At.clear(),At.add(...ct),At):ct[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(_){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const _e=new DataView(_,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:LoaderUtils.decodeText(new Uint8Array(_.slice(0,4))),version:_e.getUint32(4,!0),length:_e.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const tt=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,nt=new DataView(_,BINARY_EXTENSION_HEADER_LENGTH);let it=0;for(;it<tt;){const rt=nt.getUint32(it,!0);it+=4;const st=nt.getUint32(it,!0);if(it+=4,st===BINARY_EXTENSION_CHUNK_TYPES.JSON){const ot=new Uint8Array(_,BINARY_EXTENSION_HEADER_LENGTH+it,rt);this.content=LoaderUtils.decodeText(ot)}else if(st===BINARY_EXTENSION_CHUNK_TYPES.BIN){const ot=BINARY_EXTENSION_HEADER_LENGTH+it;this.body=_.slice(ot,ot+rt)}it+=rt}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(_,_e){if(!_e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=_,this.dracoLoader=_e,this.dracoLoader.preload()}decodePrimitive(_,_e){const tt=this.json,nt=this.dracoLoader,it=_.extensions[this.name].bufferView,rt=_.extensions[this.name].attributes,st={},ot={},at={};for(const At in rt){const lt=ATTRIBUTES[At]||At.toLowerCase();st[lt]=rt[At]}for(const At in _.attributes){const lt=ATTRIBUTES[At]||At.toLowerCase();if(rt[At]!==void 0){const gt=tt.accessors[_.attributes[At]],ct=WEBGL_COMPONENT_TYPES[gt.componentType];at[lt]=ct.name,ot[lt]=gt.normalized===!0}}return _e.getDependency("bufferView",it).then(function(At){return new Promise(function(lt){nt.decodeDracoFile(At,function(gt){for(const ct in gt.attributes){const dt=gt.attributes[ct],ht=ot[ct];ht!==void 0&&(dt.normalized=ht)}lt(gt)},st,at)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(_,_e){return _e.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),_e.offset===void 0&&_e.rotation===void 0&&_e.scale===void 0||(_=_.clone(),_e.offset!==void 0&&_.offset.fromArray(_e.offset),_e.rotation!==void 0&&(_.rotation=_e.rotation),_e.scale!==void 0&&_.repeat.fromArray(_e.scale),_.needsUpdate=!0),_}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(_,_e,tt,nt){super(_,_e,tt,nt)}copySampleValue_(_){const _e=this.resultBuffer,tt=this.sampleValues,nt=this.valueSize,it=_*nt*3+nt;for(let rt=0;rt!==nt;rt++)_e[rt]=tt[it+rt];return _e}interpolate_(_,_e,tt,nt){const it=this.resultBuffer,rt=this.sampleValues,st=this.valueSize,ot=st*2,at=st*3,At=nt-_e,lt=(tt-_e)/At,gt=lt*lt,ct=gt*lt,dt=_*at,ht=dt-at,mt=-2*ct+3*gt,Ct=ct-gt,ft=1-mt,pt=Ct-gt+lt;for(let Vt=0;Vt!==st;Vt++){const yt=rt[ht+Vt+st],Gt=rt[ht+Vt+ot]*At,Bt=rt[dt+Vt+st],vt=rt[dt+Vt]*At;it[Vt]=ft*yt+pt*Gt+mt*Bt+Ct*vt}return it}}const _q=new Quaternion$2;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(_,_e,tt,nt){const it=super.interpolate_(_,_e,tt,nt);return _q.fromArray(it).normalize().toArray(it),it}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(et){return et.DefaultMaterial===void 0&&(et.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),et.DefaultMaterial}function addUnknownExtensionsToUserData(et,_,_e){for(const tt in _e.extensions)et[tt]===void 0&&(_.userData.gltfExtensions=_.userData.gltfExtensions||{},_.userData.gltfExtensions[tt]=_e.extensions[tt])}function assignExtrasToUserData(et,_){_.extras!==void 0&&(typeof _.extras=="object"?Object.assign(et.userData,_.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+_.extras))}function addMorphTargets(et,_,_e){let tt=!1,nt=!1,it=!1;for(let at=0,At=_.length;at<At;at++){const lt=_[at];if(lt.POSITION!==void 0&&(tt=!0),lt.NORMAL!==void 0&&(nt=!0),lt.COLOR_0!==void 0&&(it=!0),tt&&nt&&it)break}if(!tt&&!nt&&!it)return Promise.resolve(et);const rt=[],st=[],ot=[];for(let at=0,At=_.length;at<At;at++){const lt=_[at];if(tt){const gt=lt.POSITION!==void 0?_e.getDependency("accessor",lt.POSITION):et.attributes.position;rt.push(gt)}if(nt){const gt=lt.NORMAL!==void 0?_e.getDependency("accessor",lt.NORMAL):et.attributes.normal;st.push(gt)}if(it){const gt=lt.COLOR_0!==void 0?_e.getDependency("accessor",lt.COLOR_0):et.attributes.color;ot.push(gt)}}return Promise.all([Promise.all(rt),Promise.all(st),Promise.all(ot)]).then(function(at){const At=at[0],lt=at[1],gt=at[2];return tt&&(et.morphAttributes.position=At),nt&&(et.morphAttributes.normal=lt),it&&(et.morphAttributes.color=gt),et.morphTargetsRelative=!0,et})}function updateMorphTargets(et,_){if(et.updateMorphTargets(),_.weights!==void 0)for(let _e=0,tt=_.weights.length;_e<tt;_e++)et.morphTargetInfluences[_e]=_.weights[_e];if(_.extras&&Array.isArray(_.extras.targetNames)){const _e=_.extras.targetNames;if(et.morphTargetInfluences.length===_e.length){et.morphTargetDictionary={};for(let tt=0,nt=_e.length;tt<nt;tt++)et.morphTargetDictionary[_e[tt]]=tt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(et){const _=et.extensions&&et.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let _e;return _?_e="draco:"+_.bufferView+":"+_.indices+":"+createAttributesKey(_.attributes):_e=et.indices+":"+createAttributesKey(et.attributes)+":"+et.mode,_e}function createAttributesKey(et){let _="";const _e=Object.keys(et).sort();for(let tt=0,nt=_e.length;tt<nt;tt++)_+=_e[tt]+":"+et[_e[tt]]+";";return _}function getNormalizedComponentScale(et){switch(et){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(et){return et.search(/\.jpe?g($|\?)/i)>0||et.search(/^data\:image\/jpeg/)===0?"image/jpeg":et.search(/\.webp($|\?)/i)>0||et.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(_={},_e={}){this.json=_,this.extensions={},this.plugins={},this.options=_e,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let tt=!1,nt=!1,it=-1;typeof navigator<"u"&&(tt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,nt=navigator.userAgent.indexOf("Firefox")>-1,it=nt?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||tt||nt&&it<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(_){this.extensions=_}setPlugins(_){this.plugins=_}parse(_,_e){const tt=this,nt=this.json,it=this.extensions;this.cache.removeAll(),this._invokeAll(function(rt){return rt._markDefs&&rt._markDefs()}),Promise.all(this._invokeAll(function(rt){return rt.beforeRoot&&rt.beforeRoot()})).then(function(){return Promise.all([tt.getDependencies("scene"),tt.getDependencies("animation"),tt.getDependencies("camera")])}).then(function(rt){const st={scene:rt[0][nt.scene||0],scenes:rt[0],animations:rt[1],cameras:rt[2],asset:nt.asset,parser:tt,userData:{}};addUnknownExtensionsToUserData(it,st,nt),assignExtrasToUserData(st,nt),Promise.all(tt._invokeAll(function(ot){return ot.afterRoot&&ot.afterRoot(st)})).then(function(){_(st)})}).catch(_e)}_markDefs(){const _=this.json.nodes||[],_e=this.json.skins||[],tt=this.json.meshes||[];for(let nt=0,it=_e.length;nt<it;nt++){const rt=_e[nt].joints;for(let st=0,ot=rt.length;st<ot;st++)_[rt[st]].isBone=!0}for(let nt=0,it=_.length;nt<it;nt++){const rt=_[nt];rt.mesh!==void 0&&(this._addNodeRef(this.meshCache,rt.mesh),rt.skin!==void 0&&(tt[rt.mesh].isSkinnedMesh=!0)),rt.camera!==void 0&&this._addNodeRef(this.cameraCache,rt.camera)}}_addNodeRef(_,_e){_e!==void 0&&(_.refs[_e]===void 0&&(_.refs[_e]=_.uses[_e]=0),_.refs[_e]++)}_getNodeRef(_,_e,tt){if(_.refs[_e]<=1)return tt;const nt=tt.clone(),it=(rt,st)=>{const ot=this.associations.get(rt);ot!=null&&this.associations.set(st,ot);for(const[at,At]of rt.children.entries())it(At,st.children[at])};return it(tt,nt),nt.name+="_instance_"+_.uses[_e]++,nt}_invokeOne(_){const _e=Object.values(this.plugins);_e.push(this);for(let tt=0;tt<_e.length;tt++){const nt=_(_e[tt]);if(nt)return nt}return null}_invokeAll(_){const _e=Object.values(this.plugins);_e.unshift(this);const tt=[];for(let nt=0;nt<_e.length;nt++){const it=_(_e[nt]);it&&tt.push(it)}return tt}getDependency(_,_e){const tt=_+":"+_e;let nt=this.cache.get(tt);if(!nt){switch(_){case"scene":nt=this.loadScene(_e);break;case"node":nt=this._invokeOne(function(it){return it.loadNode&&it.loadNode(_e)});break;case"mesh":nt=this._invokeOne(function(it){return it.loadMesh&&it.loadMesh(_e)});break;case"accessor":nt=this.loadAccessor(_e);break;case"bufferView":nt=this._invokeOne(function(it){return it.loadBufferView&&it.loadBufferView(_e)});break;case"buffer":nt=this.loadBuffer(_e);break;case"material":nt=this._invokeOne(function(it){return it.loadMaterial&&it.loadMaterial(_e)});break;case"texture":nt=this._invokeOne(function(it){return it.loadTexture&&it.loadTexture(_e)});break;case"skin":nt=this.loadSkin(_e);break;case"animation":nt=this._invokeOne(function(it){return it.loadAnimation&&it.loadAnimation(_e)});break;case"camera":nt=this.loadCamera(_e);break;default:if(nt=this._invokeOne(function(it){return it!=this&&it.getDependency&&it.getDependency(_,_e)}),!nt)throw new Error("Unknown type: "+_);break}this.cache.add(tt,nt)}return nt}getDependencies(_){let _e=this.cache.get(_);if(!_e){const tt=this,nt=this.json[_+(_==="mesh"?"es":"s")]||[];_e=Promise.all(nt.map(function(it,rt){return tt.getDependency(_,rt)})),this.cache.add(_,_e)}return _e}loadBuffer(_){const _e=this.json.buffers[_],tt=this.fileLoader;if(_e.type&&_e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_e.type+" buffer type is not supported.");if(_e.uri===void 0&&_===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const nt=this.options;return new Promise(function(it,rt){tt.load(LoaderUtils.resolveURL(_e.uri,nt.path),it,void 0,function(){rt(new Error('THREE.GLTFLoader: Failed to load buffer "'+_e.uri+'".'))})})}loadBufferView(_){const _e=this.json.bufferViews[_];return this.getDependency("buffer",_e.buffer).then(function(tt){const nt=_e.byteLength||0,it=_e.byteOffset||0;return tt.slice(it,it+nt)})}loadAccessor(_){const _e=this,tt=this.json,nt=this.json.accessors[_];if(nt.bufferView===void 0&&nt.sparse===void 0){const rt=WEBGL_TYPE_SIZES[nt.type],st=WEBGL_COMPONENT_TYPES[nt.componentType],ot=nt.normalized===!0,at=new st(nt.count*rt);return Promise.resolve(new BufferAttribute(at,rt,ot))}const it=[];return nt.bufferView!==void 0?it.push(this.getDependency("bufferView",nt.bufferView)):it.push(null),nt.sparse!==void 0&&(it.push(this.getDependency("bufferView",nt.sparse.indices.bufferView)),it.push(this.getDependency("bufferView",nt.sparse.values.bufferView))),Promise.all(it).then(function(rt){const st=rt[0],ot=WEBGL_TYPE_SIZES[nt.type],at=WEBGL_COMPONENT_TYPES[nt.componentType],At=at.BYTES_PER_ELEMENT,lt=At*ot,gt=nt.byteOffset||0,ct=nt.bufferView!==void 0?tt.bufferViews[nt.bufferView].byteStride:void 0,dt=nt.normalized===!0;let ht,mt;if(ct&&ct!==lt){const Ct=Math.floor(gt/ct),ft="InterleavedBuffer:"+nt.bufferView+":"+nt.componentType+":"+Ct+":"+nt.count;let pt=_e.cache.get(ft);pt||(ht=new at(st,Ct*ct,nt.count*ct/At),pt=new InterleavedBuffer(ht,ct/At),_e.cache.add(ft,pt)),mt=new InterleavedBufferAttribute(pt,ot,gt%ct/At,dt)}else st===null?ht=new at(nt.count*ot):ht=new at(st,gt,nt.count*ot),mt=new BufferAttribute(ht,ot,dt);if(nt.sparse!==void 0){const Ct=WEBGL_TYPE_SIZES.SCALAR,ft=WEBGL_COMPONENT_TYPES[nt.sparse.indices.componentType],pt=nt.sparse.indices.byteOffset||0,Vt=nt.sparse.values.byteOffset||0,yt=new ft(rt[1],pt,nt.sparse.count*Ct),Gt=new at(rt[2],Vt,nt.sparse.count*ot);st!==null&&(mt=new BufferAttribute(mt.array.slice(),mt.itemSize,mt.normalized));for(let Bt=0,vt=yt.length;Bt<vt;Bt++){const wt=yt[Bt];if(mt.setX(wt,Gt[Bt*ot]),ot>=2&&mt.setY(wt,Gt[Bt*ot+1]),ot>=3&&mt.setZ(wt,Gt[Bt*ot+2]),ot>=4&&mt.setW(wt,Gt[Bt*ot+3]),ot>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return mt})}loadTexture(_){const _e=this.json,tt=this.options,it=_e.textures[_].source,rt=_e.images[it];let st=this.textureLoader;if(rt.uri){const ot=tt.manager.getHandler(rt.uri);ot!==null&&(st=ot)}return this.loadTextureImage(_,it,st)}loadTextureImage(_,_e,tt){const nt=this,it=this.json,rt=it.textures[_],st=it.images[_e],ot=(st.uri||st.bufferView)+":"+rt.sampler;if(this.textureCache[ot])return this.textureCache[ot];const at=this.loadImageSource(_e,tt).then(function(At){At.flipY=!1,At.name=rt.name||st.name||"";const gt=(it.samplers||{})[rt.sampler]||{};return At.magFilter=WEBGL_FILTERS[gt.magFilter]||LinearFilter,At.minFilter=WEBGL_FILTERS[gt.minFilter]||LinearMipmapLinearFilter,At.wrapS=WEBGL_WRAPPINGS[gt.wrapS]||RepeatWrapping,At.wrapT=WEBGL_WRAPPINGS[gt.wrapT]||RepeatWrapping,nt.associations.set(At,{textures:_}),At}).catch(function(){return null});return this.textureCache[ot]=at,at}loadImageSource(_,_e){const tt=this,nt=this.json,it=this.options;if(this.sourceCache[_]!==void 0)return this.sourceCache[_].then(lt=>lt.clone());const rt=nt.images[_],st=self.URL||self.webkitURL;let ot=rt.uri||"",at=!1;if(rt.bufferView!==void 0)ot=tt.getDependency("bufferView",rt.bufferView).then(function(lt){at=!0;const gt=new Blob([lt],{type:rt.mimeType});return ot=st.createObjectURL(gt),ot});else if(rt.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+_+" is missing URI and bufferView");const At=Promise.resolve(ot).then(function(lt){return new Promise(function(gt,ct){let dt=gt;_e.isImageBitmapLoader===!0&&(dt=function(ht){const mt=new Texture(ht);mt.needsUpdate=!0,gt(mt)}),_e.load(LoaderUtils.resolveURL(lt,it.path),dt,void 0,ct)})}).then(function(lt){return at===!0&&st.revokeObjectURL(ot),lt.userData.mimeType=rt.mimeType||getImageURIMimeType(rt.uri),lt}).catch(function(lt){throw console.error("THREE.GLTFLoader: Couldn't load texture",ot),lt});return this.sourceCache[_]=At,At}assignTexture(_,_e,tt,nt){const it=this;return this.getDependency("texture",tt.index).then(function(rt){if(!rt)return null;if(tt.texCoord!==void 0&&tt.texCoord!=0&&!(_e==="aoMap"&&tt.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+tt.texCoord+" for texture "+_e+" not yet supported."),it.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const st=tt.extensions!==void 0?tt.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(st){const ot=it.associations.get(rt);rt=it.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(rt,st),it.associations.set(rt,ot)}}return nt!==void 0&&(rt.encoding=nt),_[_e]=rt,rt})}assignFinalMaterial(_){const _e=_.geometry;let tt=_.material;const nt=_e.attributes.tangent===void 0,it=_e.attributes.color!==void 0,rt=_e.attributes.normal===void 0;if(_.isPoints){const st="PointsMaterial:"+tt.uuid;let ot=this.cache.get(st);ot||(ot=new PointsMaterial,Material.prototype.copy.call(ot,tt),ot.color.copy(tt.color),ot.map=tt.map,ot.sizeAttenuation=!1,this.cache.add(st,ot)),tt=ot}else if(_.isLine){const st="LineBasicMaterial:"+tt.uuid;let ot=this.cache.get(st);ot||(ot=new LineBasicMaterial,Material.prototype.copy.call(ot,tt),ot.color.copy(tt.color),this.cache.add(st,ot)),tt=ot}if(nt||it||rt){let st="ClonedMaterial:"+tt.uuid+":";nt&&(st+="derivative-tangents:"),it&&(st+="vertex-colors:"),rt&&(st+="flat-shading:");let ot=this.cache.get(st);ot||(ot=tt.clone(),it&&(ot.vertexColors=!0),rt&&(ot.flatShading=!0),nt&&(ot.normalScale&&(ot.normalScale.y*=-1),ot.clearcoatNormalScale&&(ot.clearcoatNormalScale.y*=-1)),this.cache.add(st,ot),this.associations.set(ot,this.associations.get(tt))),tt=ot}tt.aoMap&&_e.attributes.uv2===void 0&&_e.attributes.uv!==void 0&&_e.setAttribute("uv2",_e.attributes.uv),_.material=tt}getMaterialType(){return MeshStandardMaterial}loadMaterial(_){const _e=this,tt=this.json,nt=this.extensions,it=tt.materials[_];let rt;const st={},ot=it.extensions||{},at=[];if(ot[EXTENSIONS.KHR_MATERIALS_UNLIT]){const lt=nt[EXTENSIONS.KHR_MATERIALS_UNLIT];rt=lt.getMaterialType(),at.push(lt.extendParams(st,it,_e))}else{const lt=it.pbrMetallicRoughness||{};if(st.color=new Color(1,1,1),st.opacity=1,Array.isArray(lt.baseColorFactor)){const gt=lt.baseColorFactor;st.color.fromArray(gt),st.opacity=gt[3]}lt.baseColorTexture!==void 0&&at.push(_e.assignTexture(st,"map",lt.baseColorTexture,sRGBEncoding)),st.metalness=lt.metallicFactor!==void 0?lt.metallicFactor:1,st.roughness=lt.roughnessFactor!==void 0?lt.roughnessFactor:1,lt.metallicRoughnessTexture!==void 0&&(at.push(_e.assignTexture(st,"metalnessMap",lt.metallicRoughnessTexture)),at.push(_e.assignTexture(st,"roughnessMap",lt.metallicRoughnessTexture))),rt=this._invokeOne(function(gt){return gt.getMaterialType&&gt.getMaterialType(_)}),at.push(Promise.all(this._invokeAll(function(gt){return gt.extendMaterialParams&&gt.extendMaterialParams(_,st)})))}it.doubleSided===!0&&(st.side=DoubleSide);const At=it.alphaMode||ALPHA_MODES.OPAQUE;if(At===ALPHA_MODES.BLEND?(st.transparent=!0,st.depthWrite=!1):(st.transparent=!1,At===ALPHA_MODES.MASK&&(st.alphaTest=it.alphaCutoff!==void 0?it.alphaCutoff:.5)),it.normalTexture!==void 0&&rt!==MeshBasicMaterial&&(at.push(_e.assignTexture(st,"normalMap",it.normalTexture)),st.normalScale=new Vector2(1,1),it.normalTexture.scale!==void 0)){const lt=it.normalTexture.scale;st.normalScale.set(lt,lt)}return it.occlusionTexture!==void 0&&rt!==MeshBasicMaterial&&(at.push(_e.assignTexture(st,"aoMap",it.occlusionTexture)),it.occlusionTexture.strength!==void 0&&(st.aoMapIntensity=it.occlusionTexture.strength)),it.emissiveFactor!==void 0&&rt!==MeshBasicMaterial&&(st.emissive=new Color().fromArray(it.emissiveFactor)),it.emissiveTexture!==void 0&&rt!==MeshBasicMaterial&&at.push(_e.assignTexture(st,"emissiveMap",it.emissiveTexture,sRGBEncoding)),Promise.all(at).then(function(){const lt=new rt(st);return it.name&&(lt.name=it.name),assignExtrasToUserData(lt,it),_e.associations.set(lt,{materials:_}),it.extensions&&addUnknownExtensionsToUserData(nt,lt,it),lt})}createUniqueName(_){const _e=PropertyBinding.sanitizeNodeName(_||"");let tt=_e;for(let nt=1;this.nodeNamesUsed[tt];++nt)tt=_e+"_"+nt;return this.nodeNamesUsed[tt]=!0,tt}loadGeometries(_){const _e=this,tt=this.extensions,nt=this.primitiveCache;function it(st){return tt[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(st,_e).then(function(ot){return addPrimitiveAttributes(ot,st,_e)})}const rt=[];for(let st=0,ot=_.length;st<ot;st++){const at=_[st],At=createPrimitiveKey(at),lt=nt[At];if(lt)rt.push(lt.promise);else{let gt;at.extensions&&at.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?gt=it(at):gt=addPrimitiveAttributes(new BufferGeometry,at,_e),nt[At]={primitive:at,promise:gt},rt.push(gt)}}return Promise.all(rt)}loadMesh(_){const _e=this,tt=this.json,nt=this.extensions,it=tt.meshes[_],rt=it.primitives,st=[];for(let ot=0,at=rt.length;ot<at;ot++){const At=rt[ot].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",rt[ot].material);st.push(At)}return st.push(_e.loadGeometries(rt)),Promise.all(st).then(function(ot){const at=ot.slice(0,ot.length-1),At=ot[ot.length-1],lt=[];for(let ct=0,dt=At.length;ct<dt;ct++){const ht=At[ct],mt=rt[ct];let Ct;const ft=at[ct];if(mt.mode===WEBGL_CONSTANTS.TRIANGLES||mt.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||mt.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||mt.mode===void 0)Ct=it.isSkinnedMesh===!0?new SkinnedMesh(ht,ft):new Mesh(ht,ft),Ct.isSkinnedMesh===!0&&!Ct.geometry.attributes.skinWeight.normalized&&Ct.normalizeSkinWeights(),mt.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?Ct.geometry=toTrianglesDrawMode(Ct.geometry,TriangleStripDrawMode):mt.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(Ct.geometry=toTrianglesDrawMode(Ct.geometry,TriangleFanDrawMode));else if(mt.mode===WEBGL_CONSTANTS.LINES)Ct=new LineSegments(ht,ft);else if(mt.mode===WEBGL_CONSTANTS.LINE_STRIP)Ct=new Line(ht,ft);else if(mt.mode===WEBGL_CONSTANTS.LINE_LOOP)Ct=new LineLoop(ht,ft);else if(mt.mode===WEBGL_CONSTANTS.POINTS)Ct=new Points(ht,ft);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+mt.mode);Object.keys(Ct.geometry.morphAttributes).length>0&&updateMorphTargets(Ct,it),Ct.name=_e.createUniqueName(it.name||"mesh_"+_),assignExtrasToUserData(Ct,it),mt.extensions&&addUnknownExtensionsToUserData(nt,Ct,mt),_e.assignFinalMaterial(Ct),lt.push(Ct)}for(let ct=0,dt=lt.length;ct<dt;ct++)_e.associations.set(lt[ct],{meshes:_,primitives:ct});if(lt.length===1)return lt[0];const gt=new Group;_e.associations.set(gt,{meshes:_});for(let ct=0,dt=lt.length;ct<dt;ct++)gt.add(lt[ct]);return gt})}loadCamera(_){let _e;const tt=this.json.cameras[_],nt=tt[tt.type];if(!nt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return tt.type==="perspective"?_e=new PerspectiveCamera$1(MathUtils.radToDeg(nt.yfov),nt.aspectRatio||1,nt.znear||1,nt.zfar||2e6):tt.type==="orthographic"&&(_e=new OrthographicCamera(-nt.xmag,nt.xmag,nt.ymag,-nt.ymag,nt.znear,nt.zfar)),tt.name&&(_e.name=this.createUniqueName(tt.name)),assignExtrasToUserData(_e,tt),Promise.resolve(_e)}loadSkin(_){const _e=this.json.skins[_],tt=[];for(let nt=0,it=_e.joints.length;nt<it;nt++)tt.push(this.getDependency("node",_e.joints[nt]));return _e.inverseBindMatrices!==void 0?tt.push(this.getDependency("accessor",_e.inverseBindMatrices)):tt.push(null),Promise.all(tt).then(function(nt){const it=nt.pop(),rt=nt,st=[],ot=[];for(let at=0,At=rt.length;at<At;at++){const lt=rt[at];if(lt){st.push(lt);const gt=new Matrix4;it!==null&&gt.fromArray(it.array,at*16),ot.push(gt)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_e.joints[at])}return new Skeleton(st,ot)})}loadAnimation(_){const tt=this.json.animations[_],nt=[],it=[],rt=[],st=[],ot=[];for(let at=0,At=tt.channels.length;at<At;at++){const lt=tt.channels[at],gt=tt.samplers[lt.sampler],ct=lt.target,dt=ct.node,ht=tt.parameters!==void 0?tt.parameters[gt.input]:gt.input,mt=tt.parameters!==void 0?tt.parameters[gt.output]:gt.output;nt.push(this.getDependency("node",dt)),it.push(this.getDependency("accessor",ht)),rt.push(this.getDependency("accessor",mt)),st.push(gt),ot.push(ct)}return Promise.all([Promise.all(nt),Promise.all(it),Promise.all(rt),Promise.all(st),Promise.all(ot)]).then(function(at){const At=at[0],lt=at[1],gt=at[2],ct=at[3],dt=at[4],ht=[];for(let Ct=0,ft=At.length;Ct<ft;Ct++){const pt=At[Ct],Vt=lt[Ct],yt=gt[Ct],Gt=ct[Ct],Bt=dt[Ct];if(pt===void 0)continue;pt.updateMatrix();let vt;switch(PATH_PROPERTIES[Bt.path]){case PATH_PROPERTIES.weights:vt=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:vt=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:default:vt=VectorKeyframeTrack;break}const wt=pt.name?pt.name:pt.uuid,Mt=Gt.interpolation!==void 0?INTERPOLATION[Gt.interpolation]:InterpolateLinear,kt=[];PATH_PROPERTIES[Bt.path]===PATH_PROPERTIES.weights?pt.traverse(function(Yt){Yt.morphTargetInfluences&&kt.push(Yt.name?Yt.name:Yt.uuid)}):kt.push(wt);let Nt=yt.array;if(yt.normalized){const Yt=getNormalizedComponentScale(Nt.constructor),Lt=new Float32Array(Nt.length);for(let Xt=0,_t=Nt.length;Xt<_t;Xt++)Lt[Xt]=Nt[Xt]*Yt;Nt=Lt}for(let Yt=0,Lt=kt.length;Yt<Lt;Yt++){const Xt=new vt(kt[Yt]+"."+PATH_PROPERTIES[Bt.path],Vt.array,Nt,Mt);Gt.interpolation==="CUBICSPLINE"&&(Xt.createInterpolant=function(Tt){const St=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new St(this.times,this.values,this.getValueSize()/3,Tt)},Xt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ht.push(Xt)}}const mt=tt.name?tt.name:"animation_"+_;return new AnimationClip(mt,void 0,ht)})}createNodeMesh(_){const _e=this.json,tt=this,nt=_e.nodes[_];return nt.mesh===void 0?null:tt.getDependency("mesh",nt.mesh).then(function(it){const rt=tt._getNodeRef(tt.meshCache,nt.mesh,it);return nt.weights!==void 0&&rt.traverse(function(st){if(st.isMesh)for(let ot=0,at=nt.weights.length;ot<at;ot++)st.morphTargetInfluences[ot]=nt.weights[ot]}),rt})}loadNode(_){const _e=this.json,tt=this.extensions,nt=this,it=_e.nodes[_],rt=it.name?nt.createUniqueName(it.name):"";return function(){const st=[],ot=nt._invokeOne(function(gt){return gt.createNodeMesh&&gt.createNodeMesh(_)});ot&&st.push(ot),it.camera!==void 0&&st.push(nt.getDependency("camera",it.camera).then(function(gt){return nt._getNodeRef(nt.cameraCache,it.camera,gt)})),nt._invokeAll(function(gt){return gt.createNodeAttachment&&gt.createNodeAttachment(_)}).forEach(function(gt){st.push(gt)});const at=[],At=it.children||[];for(let gt=0,ct=At.length;gt<ct;gt++)at.push(nt.getDependency("node",At[gt]));const lt=it.skin===void 0?Promise.resolve(null):nt.getDependency("skin",it.skin);return Promise.all([Promise.all(st),Promise.all(at),lt])}().then(function(st){const ot=st[0],at=st[1],At=st[2];let lt;if(it.isBone===!0?lt=new Bone:ot.length>1?lt=new Group:ot.length===1?lt=ot[0]:lt=new Object3D,lt!==ot[0])for(let gt=0,ct=ot.length;gt<ct;gt++)lt.add(ot[gt]);if(it.name&&(lt.userData.name=it.name,lt.name=rt),assignExtrasToUserData(lt,it),it.extensions&&addUnknownExtensionsToUserData(tt,lt,it),it.matrix!==void 0){const gt=new Matrix4;gt.fromArray(it.matrix),lt.applyMatrix4(gt)}else it.translation!==void 0&&lt.position.fromArray(it.translation),it.rotation!==void 0&&lt.quaternion.fromArray(it.rotation),it.scale!==void 0&&lt.scale.fromArray(it.scale);nt.associations.has(lt)||nt.associations.set(lt,{}),nt.associations.get(lt).nodes=_,At!==null&&lt.traverse(function(gt){gt.isSkinnedMesh&&gt.bind(At,_identityMatrix)});for(let gt=0,ct=at.length;gt<ct;gt++)lt.add(at[gt]);return lt})}loadScene(_){const _e=this.extensions,tt=this.json.scenes[_],nt=this,it=new Group;tt.name&&(it.name=nt.createUniqueName(tt.name)),assignExtrasToUserData(it,tt),tt.extensions&&addUnknownExtensionsToUserData(_e,it,tt);const rt=tt.nodes||[],st=[];for(let ot=0,at=rt.length;ot<at;ot++)st.push(nt.getDependency("node",rt[ot]));return Promise.all(st).then(function(ot){for(let At=0,lt=ot.length;At<lt;At++)it.add(ot[At]);const at=At=>{const lt=new Map;for(const[gt,ct]of nt.associations)(gt instanceof Material||gt instanceof Texture)&&lt.set(gt,ct);return At.traverse(gt=>{const ct=nt.associations.get(gt);ct!=null&&lt.set(gt,ct)}),lt};return nt.associations=at(it),it})}}function computeBounds(et,_,_e){const tt=_.attributes,nt=new Box3;if(tt.POSITION!==void 0){const st=_e.json.accessors[tt.POSITION],ot=st.min,at=st.max;if(ot!==void 0&&at!==void 0){if(nt.set(new Vector3(ot[0],ot[1],ot[2]),new Vector3(at[0],at[1],at[2])),st.normalized){const At=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[st.componentType]);nt.min.multiplyScalar(At),nt.max.multiplyScalar(At)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const it=_.targets;if(it!==void 0){const st=new Vector3,ot=new Vector3;for(let at=0,At=it.length;at<At;at++){const lt=it[at];if(lt.POSITION!==void 0){const gt=_e.json.accessors[lt.POSITION],ct=gt.min,dt=gt.max;if(ct!==void 0&&dt!==void 0){if(ot.setX(Math.max(Math.abs(ct[0]),Math.abs(dt[0]))),ot.setY(Math.max(Math.abs(ct[1]),Math.abs(dt[1]))),ot.setZ(Math.max(Math.abs(ct[2]),Math.abs(dt[2]))),gt.normalized){const ht=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[gt.componentType]);ot.multiplyScalar(ht)}st.max(ot)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}nt.expandByVector(st)}et.boundingBox=nt;const rt=new Sphere;nt.getCenter(rt.center),rt.radius=nt.min.distanceTo(nt.max)/2,et.boundingSphere=rt}function addPrimitiveAttributes(et,_,_e){const tt=_.attributes,nt=[];function it(rt,st){return _e.getDependency("accessor",rt).then(function(ot){et.setAttribute(st,ot)})}for(const rt in tt){const st=ATTRIBUTES[rt]||rt.toLowerCase();st in et.attributes||nt.push(it(tt[rt],st))}if(_.indices!==void 0&&!et.index){const rt=_e.getDependency("accessor",_.indices).then(function(st){et.setIndex(st)});nt.push(rt)}return assignExtrasToUserData(et,_),computeBounds(et,_,_e),Promise.all(nt).then(function(){return _.targets!==void 0?addMorphTargets(et,_.targets,_e):et})}function toTrianglesDrawMode(et,_){let _e=et.getIndex();if(_e===null){const rt=[],st=et.getAttribute("position");if(st!==void 0){for(let ot=0;ot<st.count;ot++)rt.push(ot);et.setIndex(rt),_e=et.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),et}const tt=_e.count-2,nt=[];if(_===TriangleFanDrawMode)for(let rt=1;rt<=tt;rt++)nt.push(_e.getX(0)),nt.push(_e.getX(rt)),nt.push(_e.getX(rt+1));else for(let rt=0;rt<tt;rt++)rt%2===0?(nt.push(_e.getX(rt)),nt.push(_e.getX(rt+1)),nt.push(_e.getX(rt+2))):(nt.push(_e.getX(rt+2)),nt.push(_e.getX(rt+1)),nt.push(_e.getX(rt)));nt.length/3!==tt&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const it=et.clone();return it.setIndex(nt),it}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(_){super(_),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(_){return this.decoderPath=_,this}setDecoderConfig(_){return this.decoderConfig=_,this}setWorkerLimit(_){return this.workerLimit=_,this}load(_,_e,tt,nt){const it=new FileLoader(this.manager);it.setPath(this.path),it.setResponseType("arraybuffer"),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials),it.load(_,rt=>{this.decodeDracoFile(rt,_e).catch(nt)},tt,nt)}decodeDracoFile(_,_e,tt,nt){const it={attributeIDs:tt||this.defaultAttributeIDs,attributeTypes:nt||this.defaultAttributeTypes,useUniqueIDs:!!tt};return this.decodeGeometry(_,it).then(_e)}decodeGeometry(_,_e){const tt=JSON.stringify(_e);if(_taskCache.has(_)){const ot=_taskCache.get(_);if(ot.key===tt)return ot.promise;if(_.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let nt;const it=this.workerNextTaskID++,rt=_.byteLength,st=this._getWorker(it,rt).then(ot=>(nt=ot,new Promise((at,At)=>{nt._callbacks[it]={resolve:at,reject:At},nt.postMessage({type:"decode",id:it,taskConfig:_e,buffer:_},[_])}))).then(ot=>this._createGeometry(ot.geometry));return st.catch(()=>!0).then(()=>{nt&&it&&this._releaseTask(nt,it)}),_taskCache.set(_,{key:tt,promise:st}),st}_createGeometry(_){const _e=new BufferGeometry;_.index&&_e.setIndex(new BufferAttribute(_.index.array,1));for(let tt=0;tt<_.attributes.length;tt++){const nt=_.attributes[tt],it=nt.name,rt=nt.array,st=nt.itemSize;_e.setAttribute(it,new BufferAttribute(rt,st))}return _e}_loadLibrary(_,_e){const tt=new FileLoader(this.manager);return tt.setPath(this.decoderPath),tt.setResponseType(_e),tt.setWithCredentials(this.withCredentials),new Promise((nt,it)=>{tt.load(_,nt,void 0,it)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const _=typeof WebAssembly!="object"||this.decoderConfig.type==="js",_e=[];return _?_e.push(this._loadLibrary("draco_decoder.js","text")):(_e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),_e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(_e).then(tt=>{const nt=tt[0];_||(this.decoderConfig.wasmBinary=tt[1]);const it=DRACOWorker.toString(),rt=["/* draco decoder */",nt,"","/* worker */",it.substring(it.indexOf("{")+1,it.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([rt]))}),this.decoderPending}_getWorker(_,_e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const nt=new Worker(this.workerSourceURL);nt._callbacks={},nt._taskCosts={},nt._taskLoad=0,nt.postMessage({type:"init",decoderConfig:this.decoderConfig}),nt.onmessage=function(it){const rt=it.data;switch(rt.type){case"decode":nt._callbacks[rt.id].resolve(rt);break;case"error":nt._callbacks[rt.id].reject(rt);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+rt.type+'"')}},this.workerPool.push(nt)}else this.workerPool.sort(function(nt,it){return nt._taskLoad>it._taskLoad?-1:1});const tt=this.workerPool[this.workerPool.length-1];return tt._taskCosts[_]=_e,tt._taskLoad+=_e,tt})}_releaseTask(_,_e){_._taskLoad-=_._taskCosts[_e],delete _._callbacks[_e],delete _._taskCosts[_e]}debug(){console.log("Task load: ",this.workerPool.map(_=>_._taskLoad))}dispose(){for(let _=0;_<this.workerPool.length;++_)this.workerPool[_].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let et,_;onmessage=function(rt){const st=rt.data;switch(st.type){case"init":et=st.decoderConfig,_=new Promise(function(At){et.onModuleLoaded=function(lt){At({draco:lt})},DracoDecoderModule(et)});break;case"decode":const ot=st.buffer,at=st.taskConfig;_.then(At=>{const lt=At.draco,gt=new lt.Decoder,ct=new lt.DecoderBuffer;ct.Init(new Int8Array(ot),ot.byteLength);try{const dt=_e(lt,gt,ct,at),ht=dt.attributes.map(mt=>mt.array.buffer);dt.index&&ht.push(dt.index.array.buffer),self.postMessage({type:"decode",id:st.id,geometry:dt},ht)}catch(dt){console.error(dt),self.postMessage({type:"error",id:st.id,error:dt.message})}finally{lt.destroy(ct),lt.destroy(gt)}});break}};function _e(rt,st,ot,at){const At=at.attributeIDs,lt=at.attributeTypes;let gt,ct;const dt=st.GetEncodedGeometryType(ot);if(dt===rt.TRIANGULAR_MESH)gt=new rt.Mesh,ct=st.DecodeBufferToMesh(ot,gt);else if(dt===rt.POINT_CLOUD)gt=new rt.PointCloud,ct=st.DecodeBufferToPointCloud(ot,gt);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ct.ok()||gt.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ct.error_msg());const ht={index:null,attributes:[]};for(const mt in At){const Ct=self[lt[mt]];let ft,pt;if(at.useUniqueIDs)pt=At[mt],ft=st.GetAttributeByUniqueId(gt,pt);else{if(pt=st.GetAttributeId(gt,rt[At[mt]]),pt===-1)continue;ft=st.GetAttribute(gt,pt)}ht.attributes.push(nt(rt,st,gt,mt,Ct,ft))}return dt===rt.TRIANGULAR_MESH&&(ht.index=tt(rt,st,gt)),rt.destroy(gt),ht}function tt(rt,st,ot){const At=ot.num_faces()*3,lt=At*4,gt=rt._malloc(lt);st.GetTrianglesUInt32Array(ot,lt,gt);const ct=new Uint32Array(rt.HEAPF32.buffer,gt,At).slice();return rt._free(gt),{array:ct,itemSize:1}}function nt(rt,st,ot,at,At,lt){const gt=lt.num_components(),dt=ot.num_points()*gt,ht=dt*At.BYTES_PER_ELEMENT,mt=it(rt,At),Ct=rt._malloc(ht);st.GetAttributeDataArrayForAllPoints(ot,lt,mt,ht,Ct);const ft=new At(rt.HEAPF32.buffer,Ct,dt).slice();return rt._free(Ct),{name:at,array:ft,itemSize:gt}}function it(rt,st){switch(st){case Float32Array:return rt.DT_FLOAT32;case Int8Array:return rt.DT_INT8;case Int16Array:return rt.DT_INT16;case Int32Array:return rt.DT_INT32;case Uint8Array:return rt.DT_UINT8;case Uint16Array:return rt.DT_UINT16;case Uint32Array:return rt.DT_UINT32}}}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(_,_e,tt){return Function.prototype.apply.call(_,_e,tt)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:ReflectOwnKeys=function(_){return Object.getOwnPropertyNames(_)};function ProcessEmitWarning(et){console&&console.warn&&console.warn(et)}var NumberIsNaN=Number.isNaN||function(_){return _!==_};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(et){if(typeof et!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof et)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(et){if(typeof et!="number"||et<0||NumberIsNaN(et))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+et+".");defaultMaxListeners=et}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||NumberIsNaN(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function _getMaxListeners(et){return et._maxListeners===void 0?EventEmitter.defaultMaxListeners:et._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(_){for(var _e=[],tt=1;tt<arguments.length;tt++)_e.push(arguments[tt]);var nt=_==="error",it=this._events;if(it!==void 0)nt=nt&&it.error===void 0;else if(!nt)return!1;if(nt){var rt;if(_e.length>0&&(rt=_e[0]),rt instanceof Error)throw rt;var st=new Error("Unhandled error."+(rt?" ("+rt.message+")":""));throw st.context=rt,st}var ot=it[_];if(ot===void 0)return!1;if(typeof ot=="function")ReflectApply(ot,this,_e);else for(var at=ot.length,At=arrayClone(ot,at),tt=0;tt<at;++tt)ReflectApply(At[tt],this,_e);return!0};function _addListener(et,_,_e,tt){var nt,it,rt;if(checkListener(_e),it=et._events,it===void 0?(it=et._events=Object.create(null),et._eventsCount=0):(it.newListener!==void 0&&(et.emit("newListener",_,_e.listener?_e.listener:_e),it=et._events),rt=it[_]),rt===void 0)rt=it[_]=_e,++et._eventsCount;else if(typeof rt=="function"?rt=it[_]=tt?[_e,rt]:[rt,_e]:tt?rt.unshift(_e):rt.push(_e),nt=_getMaxListeners(et),nt>0&&rt.length>nt&&!rt.warned){rt.warned=!0;var st=new Error("Possible EventEmitter memory leak detected. "+rt.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");st.name="MaxListenersExceededWarning",st.emitter=et,st.type=_,st.count=rt.length,ProcessEmitWarning(st)}return et}EventEmitter.prototype.addListener=function(_,_e){return _addListener(this,_,_e,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(_,_e){return _addListener(this,_,_e,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(et,_,_e){var tt={fired:!1,wrapFn:void 0,target:et,type:_,listener:_e},nt=onceWrapper.bind(tt);return nt.listener=_e,tt.wrapFn=nt,nt}EventEmitter.prototype.once=function(_,_e){return checkListener(_e),this.on(_,_onceWrap(this,_,_e)),this};EventEmitter.prototype.prependOnceListener=function(_,_e){return checkListener(_e),this.prependListener(_,_onceWrap(this,_,_e)),this};EventEmitter.prototype.removeListener=function(_,_e){var tt,nt,it,rt,st;if(checkListener(_e),nt=this._events,nt===void 0)return this;if(tt=nt[_],tt===void 0)return this;if(tt===_e||tt.listener===_e)--this._eventsCount===0?this._events=Object.create(null):(delete nt[_],nt.removeListener&&this.emit("removeListener",_,tt.listener||_e));else if(typeof tt!="function"){for(it=-1,rt=tt.length-1;rt>=0;rt--)if(tt[rt]===_e||tt[rt].listener===_e){st=tt[rt].listener,it=rt;break}if(it<0)return this;it===0?tt.shift():spliceOne(tt,it),tt.length===1&&(nt[_]=tt[0]),nt.removeListener!==void 0&&this.emit("removeListener",_,st||_e)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(_){var _e,tt,nt;if(tt=this._events,tt===void 0)return this;if(tt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):tt[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete tt[_]),this;if(arguments.length===0){var it=Object.keys(tt),rt;for(nt=0;nt<it.length;++nt)rt=it[nt],rt!=="removeListener"&&this.removeAllListeners(rt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_e=tt[_],typeof _e=="function")this.removeListener(_,_e);else if(_e!==void 0)for(nt=_e.length-1;nt>=0;nt--)this.removeListener(_,_e[nt]);return this};function _listeners$1(et,_,_e){var tt=et._events;if(tt===void 0)return[];var nt=tt[_];return nt===void 0?[]:typeof nt=="function"?_e?[nt.listener||nt]:[nt]:_e?unwrapListeners(nt):arrayClone(nt,nt.length)}EventEmitter.prototype.listeners=function(_){return _listeners$1(this,_,!0)};EventEmitter.prototype.rawListeners=function(_){return _listeners$1(this,_,!1)};EventEmitter.listenerCount=function(et,_){return typeof et.listenerCount=="function"?et.listenerCount(_):listenerCount.call(et,_)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(et){var _=this._events;if(_!==void 0){var _e=_[et];if(typeof _e=="function")return 1;if(_e!==void 0)return _e.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(et,_){for(var _e=new Array(_),tt=0;tt<_;++tt)_e[tt]=et[tt];return _e}function spliceOne(et,_){for(;_+1<et.length;_++)et[_]=et[_+1];et.pop()}function unwrapListeners(et){for(var _=new Array(et.length),_e=0;_e<_.length;++_e)_[_e]=et[_e].listener||et[_e];return _}function once(et,_){return new Promise(function(_e,tt){function nt(rt){et.removeListener(_,it),tt(rt)}function it(){typeof et.removeListener=="function"&&et.removeListener("error",nt),_e([].slice.call(arguments))}eventTargetAgnosticAddListener(et,_,it,{once:!0}),_!=="error"&&addErrorHandlerIfEventEmitter(et,nt,{once:!0})})}function addErrorHandlerIfEventEmitter(et,_,_e){typeof et.on=="function"&&eventTargetAgnosticAddListener(et,"error",_,_e)}function eventTargetAgnosticAddListener(et,_,_e,tt){if(typeof et.on=="function")tt.once?et.once(_,_e):et.on(_,_e);else if(typeof et.addEventListener=="function")et.addEventListener(_,function nt(it){tt.once&&et.removeEventListener(_,nt),_e(it)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof et)}var EventEmitter$1=events.exports;function decodeBase64(et,_){var _e=atob(et);if(_){for(var tt=new Uint8Array(_e.length),nt=0,it=_e.length;nt<it;++nt)tt[nt]=_e.charCodeAt(nt);return String.fromCharCode.apply(null,new Uint16Array(tt.buffer))}return _e}function createURL(et,_,_e){var tt=_===void 0?null:_,nt=_e===void 0?!1:_e,it=decodeBase64(et,nt),rt=it.indexOf(`
`,10)+1,st=it.substring(rt)+(tt?"//# sourceMappingURL="+tt:""),ot=new Blob([st],{type:"application/javascript"});return URL.createObjectURL(ot)}function createBase64WorkerFactory(et,_,_e){var tt;return function(it){return tt=tt||createURL(et,_,_e),new Worker(tt,it)}}var WorkerFactory=createBase64WorkerFactory("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb3NpdGl2ZVJlc3VsdCA9IG51bGw7CiAgICAgIGNvbnN0IHBvaW50SW5zaWRlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgbiA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ZhY2VzW2ldWzBdXTsgLy8gV2Ugb25seSBuZWVkIG9uZSBwb2ludCBpbiB0aGUgZmFjZQogICAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpcwoKICAgICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTsKICAgICAgICBwLnZzdWIodiwgdlRvUCk7CiAgICAgICAgY29uc3QgcjEgPSBuLmRvdCh2VG9QKTsKICAgICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgcG9pbnRJbnNpZGUudnN1Yih2LCB2VG9Qb2ludEluc2lkZSk7CiAgICAgICAgY29uc3QgcjIgPSBuLmRvdCh2VG9Qb2ludEluc2lkZSk7CgogICAgICAgIGlmIChyMSA8IDAgJiYgcjIgPiAwIHx8IHIxID4gMCAmJiByMiA8IDApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LgogICAgICAgIH0KICAgICAgfSAvLyBJZiB3ZSBnb3QgaGVyZSwgYWxsIGRvdCBwcm9kdWN0cyB3ZXJlIG9mIHRoZSBzYW1lIHNpZ24uCgoKICAgICAgcmV0dXJuIHBvc2l0aXZlUmVzdWx0ID8gMSA6IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4IGFuZCBtaW4gZG90IHByb2R1Y3Qgb2YgYSBjb252ZXggaHVsbCBhdCBwb3NpdGlvbiAocG9zLHF1YXQpIHByb2plY3RlZCBvbnRvIGFuIGF4aXMuCiAgICAgKiBSZXN1bHRzIGFyZSBzYXZlZCBpbiB0aGUgYXJyYXkgbWF4bWluLgogICAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuCiAgICAgKi8KCgogICAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IG4gPSBzaGFwZS52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IGxvY2FsQXhpcyA9IHByb2plY3RfbG9jYWxBeGlzOwogICAgICBsZXQgbWF4ID0gMDsKICAgICAgbGV0IG1pbiA9IDA7CiAgICAgIGNvbnN0IGxvY2FsT3JpZ2luID0gcHJvamVjdF9sb2NhbE9yaWdpbjsKICAgICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgbG9jYWxPcmlnaW4uc2V0WmVybygpOyAvLyBUcmFuc2Zvcm0gdGhlIGF4aXMgdG8gbG9jYWwKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zLCBxdWF0LCBheGlzLCBsb2NhbEF4aXMpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zLCBxdWF0LCBsb2NhbE9yaWdpbiwgbG9jYWxPcmlnaW4pOwogICAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTsKICAgICAgbWluID0gbWF4ID0gdnNbMF0uZG90KGxvY2FsQXhpcyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG47IGkrKykgewogICAgICAgIGNvbnN0IHZhbCA9IHZzW2ldLmRvdChsb2NhbEF4aXMpOwoKICAgICAgICBpZiAodmFsID4gbWF4KSB7CiAgICAgICAgICBtYXggPSB2YWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsIDwgbWluKSB7CiAgICAgICAgICBtaW4gPSB2YWw7CiAgICAgICAgfQogICAgICB9CgogICAgICBtaW4gLT0gYWRkOwogICAgICBtYXggLT0gYWRkOwoKICAgICAgaWYgKG1pbiA+IG1heCkgewogICAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gbWluOwogICAgICAgIG1pbiA9IG1heDsKICAgICAgICBtYXggPSB0ZW1wOwogICAgICB9IC8vIE91dHB1dAoKCiAgICAgIHJlc3VsdFswXSA9IG1heDsKICAgICAgcmVzdWx0WzFdID0gbWluOwogICAgfQoKICB9CiAgY29uc3QgbWF4bWluQSA9IFtdOwogIGNvbnN0IG1heG1pbkIgPSBbXTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHByb2plY3RfbG9jYWxBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsT3JpZ2luID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQSAzZCBib3ggc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2l6ZSA9IDEKICAgKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSkKICAgKiAgICAgY29uc3QgYm94U2hhcGUgPSBuZXcgQ0FOTk9OLkJveChoYWxmRXh0ZW50cykKICAgKiAgICAgY29uc3QgYm94Qm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBib3hTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpCiAgICovCiAgY2xhc3MgQm94IGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgaGFsZiBleHRlbnRzIG9mIHRoZSBib3guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihoYWxmRXh0ZW50cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQk9YCiAgICAgIH0pOwogICAgICB0aGlzLmhhbGZFeHRlbnRzID0gaGFsZkV4dGVudHM7CiAgICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gbnVsbDsKICAgICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSBsb2NhbCBjb252ZXggcG9seWhlZHJvbiByZXByZXNlbnRhdGlvbiB1c2VkIGZvciBzb21lIGNvbGxpc2lvbnMuCiAgICAgKi8KCgogICAgdXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCkgewogICAgICBjb25zdCBzeCA9IHRoaXMuaGFsZkV4dGVudHMueDsKICAgICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7CiAgICAgIGNvbnN0IHN6ID0gdGhpcy5oYWxmRXh0ZW50cy56OwogICAgICBjb25zdCBWID0gVmVjMzsKICAgICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTsKICAgICAgY29uc3QgZmFjZXMgPSBbWzMsIDIsIDEsIDBdLCAvLyAtegogICAgICBbNCwgNSwgNiwgN10sIC8vICt6CiAgICAgIFs1LCA0LCAwLCAxXSwgLy8gLXkKICAgICAgWzIsIDMsIDcsIDZdLCAvLyAreQogICAgICBbMCwgNCwgNywgM10sIC8vIC14CiAgICAgIFsxLCAyLCA2LCA1XSAvLyAreAogICAgICBdOwogICAgICBjb25zdCBheGVzID0gW25ldyBWKDAsIDAsIDEpLCBuZXcgVigwLCAxLCAwKSwgbmV3IFYoMSwgMCwgMCldOwogICAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gaDsKICAgICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LgogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICBzdGF0aWMgY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50czsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS54ICogMiAqIGUueCArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHMKICAgICAqIEBwYXJhbSBzaXhUYXJnZXRWZWN0b3JzIEFuIGFycmF5IG9mIDYgdmVjdG9ycywgdG8gc3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIG5vcm1hbHMgaW4uCiAgICAgKiBAcGFyYW0gcXVhdCBPcmllbnRhdGlvbiB0byBhcHBseSB0byB0aGUgbm9ybWFsIHZlY3RvcnMuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZlY3RvcnMgd2lsbCBiZSBpbiByZXNwZWN0IHRvIHRoZSBsb2NhbCBmcmFtZS4KICAgICAqLwoKCiAgICBnZXRTaWRlTm9ybWFscyhzaXhUYXJnZXRWZWN0b3JzLCBxdWF0KSB7CiAgICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9yczsKICAgICAgY29uc3QgZXggPSB0aGlzLmhhbGZFeHRlbnRzOwogICAgICBzaWRlc1swXS5zZXQoZXgueCwgMCwgMCk7CiAgICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTsKICAgICAgc2lkZXNbMl0uc2V0KDAsIDAsIGV4LnopOwogICAgICBzaWRlc1szXS5zZXQoLWV4LngsIDAsIDApOwogICAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApOwogICAgICBzaWRlc1s1XS5zZXQoMCwgMCwgLWV4LnopOwoKICAgICAgaWYgKHF1YXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaWRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHNpZGVzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB2b2x1bWUgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLmhhbGZFeHRlbnRzLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBmb3JFYWNoV29ybGRDb3JuZXIKICAgICAqLwoKCiAgICBmb3JFYWNoV29ybGRDb3JuZXIocG9zLCBxdWF0LCBjYWxsYmFjaykgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB3b3JsZENvcm5lclRlbXBQb3Muc2V0KGNvcm5lcnNbaV1bMF0sIGNvcm5lcnNbaV1bMV0sIGNvcm5lcnNbaV1bMl0pOwogICAgICAgIHF1YXQudm11bHQod29ybGRDb3JuZXJUZW1wUG9zLCB3b3JsZENvcm5lclRlbXBQb3MpOwogICAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBjYWxsYmFjayh3b3JsZENvcm5lclRlbXBQb3MueCwgd29ybGRDb3JuZXJUZW1wUG9zLnksIHdvcmxkQ29ybmVyVGVtcFBvcy56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgd29ybGRDb3JuZXJzVGVtcFswXS5zZXQoZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMV0uc2V0KC1lLngsIGUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFszXS5zZXQoLWUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNF0uc2V0KGUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs2XS5zZXQoLWUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs3XS5zZXQoZS54LCAtZS55LCBlLnopOwogICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07CiAgICAgIHF1YXQudm11bHQod2MsIHdjKTsKICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgbWF4LmNvcHkod2MpOwogICAgICBtaW4uY29weSh3Yyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykgewogICAgICAgIGNvbnN0IHdjID0gd29ybGRDb3JuZXJzVGVtcFtpXTsKICAgICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgICBjb25zdCB4ID0gd2MueDsKICAgICAgICBjb25zdCB5ID0gd2MueTsKICAgICAgICBjb25zdCB6ID0gd2MuejsKCiAgICAgICAgaWYgKHggPiBtYXgueCkgewogICAgICAgICAgbWF4LnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPiBtYXgueSkgewogICAgICAgICAgbWF4LnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPiBtYXgueikgewogICAgICAgICAgbWF4LnogPSB6OwogICAgICAgIH0KCiAgICAgICAgaWYgKHggPCBtaW4ueCkgewogICAgICAgICAgbWluLnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCBtaW4ueSkgewogICAgICAgICAgbWluLnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPCBtaW4ueikgewogICAgICAgICAgbWluLnogPSB6OwogICAgICAgIH0KICAgICAgfSAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTsKICAgICAgLy8gbWF4LnNldCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSk7CiAgICAgIC8vIHRoaXMuZm9yRWFjaFdvcmxkQ29ybmVyKHBvcyxxdWF0LGZ1bmN0aW9uKHgseSx6KXsKICAgICAgLy8gICAgIGlmKHggPiBtYXgueCl7CiAgICAgIC8vICAgICAgICAgbWF4LnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA+IG1heC55KXsKICAgICAgLy8gICAgICAgICBtYXgueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6ID4gbWF4LnopewogICAgICAvLyAgICAgICAgIG1heC56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHggPCBtaW4ueCl7CiAgICAgIC8vICAgICAgICAgbWluLnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA8IG1pbi55KXsKICAgICAgLy8gICAgICAgICBtaW4ueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6IDwgbWluLnopewogICAgICAvLyAgICAgICAgIG1pbi56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gfSk7CgogICAgfQoKICB9CiAgY29uc3Qgd29ybGRDb3JuZXJUZW1wUG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCB3b3JsZENvcm5lcnNUZW1wID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBCT0RZX1RZUEVTCiAgICovCiAgY29uc3QgQk9EWV9UWVBFUyA9IHsKICAgIC8qKiBEWU5BTUlDICovCiAgICBEWU5BTUlDOiAxLAoKICAgIC8qKiBTVEFUSUMgKi8KICAgIFNUQVRJQzogMiwKCiAgICAvKiogS0lORU1BVElDICovCiAgICBLSU5FTUFUSUM6IDQKICB9OwogIC8qKgogICAqIEJvZHlUeXBlCiAgICovCgogIC8qKgogICAqIEJPRFlfU0xFRVBfU1RBVEVTCiAgICovCiAgY29uc3QgQk9EWV9TTEVFUF9TVEFURVMgPSB7CiAgICAvKiogQVdBS0UgKi8KICAgIEFXQUtFOiAwLAoKICAgIC8qKiBTTEVFUFkgKi8KICAgIFNMRUVQWTogMSwKCiAgICAvKiogU0xFRVBJTkcgKi8KICAgIFNMRUVQSU5HOiAyCiAgfTsKICAvKioKICAgKiBCb2R5U2xlZXBTdGF0ZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgYm9keSB0eXBlcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpCiAgICogICAgIGNvbnN0IGJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoewogICAqICAgICAgIG1hc3M6IDEsCiAgICogICAgICAgc2hhcGUsCiAgICogICAgIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keSkKICAgKi8KICBjbGFzcyBCb2R5IGV4dGVuZHMgRXZlbnRUYXJnZXQgewogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2gKICAgICAqIG9mIHRoZSB0d28gYm9kaWVzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAZXZlbnQgY29sbGlkZQogICAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi4KICAgICAqIEBwYXJhbSBjb250YWN0IFRoZSBkZXRhaWxzIG9mIHRoZSBjb2xsaXNpb24uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIHN0YXRpYyBib2R5IGRvZXMgbm90IG1vdmUgZHVyaW5nIHNpbXVsYXRpb24gYW5kIGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIFN0YXRpYyBib2RpZXMgY2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHNldHRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5LiBUaGUgdmVsb2NpdHkgb2YgYSBzdGF0aWMgYm9keSBpcyBhbHdheXMgemVyby4gU3RhdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGtpbmVtYXRpYyBib2R5IG1vdmVzIHVuZGVyIHNpbXVsYXRpb24gYWNjb3JkaW5nIHRvIGl0cyB2ZWxvY2l0eS4gVGhleSBkbyBub3QgcmVzcG9uZCB0byBmb3JjZXMuIFRoZXkgY2FuIGJlIG1vdmVkIG1hbnVhbGx5LCBidXQgbm9ybWFsbHkgYSBraW5lbWF0aWMgYm9keSBpcyBtb3ZlZCBieSBzZXR0aW5nIGl0cyB2ZWxvY2l0eS4gQSBraW5lbWF0aWMgYm9keSBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBLaW5lbWF0aWMgYm9kaWVzIGRvIG5vdCBjb2xsaWRlIHdpdGggb3RoZXIgc3RhdGljIG9yIGtpbmVtYXRpYyBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFXQUtFCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNMRUVQWQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUElORwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuCiAgICAgKiBAZXZlbnQgd2FrZXVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuCiAgICAgKiBAZXZlbnQgc2xlZXB5CiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLgogICAgICogQGV2ZW50IHNsZWVwCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pZCA9IEJvZHkuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuaW5kZXggPSAtMTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMudmxhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikgewogICAgICAgIHRoaXMucG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy52ZWxvY2l0eSkgewogICAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0VmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmZvcmNlID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDsKICAgICAgdGhpcy5tYXNzID0gbWFzczsKICAgICAgdGhpcy5pbnZNYXNzID0gbWFzcyA+IDAgPyAxLjAgLyBtYXNzIDogMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMubGluZWFyRGFtcGluZyA9PT0gJ251bWJlcicgPyBvcHRpb25zLmxpbmVhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLnR5cGUgPSBtYXNzIDw9IDAuMCA/IEJvZHkuU1RBVElDIDogQm9keS5EWU5BTUlDOwoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnR5cGUgPT09IHR5cGVvZiBCb2R5LlNUQVRJQykgewogICAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTsKICAgICAgfQoKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdHlwZW9mIG9wdGlvbnMuYWxsb3dTbGVlcCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFsbG93U2xlZXAgOiB0cnVlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwVGltZUxpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgOiAxOwogICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgIHRoaXMudG9ycXVlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5jb3B5KG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5zaGFwZXMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdOwogICAgICB0aGlzLmluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdHlwZW9mIG9wdGlvbnMuZml4ZWRSb3RhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZpeGVkUm90YXRpb24gOiBmYWxzZTsKICAgICAgdGhpcy5hbmd1bGFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmFuZ3VsYXJEYW1waW5nICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5saW5lYXJGYWN0b3IuY29weShvcHRpb25zLmxpbmVhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhckZhY3RvcikgewogICAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gQm9vbGVhbihvcHRpb25zLmlzVHJpZ2dlcik7CgogICAgICBpZiAob3B0aW9ucy5zaGFwZSkgewogICAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogV2FrZSB0aGUgYm9keSB1cC4KICAgICAqLwoKCiAgICB3YWtlVXAoKSB7CiAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CgogICAgICBpZiAocHJldlN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkud2FrZXVwRXZlbnQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZvcmNlIGJvZHkgc2xlZXAKICAgICAqLwoKCiAgICBzbGVlcCgpIHsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUElORzsKICAgICAgdGhpcy52ZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENhbGxlZCBldmVyeSB0aW1lc3RlcCB0byB1cGRhdGUgaW50ZXJuYWwgc2xlZXAgdGltZXIgYW5kIGNoYW5nZSBzbGVlcCBzdGF0ZSBpZiBuZWVkZWQuCiAgICAgKiBAcGFyYW0gdGltZSBUaGUgd29ybGQgdGltZSBpbiBzZWNvbmRzCiAgICAgKi8KCgogICAgc2xlZXBUaWNrKHRpbWUpIHsKICAgICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkgewogICAgICAgIGNvbnN0IHNsZWVwU3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkID0gdGhpcy52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUFk7IC8vIFNsZWVweQoKICAgICAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB0aW1lOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXB5RXZlbnQpOwogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMud2FrZVVwKCk7IC8vIFdha2UgdXAKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHRpbWUgLSB0aGlzLnRpbWVMYXN0U2xlZXB5ID4gdGhpcy5zbGVlcFRpbWVMaW1pdCkgewogICAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZwoKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBpcyBzbGVlcGluZywgaXQgc2hvdWxkIGJlIGltbW92YWJsZSAvIGhhdmUgaW5maW5pdGUgbWFzcyBkdXJpbmcgc29sdmUuIFdlIHNvbHZlIGl0IGJ5IGhhdmluZyBhIHNlcGFyYXRlICJzb2x2ZSBtYXNzIi4KICAgICAqLwoKCiAgICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkgewogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuc2V0WmVybygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIHdvcmxkIHZlY3RvciB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHZlY3RvclRvTG9jYWxGcmFtZSh3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpOwogICAgICByZXN1bHQudmFkZCh0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgYWRkU2hhcGUoc2hhcGUsIF9vZmZzZXQsIF9vcmllbnRhdGlvbikgewogICAgICBjb25zdCBvZmZzZXQgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAoX29mZnNldCkgewogICAgICAgIG9mZnNldC5jb3B5KF9vZmZzZXQpOwogICAgICB9CgogICAgICBpZiAoX29yaWVudGF0aW9uKSB7CiAgICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5wdXNoKHNoYXBlKTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMucHVzaChvZmZzZXQpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pOwogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdSYWRpdXMoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICBzaGFwZS5ib2R5ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHNoYXBlIGZyb20gdGhlIGJvZHkuCiAgICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICByZW1vdmVTaGFwZShzaGFwZSkgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2hhcGVzLmluZGV4T2Yoc2hhcGUpOwoKICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgIGNvbnNvbGUud2FybignU2hhcGUgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBib2R5Jyk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMuc2hhcGVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IG51bGw7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGJvdW5kaW5nIHJhZGl1cyBvZiB0aGUgYm9keS4gU2hvdWxkIGJlIGRvbmUgaWYgYW55IG9mIHRoZSBzaGFwZXMgYXJlIGNoYW5nZWQuCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdSYWRpdXMoKSB7CiAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzOwogICAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0czsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGxldCByYWRpdXMgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2ldOwogICAgICAgIHNoYXBlLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpOwogICAgICAgIGNvbnN0IHIgPSBzaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1czsKCiAgICAgICAgaWYgKG9mZnNldCArIHIgPiByYWRpdXMpIHsKICAgICAgICAgIHJhZGl1cyA9IG9mZnNldCArIHI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gcmFkaXVzOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSAuYWFiYgogICAgICovCgoKICAgIHVwZGF0ZUFBQkIoKSB7CiAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzOwogICAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0czsKICAgICAgY29uc3Qgc2hhcGVPcmllbnRhdGlvbnMgPSB0aGlzLnNoYXBlT3JpZW50YXRpb25zOwogICAgICBjb25zdCBOID0gc2hhcGVzLmxlbmd0aDsKICAgICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjOwogICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHRtcFF1YXQ7CiAgICAgIGNvbnN0IGJvZHlRdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiOwogICAgICBjb25zdCBzaGFwZUFBQkIgPSB1cGRhdGVBQUJCX3NoYXBlQUFCQjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsgLy8gR2V0IHNoYXBlIHdvcmxkIHBvc2l0aW9uCgogICAgICAgIGJvZHlRdWF0LnZtdWx0KHNoYXBlT2Zmc2V0c1tpXSwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvbgoKICAgICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCCgogICAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpOwoKICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgYWFiYi5jb3B5KHNoYXBlQUFCQik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYC5pbmVydGlhV29ybGRgIGFuZCBgLmludkluZXJ0aWFXb3JsZGAKICAgICAqLwoKCiAgICB1cGRhdGVJbmVydGlhV29ybGQoZm9yY2UpIHsKICAgICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTsKCiAgICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7CiAgICAgICAgY29uc3QgbTEgPSB1aXdfbTE7CiAgICAgICAgY29uc3QgbTIgPSB1aXdfbTI7CiAgICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pOwogICAgICAgIG0xLnRyYW5zcG9zZShtMik7CiAgICAgICAgbTEuc2NhbGUoSSwgbTEpOwogICAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgZm9yY2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBcHBseWluZyBmb3JjZSB0aGlzIHdheSB3aWxsIGFkZCB0byBCb2R5LmZvcmNlIGFuZCBCb2R5LnRvcnF1ZS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC4KICAgICAqIEBwYXJhbSByZWxhdGl2ZVBvaW50IEEgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUZvcmNlKGZvcmNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgLy8gTmVlZGVkPwogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIGNvbnN0IHJvdEZvcmNlID0gQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlOwogICAgICByZWxhdGl2ZVBvaW50LmNyb3NzKGZvcmNlLCByb3RGb3JjZSk7IC8vIEFkZCBsaW5lYXIgZm9yY2UKCiAgICAgIHRoaXMuZm9yY2UudmFkZChmb3JjZSwgdGhpcy5mb3JjZSk7IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgogICAgICB0aGlzLnRvcnF1ZS52YWRkKHJvdEZvcmNlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEZvcmNlKGxvY2FsRm9yY2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQpIHsKICAgICAgaWYgKHJlbGF0aXZlUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcG9pbnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGJvZHkgY2VudGVyCgoKICAgICAgY29uc3QgciA9IHJlbGF0aXZlUG9pbnQ7IC8vIENvbXB1dGUgcHJvZHVjZWQgY2VudHJhbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCB2ZWxvID0gQm9keV9hcHBseUltcHVsc2VfdmVsbzsKICAgICAgdmVsby5jb3B5KGltcHVsc2UpOwogICAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZQoKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87CiAgICAgIHIuY3Jvc3MoaW1wdWxzZSwgcm90VmVsbyk7CiAgICAgIC8qCiAgICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7CiAgICAgICByb3RWZWxvLnkgKj0gdGhpcy5pbnZJbmVydGlhLnk7CiAgICAgICByb3RWZWxvLnogKj0gdGhpcy5pbnZJbmVydGlhLno7CiAgICAgICAqLwoKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2UKCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxJbXB1bHNlKGxvY2FsSW1wdWxzZSwgbG9jYWxQb2ludCkgewogICAgICBpZiAobG9jYWxQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7CiAgICAgIGNvbnN0IHJlbGF0aXZlUG9pbnRXb3JsZCA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludDsgLy8gVHJhbnNmb3JtIHRoZSBmb3JjZSB2ZWN0b3IgdG8gd29ybGQgc3BhY2UKCiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsSW1wdWxzZSwgd29ybGRJbXB1bHNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy4KICAgICAqLwoKCiAgICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHsKICAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzOwogICAgICB0aGlzLmludk1hc3MgPSB0aGlzLm1hc3MgPiAwID8gMS4wIC8gdGhpcy5tYXNzIDogMDsKICAgICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTsKICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZpeGVkUm90YXRpb247IC8vIEFwcHJveGltYXRlIHdpdGggQUFCQiBib3gKCiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICBoYWxmRXh0ZW50cy5zZXQoKHRoaXMuYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLmFhYmIubG93ZXJCb3VuZC54KSAvIDIsICh0aGlzLmFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueSkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueiAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnopIC8gMik7CiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpOwogICAgICB0aGlzLmludkluZXJ0aWEuc2V0KEkueCA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS54IDogMCwgSS55ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnkgOiAwLCBJLnogPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueiA6IDApOwogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCh0cnVlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHdvcmxkIHZlbG9jaXR5IG9mIGEgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gd29ybGRQb2ludAogICAgICogQHBhcmFtIHJlc3VsdAogICAgICogQHJldHVybiBUaGUgcmVzdWx0IHZlY3Rvci4KICAgICAqLwoKCiAgICBnZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgY29uc3QgciA9IG5ldyBWZWMzKCk7CiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MociwgcmVzdWx0KTsKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogTW92ZSB0aGUgYm9keSBmb3J3YXJkIGluIHRpbWUuCiAgICAgKiBAcGFyYW0gZHQgVGltZSBzdGVwCiAgICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvbgogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemVGYXN0IElmIHRoZSBxdWF0ZXJuaW9uIHNob3VsZCBiZSBub3JtYWxpemVkIHVzaW5nICJmYXN0IiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb24KICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uKTsKCiAgICAgIGlmICghKHRoaXMudHlwZSA9PT0gQm9keS5EWU5BTUlDIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHx8IHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlbG8gPSB0aGlzLnZlbG9jaXR5OwogICAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCBwb3MgPSB0aGlzLnBvc2l0aW9uOwogICAgICBjb25zdCBmb3JjZSA9IHRoaXMuZm9yY2U7CiAgICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlOwogICAgICBjb25zdCBxdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBpbnZNYXNzID0gdGhpcy5pbnZNYXNzOwogICAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7CiAgICAgIGNvbnN0IGxpbmVhckZhY3RvciA9IHRoaXMubGluZWFyRmFjdG9yOwogICAgICBjb25zdCBpTWR0ID0gaW52TWFzcyAqIGR0OwogICAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDsKICAgICAgdmVsby55ICs9IGZvcmNlLnkgKiBpTWR0ICogbGluZWFyRmFjdG9yLnk7CiAgICAgIHZlbG8ueiArPSBmb3JjZS56ICogaU1kdCAqIGxpbmVhckZhY3Rvci56OwogICAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50czsKICAgICAgY29uc3QgYW5ndWxhckZhY3RvciA9IHRoaXMuYW5ndWxhckZhY3RvcjsKICAgICAgY29uc3QgdHggPSB0b3JxdWUueCAqIGFuZ3VsYXJGYWN0b3IueDsKICAgICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTsKICAgICAgY29uc3QgdHogPSB0b3JxdWUueiAqIGFuZ3VsYXJGYWN0b3IuejsKICAgICAgYW5ndWxhclZlbG8ueCArPSBkdCAqIChlWzBdICogdHggKyBlWzFdICogdHkgKyBlWzJdICogdHopOwogICAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7CiAgICAgIGFuZ3VsYXJWZWxvLnogKz0gZHQgKiAoZVs2XSAqIHR4ICsgZVs3XSAqIHR5ICsgZVs4XSAqIHR6KTsgLy8gVXNlIG5ldyB2ZWxvY2l0eSAgLSBsZWFwIGZyb2cKCiAgICAgIHBvcy54ICs9IHZlbG8ueCAqIGR0OwogICAgICBwb3MueSArPSB2ZWxvLnkgKiBkdDsKICAgICAgcG9zLnogKz0gdmVsby56ICogZHQ7CiAgICAgIHF1YXQuaW50ZWdyYXRlKHRoaXMuYW5ndWxhclZlbG9jaXR5LCBkdCwgdGhpcy5hbmd1bGFyRmFjdG9yLCBxdWF0KTsKCiAgICAgIGlmIChxdWF0Tm9ybWFsaXplKSB7CiAgICAgICAgaWYgKHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVhdC5ub3JtYWxpemUoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsgLy8gVXBkYXRlIHdvcmxkIGluZXJ0aWEKCiAgICAgIHRoaXMudXBkYXRlSW5lcnRpYVdvcmxkKCk7CiAgICB9CgogIH0KICBCb2R5LmlkQ291bnRlciA9IDA7CiAgQm9keS5DT0xMSURFX0VWRU5UX05BTUUgPSAnY29sbGlkZSc7CiAgQm9keS5EWU5BTUlDID0gQk9EWV9UWVBFUy5EWU5BTUlDOwogIEJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7CiAgQm9keS5LSU5FTUFUSUMgPSBCT0RZX1RZUEVTLktJTkVNQVRJQzsKICBCb2R5LkFXQUtFID0gQk9EWV9TTEVFUF9TVEFURVMuQVdBS0U7CiAgQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7CiAgQm9keS5TTEVFUElORyA9IEJPRFlfU0xFRVBfU1RBVEVTLlNMRUVQSU5HOwogIEJvZHkud2FrZXVwRXZlbnQgPSB7CiAgICB0eXBlOiAnd2FrZXVwJwogIH07CiAgQm9keS5zbGVlcHlFdmVudCA9IHsKICAgIHR5cGU6ICdzbGVlcHknCiAgfTsKICBCb2R5LnNsZWVwRXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXAnCiAgfTsKICBjb25zdCB0bXBWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IHVwZGF0ZUFBQkJfc2hhcGVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCB1aXdfbTEgPSBuZXcgTWF0MygpOwogIGNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7CiAgbmV3IE1hdDMoKTsKICBjb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3JlbGF0aXZlUG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50cyA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb25zCiAgICogQGF1dGhvciBzY2h0ZXBwZQogICAqLwogIGNsYXNzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGZvciBjb2xsaXNpb25zIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdHMgaW4gdGhlIHdvcmxkIG1vdmVkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMudXNlQm91bmRpbmdCb3hlcyA9IGZhbHNlOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb2xsaXNpb24gcGFpcnMgZnJvbSB0aGUgd29ybGQKICAgICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluCiAgICAgKiBAcGFyYW0gcDEgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggYm9keSBvYmplY3RzCiAgICAgKiBAcGFyYW0gcDIgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggYm9keSBvYmplY3RzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC4KICAgICAqLwoKCiAgICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHsKICAgICAgLy8gQ2hlY2sgY29sbGlzaW9uIGZpbHRlciBtYXNrcwogICAgICBpZiAoKGJvZHlBLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keUIuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHlCLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keUEuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gQ2hlY2sgdHlwZXMKCgogICAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkgewogICAgICAgIC8vIEJvdGggYm9kaWVzIGFyZSBzdGF0aWMgb3Igc2xlZXBpbmcuIFNraXAuCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmICh0aGlzLnVzZUJvdW5kaW5nQm94ZXMpIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdCb3hCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBhcmUgaW50ZXJzZWN0aW5nLgogICAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvbgogICAgICogQHBhcmFtIHBhaXJzMiBib2R5QiBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvbgogICAgICovCgoKICAgIGRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgciA9IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfcjsKICAgICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7CiAgICAgIGNvbnN0IGJvdW5kaW5nUmFkaXVzU3VtMiA9IChib2R5QS5ib3VuZGluZ1JhZGl1cyArIGJvZHlCLmJvdW5kaW5nUmFkaXVzKSAqKiAyOwogICAgICBjb25zdCBub3JtMiA9IHIubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgaWYgKG5vcm0yIDwgYm91bmRpbmdSYWRpdXNTdW0yKSB7CiAgICAgICAgcGFpcnMxLnB1c2goYm9keUEpOwogICAgICAgIHBhaXJzMi5wdXNoKGJvZHlCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgYm94ZXMgb2YgdHdvIGJvZGllcyBhcmUgaW50ZXJzZWN0aW5nLgogICAgICovCgoKICAgIGRvQm91bmRpbmdCb3hCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgIGJvZHlBLnVwZGF0ZUFBQkIoKTsKICAgICAgfQoKICAgICAgaWYgKGJvZHlCLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTsKICAgICAgfSAvLyBDaGVjayBBQUJCIC8gQUFCQgoKCiAgICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7CiAgICAgICAgcGFpcnMxLnB1c2goYm9keUEpOwogICAgICAgIHBhaXJzMi5wdXNoKGJvZHlCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy4KICAgICAqLwoKCiAgICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgdCA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3RlbXA7CiAgICAgIGNvbnN0IHAxID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDE7CiAgICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7CiAgICAgIGNvbnN0IE4gPSBwYWlyczEubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIHAxW2ldID0gcGFpcnMxW2ldOwogICAgICAgIHAyW2ldID0gcGFpcnMyW2ldOwogICAgICB9CgogICAgICBwYWlyczEubGVuZ3RoID0gMDsKICAgICAgcGFpcnMyLmxlbmd0aCA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7CiAgICAgICAgY29uc3QgaWQyID0gcDJbaV0uaWQ7CiAgICAgICAgY29uc3Qga2V5ID0gaWQxIDwgaWQyID8gYCR7aWQxfSwke2lkMn1gIDogYCR7aWQyfSwke2lkMX1gOwogICAgICAgIHRba2V5XSA9IGk7CiAgICAgICAgdC5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHQua2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGtleSA9IHQua2V5cy5wb3AoKTsKICAgICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07CiAgICAgICAgcGFpcnMxLnB1c2gocDFbcGFpckluZGV4XSk7CiAgICAgICAgcGFpcnMyLnB1c2gocDJbcGFpckluZGV4XSk7CiAgICAgICAgZGVsZXRlIHRba2V5XTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBUbyBiZSBpbXBsZW1lbnRlZCBieSBzdWJjYXNzZXMKICAgICAqLwoKCiAgICBzZXRXb3JsZCh3b3JsZCkge30KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLgogICAgICovCgoKICAgIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5QikgewogICAgICBjb25zdCBkaXN0ID0gbmV3IFZlYzMoKTsgLy8gYnNjX2Rpc3Q7CgogICAgICBib2R5QS5wb3NpdGlvbi52c3ViKGJvZHlCLnBvc2l0aW9uLCBkaXN0KTsKICAgICAgY29uc3Qgc2EgPSBib2R5QS5zaGFwZXNbMF07CiAgICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdOwogICAgICByZXR1cm4gTWF0aC5wb3coc2EuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzYi5ib3VuZGluZ1NwaGVyZVJhZGl1cywgMikgPiBkaXN0Lmxlbmd0aFNxdWFyZWQoKTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gdGhlIEFBQkIuCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgY29uc29sZS53YXJuKCcuYWFiYlF1ZXJ5IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIEJyb2FkcGhhc2Ugc3ViY2xhc3MuJyk7CiAgICAgIHJldHVybiBbXTsKICAgIH0KCiAgfSAvLyBUZW1wIG9iamVjdHMKCiAgY29uc3QgQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBRdWF0ZXJuaW9uKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wID0gewogICAga2V5czogW10KICB9OwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxID0gW107CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLgogICAqCiAgICogVGhlIG5haXZlIGJyb2FkcGhhc2UgbG9va3MgYXQgYWxsIHBvc3NpYmxlIHBhaXJzIHdpdGhvdXQgcmVzdHJpY3Rpb24sIHRoZXJlZm9yZSBpdCBoYXMgY29tcGxleGl0eSBOXjIgXyh3aGljaCBpcyBiYWQpXwogICAqLwogIGNsYXNzIE5haXZlQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgbiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGxldCBiaTsKICAgICAgbGV0IGJqOyAvLyBOYWl2ZSBOXjIgZnR3IQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG47IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBpOyBqKyspIHsKICAgICAgICAgIGJpID0gYm9kaWVzW2ldOwogICAgICAgICAgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IFtdOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSB3b3JsZC5ib2RpZXNbaV07CgogICAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYi51cGRhdGVBQUJCKCk7CiAgICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmIKCgogICAgICAgIGlmIChiLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgfQoKICAvKioKICAgKiBTdG9yYWdlIGZvciBSYXkgY2FzdGluZyBkYXRhCiAgICovCiAgY2xhc3MgUmF5Y2FzdFJlc3VsdCB7CiAgICAvKioKICAgICAqIHJheUZyb21Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiByYXlUb1dvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdE5vcm1hbFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdFBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGFzSGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIHNoYXBlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJvZHkKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4IG9mIHRoZSBoaXQgdHJpYW5nbGUsIGlmIHRoZSBoaXQgc2hhcGUgd2FzIGEgdHJpbWVzaAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSByYXkgc2hvdWxkIHN0b3AgdHJhdmVyc2luZyB0aGUgYm9kaWVzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnNoYXBlID0gbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IC0xOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogUmVzZXQgYWxsIHJlc3VsdCBkYXRhLgogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnNoYXBlID0gbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IC0xOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogYWJvcnQKICAgICAqLwoKCiAgICBhYm9ydCgpIHsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHJlc3VsdCBkYXRhLgogICAgICovCgoKICAgIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuY29weShyYXlGcm9tV29ybGQpOwogICAgICB0aGlzLnJheVRvV29ybGQuY29weShyYXlUb1dvcmxkKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLmNvcHkoaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTsKICAgICAgdGhpcy5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlOwogICAgfQoKICB9CgogIGxldCBfU2hhcGUkdHlwZXMkU1BIRVJFLCBfU2hhcGUkdHlwZXMkUExBTkUsIF9TaGFwZSR0eXBlcyRCT1gsIF9TaGFwZSR0eXBlcyRDWUxJTkRFUiwgX1NoYXBlJHR5cGVzJENPTlZFWFBPLCBfU2hhcGUkdHlwZXMkSEVJR0hURkksIF9TaGFwZSR0eXBlcyRUUklNRVNIOwoKICAvKioKICAgKiBSQVlfTU9ERVMKICAgKi8KICBjb25zdCBSQVlfTU9ERVMgPSB7CiAgICAvKiogQ0xPU0VTVCAqLwogICAgQ0xPU0VTVDogMSwKCiAgICAvKiogQU5ZICovCiAgICBBTlk6IDIsCgogICAgLyoqIEFMTCAqLwogICAgQUxMOiA0CiAgfTsKICAvKioKICAgKiBSYXlNb2RlCiAgICovCgogIF9TaGFwZSR0eXBlcyRTUEhFUkUgPSBTaGFwZS50eXBlcy5TUEhFUkU7CiAgX1NoYXBlJHR5cGVzJFBMQU5FID0gU2hhcGUudHlwZXMuUExBTkU7CiAgX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDsKICBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjsKICBfU2hhcGUkdHlwZXMkQ09OVkVYUE8gPSBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OOwogIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEOwogIF9TaGFwZSR0eXBlcyRUUklNRVNIID0gU2hhcGUudHlwZXMuVFJJTUVTSDsKCiAgLyoqCiAgICogQSBsaW5lIGluIDNEIHNwYWNlIHRoYXQgaW50ZXJzZWN0cyBib2RpZXMgYW5kIHJldHVybiBwb2ludHMuCiAgICovCiAgY2xhc3MgUmF5IHsKICAgIC8qKgogICAgICogZnJvbQogICAgICovCgogICAgLyoqCiAgICAgKiB0bwogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb24KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLgogICAgICogQGRlZmF1bHQgMC4wMDAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cAogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC4KICAgICAqIEBkZWZhdWx0IFJBWS5BTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgZHVyaW5nIGludGVyc2VjdFdvcmxkKCkgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZXItcHJvdmlkZWQgcmVzdWx0IGNhbGxiYWNrLiBXaWxsIGJlIHVzZWQgaWYgbW9kZSBpcyBSYXkuQUxMLgogICAgICovCgogICAgLyoqCiAgICAgKiBDTE9TRVNUCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBBTEwKICAgICAqLwogICAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFNwaGVyZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRQTEFORV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRCT1hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Qm94OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDT05WRVhQT10oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkSEVJR0hURkldKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RUcmltZXNoOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgIGlmIChmcm9tID09PSB2b2lkIDApIHsKICAgICAgICBmcm9tID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRvID09PSB2b2lkIDApIHsKICAgICAgICB0byA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJvbSA9IGZyb20uY2xvbmUoKTsKICAgICAgdGhpcy50byA9IHRvLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmVjaXNpb24gPSAwLjAwMDE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IGZhbHNlOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xOwogICAgICB0aGlzLm1vZGUgPSBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CgogICAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLCBvdGhlcndpc2UgZmFsc2UuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0V29ybGQod29ybGQsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gISFvcHRpb25zLnNraXBCYWNrZmFjZXM7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKCiAgICAgIGlmIChvcHRpb25zLmZyb20pIHsKICAgICAgICB0aGlzLmZyb20uY29weShvcHRpb25zLmZyb20pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy50bykgewogICAgICAgIHRoaXMudG8uY29weShvcHRpb25zLnRvKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgfHwgKCgpID0+IHt9KTsKCiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7CiAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIHRoaXMuZ2V0QUFCQih0bXBBQUJCJDEpOwogICAgICB0bXBBcnJheS5sZW5ndGggPSAwOwogICAgICB3b3JsZC5icm9hZHBoYXNlLmFhYmJRdWVyeSh3b3JsZCwgdG1wQUFCQiQxLCB0bXBBcnJheSk7CiAgICAgIHRoaXMuaW50ZXJzZWN0Qm9kaWVzKHRtcEFycmF5KTsKICAgICAgcmV0dXJuIHRoaXMuaGFzSGl0OwogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2R5KGJvZHksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZTsKCiAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFib2R5LmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoKHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwICYgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpOwogICAgICBjb25zdCBxaSA9IGludGVyc2VjdEJvZHlfcWk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IGJvZHkuc2hhcGVzLmxlbmd0aDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gYm9keS5zaGFwZXNbaV07CgogICAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFzaGFwZS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgICAgY29udGludWU7IC8vIFNraXAKICAgICAgICB9CgogICAgICAgIGJvZHkucXVhdGVybmlvbi5tdWx0KGJvZHkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICBib2R5LnF1YXRlcm5pb24udm11bHQoYm9keS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTsKICAgICAgICB0aGlzLmludGVyc2VjdFNoYXBlKHNoYXBlLCBxaSwgeGksIGJvZHkpOwoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGFuIGFycmF5IGJvZGllcywgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBwYXJhbSBib2RpZXMgQW4gYXJyYXkgb2YgQm9keSBvYmplY3RzLgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKgogICAgICovCgoKICAgIGludGVyc2VjdEJvZGllcyhib2RpZXMsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBib2RpZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgbDsgaSsrKSB7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIHZlY3Rvci4KICAgICAqLwoKCiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7CiAgICAgIHRoaXMudG8udnN1Yih0aGlzLmZyb20sIHRoaXMuZGlyZWN0aW9uKTsKICAgICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICB9CgogICAgaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207IC8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlCgogICAgICBjb25zdCBkaXN0YW5jZSA9IGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCB0aGlzLmRpcmVjdGlvbiwgcG9zaXRpb24pOwoKICAgICAgaWYgKGRpc3RhbmNlID4gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGludGVyc2VjdE1ldGhvZCA9IHRoaXNbc2hhcGUudHlwZV07CgogICAgICBpZiAoaW50ZXJzZWN0TWV0aG9kKSB7CiAgICAgICAgaW50ZXJzZWN0TWV0aG9kLmNhbGwodGhpcywgc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCBzaGFwZSk7CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Qm94KGJveCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleChib3guY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSk7CiAgICB9CgogICAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgIGNvbnN0IGxlbiA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb0Zyb20gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKICAgICAgdG8udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CgogICAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGZyb20uZGlzdGFuY2VUbyh0bykgPCBwbGFuZVRvRnJvbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgbl9kb3RfZGlyID0gd29ybGROb3JtYWwuZG90KGRpcmVjdGlvbik7CgogICAgICBpZiAoTWF0aC5hYnMobl9kb3RfZGlyKSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBwbGFuZVBvaW50VG9Gcm9tID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGlyX3NjYWxlZF93aXRoX3QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBwbGFuZVBvaW50VG9Gcm9tKTsKICAgICAgY29uc3QgdCA9IC13b3JsZE5vcm1hbC5kb3QocGxhbmVQb2ludFRvRnJvbSkgLyBuX2RvdF9kaXI7CiAgICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7CiAgICAgIGZyb20udmFkZChkaXJfc2NhbGVkX3dpdGhfdCwgaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCBoaXRQb2ludFdvcmxkLCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgQUFCQiBvZiB0aGUgcmF5LgogICAgICovCgoKICAgIGdldEFBQkIoYWFiYikgewogICAgICBjb25zdCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBhYWJiOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7CiAgICAgIGxvd2VyQm91bmQueSA9IE1hdGgubWluKHRvLnksIGZyb20ueSk7CiAgICAgIGxvd2VyQm91bmQueiA9IE1hdGgubWluKHRvLnosIGZyb20ueik7CiAgICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7CiAgICAgIHVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRvLnksIGZyb20ueSk7CiAgICAgIHVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRvLnosIGZyb20ueik7CiAgICB9CgogICAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBzaGFwZS5kYXRhOwogICAgICBzaGFwZS5lbGVtZW50U2l6ZTsgLy8gQ29udmVydCB0aGUgcmF5IHRvIGxvY2FsIGhlaWdodGZpZWxkIGNvb3JkaW5hdGVzCgogICAgICBjb25zdCBsb2NhbFJheSA9IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5OyAvL25ldyBSYXkodGhpcy5mcm9tLCB0aGlzLnRvKTsKCiAgICAgIGxvY2FsUmF5LmZyb20uY29weSh0aGlzLmZyb20pOwogICAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LmZyb20sIGxvY2FsUmF5LmZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LnRvLCBsb2NhbFJheS50byk7CiAgICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7CiAgICAgIGxldCBpTWluWDsKICAgICAgbGV0IGlNaW5ZOwogICAgICBsZXQgaU1heFg7CiAgICAgIGxldCBpTWF4WTsgLy8gU2V0IHRvIG1heAoKICAgICAgaU1pblggPSBpTWluWSA9IDA7CiAgICAgIGlNYXhYID0gaU1heFkgPSBzaGFwZS5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpOwogICAgICBsb2NhbFJheS5nZXRBQUJCKGFhYmIpOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTsKICAgICAgaU1pblkgPSBNYXRoLm1heChpTWluWSwgaW5kZXhbMV0pOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7CiAgICAgIGlNYXhZID0gTWF0aC5taW4oaU1heFksIGluZGV4WzFdICsgMSk7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHNoYXBlLmdldEFhYmJBdEluZGV4KGksIGosIGFhYmIpOwoKICAgICAgICAgIGlmICghYWFiYi5vdmVybGFwc1JheShsb2NhbFJheSkpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IC8vIExvd2VyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwoKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1czsKICAgICAgY29uc3QgYSA9ICh0by54IC0gZnJvbS54KSAqKiAyICsgKHRvLnkgLSBmcm9tLnkpICoqIDIgKyAodG8ueiAtIGZyb20ueikgKiogMjsKICAgICAgY29uc3QgYiA9IDIgKiAoKHRvLnggLSBmcm9tLngpICogKGZyb20ueCAtIHBvc2l0aW9uLngpICsgKHRvLnkgLSBmcm9tLnkpICogKGZyb20ueSAtIHBvc2l0aW9uLnkpICsgKHRvLnogLSBmcm9tLnopICogKGZyb20ueiAtIHBvc2l0aW9uLnopKTsKICAgICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjsKICAgICAgY29uc3QgZGVsdGEgPSBiICoqIDIgLSA0ICogYSAqIGM7CiAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludDsKICAgICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7CgogICAgICBpZiAoZGVsdGEgPCAwKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7CiAgICAgICAgLy8gc2luZ2xlIGludGVyc2VjdGlvbiBwb2ludAogICAgICAgIGZyb20ubGVycCh0bywgZGVsdGEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZDEgPSAoLWIgLSBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CiAgICAgICAgY29uc3QgZDIgPSAoLWIgKyBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CgogICAgICAgIGlmIChkMSA+PSAwICYmIGQxIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMiwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Q29udmV4KHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RDb252ZXhfbm9ybWFsOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBmYWNlTGlzdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mYWNlTGlzdCB8fCBudWxsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgZmFjZXMgPSBzaGFwZS5mYWNlczsKICAgICAgY29uc3QgdmVydGljZXMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyh0byk7CiAgICAgIGNvbnN0IE5mYWNlcyA9IGZhY2VMaXN0ID8gZmFjZUxpc3QubGVuZ3RoIDogZmFjZXMubGVuZ3RoOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7CiAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdCA/IGZhY2VMaXN0W2pdIDogajsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbZmldOwogICAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTsKICAgICAgICBjb25zdCBxID0gcXVhdDsKICAgICAgICBjb25zdCB4ID0gcG9zaXRpb247IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgdmVjdG9yLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQodmVjdG9yLCB2ZWN0b3IpOwogICAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCgogICAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGlmIChkb3QgPCAwKSB7CiAgICAgICAgLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gYSBpcyB0aGUgcG9pbnQgd2UgY29tcGFyZSBwb2ludHMgYiBhbmQgYyB3aXRoLgoKICAgICAgICBhLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQoYSwgYSk7CiAgICAgICAgeC52YWRkKGEsIGEpOwoKICAgICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgLy8gVHJhbnNmb3JtIDMgdmVydGljZXMgdG8gd29ybGQgY29vcmRzCiAgICAgICAgICBiLmNvcHkodmVydGljZXNbZmFjZVtpXV0pOwogICAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7CiAgICAgICAgICBxLnZtdWx0KGIsIGIpOwogICAgICAgICAgcS52bXVsdChjLCBjKTsKICAgICAgICAgIHgudmFkZChiLCBiKTsKICAgICAgICAgIHgudmFkZChjLCBjKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VUbyhmcm9tKTsKCiAgICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSkgfHwgZGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCBmaSk7CiAgICAgICAgfSAvLyB9CgogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE9wdGltaXplIGJ5IHRyYW5zZm9ybWluZyB0aGUgd29ybGQgdG8gbG9jYWwgc3BhY2UgZmlyc3QuCiAgICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cAogICAgICovCgoKICAgIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlczsKICAgICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgbG9jYWxEaXJlY3Rpb24gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uOwogICAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTsKICAgICAgY29uc3QgbG9jYWxUbyA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbzsKICAgICAgY29uc3Qgd29ybGRJbnRlcnNlY3RQb2ludCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludDsKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlczsKICAgICAgbWVzaC52ZXJ0aWNlczsgLy8gY29uc3Qgbm9ybWFscyA9IG1lc2guZmFjZU5vcm1hbHMKCiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIHRyZWVUcmFuc2Zvcm0ucG9zaXRpb24uY29weShwb3NpdGlvbik7CiAgICAgIHRyZWVUcmFuc2Zvcm0ucXVhdGVybmlvbi5jb3B5KHF1YXQpOyAvLyBUcmFuc2Zvcm0gcmF5IHRvIGxvY2FsIHNwYWNlIQoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZGlyZWN0aW9uLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCB0bywgbG9jYWxUbyk7CiAgICAgIGxvY2FsVG8ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsVG8ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsRnJvbS54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbEZyb20ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsVG8udnN1Yihsb2NhbEZyb20sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCA9IGxvY2FsRnJvbS5kaXN0YW5jZVNxdWFyZWQobG9jYWxUbyk7CiAgICAgIG1lc2gudHJlZS5yYXlRdWVyeSh0aGlzLCB0cmVlVHJhbnNmb3JtLCB0cmlhbmdsZXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTsKICAgICAgICBtZXNoLmdldE5vcm1hbCh0cmlhbmdsZXNJbmRleCwgbm9ybWFsKTsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKICAgICAgICAvLyBpZiAoTWF0aC5hYnMoIGRvdCApIDwgdGhpcy5wcmVjaXNpb24pewogICAgICAgIC8vICAgICBjb250aW51ZTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGxvY2FsRGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlcwoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTsKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDJdLCBjKTsKICAgICAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVNxdWFyZWQobG9jYWxGcm9tKTsKCiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykpIHx8IHNxdWFyZWREaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyB0cmFuc2Zvcm0gaW50ZXJzZWN0cG9pbnQgYW5kIG5vcm1hbCB0byB3b3JsZAoKCiAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIGludGVyc2VjdFBvaW50LCB3b3JsZEludGVyc2VjdFBvaW50KTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgd29ybGRJbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgdHJpYW5nbGVzSW5kZXgpOwogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZQogICAgICovCgoKICAgIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7IC8vIFNraXAgYmFjayBmYWNlcz8KCiAgICAgIGlmICh0aGlzLnNraXBCYWNrZmFjZXMgJiYgbm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikgPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTsKCiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7CiAgICAgICAgY2FzZSBSYXkuQUxMOgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQ0xPU0VTVDoKICAgICAgICAgIC8vIFN0b3JlIGlmIGNsb3NlciB0aGFuIGN1cnJlbnQgY2xvc2VzdAogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmVzdWx0LmRpc3RhbmNlIHx8ICFyZXN1bHQuaGFzSGl0KSB7CiAgICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQU5ZOgogICAgICAgICAgLy8gUmVwb3J0IGFuZCBzdG9wLgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuc2hvdWxkU3RvcCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcyBwZXIgIkJhcnljZW50cmljIFRlY2huaXF1ZSIgYXMgbmFtZWQKICAgICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb24KICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHsKICAgICAgYy52c3ViKGEsIHYwKTsKICAgICAgYi52c3ViKGEsIHYxKTsKICAgICAgcC52c3ViKGEsIHYyKTsKICAgICAgY29uc3QgZG90MDAgPSB2MC5kb3QodjApOwogICAgICBjb25zdCBkb3QwMSA9IHYwLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTsKICAgICAgY29uc3QgZG90MTEgPSB2MS5kb3QodjEpOwogICAgICBjb25zdCBkb3QxMiA9IHYxLmRvdCh2Mik7CiAgICAgIGxldCB1OwogICAgICBsZXQgdjsKICAgICAgcmV0dXJuICh1ID0gZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpID49IDAgJiYgKHYgPSBkb3QwMCAqIGRvdDEyIC0gZG90MDEgKiBkb3QwMikgPj0gMCAmJiB1ICsgdiA8IGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxOwogICAgfQoKICB9CiAgUmF5LkNMT1NFU1QgPSBSQVlfTU9ERVMuQ0xPU0VTVDsKICBSYXkuQU5ZID0gUkFZX01PREVTLkFOWTsKICBSYXkuQUxMID0gUkFZX01PREVTLkFMTDsKICBjb25zdCB0bXBBQUJCJDEgPSBuZXcgQUFCQigpOwogIGNvbnN0IHRtcEFycmF5ID0gW107CiAgY29uc3QgdjEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCBpbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogIGNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7CiAgICBmYWNlTGlzdDogWzBdCiAgfTsKICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkgPSBuZXcgUmF5KCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXggPSBbXTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF92ZWN0b3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBBQUJCKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgdjAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7CiAgICAvLyB2MCBpcyB2ZWN0b3IgZnJvbSBmcm9tIHRvIHBvc2l0aW9uCiAgICBwb3NpdGlvbi52c3ViKGZyb20sIHYwKTsKICAgIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbQoKICAgIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7CiAgICBpbnRlcnNlY3QudmFkZChmcm9tLCBpbnRlcnNlY3QpOwogICAgY29uc3QgZGlzdGFuY2UgPSBwb3NpdGlvbi5kaXN0YW5jZVRvKGludGVyc2VjdCk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfQoKICAvKioKICAgKiBTd2VlcCBhbmQgcHJ1bmUgYnJvYWRwaGFzZSBhbG9uZyBvbmUgYXhpcy4KICAgKi8KICBjbGFzcyBTQVBCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQXhpcyB0byBzb3J0IHRoZSBib2RpZXMgYWxvbmcuCiAgICAgKiBTZXQgdG8gMCBmb3IgeCBheGlzLCBhbmQgMSBmb3IgeSBheGlzLgogICAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRzIG9mIHR3byBib2RpZXMgb3ZlcmxhcCwgYWxvbmcgdGhlIGdpdmVuIFNBUCBheGlzLgogICAgICovCiAgICBzdGF0aWMgY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpIHsKICAgICAgbGV0IGJpUG9zOwogICAgICBsZXQgYmpQb3M7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi54OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueDsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLnk7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi55OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24uejsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLno7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIHJqID0gYmouYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIGJvdW5kQTIgPSBiaVBvcyArIHJpLAogICAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajsKICAgICAgcmV0dXJuIGJvdW5kQjEgPCBib3VuZEEyOwogICAgfSAvLyBOb3RlOiB0aGVzZSBhcmUgaWRlbnRpY2FsLCBzYXZlIGZvciB4L3kveiBsb3dlcmJvdW5kCgogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WAogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueCA8PSB2LmFhYmIubG93ZXJCb3VuZC54KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRZCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRZKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFoKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFooYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnogPD0gdi5hYWJiLmxvd2VyQm91bmQueikgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSBbXTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwoKICAgICAgdGhpcy5fYWRkQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTsKICAgICAgfTsKCiAgICAgIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGlkeCA9IGF4aXNMaXN0LmluZGV4T2YoZXZlbnQuYm9keSk7CgogICAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAod29ybGQpIHsKICAgICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHdvcmxkCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHsKICAgICAgLy8gQ2xlYXIgdGhlIG9sZCBheGlzIGFycmF5CiAgICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuYXhpc0xpc3QucHVzaCh3b3JsZC5ib2RpZXNbaV0pOwogICAgICB9IC8vIFJlbW92ZSBvbGQgaGFuZGxlcnMsIGlmIGFueQoKCiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7IC8vIEFkZCBoYW5kbGVycyB0byB1cGRhdGUgdGhlIGxpc3Qgb2YgYm9kaWVzLgoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29sbGVjdCBhbGwgY29sbGlzaW9uIHBhaXJzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfSAvLyBMb29rIHRocm91Z2ggdGhlIGxpc3QKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBOOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghU0FQQnJvYWRwaGFzZS5jaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzb3J0TGlzdCgpIHsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGJpLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYmkudXBkYXRlQUFCQigpOwogICAgICAgIH0KICAgICAgfSAvLyBTb3J0IHRoZSBsaXN0CgoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFgoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFooYXhpc0xpc3QpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS4KICAgICAqIFdpbGwgYXV0b21hdGljYWxseSBzZXQgcHJvcGVydHkgYGF4aXNJbmRleGAuCiAgICAgKi8KCgogICAgYXV0b0RldGVjdEF4aXMoKSB7CiAgICAgIGxldCBzdW1YID0gMDsKICAgICAgbGV0IHN1bVgyID0gMDsKICAgICAgbGV0IHN1bVkgPSAwOwogICAgICBsZXQgc3VtWTIgPSAwOwogICAgICBsZXQgc3VtWiA9IDA7CiAgICAgIGxldCBzdW1aMiA9IDA7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBpbnZOID0gMSAvIE47CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54OwogICAgICAgIHN1bVggKz0gY2VudGVyWDsKICAgICAgICBzdW1YMiArPSBjZW50ZXJYICogY2VudGVyWDsKICAgICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55OwogICAgICAgIHN1bVkgKz0gY2VudGVyWTsKICAgICAgICBzdW1ZMiArPSBjZW50ZXJZICogY2VudGVyWTsKICAgICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56OwogICAgICAgIHN1bVogKz0gY2VudGVyWjsKICAgICAgICBzdW1aMiArPSBjZW50ZXJaICogY2VudGVyWjsKICAgICAgfQoKICAgICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWSA9IHN1bVkyIC0gc3VtWSAqIHN1bVkgKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVogPSBzdW1aMiAtIHN1bVogKiBzdW1aICogaW52TjsKCiAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVkpIHsKICAgICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFyaWFuY2VZID4gdmFyaWFuY2VaKSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IFtdOwogICAgICB9CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgYXhpcyA9ICd4JzsKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBheGlzID0gJ3knOwogICAgICB9CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgYXhpcyA9ICd6JzsKICAgICAgfQoKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBhYWJiLmxvd2VyQm91bmRbYXhpc107CiAgICAgIGFhYmIudXBwZXJCb3VuZFtheGlzXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhpc0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYi51cGRhdGVBQUJCKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgY2xhc3MgVXRpbHMgewogICAgLyoqCiAgICAgKiBFeHRlbmQgYW4gb3B0aW9ucyBvYmplY3Qgd2l0aCBkZWZhdWx0IHZhbHVlcy4KICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC4KICAgICAqIEBwYXJhbSBkZWZhdWx0cyBBbiBvYmplY3QgY29udGFpbmluZyBkZWZhdWx0IHZhbHVlcy4KICAgICAqIEByZXR1cm4gVGhlIG1vZGlmaWVkIG9wdGlvbnMgb2JqZWN0LgogICAgICovCiAgICBzdGF0aWMgZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdHMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7CiAgICAgICAgaWYgKCEoa2V5IGluIG9wdGlvbnMpKSB7CiAgICAgICAgICBvcHRpb25zW2tleV0gPSBkZWZhdWx0c1trZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uc3RyYWludCBiYXNlIGNsYXNzCiAgICovCiAgY2xhc3MgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIEVxdWF0aW9ucyB0byBiZSBzb2x2ZWQgaW4gdGhpcyBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGZhbHNlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2RpZXMgdG8gY29sbGlkZSB3aGVuIHRoZXkgYXJlIGNvbm5lY3RlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KICBDb25zdHJhaW50LmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJvdGF0aW9uYWwgPSBuZXcgVmVjMygpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIG90aGVyIEphY29iaWFuRWxlbWVudAogICAgICovCgoKICAgIG11bHRpcGx5RWxlbWVudChlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnMKICAgICAqLwoKCiAgICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkgewogICAgICByZXR1cm4gc3BhdGlhbC5kb3QodGhpcy5zcGF0aWFsKSArIHJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCiAgY2xhc3MgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1heGltdW0gKHJlYWQ6IHBvc2l0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogQSBudW1iZXIsIHByb3BvcnRpb25hbCB0byB0aGUgZm9yY2UgYWRkZWQgdG8gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1pbkZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtaW5Gb3JjZSA9IC0xZTY7CiAgICAgIH0KCiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQogIEVxdWF0aW9uLmlkQ291bnRlciA9IDA7CiAgY29uc3QgaU1maSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaU1maiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW52SWpfdm11bHRfdGF1aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wID0gbmV3IFZlYzMoKTsKICBjb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KICBjbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqICJib3VuY2luZXNzIjogdTEgPSAtZSp1MAogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBnb2VzIGZyb20gdGhlIGNlbnRlciBvZiBiaSB0byB0aGUgY29udGFjdCBwb2ludC4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgc3RhcnRzIGluIGJvZHkgaiBwb3NpdGlvbiBhbmQgZ29lcyB0byB0aGUgY29udGFjdCBwb2ludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSAwLjA7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5uaSA9IG5ldyBWZWMzKCk7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeG4gPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeG4gPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDI7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBiaS5mb3JjZTsKICAgICAgYmkudG9ycXVlOwogICAgICBjb25zdCB2aiA9IGJqLnZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmouZm9yY2U7CiAgICAgIGJqLnRvcnF1ZTsKICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMgPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDM7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgbiA9IHRoaXMubmk7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgcmkuY3Jvc3Mobiwgcml4bik7CiAgICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSkKICAgICAgLy8gRyA9IFsgLW5pICAtcml4biAgbmkgIHJqeG4gXQoKICAgICAgbi5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeG4ubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkobik7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanhuKTsgLy8gQ2FsY3VsYXRlIHRoZSBwZW5ldHJhdGlvbiB2ZWN0b3IKCiAgICAgIHBlbmV0cmF0aW9uVmVjLmNvcHkoYmoucG9zaXRpb24pOwogICAgICBwZW5ldHJhdGlvblZlYy52YWRkKHJqLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgcGVuZXRyYXRpb25WZWMudnN1YihyaSwgcGVuZXRyYXRpb25WZWMpOwogICAgICBjb25zdCBnID0gbi5kb3QocGVuZXRyYXRpb25WZWMpOyAvLyBDb21wdXRlIGl0ZXJhdGlvbgoKICAgICAgY29uc3QgZVBsdXNPbmUgPSB0aGlzLnJlc3RpdHV0aW9uICsgMTsKICAgICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCgogICAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHsKICAgICAgY29uc3QgdmkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aTsKICAgICAgY29uc3QgdmogPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92ajsKICAgICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTsKICAgICAgY29uc3QgeGogPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94ajsKICAgICAgY29uc3QgcmVsVmVsID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsOwogICAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpOwogICAgICB0aGlzLmJqLnBvc2l0aW9uLnZhZGQodGhpcy5yaiwgeGopOwogICAgICB0aGlzLmJpLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhpLCB2aSk7CiAgICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTsKICAgICAgdmkudnN1Yih2aiwgcmVsVmVsKTsKICAgICAgcmV0dXJuIHRoaXMubmkuZG90KHJlbFZlbCk7CiAgICB9CgogIH0KICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDEgPSBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMKCiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDMgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF9yZWxWZWwgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25uZWN0cyB0d28gYm9kaWVzIGF0IGdpdmVuIG9mZnNldCBwb2ludHMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgYm9keUEgPSBuZXcgQm9keSh7IG1hc3M6IDEgfSkKICAgKiAgICAgY29uc3QgYm9keUIgPSBuZXcgQm9keSh7IG1hc3M6IDEgfSkKICAgKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKQogICAqICAgICBib2R5Qi5wb3NpdGlvbi5zZXQoMSwgMCwgMCkKICAgKiAgICAgYm9keUEuYWRkU2hhcGUoc2hhcGVBKQogICAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keUEpCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keUIpCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMCkKICAgKiAgICAgY29uc3QgbG9jYWxQaXZvdEIgPSBuZXcgVmVjMygtMSwgMCwgMCkKICAgKiAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KGJvZHlBLCBsb2NhbFBpdm90QSwgYm9keUIsIGxvY2FsUGl2b3RCKQogICAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpCiAgICovCiAgY2xhc3MgUG9pbnRUb1BvaW50Q29uc3RyYWludCBleHRlbmRzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcGl2b3RBIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUEgd2hpY2ggYm9keUEgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC4KICAgICAqIEBwYXJhbSBwaXZvdEIgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QiB3aGljaCBib2R5QiBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgcGl2b3RBLCBib2R5QiwgcGl2b3RCLCBtYXhGb3JjZSkgewogICAgICBpZiAocGl2b3RBID09PSB2b2lkIDApIHsKICAgICAgICBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAocGl2b3RCID09PSB2b2lkIDApIHsKICAgICAgICBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLnBpdm90QSA9IHBpdm90QS5jbG9uZSgpOwogICAgICB0aGlzLnBpdm90QiA9IHBpdm90Qi5jbG9uZSgpOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWSA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOyAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goeCwgeSwgeik7IC8vIE1ha2UgdGhlIGVxdWF0aW9ucyBiaWRpcmVjdGlvbmFsCgogICAgICB4Lm1pbkZvcmNlID0geS5taW5Gb3JjZSA9IHoubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB4Lm5pLnNldCgxLCAwLCAwKTsKICAgICAgeS5uaS5zZXQoMCwgMSwgMCk7CiAgICAgIHoubmkuc2V0KDAsIDAsIDEpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHggPSB0aGlzLmVxdWF0aW9uWDsKICAgICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZOwogICAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QiwgeC5yaik7CiAgICAgIHkucmkuY29weSh4LnJpKTsKICAgICAgeS5yai5jb3B5KHgucmopOwogICAgICB6LnJpLmNvcHkoeC5yaSk7CiAgICAgIHoucmouY29weSh4LnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBDb25lIGVxdWF0aW9uLiBXb3JrcyB0byBrZWVwIHRoZSBnaXZlbiBib2R5IHdvcmxkIHZlY3RvcnMgYWxpZ25lZCwgb3IgdGlsdGVkIHdpdGhpbiBhIGdpdmVuIGFuZ2xlIGZyb20gZWFjaCBvdGhlci4KICAgKi8KICBjbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIExvY2FsIGF4aXMgaW4gQQogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEIKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlICJjb25lIGFuZ2xlIiB0byBrZWVwCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDI7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBUaGUgYW5nbGUgYmV0d2VlbiB0d28gdmVjdG9yIGlzOgogICAgICAvLyBjb3ModGhldGEpID0gYSAqIGIgLyAobGVuZ3RoKGEpICogbGVuZ3RoKGIpID0geyBsZW4oYSkgPSBsZW4oYikgPSAxIH0gPSBhICogYgogICAgICAvLyBnID0gYSAqIGIKICAgICAgLy8gZ2RvdCA9IChiIHggYSkgKiB3aSArIChhIHggYikgKiB3agogICAgICAvLyBHID0gWzAgYnhhIDAgYXhiXQogICAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTsKICAgICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTsKICAgICAgY29uc3QgZyA9IE1hdGguY29zKHRoaXMuYW5nbGUpIC0gbmkuZG90KG5qKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CiAgY29uc3QgdG1wVmVjMSQyID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBSb3RhdGlvbmFsIGNvbnN0cmFpbnQuIFdvcmtzIHRvIGtlZXAgdGhlIGxvY2FsIHZlY3RvcnMgb3J0aG9nb25hbCB0byBlYWNoIG90aGVyIGluIHdvcmxkIHNwYWNlLgogICAqLwogIGNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heEFuZ2xlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCiAgY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBheGlzIGRpcmVjdGlvbiBmb3IgdGhlIGNvbnN0cmFpbnQgb2YgdGhlIGJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHdpc3QgYW5nbGUgb2YgdGhlIGpvaW50LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgICAgY29uc3QgYyA9IHRoaXMuY29uZUVxdWF0aW9uID0gbmV3IENvbmVFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy50d2lzdEFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudHdpc3RBbmdsZSA6IDA7IC8vIE1ha2UgdGhlIGNvbmUgZXF1YXRpb24gcHVzaCB0aGUgYm9kaWVzIHRvd2FyZCB0aGUgY29uZSBheGlzLCBub3Qgb3V0d2FyZAoKICAgICAgYy5tYXhGb3JjZSA9IDA7CiAgICAgIGMubWluRm9yY2UgPSAtbWF4Rm9yY2U7IC8vIE1ha2UgdGhlIHR3aXN0IGVxdWF0aW9uIGFkZCB0b3JxdWUgdG93YXJkIHRoZSBpbml0aWFsIHBvc2l0aW9uCgogICAgICB0Lm1heEZvcmNlID0gMDsKICAgICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChjLCB0KTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBjb25lID0gdGhpcy5jb25lRXF1YXRpb247CiAgICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVXBkYXRlIHRoZSBheGVzIHRvIHRoZSBjb25lIGNvbnN0cmFpbnQKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNBLCBjb25lLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0IsIGNvbmUuYXhpc0IpOyAvLyBVcGRhdGUgdGhlIHdvcmxkIGF4ZXMgaW4gdGhlIHR3aXN0IGNvbnN0cmFpbnQKCiAgICAgIHRoaXMuYXhpc0EudGFuZ2VudHModHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIHRoaXMuYXhpc0IudGFuZ2VudHModHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlOwogICAgICB0d2lzdC5tYXhBbmdsZSA9IHRoaXMudHdpc3RBbmdsZTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29uc3RyYWlucyB0d28gYm9kaWVzIHRvIGJlIGF0IGEgY29uc3RhbnQgZGlzdGFuY2UgZnJvbSBlYWNoIG90aGVycyBjZW50ZXIgb2YgbWFzcy4KICAgKi8KICBjbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRpc3RhbmNlIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgZGlzdGFuY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CgogICAgICBpZiAodHlwZW9mIGRpc3RhbmNlID09PSAndW5kZWZpbmVkJykgewogICAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb24gPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWwKCiAgICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICBlcS5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBlcSA9IHRoaXMuZGlzdGFuY2VFcXVhdGlvbjsKICAgICAgY29uc3QgaGFsZkRpc3QgPSB0aGlzLmRpc3RhbmNlICogMC41OwogICAgICBjb25zdCBub3JtYWwgPSBlcS5uaTsKICAgICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTsKICAgICAgbm9ybWFsLnNjYWxlKC1oYWxmRGlzdCwgZXEucmopOwogICAgfQoKICB9CgogIC8qKgogICAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuCiAgICovCiAgY2xhc3MgTG9ja0NvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7IC8vIFNldCBwaXZvdCBwb2ludCBpbiBiZXR3ZWVuCgogICAgICBjb25zdCBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoYWxmV2F5ID0gbmV3IFZlYzMoKTsKICAgICAgYm9keUEucG9zaXRpb24udmFkZChib2R5Qi5wb3NpdGlvbiwgaGFsZldheSk7CiAgICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTsKICAgICAgYm9keUIucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RCKTsKICAgICAgYm9keUEucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RBKTsgLy8gVGhlIHBvaW50LXRvLXBvaW50IGNvbnN0cmFpbnQgd2lsbCBrZWVwIGEgcG9pbnQgc2hhcmVkIGJldHdlZW4gdGhlIGJvZGllcwoKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOyAvLyBTdG9yZSBpbml0aWFsIHJvdGF0aW9uIG9mIHRoZSBib2RpZXMgYXMgdW5pdCB2ZWN0b3JzIGluIHRoZSBsb2NhbCBib2R5IHNwYWNlcwoKICAgICAgdGhpcy54QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueEIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy55QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMuekEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOwogICAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlCgogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBUaGVzZSB2ZWN0b3IgcGFpcnMgbXVzdCBiZSBvcnRob2dvbmFsCgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QSwgcjEuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QiwgcjEuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QiwgcjIuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QSwgcjMuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpOwogICAgfQoKICB9CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwoKICAvKioKICAgKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLgogICAqLwogIGNsYXNzIFJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTW90b3IgdmVsb2NpdHkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gZyA9IDAKICAgICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqCiAgICAgIC8vIGdkb3QgPSBHICogVyA9IEcgKiBbdmkgd2kgdmogd2pdCiAgICAgIC8vID0+CiAgICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7CiAgICAgIGF4aXNCLm5lZ2F0ZShHQi5yb3RhdGlvbmFsKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpIC0gdGhpcy50YXJnZXRWZWxvY2l0eTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KCiAgLyoqCiAgICogSGluZ2UgY29uc3RyYWludC4gVGhpbmsgb2YgaXQgYXMgYSBkb29yIGhpbmdlLiBJdCB0cmllcyB0byBrZWVwIHRoZSBkb29yIGluIHRoZSBjb3JyZWN0IHBsYWNlIGFuZCB3aXRoIHRoZSBjb3JyZWN0IG9yaWVudGF0aW9uLgogICAqLwogIGNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIGF4aXMsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KICBjbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLy8gVGFuZ2VudAoKICAgIC8qKgogICAgICogQHBhcmFtIHNsaXBGb3JjZSBzaG91bGQgYmUgKy1GX2ZyaWN0aW9uID0gKy1tdSAqIEZfbm9ybWFsID0gKy1tdSAqIG0gKiBnCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgc2xpcEZvcmNlKSB7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLXNsaXBGb3JjZSwgc2xpcEZvcmNlKTsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KICBjbGFzcyBDb250YWN0TWF0ZXJpYWwgewogICAgLyoqCiAgICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBhcnRpY2lwYXRpbmcgbWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBGcmljdGlvbiBjb2VmZmljaWVudC4KICAgICAqIEBkZWZhdWx0IDAuMwogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBjb2VmZmljaWVudC4KICAgICAqIEBkZWZhdWx0IDAuMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMWU3CiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlbGF4YXRpb24gdGltZSBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuCiAgICAgKiBAZGVmYXVsdCAzCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgZnJpY3Rpb24gZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMWU3CiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlbGF4YXRpb24gdGltZSBvZiB0aGUgcHJvZHVjZWQgZnJpY3Rpb24gZXF1YXRpb25zCiAgICAgKiBAZGVmYXVsdCAzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG0xLCBtMiwgb3B0aW9ucykgewogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGZyaWN0aW9uOiAwLjMsCiAgICAgICAgcmVzdGl0dXRpb246IDAuMywKICAgICAgICBjb250YWN0RXF1YXRpb25TdGlmZm5lc3M6IDFlNywKICAgICAgICBjb250YWN0RXF1YXRpb25SZWxheGF0aW9uOiAzLAogICAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjogMwogICAgICB9KTsKICAgICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSBbbTEsIG0yXTsKICAgICAgdGhpcy5mcmljdGlvbiA9IG9wdGlvbnMuZnJpY3Rpb247CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb247CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb247CiAgICB9CgogIH0KICBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDsKCiAgLyoqCiAgICogRGVmaW5lcyBhIHBoeXNpY3MgbWF0ZXJpYWwuCiAgICovCiAgY2xhc3MgTWF0ZXJpYWwgewogICAgLyoqCiAgICAgKiBNYXRlcmlhbCBuYW1lLgogICAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy4KICAgICAqIEB0b2RvIERlcHJlY2F0ZSB0aGlzCiAgICAgKi8KCiAgICAvKiogTWF0ZXJpYWwgaWQuICovCgogICAgLyoqCiAgICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIGZyaWN0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSByZXN0aXR1dGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgbGV0IG5hbWUgPSAnJzsgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZml4CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy9jb25zb2xlLndhcm4oYFBhc3NpbmcgYSBzdHJpbmcgdG8gTWF0ZXJpYWxPcHRpb25zIGlzIGRlcHJlY2F0ZWQsIGFuZCBoYXMgbm8gZWZmZWN0YCkKICAgICAgICBuYW1lID0gb3B0aW9uczsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5mcmljdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZyaWN0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZnJpY3Rpb24gOiAtMTsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHR5cGVvZiBvcHRpb25zLnJlc3RpdHV0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMucmVzdGl0dXRpb24gOiAtMTsKICAgIH0KCiAgfQogIE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIEEgc3ByaW5nLCBjb25uZWN0aW5nIHR3byBib2RpZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc3ByaW5nID0gbmV3IFNwcmluZyhib3hCb2R5LCBzcGhlcmVCb2R5LCB7CiAgICogICAgICAgcmVzdExlbmd0aDogMCwKICAgKiAgICAgICBzdGlmZm5lc3M6IDUwLAogICAqICAgICAgIGRhbXBpbmc6IDEsCiAgICogICAgIH0pCiAgICoKICAgKiAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICogICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgKGV2ZW50KSA9PiB7CiAgICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKQogICAqICAgICB9KQogICAqLwogIGNsYXNzIFNwcmluZyB7CiAgICAvKioKICAgICAqIFJlc3QgbGVuZ3RoIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID4gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID49IDAuCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogRGFtcGluZyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBGaXJzdCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogU2Vjb25kIGNvbm5lY3RlZCBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLgogICAgICogV2hlcmUgdG8gaG9vayB0aGUgc3ByaW5nIHRvIGJvZHkgQSwgaW4gbG9jYWwgYm9keSBjb29yZGluYXRlcy4KICAgICAqIEBkZWZhdWx0IG5ldyBWZWMzKCkKICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QiBpbiBsb2NhbCBib2R5QiBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEIsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnJlc3RMZW5ndGggPSB0eXBlb2Ygb3B0aW9ucy5yZXN0TGVuZ3RoID09PSAnbnVtYmVyJyA/IG9wdGlvbnMucmVzdExlbmd0aCA6IDE7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gb3B0aW9ucy5zdGlmZm5lc3MgfHwgMTAwOwogICAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTsKICAgICAgdGhpcy5ib2R5QSA9IGJvZHlBOwogICAgICB0aGlzLmJvZHlCID0gYm9keUI7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG9jYWxBbmNob3JBKSB7CiAgICAgICAgdGhpcy5sb2NhbEFuY2hvckEuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JCLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckIpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckEpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLndvcmxkQW5jaG9yQikgewogICAgICAgIHRoaXMuc2V0V29ybGRBbmNob3JCKG9wdGlvbnMud29ybGRBbmNob3JCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHsKICAgICAgdGhpcy5ib2R5QS5wb2ludFRvTG9jYWxGcmFtZSh3b3JsZEFuY2hvckEsIHRoaXMubG9jYWxBbmNob3JBKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JCLCB0aGlzLmxvY2FsQW5jaG9yQik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQSwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckEsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckIocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZSgpIHsKICAgICAgY29uc3QgayA9IHRoaXMuc3RpZmZuZXNzOwogICAgICBjb25zdCBkID0gdGhpcy5kYW1waW5nOwogICAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoOwogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjsKICAgICAgY29uc3Qgcl91bml0ID0gYXBwbHlGb3JjZV9yX3VuaXQ7CiAgICAgIGNvbnN0IHUgPSBhcHBseUZvcmNlX3U7CiAgICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7CiAgICAgIGNvbnN0IHRtcCA9IGFwcGx5Rm9yY2VfdG1wOwogICAgICBjb25zdCB3b3JsZEFuY2hvckEgPSBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQTsKICAgICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7CiAgICAgIGNvbnN0IHJpID0gYXBwbHlGb3JjZV9yaTsKICAgICAgY29uc3QgcmogPSBhcHBseUZvcmNlX3JqOwogICAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjsKICAgICAgY29uc3QgcmpfeF9mID0gYXBwbHlGb3JjZV9yal94X2Y7IC8vIEdldCB3b3JsZCBhbmNob3JzCgogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpOwogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpOyAvLyBHZXQgb2Zmc2V0IHBvaW50cwoKICAgICAgd29ybGRBbmNob3JBLnZzdWIoYm9keUEucG9zaXRpb24sIHJpKTsKICAgICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzCgogICAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpOwogICAgICBjb25zdCBybGVuID0gci5sZW5ndGgoKTsKICAgICAgcl91bml0LmNvcHkocik7CiAgICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdQoKICAgICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5CgogICAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7CiAgICAgIHUudmFkZCh0bXAsIHUpOwogICAgICBib2R5QS5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmksIHRtcCk7CiAgICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApCgogICAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllcwoKICAgICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7CiAgICAgIGJvZHlCLmZvcmNlLnZhZGQoZiwgYm9keUIuZm9yY2UpOyAvLyBBbmd1bGFyIGZvcmNlCgogICAgICByaS5jcm9zcyhmLCByaV94X2YpOwogICAgICByai5jcm9zcyhmLCByal94X2YpOwogICAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7CiAgICAgIGJvZHlCLnRvcnF1ZS52YWRkKHJqX3hfZiwgYm9keUIudG9ycXVlKTsKICAgIH0KCiAgfQogIGNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yX3VuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmlfeF9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV90bXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBXaGVlbEluZm8KICAgKi8KICBjbGFzcyBXaGVlbEluZm8gewogICAgLyoqCiAgICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLgogICAgICogQGRlZmF1bHQgLTAuMQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNsaWRpbmcKICAgICAqLwoKICAgIC8qKgogICAgICogQ29ubmVjdGlvbiBwb2ludCwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBjaGFzc2lzIGJvZHkgZnJhbWUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb25Mb2NhbAogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb25Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBheGxlTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZVdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZXN0TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25NYXhMZW5ndGgKICAgICAqIEBkZWZhdWx0IDIKICAgICAqLwoKICAgIC8qKgogICAgICogcmFkaXVzCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25TdGlmZm5lc3MKICAgICAqIEBkZWZhdWx0IDEwMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nQ29tcHJlc3Npb24KICAgICAqIEBkZWZhdWx0IDEwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRhbXBpbmdSZWxheGF0aW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBmcmljdGlvblNsaXAKICAgICAqIEBkZWZhdWx0IDEwLjUKICAgICAqLwoKICAgIC8qKiBmb3J3YXJkQWNjZWxlcmF0aW9uICovCgogICAgLyoqIHNpZGVBY2NlbGVyYXRpb24gKi8KCiAgICAvKioKICAgICAqIHN0ZWVyaW5nCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIHZhbHVlLCBpbiByYWRpYW5zLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBkZWx0YVJvdGF0aW9uCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJvbGxJbmZsdWVuY2UKICAgICAqIEBkZWZhdWx0IDAuMDEKICAgICAqLwoKICAgIC8qKgogICAgICogbWF4U3VzcGVuc2lvbkZvcmNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGVuZ2luZUZvcmNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJyYWtlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzRnJvbnRXaGVlbAogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbkZvcmNlCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNsaXBJbmZvCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNraWRJbmZvCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25MZW5ndGgKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc2lkZUltcHVsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogZm9yd2FyZEltcHVsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHJlc3VsdCBmcm9tIHJheWNhc3RpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZWVsIHdvcmxkIHRyYW5zZm9ybS4KICAgICAqLwoKICAgIC8qKgogICAgICogaXNJbkNvbnRhY3QKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQogIGNvbnN0IGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCiAgY2xhc3MgUmF5Y2FzdFZlaGljbGUgewogICAgLyoqIFRoZSBjYXIgY2hhc3NpcyBib2R5LiAqLwoKICAgIC8qKiBUaGUgd2hlZWxzLiAqLwoKICAgIC8qKiBXaWxsIGJlIHNldCB0byB0cnVlIGlmIHRoZSBjYXIgaXMgc2xpZGluZy4gKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHJpZ2h0IGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIGZvcndhcmQgYXhpcy4geD0wLCB5PTEsIHo9MiAqLwoKICAgIC8qKiBJbmRleCBvZiB0aGUgdXAgYXhpcy4geD0wLCB5PTEsIHo9MiAqLwoKICAgIC8qKiBUaGUgY29uc3RyYWludHMuICovCgogICAgLyoqIE9wdGlvbmFsIHByZS1zdGVwIGNhbGxiYWNrLiAqLwoKICAgIC8qKiBOdW1iZXIgb2Ygd2hlZWxzIG9uIHRoZSBncm91bmQuICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBvcHRpb25zLmNoYXNzaXNCb2R5OwogICAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7CiAgICAgIHRoaXMuaW5kZXhGb3J3YXJkQXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzIDogMDsKICAgICAgdGhpcy5pbmRleFVwQXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4VXBBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhVcEF4aXMgOiAxOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHt9OwoKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gMDsKICAgICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHdoZWVsLiBGb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9wdGlvbnMsIHNlZSBgV2hlZWxJbmZvYC4KICAgICAqLwoKCiAgICBhZGRXaGVlbChvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMud2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIHRoaXMud2hlZWxJbmZvcy5wdXNoKGluZm8pOwogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC4KICAgICAqLwoKCiAgICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB3aGVlbC5zdGVlcmluZyA9IHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwCiAgICAgKi8KCgogICAgYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWwKICAgICAqLwoKCiAgICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uYnJha2UgPSBicmFrZTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgdG8gdGhlIHdvcmxkLgogICAgICovCgoKICAgIGFkZFRvV29ybGQod29ybGQpIHsKICAgICAgd29ybGQuYWRkQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHsKICAgICAgICB0aGF0LnVwZGF0ZVZlaGljbGUod29ybGQuZHQpOwogICAgICB9OwoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuCiAgICAgKi8KCgogICAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkgewogICAgICByZXN1bHQuc2V0KGF4aXNJbmRleCA9PT0gMCA/IDEgOiAwLCBheGlzSW5kZXggPT09IDEgPyAxIDogMCwgYXhpc0luZGV4ID09PSAyID8gMSA6IDApOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZXN1bHQsIHJlc3VsdCk7CiAgICB9CgogICAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkgewogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDMuNiAqIGNoYXNzaXNCb2R5LnZlbG9jaXR5Lmxlbmd0aCgpOwogICAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmb3J3YXJkV29ybGQpOwoKICAgICAgaWYgKGZvcndhcmRXb3JsZC5kb3QoY2hhc3Npc0JvZHkudmVsb2NpdHkpIDwgMCkgewogICAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciAqPSAtMTsKICAgICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVTdXNwZW5zaW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgLy9hcHBseSBzdXNwZW5zaW9uIGZvcmNlCiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7CgogICAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHsKICAgICAgICAgIHN1c3BlbnNpb25Gb3JjZSA9IHdoZWVsLm1heFN1c3BlbnNpb25Gb3JjZTsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUoc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAsIGltcHVsc2UpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxwb3MpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGZ3ZCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHZlbCA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgLy93aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKCiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCB2ZWwpOyAvLyBIYWNrIHRvIGdldCB0aGUgcm90YXRpb24gaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uCgogICAgICAgIGxldCBtID0gMTsKCiAgICAgICAgc3dpdGNoICh0aGlzLmluZGV4VXBBeGlzKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIG0gPSAtMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7CiAgICAgICAgICBjb25zdCBwcm9qID0gZndkLmRvdCh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUocHJvaiwgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaik7CiAgICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvajIgPSBmd2QuZG90KHZlbCk7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gbSAqIHByb2oyICogdGltZVN0ZXAgLyB3aGVlbC5yYWRpdXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7CiAgICAgICAgICAvLyBBcHBseSBjdXN0b20gcm90YXRpb24gd2hlbiBhY2NlbGVyYXRpbmcgYW5kIHNsaWRpbmcKICAgICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAod2hlZWwuZW5naW5lRm9yY2UgPiAwID8gMSA6IC0xKSAqIHdoZWVsLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgKiB0aW1lU3RlcDsKICAgICAgICB9IC8vIExvY2sgd2hlZWxzCgoKICAgICAgICBpZiAoTWF0aC5hYnMod2hlZWwuYnJha2UpID4gTWF0aC5hYnMod2hlZWwuZW5naW5lRm9yY2UpKSB7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJvdGF0aW9uICs9IHdoZWVsLmRlbHRhUm90YXRpb247IC8vIFVzZSB0aGUgb2xkIHZhbHVlCgogICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gKj0gMC45OTsgLy8gZGFtcGluZyBvZiByb3RhdGlvbiB3aGVuIG5vdCBpbiBjb250YWN0CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkgewogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGNoYXNzaXNNYXNzID0gY2hhc3Npc0JvZHkubWFzczsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCB3X2l0ID0gMDsgd19pdCA8IG51bVdoZWVsczsgd19pdCsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW3dfaXRdOwoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nCgogICAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICAgIGNvbnN0IGN1cnJlbnRfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICAgIGNvbnN0IGxlbmd0aF9kaWZmID0gc3VzcF9sZW5ndGggLSBjdXJyZW50X2xlbmd0aDsKICAgICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXIKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OwogICAgICAgICAgbGV0IHN1c3BfZGFtcGluZzsKCiAgICAgICAgICBpZiAocHJvamVjdGVkX3JlbF92ZWwgPCAwKSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdDb21wcmVzc2lvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGZvcmNlIC09IHN1c3BfZGFtcGluZyAqIHByb2plY3RlZF9yZWxfdmVsOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzczsKCiAgICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkgewogICAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICByZW1vdmVGcm9tV29ybGQod29ybGQpIHsKICAgICAgdGhpcy5jb25zdHJhaW50czsKICAgICAgd29ybGQucmVtb3ZlQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICB9CgogICAgY2FzdFJheSh3aGVlbCkgewogICAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjsKICAgICAgY29uc3QgdGFyZ2V0ID0gY2FzdFJheV90YXJnZXQ7CiAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgbGV0IGRlcHRoID0gLTE7CiAgICAgIGNvbnN0IHJheWxlbiA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwucmFkaXVzOwogICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZDsKICAgICAgc291cmNlLnZhZGQocmF5dmVjdG9yLCB0YXJnZXQpOwogICAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDsKICAgICAgcmF5Y2FzdFJlc3VsdC5yZXNldCgpOyAvLyBUdXJuIG9mZiByYXkgY29sbGlzaW9uIHdpdGggdGhlIGNoYXNzaXMgdGVtcG9yYXJpbHkKCiAgICAgIGNvbnN0IG9sZFN0YXRlID0gY2hhc3Npc0JvZHkuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gZmFsc2U7IC8vIENhc3QgcmF5IGFnYWluc3Qgd29ybGQKCiAgICAgIHRoaXMud29ybGQucmF5VGVzdChzb3VyY2UsIHRhcmdldCwgcmF5Y2FzdFJlc3VsdCk7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7CiAgICAgIGNvbnN0IG9iamVjdCA9IHJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5ncm91bmRPYmplY3QgPSAwOwoKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZDsKICAgICAgICB3aGVlbC5pc0luQ29udGFjdCA9IHRydWU7CiAgICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBoaXREaXN0YW5jZSAtIHdoZWVsLnJhZGl1czsgLy8gY2xhbXAgb24gbWF4IHN1c3BlbnNpb24gdHJhdmVsCgogICAgICAgIGNvbnN0IG1pblN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCAtIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgICAgY29uc3QgbWF4U3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKCiAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPCBtaW5TdXNwZW5zaW9uTGVuZ3RoKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID4gbWF4U3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1heFN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkZW5vbWluYXRvciA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKGRlbm9taW5hdG9yID49IC0wLjEpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gZGVub21pbmF0b3I7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vcHV0IHdoZWVsIGluZm8gYXMgaW4gcmVzdCBwb3NpdGlvbgogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIDAgKiB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHdoZWVsLmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKSB7CiAgICAgIHdoZWVsLmlzSW5Db250YWN0ID0gZmFsc2U7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLCB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQpOwogICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuZGlyZWN0aW9uTG9jYWwsIHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLgogICAgICogTm90ZSB3aGVuIHJlbmRlcmluZyB3aGVlbHM6IGR1cmluZyBlYWNoIHN0ZXAsIHdoZWVsIHRyYW5zZm9ybXMgYXJlIHVwZGF0ZWQgQkVGT1JFIHRoZSBjaGFzc2lzOyBpZS4gdGhlaXIgcG9zaXRpb24gYmVjb21lcyBpbnZhbGlkIGFmdGVyIHRoZSBzdGVwLiBUaHVzIHdoZW4geW91IHJlbmRlciB3aGVlbHMsIHlvdSBtdXN0IHVwZGF0ZSB3aGVlbCB0cmFuc2Zvcm1zIGJlZm9yZSByZW5kZXJpbmcgdGhlbS4gU2VlIHJheWNhc3RWZWhpY2xlIGRlbW8gZm9yIGFuIGV4YW1wbGUuCiAgICAgKiBAcGFyYW0gd2hlZWxJbmRleCBUaGUgd2hlZWwgaW5kZXggdG8gdXBkYXRlLgogICAgICovCgoKICAgIHVwZGF0ZVdoZWVsVHJhbnNmb3JtKHdoZWVsSW5kZXgpIHsKICAgICAgY29uc3QgdXAgPSB0bXBWZWM0OwogICAgICBjb25zdCByaWdodCA9IHRtcFZlYzU7CiAgICAgIGNvbnN0IGZ3ZCA9IHRtcFZlYzY7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICB3aGVlbC5kaXJlY3Rpb25Mb2NhbC5zY2FsZSgtMSwgdXApOwogICAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7CiAgICAgIHVwLmNyb3NzKHJpZ2h0LCBmd2QpOwogICAgICBmd2Qubm9ybWFsaXplKCk7CiAgICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZQoKICAgICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZzsKICAgICAgY29uc3Qgc3RlZXJpbmdPcm4gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICBzdGVlcmluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHVwLCBzdGVlcmluZyk7CiAgICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgcm90YXRpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZShyaWdodCwgd2hlZWwucm90YXRpb24pOyAvLyBXb3JsZCByb3RhdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHEgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5xdWF0ZXJuaW9uOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnF1YXRlcm5pb24ubXVsdChzdGVlcmluZ09ybiwgcSk7CiAgICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7CiAgICAgIHEubm9ybWFsaXplKCk7IC8vIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSB3aGVlbAoKICAgICAgY29uc3QgcCA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnBvc2l0aW9uOwogICAgICBwLmNvcHkod2hlZWwuZGlyZWN0aW9uV29ybGQpOwogICAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApOwogICAgICBwLnZhZGQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCBwKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygb25lIG9mIHRoZSB3aGVlbHMKICAgICAqLwoKCiAgICBnZXRXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsSW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS53b3JsZFRyYW5zZm9ybTsKICAgIH0KCiAgICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkgewogICAgICBjb25zdCBzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2o7IC8vY2FsY3VsYXRlIHRoZSBpbXB1bHNlLCBzbyB0aGF0IHRoZSB3aGVlbHMgZG9uJ3QgbW92ZSBzaWRld2FyZHMKCiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGZvcndhcmRXUyA9IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUzsKICAgICAgY29uc3QgYXhsZSA9IHVwZGF0ZUZyaWN0aW9uX2F4bGU7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKzsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CgogICAgICAgIGlmICghZm9yd2FyZFdTW2ldKSB7CiAgICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFheGxlW2ldKSB7CiAgICAgICAgICBheGxlW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBheGxlaSA9IGF4bGVbaV07CiAgICAgICAgICBjb25zdCB3aGVlbFRyYW5zID0gdGhpcy5nZXRXaGVlbFRyYW5zZm9ybVdvcmxkKGkpOyAvLyBHZXQgd29ybGQgYXhsZQoKICAgICAgICAgIHdoZWVsVHJhbnMudmVjdG9yVG9Xb3JsZEZyYW1lKGRpcmVjdGlvbnNbdGhpcy5pbmRleFJpZ2h0QXhpc10sIGF4bGVpKTsKICAgICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgICBjb25zdCBwcm9qID0gYXhsZWkuZG90KHN1cmZOb3JtYWxXUyk7CiAgICAgICAgICBzdXJmTm9ybWFsV1Muc2NhbGUocHJvaiwgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qKTsKICAgICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7CiAgICAgICAgICBheGxlaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHN1cmZOb3JtYWxXUy5jcm9zcyhheGxlaSwgZm9yd2FyZFdTW2ldKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChjaGFzc2lzQm9keSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgYXhsZWkpOwogICAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gc2lkZUZyaWN0aW9uU3RpZmZuZXNzMjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHNpZGVGYWN0b3IgPSAxOwogICAgICBjb25zdCBmd2RGYWN0b3IgPSAwLjU7CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7CiAgICAgICAgd2hlZWwuc2xpcEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSA9IDA7CiAgICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7CiAgICAgICAgICAvLyByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNvbnRhY3RQdCk7CgogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjaGFzc2lzQm9keSwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGZvcndhcmRXU1tpXSwgbWF4SW1wdWxzZSk7CiAgICAgICAgICByb2xsaW5nRnJpY3Rpb24gKz0gd2hlZWwuZW5naW5lRm9yY2UgKiB0aW1lU3RlcDsgLy8gcm9sbGluZ0ZyaWN0aW9uID0gMDsKCiAgICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhJbXB1bHNlIC8gcm9sbGluZ0ZyaWN0aW9uOwogICAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yOwogICAgICAgIH0gLy9zd2l0Y2ggYmV0d2VlbiBhY3RpdmUgcm9sbGluZyAodGhyb3R0bGUpLCBicmFraW5nIGFuZCBub24tYWN0aXZlIHJvbGxpbmcgZnJpY3Rpb24gKG50aHJvdHRsZS9icmVhaykKCgogICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHdoZWVsLnNraWRJbmZvID0gMTsKICAgICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwOwogICAgICAgICAgY29uc3QgbWF4aW1wU2lkZSA9IG1heGltcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNxdWFyZWQgPSBtYXhpbXAgKiBtYXhpbXBTaWRlOwogICAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDsKCiAgICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgeSA9IHdoZWVsLnNpZGVJbXB1bHNlICogc2lkZUZhY3RvciAvIHdoZWVsLnNpZGVBY2NlbGVyYXRpb247CiAgICAgICAgICBjb25zdCBpbXB1bHNlU3F1YXJlZCA9IHggKiB4ICsgeSAqIHk7CiAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7CgogICAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkgewogICAgICAgICAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTsKICAgICAgICAgICAgd2hlZWwuc2tpZEluZm8gKj0gZmFjdG9yOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xpZGluZykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKCiAgICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgICAgaWYgKHdoZWVsLnNraWRJbmZvIDwgMSkgewogICAgICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGFwcGx5IHRoZSBpbXB1bHNlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgcmVsX3BvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uCiAgICAgICAgLy9yZWxfcG9zLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgaWYgKHdoZWVsLmZvcndhcmRJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBpbXB1bHNlID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVsX3Bvcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgICAgIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGdyb3VuZE9iamVjdC5wb3NpdGlvbiwgcmVsX3BvczIpOyAvL3JlbF9wb3MyLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgICBjb25zdCBzaWRlSW1wID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuCiAgICAgICAgICAvLyBJZiByb2xsSW5mbHVlbmNlIGlzIDEsIHRoZSBpbXB1bHNlIHdpbGwgYmUgYXBwbGllZCBvbiB0aGUgaGl0UG9pbnQgKGVhc3kgdG8gcm9sbCBvdmVyKSwgaWYgaXQgaXMgemVybyBpdCB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIHNhbWUgcGxhbmUgYXMgdGhlIGNlbnRlciBvZiBtYXNzIChub3QgZWFzeSB0byByb2xsIG92ZXIpLgoKICAgICAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvTG9jYWxGcmFtZShyZWxfcG9zLCByZWxfcG9zKTsKICAgICAgICAgIHJlbF9wb3NbJ3h5eidbdGhpcy5pbmRleFVwQXhpc11dICo9IHdoZWVsLnJvbGxJbmZsdWVuY2U7CiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2Uoc2lkZUltcCwgcmVsX3Bvcyk7IC8vYXBwbHkgZnJpY3Rpb24gaW1wdWxzZSBvbiB0aGUgZ3JvdW5kCgogICAgICAgICAgc2lkZUltcC5zY2FsZSgtMSwgc2lkZUltcCk7CiAgICAgICAgICBncm91bmRPYmplY3QuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzYgPSBuZXcgVmVjMygpOwogIG5ldyBSYXkoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3RhcmdldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZGlyZWN0aW9ucyA9IFtuZXcgVmVjMygxLCAwLCAwKSwgbmV3IFZlYzMoMCwgMSwgMCksIG5ldyBWZWMzKDAsIDAsIDEpXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2F4bGUgPSBbXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MgPSBbXTsKICBjb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkgewogICAgbGV0IGoxID0gMDsKICAgIGNvbnN0IGNvbnRhY3RQb3NXb3JsZCA9IGZyaWN0aW9uUG9zV29ybGQ7IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKCiAgICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxOwogICAgY29uc3QgdmVsMiA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMjsKICAgIGNvbnN0IHZlbCA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsOyAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MC5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTsKCiAgICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7CiAgICBjb25zdCBkZW5vbTAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkwLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IGRlbm9tMSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgcmVsYXhhdGlvbiA9IDE7CiAgICBjb25zdCBqYWNEaWFnQUJJbnYgPSByZWxheGF0aW9uIC8gKGRlbm9tMCArIGRlbm9tMSk7IC8vIGNhbGN1bGF0ZSBqIHRoYXQgbW92ZXMgdXMgdG8gemVybyByZWxhdGl2ZSB2ZWxvY2l0eQoKICAgIGoxID0gLXZyZWwgKiBqYWNEaWFnQUJJbnY7CgogICAgaWYgKG1heEltcHVsc2UgPCBqMSkgewogICAgICBqMSA9IG1heEltcHVsc2U7CiAgICB9CgogICAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHsKICAgICAgajEgPSAtbWF4SW1wdWxzZTsKICAgIH0KCiAgICByZXR1cm4gajE7CiAgfQoKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkgewogICAgY29uc3QgcjAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwOwogICAgY29uc3QgYzAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwOwogICAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7CiAgICBjb25zdCBtID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tOwogICAgcG9zLnZzdWIoYm9keS5wb3NpdGlvbiwgcjApOwogICAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7CiAgICBib2R5LmludkluZXJ0aWFXb3JsZC52bXVsdChjMCwgbSk7CiAgICBtLmNyb3NzKHIwLCB2ZWMpOwogICAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTsKICB9CgogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0cwoKICBmdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7CiAgICBjb25zdCBub3JtYWxMZW5TcXIgPSBub3JtYWwubGVuZ3RoU3F1YXJlZCgpOwoKICAgIGlmIChub3JtYWxMZW5TcXIgPiAxLjEpIHsKICAgICAgcmV0dXJuIDA7IC8vIG5vIGltcHVsc2UKICAgIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwogICAgLy8gcG9zMS52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTsKCgogICAgY29uc3QgdmVsMSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMTsKICAgIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczEsIHZlbDEpOwogICAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHJlbF92ZWwgPSBub3JtYWwuZG90KHZlbCk7CiAgICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjsKICAgIGNvbnN0IG1hc3NUZXJtID0gMSAvIChib2R5MS5pbnZNYXNzICsgYm9keTIuaW52TWFzcyk7CiAgICBjb25zdCBpbXB1bHNlID0gLWNvbnRhY3REYW1waW5nICogcmVsX3ZlbCAqIG1hc3NUZXJtOwogICAgcmV0dXJuIGltcHVsc2U7CiAgfQoKICAvKioKICAgKiBTcGhlcmljYWwgc2hhcGUKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCByYWRpdXMgPSAxCiAgICogICAgIGNvbnN0IHNwaGVyZVNoYXBlID0gbmV3IENBTk5PTi5TcGhlcmUocmFkaXVzKQogICAqICAgICBjb25zdCBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHNwaGVyZVNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoc3BoZXJlQm9keSkKICAgKi8KICBjbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZS4KICAgICAqLwoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlLCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFCiAgICAgIH0pOwogICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cyAhPT0gdW5kZWZpbmVkID8gcmFkaXVzIDogMS4wOwoKICAgICAgaWYgKHRoaXMucmFkaXVzIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwaGVyZSByYWRpdXMgY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICB9CiAgICAvKiogY2FsY3VsYXRlTG9jYWxJbmVydGlhICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgSSA9IDIuMCAqIG1hc3MgKiB0aGlzLnJhZGl1cyAqIHRoaXMucmFkaXVzIC8gNS4wOwogICAgICB0YXJnZXQueCA9IEk7CiAgICAgIHRhcmdldC55ID0gSTsKICAgICAgdGFyZ2V0LnogPSBJOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqIHZvbHVtZSAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogTWF0aC5wb3codGhpcy5yYWRpdXMsIDMpIC8gMy4wOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5yYWRpdXM7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgciA9IHRoaXMucmFkaXVzOwogICAgICBjb25zdCBheGVzID0gWyd4JywgJ3knLCAneiddOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBheGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXggPSBheGVzW2ldOwogICAgICAgIG1pbltheF0gPSBwb3NbYXhdIC0gcjsKICAgICAgICBtYXhbYXhdID0gcG9zW2F4XSArIHI7CiAgICAgIH0KICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMgZm9yIGNhbGN1bGF0aW9uCgogIG5ldyBWZWMzKCk7IC8vIFJlbGF0aXZlIHZlbG9jaXR5CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpIHsKICAgICAgaWYgKHJhZGl1c1RvcCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzVG9wID0gMTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzQm90dG9tID0gMTsKICAgICAgfQoKICAgICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG51bVNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBudW1TZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQoKICAvKioKICAgKiBQYXJ0aWNsZSBzaGFwZS4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwYXJ0aWNsZVNoYXBlID0gbmV3IENBTk5PTi5QYXJ0aWNsZSgpCiAgICogICAgIGNvbnN0IHBhcnRpY2xlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBwYXJ0aWNsZVNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGFydGljbGVCb2R5KQogICAqLwogIGNsYXNzIFBhcnRpY2xlIGV4dGVuZHMgU2hhcGUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QQVJUSUNMRQogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSAwOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIEdldCBlYWNoIGF4aXMgbWF4CiAgICAgIG1pbi5jb3B5KHBvcyk7CiAgICAgIG1heC5jb3B5KHBvcyk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBwbGFuZSwgZmFjaW5nIGluIHRoZSBaIGRpcmVjdGlvbi4gVGhlIHBsYW5lIGhhcyBpdHMgc3VyZmFjZSBhdCB6PTAgYW5kIGV2ZXJ5dGhpbmcgYmVsb3cgej0wIGlzIGFzc3VtZWQgdG8gYmUgc29saWQgcGxhbmUuIFRvIG1ha2UgdGhlIHBsYW5lIGZhY2UgaW4gc29tZSBvdGhlciBkaXJlY3Rpb24gdGhhbiB6LCB5b3UgbXVzdCBwdXQgaXQgaW5zaWRlIGEgQm9keSBhbmQgcm90YXRlIHRoYXQgYm9keS4gU2VlIHRoZSBkZW1vcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpCiAgICogICAgIGNvbnN0IHBsYW5lQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDAsIHNoYXBlOiAgcGxhbmVTaGFwZSB9KQogICAqICAgICBwbGFuZUJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoLU1hdGguUEkgLyAyLCAwLCAwKSAvLyBtYWtlIGl0IGZhY2UgdXAKICAgKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpCiAgICovCiAgY2xhc3MgUGxhbmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogd29ybGROb3JtYWwgKi8KCiAgICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORQogICAgICB9KTsgLy8gV29ybGQgb3JpZW50ZWQgbm9ybWFsCgogICAgICB0aGlzLndvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CiAgICAvKiogY29tcHV0ZVdvcmxkTm9ybWFsICovCgoKICAgIGNvbXB1dGVXb3JsZE5vcm1hbChxdWF0KSB7CiAgICAgIGNvbnN0IG4gPSB0aGlzLndvcmxkTm9ybWFsOwogICAgICBuLnNldCgwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdChuLCBuKTsKICAgICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi4KICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gVGhlIHBsYW5lIEFBQkIgaXMgaW5maW5pdGUsIGV4Y2VwdCBpZiB0aGUgbm9ybWFsIGlzIHBvaW50aW5nIGFsb25nIGFueSBheGlzCiAgICAgIHRlbXBOb3JtYWwuc2V0KDAsIDAsIDEpOyAvLyBEZWZhdWx0IHBsYW5lIG5vcm1hbCBpcyB6CgogICAgICBxdWF0LnZtdWx0KHRlbXBOb3JtYWwsIHRlbXBOb3JtYWwpOwogICAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgICBtaW4uc2V0KC1tYXhWYWwsIC1tYXhWYWwsIC1tYXhWYWwpOwogICAgICBtYXguc2V0KG1heFZhbCwgbWF4VmFsLCBtYXhWYWwpOwoKICAgICAgaWYgKHRlbXBOb3JtYWwueCA9PT0gMSkgewogICAgICAgIG1heC54ID0gcG9zLng7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC54ID09PSAtMSkgewogICAgICAgIG1pbi54ID0gcG9zLng7CiAgICAgIH0KCiAgICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHsKICAgICAgICBtYXgueSA9IHBvcy55OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueSA9PT0gLTEpIHsKICAgICAgICBtaW4ueSA9IHBvcy55OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC56ID09PSAxKSB7CiAgICAgICAgbWF4LnogPSBwb3MuejsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7CiAgICAgICAgbWluLnogPSBwb3MuejsKICAgICAgfQogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KCiAgfQogIGNvbnN0IHRlbXBOb3JtYWwgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBIZWlnaHRmaWVsZCBzaGFwZSBjbGFzcy4gSGVpZ2h0IGRhdGEgaXMgZ2l2ZW4gYXMgYW4gYXJyYXkuIFRoZXNlIGRhdGEgcG9pbnRzIGFyZSBzcHJlYWQgb3V0IGV2ZW5seSB3aXRoIGEgZ2l2ZW4gZGlzdGFuY2UuCiAgICogQHRvZG8gU2hvdWxkIGJlIHBvc3NpYmxlIHRvIHVzZSBhbG9uZyBhbGwgYXhlcywgbm90IGp1c3QgeQogICAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlcwogICAqIEB0b2RvIFJlZmFjdG9yIGVsZW1lbnRTaXplIHRvIGVsZW1lbnRTaXplWCBhbmQgZWxlbWVudFNpemVZCiAgICoKICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBHZW5lcmF0ZSBzb21lIGhlaWdodCBkYXRhICh5LXZhbHVlcykuCiAgICogICAgIGNvbnN0IGRhdGEgPSBbXQogICAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykgewogICAqICAgICAgICAgY29uc3QgeSA9IDAuNSAqIE1hdGguY29zKDAuMiAqIGkpCiAgICogICAgICAgICBkYXRhLnB1c2goeSkKICAgKiAgICAgfQogICAqCiAgICogICAgIC8vIENyZWF0ZSB0aGUgaGVpZ2h0ZmllbGQgc2hhcGUKICAgKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwgewogICAqICAgICAgICAgZWxlbWVudFNpemU6IDEgLy8gRGlzdGFuY2UgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb25zCiAgICogICAgIH0pCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoaGVpZ2h0ZmllbGRCb2R5KQogICAqLwogIGNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBBbiBhcnJheSBvZiBudW1iZXJzLCBvciBoZWlnaHQgdmFsdWVzLCB0aGF0IGFyZSBzcHJlYWQgb3V0IGFsb25nIHRoZSB4IGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1heCB2YWx1ZSBvZiB0aGUgZGF0YSBwb2ludHMgaW4gdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1pbmltdW0gdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjaW5nIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9uLgogICAgICogQHRvZG8gZWxlbWVudFNpemVYIGFuZCBZCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRhdGEgQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihkYXRhLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgbWF4VmFsdWU6IG51bGwsCiAgICAgICAgbWluVmFsdWU6IG51bGwsCiAgICAgICAgZWxlbWVudFNpemU6IDEKICAgICAgfSk7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRAogICAgICB9KTsKICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgdGhpcy5tYXhWYWx1ZSA9IG9wdGlvbnMubWF4VmFsdWU7CiAgICAgIHRoaXMubWluVmFsdWUgPSBvcHRpb25zLm1pblZhbHVlOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gb3B0aW9ucy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmIChvcHRpb25zLm1pblZhbHVlID09PSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5tYXhWYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWNoZUVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLnBpbGxhckNvbnZleCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOyAvLyAiaV9qX2lzVXBwZXIiID0+IHsgY29udmV4OiAuLi4sIG9mZnNldDogLi4uIH0KICAgICAgLy8gZm9yIGV4YW1wbGU6CiAgICAgIC8vIF9jYWNoZWRQaWxsYXJzWyIwXzJfMSJdCgogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIENhbGwgd2hlbmV2ZXIgeW91IGNoYW5nZSB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgbWluVmFsdWVgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlTWluVmFsdWUoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGxldCBtaW5WYWx1ZSA9IGRhdGFbMF1bMF07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAodiA8IG1pblZhbHVlKSB7CiAgICAgICAgICAgIG1pblZhbHVlID0gdjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWluVmFsdWUgPSBtaW5WYWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgbWF4VmFsdWVgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlTWF4VmFsdWUoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGxldCBtYXhWYWx1ZSA9IGRhdGFbMF1bMF07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAodiA+IG1heFZhbHVlKSB7CiAgICAgICAgICAgIG1heFZhbHVlID0gdjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWF4VmFsdWUgPSBtYXhWYWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBoZWlnaHQgdmFsdWUgYXQgYW4gaW5kZXguIERvbid0IGZvcmdldCB0byB1cGRhdGUgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGFmdGVyIHlvdSdyZSBkb25lLgogICAgICovCgoKICAgIHNldEhlaWdodFZhbHVlQXRJbmRleCh4aSwgeWksIHZhbHVlKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGRhdGFbeGldW3lpXSA9IHZhbHVlOyAvLyBJbnZhbGlkYXRlIGNhY2hlCgogICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBmYWxzZSk7CgogICAgICBpZiAoeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgdHJ1ZSk7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIGZhbHNlKTsKICAgICAgfQoKICAgICAgaWYgKHlpID4gMCAmJiB4aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSAtIDEsIHRydWUpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBtYXgvbWluIGluIGEgcmVjdGFuZ2xlIGluIHRoZSBtYXRyaXggZGF0YQogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSB0aGUgcmVzdWx0cyBpbi4KICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCBhcnJheSwgaWYgaXQgd2FzIHBhc3NlZCBpbi4gTWluaW11bSB3aWxsIGJlIGF0IHBvc2l0aW9uIDAgYW5kIG1heCBhdCAxLgogICAgICovCgoKICAgIGdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7IC8vIFNldCBmaXJzdCB2YWx1ZQoKICAgICAgbGV0IG1heCA9IHRoaXMubWluVmFsdWU7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPD0gaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8PSBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHsKICAgICAgICAgICAgbWF4ID0gaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVzdWx0WzBdID0gdGhpcy5taW5WYWx1ZTsKICAgICAgcmVzdWx0WzFdID0gbWF4OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGluZGV4IG9mIGEgbG9jYWwgcG9zaXRpb24gb24gdGhlIGhlaWdodGZpZWxkLiBUaGUgaW5kZXhlcyBpbmRpY2F0ZSB0aGUgcmVjdGFuZ2xlcywgc28gaWYgeW91ciB0ZXJyYWluIGlzIG1hZGUgb2YgTiB4IE4gaGVpZ2h0IGRhdGEgcG9pbnRzLCB5b3Ugd2lsbCBoYXZlIHJlY3RhbmdsZSBpbmRleGVzIHJhbmdpbmcgZnJvbSAwIHRvIE4tMS4KICAgICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXkKICAgICAqIEBwYXJhbSBjbGFtcCBJZiB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGNsYW1wZWQgdG8gdGhlIGhlaWdodGZpZWxkIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIHJlc3VsdCwgY2xhbXApIHsKICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CiAgICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgeGkgPSBNYXRoLmZsb29yKHggLyB3KTsKICAgICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7CiAgICAgIHJlc3VsdFswXSA9IHhpOwogICAgICByZXN1bHRbMV0gPSB5aTsKCiAgICAgIGlmIChjbGFtcCkgewogICAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCiAgICAgICAgaWYgKHhpIDwgMCkgewogICAgICAgICAgeGkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpIDwgMCkgewogICAgICAgICAgeWkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHhpID49IGRhdGEubGVuZ3RoIC0gMSkgewogICAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgICB5aSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgICB9CiAgICAgIH0gLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKCiAgICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGlkeCA9IGdldEhlaWdodEF0X2lkeDsKICAgICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApOwogICAgICBsZXQgeGkgPSBpZHhbMF07CiAgICAgIGxldCB5aSA9IGlkeFsxXTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKCiAgICAgIGlmIChlZGdlQ2xhbXApIHsKICAgICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTsKICAgICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTsKICAgICAgfQoKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyOwogICAgICBjb25zdCB1cHBlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtICh4aSArIDEpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtICh5aSArIDEpKSAqKiAyOwogICAgICBjb25zdCB1cHBlciA9IGxvd2VyRGlzdDIgPiB1cHBlckRpc3QyOwogICAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpOwogICAgICByZXR1cm4gdXBwZXI7CiAgICB9CgogICAgZ2V0Tm9ybWFsQXQoeCwgeSwgZWRnZUNsYW1wLCByZXN1bHQpIHsKICAgICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXROb3JtYWxBdF9iOwogICAgICBjb25zdCBjID0gZ2V0Tm9ybWFsQXRfYzsKICAgICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDsKICAgICAgY29uc3QgZTEgPSBnZXROb3JtYWxBdF9lMTsKICAgICAgdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGIudnN1YihhLCBlMCk7CiAgICAgIGMudnN1YihhLCBlMSk7CiAgICAgIGUwLmNyb3NzKGUxLCByZXN1bHQpOwogICAgICByZXN1bHQubm9ybWFsaXplKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZAogICAgICogQHBhcmFtIHhpCiAgICAgKiBAcGFyYW0geWkKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqLwoKCiAgICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIF9yZWYpIHsKICAgICAgbGV0IHsKICAgICAgICBsb3dlckJvdW5kLAogICAgICAgIHVwcGVyQm91bmQKICAgICAgfSA9IF9yZWY7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgbG93ZXJCb3VuZC5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTsKICAgICAgdXBwZXJCb3VuZC5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhlaWdodCBpbiB0aGUgaGVpZ2h0ZmllbGQgYXQgYSBnaXZlbiBwb3NpdGlvbgogICAgICovCgoKICAgIGdldEhlaWdodEF0KHgsIHksIGVkZ2VDbGFtcCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBhID0gZ2V0SGVpZ2h0QXRfYTsKICAgICAgY29uc3QgYiA9IGdldEhlaWdodEF0X2I7CiAgICAgIGNvbnN0IGMgPSBnZXRIZWlnaHRBdF9jOwogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHVwcGVyID0gdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBnZXRIZWlnaHRBdF93ZWlnaHRzKTsKICAgICAgY29uc3QgdyA9IGdldEhlaWdodEF0X3dlaWdodHM7CgogICAgICBpZiAodXBwZXIpIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICByZXR1cm4gZGF0YVt4aSArIDFdW3lpICsgMV0gKiB3LnggKyBkYXRhW3hpXVt5aSArIDFdICogdy55ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcuejsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICByZXR1cm4gZGF0YVt4aV1beWldICogdy54ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcueSArIGRhdGFbeGldW3lpICsgMV0gKiB3Lno7CiAgICAgIH0KICAgIH0KCiAgICBnZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gYCR7eGl9XyR7eWl9XyR7Z2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwfWA7CiAgICB9CgogICAgZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KCiAgICBzZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIGNvbnZleCwgb2Zmc2V0KSB7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldID0gewogICAgICAgIGNvbnZleCwKICAgICAgICBvZmZzZXQKICAgICAgfTsKICAgIH0KCiAgICBjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICBkZWxldGUgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGZyb20gdGhlIGhlaWdodGZpZWxkCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGUoeGksIHlpLCB1cHBlciwgYSwgYiwgYykgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CgogICAgICBpZiAodXBwZXIpIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSk7CiAgICAgICAgYi5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgICAgYy5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTsKICAgICAgICBiLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgICBjLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBpbiB0aGUgdGVycmFpbiBpbiB0aGUgZm9ybSBvZiBhIHRyaWFuZ3VsYXIgY29udmV4IHNoYXBlLgogICAgICovCgoKICAgIGdldENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICBsZXQgcmVzdWx0ID0gdGhpcy5waWxsYXJDb252ZXg7CiAgICAgIGxldCBvZmZzZXRSZXN1bHQgPSB0aGlzLnBpbGxhck9mZnNldDsKCiAgICAgIGlmICh0aGlzLmNhY2hlRW5hYmxlZCkgewogICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSk7CgogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IGRhdGEuY29udmV4OwogICAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBkYXRhLm9mZnNldDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJlc3VsdCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAgICAgb2Zmc2V0UmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG9mZnNldFJlc3VsdDsKICAgICAgfQoKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBmYWNlcyA9IHJlc3VsdC5mYWNlczsgLy8gUmV1c2UgdmVydHMgaWYgcG9zc2libGUKCiAgICAgIHJlc3VsdC52ZXJ0aWNlcy5sZW5ndGggPSA2OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHsKICAgICAgICBpZiAoIXJlc3VsdC52ZXJ0aWNlc1tpXSkgewogICAgICAgICAgcmVzdWx0LnZlcnRpY2VzW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0gLy8gUmV1c2UgZmFjZXMgaWYgcG9zc2libGUKCgogICAgICBmYWNlcy5sZW5ndGggPSA1OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICBpZiAoIWZhY2VzW2ldKSB7CiAgICAgICAgICBmYWNlc1tpXSA9IFtdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgdmVydHMgPSByZXN1bHQudmVydGljZXM7CiAgICAgIGNvbnN0IGggPSAoTWF0aC5taW4oZGF0YVt4aV1beWldLCBkYXRhW3hpICsgMV1beWldLCBkYXRhW3hpXVt5aSArIDFdLCBkYXRhW3hpICsgMV1beWkgKyAxXSkgLSB0aGlzLm1pblZhbHVlKSAvIDIgKyB0aGlzLm1pblZhbHVlOwoKICAgICAgaWYgKCFnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNF0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNV0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIHRvcCB0cmlhbmdsZQoKICAgICAgICBmYWNlc1swXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMF1bMV0gPSAxOwogICAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzFdWzBdID0gNTsKICAgICAgICBmYWNlc1sxXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAteCBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1syXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMl1bMV0gPSAyOwogICAgICAgIGZhY2VzWzJdWzJdID0gNTsKICAgICAgICBmYWNlc1syXVszXSA9IDM7IC8vIC15IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzNdWzBdID0gMTsKICAgICAgICBmYWNlc1szXVsxXSA9IDA7CiAgICAgICAgZmFjZXNbM11bMl0gPSAzOwogICAgICAgIGZhY2VzWzNdWzNdID0gNDsgLy8gK3h5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzRdWzBdID0gNDsKICAgICAgICBmYWNlc1s0XVsxXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bMl0gPSAyOwogICAgICAgIGZhY2VzWzRdWzNdID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuNzUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNF0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNV0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIFRvcCB0cmlhbmdsZQoKICAgICAgICBmYWNlc1swXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMF1bMV0gPSAxOwogICAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzFdWzBdID0gNTsKICAgICAgICBmYWNlc1sxXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAreCBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1syXVswXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMV0gPSA1OwogICAgICAgIGZhY2VzWzJdWzJdID0gMzsKICAgICAgICBmYWNlc1syXVszXSA9IDA7IC8vICt5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzNdWzBdID0gMzsKICAgICAgICBmYWNlc1szXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbM11bMl0gPSAxOwogICAgICAgIGZhY2VzWzNdWzNdID0gMDsgLy8gLXh5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzRdWzBdID0gMTsKICAgICAgICBmYWNlc1s0XVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMl0gPSA1OwogICAgICAgIGZhY2VzWzRdWzNdID0gMjsKICAgICAgfQoKICAgICAgcmVzdWx0LmNvbXB1dGVOb3JtYWxzKCk7CiAgICAgIHJlc3VsdC5jb21wdXRlRWRnZXMoKTsKICAgICAgcmVzdWx0LnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMuc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCByZXN1bHQsIG9mZnNldFJlc3VsdCk7CiAgICB9CgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgdGVycmFpbiBpcyBpbmZpbml0ZQogICAgICAgIE51bWJlci5NQVhfVkFMVUUKICAgICAgKTsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKiogQFRPRE8gZG8gaXQgcHJvcGVybHkgKi8KICAgICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgbWF4LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IHMgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLgogICAgICovCgoKICAgIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB4LAogICAgICAgIHosCiAgICAgICAgeQogICAgICB9ID0gc2NhbGU7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7CiAgICAgIG1hdHJpeC5sZW5ndGggPSAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gTWF0aC5hYnMoeCkgLyBpbWFnZURhdGEud2lkdGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5oZWlnaHQ7IGkrKykgewogICAgICAgIGNvbnN0IHJvdyA9IFtdOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBhID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0XTsKICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAxXTsKICAgICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTsKICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChhICsgYiArIGMpIC8gNCAvIDI1NSAqIHo7CgogICAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICAgIHJvdy5wdXNoKGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb3cudW5zaGlmdChoZWlnaHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgICBtYXRyaXgudW5zaGlmdChyb3cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtYXRyaXgucHVzaChyb3cpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CgogIH0KICBjb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTsKICBjb25zdCBnZXRIZWlnaHRBdF93ZWlnaHRzID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9lMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtCgogIGZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHsKICAgIHJlc3VsdC54ID0gKChieSAtIGN5KSAqICh4IC0gY3gpICsgKGN4IC0gYngpICogKHkgLSBjeSkpIC8gKChieSAtIGN5KSAqIChheCAtIGN4KSArIChjeCAtIGJ4KSAqIChheSAtIGN5KSk7CiAgICByZXN1bHQueSA9ICgoY3kgLSBheSkgKiAoeCAtIGN4KSArIChheCAtIGN4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTsKICB9CgogIC8qKgogICAqIE9jdHJlZU5vZGUKICAgKi8KICBjbGFzcyBPY3RyZWVOb2RlIHsKICAgIC8qKiBUaGUgcm9vdCBub2RlICovCgogICAgLyoqIEJvdW5kYXJ5IG9mIHRoaXMgbm9kZSAqLwoKICAgIC8qKiBDb250YWluZWQgZGF0YSBhdCB0aGUgY3VycmVudCBub2RlIGxldmVsICovCgogICAgLyoqIENoaWxkcmVuIHRvIHRoaXMgbm9kZSAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnJvb3QgPSBvcHRpb25zLnJvb3QgfHwgbnVsbDsKICAgICAgdGhpcy5hYWJiID0gb3B0aW9ucy5hYWJiID8gb3B0aW9ucy5hYWJiLmNsb25lKCkgOiBuZXcgQUFCQigpOwogICAgICB0aGlzLmRhdGEgPSBbXTsKICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiByZXNldAogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9IHRoaXMuZGF0YS5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBJbnNlcnQgZGF0YSBpbnRvIHRoaXMgbm9kZQogICAgICogQHJldHVybiBUcnVlIGlmIHN1Y2Nlc3NmdWwsIG90aGVyd2lzZSBmYWxzZQogICAgICovCgoKICAgIGluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwpIHsKICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsKICAgICAgICBsZXZlbCA9IDA7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5vZGVEYXRhID0gdGhpcy5kYXRhOyAvLyBJZ25vcmUgb2JqZWN0cyB0aGF0IGRvIG5vdCBiZWxvbmcgaW4gdGhpcyBub2RlCgogICAgICBpZiAoIXRoaXMuYWFiYi5jb250YWlucyhhYWJiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gb2JqZWN0IGNhbm5vdCBiZSBhZGRlZAogICAgICB9CgogICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47CiAgICAgIGNvbnN0IG1heERlcHRoID0gdGhpcy5tYXhEZXB0aCB8fCB0aGlzLnJvb3QubWF4RGVwdGg7CgogICAgICBpZiAobGV2ZWwgPCBtYXhEZXB0aCkgewogICAgICAgIC8vIFN1YmRpdmlkZSBpZiB0aGVyZSBhcmUgbm8gY2hpbGRyZW4geWV0CiAgICAgICAgbGV0IHN1YmRpdmlkZWQgPSBmYWxzZTsKCiAgICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuc3ViZGl2aWRlKCk7CiAgICAgICAgICBzdWJkaXZpZGVkID0gdHJ1ZTsKICAgICAgICB9IC8vIGFkZCB0byB3aGljaGV2ZXIgbm9kZSB3aWxsIGFjY2VwdCBpdAoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgICAgaWYgKGNoaWxkcmVuW2ldLmluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwgKyAxKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzdWJkaXZpZGVkKSB7CiAgICAgICAgICAvLyBObyBjaGlsZHJlbiBhY2NlcHRlZCEgTWlnaHQgYXMgd2VsbCBqdXN0IHJlbW92ZSBlbSBzaW5jZSB0aGV5IGNvbnRhaW4gbm9uZQogICAgICAgICAgY2hpbGRyZW4ubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgIH0gLy8gVG9vIGRlZXAsIG9yIGNoaWxkcmVuIGRpZG50IHdhbnQgaXQuIGFkZCBpdCBpbiBjdXJyZW50IG5vZGUKCgogICAgICBub2RlRGF0YS5wdXNoKGVsZW1lbnREYXRhKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSA4IGVxdWFsbHkgc2l6ZWQgY2hpbGRyZW4gbm9kZXMgYW5kIHB1dCB0aGVtIGluIHRoZSBgY2hpbGRyZW5gIGFycmF5LgogICAgICovCgoKICAgIHN1YmRpdmlkZSgpIHsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjaGlsZHJlbi5wdXNoKG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMCkKICAgICAgICB9KQogICAgICB9KSk7CiAgICAgIHUudnN1YihsLCBoYWxmRGlhZ29uYWwpOwogICAgICBoYWxmRGlhZ29uYWwuc2NhbGUoMC41LCBoYWxmRGlhZ29uYWwpOwogICAgICBjb25zdCByb290ID0gdGhpcy5yb290IHx8IHRoaXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTsgLy8gU2V0IGN1cnJlbnQgbm9kZSBhcyByb290CgogICAgICAgIGNoaWxkLnJvb3QgPSByb290OyAvLyBDb21wdXRlIGJvdW5kcwoKICAgICAgICBjb25zdCBsb3dlckJvdW5kID0gY2hpbGQuYWFiYi5sb3dlckJvdW5kOwogICAgICAgIGxvd2VyQm91bmQueCAqPSBoYWxmRGlhZ29uYWwueDsKICAgICAgICBsb3dlckJvdW5kLnkgKj0gaGFsZkRpYWdvbmFsLnk7CiAgICAgICAgbG93ZXJCb3VuZC56ICo9IGhhbGZEaWFnb25hbC56OwogICAgICAgIGxvd2VyQm91bmQudmFkZChsLCBsb3dlckJvdW5kKTsgLy8gVXBwZXIgYm91bmQgaXMgYWx3YXlzIGxvd2VyIGJvdW5kICsgaGFsZkRpYWdvbmFsCgogICAgICAgIGxvd2VyQm91bmQudmFkZChoYWxmRGlhZ29uYWwsIGNoaWxkLmFhYmIudXBwZXJCb3VuZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSB3aXRoaW4gYW4gQUFCQgogICAgICogQHJldHVybiBUaGUgInJlc3VsdCIgb2JqZWN0CiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCkgewogICAgICB0aGlzLmRhdGE7IC8vIGFib3J0IGlmIHRoZSByYW5nZSBkb2VzIG5vdCBpbnRlcnNlY3QgdGhpcyBub2RlCiAgICAgIC8vIGlmICghdGhpcy5hYWJiLm92ZXJsYXBzKGFhYmIpKXsKICAgICAgLy8gICAgIHJldHVybiByZXN1bHQ7CiAgICAgIC8vIH0KICAgICAgLy8gQWRkIG9iamVjdHMgYXQgdGhpcyBsZXZlbAogICAgICAvLyBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGVEYXRhKTsKICAgICAgLy8gQWRkIGNoaWxkIGRhdGEKICAgICAgLy8gQHRvZG8gdW53cmFwIHJlY3Vyc2lvbiBpbnRvIGEgcXVldWUgLyBsb29wLCB0aGF0J3MgZmFzdGVyIGluIEpTCgogICAgICB0aGlzLmNoaWxkcmVuOyAvLyBmb3IgKGxldCBpID0gMCwgTiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgLy8gICAgIGNoaWxkcmVuW2ldLmFhYmJRdWVyeShhYWJiLCByZXN1bHQpOwogICAgICAvLyB9CgogICAgICBjb25zdCBxdWV1ZSA9IFt0aGlzXTsKCiAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7CgogICAgICAgIGlmIChub2RlLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5kYXRhKTsKICAgICAgICB9CgogICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHF1ZXVlLCBub2RlLmNoaWxkcmVuKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSBpbnRlcnNlY3RlZCBieSBhIHJheS4KICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIHJheVF1ZXJ5KHJheSwgdHJlZVRyYW5zZm9ybSwgcmVzdWx0KSB7CiAgICAgIC8vIFVzZSBhYWJiIHF1ZXJ5IGZvciBub3cuCgogICAgICAvKiogQHRvZG8gaW1wbGVtZW50IHJlYWwgcmF5IHF1ZXJ5IHdoaWNoIG5lZWRzIGxlc3MgbG9va3VwcyAqLwogICAgICByYXkuZ2V0QUFCQih0bXBBQUJCKTsKICAgICAgdG1wQUFCQi50b0xvY2FsRnJhbWUodHJlZVRyYW5zZm9ybSwgdG1wQUFCQik7CiAgICAgIHRoaXMuYWFiYlF1ZXJ5KHRtcEFBQkIsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHJlbW92ZUVtcHR5Tm9kZXMKICAgICAqLwoKCiAgICByZW1vdmVFbXB0eU5vZGVzKCkgewogICAgICBmb3IgKGxldCBpID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHRoaXMuY2hpbGRyZW5baV0ucmVtb3ZlRW1wdHlOb2RlcygpOwoKICAgICAgICBpZiAoIXRoaXMuY2hpbGRyZW5baV0uY2hpbGRyZW4ubGVuZ3RoICYmICF0aGlzLmNoaWxkcmVuW2ldLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIE9jdHJlZQogICAqLwoKCiAgY2xhc3MgT2N0cmVlIGV4dGVuZHMgT2N0cmVlTm9kZSB7CiAgICAvKioKICAgICAqIE1heGltdW0gc3ViZGl2aXNpb24gZGVwdGgKICAgICAqIEBkZWZhdWx0IDgKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGFhYmIgVGhlIHRvdGFsIEFBQkIgb2YgdGhlIHRyZWUKICAgICAqLwogICAgY29uc3RydWN0b3IoYWFiYiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBzdXBlcih7CiAgICAgICAgcm9vdDogbnVsbCwKICAgICAgICBhYWJiCiAgICAgIH0pOwogICAgICB0aGlzLm1heERlcHRoID0gdHlwZW9mIG9wdGlvbnMubWF4RGVwdGggIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhEZXB0aCA6IDg7CiAgICB9CgogIH0KICBjb25zdCBoYWxmRGlhZ29uYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcEFBQkIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBUcmltZXNoLgogICAqIEBleGFtcGxlCiAgICogICAgIC8vIEhvdyB0byBtYWtlIGEgbWVzaCB3aXRoIGEgc2luZ2xlIHRyaWFuZ2xlCiAgICogICAgIGNvbnN0IHZlcnRpY2VzID0gWwogICAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDAKICAgKiAgICAgICAgIDEsIDAsIDAsIC8vIHZlcnRleCAxCiAgICogICAgICAgICAwLCAxLCAwICAvLyB2ZXJ0ZXggMgogICAqICAgICBdCiAgICogICAgIGNvbnN0IGluZGljZXMgPSBbCiAgICogICAgICAgICAwLCAxLCAyICAvLyB0cmlhbmdsZSAwCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgdHJpbWVzaFNoYXBlID0gbmV3IENBTk5PTi5UcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKQogICAqLwogIGNsYXNzIFRyaW1lc2ggZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIHZlcnRpY2VzCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXJzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggdHJpYW5nbGUgY29uc2lzdHMgb2YuIFRoZSBsZW5ndGggb2YgdGhpcyBhcnJheSBpcyB0aHVzIDMgdGltZXMgdGhlIG51bWJlciBvZiB0cmlhbmdsZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBub3JtYWxzIGRhdGEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBBQUJCIG9mIHRoZSBtZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZWZlcmVuY2VzIHRvIHZlcnRleCBwYWlycywgbWFraW5nIHVwIGFsbCB1bmlxdWUgZWRnZXMgaW4gdGhlIHRyaW1lc2guCiAgICAgKi8KCiAgICAvKioKICAgICAqIExvY2FsIHNjYWxpbmcgb2YgdGhlIG1lc2guIFVzZSAuc2V0U2NhbGUoKSB0byBzZXQgaXQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleGVkIHRyaWFuZ2xlcy4gVXNlIC51cGRhdGVUcmVlKCkgdG8gdXBkYXRlIGl0LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih2ZXJ0aWNlcywgaW5kaWNlcykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuVFJJTUVTSAogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpOwogICAgICB0aGlzLmluZGljZXMgPSBuZXcgSW50MTZBcnJheShpbmRpY2VzKTsKICAgICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuZWRnZXMgPSBudWxsOwogICAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7CiAgICAgIHRoaXMudHJlZSA9IG5ldyBPY3RyZWUoKTsKICAgICAgdGhpcy51cGRhdGVFZGdlcygpOwogICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy51cGRhdGVUcmVlKCk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZVRyZWUKICAgICAqLwoKCiAgICB1cGRhdGVUcmVlKCkgewogICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlOwogICAgICB0cmVlLnJlc2V0KCk7CiAgICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsgLy8gVGhlIGxvY2FsIG1lc2ggQUFCQiBpcyBzY2FsZWQsIGJ1dCB0aGUgb2N0cmVlIEFBQkIgc2hvdWxkIGJlIHVuc2NhbGVkCgogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlcwoKICAgICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTsKICAgICAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBjID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcG9pbnRzID0gW2EsIGIsIGNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy90aGlzLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYyk7CiAgICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDFdLCBiKTsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMl0sIGMpOwoKICAgICAgICB0cmlhbmdsZUFBQkIuc2V0RnJvbVBvaW50cyhwb2ludHMpOwogICAgICAgIHRyZWUuaW5zZXJ0KHRyaWFuZ2xlQUFCQiwgaSk7CiAgICAgIH0KCiAgICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSBvZiBpbnRlZ2VycywgcmVmZXJlbmNpbmcgdGhlIHF1ZXJpZWQgdHJpYW5nbGVzLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlc0luQUFCQihhYWJiLCByZXN1bHQpIHsKICAgICAgdW5zY2FsZWRBQUJCLmNvcHkoYWFiYik7IC8vIFNjYWxlIGl0IHRvIGxvY2FsCgogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7CiAgICAgIGNvbnN0IGlzeSA9IHNjYWxlLnk7CiAgICAgIGNvbnN0IGlzeiA9IHNjYWxlLno7CiAgICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHVuc2NhbGVkQUFCQi51cHBlckJvdW5kOwogICAgICBsLnggLz0gaXN4OwogICAgICBsLnkgLz0gaXN5OwogICAgICBsLnogLz0gaXN6OwogICAgICB1LnggLz0gaXN4OwogICAgICB1LnkgLz0gaXN5OwogICAgICB1LnogLz0gaXN6OwogICAgICByZXR1cm4gdGhpcy50cmVlLmFhYmJRdWVyeSh1bnNjYWxlZEFBQkIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIHNldFNjYWxlCiAgICAgKi8KCgogICAgc2V0U2NhbGUoc2NhbGUpIHsKICAgICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56OwogICAgICBjb25zdCBpc1VuaWZvcm0gPSBzY2FsZS54ID09PSBzY2FsZS55ICYmIHNjYWxlLnkgPT09IHNjYWxlLno7CgogICAgICBpZiAoISh3YXNVbmlmb3JtICYmIGlzVW5pZm9ybSkpIHsKICAgICAgICAvLyBOb24tdW5pZm9ybSBzY2FsaW5nLiBOZWVkIHRvIHVwZGF0ZSBub3JtYWxzLgogICAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpOwogICAgICB9CgogICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpOwogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZU5vcm1hbHMoKSB7CiAgICAgIGNvbnN0IG4gPSBjb21wdXRlTm9ybWFsc19uOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5ub3JtYWxzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTsKICAgICAgICB0aGlzLmdldFZlcnRleChiLCB2Yik7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYywgdmMpOwogICAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTsKICAgICAgICBub3JtYWxzW2kzXSA9IG4ueDsKICAgICAgICBub3JtYWxzW2kzICsgMV0gPSBuLnk7CiAgICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56OwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYC5lZGdlc2AgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVFZGdlcygpIHsKICAgICAgY29uc3QgZWRnZXMgPSB7fTsKCiAgICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7CiAgICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBgJHthfV8ke2J9YCA6IGAke2J9XyR7YX1gOwogICAgICAgIGVkZ2VzW2tleV0gPSB0cnVlOwogICAgICB9OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIGFkZChhLCBiKTsKICAgICAgICBhZGQoYiwgYyk7CiAgICAgICAgYWRkKGMsIGEpOwogICAgICB9CgogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpOwogICAgICB0aGlzLmVkZ2VzID0gbmV3IEludDE2QXJyYXkoa2V5cy5sZW5ndGggKiAyKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGluZGljZXMgPSBrZXlzW2ldLnNwbGl0KCdfJyk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaSArIDFdID0gcGFyc2VJbnQoaW5kaWNlc1sxXSwgMTApOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlZGdlIHZlcnRleAogICAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC4KICAgICAqIEBwYXJhbSB2ZXJ0ZXhTdG9yZSBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIGZpcnN0T3JTZWNvbmQsIHZlcnRleFN0b3JlKSB7CiAgICAgIGNvbnN0IHZlcnRleEluZGV4ID0gdGhpcy5lZGdlc1tlZGdlSW5kZXggKiAyICsgKGZpcnN0T3JTZWNvbmQgPyAxIDogMCldOwogICAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS4KICAgICAqLwoKCiAgICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHsKICAgICAgY29uc3QgdmEgPSBnZXRFZGdlVmVjdG9yX3ZhOwogICAgICBjb25zdCB2YiA9IGdldEVkZ2VWZWN0b3JfdmI7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTsKICAgICAgdGhpcy5nZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgMSwgdmIpOwogICAgICB2Yi52c3ViKHZhLCB2ZWN0b3JTdG9yZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIHZiLnZzdWIodmEsIGFiKTsKICAgICAgdmMudnN1Yih2YiwgY2IpOwogICAgICBjYi5jcm9zcyhhYiwgdGFyZ2V0KTsKCiAgICAgIGlmICghdGFyZ2V0LmlzWmVybygpKSB7CiAgICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB2ZXJ0ZXggaS4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRWZXJ0ZXgoaSwgb3V0KSB7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsKCiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCk7CgogICAgICBvdXQueCAqPSBzY2FsZS54OwogICAgICBvdXQueSAqPSBzY2FsZS55OwogICAgICBvdXQueiAqPSBzY2FsZS56OwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgcmF3IHZlcnRleCBpCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRXb3JsZFZlcnRleChpLCBwb3MsIHF1YXQsIG91dCkgewogICAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zLCBxdWF0LCBvdXQsIG91dCk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdGhyZWUgdmVydGljZXMgZm9yIHRyaWFuZ2xlIGkuCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0Tm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICByZXR1cm4gdGFyZ2V0LnNldCh0aGlzLm5vcm1hbHNbaTNdLCB0aGlzLm5vcm1hbHNbaTMgKyAxXSwgdGhpcy5ub3JtYWxzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoY2xpX2FhYmIpOwogICAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54OwogICAgICBjb25zdCB5ID0gY2xpX2FhYmIudXBwZXJCb3VuZC55IC0gY2xpX2FhYmIubG93ZXJCb3VuZC55OwogICAgICBjb25zdCB6ID0gY2xpX2FhYmIudXBwZXJCb3VuZC56IC0gY2xpX2FhYmIubG93ZXJCb3VuZC56OwogICAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2gKICAgICAqLwoKCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQ7CiAgICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpOwogICAgICBsLmNvcHkodik7CiAgICAgIHUuY29weSh2KTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKCiAgICAgICAgaWYgKHYueCA8IGwueCkgewogICAgICAgICAgbC54ID0gdi54OwogICAgICAgIH0gZWxzZSBpZiAodi54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSB2Lng7CiAgICAgICAgfQoKICAgICAgICBpZiAodi55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSB2Lnk7CiAgICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmICh2LnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHYuejsKICAgICAgICB9IGVsc2UgaWYgKHYueiA+IHUueikgewogICAgICAgICAgdS56ID0gdi56OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuYWFiYmAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIodGhpcy5hYWJiKTsKICAgIH0KICAgIC8qKgogICAgICogV2lsbCB1cGRhdGUgdGhlIGAuYm91bmRpbmdTcGhlcmVSYWRpdXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICBjb25zdCBub3JtMiA9IHYubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgICBpZiAobm9ybTIgPiBtYXgyKSB7CiAgICAgICAgICBtYXgyID0gbm9ybTI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpOwogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKgogICAgICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMywKICAgICAgICAgICAgICB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CiAgICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejsKICAgICAgICAgICBjb25zdCB2ID0gdGVtcFdvcmxkVmVydGV4OwogICAgICAgICAgZm9yKGxldCBpPTA7IGk8bjsgaSsrKXsKICAgICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgICAgICAgIHBvcy52YWRkKHYsIHYpOwogICAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW54ID0gdi54OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnggPiBtYXh4IHx8IG1heHg9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh4ID0gdi54OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueSA8IG1pbnkgfHwgbWlueT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueSA+IG1heHkgfHwgbWF4eT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHkgPSB2Lnk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBpZiAodi56IDwgbWlueiB8fCBtaW56PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBtaW4uc2V0KG1pbngsbWlueSxtaW56KTsKICAgICAgICAgIG1heC5zZXQobWF4eCxtYXh5LG1heHopOwogICAgICAgICAgKi8KICAgICAgLy8gRmFzdGVyIGFwcHJveGltYXRpb24gdXNpbmcgbG9jYWwgQUFCQgogICAgICBjb25zdCBmcmFtZSA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZTsKICAgICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7CiAgICAgIGZyYW1lLnBvc2l0aW9uID0gcG9zOwogICAgICBmcmFtZS5xdWF0ZXJuaW9uID0gcXVhdDsKICAgICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTsKICAgICAgbWluLmNvcHkocmVzdWx0Lmxvd2VyQm91bmQpOwogICAgICBtYXguY29weShyZXN1bHQudXBwZXJCb3VuZCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSB2b2x1bWUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuCiAgICAgKi8KCgogICAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cywgdHViZSwgcmFkaWFsU2VnbWVudHMsIHR1YnVsYXJTZWdtZW50cywgYXJjKSB7CiAgICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1cyA9IDE7CiAgICAgIH0KCiAgICAgIGlmICh0dWJlID09PSB2b2lkIDApIHsKICAgICAgICB0dWJlID0gMC41OwogICAgICB9CgogICAgICBpZiAocmFkaWFsU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGlhbFNlZ21lbnRzID0gODsKICAgICAgfQoKICAgICAgaWYgKHR1YnVsYXJTZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHVidWxhclNlZ21lbnRzID0gNjsKICAgICAgfQoKICAgICAgaWYgKGFyYyA9PT0gdm9pZCAwKSB7CiAgICAgICAgYXJjID0gTWF0aC5QSSAqIDI7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGluZGljZXMgPSBbXTsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykgewogICAgICAgICAgY29uc3QgdSA9IGkgLyB0dWJ1bGFyU2VnbWVudHMgKiBhcmM7CiAgICAgICAgICBjb25zdCB2ID0gaiAvIHJhZGlhbFNlZ21lbnRzICogTWF0aC5QSSAqIDI7CiAgICAgICAgICBjb25zdCB4ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLmNvcyh1KTsKICAgICAgICAgIGNvbnN0IHkgPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguc2luKHUpOwogICAgICAgICAgY29uc3QgeiA9IHR1YmUgKiBNYXRoLnNpbih2KTsKICAgICAgICAgIHZlcnRpY2VzLnB1c2goeCwgeSwgeik7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBqID0gMTsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGEgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaSAtIDE7CiAgICAgICAgICBjb25zdCBiID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGkgLSAxOwogICAgICAgICAgY29uc3QgYyA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpOwogICAgICAgICAgY29uc3QgZCA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIGogKyBpOwogICAgICAgICAgaW5kaWNlcy5wdXNoKGEsIGIsIGQpOwogICAgICAgICAgaW5kaWNlcy5wdXNoKGIsIGMsIGQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKTsKICAgIH0KCiAgfQogIGNvbnN0IGNvbXB1dGVOb3JtYWxzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjbGlfYWFiYiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiA9IG5ldyBBQUJCKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gc29sdmVyIGJhc2UgY2xhc3MuCiAgICovCiAgY2xhc3MgU29sdmVyIHsKICAgIC8qKgogICAgICogQWxsIGVxdWF0aW9ucyB0byBiZSBzb2x2ZWQKICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICB9CiAgICAvKioKICAgICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIQogICAgICogQHRvZG8gdXNlIGFic3RyYWN0CiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhCiAgICAgICAgMAogICAgICApOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICBhZGRFcXVhdGlvbihlcSkgewogICAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHsKICAgICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICByZW1vdmVFcXVhdGlvbihlcSkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgaSA9IGVxcy5pbmRleE9mKGVxKTsKCiAgICAgIGlmIChpICE9PSAtMSkgewogICAgICAgIGVxcy5zcGxpY2UoaSwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQWRkIGFsbCBlcXVhdGlvbnMKICAgICAqLwoKCiAgICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLgogICAqIEB0b2RvIFRoZSBzcG9vayBwYXJhbWV0ZXJzIHNob3VsZCBiZSBzcGVjaWZpZWQgZm9yIGVhY2ggY29uc3RyYWludCwgbm90IGdsb2JhbGx5LgogICAqIEBzZWUgaHR0cHM6Ly93d3c4LmNzLnVtdS5zZS9rdXJzZXIvNURWMDU4L1ZUMDkvbGVjdHVyZXMvc3Bvb2tub3Rlcy5wZGYKICAgKi8KICBjbGFzcyBHU1NvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuCiAgICAgKiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgIH0KICAgIC8qKgogICAgICogU29sdmUKICAgICAqIEByZXR1cm4gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkCiAgICAgKi8KCgogICAgc29sdmUoZHQsIHdvcmxkKSB7CiAgICAgIGxldCBpdGVyID0gMDsKICAgICAgY29uc3QgbWF4SXRlciA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgdG9sU3F1YXJlZCA9IHRoaXMudG9sZXJhbmNlICogdGhpcy50b2xlcmFuY2U7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBoID0gZHQ7CiAgICAgIGxldCBCOwogICAgICBsZXQgaW52QzsKICAgICAgbGV0IGRlbHRhbGFtYmRhOwogICAgICBsZXQgZGVsdGFsYW1iZGFUb3Q7CiAgICAgIGxldCBHV2xhbWJkYTsKICAgICAgbGV0IGxhbWJkYWo7IC8vIFVwZGF0ZSBzb2x2ZSBtYXNzCgogICAgICBpZiAoTmVxICE9PSAwKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLnVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICB9CiAgICAgIH0gLy8gVGhpbmdzIHRoYXQgZG8gbm90IGNoYW5nZSBkdXJpbmcgaXRlcmF0aW9uIGNhbiBiZSBjb21wdXRlZCBvbmNlCgoKICAgICAgY29uc3QgaW52Q3MgPSBHU1NvbHZlcl9zb2x2ZV9pbnZDczsKICAgICAgY29uc3QgQnMgPSBHU1NvbHZlcl9zb2x2ZV9CczsKICAgICAgY29uc3QgbGFtYmRhID0gR1NTb2x2ZXJfc29sdmVfbGFtYmRhOwogICAgICBpbnZDcy5sZW5ndGggPSBOZXE7CiAgICAgIEJzLmxlbmd0aCA9IE5lcTsKICAgICAgbGFtYmRhLmxlbmd0aCA9IE5lcTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXE7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbaV07CiAgICAgICAgbGFtYmRhW2ldID0gMC4wOwogICAgICAgIEJzW2ldID0gYy5jb21wdXRlQihoKTsKICAgICAgICBpbnZDc1tpXSA9IDEuMCAvIGMuY29tcHV0ZUMoKTsKICAgICAgfQoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIC8vIFJlc2V0IHZsYW1iZGEKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgICAgY29uc3QgdmxhbWJkYSA9IGIudmxhbWJkYTsKICAgICAgICAgIGNvbnN0IHdsYW1iZGEgPSBiLndsYW1iZGE7CiAgICAgICAgICB2bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICAgIHdsYW1iZGEuc2V0KDAsIDAsIDApOwogICAgICAgIH0gLy8gSXRlcmF0ZSBvdmVyIGVxdWF0aW9ucwoKCiAgICAgICAgZm9yIChpdGVyID0gMDsgaXRlciAhPT0gbWF4SXRlcjsgaXRlcisrKSB7CiAgICAgICAgICAvLyBBY2N1bXVsYXRlIHRoZSB0b3RhbCBlcnJvciBmb3IgZWFjaCBpdGVyYXRpb24uCiAgICAgICAgICBkZWx0YWxhbWJkYVRvdCA9IDAuMDsKCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tqXTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgICAgICAgIEIgPSBCc1tqXTsKICAgICAgICAgICAgaW52QyA9IGludkNzW2pdOwogICAgICAgICAgICBsYW1iZGFqID0gbGFtYmRhW2pdOwogICAgICAgICAgICBHV2xhbWJkYSA9IGMuY29tcHV0ZUdXbGFtYmRhKCk7CiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gaW52QyAqIChCIC0gR1dsYW1iZGEgLSBjLmVwcyAqIGxhbWJkYWopOyAvLyBDbGFtcCBpZiB3ZSBhcmUgbm90IHdpdGhpbiB0aGUgbWluL21heCBpbnRlcnZhbAoKICAgICAgICAgICAgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA8IGMubWluRm9yY2UpIHsKICAgICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWluRm9yY2UgLSBsYW1iZGFqOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA+IGMubWF4Rm9yY2UpIHsKICAgICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWF4Rm9yY2UgLSBsYW1iZGFqOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsYW1iZGFbal0gKz0gZGVsdGFsYW1iZGE7CiAgICAgICAgICAgIGRlbHRhbGFtYmRhVG90ICs9IGRlbHRhbGFtYmRhID4gMC4wID8gZGVsdGFsYW1iZGEgOiAtZGVsdGFsYW1iZGE7IC8vIGFicyhkZWx0YWxhbWJkYSkKCiAgICAgICAgICAgIGMuYWRkVG9XbGFtYmRhKGRlbHRhbGFtYmRhKTsKICAgICAgICAgIH0gLy8gSWYgdGhlIHRvdGFsIGVycm9yIGlzIHNtYWxsIGVub3VnaCAtIHN0b3AgaXRlcmF0ZQoKCiAgICAgICAgICBpZiAoZGVsdGFsYW1iZGFUb3QgKiBkZWx0YWxhbWJkYVRvdCA8IHRvbFNxdWFyZWQpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBBZGQgcmVzdWx0IHRvIHZlbG9jaXR5CgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgICAgY29uc3QgdiA9IGIudmVsb2NpdHk7CiAgICAgICAgICBjb25zdCB3ID0gYi5hbmd1bGFyVmVsb2NpdHk7CiAgICAgICAgICBiLnZsYW1iZGEudm11bChiLmxpbmVhckZhY3RvciwgYi52bGFtYmRhKTsKICAgICAgICAgIHYudmFkZChiLnZsYW1iZGEsIHYpOwogICAgICAgICAgYi53bGFtYmRhLnZtdWwoYi5hbmd1bGFyRmFjdG9yLCBiLndsYW1iZGEpOwogICAgICAgICAgdy52YWRkKGIud2xhbWJkYSwgdyk7CiAgICAgICAgfSAvLyBTZXQgdGhlIGAubXVsdGlwbGllcmAgcHJvcGVydHkgb2YgZWFjaCBlcXVhdGlvbgoKCiAgICAgICAgbGV0IGwgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICAgIGNvbnN0IGludkR0ID0gMSAvIGg7CgogICAgICAgIHdoaWxlIChsLS0pIHsKICAgICAgICAgIGVxdWF0aW9uc1tsXS5tdWx0aXBsaWVyID0gbGFtYmRhW2xdICogaW52RHQ7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaXRlcjsKICAgIH0KCiAgfSAvLyBKdXN0IHRlbXBvcmFyeSBudW1iZXIgaG9sZGVycyB0aGF0IHdlIHdhbnQgdG8gcmV1c2UgZWFjaCBpdGVyYXRpb24uCgogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2xhbWJkYSA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2ludkNzID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTsKCiAgLyoqCiAgICogU3BsaXRzIHRoZSBlcXVhdGlvbnMgaW50byBpc2xhbmRzIGFuZCBzb2x2ZXMgdGhlbSBpbmRlcGVuZGVudGx5LiBDYW4gaW1wcm92ZSBwZXJmb3JtYW5jZS4KICAgKi8KICBjbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuCiAgICAgKi8KCiAgICAvKiogc3Vic29sdmVyICovCiAgICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgICAgdGhpcy5zdWJzb2x2ZXIgPSBzdWJzb2x2ZXI7CiAgICAgIHRoaXMubm9kZXMgPSBbXTsKICAgICAgdGhpcy5ub2RlUG9vbCA9IFtdOyAvLyBDcmVhdGUgbmVlZGVkIG5vZGVzLCByZXVzZSBpZiBwb3NzaWJsZQoKICAgICAgd2hpbGUgKHRoaXMubm9kZVBvb2wubGVuZ3RoIDwgMTI4KSB7CiAgICAgICAgdGhpcy5ub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjcmVhdGVOb2RlCiAgICAgKi8KCgogICAgY3JlYXRlTm9kZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBib2R5OiBudWxsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBlcXM6IFtdLAogICAgICAgIHZpc2l0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBjb25zdCBub2RlcyA9IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzOwogICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBzdWJzb2x2ZXIgPSB0aGlzLnN1YnNvbHZlcjsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlIChub2RlUG9vbC5sZW5ndGggPCBOYm9kaWVzKSB7CiAgICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KCiAgICAgIG5vZGVzLmxlbmd0aCA9IE5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5ib2RpZXM7IGkrKykgewogICAgICAgIG5vZGVzW2ldID0gbm9kZVBvb2xbaV07CiAgICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwogICAgICAgIG5vZGUuYm9keSA9IGJvZGllc1tpXTsKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDsKICAgICAgICBub2RlLnZpc2l0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5lcTsgaysrKSB7CiAgICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107CiAgICAgICAgY29uc3QgaSA9IGJvZGllcy5pbmRleE9mKGVxLmJpKTsKICAgICAgICBjb25zdCBqID0gYm9kaWVzLmluZGV4T2YoZXEuYmopOwogICAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07CiAgICAgICAgY29uc3QgbmogPSBub2Rlc1tqXTsKICAgICAgICBuaS5jaGlsZHJlbi5wdXNoKG5qKTsKICAgICAgICBuaS5lcXMucHVzaChlcSk7CiAgICAgICAgbmouY2hpbGRyZW4ucHVzaChuaSk7CiAgICAgICAgbmouZXFzLnB1c2goZXEpOwogICAgICB9CgogICAgICBsZXQgY2hpbGQ7CiAgICAgIGxldCBuID0gMDsKICAgICAgbGV0IGVxcyA9IFNwbGl0U29sdmVyX3NvbHZlX2VxczsKICAgICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlOwogICAgICBzdWJzb2x2ZXIuaXRlcmF0aW9ucyA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgZHVtbXlXb3JsZCA9IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSkgewogICAgICAgIGVxcy5sZW5ndGggPSAwOwogICAgICAgIGR1bW15V29ybGQuYm9kaWVzLmxlbmd0aCA9IDA7CiAgICAgICAgYmZzKGNoaWxkLCB2aXNpdEZ1bmMsIGR1bW15V29ybGQuYm9kaWVzLCBlcXMpOwogICAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoOwogICAgICAgIGVxcyA9IGVxcy5zb3J0KHNvcnRCeUlkKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICAgICAgc3Vic29sdmVyLmFkZEVxdWF0aW9uKGVxc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpOwogICAgICAgIHN1YnNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsKICAgICAgICBuKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQoKICB9IC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBzdWJzeXN0ZW1zCgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzID0gW107IC8vIEFsbCBhbGxvY2F0ZWQgbm9kZSBvYmplY3RzCgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX2VxcyA9IFtdOyAvLyBUZW1wIGFycmF5CgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQgPSB7CiAgICBib2RpZXM6IFtdCiAgfTsgLy8gVGVtcCBvYmplY3QKCiAgY29uc3QgU1RBVElDID0gQm9keS5TVEFUSUM7CgogIGZ1bmN0aW9uIGdldFVudmlzaXRlZE5vZGUobm9kZXMpIHsKICAgIGNvbnN0IE5ub2RlcyA9IG5vZGVzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTm5vZGVzOyBpKyspIHsKICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwoKICAgICAgaWYgKCFub2RlLnZpc2l0ZWQgJiYgIShub2RlLmJvZHkudHlwZSAmIFNUQVRJQykpIHsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnN0IHF1ZXVlID0gW107CgogIGZ1bmN0aW9uIGJmcyhyb290LCB2aXNpdEZ1bmMsIGJkcywgZXFzKSB7CiAgICBxdWV1ZS5wdXNoKHJvb3QpOwogICAgcm9vdC52aXNpdGVkID0gdHJ1ZTsKICAgIHZpc2l0RnVuYyhyb290LCBiZHMsIGVxcyk7CgogICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkgewogICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7IC8vIExvb3Agb3ZlciB1bnZpc2l0ZWQgY2hpbGQgbm9kZXMKCiAgICAgIGxldCBjaGlsZDsKCiAgICAgIHdoaWxlIChjaGlsZCA9IGdldFVudmlzaXRlZE5vZGUobm9kZS5jaGlsZHJlbikpIHsKICAgICAgICBjaGlsZC52aXNpdGVkID0gdHJ1ZTsKICAgICAgICB2aXNpdEZ1bmMoY2hpbGQsIGJkcywgZXFzKTsKICAgICAgICBxdWV1ZS5wdXNoKGNoaWxkKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gdmlzaXRGdW5jKG5vZGUsIGJkcywgZXFzKSB7CiAgICBiZHMucHVzaChub2RlLmJvZHkpOwogICAgY29uc3QgTmVxcyA9IG5vZGUuZXFzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7CiAgICAgIGNvbnN0IGVxID0gbm9kZS5lcXNbaV07CgogICAgICBpZiAoIWVxcy5pbmNsdWRlcyhlcSkpIHsKICAgICAgICBlcXMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHNvcnRCeUlkKGEsIGIpIHsKICAgIHJldHVybiBiLmlkIC0gYS5pZDsKICB9CgogIC8qKgogICAqIEZvciBwb29saW5nIG9iamVjdHMgdGhhdCBjYW4gYmUgcmV1c2VkLgogICAqLwogIGNsYXNzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMub2JqZWN0cyA9IFtdOwogICAgICB0aGlzLnR5cGUgPSBPYmplY3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxlYXNlIGFuIG9iamVjdCBhZnRlciB1c2UKICAgICAqLwogICAgcmVsZWFzZSgpIHsKICAgICAgY29uc3QgTmFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIG9iamVjdAogICAgICovCgoKICAgIGdldCgpIHsKICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RPYmplY3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBvYmplY3QuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBlYWNoIHN1YmNsYXNzLgogICAgICovCgoKICAgIGNvbnN0cnVjdE9iamVjdCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdHJ1Y3RPYmplY3QoKSBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBQb29sIHN1YmNsYXNzIHlldCEnKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBTZWxmLCBmb3IgY2hhaW5pbmcKICAgICAqLwoKCiAgICByZXNpemUoc2l6ZSkgewogICAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzOwoKICAgICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkgewogICAgICAgIG9iamVjdHMucG9wKCk7CiAgICAgIH0KCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA8IHNpemUpIHsKICAgICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CgogIC8qKgogICAqIFZlYzNQb29sCiAgICovCgogIGNsYXNzIFZlYzNQb29sIGV4dGVuZHMgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhIHZlY3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMygpOwogICAgfQoKICB9CgogIC8vIE5hbWluZyBydWxlOiBiYXNlZCBvZiB0aGUgb3JkZXIgaW4gU0hBUEVfVFlQRVMsCiAgLy8gdGhlIGZpcnN0IHBhcnQgb2YgdGhlIG1ldGhvZCBpcyBmb3JtZWQgYnkgdGhlCiAgLy8gc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGJlZm9yZSwgaW4gdGhlIHNlY29uZCBwYXJ0CiAgLy8gdGhlcmUgaXMgdGhlIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBhZnRlciBpbiB0aGUgU0hBUEVfVFlQRVMgbGlzdAogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwoKICAvKioKICAgKiBIZWxwZXIgY2xhc3MgZm9yIHRoZSBXb3JsZC4gR2VuZXJhdGVzIENvbnRhY3RFcXVhdGlvbnMuCiAgICogQHRvZG8gU3BoZXJlLUNvbnZleFBvbHloZWRyb24gY29udGFjdHMKICAgKiBAdG9kbyBDb250YWN0IHJlZHVjdGlvbgogICAqIEB0b2RvIHNob3VsZCBtb3ZlIG1ldGhvZHMgdG8gcHJvdG90eXBlCiAgICovCiAgY2xhc3MgTmFycm93cGhhc2UgewogICAgLyoqCiAgICAgKiBJbnRlcm5hbCBzdG9yYWdlIG9mIHBvb2xlZCBjb250YWN0IHBvaW50cy4KICAgICAqLwoKICAgIC8qKgogICAgICogUG9vbGVkIHZlY3RvcnMuCiAgICAgKi8KICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVNwaGVyZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVNwaGVyZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBsYW5lOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEJveF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveEJveDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUJveDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDb252ZXhdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlSGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmN5bGluZGVyQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmhlaWdodGZpZWxkQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5oZWlnaHRmaWVsZEN5bGluZGVyOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBhcnRpY2xlQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJ0aWNsZUN5bGluZGVyOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVUcmltZXNoOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lVHJpbWVzaF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lVHJpbWVzaDsKICAgIH0gLy8gZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4VHJpbWVzaF0oKSB7CiAgICAvLyAgIHJldHVybiB0aGlzLmNvbnZleFRyaW1lc2gKICAgIC8vIH0KCgogICAgY29uc3RydWN0b3Iod29ybGQpIHsKICAgICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTsKICAgICAgdGhpcy5yZXN1bHQgPSBbXTsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IFtdOwogICAgICB0aGlzLnYzcG9vbCA9IG5ldyBWZWMzUG9vbCgpOwogICAgICB0aGlzLndvcmxkID0gd29ybGQ7CiAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogTWFrZSBhIGNvbnRhY3Qgb2JqZWN0LCBieSB1c2luZyB0aGUgaW50ZXJuYWwgcG9vbCBvciBjcmVhdGluZyBhIG5ldyBvbmUuCiAgICAgKi8KCgogICAgY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCBvdmVycmlkZVNoYXBlQSwgb3ZlcnJpZGVTaGFwZUIpIHsKICAgICAgbGV0IGM7CgogICAgICBpZiAodGhpcy5jb250YWN0UG9pbnRQb29sLmxlbmd0aCkgewogICAgICAgIGMgPSB0aGlzLmNvbnRhY3RQb2ludFBvb2wucG9wKCk7CiAgICAgICAgYy5iaSA9IGJpOwogICAgICAgIGMuYmogPSBiajsKICAgICAgfSBlbHNlIHsKICAgICAgICBjID0gbmV3IENvbnRhY3RFcXVhdGlvbihiaSwgYmopOwogICAgICB9CgogICAgICBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgY29uc3QgY20gPSB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWw7CiAgICAgIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgYy5zZXRTcG9va1BhcmFtcyhjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sIHRoaXMud29ybGQuZHQpOwogICAgICBjb25zdCBtYXRBID0gc2kubWF0ZXJpYWwgfHwgYmkubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzai5tYXRlcmlhbCB8fCBiai5tYXRlcmlhbDsKCiAgICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5yZXN0aXR1dGlvbiA+PSAwICYmIG1hdEIucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgIGMucmVzdGl0dXRpb24gPSBtYXRBLnJlc3RpdHV0aW9uICogbWF0Qi5yZXN0aXR1dGlvbjsKICAgICAgfQoKICAgICAgYy5zaSA9IG92ZXJyaWRlU2hhcGVBIHx8IHNpOwogICAgICBjLnNqID0gb3ZlcnJpZGVTaGFwZUIgfHwgc2o7CiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxdWF0aW9uLCBvdXRBcnJheSkgewogICAgICBjb25zdCBib2R5QSA9IGNvbnRhY3RFcXVhdGlvbi5iaTsKICAgICAgY29uc3QgYm9keUIgPSBjb250YWN0RXF1YXRpb24uYmo7CiAgICAgIGNvbnN0IHNoYXBlQSA9IGNvbnRhY3RFcXVhdGlvbi5zaTsKICAgICAgY29uc3Qgc2hhcGVCID0gY29udGFjdEVxdWF0aW9uLnNqOwogICAgICBjb25zdCB3b3JsZCA9IHRoaXMud29ybGQ7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOyAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICBsZXQgZnJpY3Rpb24gPSBjbS5mcmljdGlvbjsKICAgICAgY29uc3QgbWF0QSA9IHNoYXBlQS5tYXRlcmlhbCB8fCBib2R5QS5tYXRlcmlhbDsKICAgICAgY29uc3QgbWF0QiA9IHNoYXBlQi5tYXRlcmlhbCB8fCBib2R5Qi5tYXRlcmlhbDsKCiAgICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5mcmljdGlvbiA+PSAwICYmIG1hdEIuZnJpY3Rpb24gPj0gMCkgewogICAgICAgIGZyaWN0aW9uID0gbWF0QS5mcmljdGlvbiAqIG1hdEIuZnJpY3Rpb247CiAgICAgIH0KCiAgICAgIGlmIChmcmljdGlvbiA+IDApIHsKICAgICAgICAvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIFVzZXJzIG1heSBwcm92aWRlIGEgZm9yY2UgZGlmZmVyZW50IGZyb20gZ2xvYmFsIGdyYXZpdHkgdG8gdXNlIHdoZW4gY29tcHV0aW5nIGNvbnRhY3QgZnJpY3Rpb24uCiAgICAgICAgY29uc3QgbXVnID0gZnJpY3Rpb24gKiAod29ybGQuZnJpY3Rpb25HcmF2aXR5IHx8IHdvcmxkLmdyYXZpdHkpLmxlbmd0aCgpOwogICAgICAgIGxldCByZWR1Y2VkTWFzcyA9IGJvZHlBLmludk1hc3MgKyBib2R5Qi5pbnZNYXNzOwoKICAgICAgICBpZiAocmVkdWNlZE1hc3MgPiAwKSB7CiAgICAgICAgICByZWR1Y2VkTWFzcyA9IDEgLyByZWR1Y2VkTWFzczsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIGNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjMS5iaSA9IGMyLmJpID0gYm9keUE7CiAgICAgICAgYzEuYmogPSBjMi5iaiA9IGJvZHlCOwogICAgICAgIGMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnICogcmVkdWNlZE1hc3M7CiAgICAgICAgYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZyAqIHJlZHVjZWRNYXNzOyAvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKCiAgICAgICAgYzEucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMxLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsKICAgICAgICBjMi5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzIucmouY29weShjb250YWN0RXF1YXRpb24ucmopOyAvLyBDb25zdHJ1Y3QgdGFuZ2VudHMKCiAgICAgICAgY29udGFjdEVxdWF0aW9uLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOyAvLyBTZXQgc3Bvb2sgcGFyYW1zCgogICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMS5lbmFibGVkID0gYzIuZW5hYmxlZCA9IGNvbnRhY3RFcXVhdGlvbi5lbmFibGVkOwogICAgICAgIG91dEFycmF5LnB1c2goYzEsIGMyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBUYWtlIHRoZSBhdmVyYWdlIE4gbGF0ZXN0IGNvbnRhY3QgcG9pbnQgb24gdGhlIHBsYW5lLgogICAgICovCgoKICAgIGNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpIHsKICAgICAgLy8gVGhlIGxhc3QgY29udGFjdEVxdWF0aW9uCiAgICAgIGxldCBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMV07IC8vIENyZWF0ZSB0aGUgcmVzdWx0OiB0d28gImF2ZXJhZ2UiIGZyaWN0aW9uIGVxdWF0aW9ucwoKICAgICAgaWYgKCF0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoYywgdGhpcy5mcmljdGlvblJlc3VsdCkgfHwgbnVtQ29udGFjdHMgPT09IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGYxID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDJdOwogICAgICBjb25zdCBmMiA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAxXTsKICAgICAgYXZlcmFnZU5vcm1hbC5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2V0WmVybygpOwogICAgICBjb25zdCBib2R5QSA9IGMuYmk7CiAgICAgIGMuYmo7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbnVtQ29udGFjdHM7IGkrKykgewogICAgICAgIGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxIC0gaV07CgogICAgICAgIGlmIChjLmJpICE9PSBib2R5QSkgewogICAgICAgICAgYXZlcmFnZU5vcm1hbC52YWRkKGMubmksIGF2ZXJhZ2VOb3JtYWwpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXZlcmFnZU5vcm1hbC52c3ViKGMubmksIGF2ZXJhZ2VOb3JtYWwpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IGludk51bUNvbnRhY3RzID0gMSAvIG51bUNvbnRhY3RzOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmkpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmopOwogICAgICBmMi5yaS5jb3B5KGYxLnJpKTsgLy8gU2hvdWxkIGJlIHRoZSBzYW1lCgogICAgICBmMi5yai5jb3B5KGYxLnJqKTsKICAgICAgYXZlcmFnZU5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgYXZlcmFnZU5vcm1hbC50YW5nZW50cyhmMS50LCBmMi50KTsgLy8gcmV0dXJuIGVxOwogICAgfQogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBhbGwgY29udGFjdHMgYmV0d2VlbiBhIGxpc3Qgb2YgYm9keSBwYWlycwogICAgICogQHBhcmFtIHAxIEFycmF5IG9mIGJvZHkgaW5kaWNlcwogICAgICogQHBhcmFtIHAyIEFycmF5IG9mIGJvZHkgaW5kaWNlcwogICAgICogQHBhcmFtIHJlc3VsdCBBcnJheSB0byBzdG9yZSBnZW5lcmF0ZWQgY29udGFjdHMKICAgICAqIEBwYXJhbSBvbGRjb250YWN0cyBPcHRpb25hbC4gQXJyYXkgb2YgcmV1c2FibGUgY29udGFjdCBvYmplY3RzCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdHMocDEsIHAyLCB3b3JsZCwgcmVzdWx0LCBvbGRjb250YWN0cywgZnJpY3Rpb25SZXN1bHQsIGZyaWN0aW9uUG9vbCkgewogICAgICAvLyBTYXZlIG9sZCBjb250YWN0IG9iamVjdHMKICAgICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gb2xkY29udGFjdHM7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBmcmljdGlvblBvb2w7CiAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICB0aGlzLmZyaWN0aW9uUmVzdWx0ID0gZnJpY3Rpb25SZXN1bHQ7CiAgICAgIGNvbnN0IHFpID0gdG1wUXVhdDE7CiAgICAgIGNvbnN0IHFqID0gdG1wUXVhdDI7CiAgICAgIGNvbnN0IHhpID0gdG1wVmVjMTsKICAgICAgY29uc3QgeGogPSB0bXBWZWMyOwoKICAgICAgZm9yIChsZXQgayA9IDAsIE4gPSBwMS5sZW5ndGg7IGsgIT09IE47IGsrKykgewogICAgICAgIC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBib2RpZXMKICAgICAgICBjb25zdCBiaSA9IHAxW2tdOwogICAgICAgIGNvbnN0IGJqID0gcDJba107IC8vIEdldCBjb250YWN0IG1hdGVyaWFsCgogICAgICAgIGxldCBib2R5Q29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBib2R5Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGp1c3RUZXN0ID0gYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LlNUQVRJQyB8fCBiaS50eXBlICYgQm9keS5TVEFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDIHx8IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUM7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmkuc2hhcGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLm11bHQoYmkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICAgIGJpLnF1YXRlcm5pb24udm11bHQoYmkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgICB4aS52YWRkKGJpLnBvc2l0aW9uLCB4aSk7CiAgICAgICAgICBjb25zdCBzaSA9IGJpLnNoYXBlc1tpXTsKCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJqLnNoYXBlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAvLyBDb21wdXRlIHdvcmxkIHRyYW5zZm9ybSBvZiBzaGFwZXMKICAgICAgICAgICAgYmoucXVhdGVybmlvbi5tdWx0KGJqLnNoYXBlT3JpZW50YXRpb25zW2pdLCBxaik7CiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24udm11bHQoYmouc2hhcGVPZmZzZXRzW2pdLCB4aik7CiAgICAgICAgICAgIHhqLnZhZGQoYmoucG9zaXRpb24sIHhqKTsKICAgICAgICAgICAgY29uc3Qgc2ogPSBiai5zaGFwZXNbal07CgogICAgICAgICAgICBpZiAoIShzaS5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2ouY29sbGlzaW9uRmlsdGVyR3JvdXAgJiYgc2ouY29sbGlzaW9uRmlsdGVyTWFzayAmIHNpLmNvbGxpc2lvbkZpbHRlckdyb3VwKSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0gLy8gR2V0IGNvbGxpc2lvbiBtYXRlcmlhbAoKCiAgICAgICAgICAgIGxldCBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgICAgICBpZiAoc2kubWF0ZXJpYWwgJiYgc2oubWF0ZXJpYWwpIHsKICAgICAgICAgICAgICBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChzaS5tYXRlcmlhbCwgc2oubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHNoYXBlQ29udGFjdE1hdGVyaWFsIHx8IGJvZHlDb250YWN0TWF0ZXJpYWwgfHwgd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsgLy8gR2V0IGNvbnRhY3RzCgogICAgICAgICAgICBjb25zdCByZXNvbHZlckluZGV4ID0gc2kudHlwZSB8IHNqLnR5cGU7CiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpc1tyZXNvbHZlckluZGV4XTsKCiAgICAgICAgICAgIGlmIChyZXNvbHZlcikgewogICAgICAgICAgICAgIGxldCByZXR2YWwgPSBmYWxzZTsgLy8gVE8gRE86IGludmVzdGlnYXRlIHdoeSBzcGhlcmVQYXJ0aWNsZSBhbmQgY29udmV4UGFydGljbGUKICAgICAgICAgICAgICAvLyByZXNvbHZlcnMgZXhwZWN0IHNpIGFuZCBzaiBzaGFwZXMgdG8gYmUgaW4gcmV2ZXJzZSBvcmRlcgogICAgICAgICAgICAgIC8vIChpLmUuIGxhcmdlciBpbnRlZ2VyIHZhbHVlIHR5cGUgZmlyc3QgaW5zdGVhZCBvZiBzbWFsbGVyIGZpcnN0KQoKICAgICAgICAgICAgICBpZiAoc2kudHlwZSA8IHNqLnR5cGUpIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHJldHZhbCAmJiBqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgb3ZlcmxhcAogICAgICAgICAgICAgICAgd29ybGQuc2hhcGVPdmVybGFwS2VlcGVyLnNldChzaS5pZCwgc2ouaWQpOwogICAgICAgICAgICAgICAgd29ybGQuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlU3BoZXJlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgIHJldHVybiB4aS5kaXN0YW5jZVNxdWFyZWQoeGopIDwgKHNpLnJhZGl1cyArIHNqLnJhZGl1cykgKiogMjsKICAgICAgfSAvLyBXZSB3aWxsIGhhdmUgb25seSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2UKCgogICAgICBjb25zdCBjb250YWN0RXEgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgeGoudnN1Yih4aSwgY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLm5pLm5vcm1hbGl6ZSgpOyAvLyBDb250YWN0IHBvaW50IGxvY2F0aW9ucwoKICAgICAgY29udGFjdEVxLnJpLmNvcHkoY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLnJqLmNvcHkoY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLnJpLnNjYWxlKHNpLnJhZGl1cywgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJqLnNjYWxlKC1zai5yYWRpdXMsIGNvbnRhY3RFcS5yaik7CiAgICAgIGNvbnRhY3RFcS5yaS52YWRkKHhpLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmkudnN1YihiaS5wb3NpdGlvbiwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJqLnZhZGQoeGosIGNvbnRhY3RFcS5yaik7CiAgICAgIGNvbnRhY3RFcS5yai52c3ViKGJqLnBvc2l0aW9uLCBjb250YWN0RXEucmopOwogICAgICB0aGlzLnJlc3VsdC5wdXNoKGNvbnRhY3RFcSk7CiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXEsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgfQoKICAgIHNwaGVyZVBsYW5lKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFdlIHdpbGwgaGF2ZSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2UKICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICByLm5pLnNldCgwLCAwLCAxKTsKICAgICAgcWoudm11bHQoci5uaSwgci5uaSk7CiAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBib2R5IGkgaXMgdGhlIHNwaGVyZSwgZmxpcCBub3JtYWwKCiAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIE5lZWRlZD8KICAgICAgLy8gVmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0IHBvaW50CgogICAgICByLm5pLnNjYWxlKHNpLnJhZGl1cywgci5yaSk7IC8vIFByb2plY3QgZG93biBzcGhlcmUgb24gcGxhbmUKCiAgICAgIHhpLnZzdWIoeGosIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSk7CiAgICAgIHIubmkuc2NhbGUoci5uaS5kb3QocG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKSwgcGxhbmVfdG9fc3BoZXJlX29ydGhvKTsKICAgICAgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlLnZzdWIocGxhbmVfdG9fc3BoZXJlX29ydGhvLCByLnJqKTsgLy8gVGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gcGxhbmUKCiAgICAgIGlmICgtcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlLmRvdChyLm5pKSA8PSBzaS5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKCiAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgIGNvbnN0IHJqID0gci5yajsKICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgIH0KICAgIH0KCiAgICBib3hCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOyAvLyB3ZSByZWZlciB0byB0aGUgYm94IGFzIGJvZHkgagoKICAgICAgY29uc3Qgc2lkZXMgPSBzcGhlcmVCb3hfc2lkZXM7CiAgICAgIHhpLnZzdWIoeGosIGJveF90b19zcGhlcmUpOwogICAgICBzai5nZXRTaWRlTm9ybWFscyhzaWRlcywgcWopOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwoKICAgICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIFN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBwZW5ldHJhdGlvbiBpbmZvCgogICAgICBjb25zdCBzaWRlX25zID0gc3BoZXJlQm94X3NpZGVfbnM7CiAgICAgIGNvbnN0IHNpZGVfbnMxID0gc3BoZXJlQm94X3NpZGVfbnMxOwogICAgICBjb25zdCBzaWRlX25zMiA9IHNwaGVyZUJveF9zaWRlX25zMjsKICAgICAgbGV0IHNpZGVfaCA9IG51bGw7CiAgICAgIGxldCBzaWRlX3BlbmV0cmF0aW9ucyA9IDA7CiAgICAgIGxldCBzaWRlX2RvdDEgPSAwOwogICAgICBsZXQgc2lkZV9kb3QyID0gMDsKICAgICAgbGV0IHNpZGVfZGlzdGFuY2UgPSBudWxsOwoKICAgICAgZm9yIChsZXQgaWR4ID0gMCwgbnNpZGVzID0gc2lkZXMubGVuZ3RoOyBpZHggIT09IG5zaWRlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGlkeCsrKSB7CiAgICAgICAgLy8gR2V0IHRoZSBwbGFuZSBzaWRlIG5vcm1hbCAobnMpCiAgICAgICAgY29uc3QgbnMgPSBzcGhlcmVCb3hfbnM7CiAgICAgICAgbnMuY29weShzaWRlc1tpZHhdKTsKICAgICAgICBjb25zdCBoID0gbnMubGVuZ3RoKCk7CiAgICAgICAgbnMubm9ybWFsaXplKCk7IC8vIFRoZSBub3JtYWwvZGlzdGFuY2UgZG90IHByb2R1Y3QgdGVsbHMgd2hpY2ggc2lkZSBvZiB0aGUgcGxhbmUgd2UgYXJlCgogICAgICAgIGNvbnN0IGRvdCA9IGJveF90b19zcGhlcmUuZG90KG5zKTsKCiAgICAgICAgaWYgKGRvdCA8IGggKyBSICYmIGRvdCA+IDApIHsKICAgICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayB0aGUgb3RoZXIgdHdvIGRpbWVuc2lvbnMKICAgICAgICAgIGNvbnN0IG5zMSA9IHNwaGVyZUJveF9uczE7CiAgICAgICAgICBjb25zdCBuczIgPSBzcGhlcmVCb3hfbnMyOwogICAgICAgICAgbnMxLmNvcHkoc2lkZXNbKGlkeCArIDEpICUgM10pOwogICAgICAgICAgbnMyLmNvcHkoc2lkZXNbKGlkeCArIDIpICUgM10pOwogICAgICAgICAgY29uc3QgaDEgPSBuczEubGVuZ3RoKCk7CiAgICAgICAgICBjb25zdCBoMiA9IG5zMi5sZW5ndGgoKTsKICAgICAgICAgIG5zMS5ub3JtYWxpemUoKTsKICAgICAgICAgIG5zMi5ub3JtYWxpemUoKTsKICAgICAgICAgIGNvbnN0IGRvdDEgPSBib3hfdG9fc3BoZXJlLmRvdChuczEpOwogICAgICAgICAgY29uc3QgZG90MiA9IGJveF90b19zcGhlcmUuZG90KG5zMik7CgogICAgICAgICAgaWYgKGRvdDEgPCBoMSAmJiBkb3QxID4gLWgxICYmIGRvdDIgPCBoMiAmJiBkb3QyID4gLWgyKSB7CiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmFicyhkb3QgLSBoIC0gUik7CgogICAgICAgICAgICBpZiAoc2lkZV9kaXN0YW5jZSA9PT0gbnVsbCB8fCBkaXN0IDwgc2lkZV9kaXN0YW5jZSkgewogICAgICAgICAgICAgIHNpZGVfZGlzdGFuY2UgPSBkaXN0OwogICAgICAgICAgICAgIHNpZGVfZG90MSA9IGRvdDE7CiAgICAgICAgICAgICAgc2lkZV9kb3QyID0gZG90MjsKICAgICAgICAgICAgICBzaWRlX2ggPSBoOwogICAgICAgICAgICAgIHNpZGVfbnMuY29weShucyk7CiAgICAgICAgICAgICAgc2lkZV9uczEuY29weShuczEpOwogICAgICAgICAgICAgIHNpZGVfbnMyLmNvcHkobnMyKTsKICAgICAgICAgICAgICBzaWRlX3BlbmV0cmF0aW9ucysrOwoKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHNpZGVfcGVuZXRyYXRpb25zKSB7CiAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIHNpZGVfbnMuc2NhbGUoLVIsIHIucmkpOyAvLyBTcGhlcmUgcgoKICAgICAgICByLm5pLmNvcHkoc2lkZV9ucyk7CiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBzaG91bGQgYmUgb3V0IG9mIHNwaGVyZQoKICAgICAgICBzaWRlX25zLnNjYWxlKHNpZGVfaCwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczEuc2NhbGUoc2lkZV9kb3QxLCBzaWRlX25zMSk7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMxLCBzaWRlX25zKTsKICAgICAgICBzaWRlX25zMi5zY2FsZShzaWRlX2RvdDIsIHNpZGVfbnMyKTsKICAgICAgICBzaWRlX25zLnZhZGQoc2lkZV9uczIsIHIucmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9IC8vIENoZWNrIGNvcm5lcnMKCgogICAgICBsZXQgcmogPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lcjsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSAyICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IDIgJiYgIWZvdW5kOyBrKyspIHsKICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsICE9PSAyICYmICFmb3VuZDsgbCsrKSB7CiAgICAgICAgICAgIHJqLnNldCgwLCAwLCAwKTsKCiAgICAgICAgICAgIGlmIChqKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1swXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGspIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzFdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMl0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gLy8gV29ybGQgcG9zaXRpb24gb2YgY29ybmVyCgoKICAgICAgICAgICAgeGoudmFkZChyaiwgc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICAgIHNwaGVyZV90b19jb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7CgogICAgICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICAgIHIucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgci5uaS5jb3B5KHIucmkpOwogICAgICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICAgICAgci5yai5jb3B5KHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UocmopOwogICAgICByaiA9IG51bGw7IC8vIENoZWNrIGVkZ2VzCgogICAgICBjb25zdCBlZGdlVGFuZ2VudCA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgZWRnZUNlbnRlciA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgciA9IHYzcG9vbC5nZXQoKTsgLy8gciA9IGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIKCiAgICAgIGNvbnN0IG9ydGhvZ29uYWwgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGRpc3QgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IE5zaWRlcyA9IHNpZGVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOc2lkZXMgJiYgIWZvdW5kOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gTnNpZGVzICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBpZiAoaiAlIDMgIT09IGsgJSAzKSB7CiAgICAgICAgICAgIC8vIEdldCBlZGdlIHRhbmdlbnQKICAgICAgICAgICAgc2lkZXNba10uY3Jvc3Moc2lkZXNbal0sIGVkZ2VUYW5nZW50KTsKICAgICAgICAgICAgZWRnZVRhbmdlbnQubm9ybWFsaXplKCk7CiAgICAgICAgICAgIHNpZGVzW2pdLnZhZGQoc2lkZXNba10sIGVkZ2VDZW50ZXIpOwogICAgICAgICAgICByLmNvcHkoeGkpOwogICAgICAgICAgICByLnZzdWIoZWRnZUNlbnRlciwgcik7CiAgICAgICAgICAgIHIudnN1Yih4aiwgcik7CiAgICAgICAgICAgIGNvbnN0IG9ydGhvbm9ybSA9IHIuZG90KGVkZ2VUYW5nZW50KTsgLy8gZGlzdGFuY2UgZnJvbSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyIGluIHRoZSB0YW5nZW50IGRpcmVjdGlvbgoKICAgICAgICAgICAgZWRnZVRhbmdlbnQuc2NhbGUob3J0aG9ub3JtLCBvcnRob2dvbmFsKTsgLy8gVmVjdG9yIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KICAgICAgICAgICAgLy8gRmluZCB0aGUgdGhpcmQgc2lkZSBvcnRob2dvbmFsIHRvIHRoaXMgb25lCgogICAgICAgICAgICBsZXQgbCA9IDA7CgogICAgICAgICAgICB3aGlsZSAobCA9PT0gaiAlIDMgfHwgbCA9PT0gayAlIDMpIHsKICAgICAgICAgICAgICBsKys7CiAgICAgICAgICAgIH0gLy8gdmVjIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIHByb2plY3RlZCB0byB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byB0aGUgZWRnZSB0YW5nZW50CgoKICAgICAgICAgICAgZGlzdC5jb3B5KHhpKTsKICAgICAgICAgICAgZGlzdC52c3ViKG9ydGhvZ29uYWwsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoZWRnZUNlbnRlciwgZGlzdCk7CiAgICAgICAgICAgIGRpc3QudnN1Yih4aiwgZGlzdCk7IC8vIERpc3RhbmNlcyBpbiB0YW5nZW50IGRpcmVjdGlvbiBhbmQgZGlzdGFuY2UgaW4gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gaXQKCiAgICAgICAgICAgIGNvbnN0IHRkaXN0ID0gTWF0aC5hYnMob3J0aG9ub3JtKTsKICAgICAgICAgICAgY29uc3QgbmRpc3QgPSBkaXN0Lmxlbmd0aCgpOwoKICAgICAgICAgICAgaWYgKHRkaXN0IDwgc2lkZXNbbF0ubGVuZ3RoKCkgJiYgbmRpc3QgPCBSKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIGVkZ2VDZW50ZXIudmFkZChvcnRob2dvbmFsLCByZXMucmopOyAvLyBib3ggcmoKCiAgICAgICAgICAgICAgcmVzLnJqLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICBkaXN0Lm5lZ2F0ZShyZXMubmkpOwogICAgICAgICAgICAgIHJlcy5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByZXMucmkuY29weShyZXMucmopOwogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhqLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByZXMucmkuc2NhbGUoUiwgcmVzLnJpKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICAgICAgcmVzLnJpLnZhZGQoeGksIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJpLnZzdWIoYmkucG9zaXRpb24sIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJqLnZhZGQoeGosIHJlcy5yaik7CiAgICAgICAgICAgICAgcmVzLnJqLnZzdWIoYmoucG9zaXRpb24sIHJlcy5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyZXMpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyZXMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2M3Bvb2wucmVsZWFzZShlZGdlVGFuZ2VudCwgZWRnZUNlbnRlciwgciwgb3J0aG9nb25hbCwgZGlzdCk7CiAgICB9CgogICAgcGxhbmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uaWQgPSBzai5pZDsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVDb252ZXgoc2ksIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4Q29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7CgogICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc2kuZmluZFNlcGFyYXRpbmdBeGlzKHNqLCB4aSwgcWksIHhqLCBxaiwgc2VwQXhpcywgZmFjZUxpc3RBLCBmYWNlTGlzdEIpKSB7CiAgICAgICAgY29uc3QgcmVzID0gW107CiAgICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSwgcWksIHNqLCB4aiwgcWosIHNlcEF4aXMsIC0xMDAsIDEwMCwgcmVzKTsKICAgICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgICBzZXBBeGlzLm5lZ2F0ZShyLm5pKTsKICAgICAgICAgIHJlc1tqXS5ub3JtYWwubmVnYXRlKHEpOwogICAgICAgICAgcS5zY2FsZShyZXNbal0uZGVwdGgsIHEpOwogICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOyAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCgogICAgICAgICAgcmkudnN1Yih4aSwgcmkpOwogICAgICAgICAgcmoudnN1Yih4aiwgcmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7CiAgICAgIHhpLnZzdWIoeGosIGNvbnZleF90b19zcGhlcmUpOwogICAgICBjb25zdCBub3JtYWxzID0gc2ouZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IGZhY2VzID0gc2ouZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRzID0gc2oudmVydGljZXM7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIC8vICAgICByZXR1cm47CiAgICAgIC8vIH0KCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBDaGVjayBjb3JuZXJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKICAgICAgICBjb25zdCB3b3JsZENvcm5lciA9IHNwaGVyZUNvbnZleF93b3JsZENvcm5lcjsKICAgICAgICBxai52bXVsdCh2LCB3b3JsZENvcm5lcik7CiAgICAgICAgeGoudmFkZCh3b3JsZENvcm5lciwgd29ybGRDb3JuZXIpOwogICAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXI7CiAgICAgICAgd29ybGRDb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7CgogICAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgci5uaS5jb3B5KHIucmkpOwogICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTsKICAgICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGosIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIHNpZGUgKHBsYW5lKSBpbnRlcnNlY3Rpb25zCgoKICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IGZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzICYmIGZvdW5kID09PSBmYWxzZTsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9ybWFsID0gbm9ybWFsc1tpXTsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07IC8vIEdldCB3b3JsZC10cmFuc2Zvcm1lZCBub3JtYWwgb2YgdGhlIGZhY2UKCiAgICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBzcGhlcmVDb252ZXhfd29ybGROb3JtYWw7CiAgICAgICAgcWoudm11bHQobm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIEdldCBhIHdvcmxkIHZlcnRleCBmcm9tIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkUG9pbnQgPSBzcGhlcmVDb252ZXhfd29ybGRQb2ludDsKICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWzBdXSwgd29ybGRQb2ludCk7CiAgICAgICAgd29ybGRQb2ludC52YWRkKHhqLCB3b3JsZFBvaW50KTsgLy8gR2V0IGEgcG9pbnQgb24gdGhlIHNwaGVyZSwgY2xvc2VzdCB0byB0aGUgZmFjZSBub3JtYWwKCiAgICAgICAgY29uc3Qgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gc3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZTsKICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTsKICAgICAgICB4aS52YWRkKHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTsgLy8gVmVjdG9yIGZyb20gYSBmYWNlIHBvaW50IHRvIHRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSBzcGhlcmUKCiAgICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMgPSBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWM7CiAgICAgICAgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLnZzdWIod29ybGRQb2ludCwgcGVuZXRyYXRpb25WZWMpOyAvLyBUaGUgcGVuZXRyYXRpb24uIE5lZ2F0aXZlIHZhbHVlIG1lYW5zIG92ZXJsYXAuCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb25WZWMuZG90KHdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCB3b3JsZFBvaW50VG9TcGhlcmUgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50OwogICAgICAgIHhpLnZzdWIod29ybGRQb2ludCwgd29ybGRQb2ludFRvU3BoZXJlKTsKCiAgICAgICAgaWYgKHBlbmV0cmF0aW9uIDwgMCAmJiB3b3JsZFBvaW50VG9TcGhlcmUuZG90KHdvcmxkTm9ybWFsKSA+IDApIHsKICAgICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayBpZiB0aGUgc3BoZXJlIGlzIGluc2lkZSB0aGUgZmFjZSBwb2x5Z29uCiAgICAgICAgICBjb25zdCBmYWNlVmVydHMgPSBbXTsgLy8gRmFjZSB2ZXJ0aWNlcywgaW4gd29ybGQgY29vcmRzCgogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE52ZXJ0cyA9IGZhY2UubGVuZ3RoOyBqICE9PSBOdmVydHM7IGorKykgewogICAgICAgICAgICBjb25zdCB3b3JsZFZlcnRleCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVtqXV0sIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgeGoudmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgICAgICBmYWNlVmVydHMucHVzaCh3b3JsZFZlcnRleCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHBvaW50SW5Qb2x5Z29uKGZhY2VWZXJ0cywgd29ybGROb3JtYWwsIHhpKSkgewogICAgICAgICAgICAvLyBJcyB0aGUgc3BoZXJlIGNlbnRlciBpbiB0aGUgZmFjZSBwb2x5Z29uPwogICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHIucmkpOyAvLyBDb250YWN0IG9mZnNldCwgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QKCiAgICAgICAgICAgIHdvcmxkTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHBvaW50aW5nIG91dCBvZiBzcGhlcmUKCiAgICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjMiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLXBlbmV0cmF0aW9uLCBwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblNwaGVyZVBvaW50ID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgcGVuZXRyYXRpb25TcGhlcmVQb2ludCk7IC8veGkudnN1Yih4aikudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50KS52YWRkKHBlbmV0cmF0aW9uVmVjMiAsIHIucmopOwoKICAgICAgICAgICAgeGkudnN1Yih4aiwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50LCByLnJqKTsKICAgICAgICAgICAgci5yai52YWRkKHBlbmV0cmF0aW9uVmVjMiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uVmVjMik7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOwogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOyAvLyBXZSBvbmx5IGV4cGVjdCAqb25lKiBmYWNlIGNvbnRhY3QKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEVkZ2U/CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBmYWNlLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgLy8gR2V0IHR3byB3b3JsZCB0cmFuc2Zvcm1lZCB2ZXJ0aWNlcwogICAgICAgICAgICAgIGNvbnN0IHYxID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIGNvbnN0IHYyID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbKGogKyAxKSAlIGZhY2UubGVuZ3RoXV0sIHYxKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMikgJSBmYWNlLmxlbmd0aF1dLCB2Mik7CiAgICAgICAgICAgICAgeGoudmFkZCh2MSwgdjEpOwogICAgICAgICAgICAgIHhqLnZhZGQodjIsIHYyKTsgLy8gQ29uc3RydWN0IGVkZ2UgdmVjdG9yCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSBzcGhlcmVDb252ZXhfZWRnZTsKICAgICAgICAgICAgICB2Mi52c3ViKHYxLCBlZGdlKTsgLy8gQ29uc3RydWN0IHRoZSBzYW1lIHZlY3RvciwgYnV0IG5vcm1hbGl6ZWQKCiAgICAgICAgICAgICAgY29uc3QgZWRnZVVuaXQgPSBzcGhlcmVDb252ZXhfZWRnZVVuaXQ7CiAgICAgICAgICAgICAgZWRnZS51bml0KGVkZ2VVbml0KTsgLy8gcCBpcyB4aSBwcm9qZWN0ZWQgb250byB0aGUgZWRnZQoKICAgICAgICAgICAgICBjb25zdCBwID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIGNvbnN0IHYxX3RvX3hpID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHhpLnZzdWIodjEsIHYxX3RvX3hpKTsKICAgICAgICAgICAgICBjb25zdCBkb3QgPSB2MV90b194aS5kb3QoZWRnZVVuaXQpOwogICAgICAgICAgICAgIGVkZ2VVbml0LnNjYWxlKGRvdCwgcCk7CiAgICAgICAgICAgICAgcC52YWRkKHYxLCBwKTsgLy8gQ29tcHV0ZSBhIHZlY3RvciBmcm9tIHAgdG8gdGhlIGNlbnRlciBvZiB0aGUgc3BoZXJlCgogICAgICAgICAgICAgIGNvbnN0IHhpX3RvX3AgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgcC52c3ViKHhpLCB4aV90b19wKTsgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1cwogICAgICAgICAgICAgIC8vIEFORCBpZiBwIGlzIGluIGJldHdlZW4gdjEgYW5kIHYyCgogICAgICAgICAgICAgIGlmIChkb3QgPiAwICYmIGRvdCAqIGRvdCA8IGVkZ2UubGVuZ3RoU3F1YXJlZCgpICYmIHhpX3RvX3AubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAgIC8vIEVkZ2UgY29udGFjdCEKICAgICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICAgIHAudnN1Yih4aiwgci5yaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGksIHIubmkpOwogICAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICAgIHIubmkuc2NhbGUoUiwgci5yaSk7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlcwoKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2Mik7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjFfdG9feGkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCgogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHsKICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBwbGFuZUNvbnZleChwbGFuZVNoYXBlLCBjb252ZXhTaGFwZSwgcGxhbmVQb3NpdGlvbiwgY29udmV4UG9zaXRpb24sIHBsYW5lUXVhdCwgY29udmV4UXVhdCwgcGxhbmVCb2R5LCBjb252ZXhCb2R5LCBzaSwgc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIHBvaW50cyBiZWhpbmQgdGhlIHBsYW5lLgogICAgICBjb25zdCB3b3JsZFZlcnRleCA9IHBsYW5lQ29udmV4X3Y7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gcGxhbmVDb252ZXhfbm9ybWFsOwogICAgICB3b3JsZE5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGxldCBudW1Db250YWN0cyA9IDA7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lQ29udmV4X3JlbHBvczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBjb252ZXhTaGFwZS52ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCBjb252ZXggdmVydGV4CiAgICAgICAgd29ybGRWZXJ0ZXguY29weShjb252ZXhTaGFwZS52ZXJ0aWNlc1tpXSk7CiAgICAgICAgY29udmV4UXVhdC52bXVsdCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnZleFBvc2l0aW9uLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICB3b3JsZFZlcnRleC52c3ViKHBsYW5lUG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY29uc3QgZG90ID0gd29ybGROb3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgY29udmV4Qm9keSwgcGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHNpLCBzaik7IC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVDb252ZXhfcHJvamVjdGVkOwogICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUod29ybGROb3JtYWwuZG90KHJlbHBvcyksIHByb2plY3RlZCk7CiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsKICAgICAgICAgIHByb2plY3RlZC52c3ViKHBsYW5lUG9zaXRpb24sIHIucmkpOyAvLyBGcm9tIHBsYW5lIHRvIHZlcnRleCBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICByLm5pLmNvcHkod29ybGROb3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsIG91dCBmcm9tIHBsYW5lCiAgICAgICAgICAvLyByaiBpcyBub3cganVzdCB0aGUgdmVjdG9yIGZyb20gdGhlIGNvbnZleCBjZW50ZXIgdG8gdGhlIHZlcnRleAoKICAgICAgICAgIHdvcmxkVmVydGV4LnZzdWIoY29udmV4UG9zaXRpb24sIHIucmopOyAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgogICAgICAgICAgci5yaS52YWRkKHBsYW5lUG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHBsYW5lQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICByLnJqLnZhZGQoY29udmV4UG9zaXRpb24sIHIucmopOwogICAgICAgICAgci5yai52c3ViKGNvbnZleEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIG51bUNvbnRhY3RzKys7CgogICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTsKICAgICAgfQogICAgfQoKICAgIGJveENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVIZWlnaHRmaWVsZChzcGhlcmVTaGFwZSwgaGZTaGFwZSwgc3BoZXJlUG9zLCBoZlBvcywgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhOwogICAgICBjb25zdCByYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGNvbnN0IHcgPSBoZlNoYXBlLmVsZW1lbnRTaXplOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDI7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbFNwaGVyZVBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UgY2FuJ3QgdG91Y2ggdGhlIGJvdW5kaW5nIGhlaWdodCBib3gKCiAgICAgIGlmIChsb2NhbFNwaGVyZVBvcy56IC0gcmFkaXVzID4gbWF4IHx8IGxvY2FsU3BoZXJlUG9zLnogKyByYWRpdXMgPCBtaW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGNvbnN0IG51bUNvbnRhY3RzQmVmb3JlID0gcmVzdWx0Lmxlbmd0aDsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBudW1Db250YWN0cyA9IHJlc3VsdC5sZW5ndGggLSBudW1Db250YWN0c0JlZm9yZTsKCiAgICAgICAgICBpZiAobnVtQ29udGFjdHMgPiAyKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8qCiAgICAgICAgICAgIC8vIFNraXAgYWxsIGJ1dCAxCiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtQ29udGFjdHMgLSAxOyBrKyspIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5wb3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgKi8KCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgYm94SGVpZ2h0ZmllbGQoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgcmFkaXVzID0gY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CiAgICAgIGNvbnN0IHdvcmxkUGlsbGFyT2Zmc2V0ID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdDsgLy8gR2V0IHNwaGVyZSBwb3NpdGlvbiB0byBoZWlnaHRmaWVsZCBsb2NhbCEKCiAgICAgIGNvbnN0IGxvY2FsQ29udmV4UG9zID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIGNvbnZleFBvcywgbG9jYWxDb252ZXhQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnggLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsQ29udmV4UG9zLnggKyByYWRpdXMpIC8gdykgKyAxOwogICAgICBsZXQgaU1pblkgPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy55IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKICAgICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCgoKICAgICAgaWYgKGlNaW5YIDwgMCkgewogICAgICAgIGlNaW5YID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYIDwgMCkgewogICAgICAgIGlNYXhYID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZIDwgMCkgewogICAgICAgIGlNaW5ZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZIDwgMCkgewogICAgICAgIGlNYXhZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWF4WSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGNvbnN0IG1pbk1heCA9IFtdOwogICAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7CiAgICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTsKICAgICAgY29uc3QgbWF4ID0gbWluTWF4WzFdOyAvLyBCYWlsIG91dCBpZiB3ZSdyZSBjYW50IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxDb252ZXhQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbENvbnZleFBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZQoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZQoKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFRoZSBub3JtYWwgaXMgdGhlIHVuaXQgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBwYXJ0aWNsZSBjZW50ZXIKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVTcGhlcmVfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICB4aS52c3ViKHhqLCBub3JtYWwpOwogICAgICBjb25zdCBsZW5ndGhTcXVhcmVkID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChsZW5ndGhTcXVhcmVkIDw9IHNqLnJhZGl1cyAqIHNqLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgci5yai5jb3B5KG5vcm1hbCk7CiAgICAgICAgci5yai5zY2FsZShzai5yYWRpdXMsIHIucmopOwogICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgcGxhbmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBub3JtYWwgPSBwYXJ0aWNsZVBsYW5lX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgYmoucXVhdGVybmlvbi52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvbgoKICAgICAgY29uc3QgcmVscG9zID0gcGFydGljbGVQbGFuZV9yZWxwb3M7CiAgICAgIHhpLnZzdWIoYmoucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsCgogICAgICAgIHIubmkubmVnYXRlKHIubmkpOwogICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKICAgICAgICAvLyBHZXQgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkOwogICAgICAgIG5vcm1hbC5zY2FsZShub3JtYWwuZG90KHhpKSwgcHJvamVjdGVkKTsKICAgICAgICB4aS52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy9wcm9qZWN0ZWQudmFkZChiai5wb3NpdGlvbixwcm9qZWN0ZWQpOwogICAgICAgIC8vIHJqIGlzIG5vdyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgIHIucmouY29weShwcm9qZWN0ZWQpOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94UGFydGljbGUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBsZXQgcGVuZXRyYXRlZEZhY2VJbmRleCA9IC0xOwogICAgICBjb25zdCBwZW5ldHJhdGVkRmFjZU5vcm1hbCA9IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsOwogICAgICBjb25zdCB3b3JsZFBlbmV0cmF0aW9uVmVjID0gY29udmV4UGFydGljbGVfd29ybGRQZW5ldHJhdGlvblZlYzsKICAgICAgbGV0IG1pblBlbmV0cmF0aW9uID0gbnVsbDsKCiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQogIGNvbnN0IGF2ZXJhZ2VOb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRBID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wUXVhdDEgPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IHRtcFF1YXQyID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92MiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZV90b19zcGhlcmVfb3J0aG8gPSBuZXcgVmVjMygpOyAvLyBTZWUgaHR0cDovL2J1bGxldHBoeXNpY3MuY29tL0J1bGxldC9CdWxsZXRGdWxsL1NwaGVyZVRyaWFuZ2xlRGV0ZWN0b3JfOGNwcF9zb3VyY2UuaHRtbAoKICBjb25zdCBwb2ludEluUG9seWdvbl9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwb2ludEluUG9seWdvbl92dHAgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBwb2ludEluUG9seWdvbih2ZXJ0cywgbm9ybWFsLCBwKSB7CiAgICBsZXQgcG9zaXRpdmVSZXN1bHQgPSBudWxsOwogICAgY29uc3QgTiA9IHZlcnRzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsgLy8gR2V0IGVkZ2UgdG8gdGhlIG5leHQgdmVydGV4CgogICAgICBjb25zdCBlZGdlID0gcG9pbnRJblBvbHlnb25fZWRnZTsKICAgICAgdmVydHNbKGkgKyAxKSAlIE5dLnZzdWIodiwgZWRnZSk7IC8vIEdldCBjcm9zcyBwcm9kdWN0IGJldHdlZW4gcG9seWdvbiBub3JtYWwgYW5kIHRoZSBlZGdlCgogICAgICBjb25zdCBlZGdlX3hfbm9ybWFsID0gcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbDsgLy9jb25zdCBlZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgICAgIGVkZ2UuY3Jvc3Mobm9ybWFsLCBlZGdlX3hfbm9ybWFsKTsgLy8gR2V0IHZlY3RvciBiZXR3ZWVuIHBvaW50IGFuZCBjdXJyZW50IHZlcnRleAoKICAgICAgY29uc3QgdmVydGV4X3RvX3AgPSBwb2ludEluUG9seWdvbl92dHA7CiAgICAgIHAudnN1Yih2LCB2ZXJ0ZXhfdG9fcCk7IC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpcwoKICAgICAgY29uc3QgciA9IGVkZ2VfeF9ub3JtYWwuZG90KHZlcnRleF90b19wKTsgLy8gSWYgYWxsIHN1Y2ggZG90IHByb2R1Y3RzIGhhdmUgc2FtZSBzaWduLCB3ZSBhcmUgaW5zaWRlIHRoZSBwb2x5Z29uLgoKICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsIHx8IHIgPiAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSB0cnVlIHx8IHIgPD0gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICBpZiAocG9zaXRpdmVSZXN1bHQgPT09IG51bGwpIHsKICAgICAgICAgIHBvc2l0aXZlUmVzdWx0ID0gciA+IDA7CiAgICAgICAgfQoKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgfQogICAgfSAvLyBJZiB3ZSBnb3QgaGVyZSwgYWxsIGRvdCBwcm9kdWN0cyB3ZXJlIG9mIHRoZSBzYW1lIHNpZ24uCgoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgY29uc3QgYm94X3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZXMgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgY29uc3Qgc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4X3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X2VkZ2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0ID0gWzBdOwogIGNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpOwoKICBjbGFzcyBPdmVybGFwS2VlcGVyIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KCiAgY29uc3QgZ2V0S2V5ID0gKGksIGopID0+IGkgPCBqID8gYCR7aX0tJHtqfWAgOiBgJHtqfS0ke2l9YDsKICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CgogICAgLyoqIGdldCAqLwogICAgZ2V0KGksIGopIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOwogICAgICByZXR1cm4gdGhpcy5kYXRhW2tleV07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBjb25zdCBrZXkgPSBnZXRLZXkoaSwgaik7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiBkZWxldGUgKi8KCgogICAgZGVsZXRlKGksIGopIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5rZXlzLmluZGV4T2Yoa2V5KTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICBkZWxldGUgdGhpcy5kYXRhW2tleV07CiAgICB9CiAgICAvKiogcmVzZXQgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGtleXMgPSBkYXRhLmtleXM7CgogICAgICB3aGlsZSAoa2V5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc3Qga2V5ID0ga2V5cy5wb3AoKTsKICAgICAgICBkZWxldGUgZGF0YVtrZXldOwogICAgICB9CiAgICB9CgogIH0KCiAgLyoqCiAgICogVGhlIHBoeXNpY3Mgd29ybGQKICAgKi8KICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBHcmF2aXR5IHRvIHVzZSB3aGVuIGFwcHJveGltYXRpbmcgdGhlIGZyaWN0aW9uIG1heCBmb3JjZSAobXUqbWFzcypncmF2aXR5KS4KICAgICAqIElmIHVuZGVmaW5lZCwgZ2xvYmFsIGdyYXZpdHkgd2lsbCBiZSB1c2VkLgogICAgICogVXNlIHRvIGVuYWJsZSBmcmljdGlvbiBpbiBhIFdvcmxkIHdpdGggYSBudWxsIGdyYXZpdHkgdmVjdG9yIChubyBncmF2aXR5KS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGJyb2FkcGhhc2UgYWxnb3JpdGhtIHRvIHVzZS4KICAgICAqIEBkZWZhdWx0IE5haXZlQnJvYWRwaGFzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYm9kaWVzIGluIHRoaXMgd29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogVHJ1ZSBpZiBhbnkgYm9kaWVzIGFyZSBub3Qgc2xlZXBpbmcsIGZhbHNlIGlmIGV2ZXJ5IGJvZHkgaXMgc2xlZXBpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBzb2x2ZXIgYWxnb3JpdGhtIHRvIHVzZS4KICAgICAqIEBkZWZhdWx0IEdTU29sdmVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbk1hdHJpeAogICAgICovCgogICAgLyoqCiAgICAgKiBDb2xsaXNpb25NYXRyaXggZnJvbSB0aGUgcHJldmlvdXMgc3RlcC4KICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGFkZGVkIGNvbnRhY3RtYXRlcmlhbHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgdG8gbG9vayB1cCBhIENvbnRhY3RNYXRlcmlhbCBnaXZlbiB0d28gaW5zdGFuY2VzIG9mIE1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgZGVmYXVsdCBtYXRlcmlhbCBvZiB0aGUgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGlzIGNvbnRhY3QgbWF0ZXJpYWwgaXMgdXNlZCBpZiBubyBzdWl0YWJsZSBjb250YWN0bWF0ZXJpYWwgaXMgZm91bmQgZm9yIGEgY29udGFjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGltZSBhY2N1bXVsYXRvciBmb3IgaW50ZXJwb2xhdGlvbi4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9nYW1lLXBoeXNpY3MvZml4LXlvdXItdGltZXN0ZXAvCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBzdXBlcigpOwogICAgICB0aGlzLmR0ID0gLTE7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9ICEhb3B0aW9ucy5hbGxvd1NsZWVwOwogICAgICB0aGlzLmNvbnRhY3RzID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgOiAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVGYXN0ID0gb3B0aW9ucy5xdWF0Tm9ybWFsaXplRmFzdCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5xdWF0Tm9ybWFsaXplRmFzdCA6IGZhbHNlOwogICAgICB0aGlzLnRpbWUgPSAwLjA7CiAgICAgIHRoaXMuc3RlcG51bWJlciA9IDA7CiAgICAgIHRoaXMuZGVmYXVsdF9kdCA9IDEgLyA2MDsKICAgICAgdGhpcy5uZXh0SWQgPSAwOwogICAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuZ3Jhdml0eSkgewogICAgICAgIHRoaXMuZ3Jhdml0eS5jb3B5KG9wdGlvbnMuZ3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSkgewogICAgICAgIHRoaXMuZnJpY3Rpb25HcmF2aXR5ID0gbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eS5jb3B5KG9wdGlvbnMuZnJpY3Rpb25HcmF2aXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5icm9hZHBoYXNlID0gb3B0aW9ucy5icm9hZHBoYXNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmJyb2FkcGhhc2UgOiBuZXcgTmFpdmVCcm9hZHBoYXNlKCk7CiAgICAgIHRoaXMuYm9kaWVzID0gW107CiAgICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CiAgICAgIHRoaXMuc29sdmVyID0gb3B0aW9ucy5zb2x2ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc29sdmVyIDogbmV3IEdTU29sdmVyKCk7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTsKICAgICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IG5ldyBUdXBsZURpY3Rpb25hcnkoKTsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoJ2RlZmF1bHQnKTsKICAgICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjAKICAgICAgfSk7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9maWxlID0gewogICAgICAgIHNvbHZlOiAwLAogICAgICAgIG1ha2VDb250YWN0Q29uc3RyYWludHM6IDAsCiAgICAgICAgYnJvYWRwaGFzZTogMCwKICAgICAgICBpbnRlZ3JhdGU6IDAsCiAgICAgICAgbmFycm93cGhhc2U6IDAKICAgICAgfTsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7CiAgICAgIHRoaXMuc3Vic3lzdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAnYWRkQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAncmVtb3ZlQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwID0ge307CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5zZXRXb3JsZCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gbWF0ZXJpYWxzIG0xIGFuZCBtMgogICAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikgewogICAgICByZXR1cm4gdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5nZXQobTEuaWQsIG0yLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvCiAgICAgKi8KCgogICAgY29sbGlzaW9uTWF0cml4VGljaygpIHsKICAgICAgY29uc3QgdGVtcCA9IHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXM7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5yZXNldCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIGFkZENvbnN0cmFpbnQoYykgewogICAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goYyk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb25zdHJhaW50CiAgICAgKi8KCgogICAgcmVtb3ZlQ29uc3RyYWludChjKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29uc3RyYWludHMuaW5kZXhPZihjKTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXljYXN0IHRlc3QKICAgICAqIEBkZXByZWNhdGVkIFVzZSAucmF5Y2FzdEFsbCwgLnJheWNhc3RDbG9zZXN0IG9yIC5yYXljYXN0QW55IGluc3RlYWQuCiAgICAgKi8KCgogICAgcmF5VGVzdChmcm9tLCB0bywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdENsb3Nlc3QKICAgICAgICB0aGlzLnJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBEbyByYXljYXN0QWxsCiAgICAgICAgdGhpcy5yYXljYXN0QWxsKGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCBhZ2FpbnN0IGFsbCBib2RpZXMuIFRoZSBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGhpdCB3aXRoIGEgUmF5Y2FzdFJlc3VsdCBhcyBzaW5nbGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QWxsKGZyb20sIHRvLCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQUxMOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCBzdG9wIGF0IHRoZSBmaXJzdCByZXN1bHQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgaXMgcmFuZG9tIC0gYnV0IHRoZSBtZXRob2QgaXMgZmFzdC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucywgcmVzdWx0KSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSByaWdpZCBib2R5IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICogQHRvZG8gSWYgdGhlIHNpbXVsYXRpb24gaGFzIG5vdCB5ZXQgc3RhcnRlZCwgd2h5IHJlY3JldGUgYW5kIGNvcHkgYXJyYXlzIGZvciBlYWNoIGJvZHk/IEFjY3VtdWxhdGUgaW4gZHluYW1pYyBhcnJheXMgaW4gdGhpcyBjYXNlLgogICAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvbwogICAgICovCgoKICAgIGFkZEJvZHkoYm9keSkgewogICAgICBpZiAodGhpcy5ib2RpZXMuaW5jbHVkZXMoYm9keSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7CiAgICAgIHRoaXMuYm9kaWVzLnB1c2goYm9keSk7CiAgICAgIGJvZHkud29ybGQgPSB0aGlzOwogICAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pOwogICAgICBib2R5LmluaXRWZWxvY2l0eS5jb3B5KGJvZHkudmVsb2NpdHkpOwogICAgICBib2R5LnRpbWVMYXN0U2xlZXB5ID0gdGhpcy50aW1lOwoKICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBCb2R5KSB7CiAgICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpOwogICAgICAgIGJvZHkuaW5pdFF1YXRlcm5pb24uY29weShib2R5LnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKHRoaXMuYm9kaWVzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdID0gYm9keTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuYWRkQm9keUV2ZW50KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgcmlnaWQgYm9keSBmcm9tIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIHJlbW92ZUJvZHkoYm9keSkgewogICAgICBib2R5LndvcmxkID0gbnVsbDsKICAgICAgY29uc3QgbiA9IHRoaXMuYm9kaWVzLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgYm9kaWVzLnNwbGljZShpZHgsIDEpOyAvLyBUb2RvOiBzaG91bGQgdXNlIGEgZ2FyYmFnZSBmcmVlIG1ldGhvZAogICAgICAgIC8vIFJlY29tcHV0ZSBpbmRleAoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyhuKTsKICAgICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5yZW1vdmVCb2R5RXZlbnQpOwogICAgICB9CiAgICB9CgogICAgZ2V0Qm9keUJ5SWQoaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuaWRUb0JvZHlNYXBbaWRdOwogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBNYWtlIGEgZmFzdGVyIG1hcAogICAgICovCgoKICAgIGdldFNoYXBlQnlJZChpZCkgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlczsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2pdOwoKICAgICAgICAgIGlmIChzaGFwZS5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHNoYXBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBXb3JsZAogICAgICovCgoKICAgIGFkZENvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZQoKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbnRhY3QgbWF0ZXJpYWwgZnJvbSB0aGUgV29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlQ29udGFjdE1hdGVyaWFsKGNtYXQpIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb250YWN0bWF0ZXJpYWxzLmluZGV4T2YoY21hdCk7CgogICAgICBpZiAoaWR4ID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzLnNwbGljZShpZHgsIDEpOwogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRlbGV0ZShjbWF0Lm1hdGVyaWFsc1swXS5pZCwgY21hdC5tYXRlcmlhbHNbMV0uaWQpOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBzaW11bGF0aW9uIGZvcndhcmQga2VlcGluZyB0cmFjayBvZiBsYXN0IGNhbGxlZCB0aW1lCiAgICAgKiB0byBiZSBhYmxlIHRvIHN0ZXAgdGhlIHdvcmxkIGF0IGEgZml4ZWQgcmF0ZSwgaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUuCiAgICAgKgogICAgICogQHBhcmFtIGR0IFRoZSBmaXhlZCB0aW1lIHN0ZXAgc2l6ZSB0byB1c2UgKGRlZmF1bHQ6IDEgLyA2MCkuCiAgICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbCAoZGVmYXVsdDogMTApLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL3Bvc3QvZml4X3lvdXJfdGltZXN0ZXAvCiAgICAgKiBAZXhhbXBsZQogICAgICogICAgIC8vIFJ1biB0aGUgc2ltdWxhdGlvbiBpbmRlcGVuZGVudGx5IG9mIGZyYW1lcmF0ZSBldmVyeSAxIC8gNjAgbXMKICAgICAqICAgICB3b3JsZC5maXhlZFN0ZXAoKQogICAgICovCgoKICAgIGZpeGVkU3RlcChkdCwgbWF4U3ViU3RlcHMpIHsKICAgICAgaWYgKGR0ID09PSB2b2lkIDApIHsKICAgICAgICBkdCA9IDEgLyA2MDsKICAgICAgfQoKICAgICAgaWYgKG1heFN1YlN0ZXBzID09PSB2b2lkIDApIHsKICAgICAgICBtYXhTdWJTdGVwcyA9IDEwOwogICAgICB9CgogICAgICBjb25zdCB0aW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwOyAvLyBzZWNvbmRzCgogICAgICBpZiAoIXRoaXMubGFzdENhbGxUaW1lKSB7CiAgICAgICAgdGhpcy5zdGVwKGR0LCB1bmRlZmluZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2FsbGVkID0gdGltZSAtIHRoaXMubGFzdENhbGxUaW1lOwogICAgICAgIHRoaXMuc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpOwogICAgICB9CgogICAgICB0aGlzLmxhc3RDYWxsVGltZSA9IHRpbWU7CiAgICB9CiAgICAvKioKICAgICAqIFN0ZXAgdGhlIHBoeXNpY3Mgd29ybGQgZm9yd2FyZCBpbiB0aW1lLgogICAgICoKICAgICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlLgogICAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTgwNDI2MTU0NTMxL2h0dHA6Ly9idWxsZXRwaHlzaWNzLm9yZy9tZWRpYXdpa2ktMS41LjgvaW5kZXgucGhwL1N0ZXBwaW5nX1RoZV9Xb3JsZCNXaGF0X2RvX3RoZV9wYXJhbWV0ZXJzX3RvX2J0RHluYW1pY3NXb3JsZDo6c3RlcFNpbXVsYXRpb25fbWVhbi4zRgogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uCiAgICAgKiAgICAgd29ybGQuc3RlcCgxIC8gNjApCiAgICAgKi8KCgogICAgc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpIHsKICAgICAgaWYgKG1heFN1YlN0ZXBzID09PSB2b2lkIDApIHsKICAgICAgICBtYXhTdWJTdGVwcyA9IDEwOwogICAgICB9CgogICAgICBpZiAodGltZVNpbmNlTGFzdENhbGxlZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZwogICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsgLy8gSW5jcmVtZW50IHRpbWUKCiAgICAgICAgdGhpcy50aW1lICs9IGR0OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgICBjb25zdCB0MCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIGxldCBzdWJzdGVwcyA9IDA7CgogICAgICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IGR0ICYmIHN1YnN0ZXBzIDwgbWF4U3ViU3RlcHMpIHsKICAgICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwCiAgICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7CiAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IGR0OwogICAgICAgICAgc3Vic3RlcHMrKzsKCiAgICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+IGR0ICogMTAwMCkgewogICAgICAgICAgICAvLyBUaGUgZnJhbWVyYXRlIGlzIG5vdCBpbnRlcmFjdGl2ZSBhbnltb3JlLgogICAgICAgICAgICAvLyBXZSBhcmUgYmVsb3cgdGhlIHRhcmdldCBmcmFtZXJhdGUuCiAgICAgICAgICAgIC8vIEJldHRlciBiYWlsIG91dC4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBSZW1vdmUgdGhlIGV4Y2VzcyBhY2N1bXVsYXRvciwgc2luY2Ugd2UgbWF5IG5vdAogICAgICAgIC8vIGhhdmUgaGFkIGVub3VnaCBzdWJzdGVwcyBhdmFpbGFibGUgdG8gY2F0Y2ggdXAKCgogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSB0aGlzLmFjY3VtdWxhdG9yICUgZHQ7CiAgICAgICAgY29uc3QgdCA9IHRoaXMuYWNjdW11bGF0b3IgLyBkdDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHRoaXMuYm9kaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBiID0gdGhpcy5ib2RpZXNbal07CiAgICAgICAgICBiLnByZXZpb3VzUG9zaXRpb24ubGVycChiLnBvc2l0aW9uLCB0LCBiLmludGVycG9sYXRlZFBvc2l0aW9uKTsKICAgICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLnNsZXJwKGIucXVhdGVybmlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uKTsKICAgICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLm5vcm1hbGl6ZSgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy50aW1lICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgIH0KICAgIH0KCiAgICBpbnRlcm5hbFN0ZXAoZHQpIHsKICAgICAgdGhpcy5kdCA9IGR0OwogICAgICBjb25zdCBjb250YWN0cyA9IHRoaXMuY29udGFjdHM7CiAgICAgIGNvbnN0IHAxID0gV29ybGRfc3RlcF9wMTsKICAgICAgY29uc3QgcDIgPSBXb3JsZF9zdGVwX3AyOwogICAgICBjb25zdCBOID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3Qgc29sdmVyID0gdGhpcy5zb2x2ZXI7CiAgICAgIGNvbnN0IGdyYXZpdHkgPSB0aGlzLmdyYXZpdHk7CiAgICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZzsKICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMucHJvZmlsZTsKICAgICAgY29uc3QgRFlOQU1JQyA9IEJvZHkuRFlOQU1JQzsKICAgICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5OwogICAgICBjb25zdCBjb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7CiAgICAgIGNvbnN0IGZyaWN0aW9uRXF1YXRpb25Qb29sID0gV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgZ3Jhdml0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZ3ggPSBncmF2aXR5Lng7CiAgICAgIGNvbnN0IGd5ID0gZ3Jhdml0eS55OwogICAgICBjb25zdCBneiA9IGdyYXZpdHkuejsKICAgICAgbGV0IGkgPSAwOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0cwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGYgPSBiaS5mb3JjZTsKICAgICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzOwogICAgICAgICAgZi54ICs9IG0gKiBneDsKICAgICAgICAgIGYueSArPSBtICogZ3k7CiAgICAgICAgICBmLnogKz0gbSAqIGd6OwogICAgICAgIH0KICAgICAgfSAvLyBVcGRhdGUgc3Vic3lzdGVtcwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOc3Vic3lzdGVtcyA9IHRoaXMuc3Vic3lzdGVtcy5sZW5ndGg7IGkgIT09IE5zdWJzeXN0ZW1zOyBpKyspIHsKICAgICAgICB0aGlzLnN1YnN5c3RlbXNbaV0udXBkYXRlKCk7CiAgICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvbgoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIHAxLmxlbmd0aCA9IDA7IC8vIENsZWFuIHVwIHBhaXIgYXJyYXlzIGZyb20gbGFzdCBzdGVwCgogICAgICBwMi5sZW5ndGggPSAwOwogICAgICB0aGlzLmJyb2FkcGhhc2UuY29sbGlzaW9uUGFpcnModGhpcywgcDEsIHAyKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuYnJvYWRwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGNvbnN0cmFpbmVkIHBhaXJzIHdpdGggY29sbGlkZUNvbm5lY3RlZCA9PSBmYWxzZQoKCiAgICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKCiAgICAgICAgaWYgKCFjLmNvbGxpZGVDb25uZWN0ZWQpIHsKICAgICAgICAgIGZvciAobGV0IGogPSBwMS5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkgewogICAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHsKICAgICAgICAgICAgICBwMS5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgICAgcDIuc3BsaWNlKGosIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHMKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9sZGNvbnRhY3RzID0gV29ybGRfc3RlcF9vbGRDb250YWN0czsKICAgICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHsKICAgICAgICBvbGRjb250YWN0cy5wdXNoKGNvbnRhY3RzW2ldKTsKICAgICAgfQoKICAgICAgY29udGFjdHMubGVuZ3RoID0gMDsgLy8gVHJhbnNmZXIgRnJpY3Rpb25FcXVhdGlvbiBmcm9tIGN1cnJlbnQgbGlzdCB0byB0aGUgcG9vbCBmb3IgcmV1c2UKCiAgICAgIGNvbnN0IE5vbGRGcmljdGlvbkVxdWF0aW9ucyA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZEZyaWN0aW9uRXF1YXRpb25zOyBpKyspIHsKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UuZ2V0Q29udGFjdHMocDEsIHAyLCB0aGlzLCBjb250YWN0cywgb2xkY29udGFjdHMsIC8vIFRvIGJlIHJldXNlZAogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLm5hcnJvd3BoYXNlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBMb29wIG92ZXIgYWxsIGNvbGxpc2lvbnMKCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzCgoKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5jb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBuY29udGFjdHM7IGsrKykgewogICAgICAgIC8vIEN1cnJlbnQgY29udGFjdAogICAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXMKCiAgICAgICAgY29uc3QgYmkgPSBjLmJpOwogICAgICAgIGNvbnN0IGJqID0gYy5iajsKICAgICAgICBjb25zdCBzaSA9IGMuc2k7CiAgICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXMKCiAgICAgICAgbGV0IGNtOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGNtID0gdGhpcy5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gLy8gYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CgoKICAgICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uOwogICAgICAgIC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW0KCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBpZiAoYmkubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5mcmljdGlvbiA+PSAwKSB7CiAgICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgICAgICBjLnJlc3RpdHV0aW9uID0gYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gKiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbjsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGMuc2V0U3Bvb2tQYXJhbXMoCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcywKICAgICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiwKICAgICAgICAvLyAgICAgICAgICAgZHQKICAgICAgICAvLyAgICAgICApOwoKCiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGMpOyAvLyAvLyBBZGQgZnJpY3Rpb24gY29uc3RyYWludCBlcXVhdGlvbgogICAgICAgIC8vIGlmKG11ID4gMCl7CiAgICAgICAgLy8gCS8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zCiAgICAgICAgLy8gCWNvbnN0IG11ZyA9IG11ICogZ25vcm07CiAgICAgICAgLy8gCWNvbnN0IHJlZHVjZWRNYXNzID0gKGJpLmludk1hc3MgKyBiai5pbnZNYXNzKTsKICAgICAgICAvLyAJaWYocmVkdWNlZE1hc3MgPiAwKXsKICAgICAgICAvLyAJCXJlZHVjZWRNYXNzID0gMS9yZWR1Y2VkTWFzczsKICAgICAgICAvLyAJfQogICAgICAgIC8vIAljb25zdCBwb29sID0gZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgLy8gCWNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpOwogICAgICAgIC8vIAl0aGlzLmZyaWN0aW9uRXF1YXRpb25zLnB1c2goYzEsIGMyKTsKICAgICAgICAvLyAJYzEuYmkgPSBjMi5iaSA9IGJpOwogICAgICAgIC8vIAljMS5iaiA9IGMyLmJqID0gYmo7CiAgICAgICAgLy8gCWMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAljMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAkvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKICAgICAgICAvLyAJYzEucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzEucmouY29weShjLnJqKTsKICAgICAgICAvLyAJYzIucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzIucmouY29weShjLnJqKTsKICAgICAgICAvLyAJLy8gQ29uc3RydWN0IHRhbmdlbnRzCiAgICAgICAgLy8gCWMubmkudGFuZ2VudHMoYzEudCwgYzIudCk7CiAgICAgICAgLy8gICAgICAgICAgIC8vIFNldCBzcG9vayBwYXJhbXMKICAgICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjLmVuYWJsZWQ7CiAgICAgICAgLy8gCS8vIEFkZCBlcXVhdGlvbnMgdG8gc29sdmVyCiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMSk7CiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMik7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRCID0gYmoudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmouYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQiA9IGJqLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRCID49IHNwZWVkTGltaXRTcXVhcmVkQiAqIDIpIHsKICAgICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYmouYWxsb3dTbGVlcCAmJiBiai50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJpLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQSA9IGJpLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRBID49IHNwZWVkTGltaXRTcXVhcmVkQSAqIDIpIHsKICAgICAgICAgICAgYmoud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBOb3cgd2Uga25vdyB0aGF0IGkgYW5kIGogYXJlIGluIGNvbnRhY3QuIFNldCBjb2xsaXNpb24gbWF0cml4IHN0YXRlCgoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTsKCiAgICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7CiAgICAgICAgICAvLyBGaXJzdCBjb250YWN0IQogICAgICAgICAgLy8gV2UgcmV1c2UgdGhlIGNvbGxpZGVFdmVudCBvYmplY3QsIG90aGVyd2lzZSB3ZSB3aWxsIGVuZCB1cCBjcmVhdGluZyBuZXcgb2JqZWN0cyBmb3IgZWFjaCBuZXcgY29udGFjdCwgZXZlbiBpZiB0aGVyZSdzIG5vIGV2ZW50IGxpc3RlbmVyIGF0dGFjaGVkLgogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqOwogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuY29udGFjdCA9IGM7CiAgICAgICAgICBiaS5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTsKICAgICAgICAgIGJqLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgfQoKICAgICAgdGhpcy5lbWl0Q29udGFjdEV2ZW50cygpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5tYWtlQ29udGFjdENvbnN0cmFpbnRzID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIFdha2UgdXAgYm9kaWVzCgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlKSB7CiAgICAgICAgICBiaS53YWtlVXAoKTsKICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIHVzZXItYWRkZWQgY29uc3RyYWludHMKCgogICAgICBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKICAgICAgICBjLnVwZGF0ZSgpOwoKICAgICAgICBmb3IgKGxldCBqID0gMCwgTmVxID0gYy5lcXVhdGlvbnMubGVuZ3RoOyBqICE9PSBOZXE7IGorKykgewogICAgICAgICAgY29uc3QgZXEgPSBjLmVxdWF0aW9uc1tqXTsKICAgICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihlcSk7CiAgICAgICAgfQogICAgICB9IC8vIFNvbHZlIHRoZSBjb25zdHJhaW5lZCBzeXN0ZW0KCgogICAgICBzb2x2ZXIuc29sdmUoZHQsIHRoaXMpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5zb2x2ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGFsbCBjb250YWN0cyBmcm9tIHNvbHZlcgoKCiAgICAgIHNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsgLy8gQXBwbHkgZGFtcGluZywgc2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9idWxsZXQvaXNzdWVzL2RldGFpbD9pZD03NCBmb3IgZGV0YWlscwoKICAgICAgY29uc3QgcG93ID0gTWF0aC5wb3c7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgJiBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgbGQgPSBwb3coMS4wIC0gYmkubGluZWFyRGFtcGluZywgZHQpOwogICAgICAgICAgY29uc3QgdiA9IGJpLnZlbG9jaXR5OwogICAgICAgICAgdi5zY2FsZShsZCwgdik7CiAgICAgICAgICBjb25zdCBhdiA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgICAgICBpZiAoYXYpIHsKICAgICAgICAgICAgY29uc3QgYWQgPSBwb3coMS4wIC0gYmkuYW5ndWxhckRhbXBpbmcsIGR0KTsKICAgICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIExlYXAgZnJvZwogICAgICAvLyB2bmV3ID0gdiArIGgqZi9tCiAgICAgIC8vIHhuZXcgPSB4ICsgaCp2bmV3CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBzdGVwbnVtYmVyID0gdGhpcy5zdGVwbnVtYmVyOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplID0gc3RlcG51bWJlciAlICh0aGlzLnF1YXROb3JtYWxpemVTa2lwICsgMSkgPT09IDA7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGJvZGllc1tpXS5pbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KTsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhckZvcmNlcygpOwogICAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5pbnRlZ3JhdGUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFVwZGF0ZSBzdGVwIG51bWJlcgoKCiAgICAgIHRoaXMuc3RlcG51bWJlciArPSAxOwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50KTsgLy8gU2xlZXBpbmcgdXBkYXRlCgogICAgICBsZXQgaGFzQWN0aXZlQm9kaWVzID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKCiAgICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJpLnNsZWVwVGljayh0aGlzLnRpbWUpOwoKICAgICAgICAgIGlmIChiaS5zbGVlcFN0YXRlICE9PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGhhc0FjdGl2ZUJvZGllczsKICAgIH0KCiAgICBlbWl0Q29udGFjdEV2ZW50cygpIHsKICAgICAgY29uc3QgaGFzQmVnaW5Db250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcpOwoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCB8fCBoYXNFbmRDb250YWN0KSB7CiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5Db250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTsKICAgICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpbkNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZENvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGFkZGl0aW9ucy5sZW5ndGggPSByZW1vdmFscy5sZW5ndGggPSAwOwogICAgICBjb25zdCBoYXNCZWdpblNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5TaGFwZUNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7CiAgICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5TaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2ldKTsKICAgICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRTaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBib2R5IGZvcmNlcyBpbiB0aGUgd29ybGQgdG8gemVyby4KICAgICAqLwoKCiAgICBjbGVhckZvcmNlcygpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgYi5mb3JjZTsKICAgICAgICBiLnRvcnF1ZTsKICAgICAgICBiLmZvcmNlLnNldCgwLCAwLCAwKTsKICAgICAgICBiLnRvcnF1ZS5zZXQoMCwgMCwgMCk7CiAgICAgIH0KICAgIH0KCiAgfSAvLyBUZW1wIHN0dWZmCgogIG5ldyBBQUJCKCk7CiAgY29uc3QgdG1wUmF5ID0gbmV3IFJheSgpOyAvLyBwZXJmb3JtYW5jZS5ub3coKSBmYWxsYmFjayBvbiBEYXRlLm5vdygpCgogIGNvbnN0IHBlcmZvcm1hbmNlID0gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSB8fCB7fTsKCiAgaWYgKCFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpOwoKICAgIGlmIChwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkgewogICAgICBub3dPZmZzZXQgPSBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0OwogICAgfQoKICAgIHBlcmZvcm1hbmNlLm5vdyA9ICgpID0+IERhdGUubm93KCkgLSBub3dPZmZzZXQ7CiAgfQoKICBuZXcgVmVjMygpOyAvLyBEaXNwYXRjaGVkIGFmdGVyIHRoZSB3b3JsZCBoYXMgc3RlcHBlZCBmb3J3YXJkIGluIHRpbWUuCiAgLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS4KCiAgY29uc3QgV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50ID0gewogICAgdHlwZTogJ3Bvc3RTdGVwJwogIH07IC8vIERpc3BhdGNoZWQgYmVmb3JlIHRoZSB3b3JsZCBzdGVwcyBmb3J3YXJkIGluIHRpbWUuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50ID0gewogICAgdHlwZTogJ3ByZVN0ZXAnCiAgfTsKICBjb25zdCBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCA9IHsKICAgIHR5cGU6IEJvZHkuQ09MTElERV9FVkVOVF9OQU1FLAogICAgYm9keTogbnVsbCwKICAgIGNvbnRhY3Q6IG51bGwKICB9OyAvLyBQb29scyBmb3IgdW51c2VkIG9iamVjdHMKCiAgY29uc3QgV29ybGRfc3RlcF9vbGRDb250YWN0cyA9IFtdOwogIGNvbnN0IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTsgLy8gUmV1c2FibGUgYXJyYXlzIGZvciBjb2xsaXNpb24gcGFpcnMKCiAgY29uc3QgV29ybGRfc3RlcF9wMSA9IFtdOwogIGNvbnN0IFdvcmxkX3N0ZXBfcDIgPSBbXTsgLy8gU3R1ZmYgZm9yIGVtaXRDb250YWN0RXZlbnRzCgogIGNvbnN0IGFkZGl0aW9ucyA9IFtdOwogIGNvbnN0IHJlbW92YWxzID0gW107CiAgY29uc3QgYmVnaW5Db250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnYmVnaW5Db250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwKICB9OwogIGNvbnN0IGVuZENvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdlbmRDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwKICB9OwogIGNvbnN0IGJlZ2luU2hhcGVDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnYmVnaW5TaGFwZUNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbCwKICAgIHNoYXBlQTogbnVsbCwKICAgIHNoYXBlQjogbnVsbAogIH07CiAgY29uc3QgZW5kU2hhcGVDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwoKICBjb25zdCBhZGRDb250YWN0TWF0ZXJpYWwgPSAod29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBfcmVmLCB1dWlkKSA9PiB7CiAgICBsZXQgW21hdGVyaWFsQSwgbWF0ZXJpYWxCLCBvcHRpb25zXSA9IF9yZWY7CiAgICBjb25zdCBtYXRBID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxBKTsKICAgIGNvbnN0IG1hdEIgPSBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbEIpOwogICAgY29uc3QgY29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbChtYXRBLCBtYXRCLCBvcHRpb25zKTsKICAgIGNvbnRhY3RNYXRlcmlhbC51dWlkID0gdXVpZDsKICAgIHdvcmxkLmFkZENvbnRhY3RNYXRlcmlhbChjb250YWN0TWF0ZXJpYWwpOwogIH07CiAgY29uc3QgcmVtb3ZlQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjbVVVSUQpID0+IHsKICAgIGNvbnN0IGluZGV4ID0gd29ybGQuY29udGFjdG1hdGVyaWFscy5maW5kSW5kZXgoX3JlZjIgPT4gewogICAgICBsZXQgewogICAgICAgIHV1aWQKICAgICAgfSA9IF9yZWYyOwogICAgICByZXR1cm4gdXVpZCA9PT0gY21VVUlEOwogICAgfSk7CiAgICBjb25zdCBbewogICAgICBpZDogaQogICAgfSwgewogICAgICBpZDogagogICAgfV0gPSB3b3JsZC5jb250YWN0bWF0ZXJpYWxzW2luZGV4XS5tYXRlcmlhbHM7CiAgICB3b3JsZC5jb250YWN0bWF0ZXJpYWxzLnNwbGljZShpbmRleCwgMSk7CiAgICBkZWxldGUgd29ybGQuY29udGFjdE1hdGVyaWFsVGFibGUuZGF0YVtpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWBdOwogIH07CgogIGxldCBtYXRlcmlhbElkID0gMDsKICBjb25zdCBjcmVhdGVNYXRlcmlhbEZhY3RvcnkgPSBtYXRlcmlhbHMgPT4gZnVuY3Rpb24gKG5hbWVPck9wdGlvbnMpIHsKICAgIGlmIChuYW1lT3JPcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgbmFtZU9yT3B0aW9ucyA9IHt9OwogICAgfQogICAgY29uc3QgbWF0ZXJpYWxPcHRpb25zID0gdHlwZW9mIG5hbWVPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gewogICAgICBuYW1lOiBuYW1lT3JPcHRpb25zCiAgICB9IDogewogICAgICBuYW1lOiBTeW1ib2wuZm9yKGBNYXRlcmlhbCR7bWF0ZXJpYWxJZCsrfWApLAogICAgICAuLi5uYW1lT3JPcHRpb25zCiAgICB9OwogICAgY29uc3QgewogICAgICBuYW1lCiAgICB9ID0gbWF0ZXJpYWxPcHRpb25zOwogICAgbWF0ZXJpYWxzW25hbWVdID0gbWF0ZXJpYWxzW25hbWVdIHx8IG5ldyBNYXRlcmlhbChtYXRlcmlhbE9wdGlvbnMpOwogICAgcmV0dXJuIG1hdGVyaWFsc1tuYW1lXTsKICB9OwoKICAvKioKICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnY2Fubm9uLWVzJykuTWF0ZXJpYWxPcHRpb25zIH0gTWF0ZXJpYWxPcHRpb25zCiAgICovCgogIGNvbnN0IG1ha2VWZWMzID0gX3JlZiA9PiB7CiAgICBsZXQgW3gsIHksIHpdID0gX3JlZjsKICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICB9OwogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwogIGNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gX3JlZjIgPT4gewogICAgbGV0IFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdID0gX3JlZjI7CiAgICByZXR1cm4gW3sKICAgICAgYXhlczogYSA/IGEubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMsCiAgICAgIGZhY2VzLAogICAgICBub3JtYWxzOiBuID8gbi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLAogICAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZAogICAgfV07CiAgfTsKICBmdW5jdGlvbiBjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnQm94JzoKICAgICAgICByZXR1cm4gbmV3IEJveChuZXcgVmVjMyguLi5hcmdzLm1hcCh2ID0+IHYgLyAyKSkpOwogICAgICAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CiAgICAgIGNhc2UgJ0N5bGluZGVyJzoKICAgICAgICByZXR1cm4gbmV3IEN5bGluZGVyKC4uLmFyZ3MpOwogICAgICAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzCiAgICAgIGNhc2UgJ0hlaWdodGZpZWxkJzoKICAgICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpOwogICAgICAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3MKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwogICAgICBjYXNlICdQbGFuZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZSgpOwogICAgICAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5CiAgICAgIGNhc2UgJ1NwaGVyZSc6CiAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSk7CiAgICAgIC8vIHJhZGl1cyA9IGFyZ3MKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KCiAgLyoqCiAgICogQGZ1bmN0aW9uCiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51dWlkCiAgICogQHBhcmFtIHtCb2R5UHJvcHN9IG9wdGlvbnMucHJvcHMKICAgKiBAcGFyYW0ge0JvZHlTaGFwZVR5cGV9IG9wdGlvbnMudHlwZQogICAqIEBwYXJhbSB7KG1hdGVyaWFsT3B0aW9uczogTWF0ZXJpYWxPcHRpb25zKSA9PiBNYXRlcmlhbCA9fSBvcHRpb25zLmNyZWF0ZU1hdGVyaWFsCiAgICogQHJldHVybnMge0JvZHl9CiAgICovCiAgY29uc3QgcHJvcHNUb0JvZHkgPSBvcHRpb25zID0+IHsKICAgIGNvbnN0IHsKICAgICAgdXVpZCwKICAgICAgcHJvcHMsCiAgICAgIHR5cGUsCiAgICAgIGNyZWF0ZU1hdGVyaWFsID0gbWF0ZXJpYWxPcHRpb25zID0+IG5ldyBNYXRlcmlhbChtYXRlcmlhbE9wdGlvbnMpCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgYW5ndWxhckZhY3RvciA9IFsxLCAxLCAxXSwKICAgICAgYW5ndWxhclZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICBhcmdzID0gW10sCiAgICAgIGNvbGxpc2lvblJlc3BvbnNlLAogICAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIG1hc3MsCiAgICAgIG1hdGVyaWFsLAogICAgICBvbkNvbGxpZGUsCiAgICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLAogICAgICByb3RhdGlvbiA9IFswLCAwLCAwXSwKICAgICAgc2hhcGVzLAogICAgICB0eXBlOiBib2R5VHlwZSwKICAgICAgdmVsb2NpdHkgPSBbMCwgMCwgMF0sCiAgICAgIC4uLmV4dHJhCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCBib2R5ID0gbmV3IEJvZHkoewogICAgICAuLi5leHRyYSwKICAgICAgbWFzczogYm9keVR5cGUgPT09ICdTdGF0aWMnID8gMCA6IG1hc3MsCiAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCA/IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKSA6IHVuZGVmaW5lZCwKICAgICAgdHlwZTogYm9keVR5cGUgPyBCb2R5W2JvZHlUeXBlLnRvVXBwZXJDYXNlKCldIDogdW5kZWZpbmVkCiAgICB9KTsKICAgIGJvZHkudXVpZCA9IHV1aWQ7CiAgICBpZiAoY29sbGlzaW9uUmVzcG9uc2UgIT09IHVuZGVmaW5lZCkgewogICAgICBib2R5LmNvbGxpc2lvblJlc3BvbnNlID0gY29sbGlzaW9uUmVzcG9uc2U7CiAgICB9CiAgICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykgewogICAgICBzaGFwZXMuZm9yRWFjaChfcmVmMyA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBhcmdzLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICByb3RhdGlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHJvdGF0aW9uID8gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pIDogdW5kZWZpbmVkKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQogICAgYm9keS5wb3NpdGlvbi5zZXQocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7CiAgICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pOwogICAgYm9keS52ZWxvY2l0eS5zZXQodmVsb2NpdHlbMF0sIHZlbG9jaXR5WzFdLCB2ZWxvY2l0eVsyXSk7CiAgICBib2R5LmFuZ3VsYXJWZWxvY2l0eS5zZXQoYW5ndWxhclZlbG9jaXR5WzBdLCBhbmd1bGFyVmVsb2NpdHlbMV0sIGFuZ3VsYXJWZWxvY2l0eVsyXSk7CiAgICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSk7CiAgICBib2R5LmFuZ3VsYXJGYWN0b3Iuc2V0KGFuZ3VsYXJGYWN0b3JbMF0sIGFuZ3VsYXJGYWN0b3JbMV0sIGFuZ3VsYXJGYWN0b3JbMl0pOwogICAgcmV0dXJuIGJvZHk7CiAgfTsKCiAgY29uc3QgYWRkQm9kaWVzID0gKHN0YXRlLCBjcmVhdGVNYXRlcmlhbCwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHMsCiAgICAgIHR5cGUsCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dWlkLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IGJvZHkgPSBwcm9wc1RvQm9keSh7CiAgICAgICAgY3JlYXRlTWF0ZXJpYWwsCiAgICAgICAgcHJvcHM6IHByb3BzW2ldLAogICAgICAgIHR5cGUsCiAgICAgICAgdXVpZDogdXVpZFtpXQogICAgICB9KTsKICAgICAgc3RhdGUud29ybGQuYWRkQm9keShib2R5KTsKICAgICAgaWYgKHByb3BzW2ldLm9uQ29sbGlkZSkgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjb2xsaWRlJywgX3JlZjIgPT4gewogICAgICAgIGxldCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgYm9keSwKICAgICAgICAgIHRhcmdldCwKICAgICAgICAgIGNvbnRhY3QKICAgICAgICB9ID0gX3JlZjI7CiAgICAgICAgaWYgKCFib2R5LnV1aWQgfHwgIXRhcmdldC51dWlkKSByZXR1cm47CiAgICAgICAgY29uc3QgewogICAgICAgICAgbmksCiAgICAgICAgICByaSwKICAgICAgICAgIHJqLAogICAgICAgICAgYmksCiAgICAgICAgICBiaiwKICAgICAgICAgIGlkCiAgICAgICAgfSA9IGNvbnRhY3Q7CiAgICAgICAgY29uc3QgY29udGFjdFBvaW50ID0gYmkucG9zaXRpb24udmFkZChyaSk7CiAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbCA9IGJpID09PSBib2R5ID8gbmkgOiBuaS5zY2FsZSgtMSk7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBib2R5OiBib2R5LnV1aWQsCiAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJzOiB7CiAgICAgICAgICAgIGJvZHlGaWx0ZXJHcm91cDogYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgYm9keUZpbHRlck1hc2s6IGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgICAgdGFyZ2V0RmlsdGVyR3JvdXA6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgdGFyZ2V0RmlsdGVyTWFzazogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlck1hc2sKICAgICAgICAgIH0sCiAgICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogdXNlIGlkIGluc3RlYWQgb2YgdXVpZAogICAgICAgICAgICBiaTogYmkudXVpZCwKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJqOiBiai51dWlkLAogICAgICAgICAgICAvLyBOb3JtYWwgb2YgdGhlIGNvbnRhY3QsIHJlbGF0aXZlIHRvIHRoZSBjb2xsaWRpbmcgYm9keQogICAgICAgICAgICBjb250YWN0Tm9ybWFsOiBjb250YWN0Tm9ybWFsLnRvQXJyYXkoKSwKICAgICAgICAgICAgLy8gV29ybGQgcG9zaXRpb24gb2YgdGhlIGNvbnRhY3QKICAgICAgICAgICAgY29udGFjdFBvaW50OiBjb250YWN0UG9pbnQudG9BcnJheSgpLAogICAgICAgICAgICBpZCwKICAgICAgICAgICAgaW1wYWN0VmVsb2NpdHk6IGNvbnRhY3QuZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpLAogICAgICAgICAgICBuaTogbmkudG9BcnJheSgpLAogICAgICAgICAgICByaTogcmkudG9BcnJheSgpLAogICAgICAgICAgICByajogcmoudG9BcnJheSgpCiAgICAgICAgICB9LAogICAgICAgICAgb3A6ICdldmVudCcsCiAgICAgICAgICB0YXJnZXQ6IHRhcmdldC51dWlkLAogICAgICAgICAgdHlwZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9OwoKICBjb25zdCB0cmlwbGV0VG9WZWMzID0gdCA9PiB0ID8gbmV3IFZlYzMoLi4udCkgOiB1bmRlZmluZWQ7CgogIGNvbnN0IGFkZENvbnN0cmFpbnQgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzOiBbYm9keUEsIGJvZHlCLCB7CiAgICAgICAgYW5nbGUsCiAgICAgICAgYXhpc0EsCiAgICAgICAgYXhpc0IsCiAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICBkaXN0YW5jZSwKICAgICAgICBtYXhGb3JjZSwKICAgICAgICBtYXhNdWx0aXBsaWVyLAogICAgICAgIHBpdm90QSwKICAgICAgICBwaXZvdEIsCiAgICAgICAgdHdpc3RBbmdsZSwKICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgfV0sCiAgICAgIHR5cGUsCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgbGV0IGNvbnN0cmFpbnQ7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgdHJpcGxldFRvVmVjMyhwaXZvdEEpLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB0cmlwbGV0VG9WZWMzKHBpdm90QiksIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnQ29uZVR3aXN0JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbmVUd2lzdENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgYW5nbGUsCiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpLAogICAgICAgICAgdHdpc3RBbmdsZQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdIaW5nZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgZGlzdGFuY2UsIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnTG9jayc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBMb2NrQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBtYXhGb3JjZQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgd2FrZVVwQm9kaWVzCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkOwogICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KTsKICAgIGlmIChtYXhNdWx0aXBsaWVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgY29uc3QgcG9zdFN0ZXBDb25zdHJhaW50ID0gKCkgPT4gewogICAgICAgIC8vIFRoZSBtdWx0aXBsaWVyIGlzIHByb3BvcnRpb25hbCB0byBob3cgbXVjaCBmb3JjZSBpcyBhZGRlZCB0byB0aGUgYm9kaWVzIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICAgIC8vIElmIHRoaXMgZXhjZWVkcyBhIGxpbWl0IHRoZSBjb25zdHJhaW50IGlzIGRpc2FibGVkLgogICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBNYXRoLmFicyhjb25zdHJhaW50LmVxdWF0aW9uc1swXS5tdWx0aXBsaWVyKTsKICAgICAgICBpZiAobXVsdGlwbGllciA+IG1heE11bHRpcGxpZXIpIHsKICAgICAgICAgIGNvbnN0cmFpbnQuZGlzYWJsZSgpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgc3RhdGUuY29uc3RyYWludHNbdXVpZF0gPSBwb3N0U3RlcENvbnN0cmFpbnQ7CiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbdXVpZF0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIHRvVXBwZXJjYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpOwogIH0KICBjb25zdCBhZGRSYXkgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzOiB7CiAgICAgICAgZnJvbSwKICAgICAgICBtb2RlLAogICAgICAgIHRvLAogICAgICAgIC4uLnJheU9wdGlvbnMKICAgICAgfSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCByYXkgPSBuZXcgUmF5KHRyaXBsZXRUb1ZlYzMoZnJvbSksIHRyaXBsZXRUb1ZlYzModG8pKTsKICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgIG1vZGU6IFJBWV9NT0RFU1t0b1VwcGVyY2FzZShtb2RlKV0sCiAgICAgIHJlc3VsdDogbmV3IFJheWNhc3RSZXN1bHQoKSwKICAgICAgLi4ucmF5T3B0aW9ucwogICAgfTsKICAgIHN0YXRlLnJheXNbdXVpZF0gPSAoKSA9PiB7CiAgICAgIHJheS5pbnRlcnNlY3RXb3JsZChzdGF0ZS53b3JsZCwgb3B0aW9ucyk7CiAgICAgIGlmICghb3B0aW9ucy5yZXN1bHQgfHwgIW9wdGlvbnMucmVzdWx0LmJvZHkpIHJldHVybjsKICAgICAgY29uc3QgewogICAgICAgIGJvZHksCiAgICAgICAgc2hhcGUsCiAgICAgICAgcmF5RnJvbVdvcmxkLAogICAgICAgIHJheVRvV29ybGQsCiAgICAgICAgaGl0Tm9ybWFsV29ybGQsCiAgICAgICAgaGl0UG9pbnRXb3JsZCwKICAgICAgICAuLi5yZXN0CiAgICAgIH0gPSBvcHRpb25zLnJlc3VsdDsKICAgICAgY29uc3QgYm9keVVVSUQgPSBib2R5LnV1aWQ7CiAgICAgIGlmICghYm9keVVVSUQpIHJldHVybjsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgYm9keTogYm9keVVVSUQsCiAgICAgICAgaGl0Tm9ybWFsV29ybGQ6IGhpdE5vcm1hbFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICBoaXRQb2ludFdvcmxkOiBoaXRQb2ludFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICByYXk6IHsKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgIGRpcmVjdGlvbjogcmF5LmRpcmVjdGlvbi50b0FycmF5KCksCiAgICAgICAgICBmcm9tLAogICAgICAgICAgdG8sCiAgICAgICAgICB1dWlkCiAgICAgICAgfSwKICAgICAgICByYXlGcm9tV29ybGQ6IHJheUZyb21Xb3JsZC50b0FycmF5KCksCiAgICAgICAgcmF5VG9Xb3JsZDogcmF5VG9Xb3JsZC50b0FycmF5KCksCiAgICAgICAgc2hhcGU6IHNoYXBlID8gewogICAgICAgICAgLi4uc2hhcGUsCiAgICAgICAgICBib2R5OiBib2R5VVVJRAogICAgICAgIH0gOiBudWxsLAogICAgICAgIHR5cGU6ICdyYXloaXQnLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9OwogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pOwogIH07CgogIGNvbnN0IGFkZFJheWNhc3RWZWhpY2xlID0gKHN0YXRlLCBkYXRhKSA9PiB7CiAgICBjb25zdCBbY2hhc3Npc0JvZHksIHdoZWVscywgd2hlZWxJbmZvcywgaW5kZXhGb3J3YXJkQXhpcywgaW5kZXhSaWdodEF4aXMsIGluZGV4VXBBeGlzXSA9IGRhdGEucHJvcHM7CiAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHsKICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sCiAgICAgIGluZGV4Rm9yd2FyZEF4aXMsCiAgICAgIGluZGV4UmlnaHRBeGlzLAogICAgICBpbmRleFVwQXhpcwogICAgfSk7CiAgICB2ZWhpY2xlLndvcmxkID0gc3RhdGUud29ybGQ7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgewogICAgICAgIGF4bGVMb2NhbCwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsCiAgICAgICAgZGlyZWN0aW9uTG9jYWwsCiAgICAgICAgLi4ucmVzdAogICAgICB9ID0gd2hlZWxJbmZvc1tpXTsKICAgICAgdmVoaWNsZS5hZGRXaGVlbCh7CiAgICAgICAgYXhsZUxvY2FsOiB0cmlwbGV0VG9WZWMzKGF4bGVMb2NhbCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsOiB0cmlwbGV0VG9WZWMzKGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IHRyaXBsZXRUb1ZlYzMoZGlyZWN0aW9uTG9jYWwpLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9CiAgICBjb25zdCBwcmVTdGVwID0gKCkgPT4gewogICAgICB2ZWhpY2xlLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpOwogICAgfTsKICAgIGNvbnN0IHBvc3RTdGVwID0gKCkgPT4gewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlaGljbGUud2hlZWxJbmZvcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZlaGljbGUudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgICAgY29uc3QgdCA9IHZlaGljbGUud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybTsKICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXTsKICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKTsKICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbik7CiAgICAgIH0KICAgIH07CiAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdID0gewogICAgICBwb3N0U3RlcCwKICAgICAgcHJlU3RlcCwKICAgICAgdmVoaWNsZQogICAgfTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBwcmVTdGVwKTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgcG9zdFN0ZXApOwogIH07CgogIGNvbnN0IGFkZFNwcmluZyA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBkYW1waW5nLAogICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgIHdvcmxkQW5jaG9yQgogICAgICB9XSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgZGFtcGluZywKICAgICAgbG9jYWxBbmNob3JBOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQSksCiAgICAgIGxvY2FsQW5jaG9yQjogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckIpLAogICAgICByZXN0TGVuZ3RoLAogICAgICBzdGlmZm5lc3MsCiAgICAgIHdvcmxkQW5jaG9yQTogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckEpLAogICAgICB3b3JsZEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JCKQogICAgfSk7CiAgICBzcHJpbmcudXVpZCA9IHV1aWQ7CiAgICBjb25zdCBwb3N0U3RlcFNwcmluZyA9ICgpID0+IHNwcmluZy5hcHBseUZvcmNlKCk7CiAgICBzdGF0ZS5zcHJpbmdzW3V1aWRdID0gcG9zdFN0ZXBTcHJpbmc7CiAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0gPSBzcHJpbmc7CgogICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pOwogIH07CgogIGZ1bmN0aW9uIGVtaXRCZWdpbkNvbnRhY3QoX3JlZikgewogICAgbGV0IHsKICAgICAgYm9keUEsCiAgICAgIGJvZHlCCiAgICB9ID0gX3JlZjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVCZWdpbicKICAgIH0pOwogIH0KICBmdW5jdGlvbiBlbWl0RW5kQ29udGFjdChfcmVmMikgewogICAgbGV0IHsKICAgICAgYm9keUEsCiAgICAgIGJvZHlCCiAgICB9ID0gX3JlZjI7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJwogICAgfSk7CiAgfQogIGNvbnN0IGluaXQgPSAod29ybGQsIF9yZWYzKSA9PiB7CiAgICBsZXQgewogICAgICBhbGxvd1NsZWVwLAogICAgICBheGlzSW5kZXggPSAwLAogICAgICBicm9hZHBoYXNlLAogICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICBmcmljdGlvbkdyYXZpdHksCiAgICAgIGdyYXZpdHksCiAgICAgIGl0ZXJhdGlvbnMsCiAgICAgIHF1YXROb3JtYWxpemVGYXN0LAogICAgICBxdWF0Tm9ybWFsaXplU2tpcCwKICAgICAgc29sdmVyLAogICAgICB0b2xlcmFuY2UKICAgIH0gPSBfcmVmMzsKICAgIHdvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwOwogICAgd29ybGQuZ3Jhdml0eS5zZXQoLi4uZ3Jhdml0eSk7CiAgICB3b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBmcmljdGlvbkdyYXZpdHkgPyBuZXcgVmVjMyguLi5mcmljdGlvbkdyYXZpdHkpIDogdW5kZWZpbmVkOwogICAgd29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdDsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVTa2lwID0gcXVhdE5vcm1hbGl6ZVNraXA7CiAgICBpZiAoc29sdmVyID09PSAnU3BsaXQnKSB7CiAgICAgIHdvcmxkLnNvbHZlciA9IG5ldyBTcGxpdFNvbHZlcihuZXcgR1NTb2x2ZXIoKSk7CiAgICB9CiAgICBpZiAod29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgd29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHRvbGVyYW5jZTsKICAgICAgd29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOwogICAgfQogICAgd29ybGQuYnJvYWRwaGFzZSA9IGJyb2FkcGhhc2UgPT09ICdTQVAnID8gbmV3IFNBUEJyb2FkcGhhc2Uod29ybGQpIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwogICAgaWYgKHdvcmxkLmJyb2FkcGhhc2UgaW5zdGFuY2VvZiBTQVBCcm9hZHBoYXNlKSB7CiAgICAgIHdvcmxkLmJyb2FkcGhhc2UuYXhpc0luZGV4ID0gYXhpc0luZGV4OwogICAgfQogICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0JywgZW1pdEJlZ2luQ29udGFjdCk7CiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdlbmRDb250YWN0JywgZW1pdEVuZENvbnRhY3QpOwogICAgT2JqZWN0LmFzc2lnbih3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsLCBkZWZhdWx0Q29udGFjdE1hdGVyaWFsKTsKICB9OwoKICBjb25zdCBpc1FvclYgPSB2ID0+IHYgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uIHx8IHYgaW5zdGFuY2VvZiBWZWMzOwogIGNvbnN0IHN0ZXAgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHBvc2l0aW9ucywKICAgICAgcHJvcHM6IHsKICAgICAgICBtYXhTdWJTdGVwcywKICAgICAgICBzdGVwU2l6ZSwKICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbGVkCiAgICAgIH0sCiAgICAgIHF1YXRlcm5pb25zCiAgICB9ID0gX3JlZjsKICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RlcFNpemUsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUud29ybGQuYm9kaWVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGNvbnN0IHAgPSBzdGF0ZS53b3JsZC5ib2RpZXNbaV0ucG9zaXRpb247CiAgICAgIGNvbnN0IHEgPSBzdGF0ZS53b3JsZC5ib2RpZXNbaV0ucXVhdGVybmlvbjsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMF0gPSBwLng7CiAgICAgIHBvc2l0aW9uc1szICogaSArIDFdID0gcC55OwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAyXSA9IHAuejsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAwXSA9IHEueDsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAxXSA9IHEueTsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAyXSA9IHEuejsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAzXSA9IHEudzsKICAgIH0KICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdOwogICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkgewogICAgICBjb25zdCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgIGNvbnN0IHsKICAgICAgICBib2RpZXMsCiAgICAgICAgdmVoaWNsZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldCA9PT0gJ3ZlaGljbGVzJyA/CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHZlaGljbGVzW3V1aWRdLnZlaGljbGVbdHlwZV0gOgogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICBib2RpZXNbdXVpZF1bdHlwZV07CiAgICAgIGNvbnN0IHNlcmlhbGl6YWJsZVZhbHVlID0gaXNRb3JWKHZhbHVlKSA/IHZhbHVlLnRvQXJyYXkoKSA6IHZhbHVlOwogICAgICBvYnNlcnZhdGlvbnMucHVzaChbTnVtYmVyKGlkKSwgc2VyaWFsaXphYmxlVmFsdWUsCiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHR5cGVdKTsKICAgIH0KICAgIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICAgIGFjdGl2ZTogc3RhdGUud29ybGQuaGFzQWN0aXZlQm9kaWVzLAogICAgICBvYnNlcnZhdGlvbnMsCiAgICAgIG9wOiAnZnJhbWUnLAogICAgICBwb3NpdGlvbnMsCiAgICAgIHF1YXRlcm5pb25zCiAgICB9OwogICAgaWYgKHN0YXRlLmJvZGllc05lZWRTeW5jaW5nKSB7CiAgICAgIG1lc3NhZ2UuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiB7CiAgICAgICAgaWYgKGJvZHkudXVpZCkgYm9kaWVzLnB1c2goYm9keS51dWlkKTsKICAgICAgICByZXR1cm4gYm9kaWVzOwogICAgICB9LCBbXSk7CiAgICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gZmFsc2U7CiAgICB9CiAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKTsKICB9OwoKICBjb25zdCBzdGF0ZSA9IHsKICAgIGJvZGllczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBjb25zdHJhaW50czoge30sCiAgICBtYXRlcmlhbHM6IHt9LAogICAgcmF5czoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzdWJzY3JpcHRpb25zOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHdvcmxkOiBuZXcgV29ybGQoKQogIH07CgogIC8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPSJ0cnVlIi8+CiAgY29uc3QgaXNIaW5nZUNvbnN0cmFpbnQgPSBjID0+IGMgaW5zdGFuY2VvZiBIaW5nZUNvbnN0cmFpbnQ7CiAgZnVuY3Rpb24gc3luY0JvZGllcygpIHsKICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gdHJ1ZTsKICAgIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGJvZGllcywgYm9keSkgPT4gYm9keS51dWlkID8gewogICAgICAuLi5ib2RpZXMsCiAgICAgIFtib2R5LnV1aWRdOiBib2R5CiAgICB9IDogYm9kaWVzLCB7fSk7CiAgfQogIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgTmFpdmVCcm9hZHBoYXNlLAogICAgU0FQQnJvYWRwaGFzZQogIH07CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbEZhY3Rvcnkoc3RhdGUubWF0ZXJpYWxzKTsKICBzZWxmLm9ubWVzc2FnZSA9IF9yZWYgPT4gewogICAgbGV0IHsKICAgICAgZGF0YQogICAgfSA9IF9yZWY7CiAgICBzd2l0Y2ggKGRhdGEub3ApIHsKICAgICAgY2FzZSAnaW5pdCc6CiAgICAgICAgewogICAgICAgICAgaW5pdChzdGF0ZS53b3JsZCwgZGF0YS5wcm9wcyk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0ZXAoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdhZGRCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGFkZEJvZGllcyhzdGF0ZSwgY3JlYXRlTWF0ZXJpYWwsIGRhdGEpOwogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdyZW1vdmVCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS51dWlkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUJvZHkoc3RhdGUuYm9kaWVzW2RhdGEudXVpZFtpXV0pOwogICAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKS5maW5kKGsgPT4gc3RhdGUuc3Vic2NyaXB0aW9uc1trXVswXSA9PT0gZGF0YS51dWlkW2ldKTsKICAgICAgICAgICAgaWYgKGtleSkgewogICAgICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgIHR5cGUKICAgICAgICAgIH0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbZGF0YS51dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgewogICAgICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNbZGF0YS5wcm9wc107CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NldFBvc2l0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5wb3NpdGlvbi5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0sIGRhdGEucHJvcHNbM10pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFZlbG9jaXR5JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS52ZWxvY2l0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TGluZWFyRmFjdG9yJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRBbmd1bGFyRmFjdG9yJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWFzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TWF0ZXJpYWwnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLm1hdGVyaWFsID0gZGF0YS5wcm9wcyA/IGNyZWF0ZU1hdGVyaWFsKGRhdGEucHJvcHMpIDogbnVsbDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TGluZWFyRGFtcGluZyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFsbG93U2xlZXAnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFsbG93U2xlZXAgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRTbGVlcFNwZWVkTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcFRpbWVMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlckdyb3VwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlck1hc2snOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRGaXhlZFJvdGF0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5maXhlZFJvdGF0aW9uID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0RnJpY3Rpb25HcmF2aXR5JzoKICAgICAgICBzdGF0ZS53b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBkYXRhLnByb3BzID8gbmV3IFZlYzMoLi4uZGF0YS5wcm9wcykgOiB1bmRlZmluZWQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uaXNUcmlnZ2VyID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0R3Jhdml0eSc6CiAgICAgICAgc3RhdGUud29ybGQuZ3Jhdml0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFRvbGVyYW5jZSc6CiAgICAgICAgaWYgKHN0YXRlLndvcmxkLnNvbHZlciBpbnN0YW5jZW9mIEdTU29sdmVyKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gZGF0YS5wcm9wczsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEl0ZXJhdGlvbnMnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBkYXRhLnByb3BzOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYCR7ZGF0YS5wcm9wc31Ccm9hZHBoYXNlYF0gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6CiAgICAgICAgaWYgKHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgaW5zdGFuY2VvZiBTQVBCcm9hZHBoYXNlKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGRhdGEucHJvcHMgPT09IHVuZGVmaW5lZCB8fCBkYXRhLnByb3BzID09PSBudWxsID8gMCA6IGRhdGEucHJvcHM7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5SW1wdWxzZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlMb2NhbEZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhcHBseVRvcnF1ZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlUb3JxdWUobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSkpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhZGRDb25zdHJhaW50JzoKICAgICAgICB7CiAgICAgICAgICBhZGRDb25zdHJhaW50KHN0YXRlLCBkYXRhKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWYyID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQKICAgICAgICAgIH0gPSBfcmVmMjsKICAgICAgICAgIHJldHVybiB1dWlkID09PSBkYXRhLnV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CiAgICAgICAgaWYgKHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXSk7CiAgICAgICAgICBkZWxldGUgc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmRpc2FibGUoKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5lbmFibGVNb3RvcigpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3RvclNwZWVkJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yU3BlZWQoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JNYXhGb3JjZSc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5zZXRNb3Rvck1heEZvcmNlKGRhdGEucHJvcHMpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYWRkU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBhZGRTcHJpbmcoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzZXRTcHJpbmdTdGlmZm5lc3MnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLnN0aWZmbmVzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NldFNwcmluZ1Jlc3RMZW5ndGgnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLnJlc3RMZW5ndGggPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5kYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbZGF0YS51dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ2FkZFJheSc6CiAgICAgICAgewogICAgICAgICAgYWRkUmF5KHN0YXRlLCBkYXRhKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlUmF5JzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW2RhdGEudXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ2FkZFJheWNhc3RWZWhpY2xlJzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXljYXN0VmVoaWNsZShzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3JlbW92ZVJheWNhc3RWZWhpY2xlJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS5wb3N0U3RlcCk7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUud29ybGQgPSBudWxsOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF07CiAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKS5maW5kKGsgPT4gc3RhdGUuc3Vic2NyaXB0aW9uc1trXVswXSA9PT0gZGF0YS51dWlkKTsKICAgICAgICAgIGlmIChrZXkpIHsKICAgICAgICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNba2V5XTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnYXBwbHlSYXljYXN0VmVoaWNsZUVuZ2luZUZvcmNlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5hcHBseUVuZ2luZUZvcmNlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdhZGRDb250YWN0TWF0ZXJpYWwnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnRhY3RNYXRlcmlhbChzdGF0ZS53b3JsZCwgY3JlYXRlTWF0ZXJpYWwsIGRhdGEucHJvcHMsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3JlbW92ZUNvbnRhY3RNYXRlcmlhbCc6CiAgICAgICAgewogICAgICAgICAgcmVtb3ZlQ29udGFjdE1hdGVyaWFsKHN0YXRlLndvcmxkLCBkYXRhLnV1aWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzbGVlcCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICB9OwoKfSkoKTsKCg==",null,!1);class CannonWorkerAPI extends EventEmitter$1{constructor(_e){let{allowSleep:tt=!1,axisIndex:nt=0,broadphase:it="Naive",defaultContactMaterial:rt={contactEquationStiffness:1e6},frictionGravity:st=null,gravity:ot=[0,-9.81,0],iterations:at=5,quatNormalizeFast:At=!1,quatNormalizeSkip:lt=0,size:gt=1e3,solver:ct="GS",tolerance:dt=.001}=_e;super();uu(this,"messageQueue",[]);uu(this,"worker",null);this.config={allowSleep:tt,axisIndex:nt,broadphase:it,defaultContactMaterial:rt,frictionGravity:st,gravity:ot,iterations:at,quatNormalizeFast:At,quatNormalizeSkip:lt,size:gt,solver:ct,tolerance:dt},this.buffers={positions:new Float32Array(gt*3),quaternions:new Float32Array(gt*4)}}get axisIndex(){return this.config.axisIndex}set axisIndex(_e){this.config.axisIndex=_e,this.postMessage({op:"setAxisIndex",props:_e})}get broadphase(){return this.config.broadphase}set broadphase(_e){this.config.broadphase=_e,this.postMessage({op:"setBroadphase",props:_e})}get frictionGravity(){return this.config.frictionGravity}set frictionGravity(_e){this.config.frictionGravity=_e,this.postMessage({op:"setFrictionGravity",props:_e})}get gravity(){return this.config.gravity}set gravity(_e){this.config.gravity=_e,this.postMessage({op:"setGravity",props:_e})}get iterations(){return this.config.iterations}set iterations(_e){this.config.iterations=_e,this.postMessage({op:"setIterations",props:_e})}get tolerance(){return this.config.tolerance}set tolerance(_e){this.config.tolerance=_e,this.postMessage({op:"setTolerance",props:_e})}addBodies(_e){let{props:tt,type:nt,uuid:it}=_e;this.postMessage({op:"addBodies",props:tt,type:nt,uuid:it})}addConstraint(_e){let{props:[tt,nt,it],type:rt,uuid:st}=_e;this.postMessage({op:"addConstraint",props:[tt,nt,it],type:rt,uuid:st})}addContactMaterial(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"addContactMaterial",props:tt,uuid:nt})}addRay(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"addRay",props:tt,uuid:nt})}addRaycastVehicle(_e){let{props:[tt,nt,it,rt,st,ot],uuid:at}=_e;this.postMessage({op:"addRaycastVehicle",props:[tt,nt,it,rt,st,ot],uuid:at})}addSpring(_e){let{props:[tt,nt,it],uuid:rt}=_e;this.postMessage({op:"addSpring",props:[tt,nt,it],uuid:rt})}applyForce(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"applyForce",props:tt,uuid:nt})}applyImpulse(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"applyImpulse",props:tt,uuid:nt})}applyLocalForce(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"applyLocalForce",props:tt,uuid:nt})}applyLocalImpulse(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"applyLocalImpulse",props:tt,uuid:nt})}applyRaycastVehicleEngineForce(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"applyRaycastVehicleEngineForce",props:tt,uuid:nt})}applyTorque(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"applyTorque",props:tt,uuid:nt})}connect(){this.worker=new WorkerFactory,this.worker.onmessage=_e=>{if(_e.data.op==="frame"){this.buffers.positions=_e.data.positions,this.buffers.quaternions=_e.data.quaternions,this.emit(_e.data.op,_e.data);return}this.emit(_e.data.type,_e.data)};for(const _e of this.messageQueue)this.worker.postMessage(_e);this.messageQueue.length=0}disableConstraint(_e){let{uuid:tt}=_e;this.postMessage({op:"disableConstraint",uuid:tt})}disableConstraintMotor(_e){let{uuid:tt}=_e;this.postMessage({op:"disableConstraintMotor",uuid:tt})}disconnect(){this.worker&&(this.worker.onmessage=null)}enableConstraint(_e){let{uuid:tt}=_e;this.postMessage({op:"enableConstraint",uuid:tt})}enableConstraintMotor(_e){let{uuid:tt}=_e;this.postMessage({op:"enableConstraintMotor",uuid:tt})}init(){const{allowSleep:_e,axisIndex:tt,broadphase:nt,defaultContactMaterial:it,frictionGravity:rt,gravity:st,iterations:ot,quatNormalizeFast:at,quatNormalizeSkip:At,solver:lt,tolerance:gt}=this.config;this.postMessage({op:"init",props:{allowSleep:_e,axisIndex:tt,broadphase:nt,defaultContactMaterial:it,frictionGravity:rt,gravity:st,iterations:ot,quatNormalizeFast:at,quatNormalizeSkip:At,solver:lt,tolerance:gt}})}removeBodies(_e){let{uuid:tt}=_e;this.postMessage({op:"removeBodies",uuid:tt})}removeConstraint(_e){let{uuid:tt}=_e;this.postMessage({op:"removeConstraint",uuid:tt})}removeContactMaterial(_e){let{uuid:tt}=_e;this.postMessage({op:"removeContactMaterial",uuid:tt})}removeRay(_e){let{uuid:tt}=_e;this.postMessage({op:"removeRay",uuid:tt})}removeRaycastVehicle(_e){let{uuid:tt}=_e;this.postMessage({op:"removeRaycastVehicle",uuid:tt})}removeSpring(_e){let{uuid:tt}=_e;this.postMessage({op:"removeSpring",uuid:tt})}setAllowSleep(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setAllowSleep",props:tt,uuid:nt})}setAngularDamping(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setAngularDamping",props:tt,uuid:nt})}setAngularFactor(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setAngularFactor",props:tt,uuid:nt})}setAngularVelocity(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setAngularVelocity",props:tt,uuid:nt})}setCollisionFilterGroup(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setCollisionFilterGroup",props:tt,uuid:nt})}setCollisionFilterMask(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setCollisionFilterMask",props:tt,uuid:nt})}setCollisionResponse(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setCollisionResponse",props:tt,uuid:nt})}setConstraintMotorMaxForce(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setConstraintMotorMaxForce",props:tt,uuid:nt})}setConstraintMotorSpeed(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setConstraintMotorSpeed",props:tt,uuid:nt})}setFixedRotation(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setFixedRotation",props:tt,uuid:nt})}setIsTrigger(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setIsTrigger",props:tt,uuid:nt})}setLinearDamping(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setLinearDamping",props:tt,uuid:nt})}setLinearFactor(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setLinearFactor",props:tt,uuid:nt})}setMass(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setMass",props:tt,uuid:nt})}setMaterial(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setMaterial",props:tt,uuid:nt})}setPosition(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setPosition",props:tt,uuid:nt})}setQuaternion(_e){let{props:[tt,nt,it,rt],uuid:st}=_e;this.postMessage({op:"setQuaternion",props:[tt,nt,it,rt],uuid:st})}setRaycastVehicleBrake(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setRaycastVehicleBrake",props:tt,uuid:nt})}setRaycastVehicleSteeringValue(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setRaycastVehicleSteeringValue",props:tt,uuid:nt})}setRotation(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setRotation",props:tt,uuid:nt})}setSleepSpeedLimit(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setSleepSpeedLimit",props:tt,uuid:nt})}setSleepTimeLimit(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setSleepTimeLimit",props:tt,uuid:nt})}setSpringDamping(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setSpringDamping",props:tt,uuid:nt})}setSpringRestLength(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setSpringRestLength",props:tt,uuid:nt})}setSpringStiffness(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setSpringStiffness",props:tt,uuid:nt})}setUserData(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setUserData",props:tt,uuid:nt})}setVelocity(_e){let{props:tt,uuid:nt}=_e;this.postMessage({op:"setVelocity",props:tt,uuid:nt})}sleep(_e){let{uuid:tt}=_e;this.postMessage({op:"sleep",uuid:tt})}step(_e){var tt;const{buffers:{positions:nt,quaternions:it}}=this;!nt.byteLength&&!it.byteLength||(tt=this.worker)==null||tt.postMessage({op:"step",positions:nt,props:_e,quaternions:it},[nt.buffer,it.buffer])}subscribe(_e){let{props:{id:tt,target:nt,type:it},uuid:rt}=_e;this.postMessage({op:"subscribe",props:{id:tt,target:nt,type:it},uuid:rt})}terminate(){var _e;(_e=this.worker)==null||_e.terminate(),this.worker=null}unsubscribe(_e){let{props:tt}=_e;this.postMessage({op:"unsubscribe",props:tt})}wakeUp(_e){let{uuid:tt}=_e;this.postMessage({op:"wakeUp",uuid:tt})}postMessage(_e){if(this.worker)return this.worker.postMessage(_e);this.messageQueue.push(_e)}}class Mat3$1{constructor(_){_===void 0&&(_=[0,0,0,0,0,0,0,0,0]),this.elements=_}identity(){const _=this.elements;_[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=1,_[5]=0,_[6]=0,_[7]=0,_[8]=1}setZero(){const _=this.elements;_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=0,_[6]=0,_[7]=0,_[8]=0}setTrace(_){const _e=this.elements;_e[0]=_.x,_e[4]=_.y,_e[8]=_.z}getTrace(_){_===void 0&&(_=new Vec3$1);const _e=this.elements;return _.x=_e[0],_.y=_e[4],_.z=_e[8],_}vmult(_,_e){_e===void 0&&(_e=new Vec3$1);const tt=this.elements,nt=_.x,it=_.y,rt=_.z;return _e.x=tt[0]*nt+tt[1]*it+tt[2]*rt,_e.y=tt[3]*nt+tt[4]*it+tt[5]*rt,_e.z=tt[6]*nt+tt[7]*it+tt[8]*rt,_e}smult(_){for(let _e=0;_e<this.elements.length;_e++)this.elements[_e]*=_}mmult(_,_e){_e===void 0&&(_e=new Mat3$1);const tt=this.elements,nt=_.elements,it=_e.elements,rt=tt[0],st=tt[1],ot=tt[2],at=tt[3],At=tt[4],lt=tt[5],gt=tt[6],ct=tt[7],dt=tt[8],ht=nt[0],mt=nt[1],Ct=nt[2],ft=nt[3],pt=nt[4],Vt=nt[5],yt=nt[6],Gt=nt[7],Bt=nt[8];return it[0]=rt*ht+st*ft+ot*yt,it[1]=rt*mt+st*pt+ot*Gt,it[2]=rt*Ct+st*Vt+ot*Bt,it[3]=at*ht+At*ft+lt*yt,it[4]=at*mt+At*pt+lt*Gt,it[5]=at*Ct+At*Vt+lt*Bt,it[6]=gt*ht+ct*ft+dt*yt,it[7]=gt*mt+ct*pt+dt*Gt,it[8]=gt*Ct+ct*Vt+dt*Bt,_e}scale(_,_e){_e===void 0&&(_e=new Mat3$1);const tt=this.elements,nt=_e.elements;for(let it=0;it!==3;it++)nt[3*it+0]=_.x*tt[3*it+0],nt[3*it+1]=_.y*tt[3*it+1],nt[3*it+2]=_.z*tt[3*it+2];return _e}solve(_,_e){_e===void 0&&(_e=new Vec3$1);const tt=3,nt=4,it=[];let rt,st;for(rt=0;rt<tt*nt;rt++)it.push(0);for(rt=0;rt<3;rt++)for(st=0;st<3;st++)it[rt+nt*st]=this.elements[rt+3*st];it[3+4*0]=_.x,it[3+4*1]=_.y,it[3+4*2]=_.z;let ot=3;const at=ot;let At;const lt=4;let gt;do{if(rt=at-ot,it[rt+nt*rt]===0){for(st=rt+1;st<at;st++)if(it[rt+nt*st]!==0){At=lt;do gt=lt-At,it[gt+nt*rt]+=it[gt+nt*st];while(--At);break}}if(it[rt+nt*rt]!==0)for(st=rt+1;st<at;st++){const ct=it[rt+nt*st]/it[rt+nt*rt];At=lt;do gt=lt-At,it[gt+nt*st]=gt<=rt?0:it[gt+nt*st]-it[gt+nt*rt]*ct;while(--At)}}while(--ot);if(_e.z=it[2*nt+3]/it[2*nt+2],_e.y=(it[1*nt+3]-it[1*nt+2]*_e.z)/it[1*nt+1],_e.x=(it[0*nt+3]-it[0*nt+2]*_e.z-it[0*nt+1]*_e.y)/it[0*nt+0],isNaN(_e.x)||isNaN(_e.y)||isNaN(_e.z)||_e.x===1/0||_e.y===1/0||_e.z===1/0)throw`Could not solve equation! Got x=[${_e.toString()}], b=[${_.toString()}], A=[${this.toString()}]`;return _e}e(_,_e,tt){if(tt===void 0)return this.elements[_e+3*_];this.elements[_e+3*_]=tt}copy(_){for(let _e=0;_e<_.elements.length;_e++)this.elements[_e]=_.elements[_e];return this}toString(){let _="";const _e=",";for(let tt=0;tt<9;tt++)_+=this.elements[tt]+_e;return _}reverse(_){_===void 0&&(_=new Mat3$1);const _e=3,tt=6,nt=reverse_eqns$1;let it,rt;for(it=0;it<3;it++)for(rt=0;rt<3;rt++)nt[it+tt*rt]=this.elements[it+3*rt];nt[3+6*0]=1,nt[3+6*1]=0,nt[3+6*2]=0,nt[4+6*0]=0,nt[4+6*1]=1,nt[4+6*2]=0,nt[5+6*0]=0,nt[5+6*1]=0,nt[5+6*2]=1;let st=3;const ot=st;let at;const At=tt;let lt;do{if(it=ot-st,nt[it+tt*it]===0){for(rt=it+1;rt<ot;rt++)if(nt[it+tt*rt]!==0){at=At;do lt=At-at,nt[lt+tt*it]+=nt[lt+tt*rt];while(--at);break}}if(nt[it+tt*it]!==0)for(rt=it+1;rt<ot;rt++){const gt=nt[it+tt*rt]/nt[it+tt*it];at=At;do lt=At-at,nt[lt+tt*rt]=lt<=it?0:nt[lt+tt*rt]-nt[lt+tt*it]*gt;while(--at)}}while(--st);it=2;do{rt=it-1;do{const gt=nt[it+tt*rt]/nt[it+tt*it];at=tt;do lt=tt-at,nt[lt+tt*rt]=nt[lt+tt*rt]-nt[lt+tt*it]*gt;while(--at)}while(rt--)}while(--it);it=2;do{const gt=1/nt[it+tt*it];at=tt;do lt=tt-at,nt[lt+tt*it]=nt[lt+tt*it]*gt;while(--at)}while(it--);it=2;do{rt=2;do{if(lt=nt[_e+rt+tt*it],isNaN(lt)||lt===1/0)throw`Could not reverse! A=[${this.toString()}]`;_.e(it,rt,lt)}while(rt--)}while(it--);return _}setRotationFromQuaternion(_){const _e=_.x,tt=_.y,nt=_.z,it=_.w,rt=_e+_e,st=tt+tt,ot=nt+nt,at=_e*rt,At=_e*st,lt=_e*ot,gt=tt*st,ct=tt*ot,dt=nt*ot,ht=it*rt,mt=it*st,Ct=it*ot,ft=this.elements;return ft[3*0+0]=1-(gt+dt),ft[3*0+1]=At-Ct,ft[3*0+2]=lt+mt,ft[3*1+0]=At+Ct,ft[3*1+1]=1-(at+dt),ft[3*1+2]=ct-ht,ft[3*2+0]=lt-mt,ft[3*2+1]=ct+ht,ft[3*2+2]=1-(at+gt),this}transpose(_){_===void 0&&(_=new Mat3$1);const _e=this.elements,tt=_.elements;let nt;return tt[0]=_e[0],tt[4]=_e[4],tt[8]=_e[8],nt=_e[1],tt[1]=_e[3],tt[3]=nt,nt=_e[2],tt[2]=_e[6],tt[6]=nt,nt=_e[5],tt[5]=_e[7],tt[7]=nt,_}}const reverse_eqns$1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class Vec3$1{constructor(_,_e,tt){_===void 0&&(_=0),_e===void 0&&(_e=0),tt===void 0&&(tt=0),this.x=_,this.y=_e,this.z=tt}cross(_,_e){_e===void 0&&(_e=new Vec3$1);const tt=_.x,nt=_.y,it=_.z,rt=this.x,st=this.y,ot=this.z;return _e.x=st*it-ot*nt,_e.y=ot*tt-rt*it,_e.z=rt*nt-st*tt,_e}set(_,_e,tt){return this.x=_,this.y=_e,this.z=tt,this}setZero(){this.x=this.y=this.z=0}vadd(_,_e){if(_e)_e.x=_.x+this.x,_e.y=_.y+this.y,_e.z=_.z+this.z;else return new Vec3$1(this.x+_.x,this.y+_.y,this.z+_.z)}vsub(_,_e){if(_e)_e.x=this.x-_.x,_e.y=this.y-_.y,_e.z=this.z-_.z;else return new Vec3$1(this.x-_.x,this.y-_.y,this.z-_.z)}crossmat(){return new Mat3$1([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const _=this.x,_e=this.y,tt=this.z,nt=Math.sqrt(_*_+_e*_e+tt*tt);if(nt>0){const it=1/nt;this.x*=it,this.y*=it,this.z*=it}else this.x=0,this.y=0,this.z=0;return nt}unit(_){_===void 0&&(_=new Vec3$1);const _e=this.x,tt=this.y,nt=this.z;let it=Math.sqrt(_e*_e+tt*tt+nt*nt);return it>0?(it=1/it,_.x=_e*it,_.y=tt*it,_.z=nt*it):(_.x=1,_.y=0,_.z=0),_}length(){const _=this.x,_e=this.y,tt=this.z;return Math.sqrt(_*_+_e*_e+tt*tt)}lengthSquared(){return this.dot(this)}distanceTo(_){const _e=this.x,tt=this.y,nt=this.z,it=_.x,rt=_.y,st=_.z;return Math.sqrt((it-_e)*(it-_e)+(rt-tt)*(rt-tt)+(st-nt)*(st-nt))}distanceSquared(_){const _e=this.x,tt=this.y,nt=this.z,it=_.x,rt=_.y,st=_.z;return(it-_e)*(it-_e)+(rt-tt)*(rt-tt)+(st-nt)*(st-nt)}scale(_,_e){_e===void 0&&(_e=new Vec3$1);const tt=this.x,nt=this.y,it=this.z;return _e.x=_*tt,_e.y=_*nt,_e.z=_*it,_e}vmul(_,_e){return _e===void 0&&(_e=new Vec3$1),_e.x=_.x*this.x,_e.y=_.y*this.y,_e.z=_.z*this.z,_e}addScaledVector(_,_e,tt){return tt===void 0&&(tt=new Vec3$1),tt.x=this.x+_*_e.x,tt.y=this.y+_*_e.y,tt.z=this.z+_*_e.z,tt}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(_){return _===void 0&&(_=new Vec3$1),_.x=-this.x,_.y=-this.y,_.z=-this.z,_}tangents(_,_e){const tt=this.length();if(tt>0){const nt=Vec3_tangents_n$1,it=1/tt;nt.set(this.x*it,this.y*it,this.z*it);const rt=Vec3_tangents_randVec$1;Math.abs(nt.x)<.9?(rt.set(1,0,0),nt.cross(rt,_)):(rt.set(0,1,0),nt.cross(rt,_)),nt.cross(_,_e)}else _.set(1,0,0),_e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}lerp(_,_e,tt){const nt=this.x,it=this.y,rt=this.z;tt.x=nt+(_.x-nt)*_e,tt.y=it+(_.y-it)*_e,tt.z=rt+(_.z-rt)*_e}almostEquals(_,_e){return _e===void 0&&(_e=1e-6),!(Math.abs(this.x-_.x)>_e||Math.abs(this.y-_.y)>_e||Math.abs(this.z-_.z)>_e)}almostZero(_){return _===void 0&&(_=1e-6),!(Math.abs(this.x)>_||Math.abs(this.y)>_||Math.abs(this.z)>_)}isAntiparallelTo(_,_e){return this.negate(antip_neg$1),antip_neg$1.almostEquals(_,_e)}clone(){return new Vec3$1(this.x,this.y,this.z)}}Vec3$1.ZERO=new Vec3$1(0,0,0);Vec3$1.UNIT_X=new Vec3$1(1,0,0);Vec3$1.UNIT_Y=new Vec3$1(0,1,0);Vec3$1.UNIT_Z=new Vec3$1(0,0,1);const Vec3_tangents_n$1=new Vec3$1,Vec3_tangents_randVec$1=new Vec3$1,antip_neg$1=new Vec3$1;class AABB$1{constructor(_){_===void 0&&(_={}),this.lowerBound=new Vec3$1,this.upperBound=new Vec3$1,_.lowerBound&&this.lowerBound.copy(_.lowerBound),_.upperBound&&this.upperBound.copy(_.upperBound)}setFromPoints(_,_e,tt,nt){const it=this.lowerBound,rt=this.upperBound,st=tt;it.copy(_[0]),st&&st.vmult(it,it),rt.copy(it);for(let ot=1;ot<_.length;ot++){let at=_[ot];st&&(st.vmult(at,tmp$1$1),at=tmp$1$1),at.x>rt.x&&(rt.x=at.x),at.x<it.x&&(it.x=at.x),at.y>rt.y&&(rt.y=at.y),at.y<it.y&&(it.y=at.y),at.z>rt.z&&(rt.z=at.z),at.z<it.z&&(it.z=at.z)}return _e&&(_e.vadd(it,it),_e.vadd(rt,rt)),nt&&(it.x-=nt,it.y-=nt,it.z-=nt,rt.x+=nt,rt.y+=nt,rt.z+=nt),this}copy(_){return this.lowerBound.copy(_.lowerBound),this.upperBound.copy(_.upperBound),this}clone(){return new AABB$1().copy(this)}extend(_){this.lowerBound.x=Math.min(this.lowerBound.x,_.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,_.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,_.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,_.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,_.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,_.upperBound.z)}overlaps(_){const _e=this.lowerBound,tt=this.upperBound,nt=_.lowerBound,it=_.upperBound,rt=nt.x<=tt.x&&tt.x<=it.x||_e.x<=it.x&&it.x<=tt.x,st=nt.y<=tt.y&&tt.y<=it.y||_e.y<=it.y&&it.y<=tt.y,ot=nt.z<=tt.z&&tt.z<=it.z||_e.z<=it.z&&it.z<=tt.z;return rt&&st&&ot}volume(){const _=this.lowerBound,_e=this.upperBound;return(_e.x-_.x)*(_e.y-_.y)*(_e.z-_.z)}contains(_){const _e=this.lowerBound,tt=this.upperBound,nt=_.lowerBound,it=_.upperBound;return _e.x<=nt.x&&tt.x>=it.x&&_e.y<=nt.y&&tt.y>=it.y&&_e.z<=nt.z&&tt.z>=it.z}getCorners(_,_e,tt,nt,it,rt,st,ot){const at=this.lowerBound,At=this.upperBound;_.copy(at),_e.set(At.x,at.y,at.z),tt.set(At.x,At.y,at.z),nt.set(at.x,At.y,At.z),it.set(At.x,at.y,At.z),rt.set(at.x,At.y,at.z),st.set(at.x,at.y,At.z),ot.copy(At)}toLocalFrame(_,_e){const tt=transformIntoFrame_corners$1,nt=tt[0],it=tt[1],rt=tt[2],st=tt[3],ot=tt[4],at=tt[5],At=tt[6],lt=tt[7];this.getCorners(nt,it,rt,st,ot,at,At,lt);for(let gt=0;gt!==8;gt++){const ct=tt[gt];_.pointToLocal(ct,ct)}return _e.setFromPoints(tt)}toWorldFrame(_,_e){const tt=transformIntoFrame_corners$1,nt=tt[0],it=tt[1],rt=tt[2],st=tt[3],ot=tt[4],at=tt[5],At=tt[6],lt=tt[7];this.getCorners(nt,it,rt,st,ot,at,At,lt);for(let gt=0;gt!==8;gt++){const ct=tt[gt];_.pointToWorld(ct,ct)}return _e.setFromPoints(tt)}overlapsRay(_){const{direction:_e,from:tt}=_,nt=1/_e.x,it=1/_e.y,rt=1/_e.z,st=(this.lowerBound.x-tt.x)*nt,ot=(this.upperBound.x-tt.x)*nt,at=(this.lowerBound.y-tt.y)*it,At=(this.upperBound.y-tt.y)*it,lt=(this.lowerBound.z-tt.z)*rt,gt=(this.upperBound.z-tt.z)*rt,ct=Math.max(Math.max(Math.min(st,ot),Math.min(at,At)),Math.min(lt,gt)),dt=Math.min(Math.min(Math.max(st,ot),Math.max(at,At)),Math.max(lt,gt));return!(dt<0||ct>dt)}}const tmp$1$1=new Vec3$1,transformIntoFrame_corners$1=[new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1];class Quaternion$1{constructor(_,_e,tt,nt){_===void 0&&(_=0),_e===void 0&&(_e=0),tt===void 0&&(tt=0),nt===void 0&&(nt=1),this.x=_,this.y=_e,this.z=tt,this.w=nt}set(_,_e,tt,nt){return this.x=_,this.y=_e,this.z=tt,this.w=nt,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(_,_e){const tt=Math.sin(_e*.5);return this.x=_.x*tt,this.y=_.y*tt,this.z=_.z*tt,this.w=Math.cos(_e*.5),this}toAxisAngle(_){_===void 0&&(_=new Vec3$1),this.normalize();const _e=2*Math.acos(this.w),tt=Math.sqrt(1-this.w*this.w);return tt<.001?(_.x=this.x,_.y=this.y,_.z=this.z):(_.x=this.x/tt,_.y=this.y/tt,_.z=this.z/tt),[_,_e]}setFromVectors(_,_e){if(_.isAntiparallelTo(_e)){const tt=sfv_t1$1,nt=sfv_t2$1;_.tangents(tt,nt),this.setFromAxisAngle(tt,Math.PI)}else{const tt=_.cross(_e);this.x=tt.x,this.y=tt.y,this.z=tt.z,this.w=Math.sqrt(_.length()**2*_e.length()**2)+_.dot(_e),this.normalize()}return this}mult(_,_e){_e===void 0&&(_e=new Quaternion$1);const tt=this.x,nt=this.y,it=this.z,rt=this.w,st=_.x,ot=_.y,at=_.z,At=_.w;return _e.x=tt*At+rt*st+nt*at-it*ot,_e.y=nt*At+rt*ot+it*st-tt*at,_e.z=it*At+rt*at+tt*ot-nt*st,_e.w=rt*At-tt*st-nt*ot-it*at,_e}inverse(_){_===void 0&&(_=new Quaternion$1);const _e=this.x,tt=this.y,nt=this.z,it=this.w;this.conjugate(_);const rt=1/(_e*_e+tt*tt+nt*nt+it*it);return _.x*=rt,_.y*=rt,_.z*=rt,_.w*=rt,_}conjugate(_){return _===void 0&&(_=new Quaternion$1),_.x=-this.x,_.y=-this.y,_.z=-this.z,_.w=this.w,_}normalize(){let _=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return _===0?(this.x=0,this.y=0,this.z=0,this.w=0):(_=1/_,this.x*=_,this.y*=_,this.z*=_,this.w*=_),this}normalizeFast(){const _=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return _===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=_,this.y*=_,this.z*=_,this.w*=_),this}vmult(_,_e){_e===void 0&&(_e=new Vec3$1);const tt=_.x,nt=_.y,it=_.z,rt=this.x,st=this.y,ot=this.z,at=this.w,At=at*tt+st*it-ot*nt,lt=at*nt+ot*tt-rt*it,gt=at*it+rt*nt-st*tt,ct=-rt*tt-st*nt-ot*it;return _e.x=At*at+ct*-rt+lt*-ot-gt*-st,_e.y=lt*at+ct*-st+gt*-rt-At*-ot,_e.z=gt*at+ct*-ot+At*-st-lt*-rt,_e}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w,this}toEuler(_,_e){_e===void 0&&(_e="YZX");let tt,nt,it;const rt=this.x,st=this.y,ot=this.z,at=this.w;switch(_e){case"YZX":const At=rt*st+ot*at;if(At>.499&&(tt=2*Math.atan2(rt,at),nt=Math.PI/2,it=0),At<-.499&&(tt=-2*Math.atan2(rt,at),nt=-Math.PI/2,it=0),tt===void 0){const lt=rt*rt,gt=st*st,ct=ot*ot;tt=Math.atan2(2*st*at-2*rt*ot,1-2*gt-2*ct),nt=Math.asin(2*At),it=Math.atan2(2*rt*at-2*st*ot,1-2*lt-2*ct)}break;default:throw new Error(`Euler order ${_e} not supported yet.`)}_.y=tt,_.z=nt,_.x=it}setFromEuler(_,_e,tt,nt){nt===void 0&&(nt="XYZ");const it=Math.cos(_/2),rt=Math.cos(_e/2),st=Math.cos(tt/2),ot=Math.sin(_/2),at=Math.sin(_e/2),At=Math.sin(tt/2);return nt==="XYZ"?(this.x=ot*rt*st+it*at*At,this.y=it*at*st-ot*rt*At,this.z=it*rt*At+ot*at*st,this.w=it*rt*st-ot*at*At):nt==="YXZ"?(this.x=ot*rt*st+it*at*At,this.y=it*at*st-ot*rt*At,this.z=it*rt*At-ot*at*st,this.w=it*rt*st+ot*at*At):nt==="ZXY"?(this.x=ot*rt*st-it*at*At,this.y=it*at*st+ot*rt*At,this.z=it*rt*At+ot*at*st,this.w=it*rt*st-ot*at*At):nt==="ZYX"?(this.x=ot*rt*st-it*at*At,this.y=it*at*st+ot*rt*At,this.z=it*rt*At-ot*at*st,this.w=it*rt*st+ot*at*At):nt==="YZX"?(this.x=ot*rt*st+it*at*At,this.y=it*at*st+ot*rt*At,this.z=it*rt*At-ot*at*st,this.w=it*rt*st-ot*at*At):nt==="XZY"&&(this.x=ot*rt*st-it*at*At,this.y=it*at*st-ot*rt*At,this.z=it*rt*At+ot*at*st,this.w=it*rt*st+ot*at*At),this}clone(){return new Quaternion$1(this.x,this.y,this.z,this.w)}slerp(_,_e,tt){tt===void 0&&(tt=new Quaternion$1);const nt=this.x,it=this.y,rt=this.z,st=this.w;let ot=_.x,at=_.y,At=_.z,lt=_.w,gt,ct,dt,ht,mt;return ct=nt*ot+it*at+rt*At+st*lt,ct<0&&(ct=-ct,ot=-ot,at=-at,At=-At,lt=-lt),1-ct>1e-6?(gt=Math.acos(ct),dt=Math.sin(gt),ht=Math.sin((1-_e)*gt)/dt,mt=Math.sin(_e*gt)/dt):(ht=1-_e,mt=_e),tt.x=ht*nt+mt*ot,tt.y=ht*it+mt*at,tt.z=ht*rt+mt*At,tt.w=ht*st+mt*lt,tt}integrate(_,_e,tt,nt){nt===void 0&&(nt=new Quaternion$1);const it=_.x*tt.x,rt=_.y*tt.y,st=_.z*tt.z,ot=this.x,at=this.y,At=this.z,lt=this.w,gt=_e*.5;return nt.x+=gt*(it*lt+rt*At-st*at),nt.y+=gt*(rt*lt+st*ot-it*At),nt.z+=gt*(st*lt+it*at-rt*ot),nt.w+=gt*(-it*ot-rt*at-st*At),nt}}const sfv_t1$1=new Vec3$1,sfv_t2$1=new Vec3$1,SHAPE_TYPES$1={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class Shape$1{constructor(_){_===void 0&&(_={}),this.id=Shape$1.idCounter++,this.type=_.type||0,this.boundingSphereRadius=0,this.collisionResponse=_.collisionResponse?_.collisionResponse:!0,this.collisionFilterGroup=_.collisionFilterGroup!==void 0?_.collisionFilterGroup:1,this.collisionFilterMask=_.collisionFilterMask!==void 0?_.collisionFilterMask:-1,this.material=_.material?_.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(_,_e){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(_,_e,tt,nt){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}Shape$1.idCounter=0;Shape$1.types=SHAPE_TYPES$1;class Transform$1{constructor(_){_===void 0&&(_={}),this.position=new Vec3$1,this.quaternion=new Quaternion$1,_.position&&this.position.copy(_.position),_.quaternion&&this.quaternion.copy(_.quaternion)}pointToLocal(_,_e){return Transform$1.pointToLocalFrame(this.position,this.quaternion,_,_e)}pointToWorld(_,_e){return Transform$1.pointToWorldFrame(this.position,this.quaternion,_,_e)}vectorToWorldFrame(_,_e){return _e===void 0&&(_e=new Vec3$1),this.quaternion.vmult(_,_e),_e}static pointToLocalFrame(_,_e,tt,nt){return nt===void 0&&(nt=new Vec3$1),tt.vsub(_,nt),_e.conjugate(tmpQuat$1$1),tmpQuat$1$1.vmult(nt,nt),nt}static pointToWorldFrame(_,_e,tt,nt){return nt===void 0&&(nt=new Vec3$1),_e.vmult(tt,nt),nt.vadd(_,nt),nt}static vectorToWorldFrame(_,_e,tt){return tt===void 0&&(tt=new Vec3$1),_.vmult(_e,tt),tt}static vectorToLocalFrame(_,_e,tt,nt){return nt===void 0&&(nt=new Vec3$1),_e.w*=-1,_e.vmult(tt,nt),_e.w*=-1,nt}}const tmpQuat$1$1=new Quaternion$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1;new Vec3$1;new Quaternion$1;new AABB$1;new Mat3$1;new Mat3$1;new Mat3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Quaternion$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;class RaycastResult$1{constructor(){this.rayFromWorld=new Vec3$1,this.rayToWorld=new Vec3$1,this.hitNormalWorld=new Vec3$1,this.hitPointWorld=new Vec3$1,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(_,_e,tt,nt,it,rt,st){this.rayFromWorld.copy(_),this.rayToWorld.copy(_e),this.hitNormalWorld.copy(tt),this.hitPointWorld.copy(nt),this.shape=it,this.body=rt,this.distance=st}}let _Shape$types$SPHERE$1,_Shape$types$PLANE$1,_Shape$types$BOX$1,_Shape$types$CYLINDER$1,_Shape$types$CONVEXPO$1,_Shape$types$HEIGHTFI$1,_Shape$types$TRIMESH$1;const RAY_MODES$1={CLOSEST:1,ANY:2,ALL:4};_Shape$types$SPHERE$1=Shape$1.types.SPHERE;_Shape$types$PLANE$1=Shape$1.types.PLANE;_Shape$types$BOX$1=Shape$1.types.BOX;_Shape$types$CYLINDER$1=Shape$1.types.CYLINDER;_Shape$types$CONVEXPO$1=Shape$1.types.CONVEXPOLYHEDRON;_Shape$types$HEIGHTFI$1=Shape$1.types.HEIGHTFIELD;_Shape$types$TRIMESH$1=Shape$1.types.TRIMESH;class Ray$1{get[_Shape$types$SPHERE$1](){return this._intersectSphere}get[_Shape$types$PLANE$1](){return this._intersectPlane}get[_Shape$types$BOX$1](){return this._intersectBox}get[_Shape$types$CYLINDER$1](){return this._intersectConvex}get[_Shape$types$CONVEXPO$1](){return this._intersectConvex}get[_Shape$types$HEIGHTFI$1](){return this._intersectHeightfield}get[_Shape$types$TRIMESH$1](){return this._intersectTrimesh}constructor(_,_e){_===void 0&&(_=new Vec3$1),_e===void 0&&(_e=new Vec3$1),this.from=_.clone(),this.to=_e.clone(),this.direction=new Vec3$1,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Ray$1.ANY,this.result=new RaycastResult$1,this.hasHit=!1,this.callback=tt=>{}}intersectWorld(_,_e){return this.mode=_e.mode||Ray$1.ANY,this.result=_e.result||new RaycastResult$1,this.skipBackfaces=!!_e.skipBackfaces,this.collisionFilterMask=typeof _e.collisionFilterMask<"u"?_e.collisionFilterMask:-1,this.collisionFilterGroup=typeof _e.collisionFilterGroup<"u"?_e.collisionFilterGroup:-1,this.checkCollisionResponse=typeof _e.checkCollisionResponse<"u"?_e.checkCollisionResponse:!0,_e.from&&this.from.copy(_e.from),_e.to&&this.to.copy(_e.to),this.callback=_e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(tmpAABB$1$1),tmpArray$1.length=0,_.broadphase.aabbQuery(_,tmpAABB$1$1,tmpArray$1),this.intersectBodies(tmpArray$1),this.hasHit}intersectBody(_,_e){_e&&(this.result=_e,this.updateDirection());const tt=this.checkCollisionResponse;if(tt&&!_.collisionResponse||!(this.collisionFilterGroup&_.collisionFilterMask)||!(_.collisionFilterGroup&this.collisionFilterMask))return;const nt=intersectBody_xi$1,it=intersectBody_qi$1;for(let rt=0,st=_.shapes.length;rt<st;rt++){const ot=_.shapes[rt];if(!(tt&&!ot.collisionResponse)&&(_.quaternion.mult(_.shapeOrientations[rt],it),_.quaternion.vmult(_.shapeOffsets[rt],nt),nt.vadd(_.position,nt),this.intersectShape(ot,it,nt,_),this.result.shouldStop))break}}intersectBodies(_,_e){_e&&(this.result=_e,this.updateDirection());for(let tt=0,nt=_.length;!this.result.shouldStop&&tt<nt;tt++)this.intersectBody(_[tt])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(_,_e,tt,nt){const it=this.from;if(distanceFromIntersection$1(it,this.direction,tt)>_.boundingSphereRadius)return;const st=this[_.type];st&&st.call(this,_,_e,tt,nt,_)}_intersectBox(_,_e,tt,nt,it){return this._intersectConvex(_.convexPolyhedronRepresentation,_e,tt,nt,it)}_intersectPlane(_,_e,tt,nt,it){const rt=this.from,st=this.to,ot=this.direction,at=new Vec3$1(0,0,1);_e.vmult(at,at);const At=new Vec3$1;rt.vsub(tt,At);const lt=At.dot(at);st.vsub(tt,At);const gt=At.dot(at);if(lt*gt>0||rt.distanceTo(st)<lt)return;const ct=at.dot(ot);if(Math.abs(ct)<this.precision)return;const dt=new Vec3$1,ht=new Vec3$1,mt=new Vec3$1;rt.vsub(tt,dt);const Ct=-at.dot(dt)/ct;ot.scale(Ct,ht),rt.vadd(ht,mt),this.reportIntersection(at,mt,it,nt,-1)}getAABB(_){const{lowerBound:_e,upperBound:tt}=_,nt=this.to,it=this.from;_e.x=Math.min(nt.x,it.x),_e.y=Math.min(nt.y,it.y),_e.z=Math.min(nt.z,it.z),tt.x=Math.max(nt.x,it.x),tt.y=Math.max(nt.y,it.y),tt.z=Math.max(nt.z,it.z)}_intersectHeightfield(_,_e,tt,nt,it){_.data,_.elementSize;const rt=intersectHeightfield_localRay$1;rt.from.copy(this.from),rt.to.copy(this.to),Transform$1.pointToLocalFrame(tt,_e,rt.from,rt.from),Transform$1.pointToLocalFrame(tt,_e,rt.to,rt.to),rt.updateDirection();const st=intersectHeightfield_index$1;let ot,at,At,lt;ot=at=0,At=lt=_.data.length-1;const gt=new AABB$1;rt.getAABB(gt),_.getIndexOfPosition(gt.lowerBound.x,gt.lowerBound.y,st,!0),ot=Math.max(ot,st[0]),at=Math.max(at,st[1]),_.getIndexOfPosition(gt.upperBound.x,gt.upperBound.y,st,!0),At=Math.min(At,st[0]+1),lt=Math.min(lt,st[1]+1);for(let ct=ot;ct<At;ct++)for(let dt=at;dt<lt;dt++){if(this.result.shouldStop)return;if(_.getAabbAtIndex(ct,dt,gt),!!gt.overlapsRay(rt)){if(_.getConvexTrianglePillar(ct,dt,!1),Transform$1.pointToWorldFrame(tt,_e,_.pillarOffset,worldPillarOffset$1),this._intersectConvex(_.pillarConvex,_e,worldPillarOffset$1,nt,it,intersectConvexOptions$1),this.result.shouldStop)return;_.getConvexTrianglePillar(ct,dt,!0),Transform$1.pointToWorldFrame(tt,_e,_.pillarOffset,worldPillarOffset$1),this._intersectConvex(_.pillarConvex,_e,worldPillarOffset$1,nt,it,intersectConvexOptions$1)}}}_intersectSphere(_,_e,tt,nt,it){const rt=this.from,st=this.to,ot=_.radius,at=(st.x-rt.x)**2+(st.y-rt.y)**2+(st.z-rt.z)**2,At=2*((st.x-rt.x)*(rt.x-tt.x)+(st.y-rt.y)*(rt.y-tt.y)+(st.z-rt.z)*(rt.z-tt.z)),lt=(rt.x-tt.x)**2+(rt.y-tt.y)**2+(rt.z-tt.z)**2-ot**2,gt=At**2-4*at*lt,ct=Ray_intersectSphere_intersectionPoint$1,dt=Ray_intersectSphere_normal$1;if(!(gt<0))if(gt===0)rt.lerp(st,gt,ct),ct.vsub(tt,dt),dt.normalize(),this.reportIntersection(dt,ct,it,nt,-1);else{const ht=(-At-Math.sqrt(gt))/(2*at),mt=(-At+Math.sqrt(gt))/(2*at);if(ht>=0&&ht<=1&&(rt.lerp(st,ht,ct),ct.vsub(tt,dt),dt.normalize(),this.reportIntersection(dt,ct,it,nt,-1)),this.result.shouldStop)return;mt>=0&&mt<=1&&(rt.lerp(st,mt,ct),ct.vsub(tt,dt),dt.normalize(),this.reportIntersection(dt,ct,it,nt,-1))}}_intersectConvex(_,_e,tt,nt,it,rt){const st=intersectConvex_normal$1,ot=intersectConvex_vector$1,at=rt&&rt.faceList||null,At=_.faces,lt=_.vertices,gt=_.faceNormals,ct=this.direction,dt=this.from,ht=this.to,mt=dt.distanceTo(ht),Ct=at?at.length:At.length,ft=this.result;for(let pt=0;!ft.shouldStop&&pt<Ct;pt++){const Vt=at?at[pt]:pt,yt=At[Vt],Gt=gt[Vt],Bt=_e,vt=tt;ot.copy(lt[yt[0]]),Bt.vmult(ot,ot),ot.vadd(vt,ot),ot.vsub(dt,ot),Bt.vmult(Gt,st);const wt=ct.dot(st);if(Math.abs(wt)<this.precision)continue;const Mt=st.dot(ot)/wt;if(!(Mt<0)){ct.scale(Mt,intersectPoint$1),intersectPoint$1.vadd(dt,intersectPoint$1),a$1.copy(lt[yt[0]]),Bt.vmult(a$1,a$1),vt.vadd(a$1,a$1);for(let kt=1;!ft.shouldStop&&kt<yt.length-1;kt++){b$1.copy(lt[yt[kt]]),c$1.copy(lt[yt[kt+1]]),Bt.vmult(b$1,b$1),Bt.vmult(c$1,c$1),vt.vadd(b$1,b$1),vt.vadd(c$1,c$1);const Nt=intersectPoint$1.distanceTo(dt);!(Ray$1.pointInTriangle(intersectPoint$1,a$1,b$1,c$1)||Ray$1.pointInTriangle(intersectPoint$1,b$1,a$1,c$1))||Nt>mt||this.reportIntersection(st,intersectPoint$1,it,nt,Vt)}}}}_intersectTrimesh(_,_e,tt,nt,it,rt){const st=intersectTrimesh_normal$1,ot=intersectTrimesh_triangles$1,at=intersectTrimesh_treeTransform$1,At=intersectConvex_vector$1,lt=intersectTrimesh_localDirection$1,gt=intersectTrimesh_localFrom$1,ct=intersectTrimesh_localTo$1,dt=intersectTrimesh_worldIntersectPoint$1,ht=intersectTrimesh_worldNormal$1,mt=_.indices;_.vertices;const Ct=this.from,ft=this.to,pt=this.direction;at.position.copy(tt),at.quaternion.copy(_e),Transform$1.vectorToLocalFrame(tt,_e,pt,lt),Transform$1.pointToLocalFrame(tt,_e,Ct,gt),Transform$1.pointToLocalFrame(tt,_e,ft,ct),ct.x*=_.scale.x,ct.y*=_.scale.y,ct.z*=_.scale.z,gt.x*=_.scale.x,gt.y*=_.scale.y,gt.z*=_.scale.z,ct.vsub(gt,lt),lt.normalize();const Vt=gt.distanceSquared(ct);_.tree.rayQuery(this,at,ot);for(let yt=0,Gt=ot.length;!this.result.shouldStop&&yt!==Gt;yt++){const Bt=ot[yt];_.getNormal(Bt,st),_.getVertex(mt[Bt*3],a$1),a$1.vsub(gt,At);const vt=lt.dot(st),wt=st.dot(At)/vt;if(wt<0)continue;lt.scale(wt,intersectPoint$1),intersectPoint$1.vadd(gt,intersectPoint$1),_.getVertex(mt[Bt*3+1],b$1),_.getVertex(mt[Bt*3+2],c$1);const Mt=intersectPoint$1.distanceSquared(gt);!(Ray$1.pointInTriangle(intersectPoint$1,b$1,a$1,c$1)||Ray$1.pointInTriangle(intersectPoint$1,a$1,b$1,c$1))||Mt>Vt||(Transform$1.vectorToWorldFrame(_e,st,ht),Transform$1.pointToWorldFrame(tt,_e,intersectPoint$1,dt),this.reportIntersection(ht,dt,it,nt,Bt))}ot.length=0}reportIntersection(_,_e,tt,nt,it){const rt=this.from,st=this.to,ot=rt.distanceTo(_e),at=this.result;if(!(this.skipBackfaces&&_.dot(this.direction)>0))switch(at.hitFaceIndex=typeof it<"u"?it:-1,this.mode){case Ray$1.ALL:this.hasHit=!0,at.set(rt,st,_,_e,tt,nt,ot),at.hasHit=!0,this.callback(at);break;case Ray$1.CLOSEST:(ot<at.distance||!at.hasHit)&&(this.hasHit=!0,at.hasHit=!0,at.set(rt,st,_,_e,tt,nt,ot));break;case Ray$1.ANY:this.hasHit=!0,at.hasHit=!0,at.set(rt,st,_,_e,tt,nt,ot),at.shouldStop=!0;break}}static pointInTriangle(_,_e,tt,nt){nt.vsub(_e,v0$1),tt.vsub(_e,v1$1),_.vsub(_e,v2$1);const it=v0$1.dot(v0$1),rt=v0$1.dot(v1$1),st=v0$1.dot(v2$1),ot=v1$1.dot(v1$1),at=v1$1.dot(v2$1);let At,lt;return(At=ot*st-rt*at)>=0&&(lt=it*at-rt*st)>=0&&At+lt<it*ot-rt*rt}}Ray$1.CLOSEST=RAY_MODES$1.CLOSEST;Ray$1.ANY=RAY_MODES$1.ANY;Ray$1.ALL=RAY_MODES$1.ALL;const tmpAABB$1$1=new AABB$1,tmpArray$1=[],v1$1=new Vec3$1,v2$1=new Vec3$1,intersectBody_xi$1=new Vec3$1,intersectBody_qi$1=new Quaternion$1,intersectPoint$1=new Vec3$1,a$1=new Vec3$1,b$1=new Vec3$1,c$1=new Vec3$1;new Vec3$1;new RaycastResult$1;const intersectConvexOptions$1={faceList:[0]},worldPillarOffset$1=new Vec3$1,intersectHeightfield_localRay$1=new Ray$1,intersectHeightfield_index$1=[],Ray_intersectSphere_intersectionPoint$1=new Vec3$1,Ray_intersectSphere_normal$1=new Vec3$1,intersectConvex_normal$1=new Vec3$1;new Vec3$1;new Vec3$1;const intersectConvex_vector$1=new Vec3$1,intersectTrimesh_normal$1=new Vec3$1,intersectTrimesh_localDirection$1=new Vec3$1,intersectTrimesh_localFrom$1=new Vec3$1,intersectTrimesh_localTo$1=new Vec3$1,intersectTrimesh_worldNormal$1=new Vec3$1,intersectTrimesh_worldIntersectPoint$1=new Vec3$1;new AABB$1;const intersectTrimesh_triangles$1=[],intersectTrimesh_treeTransform$1=new Transform$1,v0$1=new Vec3$1,intersect$1=new Vec3$1;function distanceFromIntersection$1(et,_,_e){_e.vsub(et,v0$1);const tt=v0$1.dot(_);return _.scale(tt,intersect$1),intersect$1.vadd(et,intersect$1),_e.distanceTo(intersect$1)}new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Ray$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1(1,0,0),new Vec3$1(0,1,0),new Vec3$1(0,0,1);new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new AABB$1;new Vec3$1;new AABB$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new AABB$1;new Vec3$1;new Transform$1;new AABB$1;Shape$1.types.SPHERE,Shape$1.types.SPHERE|Shape$1.types.PLANE,Shape$1.types.BOX|Shape$1.types.BOX,Shape$1.types.SPHERE|Shape$1.types.BOX,Shape$1.types.PLANE|Shape$1.types.BOX,Shape$1.types.CONVEXPOLYHEDRON,Shape$1.types.SPHERE|Shape$1.types.CONVEXPOLYHEDRON,Shape$1.types.PLANE|Shape$1.types.CONVEXPOLYHEDRON,Shape$1.types.BOX|Shape$1.types.CONVEXPOLYHEDRON,Shape$1.types.SPHERE|Shape$1.types.HEIGHTFIELD,Shape$1.types.BOX|Shape$1.types.HEIGHTFIELD,Shape$1.types.CONVEXPOLYHEDRON|Shape$1.types.HEIGHTFIELD,Shape$1.types.PARTICLE|Shape$1.types.SPHERE,Shape$1.types.PLANE|Shape$1.types.PARTICLE,Shape$1.types.BOX|Shape$1.types.PARTICLE,Shape$1.types.PARTICLE|Shape$1.types.CONVEXPOLYHEDRON,Shape$1.types.CYLINDER,Shape$1.types.SPHERE|Shape$1.types.CYLINDER,Shape$1.types.PLANE|Shape$1.types.CYLINDER,Shape$1.types.BOX|Shape$1.types.CYLINDER,Shape$1.types.CONVEXPOLYHEDRON|Shape$1.types.CYLINDER,Shape$1.types.HEIGHTFIELD|Shape$1.types.CYLINDER,Shape$1.types.PARTICLE|Shape$1.types.CYLINDER,Shape$1.types.SPHERE|Shape$1.types.TRIMESH,Shape$1.types.PLANE|Shape$1.types.TRIMESH;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Quaternion$1;new Quaternion$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new AABB$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1,new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Quaternion$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new Vec3$1;new AABB$1;new Ray$1;const performance$1=globalThis.performance||{};if(!performance$1.now){let et=Date.now();performance$1.timing&&performance$1.timing.navigationStart&&(et=performance$1.timing.navigationStart),performance$1.now=()=>Date.now()-et}new Vec3$1;class Mat3{constructor(_){_===void 0&&(_=[0,0,0,0,0,0,0,0,0]),this.elements=_}identity(){const _=this.elements;_[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=1,_[5]=0,_[6]=0,_[7]=0,_[8]=1}setZero(){const _=this.elements;_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=0,_[6]=0,_[7]=0,_[8]=0}setTrace(_){const _e=this.elements;_e[0]=_.x,_e[4]=_.y,_e[8]=_.z}getTrace(_){_===void 0&&(_=new Vec3);const _e=this.elements;return _.x=_e[0],_.y=_e[4],_.z=_e[8],_}vmult(_,_e){_e===void 0&&(_e=new Vec3);const tt=this.elements,nt=_.x,it=_.y,rt=_.z;return _e.x=tt[0]*nt+tt[1]*it+tt[2]*rt,_e.y=tt[3]*nt+tt[4]*it+tt[5]*rt,_e.z=tt[6]*nt+tt[7]*it+tt[8]*rt,_e}smult(_){for(let _e=0;_e<this.elements.length;_e++)this.elements[_e]*=_}mmult(_,_e){_e===void 0&&(_e=new Mat3);const tt=this.elements,nt=_.elements,it=_e.elements,rt=tt[0],st=tt[1],ot=tt[2],at=tt[3],At=tt[4],lt=tt[5],gt=tt[6],ct=tt[7],dt=tt[8],ht=nt[0],mt=nt[1],Ct=nt[2],ft=nt[3],pt=nt[4],Vt=nt[5],yt=nt[6],Gt=nt[7],Bt=nt[8];return it[0]=rt*ht+st*ft+ot*yt,it[1]=rt*mt+st*pt+ot*Gt,it[2]=rt*Ct+st*Vt+ot*Bt,it[3]=at*ht+At*ft+lt*yt,it[4]=at*mt+At*pt+lt*Gt,it[5]=at*Ct+At*Vt+lt*Bt,it[6]=gt*ht+ct*ft+dt*yt,it[7]=gt*mt+ct*pt+dt*Gt,it[8]=gt*Ct+ct*Vt+dt*Bt,_e}scale(_,_e){_e===void 0&&(_e=new Mat3);const tt=this.elements,nt=_e.elements;for(let it=0;it!==3;it++)nt[3*it+0]=_.x*tt[3*it+0],nt[3*it+1]=_.y*tt[3*it+1],nt[3*it+2]=_.z*tt[3*it+2];return _e}solve(_,_e){_e===void 0&&(_e=new Vec3);const tt=3,nt=4,it=[];let rt,st;for(rt=0;rt<tt*nt;rt++)it.push(0);for(rt=0;rt<3;rt++)for(st=0;st<3;st++)it[rt+nt*st]=this.elements[rt+3*st];it[3+4*0]=_.x,it[3+4*1]=_.y,it[3+4*2]=_.z;let ot=3;const at=ot;let At;const lt=4;let gt;do{if(rt=at-ot,it[rt+nt*rt]===0){for(st=rt+1;st<at;st++)if(it[rt+nt*st]!==0){At=lt;do gt=lt-At,it[gt+nt*rt]+=it[gt+nt*st];while(--At);break}}if(it[rt+nt*rt]!==0)for(st=rt+1;st<at;st++){const ct=it[rt+nt*st]/it[rt+nt*rt];At=lt;do gt=lt-At,it[gt+nt*st]=gt<=rt?0:it[gt+nt*st]-it[gt+nt*rt]*ct;while(--At)}}while(--ot);if(_e.z=it[2*nt+3]/it[2*nt+2],_e.y=(it[1*nt+3]-it[1*nt+2]*_e.z)/it[1*nt+1],_e.x=(it[0*nt+3]-it[0*nt+2]*_e.z-it[0*nt+1]*_e.y)/it[0*nt+0],isNaN(_e.x)||isNaN(_e.y)||isNaN(_e.z)||_e.x===1/0||_e.y===1/0||_e.z===1/0)throw`Could not solve equation! Got x=[${_e.toString()}], b=[${_.toString()}], A=[${this.toString()}]`;return _e}e(_,_e,tt){if(tt===void 0)return this.elements[_e+3*_];this.elements[_e+3*_]=tt}copy(_){for(let _e=0;_e<_.elements.length;_e++)this.elements[_e]=_.elements[_e];return this}toString(){let _="";const _e=",";for(let tt=0;tt<9;tt++)_+=this.elements[tt]+_e;return _}reverse(_){_===void 0&&(_=new Mat3);const _e=3,tt=6,nt=reverse_eqns;let it,rt;for(it=0;it<3;it++)for(rt=0;rt<3;rt++)nt[it+tt*rt]=this.elements[it+3*rt];nt[3+6*0]=1,nt[3+6*1]=0,nt[3+6*2]=0,nt[4+6*0]=0,nt[4+6*1]=1,nt[4+6*2]=0,nt[5+6*0]=0,nt[5+6*1]=0,nt[5+6*2]=1;let st=3;const ot=st;let at;const At=tt;let lt;do{if(it=ot-st,nt[it+tt*it]===0){for(rt=it+1;rt<ot;rt++)if(nt[it+tt*rt]!==0){at=At;do lt=At-at,nt[lt+tt*it]+=nt[lt+tt*rt];while(--at);break}}if(nt[it+tt*it]!==0)for(rt=it+1;rt<ot;rt++){const gt=nt[it+tt*rt]/nt[it+tt*it];at=At;do lt=At-at,nt[lt+tt*rt]=lt<=it?0:nt[lt+tt*rt]-nt[lt+tt*it]*gt;while(--at)}}while(--st);it=2;do{rt=it-1;do{const gt=nt[it+tt*rt]/nt[it+tt*it];at=tt;do lt=tt-at,nt[lt+tt*rt]=nt[lt+tt*rt]-nt[lt+tt*it]*gt;while(--at)}while(rt--)}while(--it);it=2;do{const gt=1/nt[it+tt*it];at=tt;do lt=tt-at,nt[lt+tt*it]=nt[lt+tt*it]*gt;while(--at)}while(it--);it=2;do{rt=2;do{if(lt=nt[_e+rt+tt*it],isNaN(lt)||lt===1/0)throw`Could not reverse! A=[${this.toString()}]`;_.e(it,rt,lt)}while(rt--)}while(it--);return _}setRotationFromQuaternion(_){const _e=_.x,tt=_.y,nt=_.z,it=_.w,rt=_e+_e,st=tt+tt,ot=nt+nt,at=_e*rt,At=_e*st,lt=_e*ot,gt=tt*st,ct=tt*ot,dt=nt*ot,ht=it*rt,mt=it*st,Ct=it*ot,ft=this.elements;return ft[3*0+0]=1-(gt+dt),ft[3*0+1]=At-Ct,ft[3*0+2]=lt+mt,ft[3*1+0]=At+Ct,ft[3*1+1]=1-(at+dt),ft[3*1+2]=ct-ht,ft[3*2+0]=lt-mt,ft[3*2+1]=ct+ht,ft[3*2+2]=1-(at+gt),this}transpose(_){_===void 0&&(_=new Mat3);const _e=this.elements,tt=_.elements;let nt;return tt[0]=_e[0],tt[4]=_e[4],tt[8]=_e[8],nt=_e[1],tt[1]=_e[3],tt[3]=nt,nt=_e[2],tt[2]=_e[6],tt[6]=nt,nt=_e[5],tt[5]=_e[7],tt[7]=nt,_}}const reverse_eqns=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class Vec3{constructor(_,_e,tt){_===void 0&&(_=0),_e===void 0&&(_e=0),tt===void 0&&(tt=0),this.x=_,this.y=_e,this.z=tt}cross(_,_e){_e===void 0&&(_e=new Vec3);const tt=_.x,nt=_.y,it=_.z,rt=this.x,st=this.y,ot=this.z;return _e.x=st*it-ot*nt,_e.y=ot*tt-rt*it,_e.z=rt*nt-st*tt,_e}set(_,_e,tt){return this.x=_,this.y=_e,this.z=tt,this}setZero(){this.x=this.y=this.z=0}vadd(_,_e){if(_e)_e.x=_.x+this.x,_e.y=_.y+this.y,_e.z=_.z+this.z;else return new Vec3(this.x+_.x,this.y+_.y,this.z+_.z)}vsub(_,_e){if(_e)_e.x=this.x-_.x,_e.y=this.y-_.y,_e.z=this.z-_.z;else return new Vec3(this.x-_.x,this.y-_.y,this.z-_.z)}crossmat(){return new Mat3([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const _=this.x,_e=this.y,tt=this.z,nt=Math.sqrt(_*_+_e*_e+tt*tt);if(nt>0){const it=1/nt;this.x*=it,this.y*=it,this.z*=it}else this.x=0,this.y=0,this.z=0;return nt}unit(_){_===void 0&&(_=new Vec3);const _e=this.x,tt=this.y,nt=this.z;let it=Math.sqrt(_e*_e+tt*tt+nt*nt);return it>0?(it=1/it,_.x=_e*it,_.y=tt*it,_.z=nt*it):(_.x=1,_.y=0,_.z=0),_}length(){const _=this.x,_e=this.y,tt=this.z;return Math.sqrt(_*_+_e*_e+tt*tt)}lengthSquared(){return this.dot(this)}distanceTo(_){const _e=this.x,tt=this.y,nt=this.z,it=_.x,rt=_.y,st=_.z;return Math.sqrt((it-_e)*(it-_e)+(rt-tt)*(rt-tt)+(st-nt)*(st-nt))}distanceSquared(_){const _e=this.x,tt=this.y,nt=this.z,it=_.x,rt=_.y,st=_.z;return(it-_e)*(it-_e)+(rt-tt)*(rt-tt)+(st-nt)*(st-nt)}scale(_,_e){_e===void 0&&(_e=new Vec3);const tt=this.x,nt=this.y,it=this.z;return _e.x=_*tt,_e.y=_*nt,_e.z=_*it,_e}vmul(_,_e){return _e===void 0&&(_e=new Vec3),_e.x=_.x*this.x,_e.y=_.y*this.y,_e.z=_.z*this.z,_e}addScaledVector(_,_e,tt){return tt===void 0&&(tt=new Vec3),tt.x=this.x+_*_e.x,tt.y=this.y+_*_e.y,tt.z=this.z+_*_e.z,tt}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(_){return _===void 0&&(_=new Vec3),_.x=-this.x,_.y=-this.y,_.z=-this.z,_}tangents(_,_e){const tt=this.length();if(tt>0){const nt=Vec3_tangents_n,it=1/tt;nt.set(this.x*it,this.y*it,this.z*it);const rt=Vec3_tangents_randVec;Math.abs(nt.x)<.9?(rt.set(1,0,0),nt.cross(rt,_)):(rt.set(0,1,0),nt.cross(rt,_)),nt.cross(_,_e)}else _.set(1,0,0),_e.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}lerp(_,_e,tt){const nt=this.x,it=this.y,rt=this.z;tt.x=nt+(_.x-nt)*_e,tt.y=it+(_.y-it)*_e,tt.z=rt+(_.z-rt)*_e}almostEquals(_,_e){return _e===void 0&&(_e=1e-6),!(Math.abs(this.x-_.x)>_e||Math.abs(this.y-_.y)>_e||Math.abs(this.z-_.z)>_e)}almostZero(_){return _===void 0&&(_=1e-6),!(Math.abs(this.x)>_||Math.abs(this.y)>_||Math.abs(this.z)>_)}isAntiparallelTo(_,_e){return this.negate(antip_neg),antip_neg.almostEquals(_,_e)}clone(){return new Vec3(this.x,this.y,this.z)}}Vec3.ZERO=new Vec3(0,0,0);Vec3.UNIT_X=new Vec3(1,0,0);Vec3.UNIT_Y=new Vec3(0,1,0);Vec3.UNIT_Z=new Vec3(0,0,1);const Vec3_tangents_n=new Vec3,Vec3_tangents_randVec=new Vec3,antip_neg=new Vec3;class AABB{constructor(_){_===void 0&&(_={}),this.lowerBound=new Vec3,this.upperBound=new Vec3,_.lowerBound&&this.lowerBound.copy(_.lowerBound),_.upperBound&&this.upperBound.copy(_.upperBound)}setFromPoints(_,_e,tt,nt){const it=this.lowerBound,rt=this.upperBound,st=tt;it.copy(_[0]),st&&st.vmult(it,it),rt.copy(it);for(let ot=1;ot<_.length;ot++){let at=_[ot];st&&(st.vmult(at,tmp$1),at=tmp$1),at.x>rt.x&&(rt.x=at.x),at.x<it.x&&(it.x=at.x),at.y>rt.y&&(rt.y=at.y),at.y<it.y&&(it.y=at.y),at.z>rt.z&&(rt.z=at.z),at.z<it.z&&(it.z=at.z)}return _e&&(_e.vadd(it,it),_e.vadd(rt,rt)),nt&&(it.x-=nt,it.y-=nt,it.z-=nt,rt.x+=nt,rt.y+=nt,rt.z+=nt),this}copy(_){return this.lowerBound.copy(_.lowerBound),this.upperBound.copy(_.upperBound),this}clone(){return new AABB().copy(this)}extend(_){this.lowerBound.x=Math.min(this.lowerBound.x,_.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,_.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,_.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,_.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,_.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,_.upperBound.z)}overlaps(_){const _e=this.lowerBound,tt=this.upperBound,nt=_.lowerBound,it=_.upperBound,rt=nt.x<=tt.x&&tt.x<=it.x||_e.x<=it.x&&it.x<=tt.x,st=nt.y<=tt.y&&tt.y<=it.y||_e.y<=it.y&&it.y<=tt.y,ot=nt.z<=tt.z&&tt.z<=it.z||_e.z<=it.z&&it.z<=tt.z;return rt&&st&&ot}volume(){const _=this.lowerBound,_e=this.upperBound;return(_e.x-_.x)*(_e.y-_.y)*(_e.z-_.z)}contains(_){const _e=this.lowerBound,tt=this.upperBound,nt=_.lowerBound,it=_.upperBound;return _e.x<=nt.x&&tt.x>=it.x&&_e.y<=nt.y&&tt.y>=it.y&&_e.z<=nt.z&&tt.z>=it.z}getCorners(_,_e,tt,nt,it,rt,st,ot){const at=this.lowerBound,At=this.upperBound;_.copy(at),_e.set(At.x,at.y,at.z),tt.set(At.x,At.y,at.z),nt.set(at.x,At.y,At.z),it.set(At.x,at.y,At.z),rt.set(at.x,At.y,at.z),st.set(at.x,at.y,At.z),ot.copy(At)}toLocalFrame(_,_e){const tt=transformIntoFrame_corners,nt=tt[0],it=tt[1],rt=tt[2],st=tt[3],ot=tt[4],at=tt[5],At=tt[6],lt=tt[7];this.getCorners(nt,it,rt,st,ot,at,At,lt);for(let gt=0;gt!==8;gt++){const ct=tt[gt];_.pointToLocal(ct,ct)}return _e.setFromPoints(tt)}toWorldFrame(_,_e){const tt=transformIntoFrame_corners,nt=tt[0],it=tt[1],rt=tt[2],st=tt[3],ot=tt[4],at=tt[5],At=tt[6],lt=tt[7];this.getCorners(nt,it,rt,st,ot,at,At,lt);for(let gt=0;gt!==8;gt++){const ct=tt[gt];_.pointToWorld(ct,ct)}return _e.setFromPoints(tt)}overlapsRay(_){const{direction:_e,from:tt}=_,nt=1/_e.x,it=1/_e.y,rt=1/_e.z,st=(this.lowerBound.x-tt.x)*nt,ot=(this.upperBound.x-tt.x)*nt,at=(this.lowerBound.y-tt.y)*it,At=(this.upperBound.y-tt.y)*it,lt=(this.lowerBound.z-tt.z)*rt,gt=(this.upperBound.z-tt.z)*rt,ct=Math.max(Math.max(Math.min(st,ot),Math.min(at,At)),Math.min(lt,gt)),dt=Math.min(Math.min(Math.max(st,ot),Math.max(at,At)),Math.max(lt,gt));return!(dt<0||ct>dt)}}const tmp$1=new Vec3,transformIntoFrame_corners=[new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3];class Quaternion{constructor(_,_e,tt,nt){_===void 0&&(_=0),_e===void 0&&(_e=0),tt===void 0&&(tt=0),nt===void 0&&(nt=1),this.x=_,this.y=_e,this.z=tt,this.w=nt}set(_,_e,tt,nt){return this.x=_,this.y=_e,this.z=tt,this.w=nt,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(_,_e){const tt=Math.sin(_e*.5);return this.x=_.x*tt,this.y=_.y*tt,this.z=_.z*tt,this.w=Math.cos(_e*.5),this}toAxisAngle(_){_===void 0&&(_=new Vec3),this.normalize();const _e=2*Math.acos(this.w),tt=Math.sqrt(1-this.w*this.w);return tt<.001?(_.x=this.x,_.y=this.y,_.z=this.z):(_.x=this.x/tt,_.y=this.y/tt,_.z=this.z/tt),[_,_e]}setFromVectors(_,_e){if(_.isAntiparallelTo(_e)){const tt=sfv_t1,nt=sfv_t2;_.tangents(tt,nt),this.setFromAxisAngle(tt,Math.PI)}else{const tt=_.cross(_e);this.x=tt.x,this.y=tt.y,this.z=tt.z,this.w=Math.sqrt(_.length()**2*_e.length()**2)+_.dot(_e),this.normalize()}return this}mult(_,_e){_e===void 0&&(_e=new Quaternion);const tt=this.x,nt=this.y,it=this.z,rt=this.w,st=_.x,ot=_.y,at=_.z,At=_.w;return _e.x=tt*At+rt*st+nt*at-it*ot,_e.y=nt*At+rt*ot+it*st-tt*at,_e.z=it*At+rt*at+tt*ot-nt*st,_e.w=rt*At-tt*st-nt*ot-it*at,_e}inverse(_){_===void 0&&(_=new Quaternion);const _e=this.x,tt=this.y,nt=this.z,it=this.w;this.conjugate(_);const rt=1/(_e*_e+tt*tt+nt*nt+it*it);return _.x*=rt,_.y*=rt,_.z*=rt,_.w*=rt,_}conjugate(_){return _===void 0&&(_=new Quaternion),_.x=-this.x,_.y=-this.y,_.z=-this.z,_.w=this.w,_}normalize(){let _=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return _===0?(this.x=0,this.y=0,this.z=0,this.w=0):(_=1/_,this.x*=_,this.y*=_,this.z*=_,this.w*=_),this}normalizeFast(){const _=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return _===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=_,this.y*=_,this.z*=_,this.w*=_),this}vmult(_,_e){_e===void 0&&(_e=new Vec3);const tt=_.x,nt=_.y,it=_.z,rt=this.x,st=this.y,ot=this.z,at=this.w,At=at*tt+st*it-ot*nt,lt=at*nt+ot*tt-rt*it,gt=at*it+rt*nt-st*tt,ct=-rt*tt-st*nt-ot*it;return _e.x=At*at+ct*-rt+lt*-ot-gt*-st,_e.y=lt*at+ct*-st+gt*-rt-At*-ot,_e.z=gt*at+ct*-ot+At*-st-lt*-rt,_e}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w,this}toEuler(_,_e){_e===void 0&&(_e="YZX");let tt,nt,it;const rt=this.x,st=this.y,ot=this.z,at=this.w;switch(_e){case"YZX":const At=rt*st+ot*at;if(At>.499&&(tt=2*Math.atan2(rt,at),nt=Math.PI/2,it=0),At<-.499&&(tt=-2*Math.atan2(rt,at),nt=-Math.PI/2,it=0),tt===void 0){const lt=rt*rt,gt=st*st,ct=ot*ot;tt=Math.atan2(2*st*at-2*rt*ot,1-2*gt-2*ct),nt=Math.asin(2*At),it=Math.atan2(2*rt*at-2*st*ot,1-2*lt-2*ct)}break;default:throw new Error(`Euler order ${_e} not supported yet.`)}_.y=tt,_.z=nt,_.x=it}setFromEuler(_,_e,tt,nt){nt===void 0&&(nt="XYZ");const it=Math.cos(_/2),rt=Math.cos(_e/2),st=Math.cos(tt/2),ot=Math.sin(_/2),at=Math.sin(_e/2),At=Math.sin(tt/2);return nt==="XYZ"?(this.x=ot*rt*st+it*at*At,this.y=it*at*st-ot*rt*At,this.z=it*rt*At+ot*at*st,this.w=it*rt*st-ot*at*At):nt==="YXZ"?(this.x=ot*rt*st+it*at*At,this.y=it*at*st-ot*rt*At,this.z=it*rt*At-ot*at*st,this.w=it*rt*st+ot*at*At):nt==="ZXY"?(this.x=ot*rt*st-it*at*At,this.y=it*at*st+ot*rt*At,this.z=it*rt*At+ot*at*st,this.w=it*rt*st-ot*at*At):nt==="ZYX"?(this.x=ot*rt*st-it*at*At,this.y=it*at*st+ot*rt*At,this.z=it*rt*At-ot*at*st,this.w=it*rt*st+ot*at*At):nt==="YZX"?(this.x=ot*rt*st+it*at*At,this.y=it*at*st+ot*rt*At,this.z=it*rt*At-ot*at*st,this.w=it*rt*st-ot*at*At):nt==="XZY"&&(this.x=ot*rt*st-it*at*At,this.y=it*at*st-ot*rt*At,this.z=it*rt*At+ot*at*st,this.w=it*rt*st+ot*at*At),this}clone(){return new Quaternion(this.x,this.y,this.z,this.w)}slerp(_,_e,tt){tt===void 0&&(tt=new Quaternion);const nt=this.x,it=this.y,rt=this.z,st=this.w;let ot=_.x,at=_.y,At=_.z,lt=_.w,gt,ct,dt,ht,mt;return ct=nt*ot+it*at+rt*At+st*lt,ct<0&&(ct=-ct,ot=-ot,at=-at,At=-At,lt=-lt),1-ct>1e-6?(gt=Math.acos(ct),dt=Math.sin(gt),ht=Math.sin((1-_e)*gt)/dt,mt=Math.sin(_e*gt)/dt):(ht=1-_e,mt=_e),tt.x=ht*nt+mt*ot,tt.y=ht*it+mt*at,tt.z=ht*rt+mt*At,tt.w=ht*st+mt*lt,tt}integrate(_,_e,tt,nt){nt===void 0&&(nt=new Quaternion);const it=_.x*tt.x,rt=_.y*tt.y,st=_.z*tt.z,ot=this.x,at=this.y,At=this.z,lt=this.w,gt=_e*.5;return nt.x+=gt*(it*lt+rt*At-st*at),nt.y+=gt*(rt*lt+st*ot-it*At),nt.z+=gt*(st*lt+it*at-rt*ot),nt.w+=gt*(-it*ot-rt*at-st*At),nt}}const sfv_t1=new Vec3,sfv_t2=new Vec3,SHAPE_TYPES={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class Shape{constructor(_){_===void 0&&(_={}),this.id=Shape.idCounter++,this.type=_.type||0,this.boundingSphereRadius=0,this.collisionResponse=_.collisionResponse?_.collisionResponse:!0,this.collisionFilterGroup=_.collisionFilterGroup!==void 0?_.collisionFilterGroup:1,this.collisionFilterMask=_.collisionFilterMask!==void 0?_.collisionFilterMask:-1,this.material=_.material?_.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(_,_e){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(_,_e,tt,nt){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}Shape.idCounter=0;Shape.types=SHAPE_TYPES;class Transform{constructor(_){_===void 0&&(_={}),this.position=new Vec3,this.quaternion=new Quaternion,_.position&&this.position.copy(_.position),_.quaternion&&this.quaternion.copy(_.quaternion)}pointToLocal(_,_e){return Transform.pointToLocalFrame(this.position,this.quaternion,_,_e)}pointToWorld(_,_e){return Transform.pointToWorldFrame(this.position,this.quaternion,_,_e)}vectorToWorldFrame(_,_e){return _e===void 0&&(_e=new Vec3),this.quaternion.vmult(_,_e),_e}static pointToLocalFrame(_,_e,tt,nt){return nt===void 0&&(nt=new Vec3),tt.vsub(_,nt),_e.conjugate(tmpQuat$1),tmpQuat$1.vmult(nt,nt),nt}static pointToWorldFrame(_,_e,tt,nt){return nt===void 0&&(nt=new Vec3),_e.vmult(tt,nt),nt.vadd(_,nt),nt}static vectorToWorldFrame(_,_e,tt){return tt===void 0&&(tt=new Vec3),_.vmult(_e,tt),tt}static vectorToLocalFrame(_,_e,tt,nt){return nt===void 0&&(nt=new Vec3),_e.w*=-1,_e.vmult(tt,nt),_e.w*=-1,nt}}const tmpQuat$1=new Quaternion;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3;new Vec3;new Quaternion;new AABB;new Mat3;new Mat3;new Mat3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Quaternion;new Vec3;new Vec3;new Vec3;new Vec3;class RaycastResult{constructor(){this.rayFromWorld=new Vec3,this.rayToWorld=new Vec3,this.hitNormalWorld=new Vec3,this.hitPointWorld=new Vec3,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(_,_e,tt,nt,it,rt,st){this.rayFromWorld.copy(_),this.rayToWorld.copy(_e),this.hitNormalWorld.copy(tt),this.hitPointWorld.copy(nt),this.shape=it,this.body=rt,this.distance=st}}let _Shape$types$SPHERE,_Shape$types$PLANE,_Shape$types$BOX,_Shape$types$CYLINDER,_Shape$types$CONVEXPO,_Shape$types$HEIGHTFI,_Shape$types$TRIMESH;const RAY_MODES={CLOSEST:1,ANY:2,ALL:4};_Shape$types$SPHERE=Shape.types.SPHERE;_Shape$types$PLANE=Shape.types.PLANE;_Shape$types$BOX=Shape.types.BOX;_Shape$types$CYLINDER=Shape.types.CYLINDER;_Shape$types$CONVEXPO=Shape.types.CONVEXPOLYHEDRON;_Shape$types$HEIGHTFI=Shape.types.HEIGHTFIELD;_Shape$types$TRIMESH=Shape.types.TRIMESH;class Ray{get[_Shape$types$SPHERE](){return this._intersectSphere}get[_Shape$types$PLANE](){return this._intersectPlane}get[_Shape$types$BOX](){return this._intersectBox}get[_Shape$types$CYLINDER](){return this._intersectConvex}get[_Shape$types$CONVEXPO](){return this._intersectConvex}get[_Shape$types$HEIGHTFI](){return this._intersectHeightfield}get[_Shape$types$TRIMESH](){return this._intersectTrimesh}constructor(_,_e){_===void 0&&(_=new Vec3),_e===void 0&&(_e=new Vec3),this.from=_.clone(),this.to=_e.clone(),this.direction=new Vec3,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Ray.ANY,this.result=new RaycastResult,this.hasHit=!1,this.callback=tt=>{}}intersectWorld(_,_e){return this.mode=_e.mode||Ray.ANY,this.result=_e.result||new RaycastResult,this.skipBackfaces=!!_e.skipBackfaces,this.collisionFilterMask=typeof _e.collisionFilterMask<"u"?_e.collisionFilterMask:-1,this.collisionFilterGroup=typeof _e.collisionFilterGroup<"u"?_e.collisionFilterGroup:-1,this.checkCollisionResponse=typeof _e.checkCollisionResponse<"u"?_e.checkCollisionResponse:!0,_e.from&&this.from.copy(_e.from),_e.to&&this.to.copy(_e.to),this.callback=_e.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(tmpAABB$1),tmpArray.length=0,_.broadphase.aabbQuery(_,tmpAABB$1,tmpArray),this.intersectBodies(tmpArray),this.hasHit}intersectBody(_,_e){_e&&(this.result=_e,this.updateDirection());const tt=this.checkCollisionResponse;if(tt&&!_.collisionResponse||!(this.collisionFilterGroup&_.collisionFilterMask)||!(_.collisionFilterGroup&this.collisionFilterMask))return;const nt=intersectBody_xi,it=intersectBody_qi;for(let rt=0,st=_.shapes.length;rt<st;rt++){const ot=_.shapes[rt];if(!(tt&&!ot.collisionResponse)&&(_.quaternion.mult(_.shapeOrientations[rt],it),_.quaternion.vmult(_.shapeOffsets[rt],nt),nt.vadd(_.position,nt),this.intersectShape(ot,it,nt,_),this.result.shouldStop))break}}intersectBodies(_,_e){_e&&(this.result=_e,this.updateDirection());for(let tt=0,nt=_.length;!this.result.shouldStop&&tt<nt;tt++)this.intersectBody(_[tt])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(_,_e,tt,nt){const it=this.from;if(distanceFromIntersection(it,this.direction,tt)>_.boundingSphereRadius)return;const st=this[_.type];st&&st.call(this,_,_e,tt,nt,_)}_intersectBox(_,_e,tt,nt,it){return this._intersectConvex(_.convexPolyhedronRepresentation,_e,tt,nt,it)}_intersectPlane(_,_e,tt,nt,it){const rt=this.from,st=this.to,ot=this.direction,at=new Vec3(0,0,1);_e.vmult(at,at);const At=new Vec3;rt.vsub(tt,At);const lt=At.dot(at);st.vsub(tt,At);const gt=At.dot(at);if(lt*gt>0||rt.distanceTo(st)<lt)return;const ct=at.dot(ot);if(Math.abs(ct)<this.precision)return;const dt=new Vec3,ht=new Vec3,mt=new Vec3;rt.vsub(tt,dt);const Ct=-at.dot(dt)/ct;ot.scale(Ct,ht),rt.vadd(ht,mt),this.reportIntersection(at,mt,it,nt,-1)}getAABB(_){const{lowerBound:_e,upperBound:tt}=_,nt=this.to,it=this.from;_e.x=Math.min(nt.x,it.x),_e.y=Math.min(nt.y,it.y),_e.z=Math.min(nt.z,it.z),tt.x=Math.max(nt.x,it.x),tt.y=Math.max(nt.y,it.y),tt.z=Math.max(nt.z,it.z)}_intersectHeightfield(_,_e,tt,nt,it){_.data,_.elementSize;const rt=intersectHeightfield_localRay;rt.from.copy(this.from),rt.to.copy(this.to),Transform.pointToLocalFrame(tt,_e,rt.from,rt.from),Transform.pointToLocalFrame(tt,_e,rt.to,rt.to),rt.updateDirection();const st=intersectHeightfield_index;let ot,at,At,lt;ot=at=0,At=lt=_.data.length-1;const gt=new AABB;rt.getAABB(gt),_.getIndexOfPosition(gt.lowerBound.x,gt.lowerBound.y,st,!0),ot=Math.max(ot,st[0]),at=Math.max(at,st[1]),_.getIndexOfPosition(gt.upperBound.x,gt.upperBound.y,st,!0),At=Math.min(At,st[0]+1),lt=Math.min(lt,st[1]+1);for(let ct=ot;ct<At;ct++)for(let dt=at;dt<lt;dt++){if(this.result.shouldStop)return;if(_.getAabbAtIndex(ct,dt,gt),!!gt.overlapsRay(rt)){if(_.getConvexTrianglePillar(ct,dt,!1),Transform.pointToWorldFrame(tt,_e,_.pillarOffset,worldPillarOffset),this._intersectConvex(_.pillarConvex,_e,worldPillarOffset,nt,it,intersectConvexOptions),this.result.shouldStop)return;_.getConvexTrianglePillar(ct,dt,!0),Transform.pointToWorldFrame(tt,_e,_.pillarOffset,worldPillarOffset),this._intersectConvex(_.pillarConvex,_e,worldPillarOffset,nt,it,intersectConvexOptions)}}}_intersectSphere(_,_e,tt,nt,it){const rt=this.from,st=this.to,ot=_.radius,at=(st.x-rt.x)**2+(st.y-rt.y)**2+(st.z-rt.z)**2,At=2*((st.x-rt.x)*(rt.x-tt.x)+(st.y-rt.y)*(rt.y-tt.y)+(st.z-rt.z)*(rt.z-tt.z)),lt=(rt.x-tt.x)**2+(rt.y-tt.y)**2+(rt.z-tt.z)**2-ot**2,gt=At**2-4*at*lt,ct=Ray_intersectSphere_intersectionPoint,dt=Ray_intersectSphere_normal;if(!(gt<0))if(gt===0)rt.lerp(st,gt,ct),ct.vsub(tt,dt),dt.normalize(),this.reportIntersection(dt,ct,it,nt,-1);else{const ht=(-At-Math.sqrt(gt))/(2*at),mt=(-At+Math.sqrt(gt))/(2*at);if(ht>=0&&ht<=1&&(rt.lerp(st,ht,ct),ct.vsub(tt,dt),dt.normalize(),this.reportIntersection(dt,ct,it,nt,-1)),this.result.shouldStop)return;mt>=0&&mt<=1&&(rt.lerp(st,mt,ct),ct.vsub(tt,dt),dt.normalize(),this.reportIntersection(dt,ct,it,nt,-1))}}_intersectConvex(_,_e,tt,nt,it,rt){const st=intersectConvex_normal,ot=intersectConvex_vector,at=rt&&rt.faceList||null,At=_.faces,lt=_.vertices,gt=_.faceNormals,ct=this.direction,dt=this.from,ht=this.to,mt=dt.distanceTo(ht),Ct=at?at.length:At.length,ft=this.result;for(let pt=0;!ft.shouldStop&&pt<Ct;pt++){const Vt=at?at[pt]:pt,yt=At[Vt],Gt=gt[Vt],Bt=_e,vt=tt;ot.copy(lt[yt[0]]),Bt.vmult(ot,ot),ot.vadd(vt,ot),ot.vsub(dt,ot),Bt.vmult(Gt,st);const wt=ct.dot(st);if(Math.abs(wt)<this.precision)continue;const Mt=st.dot(ot)/wt;if(!(Mt<0)){ct.scale(Mt,intersectPoint),intersectPoint.vadd(dt,intersectPoint),a.copy(lt[yt[0]]),Bt.vmult(a,a),vt.vadd(a,a);for(let kt=1;!ft.shouldStop&&kt<yt.length-1;kt++){b.copy(lt[yt[kt]]),c.copy(lt[yt[kt+1]]),Bt.vmult(b,b),Bt.vmult(c,c),vt.vadd(b,b),vt.vadd(c,c);const Nt=intersectPoint.distanceTo(dt);!(Ray.pointInTriangle(intersectPoint,a,b,c)||Ray.pointInTriangle(intersectPoint,b,a,c))||Nt>mt||this.reportIntersection(st,intersectPoint,it,nt,Vt)}}}}_intersectTrimesh(_,_e,tt,nt,it,rt){const st=intersectTrimesh_normal,ot=intersectTrimesh_triangles,at=intersectTrimesh_treeTransform,At=intersectConvex_vector,lt=intersectTrimesh_localDirection,gt=intersectTrimesh_localFrom,ct=intersectTrimesh_localTo,dt=intersectTrimesh_worldIntersectPoint,ht=intersectTrimesh_worldNormal,mt=_.indices;_.vertices;const Ct=this.from,ft=this.to,pt=this.direction;at.position.copy(tt),at.quaternion.copy(_e),Transform.vectorToLocalFrame(tt,_e,pt,lt),Transform.pointToLocalFrame(tt,_e,Ct,gt),Transform.pointToLocalFrame(tt,_e,ft,ct),ct.x*=_.scale.x,ct.y*=_.scale.y,ct.z*=_.scale.z,gt.x*=_.scale.x,gt.y*=_.scale.y,gt.z*=_.scale.z,ct.vsub(gt,lt),lt.normalize();const Vt=gt.distanceSquared(ct);_.tree.rayQuery(this,at,ot);for(let yt=0,Gt=ot.length;!this.result.shouldStop&&yt!==Gt;yt++){const Bt=ot[yt];_.getNormal(Bt,st),_.getVertex(mt[Bt*3],a),a.vsub(gt,At);const vt=lt.dot(st),wt=st.dot(At)/vt;if(wt<0)continue;lt.scale(wt,intersectPoint),intersectPoint.vadd(gt,intersectPoint),_.getVertex(mt[Bt*3+1],b),_.getVertex(mt[Bt*3+2],c);const Mt=intersectPoint.distanceSquared(gt);!(Ray.pointInTriangle(intersectPoint,b,a,c)||Ray.pointInTriangle(intersectPoint,a,b,c))||Mt>Vt||(Transform.vectorToWorldFrame(_e,st,ht),Transform.pointToWorldFrame(tt,_e,intersectPoint,dt),this.reportIntersection(ht,dt,it,nt,Bt))}ot.length=0}reportIntersection(_,_e,tt,nt,it){const rt=this.from,st=this.to,ot=rt.distanceTo(_e),at=this.result;if(!(this.skipBackfaces&&_.dot(this.direction)>0))switch(at.hitFaceIndex=typeof it<"u"?it:-1,this.mode){case Ray.ALL:this.hasHit=!0,at.set(rt,st,_,_e,tt,nt,ot),at.hasHit=!0,this.callback(at);break;case Ray.CLOSEST:(ot<at.distance||!at.hasHit)&&(this.hasHit=!0,at.hasHit=!0,at.set(rt,st,_,_e,tt,nt,ot));break;case Ray.ANY:this.hasHit=!0,at.hasHit=!0,at.set(rt,st,_,_e,tt,nt,ot),at.shouldStop=!0;break}}static pointInTriangle(_,_e,tt,nt){nt.vsub(_e,v0),tt.vsub(_e,v1),_.vsub(_e,v2);const it=v0.dot(v0),rt=v0.dot(v1),st=v0.dot(v2),ot=v1.dot(v1),at=v1.dot(v2);let At,lt;return(At=ot*st-rt*at)>=0&&(lt=it*at-rt*st)>=0&&At+lt<it*ot-rt*rt}}Ray.CLOSEST=RAY_MODES.CLOSEST;Ray.ANY=RAY_MODES.ANY;Ray.ALL=RAY_MODES.ALL;const tmpAABB$1=new AABB,tmpArray=[],v1=new Vec3,v2=new Vec3,intersectBody_xi=new Vec3,intersectBody_qi=new Quaternion,intersectPoint=new Vec3,a=new Vec3,b=new Vec3,c=new Vec3;new Vec3;new RaycastResult;const intersectConvexOptions={faceList:[0]},worldPillarOffset=new Vec3,intersectHeightfield_localRay=new Ray,intersectHeightfield_index=[],Ray_intersectSphere_intersectionPoint=new Vec3,Ray_intersectSphere_normal=new Vec3,intersectConvex_normal=new Vec3;new Vec3;new Vec3;const intersectConvex_vector=new Vec3,intersectTrimesh_normal=new Vec3,intersectTrimesh_localDirection=new Vec3,intersectTrimesh_localFrom=new Vec3,intersectTrimesh_localTo=new Vec3,intersectTrimesh_worldNormal=new Vec3,intersectTrimesh_worldIntersectPoint=new Vec3;new AABB;const intersectTrimesh_triangles=[],intersectTrimesh_treeTransform=new Transform,v0=new Vec3,intersect=new Vec3;function distanceFromIntersection(et,_,_e){_e.vsub(et,v0);const tt=v0.dot(_);return _.scale(tt,intersect),intersect.vadd(et,intersect),_e.distanceTo(intersect)}new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Ray;new Vec3;new Vec3;new Vec3;new Vec3(1,0,0),new Vec3(0,1,0),new Vec3(0,0,1);new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new AABB;new Vec3;new AABB;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new AABB;new Vec3;new Transform;new AABB;Shape.types.SPHERE,Shape.types.SPHERE|Shape.types.PLANE,Shape.types.BOX|Shape.types.BOX,Shape.types.SPHERE|Shape.types.BOX,Shape.types.PLANE|Shape.types.BOX,Shape.types.CONVEXPOLYHEDRON,Shape.types.SPHERE|Shape.types.CONVEXPOLYHEDRON,Shape.types.PLANE|Shape.types.CONVEXPOLYHEDRON,Shape.types.BOX|Shape.types.CONVEXPOLYHEDRON,Shape.types.SPHERE|Shape.types.HEIGHTFIELD,Shape.types.BOX|Shape.types.HEIGHTFIELD,Shape.types.CONVEXPOLYHEDRON|Shape.types.HEIGHTFIELD,Shape.types.PARTICLE|Shape.types.SPHERE,Shape.types.PLANE|Shape.types.PARTICLE,Shape.types.BOX|Shape.types.PARTICLE,Shape.types.PARTICLE|Shape.types.CONVEXPOLYHEDRON,Shape.types.CYLINDER,Shape.types.SPHERE|Shape.types.CYLINDER,Shape.types.PLANE|Shape.types.CYLINDER,Shape.types.BOX|Shape.types.CYLINDER,Shape.types.CONVEXPOLYHEDRON|Shape.types.CYLINDER,Shape.types.HEIGHTFIELD|Shape.types.CYLINDER,Shape.types.PARTICLE|Shape.types.CYLINDER,Shape.types.SPHERE|Shape.types.TRIMESH,Shape.types.PLANE|Shape.types.TRIMESH;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Quaternion;new Quaternion;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new AABB;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3,new Vec3,new Vec3,new Vec3,new Vec3,new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Quaternion;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new Vec3;new AABB;new Ray;const performance$2=globalThis.performance||{};if(!performance$2.now){let et=Date.now();performance$2.timing&&performance$2.timing.navigationStart&&(et=performance$2.timing.navigationStart),performance$2.now=()=>Date.now()-et}new Vec3;const debugContext=reactExports.createContext(null),useDebugContext=()=>reactExports.useContext(debugContext),physicsContext=reactExports.createContext(null),usePhysicsContext=()=>{const et=reactExports.useContext(physicsContext);if(!et)throw new Error("Physics context not found. @react-three/cannon & components can only be used within a Physics provider");return et};new Vector3(1,1,1);new Vector3;new Matrix4;const temp=new Object3D;function useForwardedRef(et){const _=reactExports.useRef(null);return et&&typeof et!="function"?et:_}function capitalize(et){return et.charAt(0).toUpperCase()+et.slice(1)}function getUUID(et,_){const _e=_===void 0?"":`/${_}`;return typeof et=="function"?null:et&&et.current&&`${et.current.uuid}${_e}`}const e=new Euler,q$1=new Quaternion$2,quaternionToRotation=et=>_=>et(e.setFromQuaternion(q$1.fromArray(_)).toArray());let incrementingId=0;function subscribe(et,_,_e,tt,nt,it){return it===void 0&&(it="bodies"),rt=>{const st=incrementingId++;_e[st]={[tt]:rt};const ot=getUUID(et,nt);return ot&&_.subscribe({props:{id:st,target:it,type:tt},uuid:ot}),()=>{delete _e[st],_.unsubscribe({props:st})}}}function prepare(et,_){let{position:_e=[0,0,0],rotation:tt=[0,0,0],userData:nt={}}=_;et.userData=nt,et.position.set(..._e),et.rotation.set(...tt),et.updateMatrix()}function setupCollision(et,_,_e){let{onCollide:tt,onCollideBegin:nt,onCollideEnd:it}=_;et[_e]={collide:tt,collideBegin:nt,collideEnd:it}}function useBody(et,_,_e,tt,nt){tt===void 0&&(tt=null),nt===void 0&&(nt=[]);const it=useForwardedRef(tt),{events:rt,refs:st,scaleOverrides:ot,subscriptions:at,worker:At}=usePhysicsContext(),lt=useDebugContext();reactExports.useLayoutEffect(()=>{it.current||(it.current=new Object3D);const ct=it.current,dt=At,ht=ct instanceof InstancedMesh?(ct.instanceMatrix.setUsage(DynamicDrawUsage),ct.count):1,mt=ct instanceof InstancedMesh?new Array(ht).fill(0).map((ft,pt)=>`${ct.uuid}/${pt}`):[ct.uuid],Ct=ct instanceof InstancedMesh?mt.map((ft,pt)=>{const Vt=_(pt);return prepare(temp,Vt),ct.setMatrixAt(pt,temp.matrix),ct.instanceMatrix.needsUpdate=!0,st[ft]=ct,lt==null||lt.add(ft,Vt,et),setupCollision(rt,Vt,ft),{...Vt,args:_e(Vt.args)}}):mt.map((ft,pt)=>{const Vt=_(pt);return prepare(ct,Vt),st[ft]=ct,lt==null||lt.add(ft,Vt,et),setupCollision(rt,Vt,ft),{...Vt,args:_e(Vt.args)}});return dt.addBodies({props:Ct.map(ft=>{let{onCollide:pt,onCollideBegin:Vt,onCollideEnd:yt,...Gt}=ft;return{onCollide:!!pt,...Gt}}),type:et,uuid:mt}),()=>{mt.forEach(ft=>{delete st[ft],lt==null||lt.remove(ft),delete rt[ft]}),dt.removeBodies({uuid:mt})}},nt);const gt=reactExports.useMemo(()=>{const ct=(pt,Vt)=>{const yt=`set${capitalize(pt)}`;return{set:Gt=>{const Bt=getUUID(it,Vt);Bt&&At[yt]({props:Gt,uuid:Bt})},subscribe:subscribe(it,At,at,pt,Vt)}},dt=pt=>({copy:yt=>{let{w:Gt,x:Bt,y:vt,z:wt}=yt;const Mt=getUUID(it,pt);Mt&&At.setQuaternion({props:[Bt,vt,wt,Gt],uuid:Mt})},set:(yt,Gt,Bt,vt)=>{const wt=getUUID(it,pt);wt&&At.setQuaternion({props:[yt,Gt,Bt,vt],uuid:wt})},subscribe:subscribe(it,At,at,"quaternion",pt)}),ht=pt=>({copy:Vt=>{let{x:yt,y:Gt,z:Bt}=Vt;const vt=getUUID(it,pt);vt&&At.setRotation({props:[yt,Gt,Bt],uuid:vt})},set:(Vt,yt,Gt)=>{const Bt=getUUID(it,pt);Bt&&At.setRotation({props:[Vt,yt,Gt],uuid:Bt})},subscribe:Vt=>{const yt=incrementingId++,Gt="bodies",Bt="quaternion",vt=getUUID(it,pt);return at[yt]={[Bt]:quaternionToRotation(Vt)},vt&&At.subscribe({props:{id:yt,target:Gt,type:Bt},uuid:vt}),()=>{delete at[yt],At.unsubscribe({props:yt})}}}),mt=(pt,Vt)=>{const yt=`set${capitalize(pt)}`;return{copy:Gt=>{let{x:Bt,y:vt,z:wt}=Gt;const Mt=getUUID(it,Vt);Mt&&At[yt]({props:[Bt,vt,wt],uuid:Mt})},set:(Gt,Bt,vt)=>{const wt=getUUID(it,Vt);wt&&At[yt]({props:[Gt,Bt,vt],uuid:wt})},subscribe:subscribe(it,At,at,pt,Vt)}};function Ct(pt){return{allowSleep:ct("allowSleep",pt),angularDamping:ct("angularDamping",pt),angularFactor:mt("angularFactor",pt),angularVelocity:mt("angularVelocity",pt),applyForce(Vt,yt){const Gt=getUUID(it,pt);Gt&&At.applyForce({props:[Vt,yt],uuid:Gt})},applyImpulse(Vt,yt){const Gt=getUUID(it,pt);Gt&&At.applyImpulse({props:[Vt,yt],uuid:Gt})},applyLocalForce(Vt,yt){const Gt=getUUID(it,pt);Gt&&At.applyLocalForce({props:[Vt,yt],uuid:Gt})},applyLocalImpulse(Vt,yt){const Gt=getUUID(it,pt);Gt&&At.applyLocalImpulse({props:[Vt,yt],uuid:Gt})},applyTorque(Vt){const yt=getUUID(it,pt);yt&&At.applyTorque({props:[Vt],uuid:yt})},collisionFilterGroup:ct("collisionFilterGroup",pt),collisionFilterMask:ct("collisionFilterMask",pt),collisionResponse:ct("collisionResponse",pt),fixedRotation:ct("fixedRotation",pt),isTrigger:ct("isTrigger",pt),linearDamping:ct("linearDamping",pt),linearFactor:mt("linearFactor",pt),mass:ct("mass",pt),material:ct("material",pt),position:mt("position",pt),quaternion:dt(pt),rotation:ht(pt),scaleOverride(Vt){const yt=getUUID(it,pt);yt&&(ot[yt]=new Vector3(...Vt))},sleep(){const Vt=getUUID(it,pt);Vt&&At.sleep({uuid:Vt})},sleepSpeedLimit:ct("sleepSpeedLimit",pt),sleepTimeLimit:ct("sleepTimeLimit",pt),userData:ct("userData",pt),velocity:mt("velocity",pt),wakeUp(){const Vt=getUUID(it,pt);Vt&&At.wakeUp({uuid:Vt})}}}const ft={};return{...Ct(void 0),at:pt=>ft[pt]||(ft[pt]=Ct(pt))}},[]);return[it,gt]}function usePlane(et,_,_e){return useBody("Plane",et,()=>[],_,_e)}function useBox(et,_,_e){const tt=[1,1,1];return useBody("Box",et,function(nt){return nt===void 0&&(nt=tt),nt},_,_e)}function useCompoundBody(et,_,_e){return useBody("Compound",et,tt=>tt,_,_e)}function isString(et){return typeof et=="string"}function useRaycastVehicle(et,_,_e){_===void 0&&(_=null),_e===void 0&&(_e=[]);const tt=useForwardedRef(_),{worker:nt,subscriptions:it}=usePhysicsContext();reactExports.useLayoutEffect(()=>{tt.current||(tt.current=new Object3D);const st=nt,ot=tt.current.uuid,{chassisBody:at,indexForwardAxis:At=2,indexRightAxis:lt=0,indexUpAxis:gt=1,wheelInfos:ct,wheels:dt}=et(),ht=getUUID(at),mt=dt.map(Ct=>getUUID(Ct));if(!(!ht||!mt.every(isString)))return st.addRaycastVehicle({props:[ht,mt,ct,At,lt,gt],uuid:ot}),()=>{st.removeRaycastVehicle({uuid:ot})}},_e);const rt=reactExports.useMemo(()=>({applyEngineForce(st,ot){const at=getUUID(tt);at&&nt.applyRaycastVehicleEngineForce({props:[st,ot],uuid:at})},setBrake(st,ot){const at=getUUID(tt);at&&nt.setRaycastVehicleBrake({props:[st,ot],uuid:at})},setSteeringValue(st,ot){const at=getUUID(tt);at&&nt.setRaycastVehicleSteeringValue({props:[st,ot],uuid:at})},sliding:{subscribe:subscribe(tt,nt,it,"sliding",void 0,"vehicles")}}),_e);return[tt,rt]}const v$1=new Vector3,s=new Vector3(1,1,1),q=new Quaternion$2,m=new Matrix4;function apply(et,_,_e,tt,nt){return tt===void 0&&(tt=s),et!==void 0?(m.compose(v$1.fromArray(_,et*3),q.fromArray(_e,et*4),tt),nt&&(nt.matrixAutoUpdate=!1,nt.matrix.copy(m)),m):m.identity()}const unique=()=>{const et=[];return _=>et.includes(_)?!1:!!et.push(_)};function PhysicsProvider(et){let{allowSleep:_=!1,axisIndex:_e=0,broadphase:tt="Naive",children:nt,defaultContactMaterial:it={contactEquationStiffness:1e6},frictionGravity:rt=null,gravity:st=[0,-9.81,0],isPaused:ot=!1,iterations:at=5,maxSubSteps:At=10,quatNormalizeFast:lt=!1,quatNormalizeSkip:gt=0,shouldInvalidate:ct=!0,size:dt=1e3,solver:ht="GS",stepSize:mt=1/60,tolerance:Ct=.001}=et;const{invalidate:ft}=useThree(),[{bodies:pt,events:Vt,refs:yt,scaleOverrides:Gt,subscriptions:Bt,worker:vt}]=reactExports.useState(()=>({bodies:{},events:{},refs:{},scaleOverrides:{},subscriptions:{},worker:new CannonWorkerAPI({allowSleep:_,axisIndex:_e,broadphase:tt,defaultContactMaterial:it,frictionGravity:rt,gravity:st,iterations:at,quatNormalizeFast:lt,quatNormalizeSkip:gt,size:dt,solver:ht,tolerance:Ct})}));let wt=0;const Mt=reactExports.useCallback((Tt,St)=>{ot||(wt+=St,vt.step({maxSubSteps:At,stepSize:mt,timeSinceLastCalled:wt}),wt=0)},[ot,At,mt]),kt=Tt=>{var St;let{body:Zt,contact:{bi:Et,bj:Wt,...Ht},target:zt,...Pt}=Tt;const Ot=(St=Vt[zt])==null?void 0:St.collide;Ot&&Ot({body:yt[Zt],contact:{bi:yt[Et],bj:yt[Wt],...Ht},target:yt[zt],...Pt})},Nt=Tt=>{var St,Zt;let{bodyA:Et,bodyB:Wt}=Tt;const Ht=(St=Vt[Et])==null?void 0:St.collideBegin;Ht&&Ht({body:yt[Wt],op:"event",target:yt[Et],type:"collideBegin"});const zt=(Zt=Vt[Wt])==null?void 0:Zt.collideBegin;zt&&zt({body:yt[Et],op:"event",target:yt[Wt],type:"collideBegin"})},Yt=Tt=>{var St,Zt;let{bodyA:Et,bodyB:Wt}=Tt;const Ht=(St=Vt[Et])==null?void 0:St.collideEnd;Ht&&Ht({body:yt[Wt],op:"event",target:yt[Et],type:"collideEnd"});const zt=(Zt=Vt[Wt])==null?void 0:Zt.collideEnd;zt&&zt({body:yt[Et],op:"event",target:yt[Wt],type:"collideEnd"})},Lt=Tt=>{let{active:St,bodies:Zt=[],observations:Et,positions:Wt,quaternions:Ht}=Tt;for(let zt=0;zt<Zt.length;zt++)pt[Zt[zt]]=zt;if(Et.forEach(zt=>{let[Pt,Ot,Jt]=zt;const sn=(Bt[Pt]||{})[Jt];sn&&sn(Ot)}),!!St){for(const zt of Object.values(yt).filter(unique()))if(zt instanceof InstancedMesh)for(let Pt=0;Pt<zt.count;Pt++){const Ot=`${zt.uuid}/${Pt}`,Jt=pt[Ot];Jt!==void 0&&(zt.setMatrixAt(Pt,apply(Jt,Wt,Ht,Gt[Ot])),zt.instanceMatrix.needsUpdate=!0)}else{const Pt=Gt[zt.uuid]||zt.scale;apply(pt[zt.uuid],Wt,Ht,Pt,zt)}ct&&ft()}},Xt=Tt=>{var St;let{body:Zt,ray:{uuid:Et,...Wt},...Ht}=Tt;const zt=(St=Vt[Et])==null?void 0:St.rayhit;zt&&zt({body:Zt?yt[Zt]:null,ray:{uuid:Et,...Wt},...Ht})};useFrame(Mt),reactExports.useEffect(()=>(vt.connect(),vt.init(),vt.on("collide",kt),vt.on("collideBegin",Nt),vt.on("collideEnd",Yt),vt.on("frame",Lt),vt.on("rayhit",Xt),()=>{vt.terminate(),vt.removeAllListeners()}),[]),reactExports.useEffect(()=>{vt.axisIndex=_e},[_e]),reactExports.useEffect(()=>{vt.broadphase=tt},[tt]),reactExports.useEffect(()=>{vt.gravity=st},[st]),reactExports.useEffect(()=>{vt.iterations=at},[at]),reactExports.useEffect(()=>{vt.tolerance=Ct},[Ct]);const _t=reactExports.useMemo(()=>({bodies:pt,events:Vt,refs:yt,scaleOverrides:Gt,subscriptions:Bt,worker:vt}),[pt,Vt,yt,Bt,vt]);return jsx(physicsContext.Provider,{value:_t,children:nt})}const Wheels=(et,_,_e,tt,nt)=>{const it=[reactExports.useRef(null),reactExports.useRef(null),reactExports.useRef(null),reactExports.useRef(null)],rt={radius:tt,directionLocal:[0,-1,0],axleLocal:[-1,0,0],suspensionStiffness:50,suspensionRestLength:.5,frictionSlip:5,dampingRelaxation:2.5,dampingCompression:5,maxSuspensionForce:2e5,rollInfluence:.01,maxSuspensionTravel:.25,customSlidingRotationalSpeed:-5,useCustomSlidingRotationalSpeed:!0},st=[{...rt,chassisConnectionPointLocal:[-.7,.05,-_e+.65],isFrontWheel:!1},{...rt,chassisConnectionPointLocal:[.7,.05,-_e+.65],isFrontWheel:!1},{...rt,chassisConnectionPointLocal:[-.7,.05,_e-.65],isFrontWheel:!0},{...rt,chassisConnectionPointLocal:[.7,.05,_e-.65],isFrontWheel:!0}],ot=()=>({collisionFilterGroup:0,mass:1,shapes:[{args:[rt.radius,rt.radius,.3,32],rotation:[0,0,Math.PI/2],type:"Cylinder"}],type:"Kinematic"});return useCompoundBody(ot,it[0]),useCompoundBody(ot,it[1]),useCompoundBody(ot,it[2]),useCompoundBody(ot,it[3]),useFrame((at,At)=>{}),[it,st]},Wheel=({radius:et,wheelRef:_})=>jsx("group",{ref:_}),VehicleControls=(et,_,_e,tt,nt,it,rt,st)=>{const[ot,at]=reactExports.useState({}),[At,lt]=useKeyboardControls(),[gt,ct]=reactExports.useState(!1),dt=[[44,.49,-6],[-27,.49,-12],[3,.49,44]],ht=[[0,Math.PI,0],[0,Math.PI/2,0],[0,Math.PI/2,0]];var mt=0;return useFrame((Ct,ft)=>{if(!et||!_)return;const{forward:pt,backward:Vt,leftward:yt,rightward:Gt,brake:Bt,reset:vt}=lt();if(pt?(tt==0&&rt(!1),et.applyEngineForce(-nt/2,0),et.applyEngineForce(-nt/2,1),et.applyEngineForce(-nt,2),et.applyEngineForce(-nt,3)):Vt?(_e>20?mt=nt/10:mt=nt/2,tt==0&&rt(!0),et.applyEngineForce(mt/2,0),et.applyEngineForce(mt/2,1),et.applyEngineForce(mt,2),et.applyEngineForce(mt,3)):(et.applyEngineForce(0,0),et.applyEngineForce(0,1),et.applyEngineForce(0,2),et.applyEngineForce(0,3)),Bt&&!gt?(ct(!0),et.setBrake(it,0),et.setBrake(it,1),et.setBrake(it/2,2),et.setBrake(it/2,3)):!Bt&&gt&&(ct(!1),et.setBrake(0,0),et.setBrake(0,1),et.setBrake(0,2),et.setBrake(0,3)),yt)et.setSteeringValue(.4,2),et.setSteeringValue(.4,3);else if(Gt)et.setSteeringValue(-.4,2),et.setSteeringValue(-.4,3);else for(let wt=0;wt<4;wt++)et.setSteeringValue(0,wt);vt&&(_.position.set(...dt[st]),_.velocity.set(0,0,0),_.angularVelocity.set(0,0,0),_.rotation.set(...ht[st]))},[ot,et,_,st]),ot},Camera=reactExports.forwardRef((et,_)=>(useFrame(()=>{new Vector3().setFromMatrixPosition(_.current.matrixWorld)}),jsx(PerspectiveCamera,{makeDefault:!0,ref:_,fov:24,...et,resolution:2160})));function Vehicle({thirdPerson:et,checkpoint:_}){const _e=useThree(zt=>zt.camera),tt=reactExports.useRef(),nt=reactExports.useRef(),[it,rt]=reactExports.useState(0),[st,ot]=reactExports.useState(0),[at,At]=reactExports.useState(0),[lt,gt]=reactExports.useState(0),[ct,dt]=reactExports.useState(!1),[ht,mt]=reactExports.useState("N"),[Ct,ft]=reactExports.useState(0),pt=new Vector3,Vt=new DRACOLoader;Vt.setDecoderPath("/draco-gltf/");const Gt=useLoader(GLTFLoader,"./car.glb",zt=>{zt.setDRACOLoader(Vt)}).scene;Gt.traverse(zt=>{if(zt.isMesh){const Pt={roughness:1,metalness:0,emissive:"#fff",emissiveIntensity:1};zt.name==="Backlights"?(Pt.color="#ff4242",Pt.emissive="#000000",Pt.emissiveIntensity=1):zt.name==="Headlights"?Pt.color="yellow":(Pt.color="#ffffff",Pt.emissive="#ffffff",Pt.emissiveIntensity=.2),zt.material=new MeshStandardMaterial(Pt),zt.castShadow=!0,zt.receiveShadow=!0}});const Bt=[44,1,-6],vt=1.7,wt=1,Mt=1.85,kt=.25,Nt=[vt,wt,Mt*2],[Yt,Lt]=useBox(()=>({allowSleep:!1,args:Nt,mass:300,position:Bt,rotation:[0,Math.PI,0],userData:{name:"vehicle"}}),reactExports.useRef(null)),[Xt,_t]=Wheels(vt,wt,Mt,kt),[Tt,St]=useRaycastVehicle(()=>({chassisBody:Yt,indexForwardAxis:2,wheelInfos:_t,wheels:Xt}),reactExports.useRef(null));reactExports.useEffect(()=>{Gt.scale.set(1,1,1)},[Gt]),reactExports.useEffect(()=>{Lt.velocity.subscribe(zt=>{const Pt=Math.round(pt.set(...zt).length()*3.6);rt(Pt)})},[]);const Zt=[4e3,2400,1800,1600,1400,1200,0],Et=[10,15,20,25,30,35,0],Wt=[1,20,36,48,72,119,150];var Ht=0;return useFrame((zt,Pt)=>{if(!et)return;for(var Ot=0;Ot<Wt.length+1;Ot++)if(it<=Wt[Ot]){Ht=Ot;break}const Jt=Ht>=1&&Ht<=2?.5:.8,rn=Ht>=1&&Ht<=2?.5:.2,sn=Ht===0?Wt[Ht]:Wt[Ht]-Wt[Ht-1],Vn=Ht===0?it:it-Wt[Ht-1],dn=Vn/sn,gn=Jt+rn*dn,$t=Zt[Ht]*gn;ot(Ht),At($t),gt(Et[Ht]),mt(ct?"R":st===0?1:st===6?"5":st.toString()),ft(it===1?2.5:ct&&it>20||it>=120?100:Vn/sn*100);const tn=new Vector3(0,0,0);tn.setFromMatrixPosition(nt.current.matrixWorld),new Vector3(0,0,0).setFromMatrixPosition(_e.matrixWorld),_e.lookAt(tn)}),VehicleControls(St,Lt,it,st,at,lt,dt,_),jsxs(Fragment,{children:[jsxs("group",{ref:Tt,name:"vehicle",children:[jsxs("group",{ref:Yt,matrixWorldNeedsUpdate:!0,children:[jsx("primitive",{object:Gt,position:[0,-.7,-.1]}),jsx("object3D",{ref:nt,position:[0,2,0],children:jsx(Camera,{ref:tt,cameraRef:tt,position:[0,40,-40]})})]}),jsx(Wheel,{wheelRef:Xt[0],radius:kt}),jsx(Wheel,{wheelRef:Xt[1],radius:kt}),jsx(Wheel,{wheelRef:Xt[2],radius:kt}),jsx(Wheel,{wheelRef:Xt[3],radius:kt})]}),jsx(Html$1,{fullscreen:!0,className:"vehicle-stats-overlay",children:jsxs("div",{className:"vehicle-stats",children:[jsx("p",{className:"vehicle-transmission",children:ht}),jsx("div",{className:"vehicle-gear-stats",children:jsx("div",{className:"vehicle-speed-bar",style:{width:`${Ct}%`}})}),jsx("p",{className:"vehicle-speed",children:it})]})})]})}const physics=[[49.5,.5,2,90,56,1,1],[49.31269836,.5,-27.90215111,95.62499797,3.92,1,1],[48.57052231,.5,-31.63331795,106.8750025,3.92,1,1],[47.11470032,.5,-35.14799881,118.1249935,3.92,1,1],[45.0011673,.5,-38.31112671,129.3749981,3.92,1,1],[42.3111496,.5,-41,140.6250026,3.92,1,1],[39.14802551,.5,-43.11468506,151.8749936,3.92,1,1],[35.63335037,.5,-44.57052231,163.1249981,3.92,1,1],[31.90219116,.5,-45.31270981,174.3750027,3.92,1,1],[0,.5,-45.5,0,60,1,1],[-31.90209389,.5,-45.31279373,5.625000157,3.92,1,1],[-35.63330078,.5,-44.57061768,16.87500004,3.92,1,1],[-39.14795303,.5,-43.11479187,28.1249995,3.92,1,1],[-42.31108856,.5,-41.00125885,39.37499896,3.92,1,1],[-45.00111389,.5,-38.31124115,50.62500013,3.92,1,1],[-47.11465454,.5,-35.14810944,61.87499788,3.92,1,1],[-48.57048798,.5,-31.63343048,73.12500246,3.92,1,1],[-49.31266785,.5,-27.90226173,84.37500021,3.92,1,1],[-49.31267166,.5,-24.09799385,95.62499797,3.92,1,1],[-48.57049942,.5,-20.36681938,106.8750025,3.92,1,1],[-47.1146698,.5,-16.85213089,118.1249935,3.92,1,1],[-45.00113678,.5,-13.6889925,129.3749981,3.92,1,1],[-42.31111145,.5,-10.99896717,140.6250026,3.92,1,1],[-39.14798355,.5,-8.885430336,151.8749936,3.92,1,1],[-35.63330078,.5,-7.429598808,163.1249981,3.92,1,1],[-31.90213394,.5,-6.687418938,174.3750027,3.92,1,1],[-15,.5,-6.5,0,30,1,1],[.829134941,.5,-6.418410301,174.3750027,1.76,1,1],[2.455499887,.5,-6.094900131,163.1249981,1.76,1,1],[5.366380215,.5,-4.539010048,140.6250026,1.76,1,1],[6.538949966,.5,-3.366430044,129.3749981,1.76,1,1],[7.460229874,.5,-1.98763001,118.1249935,1.76,1,1],[3.987560034,.5,-5.460299969,151.8749936,1.76,1,1],[8.418330193,.5,1.170819998,95.62499797,1.76,1,1],[8.418330193,.5,2.829090118,-95.62499797,1.76,1,1],[8.094820023,.5,4.455500126,-106.8750025,1.76,1,1],[8.094820023,.5,-.455588013,106.8750025,1.76,1,1],[7.460229874,.5,5.987539768,-118.1249935,1.76,1,1],[6.538939953,.5,7.36634016,-129.3749981,1.76,1,1],[3.987570047,.5,9.460189819,-151.8749936,1.76,1,1],[2.455529928,.5,10.0948,-163.1249981,1.76,1,1],[.82912302,.5,10.41829967,-174.3750027,1.76,1,1],[5.366370201,.5,8.538909912,-140.6250026,1.76,1,1],[-1.902143717,.5,10.68730545,5.625000157,3.92,1,1],[-5.633311272,.5,11.42948151,16.87500004,3.92,1,1],[-9.147992134,.5,12.88531303,28.1249995,3.92,1,1],[-12.31112099,.5,14.99885178,39.37499896,3.92,1,1],[-15.0011425,.5,17.68887711,50.62500013,3.92,1,1],[-17.11467743,.5,20.85200882,61.87499788,3.92,1,1],[-18.57050323,.5,24.36669159,73.12500246,3.92,1,1],[-19.31267929,.5,28.09786034,84.37500021,3.92,1,1],[-19.31267929,.5,31.90212822,95.62499797,3.92,1,1],[-18.57050514,.5,35.63328934,106.8750025,3.92,1,1],[-17.11467552,.5,39.14796829,118.1249935,3.92,1,1],[-15.00113869,.5,42.31110382,129.3749981,3.92,1,1],[-12.31111622,.5,45.00112152,140.6250026,3.92,1,1],[-9.147985458,.5,47.11465454,151.8749936,3.92,1,1],[-5.633303165,.5,48.57048798,163.1249981,3.92,1,1],[-1.902136087,.5,49.31266022,174.3750027,3.92,1,1],[15,.5,49.5,0,30,1,1],[31.90213013,.5,49.31266022,5.625000157,3.92,1,1],[35.63329315,.5,48.57048416,16.87500004,3.92,1,1],[39.14796829,.5,47.11465836,28.1249995,3.92,1,1],[42.31109619,.5,45.00112534,39.37499896,3.92,1,1],[45.00111771,.5,42.31111145,50.62500013,3.92,1,1],[47.11465836,.5,39.14798355,61.87499788,3.92,1,1],[48.57048798,.5,35.6333046,73.12500246,3.92,1,1],[49.3126564,.5,31.90214348,84.37500021,3.92,1,1],[38.5,.5,2,90,56,1,1],[38.41839981,.5,-26.82920074,95.62499797,1.76,1,1],[38.09489822,.5,-28.45560074,106.8750025,1.76,1,1],[37.46030045,.5,-29.98760033,118.1249935,1.76,1,1],[36.53900146,.5,-31.36639977,129.3749981,1.76,1,1],[35.36640167,.5,-32.53900146,140.6250026,1.76,1,1],[33.98759842,.5,-33.46030045,151.8749936,1.76,1,1],[32.45560074,.5,-34.09489822,163.1249981,1.76,1,1],[30.82920074,.5,-34.41839981,174.3750027,1.76,1,1],[0,.5,-34.5,0,60,1,1],[-30.82909966,.5,-34.41839981,5.625000157,1.76,1,1],[-32.45550156,.5,-34.09489822,16.87500004,1.76,1,1],[-33.98749924,.5,-33.46030045,28.1249995,1.76,1,1],[-35.36629868,.5,-32.53900146,39.37499896,1.76,1,1],[-36.53889847,.5,-31.36639977,50.62500013,1.76,1,1],[-37.46020126,.5,-29.98760033,61.87499788,1.76,1,1],[-38.09479904,.5,-28.45560074,73.12500246,1.76,1,1],[-38.41830063,.5,-26.82920074,84.37500021,1.76,1,1],[-38.41830063,.5,-25.17090034,95.62499797,1.76,1,1],[-38.09479904,.5,-23.54450035,106.8750025,1.76,1,1],[-37.46020126,.5,-22.01250076,118.1249935,1.76,1,1],[-36.53889847,.5,-20.63369942,129.3749981,1.76,1,1],[-35.36629868,.5,-19.46109962,140.6250026,1.76,1,1],[-33.98749924,.5,-18.53980064,151.8749936,1.76,1,1],[-32.45550156,.5,-17.90519905,163.1249981,1.76,1,1],[-30.82909966,.5,-17.58169937,174.3750027,1.76,1,1],[-15,.5,-17.5,0,30,1,1],[1.902170181,.5,-17.31269264,174.3750027,3.92,1,1],[5.633336067,.5,-16.57051468,163.1249981,3.92,1,1],[9.148018837,.5,-15.1146841,151.8749936,3.92,1,1],[12.31115246,.5,-13.00114727,140.6250026,3.92,1,1],[15.00117588,.5,-10.31112194,129.3749981,3.92,1,1],[17.11471558,.5,-7.14799118,118.1249935,3.92,1,1],[18.5705452,.5,-3.633307457,106.8750025,3.92,1,1],[19.31271935,.5,.097862244,95.62499797,3.92,1,1],[19.31271744,.5,3.902129173,84.37500021,3.92,1,1],[18.57053947,.5,7.63329792,73.12500246,3.92,1,1],[17.11470795,.5,11.14797878,61.87499788,3.92,1,1],[15.00117016,.5,14.31110764,50.62500013,3.92,1,1],[12.31114674,.5,17.00112915,39.37499896,3.92,1,1],[9.148013115,.5,19.11466789,28.1249995,3.92,1,1],[5.633331299,.5,20.57049942,16.87500004,3.92,1,1],[1.902164459,.5,21.31267166,5.625000157,3.92,1,1],[-.829113007,.5,38.41839981,174.3750027,1.76,1,1],[-2.455519915,.5,38.09489822,163.1249981,1.76,1,1],[-5.366360188,.5,36.53900146,140.6250026,1.76,1,1],[-6.538929939,.5,35.36640167,129.3749981,1.76,1,1],[-7.460209846,.5,33.98759842,118.1249935,1.76,1,1],[-3.987560034,.5,37.46030045,151.8749936,1.76,1,1],[-8.418310165,.5,30.82920074,95.62499797,1.76,1,1],[-8.418310165,.5,29.17090034,-95.62499797,1.76,1,1],[-8.094799995,.5,27.54450035,-106.8750025,1.76,1,1],[-8.094799995,.5,32.45560074,106.8750025,1.76,1,1],[-7.460209846,.5,26.01250076,-118.1249935,1.76,1,1],[-6.538919926,.5,24.63369942,-129.3749981,1.76,1,1],[-3.98755002,.5,22.53980064,-151.8749936,1.76,1,1],[-2.455509901,.5,21.90519905,-163.1249981,1.76,1,1],[-.829102993,.5,21.58169937,-174.3750027,1.76,1,1],[-5.366350174,.5,23.46109962,-140.6250026,1.76,1,1],[15,.5,38.5,0,30,1,1],[38.41633224,.5,30.82708931,-95.62499797,1.76,1,1],[38.09281921,.5,32.45350266,-106.8750025,1.76,1,1],[37.45822906,.5,33.9855423,-118.1249935,1.76,1,1],[36.53694153,.5,35.36434174,-129.3749981,1.76,1,1],[33.98557281,.5,37.45819092,-151.8749936,1.76,1,1],[32.45352936,.5,38.09280014,-163.1249981,1.76,1,1],[30.82712173,.5,38.41630173,-174.3750027,1.76,1,1],[35.36437225,.5,36.53691101,-140.6250026,1.76,1,1],[37,2.25,-9,0,2,4.5,2],[51,2.25,-9,0,2,4.5,2],[44,4,-9,0,12,1,2],[6,2.25,37,-90,2,4.5,2],[6,2.25,51,-90,2,4.5,2],[6,4,44,0,2,1,12],[-24,2.25,-5,-90,2,4.5,2],[-24,4,-12,0,2,1,12],[-24,2.25,-19,-90,2,4.5,2]];function PhysicsWorld(){return jsx(Fragment,{children:physics.map((_,_e)=>jsx(Cube$1,{position:_.slice(0,3),rotation:[0,_[3]*Math.PI/180,0],size:_.slice(4)},_e))})}function Cube$1({position:et,size:_,rotation:_e}){const[tt,nt]=useBox(()=>({mass:0,position:et,rotation:_e,args:_,restitution:.5,friction:.5}));return jsx("mesh",{ref:tt,visible:!1})}function _assertThisInitialized(et){if(et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}function _inheritsLoose(et,_){et.prototype=Object.create(_.prototype),et.prototype.constructor=et,et.__proto__=_}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function(_){return typeof _=="string"},_isFunction=function(_){return typeof _=="function"},_isNumber=function(_){return typeof _=="number"},_isUndefined=function(_){return typeof _>"u"},_isObject=function(_){return typeof _=="object"},_isNotFalse=function(_){return _!==!1},_windowExists$1=function(){return typeof window<"u"},_isFuncOrString=function(_){return _isFunction(_)||_isString(_)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function(_){return(_installScope=_merge(_,_globals))&&gsap},_missingPlugin=function(_,_e){return console.warn("Invalid property",_,"set to",_e,"Missing plugin? gsap.registerPlugin()")},_warn=function(_,_e){return!_e&&console.warn(_)},_addGlobal=function(_,_e){return _&&(_globals[_]=_e)&&_installScope&&(_installScope[_]=_e)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(_){var _e=_[0],tt,nt;if(_isObject(_e)||_isFunction(_e)||(_=[_]),!(tt=(_e._gsap||{}).harness)){for(nt=_harnessPlugins.length;nt--&&!_harnessPlugins[nt].targetTest(_e););tt=_harnessPlugins[nt]}for(nt=_.length;nt--;)_[nt]&&(_[nt]._gsap||(_[nt]._gsap=new GSCache(_[nt],tt)))||_.splice(nt,1);return _},_getCache=function(_){return _._gsap||_harness(toArray(_))[0]._gsap},_getProperty=function(_,_e,tt){return(tt=_[_e])&&_isFunction(tt)?_[_e]():_isUndefined(tt)&&_.getAttribute&&_.getAttribute(_e)||tt},_forEachName=function(_,_e){return(_=_.split(",")).forEach(_e)||_},_round=function(_){return Math.round(_*1e5)/1e5||0},_roundPrecise=function(_){return Math.round(_*1e7)/1e7||0},_parseRelative=function(_,_e){var tt=_e.charAt(0),nt=parseFloat(_e.substr(2));return _=parseFloat(_),tt==="+"?_+nt:tt==="-"?_-nt:tt==="*"?_*nt:_/nt},_arrayContainsAny=function(_,_e){for(var tt=_e.length,nt=0;_.indexOf(_e[nt])<0&&++nt<tt;);return nt<tt},_lazyRender=function(){var _=_lazyTweens.length,_e=_lazyTweens.slice(0),tt,nt;for(_lazyLookup={},_lazyTweens.length=0,tt=0;tt<_;tt++)nt=_e[tt],nt&&nt._lazy&&(nt.render(nt._lazy[0],nt._lazy[1],!0)._lazy=0)},_lazySafeRender=function(_,_e,tt,nt){_lazyTweens.length&&!_reverting$1&&_lazyRender(),_.render(_e,tt,nt||_reverting$1&&_e<0&&(_._initted||_._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(_){var _e=parseFloat(_);return(_e||_e===0)&&(_+"").match(_delimitedValueExp).length<2?_e:_isString(_)?_.trim():_},_passThrough=function(_){return _},_setDefaults=function(_,_e){for(var tt in _e)tt in _||(_[tt]=_e[tt]);return _},_setKeyframeDefaults=function(_){return function(_e,tt){for(var nt in tt)nt in _e||nt==="duration"&&_||nt==="ease"||(_e[nt]=tt[nt])}},_merge=function(_,_e){for(var tt in _e)_[tt]=_e[tt];return _},_mergeDeep=function et(_,_e){for(var tt in _e)tt!=="__proto__"&&tt!=="constructor"&&tt!=="prototype"&&(_[tt]=_isObject(_e[tt])?et(_[tt]||(_[tt]={}),_e[tt]):_e[tt]);return _},_copyExcluding=function(_,_e){var tt={},nt;for(nt in _)nt in _e||(tt[nt]=_[nt]);return tt},_inheritDefaults=function(_){var _e=_.parent||_globalTimeline,tt=_.keyframes?_setKeyframeDefaults(_isArray(_.keyframes)):_setDefaults;if(_isNotFalse(_.inherit))for(;_e;)tt(_,_e.vars.defaults),_e=_e.parent||_e._dp;return _},_arraysMatch=function(_,_e){for(var tt=_.length,nt=tt===_e.length;nt&&tt--&&_[tt]===_e[tt];);return tt<0},_addLinkedListItem=function(_,_e,tt,nt,it){tt===void 0&&(tt="_first"),nt===void 0&&(nt="_last");var rt=_[nt],st;if(it)for(st=_e[it];rt&&rt[it]>st;)rt=rt._prev;return rt?(_e._next=rt._next,rt._next=_e):(_e._next=_[tt],_[tt]=_e),_e._next?_e._next._prev=_e:_[nt]=_e,_e._prev=rt,_e.parent=_e._dp=_,_e},_removeLinkedListItem=function(_,_e,tt,nt){tt===void 0&&(tt="_first"),nt===void 0&&(nt="_last");var it=_e._prev,rt=_e._next;it?it._next=rt:_[tt]===_e&&(_[tt]=rt),rt?rt._prev=it:_[nt]===_e&&(_[nt]=it),_e._next=_e._prev=_e.parent=null},_removeFromParent=function(_,_e){_.parent&&(!_e||_.parent.autoRemoveChildren)&&_.parent.remove(_),_._act=0},_uncache=function(_,_e){if(_&&(!_e||_e._end>_._dur||_e._start<0))for(var tt=_;tt;)tt._dirty=1,tt=tt.parent;return _},_recacheAncestors=function(_){for(var _e=_.parent;_e&&_e.parent;)_e._dirty=1,_e.totalDuration(),_e=_e.parent;return _},_rewindStartAt=function(_,_e,tt,nt){return _._startAt&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_.vars.immediateRender&&!_.vars.autoRevert||_._startAt.render(_e,!0,nt))},_hasNoPausedAncestors=function et(_){return!_||_._ts&&et(_.parent)},_elapsedCycleDuration=function(_){return _._repeat?_animationCycle(_._tTime,_=_.duration()+_._rDelay)*_:0},_animationCycle=function(_,_e){var tt=Math.floor(_/=_e);return _&&tt===_?tt-1:tt},_parentToChildTotalTime=function(_,_e){return(_-_e._start)*_e._ts+(_e._ts>=0?0:_e._dirty?_e.totalDuration():_e._tDur)},_setEnd=function(_){return _._end=_roundPrecise(_._start+(_._tDur/Math.abs(_._ts||_._rts||_tinyNum)||0))},_alignPlayhead=function(_,_e){var tt=_._dp;return tt&&tt.smoothChildTiming&&_._ts&&(_._start=_roundPrecise(tt._time-(_._ts>0?_e/_._ts:((_._dirty?_.totalDuration():_._tDur)-_e)/-_._ts)),_setEnd(_),tt._dirty||_uncache(tt,_)),_},_postAddChecks=function(_,_e){var tt;if((_e._time||_e._initted&&!_e._dur)&&(tt=_parentToChildTotalTime(_.rawTime(),_e),(!_e._dur||_clamp(0,_e.totalDuration(),tt)-_e._tTime>_tinyNum)&&_e.render(tt,!0)),_uncache(_,_e)._dp&&_._initted&&_._time>=_._dur&&_._ts){if(_._dur<_.duration())for(tt=_;tt._dp;)tt.rawTime()>=0&&tt.totalTime(tt._tTime),tt=tt._dp;_._zTime=-_tinyNum}},_addToTimeline=function(_,_e,tt,nt){return _e.parent&&_removeFromParent(_e),_e._start=_roundPrecise((_isNumber(tt)?tt:tt||_!==_globalTimeline?_parsePosition(_,tt,_e):_._time)+_e._delay),_e._end=_roundPrecise(_e._start+(_e.totalDuration()/Math.abs(_e.timeScale())||0)),_addLinkedListItem(_,_e,"_first","_last",_._sort?"_start":0),_isFromOrFromStart(_e)||(_._recent=_e),nt||_postAddChecks(_,_e),_._ts<0&&_alignPlayhead(_,_._tTime),_},_scrollTrigger=function(_,_e){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",_e))&&_globals.ScrollTrigger.create(_e,_)},_attemptInitTween=function(_,_e,tt,nt,it){if(_initTween(_,_e,it),!_._initted)return 1;if(!tt&&_._pt&&!_reverting$1&&(_._dur&&_.vars.lazy!==!1||!_._dur&&_.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(_),_._lazy=[it,nt],1},_parentPlayheadIsBeforeStart=function et(_){var _e=_.parent;return _e&&_e._ts&&_e._initted&&!_e._lock&&(_e.rawTime()<0||et(_e))},_isFromOrFromStart=function(_){var _e=_.data;return _e==="isFromStart"||_e==="isStart"},_renderZeroDurationTween=function(_,_e,tt,nt){var it=_.ratio,rt=_e<0||!_e&&(!_._start&&_parentPlayheadIsBeforeStart(_)&&!(!_._initted&&_isFromOrFromStart(_))||(_._ts<0||_._dp._ts<0)&&!_isFromOrFromStart(_))?0:1,st=_._rDelay,ot=0,at,At,lt;if(st&&_._repeat&&(ot=_clamp(0,_._tDur,_e),At=_animationCycle(ot,st),_._yoyo&&At&1&&(rt=1-rt),At!==_animationCycle(_._tTime,st)&&(it=1-rt,_.vars.repeatRefresh&&_._initted&&_.invalidate())),rt!==it||_reverting$1||nt||_._zTime===_tinyNum||!_e&&_._zTime){if(!_._initted&&_attemptInitTween(_,_e,nt,tt,ot))return;for(lt=_._zTime,_._zTime=_e||(tt?_tinyNum:0),tt||(tt=_e&&!lt),_.ratio=rt,_._from&&(rt=1-rt),_._time=0,_._tTime=ot,at=_._pt;at;)at.r(rt,at.d),at=at._next;_e<0&&_rewindStartAt(_,_e,tt,!0),_._onUpdate&&!tt&&_callback(_,"onUpdate"),ot&&_._repeat&&!tt&&_.parent&&_callback(_,"onRepeat"),(_e>=_._tDur||_e<0)&&_.ratio===rt&&(rt&&_removeFromParent(_,1),!tt&&!_reverting$1&&(_callback(_,rt?"onComplete":"onReverseComplete",!0),_._prom&&_._prom()))}else _._zTime||(_._zTime=_e)},_findNextPauseTween=function(_,_e,tt){var nt;if(tt>_e)for(nt=_._first;nt&&nt._start<=tt;){if(nt.data==="isPause"&&nt._start>_e)return nt;nt=nt._next}else for(nt=_._last;nt&&nt._start>=tt;){if(nt.data==="isPause"&&nt._start<_e)return nt;nt=nt._prev}},_setDuration=function(_,_e,tt,nt){var it=_._repeat,rt=_roundPrecise(_e)||0,st=_._tTime/_._tDur;return st&&!nt&&(_._time*=rt/_._dur),_._dur=rt,_._tDur=it?it<0?1e10:_roundPrecise(rt*(it+1)+_._rDelay*it):rt,st>0&&!nt&&_alignPlayhead(_,_._tTime=_._tDur*st),_.parent&&_setEnd(_),tt||_uncache(_.parent,_),_},_onUpdateTotalDuration=function(_){return _ instanceof Timeline?_uncache(_):_setDuration(_,_._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function et(_,_e,tt){var nt=_.labels,it=_._recent||_zeroPosition,rt=_.duration()>=_bigNum$1?it.endTime(!1):_._dur,st,ot,at;return _isString(_e)&&(isNaN(_e)||_e in nt)?(ot=_e.charAt(0),at=_e.substr(-1)==="%",st=_e.indexOf("="),ot==="<"||ot===">"?(st>=0&&(_e=_e.replace(/=/,"")),(ot==="<"?it._start:it.endTime(it._repeat>=0))+(parseFloat(_e.substr(1))||0)*(at?(st<0?it:tt).totalDuration()/100:1)):st<0?(_e in nt||(nt[_e]=rt),nt[_e]):(ot=parseFloat(_e.charAt(st-1)+_e.substr(st+1)),at&&tt&&(ot=ot/100*(_isArray(tt)?tt[0]:tt).totalDuration()),st>1?et(_,_e.substr(0,st-1),tt)+ot:rt+ot)):_e==null?rt:+_e},_createTweenType=function(_,_e,tt){var nt=_isNumber(_e[1]),it=(nt?2:1)+(_<2?0:1),rt=_e[it],st,ot;if(nt&&(rt.duration=_e[1]),rt.parent=tt,_){for(st=rt,ot=tt;ot&&!("immediateRender"in st);)st=ot.vars.defaults||{},ot=_isNotFalse(ot.vars.inherit)&&ot.parent;rt.immediateRender=_isNotFalse(st.immediateRender),_<2?rt.runBackwards=1:rt.startAt=_e[it-1]}return new Tween(_e[0],rt,_e[it+1])},_conditionalReturn=function(_,_e){return _||_===0?_e(_):_e},_clamp=function(_,_e,tt){return tt<_?_:tt>_e?_e:tt},getUnit=function(_,_e){return!_isString(_)||!(_e=_unitExp.exec(_))?"":_e[1]},clamp=function(_,_e,tt){return _conditionalReturn(tt,function(nt){return _clamp(_,_e,nt)})},_slice=[].slice,_isArrayLike=function(_,_e){return _&&_isObject(_)&&"length"in _&&(!_e&&!_.length||_.length-1 in _&&_isObject(_[0]))&&!_.nodeType&&_!==_win$1},_flatten=function(_,_e,tt){return tt===void 0&&(tt=[]),_.forEach(function(nt){var it;return _isString(nt)&&!_e||_isArrayLike(nt,1)?(it=tt).push.apply(it,toArray(nt)):tt.push(nt)})||tt},toArray=function(_,_e,tt){return _context&&!_e&&_context.selector?_context.selector(_):_isString(_)&&!tt&&(_coreInitted||!_wake())?_slice.call((_e||_doc$1).querySelectorAll(_),0):_isArray(_)?_flatten(_,tt):_isArrayLike(_)?_slice.call(_,0):_?[_]:[]},selector=function(_){return _=toArray(_)[0]||_warn("Invalid scope")||{},function(_e){var tt=_.current||_.nativeElement||_;return toArray(_e,tt.querySelectorAll?tt:tt===_?_warn("Invalid scope")||_doc$1.createElement("div"):_)}},shuffle=function(_){return _.sort(function(){return .5-Math.random()})},distribute=function(_){if(_isFunction(_))return _;var _e=_isObject(_)?_:{each:_},tt=_parseEase(_e.ease),nt=_e.from||0,it=parseFloat(_e.base)||0,rt={},st=nt>0&&nt<1,ot=isNaN(nt)||st,at=_e.axis,At=nt,lt=nt;return _isString(nt)?At=lt={center:.5,edges:.5,end:1}[nt]||0:!st&&ot&&(At=nt[0],lt=nt[1]),function(gt,ct,dt){var ht=(dt||_e).length,mt=rt[ht],Ct,ft,pt,Vt,yt,Gt,Bt,vt,wt;if(!mt){if(wt=_e.grid==="auto"?0:(_e.grid||[1,_bigNum$1])[1],!wt){for(Bt=-_bigNum$1;Bt<(Bt=dt[wt++].getBoundingClientRect().left)&&wt<ht;);wt--}for(mt=rt[ht]=[],Ct=ot?Math.min(wt,ht)*At-.5:nt%wt,ft=wt===_bigNum$1?0:ot?ht*lt/wt-.5:nt/wt|0,Bt=0,vt=_bigNum$1,Gt=0;Gt<ht;Gt++)pt=Gt%wt-Ct,Vt=ft-(Gt/wt|0),mt[Gt]=yt=at?Math.abs(at==="y"?Vt:pt):_sqrt(pt*pt+Vt*Vt),yt>Bt&&(Bt=yt),yt<vt&&(vt=yt);nt==="random"&&shuffle(mt),mt.max=Bt-vt,mt.min=vt,mt.v=ht=(parseFloat(_e.amount)||parseFloat(_e.each)*(wt>ht?ht-1:at?at==="y"?ht/wt:wt:Math.max(wt,ht/wt))||0)*(nt==="edges"?-1:1),mt.b=ht<0?it-ht:it,mt.u=getUnit(_e.amount||_e.each)||0,tt=tt&&ht<0?_invertEase(tt):tt}return ht=(mt[gt]-mt.min)/mt.max||0,_roundPrecise(mt.b+(tt?tt(ht):ht)*mt.v)+mt.u}},_roundModifier=function(_){var _e=Math.pow(10,((_+"").split(".")[1]||"").length);return function(tt){var nt=_roundPrecise(Math.round(parseFloat(tt)/_)*_*_e);return(nt-nt%1)/_e+(_isNumber(tt)?0:getUnit(tt))}},snap=function(_,_e){var tt=_isArray(_),nt,it;return!tt&&_isObject(_)&&(nt=tt=_.radius||_bigNum$1,_.values?(_=toArray(_.values),(it=!_isNumber(_[0]))&&(nt*=nt)):_=_roundModifier(_.increment)),_conditionalReturn(_e,tt?_isFunction(_)?function(rt){return it=_(rt),Math.abs(it-rt)<=nt?it:rt}:function(rt){for(var st=parseFloat(it?rt.x:rt),ot=parseFloat(it?rt.y:0),at=_bigNum$1,At=0,lt=_.length,gt,ct;lt--;)it?(gt=_[lt].x-st,ct=_[lt].y-ot,gt=gt*gt+ct*ct):gt=Math.abs(_[lt]-st),gt<at&&(at=gt,At=lt);return At=!nt||at<=nt?_[At]:rt,it||At===rt||_isNumber(rt)?At:At+getUnit(rt)}:_roundModifier(_))},random=function(_,_e,tt,nt){return _conditionalReturn(_isArray(_)?!_e:tt===!0?!!(tt=0):!nt,function(){return _isArray(_)?_[~~(Math.random()*_.length)]:(tt=tt||1e-5)&&(nt=tt<1?Math.pow(10,(tt+"").length-2):1)&&Math.floor(Math.round((_-tt/2+Math.random()*(_e-_+tt*.99))/tt)*tt*nt)/nt})},pipe=function(){for(var _=arguments.length,_e=new Array(_),tt=0;tt<_;tt++)_e[tt]=arguments[tt];return function(nt){return _e.reduce(function(it,rt){return rt(it)},nt)}},unitize=function(_,_e){return function(tt){return _(parseFloat(tt))+(_e||getUnit(tt))}},normalize=function(_,_e,tt){return mapRange(_,_e,0,1,tt)},_wrapArray=function(_,_e,tt){return _conditionalReturn(tt,function(nt){return _[~~_e(nt)]})},wrap=function et(_,_e,tt){var nt=_e-_;return _isArray(_)?_wrapArray(_,et(0,_.length),_e):_conditionalReturn(tt,function(it){return(nt+(it-_)%nt)%nt+_})},wrapYoyo=function et(_,_e,tt){var nt=_e-_,it=nt*2;return _isArray(_)?_wrapArray(_,et(0,_.length-1),_e):_conditionalReturn(tt,function(rt){return rt=(it+(rt-_)%it)%it||0,_+(rt>nt?it-rt:rt)})},_replaceRandom=function(_){for(var _e=0,tt="",nt,it,rt,st;~(nt=_.indexOf("random(",_e));)rt=_.indexOf(")",nt),st=_.charAt(nt+7)==="[",it=_.substr(nt+7,rt-nt-7).match(st?_delimitedValueExp:_strictNumExp),tt+=_.substr(_e,nt-_e)+random(st?it:+it[0],st?0:+it[1],+it[2]||1e-5),_e=rt+1;return tt+_.substr(_e,_.length-_e)},mapRange=function(_,_e,tt,nt,it){var rt=_e-_,st=nt-tt;return _conditionalReturn(it,function(ot){return tt+((ot-_)/rt*st||0)})},interpolate=function et(_,_e,tt,nt){var it=isNaN(_+_e)?0:function(ct){return(1-ct)*_+ct*_e};if(!it){var rt=_isString(_),st={},ot,at,At,lt,gt;if(tt===!0&&(nt=1)&&(tt=null),rt)_={p:_},_e={p:_e};else if(_isArray(_)&&!_isArray(_e)){for(At=[],lt=_.length,gt=lt-2,at=1;at<lt;at++)At.push(et(_[at-1],_[at]));lt--,it=function(dt){dt*=lt;var ht=Math.min(gt,~~dt);return At[ht](dt-ht)},tt=_e}else nt||(_=_merge(_isArray(_)?[]:{},_));if(!At){for(ot in _e)_addPropTween.call(st,_,ot,"get",_e[ot]);it=function(dt){return _renderPropTweens(dt,st)||(rt?_.p:_)}}}return _conditionalReturn(tt,it)},_getLabelInDirection=function(_,_e,tt){var nt=_.labels,it=_bigNum$1,rt,st,ot;for(rt in nt)st=nt[rt]-_e,st<0==!!tt&&st&&it>(st=Math.abs(st))&&(ot=rt,it=st);return ot},_callback=function(_,_e,tt){var nt=_.vars,it=nt[_e],rt=_context,st=_._ctx,ot,at,At;if(it)return ot=nt[_e+"Params"],at=nt.callbackScope||_,tt&&_lazyTweens.length&&_lazyRender(),st&&(_context=st),At=ot?it.apply(at,ot):it.call(at),_context=rt,At},_interrupt=function(_){return _removeFromParent(_),_.scrollTrigger&&_.scrollTrigger.kill(!!_reverting$1),_.progress()<1&&_callback(_,"onInterrupt"),_},_quickTween,_registerPluginQueue=[],_createPlugin=function(_){if(!_windowExists$1()){_registerPluginQueue.push(_);return}_=!_.name&&_.default||_;var _e=_.name,tt=_isFunction(_),nt=_e&&!tt&&_.init?function(){this._props=[]}:_,it={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},rt={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),_!==nt){if(_plugins[_e])return;_setDefaults(nt,_setDefaults(_copyExcluding(_,it),rt)),_merge(nt.prototype,_merge(it,_copyExcluding(_,rt))),_plugins[nt.prop=_e]=nt,_.targetTest&&(_harnessPlugins.push(nt),_reservedProps[_e]=1),_e=(_e==="css"?"CSS":_e.charAt(0).toUpperCase()+_e.substr(1))+"Plugin"}_addGlobal(_e,nt),_.register&&_.register(gsap,nt,PropTween)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(_,_e,tt){return _+=_<0?1:_>1?-1:0,(_*6<1?_e+(tt-_e)*_*6:_<.5?tt:_*3<2?_e+(tt-_e)*(2/3-_)*6:_e)*_255+.5|0},splitColor=function(_,_e,tt){var nt=_?_isNumber(_)?[_>>16,_>>8&_255,_&_255]:0:_colorLookup.black,it,rt,st,ot,at,At,lt,gt,ct,dt;if(!nt){if(_.substr(-1)===","&&(_=_.substr(0,_.length-1)),_colorLookup[_])nt=_colorLookup[_];else if(_.charAt(0)==="#"){if(_.length<6&&(it=_.charAt(1),rt=_.charAt(2),st=_.charAt(3),_="#"+it+it+rt+rt+st+st+(_.length===5?_.charAt(4)+_.charAt(4):"")),_.length===9)return nt=parseInt(_.substr(1,6),16),[nt>>16,nt>>8&_255,nt&_255,parseInt(_.substr(7),16)/255];_=parseInt(_.substr(1),16),nt=[_>>16,_>>8&_255,_&_255]}else if(_.substr(0,3)==="hsl"){if(nt=dt=_.match(_strictNumExp),!_e)ot=+nt[0]%360/360,at=+nt[1]/100,At=+nt[2]/100,rt=At<=.5?At*(at+1):At+at-At*at,it=At*2-rt,nt.length>3&&(nt[3]*=1),nt[0]=_hue(ot+1/3,it,rt),nt[1]=_hue(ot,it,rt),nt[2]=_hue(ot-1/3,it,rt);else if(~_.indexOf("="))return nt=_.match(_numExp),tt&&nt.length<4&&(nt[3]=1),nt}else nt=_.match(_strictNumExp)||_colorLookup.transparent;nt=nt.map(Number)}return _e&&!dt&&(it=nt[0]/_255,rt=nt[1]/_255,st=nt[2]/_255,lt=Math.max(it,rt,st),gt=Math.min(it,rt,st),At=(lt+gt)/2,lt===gt?ot=at=0:(ct=lt-gt,at=At>.5?ct/(2-lt-gt):ct/(lt+gt),ot=lt===it?(rt-st)/ct+(rt<st?6:0):lt===rt?(st-it)/ct+2:(it-rt)/ct+4,ot*=60),nt[0]=~~(ot+.5),nt[1]=~~(at*100+.5),nt[2]=~~(At*100+.5)),tt&&nt.length<4&&(nt[3]=1),nt},_colorOrderData=function(_){var _e=[],tt=[],nt=-1;return _.split(_colorExp).forEach(function(it){var rt=it.match(_numWithUnitExp)||[];_e.push.apply(_e,rt),tt.push(nt+=rt.length+1)}),_e.c=tt,_e},_formatColors=function(_,_e,tt){var nt="",it=(_+nt).match(_colorExp),rt=_e?"hsla(":"rgba(",st=0,ot,at,At,lt;if(!it)return _;if(it=it.map(function(gt){return(gt=splitColor(gt,_e,1))&&rt+(_e?gt[0]+","+gt[1]+"%,"+gt[2]+"%,"+gt[3]:gt.join(","))+")"}),tt&&(At=_colorOrderData(_),ot=tt.c,ot.join(nt)!==At.c.join(nt)))for(at=_.replace(_colorExp,"1").split(_numWithUnitExp),lt=at.length-1;st<lt;st++)nt+=at[st]+(~ot.indexOf(st)?it.shift()||rt+"0,0,0,0)":(At.length?At:it.length?it:tt).shift());if(!at)for(at=_.split(_colorExp),lt=at.length-1;st<lt;st++)nt+=at[st]+it[st];return nt+at[lt]},_colorExp=function(){var et="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",_;for(_ in _colorLookup)et+="|"+_+"\\b";return new RegExp(et+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(_){var _e=_.join(" "),tt;if(_colorExp.lastIndex=0,_colorExp.test(_e))return tt=_hslExp.test(_e),_[1]=_formatColors(_[1],tt),_[0]=_formatColors(_[0],tt,_colorOrderData(_[1])),!0},_tickerActive,_ticker=function(){var et=Date.now,_=500,_e=33,tt=et(),nt=tt,it=1e3/240,rt=it,st=[],ot,at,At,lt,gt,ct,dt=function ht(mt){var Ct=et()-nt,ft=mt===!0,pt,Vt,yt,Gt;if(Ct>_&&(tt+=Ct-_e),nt+=Ct,yt=nt-tt,pt=yt-rt,(pt>0||ft)&&(Gt=++lt.frame,gt=yt-lt.time*1e3,lt.time=yt=yt/1e3,rt+=pt+(pt>=it?4:it-pt),Vt=1),ft||(ot=at(ht)),Vt)for(ct=0;ct<st.length;ct++)st[ct](yt,gt,Gt,mt)};return lt={time:0,frame:0,tick:function(){dt(!0)},deltaRatio:function(mt){return gt/(1e3/(mt||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),At=_win$1.requestAnimationFrame,_registerPluginQueue.forEach(_createPlugin)),ot&&lt.sleep(),at=At||function(mt){return setTimeout(mt,rt-lt.time*1e3+1|0)},_tickerActive=1,dt(2))},sleep:function(){(At?_win$1.cancelAnimationFrame:clearTimeout)(ot),_tickerActive=0,at=_emptyFunc},lagSmoothing:function(mt,Ct){_=mt||1/0,_e=Math.min(Ct||33,_)},fps:function(mt){it=1e3/(mt||240),rt=lt.time*1e3+it},add:function(mt,Ct,ft){var pt=Ct?function(Vt,yt,Gt,Bt){mt(Vt,yt,Gt,Bt),lt.remove(pt)}:mt;return lt.remove(mt),st[ft?"unshift":"push"](pt),_wake(),pt},remove:function(mt,Ct){~(Ct=st.indexOf(mt))&&st.splice(Ct,1)&&ct>=Ct&&ct--},_listeners:st},lt}(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(_){for(var _e={},tt=_.substr(1,_.length-3).split(":"),nt=tt[0],it=1,rt=tt.length,st,ot,at;it<rt;it++)ot=tt[it],st=it!==rt-1?ot.lastIndexOf(","):ot.length,at=ot.substr(0,st),_e[nt]=isNaN(at)?at.replace(_quotesExp,"").trim():+at,nt=ot.substr(st+1).trim();return _e},_valueInParentheses=function(_){var _e=_.indexOf("(")+1,tt=_.indexOf(")"),nt=_.indexOf("(",_e);return _.substring(_e,~nt&&nt<tt?_.indexOf(")",tt+1):tt)},_configEaseFromString=function(_){var _e=(_+"").split("("),tt=_easeMap[_e[0]];return tt&&_e.length>1&&tt.config?tt.config.apply(null,~_.indexOf("{")?[_parseObjectInString(_e[1])]:_valueInParentheses(_).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(_)?_easeMap._CE("",_):tt},_invertEase=function(_){return function(_e){return 1-_(1-_e)}},_propagateYoyoEase=function et(_,_e){for(var tt=_._first,nt;tt;)tt instanceof Timeline?et(tt,_e):tt.vars.yoyoEase&&(!tt._yoyo||!tt._repeat)&&tt._yoyo!==_e&&(tt.timeline?et(tt.timeline,_e):(nt=tt._ease,tt._ease=tt._yEase,tt._yEase=nt,tt._yoyo=_e)),tt=tt._next},_parseEase=function(_,_e){return _&&(_isFunction(_)?_:_easeMap[_]||_configEaseFromString(_))||_e},_insertEase=function(_,_e,tt,nt){tt===void 0&&(tt=function(ot){return 1-_e(1-ot)}),nt===void 0&&(nt=function(ot){return ot<.5?_e(ot*2)/2:1-_e((1-ot)*2)/2});var it={easeIn:_e,easeOut:tt,easeInOut:nt},rt;return _forEachName(_,function(st){_easeMap[st]=_globals[st]=it,_easeMap[rt=st.toLowerCase()]=tt;for(var ot in it)_easeMap[rt+(ot==="easeIn"?".in":ot==="easeOut"?".out":".inOut")]=_easeMap[st+"."+ot]=it[ot]}),it},_easeInOutFromOut=function(_){return function(_e){return _e<.5?(1-_(1-_e*2))/2:.5+_((_e-.5)*2)/2}},_configElastic=function et(_,_e,tt){var nt=_e>=1?_e:1,it=(tt||(_?.3:.45))/(_e<1?_e:1),rt=it/_2PI*(Math.asin(1/nt)||0),st=function(At){return At===1?1:nt*Math.pow(2,-10*At)*_sin((At-rt)*it)+1},ot=_==="out"?st:_==="in"?function(at){return 1-st(1-at)}:_easeInOutFromOut(st);return it=_2PI/it,ot.config=function(at,At){return et(_,at,At)},ot},_configBack=function et(_,_e){_e===void 0&&(_e=1.70158);var tt=function(rt){return rt?--rt*rt*((_e+1)*rt+_e)+1:0},nt=_==="out"?tt:_==="in"?function(it){return 1-tt(1-it)}:_easeInOutFromOut(tt);return nt.config=function(it){return et(_,it)},nt};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(et,_){var _e=_<5?_+1:_;_insertEase(et+",Power"+(_e-1),_?function(tt){return Math.pow(tt,_e)}:function(tt){return tt},function(tt){return 1-Math.pow(1-tt,_e)},function(tt){return tt<.5?Math.pow(tt*2,_e)/2:1-Math.pow((1-tt)*2,_e)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(et,_){var _e=1/_,tt=2*_e,nt=2.5*_e,it=function(st){return st<_e?et*st*st:st<tt?et*Math.pow(st-1.5/_,2)+.75:st<nt?et*(st-=2.25/_)*st+.9375:et*Math.pow(st-2.625/_,2)+.984375};_insertEase("Bounce",function(rt){return 1-it(1-rt)},it)})(7.5625,2.75);_insertEase("Expo",function(et){return et?Math.pow(2,10*(et-1)):0});_insertEase("Circ",function(et){return-(_sqrt(1-et*et)-1)});_insertEase("Sine",function(et){return et===1?1:-_cos(et*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(_,_e){_===void 0&&(_=1);var tt=1/_,nt=_+(_e?0:1),it=_e?1:0,rt=1-_tinyNum;return function(st){return((nt*_clamp(0,rt,st)|0)+it)*tt}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(et){return _callbackNames+=et+","+et+"Params,"});var GSCache=function(_,_e){this.id=_gsID++,_._gsap=this,this.target=_,this.harness=_e,this.get=_e?_e.get:_getProperty,this.set=_e?_e.getSetter:_getSetter},Animation=function(){function et(_e){this.vars=_e,this._delay=+_e.delay||0,(this._repeat=_e.repeat===1/0?-2:_e.repeat||0)&&(this._rDelay=_e.repeatDelay||0,this._yoyo=!!_e.yoyo||!!_e.yoyoEase),this._ts=1,_setDuration(this,+_e.duration,1,1),this.data=_e.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var _=et.prototype;return _.delay=function(tt){return tt||tt===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+tt-this._delay),this._delay=tt,this):this._delay},_.duration=function(tt){return arguments.length?this.totalDuration(this._repeat>0?tt+(tt+this._rDelay)*this._repeat:tt):this.totalDuration()&&this._dur},_.totalDuration=function(tt){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?tt:(tt-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},_.totalTime=function(tt,nt){if(_wake(),!arguments.length)return this._tTime;var it=this._dp;if(it&&it.smoothChildTiming&&this._ts){for(_alignPlayhead(this,tt),!it._dp||it.parent||_postAddChecks(it,this);it&&it.parent;)it.parent._time!==it._start+(it._ts>=0?it._tTime/it._ts:(it.totalDuration()-it._tTime)/-it._ts)&&it.totalTime(it._tTime,!0),it=it.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&tt<this._tDur||this._ts<0&&tt>0||!this._tDur&&!tt)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==tt||!this._dur&&!nt||this._initted&&Math.abs(this._zTime)===_tinyNum||!tt&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=tt),_lazySafeRender(this,tt,nt)),this},_.time=function(tt,nt){return arguments.length?this.totalTime(Math.min(this.totalDuration(),tt+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(tt?this._dur:0),nt):this._time},_.totalProgress=function(tt,nt){return arguments.length?this.totalTime(this.totalDuration()*tt,nt):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},_.progress=function(tt,nt){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-tt:tt)+_elapsedCycleDuration(this),nt):this.duration()?Math.min(1,this._time/this._dur):this.ratio},_.iteration=function(tt,nt){var it=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(tt-1)*it,nt):this._repeat?_animationCycle(this._tTime,it)+1:1},_.timeScale=function(tt){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===tt)return this;var nt=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+tt||0,this._ts=this._ps||tt===-_tinyNum?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this._tDur,nt),!0),_setEnd(this),_recacheAncestors(this)},_.paused=function(tt){return arguments.length?(this._ps!==tt&&(this._ps=tt,tt?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},_.startTime=function(tt){if(arguments.length){this._start=tt;var nt=this.parent||this._dp;return nt&&(nt._sort||!this.parent)&&_addToTimeline(nt,this,tt-this._delay),this}return this._start},_.endTime=function(tt){return this._start+(_isNotFalse(tt)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},_.rawTime=function(tt){var nt=this.parent||this._dp;return nt?tt&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(nt.rawTime(tt),this):this._tTime:this._tTime},_.revert=function(tt){tt===void 0&&(tt=_revertConfig);var nt=_reverting$1;return _reverting$1=tt,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(tt),this.totalTime(-.01,tt.suppressEvents)),this.data!=="nested"&&tt.kill!==!1&&this.kill(),_reverting$1=nt,this},_.globalTime=function(tt){for(var nt=this,it=arguments.length?tt:nt.rawTime();nt;)it=nt._start+it/(nt._ts||1),nt=nt._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(tt):it},_.repeat=function(tt){return arguments.length?(this._repeat=tt===1/0?-2:tt,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},_.repeatDelay=function(tt){if(arguments.length){var nt=this._time;return this._rDelay=tt,_onUpdateTotalDuration(this),nt?this.time(nt):this}return this._rDelay},_.yoyo=function(tt){return arguments.length?(this._yoyo=tt,this):this._yoyo},_.seek=function(tt,nt){return this.totalTime(_parsePosition(this,tt),_isNotFalse(nt))},_.restart=function(tt,nt){return this.play().totalTime(tt?-this._delay:0,_isNotFalse(nt))},_.play=function(tt,nt){return tt!=null&&this.seek(tt,nt),this.reversed(!1).paused(!1)},_.reverse=function(tt,nt){return tt!=null&&this.seek(tt||this.totalDuration(),nt),this.reversed(!0).paused(!1)},_.pause=function(tt,nt){return tt!=null&&this.seek(tt,nt),this.paused(!0)},_.resume=function(){return this.paused(!1)},_.reversed=function(tt){return arguments.length?(!!tt!==this.reversed()&&this.timeScale(-this._rts||(tt?-_tinyNum:0)),this):this._rts<0},_.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},_.isActive=function(){var tt=this.parent||this._dp,nt=this._start,it;return!!(!tt||this._ts&&this._initted&&tt.isActive()&&(it=tt.rawTime(!0))>=nt&&it<this.endTime(!0)-_tinyNum)},_.eventCallback=function(tt,nt,it){var rt=this.vars;return arguments.length>1?(nt?(rt[tt]=nt,it&&(rt[tt+"Params"]=it),tt==="onUpdate"&&(this._onUpdate=nt)):delete rt[tt],this):rt[tt]},_.then=function(tt){var nt=this;return new Promise(function(it){var rt=_isFunction(tt)?tt:_passThrough,st=function(){var at=nt.then;nt.then=null,_isFunction(rt)&&(rt=rt(nt))&&(rt.then||rt===nt)&&(nt.then=at),it(rt),nt.then=at};nt._initted&&nt.totalProgress()===1&&nt._ts>=0||!nt._tTime&&nt._ts<0?st():nt._prom=st})},_.kill=function(){_interrupt(this)},et}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(et){_inheritsLoose(_,et);function _(tt,nt){var it;return tt===void 0&&(tt={}),it=et.call(this,tt)||this,it.labels={},it.smoothChildTiming=!!tt.smoothChildTiming,it.autoRemoveChildren=!!tt.autoRemoveChildren,it._sort=_isNotFalse(tt.sortChildren),_globalTimeline&&_addToTimeline(tt.parent||_globalTimeline,_assertThisInitialized(it),nt),tt.reversed&&it.reverse(),tt.paused&&it.paused(!0),tt.scrollTrigger&&_scrollTrigger(_assertThisInitialized(it),tt.scrollTrigger),it}var _e=_.prototype;return _e.to=function(nt,it,rt){return _createTweenType(0,arguments,this),this},_e.from=function(nt,it,rt){return _createTweenType(1,arguments,this),this},_e.fromTo=function(nt,it,rt,st){return _createTweenType(2,arguments,this),this},_e.set=function(nt,it,rt){return it.duration=0,it.parent=this,_inheritDefaults(it).repeatDelay||(it.repeat=0),it.immediateRender=!!it.immediateRender,new Tween(nt,it,_parsePosition(this,rt),1),this},_e.call=function(nt,it,rt){return _addToTimeline(this,Tween.delayedCall(0,nt,it),rt)},_e.staggerTo=function(nt,it,rt,st,ot,at,At){return rt.duration=it,rt.stagger=rt.stagger||st,rt.onComplete=at,rt.onCompleteParams=At,rt.parent=this,new Tween(nt,rt,_parsePosition(this,ot)),this},_e.staggerFrom=function(nt,it,rt,st,ot,at,At){return rt.runBackwards=1,_inheritDefaults(rt).immediateRender=_isNotFalse(rt.immediateRender),this.staggerTo(nt,it,rt,st,ot,at,At)},_e.staggerFromTo=function(nt,it,rt,st,ot,at,At,lt){return st.startAt=rt,_inheritDefaults(st).immediateRender=_isNotFalse(st.immediateRender),this.staggerTo(nt,it,st,ot,at,At,lt)},_e.render=function(nt,it,rt){var st=this._time,ot=this._dirty?this.totalDuration():this._tDur,at=this._dur,At=nt<=0?0:_roundPrecise(nt),lt=this._zTime<0!=nt<0&&(this._initted||!at),gt,ct,dt,ht,mt,Ct,ft,pt,Vt,yt,Gt,Bt;if(this!==_globalTimeline&&At>ot&&nt>=0&&(At=ot),At!==this._tTime||rt||lt){if(st!==this._time&&at&&(At+=this._time-st,nt+=this._time-st),gt=At,Vt=this._start,pt=this._ts,Ct=!pt,lt&&(at||(st=this._zTime),(nt||!it)&&(this._zTime=nt)),this._repeat){if(Gt=this._yoyo,mt=at+this._rDelay,this._repeat<-1&&nt<0)return this.totalTime(mt*100+nt,it,rt);if(gt=_roundPrecise(At%mt),At===ot?(ht=this._repeat,gt=at):(ht=~~(At/mt),ht&&ht===At/mt&&(gt=at,ht--),gt>at&&(gt=at)),yt=_animationCycle(this._tTime,mt),!st&&this._tTime&&yt!==ht&&this._tTime-yt*mt-this._dur<=0&&(yt=ht),Gt&&ht&1&&(gt=at-gt,Bt=1),ht!==yt&&!this._lock){var vt=Gt&&yt&1,wt=vt===(Gt&&ht&1);if(ht<yt&&(vt=!vt),st=vt?0:at,this._lock=1,this.render(st||(Bt?0:_roundPrecise(ht*mt)),it,!at)._lock=0,this._tTime=At,!it&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!Bt&&(this.invalidate()._lock=1),st&&st!==this._time||Ct!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(at=this._dur,ot=this._tDur,wt&&(this._lock=2,st=vt?at:-1e-4,this.render(st,!0),this.vars.repeatRefresh&&!Bt&&this.invalidate()),this._lock=0,!this._ts&&!Ct)return this;_propagateYoyoEase(this,Bt)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(ft=_findNextPauseTween(this,_roundPrecise(st),_roundPrecise(gt)),ft&&(At-=gt-(gt=ft._start))),this._tTime=At,this._time=gt,this._act=!pt,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=nt,st=0),!st&&gt&&!it&&!ht&&(_callback(this,"onStart"),this._tTime!==At))return this;if(gt>=st&&nt>=0)for(ct=this._first;ct;){if(dt=ct._next,(ct._act||gt>=ct._start)&&ct._ts&&ft!==ct){if(ct.parent!==this)return this.render(nt,it,rt);if(ct.render(ct._ts>0?(gt-ct._start)*ct._ts:(ct._dirty?ct.totalDuration():ct._tDur)+(gt-ct._start)*ct._ts,it,rt),gt!==this._time||!this._ts&&!Ct){ft=0,dt&&(At+=this._zTime=-_tinyNum);break}}ct=dt}else{ct=this._last;for(var Mt=nt<0?nt:gt;ct;){if(dt=ct._prev,(ct._act||Mt<=ct._end)&&ct._ts&&ft!==ct){if(ct.parent!==this)return this.render(nt,it,rt);if(ct.render(ct._ts>0?(Mt-ct._start)*ct._ts:(ct._dirty?ct.totalDuration():ct._tDur)+(Mt-ct._start)*ct._ts,it,rt||_reverting$1&&(ct._initted||ct._startAt)),gt!==this._time||!this._ts&&!Ct){ft=0,dt&&(At+=this._zTime=Mt?-_tinyNum:_tinyNum);break}}ct=dt}}if(ft&&!it&&(this.pause(),ft.render(gt>=st?0:-_tinyNum)._zTime=gt>=st?1:-1,this._ts))return this._start=Vt,_setEnd(this),this.render(nt,it,rt);this._onUpdate&&!it&&_callback(this,"onUpdate",!0),(At===ot&&this._tTime>=this.totalDuration()||!At&&st)&&(Vt===this._start||Math.abs(pt)!==Math.abs(this._ts))&&(this._lock||((nt||!at)&&(At===ot&&this._ts>0||!At&&this._ts<0)&&_removeFromParent(this,1),!it&&!(nt<0&&!st)&&(At||st||!ot)&&(_callback(this,At===ot&&nt>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(At<ot&&this.timeScale()>0)&&this._prom())))}return this},_e.add=function(nt,it){var rt=this;if(_isNumber(it)||(it=_parsePosition(this,it,nt)),!(nt instanceof Animation)){if(_isArray(nt))return nt.forEach(function(st){return rt.add(st,it)}),this;if(_isString(nt))return this.addLabel(nt,it);if(_isFunction(nt))nt=Tween.delayedCall(0,nt);else return this}return this!==nt?_addToTimeline(this,nt,it):this},_e.getChildren=function(nt,it,rt,st){nt===void 0&&(nt=!0),it===void 0&&(it=!0),rt===void 0&&(rt=!0),st===void 0&&(st=-_bigNum$1);for(var ot=[],at=this._first;at;)at._start>=st&&(at instanceof Tween?it&&ot.push(at):(rt&&ot.push(at),nt&&ot.push.apply(ot,at.getChildren(!0,it,rt)))),at=at._next;return ot},_e.getById=function(nt){for(var it=this.getChildren(1,1,1),rt=it.length;rt--;)if(it[rt].vars.id===nt)return it[rt]},_e.remove=function(nt){return _isString(nt)?this.removeLabel(nt):_isFunction(nt)?this.killTweensOf(nt):(_removeLinkedListItem(this,nt),nt===this._recent&&(this._recent=this._last),_uncache(this))},_e.totalTime=function(nt,it){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?nt/this._ts:(this.totalDuration()-nt)/-this._ts))),et.prototype.totalTime.call(this,nt,it),this._forcing=0,this):this._tTime},_e.addLabel=function(nt,it){return this.labels[nt]=_parsePosition(this,it),this},_e.removeLabel=function(nt){return delete this.labels[nt],this},_e.addPause=function(nt,it,rt){var st=Tween.delayedCall(0,it||_emptyFunc,rt);return st.data="isPause",this._hasPause=1,_addToTimeline(this,st,_parsePosition(this,nt))},_e.removePause=function(nt){var it=this._first;for(nt=_parsePosition(this,nt);it;)it._start===nt&&it.data==="isPause"&&_removeFromParent(it),it=it._next},_e.killTweensOf=function(nt,it,rt){for(var st=this.getTweensOf(nt,rt),ot=st.length;ot--;)_overwritingTween!==st[ot]&&st[ot].kill(nt,it);return this},_e.getTweensOf=function(nt,it){for(var rt=[],st=toArray(nt),ot=this._first,at=_isNumber(it),At;ot;)ot instanceof Tween?_arrayContainsAny(ot._targets,st)&&(at?(!_overwritingTween||ot._initted&&ot._ts)&&ot.globalTime(0)<=it&&ot.globalTime(ot.totalDuration())>it:!it||ot.isActive())&&rt.push(ot):(At=ot.getTweensOf(st,it)).length&&rt.push.apply(rt,At),ot=ot._next;return rt},_e.tweenTo=function(nt,it){it=it||{};var rt=this,st=_parsePosition(rt,nt),ot=it,at=ot.startAt,At=ot.onStart,lt=ot.onStartParams,gt=ot.immediateRender,ct,dt=Tween.to(rt,_setDefaults({ease:it.ease||"none",lazy:!1,immediateRender:!1,time:st,overwrite:"auto",duration:it.duration||Math.abs((st-(at&&"time"in at?at.time:rt._time))/rt.timeScale())||_tinyNum,onStart:function(){if(rt.pause(),!ct){var mt=it.duration||Math.abs((st-(at&&"time"in at?at.time:rt._time))/rt.timeScale());dt._dur!==mt&&_setDuration(dt,mt,0,1).render(dt._time,!0,!0),ct=1}At&&At.apply(dt,lt||[])}},it));return gt?dt.render(0):dt},_e.tweenFromTo=function(nt,it,rt){return this.tweenTo(it,_setDefaults({startAt:{time:_parsePosition(this,nt)}},rt))},_e.recent=function(){return this._recent},_e.nextLabel=function(nt){return nt===void 0&&(nt=this._time),_getLabelInDirection(this,_parsePosition(this,nt))},_e.previousLabel=function(nt){return nt===void 0&&(nt=this._time),_getLabelInDirection(this,_parsePosition(this,nt),1)},_e.currentLabel=function(nt){return arguments.length?this.seek(nt,!0):this.previousLabel(this._time+_tinyNum)},_e.shiftChildren=function(nt,it,rt){rt===void 0&&(rt=0);for(var st=this._first,ot=this.labels,at;st;)st._start>=rt&&(st._start+=nt,st._end+=nt),st=st._next;if(it)for(at in ot)ot[at]>=rt&&(ot[at]+=nt);return _uncache(this)},_e.invalidate=function(nt){var it=this._first;for(this._lock=0;it;)it.invalidate(nt),it=it._next;return et.prototype.invalidate.call(this,nt)},_e.clear=function(nt){nt===void 0&&(nt=!0);for(var it=this._first,rt;it;)rt=it._next,this.remove(it),it=rt;return this._dp&&(this._time=this._tTime=this._pTime=0),nt&&(this.labels={}),_uncache(this)},_e.totalDuration=function(nt){var it=0,rt=this,st=rt._last,ot=_bigNum$1,at,At,lt;if(arguments.length)return rt.timeScale((rt._repeat<0?rt.duration():rt.totalDuration())/(rt.reversed()?-nt:nt));if(rt._dirty){for(lt=rt.parent;st;)at=st._prev,st._dirty&&st.totalDuration(),At=st._start,At>ot&&rt._sort&&st._ts&&!rt._lock?(rt._lock=1,_addToTimeline(rt,st,At-st._delay,1)._lock=0):ot=At,At<0&&st._ts&&(it-=At,(!lt&&!rt._dp||lt&&lt.smoothChildTiming)&&(rt._start+=At/rt._ts,rt._time-=At,rt._tTime-=At),rt.shiftChildren(-At,!1,-1/0),ot=0),st._end>it&&st._ts&&(it=st._end),st=at;_setDuration(rt,rt===_globalTimeline&&rt._time>it?rt._time:it,1,1),rt._dirty=0}return rt._tDur},_.updateRoot=function(nt){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(nt,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var it=_globalTimeline._first;if((!it||!it._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;it&&!it._ts;)it=it._next;it||_ticker.sleep()}}},_}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(_,_e,tt,nt,it,rt,st){var ot=new PropTween(this._pt,_,_e,0,1,_renderComplexString,null,it),at=0,At=0,lt,gt,ct,dt,ht,mt,Ct,ft;for(ot.b=tt,ot.e=nt,tt+="",nt+="",(Ct=~nt.indexOf("random("))&&(nt=_replaceRandom(nt)),rt&&(ft=[tt,nt],rt(ft,_,_e),tt=ft[0],nt=ft[1]),gt=tt.match(_complexStringNumExp)||[];lt=_complexStringNumExp.exec(nt);)dt=lt[0],ht=nt.substring(at,lt.index),ct?ct=(ct+1)%5:ht.substr(-5)==="rgba("&&(ct=1),dt!==gt[At++]&&(mt=parseFloat(gt[At-1])||0,ot._pt={_next:ot._pt,p:ht||At===1?ht:",",s:mt,c:dt.charAt(1)==="="?_parseRelative(mt,dt)-mt:parseFloat(dt)-mt,m:ct&&ct<4?Math.round:0},at=_complexStringNumExp.lastIndex);return ot.c=at<nt.length?nt.substring(at,nt.length):"",ot.fp=st,(_relExp.test(nt)||Ct)&&(ot.e=0),this._pt=ot,ot},_addPropTween=function(_,_e,tt,nt,it,rt,st,ot,at,At){_isFunction(nt)&&(nt=nt(it||0,_,rt));var lt=_[_e],gt=tt!=="get"?tt:_isFunction(lt)?at?_[_e.indexOf("set")||!_isFunction(_["get"+_e.substr(3)])?_e:"get"+_e.substr(3)](at):_[_e]():lt,ct=_isFunction(lt)?at?_setterFuncWithParam:_setterFunc:_setterPlain,dt;if(_isString(nt)&&(~nt.indexOf("random(")&&(nt=_replaceRandom(nt)),nt.charAt(1)==="="&&(dt=_parseRelative(gt,nt)+(getUnit(gt)||0),(dt||dt===0)&&(nt=dt))),!At||gt!==nt||_forceAllPropTweens)return!isNaN(gt*nt)&&nt!==""?(dt=new PropTween(this._pt,_,_e,+gt||0,nt-(gt||0),typeof lt=="boolean"?_renderBoolean:_renderPlain,0,ct),at&&(dt.fp=at),st&&dt.modifier(st,this,_),this._pt=dt):(!lt&&!(_e in _)&&_missingPlugin(_e,nt),_addComplexStringPropTween.call(this,_,_e,gt,nt,ct,ot||_config.stringFilter,at))},_processVars=function(_,_e,tt,nt,it){if(_isFunction(_)&&(_=_parseFuncOrString(_,it,_e,tt,nt)),!_isObject(_)||_.style&&_.nodeType||_isArray(_)||_isTypedArray(_))return _isString(_)?_parseFuncOrString(_,it,_e,tt,nt):_;var rt={},st;for(st in _)rt[st]=_parseFuncOrString(_[st],it,_e,tt,nt);return rt},_checkPlugin=function(_,_e,tt,nt,it,rt){var st,ot,at,At;if(_plugins[_]&&(st=new _plugins[_]).init(it,st.rawVars?_e[_]:_processVars(_e[_],nt,it,rt,tt),tt,nt,rt)!==!1&&(tt._pt=ot=new PropTween(tt._pt,it,_,0,1,st.render,st,0,st.priority),tt!==_quickTween))for(at=tt._ptLookup[tt._targets.indexOf(it)],At=st._props.length;At--;)at[st._props[At]]=ot;return st},_overwritingTween,_forceAllPropTweens,_initTween=function et(_,_e,tt){var nt=_.vars,it=nt.ease,rt=nt.startAt,st=nt.immediateRender,ot=nt.lazy,at=nt.onUpdate,At=nt.onUpdateParams,lt=nt.callbackScope,gt=nt.runBackwards,ct=nt.yoyoEase,dt=nt.keyframes,ht=nt.autoRevert,mt=_._dur,Ct=_._startAt,ft=_._targets,pt=_.parent,Vt=pt&&pt.data==="nested"?pt.vars.targets:ft,yt=_._overwrite==="auto"&&!_suppressOverwrites,Gt=_.timeline,Bt,vt,wt,Mt,kt,Nt,Yt,Lt,Xt,_t,Tt,St,Zt;if(Gt&&(!dt||!it)&&(it="none"),_._ease=_parseEase(it,_defaults.ease),_._yEase=ct?_invertEase(_parseEase(ct===!0?it:ct,_defaults.ease)):0,ct&&_._yoyo&&!_._repeat&&(ct=_._yEase,_._yEase=_._ease,_._ease=ct),_._from=!Gt&&!!nt.runBackwards,!Gt||dt&&!nt.stagger){if(Lt=ft[0]?_getCache(ft[0]).harness:0,St=Lt&&nt[Lt.prop],Bt=_copyExcluding(nt,_reservedProps),Ct&&(Ct._zTime<0&&Ct.progress(1),_e<0&&gt&&st&&!ht?Ct.render(-1,!0):Ct.revert(gt&&mt?_revertConfigNoKill:_startAtRevertConfig),Ct._lazy=0),rt){if(_removeFromParent(_._startAt=Tween.set(ft,_setDefaults({data:"isStart",overwrite:!1,parent:pt,immediateRender:!0,lazy:!Ct&&_isNotFalse(ot),startAt:null,delay:0,onUpdate:at,onUpdateParams:At,callbackScope:lt,stagger:0},rt))),_._startAt._dp=0,_._startAt._sat=_,_e<0&&(_reverting$1||!st&&!ht)&&_._startAt.revert(_revertConfigNoKill),st&&mt&&_e<=0&&tt<=0){_e&&(_._zTime=_e);return}}else if(gt&&mt&&!Ct){if(_e&&(st=!1),wt=_setDefaults({overwrite:!1,data:"isFromStart",lazy:st&&!Ct&&_isNotFalse(ot),immediateRender:st,stagger:0,parent:pt},Bt),St&&(wt[Lt.prop]=St),_removeFromParent(_._startAt=Tween.set(ft,wt)),_._startAt._dp=0,_._startAt._sat=_,_e<0&&(_reverting$1?_._startAt.revert(_revertConfigNoKill):_._startAt.render(-1,!0)),_._zTime=_e,!st)et(_._startAt,_tinyNum,_tinyNum);else if(!_e)return}for(_._pt=_._ptCache=0,ot=mt&&_isNotFalse(ot)||ot&&!mt,vt=0;vt<ft.length;vt++){if(kt=ft[vt],Yt=kt._gsap||_harness(ft)[vt]._gsap,_._ptLookup[vt]=_t={},_lazyLookup[Yt.id]&&_lazyTweens.length&&_lazyRender(),Tt=Vt===ft?vt:Vt.indexOf(kt),Lt&&(Xt=new Lt).init(kt,St||Bt,_,Tt,Vt)!==!1&&(_._pt=Mt=new PropTween(_._pt,kt,Xt.name,0,1,Xt.render,Xt,0,Xt.priority),Xt._props.forEach(function(Et){_t[Et]=Mt}),Xt.priority&&(Nt=1)),!Lt||St)for(wt in Bt)_plugins[wt]&&(Xt=_checkPlugin(wt,Bt,_,Tt,kt,Vt))?Xt.priority&&(Nt=1):_t[wt]=Mt=_addPropTween.call(_,kt,wt,"get",Bt[wt],Tt,Vt,0,nt.stringFilter);_._op&&_._op[vt]&&_.kill(kt,_._op[vt]),yt&&_._pt&&(_overwritingTween=_,_globalTimeline.killTweensOf(kt,_t,_.globalTime(_e)),Zt=!_.parent,_overwritingTween=0),_._pt&&ot&&(_lazyLookup[Yt.id]=1)}Nt&&_sortPropTweensByPriority(_),_._onInit&&_._onInit(_)}_._onUpdate=at,_._initted=(!_._op||_._pt)&&!Zt,dt&&_e<=0&&Gt.render(_bigNum$1,!0,!0)},_updatePropTweens=function(_,_e,tt,nt,it,rt,st){var ot=(_._pt&&_._ptCache||(_._ptCache={}))[_e],at,At,lt,gt;if(!ot)for(ot=_._ptCache[_e]=[],lt=_._ptLookup,gt=_._targets.length;gt--;){if(at=lt[gt][_e],at&&at.d&&at.d._pt)for(at=at.d._pt;at&&at.p!==_e&&at.fp!==_e;)at=at._next;if(!at)return _forceAllPropTweens=1,_.vars[_e]="+=0",_initTween(_,st),_forceAllPropTweens=0,1;ot.push(at)}for(gt=ot.length;gt--;)At=ot[gt],at=At._pt||At,at.s=(nt||nt===0)&&!it?nt:at.s+(nt||0)+rt*at.c,at.c=tt-at.s,At.e&&(At.e=_round(tt)+getUnit(At.e)),At.b&&(At.b=at.s+getUnit(At.b))},_addAliasesToVars=function(_,_e){var tt=_[0]?_getCache(_[0]).harness:0,nt=tt&&tt.aliases,it,rt,st,ot;if(!nt)return _e;it=_merge({},_e);for(rt in nt)if(rt in it)for(ot=nt[rt].split(","),st=ot.length;st--;)it[ot[st]]=it[rt];return it},_parseKeyframe=function(_,_e,tt,nt){var it=_e.ease||nt||"power1.inOut",rt,st;if(_isArray(_e))st=tt[_]||(tt[_]=[]),_e.forEach(function(ot,at){return st.push({t:at/(_e.length-1)*100,v:ot,e:it})});else for(rt in _e)st=tt[rt]||(tt[rt]=[]),rt==="ease"||st.push({t:parseFloat(_),v:_e[rt],e:it})},_parseFuncOrString=function(_,_e,tt,nt,it){return _isFunction(_)?_.call(_e,tt,nt,it):_isString(_)&&~_.indexOf("random(")?_replaceRandom(_):_},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(et){return _staggerPropsToSkip[et]=1});var Tween=function(et){_inheritsLoose(_,et);function _(tt,nt,it,rt){var st;typeof nt=="number"&&(it.duration=nt,nt=it,it=null),st=et.call(this,rt?nt:_inheritDefaults(nt))||this;var ot=st.vars,at=ot.duration,At=ot.delay,lt=ot.immediateRender,gt=ot.stagger,ct=ot.overwrite,dt=ot.keyframes,ht=ot.defaults,mt=ot.scrollTrigger,Ct=ot.yoyoEase,ft=nt.parent||_globalTimeline,pt=(_isArray(tt)||_isTypedArray(tt)?_isNumber(tt[0]):"length"in nt)?[tt]:toArray(tt),Vt,yt,Gt,Bt,vt,wt,Mt,kt;if(st._targets=pt.length?_harness(pt):_warn("GSAP target "+tt+" not found. https://greensock.com",!_config.nullTargetWarn)||[],st._ptLookup=[],st._overwrite=ct,dt||gt||_isFuncOrString(at)||_isFuncOrString(At)){if(nt=st.vars,Vt=st.timeline=new Timeline({data:"nested",defaults:ht||{},targets:ft&&ft.data==="nested"?ft.vars.targets:pt}),Vt.kill(),Vt.parent=Vt._dp=_assertThisInitialized(st),Vt._start=0,gt||_isFuncOrString(at)||_isFuncOrString(At)){if(Bt=pt.length,Mt=gt&&distribute(gt),_isObject(gt))for(vt in gt)~_staggerTweenProps.indexOf(vt)&&(kt||(kt={}),kt[vt]=gt[vt]);for(yt=0;yt<Bt;yt++)Gt=_copyExcluding(nt,_staggerPropsToSkip),Gt.stagger=0,Ct&&(Gt.yoyoEase=Ct),kt&&_merge(Gt,kt),wt=pt[yt],Gt.duration=+_parseFuncOrString(at,_assertThisInitialized(st),yt,wt,pt),Gt.delay=(+_parseFuncOrString(At,_assertThisInitialized(st),yt,wt,pt)||0)-st._delay,!gt&&Bt===1&&Gt.delay&&(st._delay=At=Gt.delay,st._start+=At,Gt.delay=0),Vt.to(wt,Gt,Mt?Mt(yt,wt,pt):0),Vt._ease=_easeMap.none;Vt.duration()?at=At=0:st.timeline=0}else if(dt){_inheritDefaults(_setDefaults(Vt.vars.defaults,{ease:"none"})),Vt._ease=_parseEase(dt.ease||nt.ease||"none");var Nt=0,Yt,Lt,Xt;if(_isArray(dt))dt.forEach(function(_t){return Vt.to(pt,_t,">")}),Vt.duration();else{Gt={};for(vt in dt)vt==="ease"||vt==="easeEach"||_parseKeyframe(vt,dt[vt],Gt,dt.easeEach);for(vt in Gt)for(Yt=Gt[vt].sort(function(_t,Tt){return _t.t-Tt.t}),Nt=0,yt=0;yt<Yt.length;yt++)Lt=Yt[yt],Xt={ease:Lt.e,duration:(Lt.t-(yt?Yt[yt-1].t:0))/100*at},Xt[vt]=Lt.v,Vt.to(pt,Xt,Nt),Nt+=Xt.duration;Vt.duration()<at&&Vt.to({},{duration:at-Vt.duration()})}}at||st.duration(at=Vt.duration())}else st.timeline=0;return ct===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(st),_globalTimeline.killTweensOf(pt),_overwritingTween=0),_addToTimeline(ft,_assertThisInitialized(st),it),nt.reversed&&st.reverse(),nt.paused&&st.paused(!0),(lt||!at&&!dt&&st._start===_roundPrecise(ft._time)&&_isNotFalse(lt)&&_hasNoPausedAncestors(_assertThisInitialized(st))&&ft.data!=="nested")&&(st._tTime=-_tinyNum,st.render(Math.max(0,-At)||0)),mt&&_scrollTrigger(_assertThisInitialized(st),mt),st}var _e=_.prototype;return _e.render=function(nt,it,rt){var st=this._time,ot=this._tDur,at=this._dur,At=nt<0,lt=nt>ot-_tinyNum&&!At?ot:nt<_tinyNum?0:nt,gt,ct,dt,ht,mt,Ct,ft,pt,Vt;if(!at)_renderZeroDurationTween(this,nt,it,rt);else if(lt!==this._tTime||!nt||rt||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==At){if(gt=lt,pt=this.timeline,this._repeat){if(ht=at+this._rDelay,this._repeat<-1&&At)return this.totalTime(ht*100+nt,it,rt);if(gt=_roundPrecise(lt%ht),lt===ot?(dt=this._repeat,gt=at):(dt=~~(lt/ht),dt&&dt===lt/ht&&(gt=at,dt--),gt>at&&(gt=at)),Ct=this._yoyo&&dt&1,Ct&&(Vt=this._yEase,gt=at-gt),mt=_animationCycle(this._tTime,ht),gt===st&&!rt&&this._initted)return this._tTime=lt,this;dt!==mt&&(pt&&this._yEase&&_propagateYoyoEase(pt,Ct),this.vars.repeatRefresh&&!Ct&&!this._lock&&(this._lock=rt=1,this.render(_roundPrecise(ht*dt),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,At?nt:gt,rt,it,lt))return this._tTime=0,this;if(st!==this._time)return this;if(at!==this._dur)return this.render(nt,it,rt)}if(this._tTime=lt,this._time=gt,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=ft=(Vt||this._ease)(gt/at),this._from&&(this.ratio=ft=1-ft),gt&&!st&&!it&&!dt&&(_callback(this,"onStart"),this._tTime!==lt))return this;for(ct=this._pt;ct;)ct.r(ft,ct.d),ct=ct._next;pt&&pt.render(nt<0?nt:!gt&&Ct?-_tinyNum:pt._dur*pt._ease(gt/this._dur),it,rt)||this._startAt&&(this._zTime=nt),this._onUpdate&&!it&&(At&&_rewindStartAt(this,nt,it,rt),_callback(this,"onUpdate")),this._repeat&&dt!==mt&&this.vars.onRepeat&&!it&&this.parent&&_callback(this,"onRepeat"),(lt===this._tDur||!lt)&&this._tTime===lt&&(At&&!this._onUpdate&&_rewindStartAt(this,nt,!0,!0),(nt||!at)&&(lt===this._tDur&&this._ts>0||!lt&&this._ts<0)&&_removeFromParent(this,1),!it&&!(At&&!st)&&(lt||st||Ct)&&(_callback(this,lt===ot?"onComplete":"onReverseComplete",!0),this._prom&&!(lt<ot&&this.timeScale()>0)&&this._prom()))}return this},_e.targets=function(){return this._targets},_e.invalidate=function(nt){return(!nt||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(nt),et.prototype.invalidate.call(this,nt)},_e.resetTo=function(nt,it,rt,st){_tickerActive||_ticker.wake(),this._ts||this.play();var ot=Math.min(this._dur,(this._dp._time-this._start)*this._ts),at;return this._initted||_initTween(this,ot),at=this._ease(ot/this._dur),_updatePropTweens(this,nt,it,rt,st,at,ot)?this.resetTo(nt,it,rt,st):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},_e.kill=function(nt,it){if(it===void 0&&(it="all"),!nt&&(!it||it==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var rt=this.timeline.totalDuration();return this.timeline.killTweensOf(nt,it,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&rt!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/rt,0,1),this}var st=this._targets,ot=nt?toArray(nt):st,at=this._ptLookup,At=this._pt,lt,gt,ct,dt,ht,mt,Ct;if((!it||it==="all")&&_arraysMatch(st,ot))return it==="all"&&(this._pt=0),_interrupt(this);for(lt=this._op=this._op||[],it!=="all"&&(_isString(it)&&(ht={},_forEachName(it,function(ft){return ht[ft]=1}),it=ht),it=_addAliasesToVars(st,it)),Ct=st.length;Ct--;)if(~ot.indexOf(st[Ct])){gt=at[Ct],it==="all"?(lt[Ct]=it,dt=gt,ct={}):(ct=lt[Ct]=lt[Ct]||{},dt=it);for(ht in dt)mt=gt&&gt[ht],mt&&((!("kill"in mt.d)||mt.d.kill(ht)===!0)&&_removeLinkedListItem(this,mt,"_pt"),delete gt[ht]),ct!=="all"&&(ct[ht]=1)}return this._initted&&!this._pt&&At&&_interrupt(this),this},_.to=function(nt,it){return new _(nt,it,arguments[2])},_.from=function(nt,it){return _createTweenType(1,arguments)},_.delayedCall=function(nt,it,rt,st){return new _(it,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:nt,onComplete:it,onReverseComplete:it,onCompleteParams:rt,onReverseCompleteParams:rt,callbackScope:st})},_.fromTo=function(nt,it,rt){return _createTweenType(2,arguments)},_.set=function(nt,it){return it.duration=0,it.repeatDelay||(it.repeat=0),new _(nt,it)},_.killTweensOf=function(nt,it,rt){return _globalTimeline.killTweensOf(nt,it,rt)},_}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(et){Tween[et]=function(){var _=new Timeline,_e=_slice.call(arguments,0);return _e.splice(et==="staggerFromTo"?5:4,0,0),_[et].apply(_,_e)}});var _setterPlain=function(_,_e,tt){return _[_e]=tt},_setterFunc=function(_,_e,tt){return _[_e](tt)},_setterFuncWithParam=function(_,_e,tt,nt){return _[_e](nt.fp,tt)},_setterAttribute=function(_,_e,tt){return _.setAttribute(_e,tt)},_getSetter=function(_,_e){return _isFunction(_[_e])?_setterFunc:_isUndefined(_[_e])&&_.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(_,_e){return _e.set(_e.t,_e.p,Math.round((_e.s+_e.c*_)*1e6)/1e6,_e)},_renderBoolean=function(_,_e){return _e.set(_e.t,_e.p,!!(_e.s+_e.c*_),_e)},_renderComplexString=function(_,_e){var tt=_e._pt,nt="";if(!_&&_e.b)nt=_e.b;else if(_===1&&_e.e)nt=_e.e;else{for(;tt;)nt=tt.p+(tt.m?tt.m(tt.s+tt.c*_):Math.round((tt.s+tt.c*_)*1e4)/1e4)+nt,tt=tt._next;nt+=_e.c}_e.set(_e.t,_e.p,nt,_e)},_renderPropTweens=function(_,_e){for(var tt=_e._pt;tt;)tt.r(_,tt.d),tt=tt._next},_addPluginModifier=function(_,_e,tt,nt){for(var it=this._pt,rt;it;)rt=it._next,it.p===nt&&it.modifier(_,_e,tt),it=rt},_killPropTweensOf=function(_){for(var _e=this._pt,tt,nt;_e;)nt=_e._next,_e.p===_&&!_e.op||_e.op===_?_removeLinkedListItem(this,_e,"_pt"):_e.dep||(tt=1),_e=nt;return!tt},_setterWithModifier=function(_,_e,tt,nt){nt.mSet(_,_e,nt.m.call(nt.tween,tt,nt.mt),nt)},_sortPropTweensByPriority=function(_){for(var _e=_._pt,tt,nt,it,rt;_e;){for(tt=_e._next,nt=it;nt&&nt.pr>_e.pr;)nt=nt._next;(_e._prev=nt?nt._prev:rt)?_e._prev._next=_e:it=_e,(_e._next=nt)?nt._prev=_e:rt=_e,_e=tt}_._pt=it},PropTween=function(){function et(_e,tt,nt,it,rt,st,ot,at,At){this.t=tt,this.s=it,this.c=rt,this.p=nt,this.r=st||_renderPlain,this.d=ot||this,this.set=at||_setterPlain,this.pr=At||0,this._next=_e,_e&&(_e._prev=this)}var _=et.prototype;return _.modifier=function(tt,nt,it){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=tt,this.mt=it,this.tween=nt},et}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(et){return _reservedProps[et]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_dispatch=function(_){return(_listeners[_]||_emptyArray).map(function(_e){return _e()})},_onMediaChange=function(){var _=Date.now(),_e=[];_-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(tt){var nt=tt.queries,it=tt.conditions,rt,st,ot,at;for(st in nt)rt=_win$1.matchMedia(nt[st]).matches,rt&&(ot=1),rt!==it[st]&&(it[st]=rt,at=1);at&&(tt.revert(),ot&&_e.push(tt))}),_dispatch("matchMediaRevert"),_e.forEach(function(tt){return tt.onMatch(tt)}),_lastMediaTime=_,_dispatch("matchMedia"))},Context=function(){function et(_e,tt){this.selector=tt&&selector(tt),this.data=[],this._r=[],this.isReverted=!1,_e&&this.add(_e)}var _=et.prototype;return _.add=function(tt,nt,it){_isFunction(tt)&&(it=nt,nt=tt,tt=_isFunction);var rt=this,st=function(){var at=_context,At=rt.selector,lt;return at&&at!==rt&&at.data.push(rt),it&&(rt.selector=selector(it)),_context=rt,lt=nt.apply(rt,arguments),_isFunction(lt)&&rt._r.push(lt),_context=at,rt.selector=At,rt.isReverted=!1,lt};return rt.last=st,tt===_isFunction?st(rt):tt?rt[tt]=st:st},_.ignore=function(tt){var nt=_context;_context=null,tt(this),_context=nt},_.getTweens=function(){var tt=[];return this.data.forEach(function(nt){return nt instanceof et?tt.push.apply(tt,nt.getTweens()):nt instanceof Tween&&!(nt.parent&&nt.parent.data==="nested")&&tt.push(nt)}),tt},_.clear=function(){this._r.length=this.data.length=0},_.kill=function(tt,nt){var it=this;if(tt){var rt=this.getTweens();this.data.forEach(function(ot){ot.data==="isFlip"&&(ot.revert(),ot.getChildren(!0,!0,!1).forEach(function(at){return rt.splice(rt.indexOf(at),1)}))}),rt.map(function(ot){return{g:ot.globalTime(0),t:ot}}).sort(function(ot,at){return at.g-ot.g||-1}).forEach(function(ot){return ot.t.revert(tt)}),this.data.forEach(function(ot){return!(ot instanceof Animation)&&ot.revert&&ot.revert(tt)}),this._r.forEach(function(ot){return ot(tt,it)}),this.isReverted=!0}else this.data.forEach(function(ot){return ot.kill&&ot.kill()});if(this.clear(),nt){var st=_media.indexOf(this);~st&&_media.splice(st,1)}},_.revert=function(tt){this.kill(tt||{})},et}(),MatchMedia=function(){function et(_e){this.contexts=[],this.scope=_e}var _=et.prototype;return _.add=function(tt,nt,it){_isObject(tt)||(tt={matches:tt});var rt=new Context(0,it||this.scope),st=rt.conditions={},ot,at,At;this.contexts.push(rt),nt=rt.add("onMatch",nt),rt.queries=tt;for(at in tt)at==="all"?At=1:(ot=_win$1.matchMedia(tt[at]),ot&&(_media.indexOf(rt)<0&&_media.push(rt),(st[at]=ot.matches)&&(At=1),ot.addListener?ot.addListener(_onMediaChange):ot.addEventListener("change",_onMediaChange)));return At&&nt(rt),this},_.revert=function(tt){this.kill(tt||{})},_.kill=function(tt){this.contexts.forEach(function(nt){return nt.kill(tt,!0)})},et}(),_gsap={registerPlugin:function(){for(var _=arguments.length,_e=new Array(_),tt=0;tt<_;tt++)_e[tt]=arguments[tt];_e.forEach(function(nt){return _createPlugin(nt)})},timeline:function(_){return new Timeline(_)},getTweensOf:function(_,_e){return _globalTimeline.getTweensOf(_,_e)},getProperty:function(_,_e,tt,nt){_isString(_)&&(_=toArray(_)[0]);var it=_getCache(_||{}).get,rt=tt?_passThrough:_numericIfPossible;return tt==="native"&&(tt=""),_&&(_e?rt((_plugins[_e]&&_plugins[_e].get||it)(_,_e,tt,nt)):function(st,ot,at){return rt((_plugins[st]&&_plugins[st].get||it)(_,st,ot,at))})},quickSetter:function(_,_e,tt){if(_=toArray(_),_.length>1){var nt=_.map(function(At){return gsap.quickSetter(At,_e,tt)}),it=nt.length;return function(At){for(var lt=it;lt--;)nt[lt](At)}}_=_[0]||{};var rt=_plugins[_e],st=_getCache(_),ot=st.harness&&(st.harness.aliases||{})[_e]||_e,at=rt?function(At){var lt=new rt;_quickTween._pt=0,lt.init(_,tt?At+tt:At,_quickTween,0,[_]),lt.render(1,lt),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:st.set(_,ot);return rt?at:function(At){return at(_,ot,tt?At+tt:At,st,1)}},quickTo:function(_,_e,tt){var nt,it=gsap.to(_,_merge((nt={},nt[_e]="+=0.1",nt.paused=!0,nt),tt||{})),rt=function(ot,at,At){return it.resetTo(_e,ot,at,At)};return rt.tween=it,rt},isTweening:function(_){return _globalTimeline.getTweensOf(_,!0).length>0},defaults:function(_){return _&&_.ease&&(_.ease=_parseEase(_.ease,_defaults.ease)),_mergeDeep(_defaults,_||{})},config:function(_){return _mergeDeep(_config,_||{})},registerEffect:function(_){var _e=_.name,tt=_.effect,nt=_.plugins,it=_.defaults,rt=_.extendTimeline;(nt||"").split(",").forEach(function(st){return st&&!_plugins[st]&&!_globals[st]&&_warn(_e+" effect requires "+st+" plugin.")}),_effects[_e]=function(st,ot,at){return tt(toArray(st),_setDefaults(ot||{},it),at)},rt&&(Timeline.prototype[_e]=function(st,ot,at){return this.add(_effects[_e](st,_isObject(ot)?ot:(at=ot)&&{},this),at)})},registerEase:function(_,_e){_easeMap[_]=_parseEase(_e)},parseEase:function(_,_e){return arguments.length?_parseEase(_,_e):_easeMap},getById:function(_){return _globalTimeline.getById(_)},exportRoot:function(_,_e){_===void 0&&(_={});var tt=new Timeline(_),nt,it;for(tt.smoothChildTiming=_isNotFalse(_.smoothChildTiming),_globalTimeline.remove(tt),tt._dp=0,tt._time=tt._tTime=_globalTimeline._time,nt=_globalTimeline._first;nt;)it=nt._next,(_e||!(!nt._dur&&nt instanceof Tween&&nt.vars.onComplete===nt._targets[0]))&&_addToTimeline(tt,nt,nt._start-nt._delay),nt=it;return _addToTimeline(_globalTimeline,tt,0),tt},context:function(_,_e){return _?new Context(_,_e):_context},matchMedia:function(_){return new MatchMedia(_)},matchMediaRefresh:function(){return _media.forEach(function(_){var _e=_.conditions,tt,nt;for(nt in _e)_e[nt]&&(_e[nt]=!1,tt=1);tt&&_.revert()})||_onMediaChange()},addEventListener:function(_,_e){var tt=_listeners[_]||(_listeners[_]=[]);~tt.indexOf(_e)||tt.push(_e)},removeEventListener:function(_,_e){var tt=_listeners[_],nt=tt&&tt.indexOf(_e);nt>=0&&tt.splice(nt,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(_){return _&&_context&&(_context.data.push(_),_._ctx=_context),_context},suppressOverwrites:function(_){return _suppressOverwrites=_}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(et){return _gsap[et]=Tween[et]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(_,_e){for(var tt=_._pt;tt&&tt.p!==_e&&tt.op!==_e&&tt.fp!==_e;)tt=tt._next;return tt},_addModifiers=function(_,_e){var tt=_._targets,nt,it,rt;for(nt in _e)for(it=tt.length;it--;)rt=_._ptLookup[it][nt],rt&&(rt=rt.d)&&(rt._pt&&(rt=_getPluginPropTween(rt,nt)),rt&&rt.modifier&&rt.modifier(_e[nt],_,tt[it],nt))},_buildModifierPlugin=function(_,_e){return{name:_,rawVars:1,init:function(nt,it,rt){rt._onInit=function(st){var ot,at;if(_isString(it)&&(ot={},_forEachName(it,function(At){return ot[At]=1}),it=ot),_e){ot={};for(at in it)ot[at]=_e(it[at]);it=ot}_addModifiers(st,it)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function(_,_e,tt,nt,it){var rt,st,ot;this.tween=tt;for(rt in _e)ot=_.getAttribute(rt)||"",st=this.add(_,"setAttribute",(ot||0)+"",_e[rt],nt,it,0,0,rt),st.op=rt,st.b=ot,this._props.push(rt)},render:function(_,_e){for(var tt=_e._pt;tt;)_reverting$1?tt.set(tt.t,tt.p,tt.b,tt):tt.r(_,tt.d),tt=tt._next}},{name:"endArray",init:function(_,_e){for(var tt=_e.length;tt--;)this.add(_,tt,_[tt]||0,_e[tt],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.11.5";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(_,_e){return _e.set(_e.t,_e.p,Math.round((_e.s+_e.c*_)*1e4)/1e4+_e.u,_e)},_renderPropWithEnd=function(_,_e){return _e.set(_e.t,_e.p,_===1?_e.e:Math.round((_e.s+_e.c*_)*1e4)/1e4+_e.u,_e)},_renderCSSPropWithBeginning=function(_,_e){return _e.set(_e.t,_e.p,_?Math.round((_e.s+_e.c*_)*1e4)/1e4+_e.u:_e.b,_e)},_renderRoundedCSSProp=function(_,_e){var tt=_e.s+_e.c*_;_e.set(_e.t,_e.p,~~(tt+(tt<0?-.5:.5))+_e.u,_e)},_renderNonTweeningValue=function(_,_e){return _e.set(_e.t,_e.p,_?_e.e:_e.b,_e)},_renderNonTweeningValueOnlyAtEnd=function(_,_e){return _e.set(_e.t,_e.p,_!==1?_e.b:_e.e,_e)},_setterCSSStyle=function(_,_e,tt){return _.style[_e]=tt},_setterCSSProp=function(_,_e,tt){return _.style.setProperty(_e,tt)},_setterTransform=function(_,_e,tt){return _._gsap[_e]=tt},_setterScale=function(_,_e,tt){return _._gsap.scaleX=_._gsap.scaleY=tt},_setterScaleWithRender=function(_,_e,tt,nt,it){var rt=_._gsap;rt.scaleX=rt.scaleY=tt,rt.renderTransform(it,rt)},_setterTransformWithRender=function(_,_e,tt,nt,it){var rt=_._gsap;rt[_e]=tt,rt.renderTransform(it,rt)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function et(_,_e){var tt=this,nt=this.target,it=nt.style;if(_ in _transformProps){if(this.tfm=this.tfm||{},_!=="transform")_=_propertyAliases[_]||_,~_.indexOf(",")?_.split(",").forEach(function(rt){return tt.tfm[rt]=_get(nt,rt)}):this.tfm[_]=nt._gsap.x?nt._gsap[_]:_get(nt,_);else return _propertyAliases.transform.split(",").forEach(function(rt){return et.call(tt,rt,_e)});if(this.props.indexOf(_transformProp)>=0)return;nt._gsap.svg&&(this.svgo=nt.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,_e,"")),_=_transformProp}(it||_e)&&this.props.push(_,_e,it[_])},_removeIndependentTransforms=function(_){_.translate&&(_.removeProperty("translate"),_.removeProperty("scale"),_.removeProperty("rotate"))},_revertStyle=function(){var _=this.props,_e=this.target,tt=_e.style,nt=_e._gsap,it,rt;for(it=0;it<_.length;it+=3)_[it+1]?_e[_[it]]=_[it+2]:_[it+2]?tt[_[it]]=_[it+2]:tt.removeProperty(_[it].substr(0,2)==="--"?_[it]:_[it].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(rt in this.tfm)nt[rt]=this.tfm[rt];nt.svg&&(nt.renderTransform(),_e.setAttribute("data-svg-origin",this.svgo||"")),it=_reverting(),(!it||!it.isStart)&&!tt[_transformProp]&&(_removeIndependentTransforms(tt),nt.uncache=1)}},_getStyleSaver=function(_,_e){var tt={target:_,props:[],revert:_revertStyle,save:_saveStyle};return _._gsap||gsap.core.getCache(_),_e&&_e.split(",").forEach(function(nt){return tt.save(nt)}),tt},_supports3D,_createElement=function(_,_e){var tt=_doc.createElementNS?_doc.createElementNS((_e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),_):_doc.createElement(_);return tt.style?tt:_doc.createElement(_)},_getComputedProperty=function et(_,_e,tt){var nt=getComputedStyle(_);return nt[_e]||nt.getPropertyValue(_e.replace(_capsExp,"-$1").toLowerCase())||nt.getPropertyValue(_e)||!tt&&et(_,_checkPropPrefix(_e)||_e,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(_,_e,tt){var nt=_e||_tempDiv,it=nt.style,rt=5;if(_ in it&&!tt)return _;for(_=_.charAt(0).toUpperCase()+_.substr(1);rt--&&!(_prefixes[rt]+_ in it););return rt<0?null:(rt===3?"ms":rt>=0?_prefixes[rt]:"")+_},_initCore=function(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap.core.reverting,_pluginInitted=1)},_getBBoxHack=function et(_){var _e=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),tt=this.parentNode,nt=this.nextSibling,it=this.style.cssText,rt;if(_docElement.appendChild(_e),_e.appendChild(this),this.style.display="block",_)try{rt=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=et}catch{}else this._gsapBBox&&(rt=this._gsapBBox());return tt&&(nt?tt.insertBefore(this,nt):tt.appendChild(this)),_docElement.removeChild(_e),this.style.cssText=it,rt},_getAttributeFallbacks=function(_,_e){for(var tt=_e.length;tt--;)if(_.hasAttribute(_e[tt]))return _.getAttribute(_e[tt])},_getBBox=function(_){var _e;try{_e=_.getBBox()}catch{_e=_getBBoxHack.call(_,!0)}return _e&&(_e.width||_e.height)||_.getBBox===_getBBoxHack||(_e=_getBBoxHack.call(_,!0)),_e&&!_e.width&&!_e.x&&!_e.y?{x:+_getAttributeFallbacks(_,["x","cx","x1"])||0,y:+_getAttributeFallbacks(_,["y","cy","y1"])||0,width:0,height:0}:_e},_isSVG=function(_){return!!(_.getCTM&&(!_.parentNode||_.ownerSVGElement)&&_getBBox(_))},_removeProperty=function(_,_e){if(_e){var tt=_.style;_e in _transformProps&&_e!==_transformOriginProp&&(_e=_transformProp),tt.removeProperty?((_e.substr(0,2)==="ms"||_e.substr(0,6)==="webkit")&&(_e="-"+_e),tt.removeProperty(_e.replace(_capsExp,"-$1").toLowerCase())):tt.removeAttribute(_e)}},_addNonTweeningPT=function(_,_e,tt,nt,it,rt){var st=new PropTween(_._pt,_e,tt,0,1,rt?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return _._pt=st,st.b=nt,st.e=it,_._props.push(tt),st},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function et(_,_e,tt,nt){var it=parseFloat(tt)||0,rt=(tt+"").trim().substr((it+"").length)||"px",st=_tempDiv.style,ot=_horizontalExp.test(_e),at=_.tagName.toLowerCase()==="svg",At=(at?"client":"offset")+(ot?"Width":"Height"),lt=100,gt=nt==="px",ct=nt==="%",dt,ht,mt,Ct;return nt===rt||!it||_nonConvertibleUnits[nt]||_nonConvertibleUnits[rt]?it:(rt!=="px"&&!gt&&(it=et(_,_e,tt,"px")),Ct=_.getCTM&&_isSVG(_),(ct||rt==="%")&&(_transformProps[_e]||~_e.indexOf("adius"))?(dt=Ct?_.getBBox()[ot?"width":"height"]:_[At],_round(ct?it/dt*lt:it/100*dt)):(st[ot?"width":"height"]=lt+(gt?rt:nt),ht=~_e.indexOf("adius")||nt==="em"&&_.appendChild&&!at?_:_.parentNode,Ct&&(ht=(_.ownerSVGElement||{}).parentNode),(!ht||ht===_doc||!ht.appendChild)&&(ht=_doc.body),mt=ht._gsap,mt&&ct&&mt.width&&ot&&mt.time===_ticker.time&&!mt.uncache?_round(it/mt.width*lt):((ct||rt==="%")&&!_nonStandardLayouts[_getComputedProperty(ht,"display")]&&(st.position=_getComputedProperty(_,"position")),ht===_&&(st.position="static"),ht.appendChild(_tempDiv),dt=_tempDiv[At],ht.removeChild(_tempDiv),st.position="absolute",ot&&ct&&(mt=_getCache(ht),mt.time=_ticker.time,mt.width=ht[At]),_round(gt?dt*it/lt:dt&&it?lt/dt*it:0))))},_get=function(_,_e,tt,nt){var it;return _pluginInitted||_initCore(),_e in _propertyAliases&&_e!=="transform"&&(_e=_propertyAliases[_e],~_e.indexOf(",")&&(_e=_e.split(",")[0])),_transformProps[_e]&&_e!=="transform"?(it=_parseTransform(_,nt),it=_e!=="transformOrigin"?it[_e]:it.svg?it.origin:_firstTwoOnly(_getComputedProperty(_,_transformOriginProp))+" "+it.zOrigin+"px"):(it=_.style[_e],(!it||it==="auto"||nt||~(it+"").indexOf("calc("))&&(it=_specialProps[_e]&&_specialProps[_e](_,_e,tt)||_getComputedProperty(_,_e)||_getProperty(_,_e)||(_e==="opacity"?1:0))),tt&&!~(it+"").trim().indexOf(" ")?_convertToUnit(_,_e,it,tt)+tt:it},_tweenComplexCSSString=function(_,_e,tt,nt){if(!tt||tt==="none"){var it=_checkPropPrefix(_e,_,1),rt=it&&_getComputedProperty(_,it,1);rt&&rt!==tt?(_e=it,tt=rt):_e==="borderColor"&&(tt=_getComputedProperty(_,"borderTopColor"))}var st=new PropTween(this._pt,_.style,_e,0,1,_renderComplexString),ot=0,at=0,At,lt,gt,ct,dt,ht,mt,Ct,ft,pt,Vt,yt;if(st.b=tt,st.e=nt,tt+="",nt+="",nt==="auto"&&(_.style[_e]=nt,nt=_getComputedProperty(_,_e)||nt,_.style[_e]=tt),At=[tt,nt],_colorStringFilter(At),tt=At[0],nt=At[1],gt=tt.match(_numWithUnitExp)||[],yt=nt.match(_numWithUnitExp)||[],yt.length){for(;lt=_numWithUnitExp.exec(nt);)mt=lt[0],ft=nt.substring(ot,lt.index),dt?dt=(dt+1)%5:(ft.substr(-5)==="rgba("||ft.substr(-5)==="hsla(")&&(dt=1),mt!==(ht=gt[at++]||"")&&(ct=parseFloat(ht)||0,Vt=ht.substr((ct+"").length),mt.charAt(1)==="="&&(mt=_parseRelative(ct,mt)+Vt),Ct=parseFloat(mt),pt=mt.substr((Ct+"").length),ot=_numWithUnitExp.lastIndex-pt.length,pt||(pt=pt||_config.units[_e]||Vt,ot===nt.length&&(nt+=pt,st.e+=pt)),Vt!==pt&&(ct=_convertToUnit(_,_e,ht,pt)||0),st._pt={_next:st._pt,p:ft||at===1?ft:",",s:ct,c:Ct-ct,m:dt&&dt<4||_e==="zIndex"?Math.round:0});st.c=ot<nt.length?nt.substring(ot,nt.length):""}else st.r=_e==="display"&&nt==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(nt)&&(st.e=0),this._pt=st,st},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(_){var _e=_.split(" "),tt=_e[0],nt=_e[1]||"50%";return(tt==="top"||tt==="bottom"||nt==="left"||nt==="right")&&(_=tt,tt=nt,nt=_),_e[0]=_keywordToPercent[tt]||tt,_e[1]=_keywordToPercent[nt]||nt,_e.join(" ")},_renderClearProps=function(_,_e){if(_e.tween&&_e.tween._time===_e.tween._dur){var tt=_e.t,nt=tt.style,it=_e.u,rt=tt._gsap,st,ot,at;if(it==="all"||it===!0)nt.cssText="",ot=1;else for(it=it.split(","),at=it.length;--at>-1;)st=it[at],_transformProps[st]&&(ot=1,st=st==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(tt,st);ot&&(_removeProperty(tt,_transformProp),rt&&(rt.svg&&tt.removeAttribute("transform"),_parseTransform(tt,1),rt.uncache=1,_removeIndependentTransforms(nt)))}},_specialProps={clearProps:function(_,_e,tt,nt,it){if(it.data!=="isFromStart"){var rt=_._pt=new PropTween(_._pt,_e,tt,0,0,_renderClearProps);return rt.u=nt,rt.pr=-10,rt.tween=it,_._props.push(tt),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(_){return _==="matrix(1, 0, 0, 1, 0, 0)"||_==="none"||!_},_getComputedTransformMatrixAsArray=function(_){var _e=_getComputedProperty(_,_transformProp);return _isNullTransform(_e)?_identity2DMatrix:_e.substr(7).match(_numExp).map(_round)},_getMatrix=function(_,_e){var tt=_._gsap||_getCache(_),nt=_.style,it=_getComputedTransformMatrixAsArray(_),rt,st,ot,at;return tt.svg&&_.getAttribute("transform")?(ot=_.transform.baseVal.consolidate().matrix,it=[ot.a,ot.b,ot.c,ot.d,ot.e,ot.f],it.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:it):(it===_identity2DMatrix&&!_.offsetParent&&_!==_docElement&&!tt.svg&&(ot=nt.display,nt.display="block",rt=_.parentNode,(!rt||!_.offsetParent)&&(at=1,st=_.nextElementSibling,_docElement.appendChild(_)),it=_getComputedTransformMatrixAsArray(_),ot?nt.display=ot:_removeProperty(_,"display"),at&&(st?rt.insertBefore(_,st):rt?rt.appendChild(_):_docElement.removeChild(_))),_e&&it.length>6?[it[0],it[1],it[4],it[5],it[12],it[13]]:it)},_applySVGOrigin=function(_,_e,tt,nt,it,rt){var st=_._gsap,ot=it||_getMatrix(_,!0),at=st.xOrigin||0,At=st.yOrigin||0,lt=st.xOffset||0,gt=st.yOffset||0,ct=ot[0],dt=ot[1],ht=ot[2],mt=ot[3],Ct=ot[4],ft=ot[5],pt=_e.split(" "),Vt=parseFloat(pt[0])||0,yt=parseFloat(pt[1])||0,Gt,Bt,vt,wt;tt?ot!==_identity2DMatrix&&(Bt=ct*mt-dt*ht)&&(vt=Vt*(mt/Bt)+yt*(-ht/Bt)+(ht*ft-mt*Ct)/Bt,wt=Vt*(-dt/Bt)+yt*(ct/Bt)-(ct*ft-dt*Ct)/Bt,Vt=vt,yt=wt):(Gt=_getBBox(_),Vt=Gt.x+(~pt[0].indexOf("%")?Vt/100*Gt.width:Vt),yt=Gt.y+(~(pt[1]||pt[0]).indexOf("%")?yt/100*Gt.height:yt)),nt||nt!==!1&&st.smooth?(Ct=Vt-at,ft=yt-At,st.xOffset=lt+(Ct*ct+ft*ht)-Ct,st.yOffset=gt+(Ct*dt+ft*mt)-ft):st.xOffset=st.yOffset=0,st.xOrigin=Vt,st.yOrigin=yt,st.smooth=!!nt,st.origin=_e,st.originIsAbsolute=!!tt,_.style[_transformOriginProp]="0px 0px",rt&&(_addNonTweeningPT(rt,st,"xOrigin",at,Vt),_addNonTweeningPT(rt,st,"yOrigin",At,yt),_addNonTweeningPT(rt,st,"xOffset",lt,st.xOffset),_addNonTweeningPT(rt,st,"yOffset",gt,st.yOffset)),_.setAttribute("data-svg-origin",Vt+" "+yt)},_parseTransform=function(_,_e){var tt=_._gsap||new GSCache(_);if("x"in tt&&!_e&&!tt.uncache)return tt;var nt=_.style,it=tt.scaleX<0,rt="px",st="deg",ot=getComputedStyle(_),at=_getComputedProperty(_,_transformOriginProp)||"0",At,lt,gt,ct,dt,ht,mt,Ct,ft,pt,Vt,yt,Gt,Bt,vt,wt,Mt,kt,Nt,Yt,Lt,Xt,_t,Tt,St,Zt,Et,Wt,Ht,zt,Pt,Ot;return At=lt=gt=ht=mt=Ct=ft=pt=Vt=0,ct=dt=1,tt.svg=!!(_.getCTM&&_isSVG(_)),ot.translate&&((ot.translate!=="none"||ot.scale!=="none"||ot.rotate!=="none")&&(nt[_transformProp]=(ot.translate!=="none"?"translate3d("+(ot.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(ot.rotate!=="none"?"rotate("+ot.rotate+") ":"")+(ot.scale!=="none"?"scale("+ot.scale.split(" ").join(",")+") ":"")+(ot[_transformProp]!=="none"?ot[_transformProp]:"")),nt.scale=nt.rotate=nt.translate="none"),Bt=_getMatrix(_,tt.svg),tt.svg&&(tt.uncache?(St=_.getBBox(),at=tt.xOrigin-St.x+"px "+(tt.yOrigin-St.y)+"px",Tt=""):Tt=!_e&&_.getAttribute("data-svg-origin"),_applySVGOrigin(_,Tt||at,!!Tt||tt.originIsAbsolute,tt.smooth!==!1,Bt)),yt=tt.xOrigin||0,Gt=tt.yOrigin||0,Bt!==_identity2DMatrix&&(kt=Bt[0],Nt=Bt[1],Yt=Bt[2],Lt=Bt[3],At=Xt=Bt[4],lt=_t=Bt[5],Bt.length===6?(ct=Math.sqrt(kt*kt+Nt*Nt),dt=Math.sqrt(Lt*Lt+Yt*Yt),ht=kt||Nt?_atan2(Nt,kt)*_RAD2DEG:0,ft=Yt||Lt?_atan2(Yt,Lt)*_RAD2DEG+ht:0,ft&&(dt*=Math.abs(Math.cos(ft*_DEG2RAD))),tt.svg&&(At-=yt-(yt*kt+Gt*Yt),lt-=Gt-(yt*Nt+Gt*Lt))):(Ot=Bt[6],zt=Bt[7],Et=Bt[8],Wt=Bt[9],Ht=Bt[10],Pt=Bt[11],At=Bt[12],lt=Bt[13],gt=Bt[14],vt=_atan2(Ot,Ht),mt=vt*_RAD2DEG,vt&&(wt=Math.cos(-vt),Mt=Math.sin(-vt),Tt=Xt*wt+Et*Mt,St=_t*wt+Wt*Mt,Zt=Ot*wt+Ht*Mt,Et=Xt*-Mt+Et*wt,Wt=_t*-Mt+Wt*wt,Ht=Ot*-Mt+Ht*wt,Pt=zt*-Mt+Pt*wt,Xt=Tt,_t=St,Ot=Zt),vt=_atan2(-Yt,Ht),Ct=vt*_RAD2DEG,vt&&(wt=Math.cos(-vt),Mt=Math.sin(-vt),Tt=kt*wt-Et*Mt,St=Nt*wt-Wt*Mt,Zt=Yt*wt-Ht*Mt,Pt=Lt*Mt+Pt*wt,kt=Tt,Nt=St,Yt=Zt),vt=_atan2(Nt,kt),ht=vt*_RAD2DEG,vt&&(wt=Math.cos(vt),Mt=Math.sin(vt),Tt=kt*wt+Nt*Mt,St=Xt*wt+_t*Mt,Nt=Nt*wt-kt*Mt,_t=_t*wt-Xt*Mt,kt=Tt,Xt=St),mt&&Math.abs(mt)+Math.abs(ht)>359.9&&(mt=ht=0,Ct=180-Ct),ct=_round(Math.sqrt(kt*kt+Nt*Nt+Yt*Yt)),dt=_round(Math.sqrt(_t*_t+Ot*Ot)),vt=_atan2(Xt,_t),ft=Math.abs(vt)>2e-4?vt*_RAD2DEG:0,Vt=Pt?1/(Pt<0?-Pt:Pt):0),tt.svg&&(Tt=_.getAttribute("transform"),tt.forceCSS=_.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(_,_transformProp)),Tt&&_.setAttribute("transform",Tt))),Math.abs(ft)>90&&Math.abs(ft)<270&&(it?(ct*=-1,ft+=ht<=0?180:-180,ht+=ht<=0?180:-180):(dt*=-1,ft+=ft<=0?180:-180)),_e=_e||tt.uncache,tt.x=At-((tt.xPercent=At&&(!_e&&tt.xPercent||(Math.round(_.offsetWidth/2)===Math.round(-At)?-50:0)))?_.offsetWidth*tt.xPercent/100:0)+rt,tt.y=lt-((tt.yPercent=lt&&(!_e&&tt.yPercent||(Math.round(_.offsetHeight/2)===Math.round(-lt)?-50:0)))?_.offsetHeight*tt.yPercent/100:0)+rt,tt.z=gt+rt,tt.scaleX=_round(ct),tt.scaleY=_round(dt),tt.rotation=_round(ht)+st,tt.rotationX=_round(mt)+st,tt.rotationY=_round(Ct)+st,tt.skewX=ft+st,tt.skewY=pt+st,tt.transformPerspective=Vt+rt,(tt.zOrigin=parseFloat(at.split(" ")[2])||0)&&(nt[_transformOriginProp]=_firstTwoOnly(at)),tt.xOffset=tt.yOffset=0,tt.force3D=_config.force3D,tt.renderTransform=tt.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,tt.uncache=0,tt},_firstTwoOnly=function(_){return(_=_.split(" "))[0]+" "+_[1]},_addPxTranslate=function(_,_e,tt){var nt=getUnit(_e);return _round(parseFloat(_e)+parseFloat(_convertToUnit(_,"x",tt+"px",nt)))+nt},_renderNon3DTransforms=function(_,_e){_e.z="0px",_e.rotationY=_e.rotationX="0deg",_e.force3D=0,_renderCSSTransforms(_,_e)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(_,_e){var tt=_e||this,nt=tt.xPercent,it=tt.yPercent,rt=tt.x,st=tt.y,ot=tt.z,at=tt.rotation,At=tt.rotationY,lt=tt.rotationX,gt=tt.skewX,ct=tt.skewY,dt=tt.scaleX,ht=tt.scaleY,mt=tt.transformPerspective,Ct=tt.force3D,ft=tt.target,pt=tt.zOrigin,Vt="",yt=Ct==="auto"&&_&&_!==1||Ct===!0;if(pt&&(lt!==_zeroDeg||At!==_zeroDeg)){var Gt=parseFloat(At)*_DEG2RAD,Bt=Math.sin(Gt),vt=Math.cos(Gt),wt;Gt=parseFloat(lt)*_DEG2RAD,wt=Math.cos(Gt),rt=_addPxTranslate(ft,rt,Bt*wt*-pt),st=_addPxTranslate(ft,st,-Math.sin(Gt)*-pt),ot=_addPxTranslate(ft,ot,vt*wt*-pt+pt)}mt!==_zeroPx&&(Vt+="perspective("+mt+_endParenthesis),(nt||it)&&(Vt+="translate("+nt+"%, "+it+"%) "),(yt||rt!==_zeroPx||st!==_zeroPx||ot!==_zeroPx)&&(Vt+=ot!==_zeroPx||yt?"translate3d("+rt+", "+st+", "+ot+") ":"translate("+rt+", "+st+_endParenthesis),at!==_zeroDeg&&(Vt+="rotate("+at+_endParenthesis),At!==_zeroDeg&&(Vt+="rotateY("+At+_endParenthesis),lt!==_zeroDeg&&(Vt+="rotateX("+lt+_endParenthesis),(gt!==_zeroDeg||ct!==_zeroDeg)&&(Vt+="skew("+gt+", "+ct+_endParenthesis),(dt!==1||ht!==1)&&(Vt+="scale("+dt+", "+ht+_endParenthesis),ft.style[_transformProp]=Vt||"translate(0, 0)"},_renderSVGTransforms=function(_,_e){var tt=_e||this,nt=tt.xPercent,it=tt.yPercent,rt=tt.x,st=tt.y,ot=tt.rotation,at=tt.skewX,At=tt.skewY,lt=tt.scaleX,gt=tt.scaleY,ct=tt.target,dt=tt.xOrigin,ht=tt.yOrigin,mt=tt.xOffset,Ct=tt.yOffset,ft=tt.forceCSS,pt=parseFloat(rt),Vt=parseFloat(st),yt,Gt,Bt,vt,wt;ot=parseFloat(ot),at=parseFloat(at),At=parseFloat(At),At&&(At=parseFloat(At),at+=At,ot+=At),ot||at?(ot*=_DEG2RAD,at*=_DEG2RAD,yt=Math.cos(ot)*lt,Gt=Math.sin(ot)*lt,Bt=Math.sin(ot-at)*-gt,vt=Math.cos(ot-at)*gt,at&&(At*=_DEG2RAD,wt=Math.tan(at-At),wt=Math.sqrt(1+wt*wt),Bt*=wt,vt*=wt,At&&(wt=Math.tan(At),wt=Math.sqrt(1+wt*wt),yt*=wt,Gt*=wt)),yt=_round(yt),Gt=_round(Gt),Bt=_round(Bt),vt=_round(vt)):(yt=lt,vt=gt,Gt=Bt=0),(pt&&!~(rt+"").indexOf("px")||Vt&&!~(st+"").indexOf("px"))&&(pt=_convertToUnit(ct,"x",rt,"px"),Vt=_convertToUnit(ct,"y",st,"px")),(dt||ht||mt||Ct)&&(pt=_round(pt+dt-(dt*yt+ht*Bt)+mt),Vt=_round(Vt+ht-(dt*Gt+ht*vt)+Ct)),(nt||it)&&(wt=ct.getBBox(),pt=_round(pt+nt/100*wt.width),Vt=_round(Vt+it/100*wt.height)),wt="matrix("+yt+","+Gt+","+Bt+","+vt+","+pt+","+Vt+")",ct.setAttribute("transform",wt),ft&&(ct.style[_transformProp]=wt)},_addRotationalPropTween=function(_,_e,tt,nt,it){var rt=360,st=_isString(it),ot=parseFloat(it)*(st&&~it.indexOf("rad")?_RAD2DEG:1),at=ot-nt,At=nt+at+"deg",lt,gt;return st&&(lt=it.split("_")[1],lt==="short"&&(at%=rt,at!==at%(rt/2)&&(at+=at<0?rt:-rt)),lt==="cw"&&at<0?at=(at+rt*_bigNum)%rt-~~(at/rt)*rt:lt==="ccw"&&at>0&&(at=(at-rt*_bigNum)%rt-~~(at/rt)*rt)),_._pt=gt=new PropTween(_._pt,_e,tt,nt,at,_renderPropWithEnd),gt.e=At,gt.u="deg",_._props.push(tt),gt},_assign=function(_,_e){for(var tt in _e)_[tt]=_e[tt];return _},_addRawTransformPTs=function(_,_e,tt){var nt=_assign({},tt._gsap),it="perspective,force3D,transformOrigin,svgOrigin",rt=tt.style,st,ot,at,At,lt,gt,ct,dt;nt.svg?(at=tt.getAttribute("transform"),tt.setAttribute("transform",""),rt[_transformProp]=_e,st=_parseTransform(tt,1),_removeProperty(tt,_transformProp),tt.setAttribute("transform",at)):(at=getComputedStyle(tt)[_transformProp],rt[_transformProp]=_e,st=_parseTransform(tt,1),rt[_transformProp]=at);for(ot in _transformProps)at=nt[ot],At=st[ot],at!==At&&it.indexOf(ot)<0&&(ct=getUnit(at),dt=getUnit(At),lt=ct!==dt?_convertToUnit(tt,ot,at,dt):parseFloat(at),gt=parseFloat(At),_._pt=new PropTween(_._pt,st,ot,lt,gt-lt,_renderCSSProp),_._pt.u=dt||0,_._props.push(ot));_assign(st,nt)};_forEachName("padding,margin,Width,Radius",function(et,_){var _e="Top",tt="Right",nt="Bottom",it="Left",rt=(_<3?[_e,tt,nt,it]:[_e+it,_e+tt,nt+tt,nt+it]).map(function(st){return _<2?et+st:"border"+st+et});_specialProps[_>1?"border"+et:et]=function(st,ot,at,At,lt){var gt,ct;if(arguments.length<4)return gt=rt.map(function(dt){return _get(st,dt,at)}),ct=gt.join(" "),ct.split(gt[0]).length===5?gt[0]:ct;gt=(At+"").split(" "),ct={},rt.forEach(function(dt,ht){return ct[dt]=gt[ht]=gt[ht]||gt[(ht-1)/2|0]}),st.init(ot,ct,lt)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function(_){return _.style&&_.nodeType},init:function(_,_e,tt,nt,it){var rt=this._props,st=_.style,ot=tt.vars.startAt,at,At,lt,gt,ct,dt,ht,mt,Ct,ft,pt,Vt,yt,Gt,Bt,vt;_pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(_),vt=this.styles.props,this.tween=tt;for(ht in _e)if(ht!=="autoRound"&&(At=_e[ht],!(_plugins[ht]&&_checkPlugin(ht,_e,tt,nt,_,it)))){if(ct=typeof At,dt=_specialProps[ht],ct==="function"&&(At=At.call(tt,nt,_,it),ct=typeof At),ct==="string"&&~At.indexOf("random(")&&(At=_replaceRandom(At)),dt)dt(this,_,ht,At,tt)&&(Bt=1);else if(ht.substr(0,2)==="--")at=(getComputedStyle(_).getPropertyValue(ht)+"").trim(),At+="",_colorExp.lastIndex=0,_colorExp.test(at)||(mt=getUnit(at),Ct=getUnit(At)),Ct?mt!==Ct&&(at=_convertToUnit(_,ht,at,Ct)+Ct):mt&&(At+=mt),this.add(st,"setProperty",at,At,nt,it,0,0,ht),rt.push(ht),vt.push(ht,0,st[ht]);else if(ct!=="undefined"){if(ot&&ht in ot?(at=typeof ot[ht]=="function"?ot[ht].call(tt,nt,_,it):ot[ht],_isString(at)&&~at.indexOf("random(")&&(at=_replaceRandom(at)),getUnit(at+"")||(at+=_config.units[ht]||getUnit(_get(_,ht))||""),(at+"").charAt(1)==="="&&(at=_get(_,ht))):at=_get(_,ht),gt=parseFloat(at),ft=ct==="string"&&At.charAt(1)==="="&&At.substr(0,2),ft&&(At=At.substr(2)),lt=parseFloat(At),ht in _propertyAliases&&(ht==="autoAlpha"&&(gt===1&&_get(_,"visibility")==="hidden"&&lt&&(gt=0),vt.push("visibility",0,st.visibility),_addNonTweeningPT(this,st,"visibility",gt?"inherit":"hidden",lt?"inherit":"hidden",!lt)),ht!=="scale"&&ht!=="transform"&&(ht=_propertyAliases[ht],~ht.indexOf(",")&&(ht=ht.split(",")[0]))),pt=ht in _transformProps,pt){if(this.styles.save(ht),Vt||(yt=_._gsap,yt.renderTransform&&!_e.parseTransform||_parseTransform(_,_e.parseTransform),Gt=_e.smoothOrigin!==!1&&yt.smooth,Vt=this._pt=new PropTween(this._pt,st,_transformProp,0,1,yt.renderTransform,yt,0,-1),Vt.dep=1),ht==="scale")this._pt=new PropTween(this._pt,yt,"scaleY",yt.scaleY,(ft?_parseRelative(yt.scaleY,ft+lt):lt)-yt.scaleY||0,_renderCSSProp),this._pt.u=0,rt.push("scaleY",ht),ht+="X";else if(ht==="transformOrigin"){vt.push(_transformOriginProp,0,st[_transformOriginProp]),At=_convertKeywordsToPercentages(At),yt.svg?_applySVGOrigin(_,At,0,Gt,0,this):(Ct=parseFloat(At.split(" ")[2])||0,Ct!==yt.zOrigin&&_addNonTweeningPT(this,yt,"zOrigin",yt.zOrigin,Ct),_addNonTweeningPT(this,st,ht,_firstTwoOnly(at),_firstTwoOnly(At)));continue}else if(ht==="svgOrigin"){_applySVGOrigin(_,At,1,Gt,0,this);continue}else if(ht in _rotationalProperties){_addRotationalPropTween(this,yt,ht,gt,ft?_parseRelative(gt,ft+At):At);continue}else if(ht==="smoothOrigin"){_addNonTweeningPT(this,yt,"smooth",yt.smooth,At);continue}else if(ht==="force3D"){yt[ht]=At;continue}else if(ht==="transform"){_addRawTransformPTs(this,At,_);continue}}else ht in st||(ht=_checkPropPrefix(ht)||ht);if(pt||(lt||lt===0)&&(gt||gt===0)&&!_complexExp.test(At)&&ht in st)mt=(at+"").substr((gt+"").length),lt||(lt=0),Ct=getUnit(At)||(ht in _config.units?_config.units[ht]:mt),mt!==Ct&&(gt=_convertToUnit(_,ht,at,Ct)),this._pt=new PropTween(this._pt,pt?yt:st,ht,gt,(ft?_parseRelative(gt,ft+lt):lt)-gt,!pt&&(Ct==="px"||ht==="zIndex")&&_e.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=Ct||0,mt!==Ct&&Ct!=="%"&&(this._pt.b=at,this._pt.r=_renderCSSPropWithBeginning);else if(ht in st)_tweenComplexCSSString.call(this,_,ht,at,ft?ft+At:At);else if(ht in _)this.add(_,ht,at||_[ht],ft?ft+At:At,nt,it);else if(ht!=="parseTransform"){_missingPlugin(ht,At);continue}pt||(ht in st?vt.push(ht,0,st[ht]):vt.push(ht,1,at||_[ht])),rt.push(ht)}}Bt&&_sortPropTweensByPriority(this)},render:function(_,_e){if(_e.tween._time||!_reverting())for(var tt=_e._pt;tt;)tt.r(_,tt.d),tt=tt._next;else _e.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(_,_e,tt){var nt=_propertyAliases[_e];return nt&&nt.indexOf(",")<0&&(_e=nt),_e in _transformProps&&_e!==_transformOriginProp&&(_._gsap.x||_get(_,"x"))?tt&&_recentSetterPlugin===tt?_e==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=tt||{})&&(_e==="scale"?_setterScaleWithRender:_setterTransformWithRender):_.style&&!_isUndefined(_.style[_e])?_setterCSSStyle:~_e.indexOf("-")?_setterCSSProp:_getSetter(_,_e)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;gsap.core.getStyleSaver=_getStyleSaver;(function(et,_,_e,tt){var nt=_forEachName(et+","+_+","+_e,function(it){_transformProps[it]=1});_forEachName(_,function(it){_config.units[it]="deg",_rotationalProperties[it]=1}),_propertyAliases[nt[13]]=et+","+_,_forEachName(tt,function(it){var rt=it.split(":");_propertyAliases[rt[1]]=nt[rt[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(et){_config.units[et]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;function Cube({position:et,rotation:_,color:_e,args:tt,onCollide:nt,cubeInstanceRefs:it,index:rt}){const[st]=useBox(()=>({mass:1,args:tt,position:et,rotation:_,onCollide:nt,restitution:.9,friction:.1,userData:{name:"cube"}})),ot=reactExports.useRef(),at=reactExports.useRef(tt);return reactExports.useEffect(()=>(it.current[rt]=ot.current,()=>{it.current[rt]=null}),[it,rt,at]),jsx(Fragment,{children:jsx(Instance,{ref:At=>{st.current=At,ot.current=At},color:_e,index:rt})})}function Waypoint({position:et,rotation:_,index:_e}){const[tt]=useBox(()=>({mass:0,args:[1.5,2,1],position:et,rotation:_,userData:{name:"waypoint"}})),nt=reactExports.useRef();return jsx(Fragment,{children:jsx(Instance,{ref:it=>{tt.current=it,nt.current=it}})})}function Arrow({position:et,rotation:_,index:_e,color:tt,refs:nt}){const it=reactExports.useRef(),rt=reactExports.useRef(!0);return reactExports.useEffect(()=>{const st=()=>{const ot=it.current.color,at=rt.current?_e*(1/7):1;gsapWithCSS.to(ot,{r:1,g:.05,b:.05,duration:.5,delay:at,onComplete:()=>{gsapWithCSS.to(ot,{r:.8,g:.5,b:.5,duration:.5,onComplete:st})}}),rt.current=!1};st()},[_e]),jsx(Fragment,{children:jsx(Instance,{index:_e,position:et,rotation:_,receiveShadow:!0,castShadow:!0,color:tt,ref:st=>{it.current=st,nt.current=st}})})}const cubeMaterial=new MeshStandardMaterial({color:"#fff",roughness:1,metalness:0,emissive:"#fff",emissiveIntensity:.2}),waypointMaterial=new MeshStandardMaterial({color:"#fff",roughness:1,metalness:0,emissive:"#fff",emissiveIntensity:.1});function Objects({cubesData:et,cubesCount:_,waypointsRightData:_e,waypointsLeftData:tt}){const{nodes:nt}=useGLTF("./cube.glb"),{nodes:it}=useGLTF("./waypoint-right.glb"),{nodes:rt}=useGLTF("./arrow-right.glb"),{nodes:st}=useGLTF("./waypoint-left.glb"),{nodes:ot}=useGLTF("./arrow-left.glb"),at=["#fff","#cc8080"],At=[1,1,1],lt=reactExports.useRef([]),gt=reactExports.useRef([]),ct=reactExports.useRef([]),dt=reactExports.useRef(!1);reactExports.useEffect(()=>{const Ct=setTimeout(()=>{dt.current=!0},1e3);return()=>{clearTimeout(Ct)}},[]);const ht=(Ct,ft)=>{if(!dt.current)return;const pt=lt.current[ft].color;mt(pt,{r:1,g:0,b:0},{r:1,g:1,b:1})},mt=(Ct,ft,pt)=>{gsapWithCSS.to(Ct,{r:ft.r,g:ft.g,b:ft.b,duration:1,onComplete:()=>{gsapWithCSS.to(Ct,{r:pt.r,g:pt.g,b:pt.b,duration:1})}})};return jsxs(Fragment,{children:[jsx(Instances,{range:_,material:cubeMaterial,geometry:nt.Cube.geometry,castShadow:!0,receiveShadow:!0,children:jsx("group",{position:[0,0,0],children:et.map((Ct,ft)=>jsx("group",{children:jsx(Cube,{position:[Ct[0],.5,-Ct[1]],rotation:[0,Ct[2],0],args:At,color:at[0],onCollide:pt=>ht(pt,ft),cubeInstanceRefs:lt,index:ft})},ft))})}),jsxs(Fragment,{children:[[_e,tt].map((Ct,ft)=>jsx(Instances,{range:Ct.length,material:waypointMaterial,geometry:ft===0?it.Waypoint.geometry:st.Waypoint.geometry,castShadow:!0,receiveShadow:!0,children:jsx("group",{position:[0,0,0],children:Ct.map((pt,Vt)=>jsx("group",{children:jsx(Waypoint,{position:[pt[0],1,-pt[1]],rotation:[0,pt[2]*Math.PI/180,0],index:Vt})},Vt))})},ft)),[_e,tt].map((Ct,ft)=>jsx(Instances,{range:Ct.length,material:waypointMaterial,geometry:ft===0?rt.Arrow.geometry:ot.Arrow.geometry,castShadow:!0,receiveShadow:!0,children:jsx("group",{position:[0,0,0],children:Ct.map((pt,Vt)=>jsx("group",{children:jsx(Arrow,{position:[pt[0],1,-pt[1]],rotation:[0,pt[2]*Math.PI/180,0],index:Vt,color:at[1],refs:ft===0?gt:ct})},Vt))})},ft))]})]})}const cubes=[[47.552845,30.3327713,-14.33749939],[47.28595352,31.7053566,-.387419829],[46.04193497,30.62670898,-23.478012],[45.94612423,32.13833432,-37.467422],[46.59966278,33.24951172,-104.4396986],[46.19932556,34.71741486,-59.02207567],[45.22707748,33.53546906,4.813944221],[44.86068344,34.73524233,-7.443591384],[45.30545807,35.91072845,-104.1547499],[43.51182175,37.74043274,-28.77366428],[43.3576622,35.09567642,-77.08819924],[43.70190048,33.82048035,17.99719842],[44.13137054,32.65291595,-62.47004396],[44.90654755,31.54138756,39.47804261],[43.22895813,36.38273239,-87.51982421],[44.5332222,36.98863983,-34.76989076],[26.55964324,35.683734238,-202.7456005],[25.38532424,36.353623423,-207.7073423],[24.04142344,37.043134232,-201.5222322],[22.55431343,37.388888888,-180.3923423],[21.01343458,37.277143264,-165.5134329],[19.6233349,36.984452309,-165.8183421],[18.33119201,36.548332343,-158.8063423],[17.15233291,35.831745213,-139.6764323],[19.73710823,35.60037613,-181.9208591],[21.05125237,35.80164337,-236.760284],[22.37723732,35.75428772,-273.9505001],[23.71506119,35.65957642,-273.9505001],[-39.03858185,38.55609131,-230.4123335],[-40.53070068,37.31309891,-173.1773837],[-41.85919952,35.82129288,-222.12812],[-43.08353806,34.02416229,-131.8018872],[-45.25360107,27.00664902,-199.7481446],[-44.01181793,32.19551849,-145.5341738],[-45.07620239,28.73627281,-144.6860828],[-44.67705917,30.59894371,-228.8795025],[-45.07620239,25.27702522,-247.7046513],[-44.54401016,23.37000465,-26.18120963],[-44.01181793,21.55168343,-231.2362456],[-43.30223083,19.68901253,-105.9730419],[-42.1746788,18.03538132,-173.5381543],[-40.95152664,16.43406868,-219.3615246],[-39.58530807,14.93876934,-171.9081843],[-38.01324463,13.82136059,-215.3815734],[-36.5631485,12.65915394,-198.6950797],[-34.85599136,11.29275608,-243.4313844],[-33.11207962,10.26070595,-232.0463334],[-31.48155403,9.183934212,-173.5381543],[-37.50702286,39.76505661,-199.4000099],[-29.75225258,8.137011528,-222.7524676],[-35.9528389,40.89678192,-150.4725235],[-34.50557709,41.94372559,-225.984199],[-32.88271332,8.121629715,-189.3666396],[-34.40750504,8.679071426,-222.7524676],[-35.4732132,9.816558838,-280.2532894],[-36.91657257,9.081756592,-222.7524676],[-36.78596497,10.69222355,-184.8694381],[-38.26461029,9.848534584,-274.8224967],[-37.96628952,11.57483482,-222.7524676],[-39.64583588,10.892519,-188.2781123],[-39.30467606,12.59830952,-293.9132579],[-41.17305374,11.89879227,-192.6641456],[-40.59057999,13.56929779,-161.8243935],[-42.4275856,13.04443932,-267.0442227],[-41.98145676,14.77647209,-270.4065882],[-43.84470367,14.61901474,-157.1262069],[-42.87371445,16.06237602,-267.7860632],[-44.86817551,16.16734695,-174.5374929],[-43.87094498,17.68943596,-219.8450064],[-46.0228653,18.03059387,-280.8912564],[-44.78944778,19.18528366,-286.3341522],[-45.47176361,20.83858871,-178.2472828],[-46.75766754,19.68389893,-193.633568],[-46.18032455,22.59686279,-260.7952826],[-47.46622849,21.25847435,-151.6508131],[-46.46899796,24.72254181,-176.4743706],[-47.57120132,23.4891243,-191.8052903],[-47.93860245,27.79296303,-271.1585374],[-47.96093369,25.61540604,-240.5208769],[-46.72758484,26.47621727,-190.3596671],[-46.33778381,28.18660736,-193.4979615],[-47.41374207,29.34129715,-191.6378414],[-45.9263916,29.85149193,-259.0589119],[-46.75767136,31.17830276,-189.5542102],[-45.44552612,31.91310501,-209.1596399],[-46.49524307,33.0940361,-186.3756314],[-44.71072388,33.30397797,-281.4200497],[-45.64464951,34.63695526,-260.1898819],[-44.05465317,35.16722488,-172.9048865],[-44.44829559,36.79428482,-186.6096337],[-42.92620468,36.55809784,-202.9054405],[-42.0864296,37.87024307,-270.5504866],[-43.50354767,38.2376442,-212.206478],[-42.1867485,39.22410583,-272.3870698],[-40.72179794,38.86747742,-262.7035828],[-39.40965271,39.89843423,-260.1804836],[-40.92633057,40.25066757,-194.8477161],[-39.37258911,41.39377594,-175.0192398],[-38.03187561,41.32349014,-222.7524676],[-36.72903442,41.962677,-257.7185556],[-35.70778275,43.16357803,-281.7986334],[-33.75270844,43.57886505,-181.0515126],[9.279047012,-14.72224998,-410.4123249],[10.77116489,-13.47925758,-353.1773887],[12.09966373,-11.98745155,-402.128125],[13.32400227,-10.19032097,-311.8018786],[15.49406433,-3.17280817,-379.748136],[14.25228119,-8.36167717,-325.5341651],[15.31666565,-4.902431965,-324.6860742],[14.91752243,-6.765102863,-408.8794938],[15.31666565,-1.443184376,-427.7046427],[14.78447247,.463836193,-206.1812129],[14.25228024,2.282157421,-411.2362369],[13.23652458,3.926137209,-285.9730264],[12.59009266,5.885935783,-353.5381593],[11.5200243,7.290426731,-399.3615159],[10.46872044,8.532044411,-351.9081756],[6.527028561,-17.44405174,-343.3427359],[8.792840958,11.69478321,-402.752459],[9.392053604,10.16394424,-402.752459],[11.43462849,11.68166161,-373.9396885],[11.20281601,10.1551981,-402.752459],[12.97421455,10.43949604,-442.7556202],[12.22191811,9.057369232,-365.6382492],[14.08516502,9.214826584,-444.3333119],[13.1141758,7.771464825,-376.0983561],[15.10863686,7.666493893,-356.277393],[14.1770134,6.581787109,-481.0450323],[16.26332664,5.803246975,-411.9358122],[15.13925552,4.976593971,-447.9325484],[15.95479393,1.750772357,-402.752459],[17.4094429,2.367593527,-428.5202492],[16.44188118,.097962499,-402.752459],[17.80160904,.877389789,-427.1539655],[16.80437851,-1.679683924,-402.752459],[18.05423355,-.762659073,-157.4973321],[18.0208683,-4.264968395,-459.8310658],[18.13786697,-2.55134201,-429.6692783],[17.00279236,-3.410238028,-307.9860158],[16.73644447,-4.985553265,-464.2336418],[17.74912262,-5.971498966,-402.752459],[16.34794998,-6.665101051,-425.6109711],[17.24070358,-7.913969517,-339.9570658],[15.802001,-8.311285019,-434.6390332],[16.49313736,-9.629320145,-366.8248443],[14.88790894,-9.765437126,-402.752459],[15.78066254,-10.98291016,-363.5202895],[14.29511738,-11.33338356,-373.9470651],[14.74149227,-12.76006126,-422.3321798],[13.16666889,-12.72425652,-430.8087177],[12.27222157,-13.83593464,-426.454117],[13.71330166,-14.1516161,-386.2372801],[12.24014664,-15.57817459,-385.4574091],[10.96226311,-15.03363609,-365.475882],[9.650117874,-16.21456718,-463.7919198],[10.8383379,-16.75765228,-345.2082791],[8.616146088,-17.74190712,-340.1582558],[7.877774715,-16.1520195,-369.0891067],[7.130800247,-18.89134407,-422.9007247],[5.21506691,-19.15377235,-402.752459],[15.62037563,3.358280182,-562.7874795],[16.88878441,3.905007839,-414.2049104],[8.421066284,13.44431114,-402.752459],[9.930034637,12.63515472,-424.8944023],[10.15309906,11.24865341,-413.5140777],[-9.141060829,-17.5157814,-230.4123335],[-10.63317776,-18.7587738,-173.1773973],[-11.9616785,-20.25057983,-222.1281474],[-13.18601704,-22.04771042,-131.8018872],[-15.35608006,-29.06522369,-199.7481583],[-14.11429596,-23.87635422,-145.5341738],[-15.17868137,-27.33559799,-144.6860828],[-14.7795372,-25.47292709,-228.8795161],[-15.17868137,-30.79484558,-247.7046786],[-14.64648914,-32.70186615,-26.18122158],[-14.11429691,-34.52018738,-231.2362729],[-13.09854126,-36.16416931,-105.9730351],[-12.45210934,-38.12396622,-173.5381679],[-11.38204193,-39.52845764,-219.3615383],[-10.33073711,-40.77007675,-171.9081843],[-6.389042377,-14.7939806,-163.3427446],[-8.654858589,-43.93281555,-222.7524813],[-9.254071236,-42.40197754,-222.7524813],[-11.29664612,-43.91969299,-193.9397108],[-11.06483364,-42.39323044,-222.7524813],[-12.83623219,-42.67752838,-262.7556288],[-12.08393574,-41.29540253,-185.6382715],[-13.94718266,-41.45285797,-264.3333206],[-12.97619343,-40.0094986,-196.0983784],[-14.97065449,-39.90452576,-176.2774016],[-14.03903103,-38.81981659,-301.045041],[-16.12534332,-38.04127884,-231.9358482],[-15.0012722,-37.21462631,-267.9325571],[-15.81680965,-33.98880386,-222.7524813],[-17.27145767,-34.60562515,-248.5202579],[-16.30389595,-32.33599472,-222.7524813],[-17.66362381,-33.1154213,-247.1540015],[-16.66639328,-30.55834579,-222.7524813],[-17.91624832,-31.47537231,22.50266098],[-17.88288307,-27.97306442,-279.8310744],[-17.99988174,-29.68669128,-249.6693142],[-16.86480713,-28.82779312,-127.9860244],[-16.59845924,-27.25247955,-284.2336778],[-17.61113739,-26.2665329,-222.7524813],[-16.20996475,-25.57292938,-245.6109798],[-17.10271835,-24.32406235,-159.9570744],[-15.66401577,-23.92674637,-254.6390692],[-16.35515022,-22.60871124,-186.8248666],[-14.74992371,-22.47259521,-222.7524813],[-15.64267635,-21.25511932,-183.5203118],[-14.15713215,-20.90464783,-193.9470874],[-14.60350704,-19.47797012,-242.3322158],[-13.02868271,-19.51377487,-250.8087537],[-12.13423538,-18.40209579,-246.454153],[-13.57531548,-18.08641434,-206.2373024],[-12.10216045,-16.6598587,-205.4574314],[-10.82427692,-17.20439529,-185.4759043],[-9.512131691,-16.0234642,-283.7919285],[-10.70035076,-15.48037815,-165.2082878],[-8.478159904,-14.49612522,-160.1582645],[-7.739788532,-16.08601379,-189.089129],[-6.992813587,-13.34668827,-242.9007607],[-5.07708025,-13.08425999,-222.7524813],[-15.48239231,-35.59630966,-382.7874882],[-16.75079918,-36.1430397,-234.2049463],[-8.283083916,-45.68234253,-222.7524813],[-9.792052269,-44.87318802,-244.894411],[-10.01511669,-43.48668671,-233.5141137],[32.62306595,-39.44682312,-487.0589865],[33.89599228,-40.0691452,-453.0887948],[35.37824249,-39.95034027,-439.6753688],[36.77563095,-39.45814133,-421.908107],[37.91277695,-38.48505402,-411.2769449],[38.9311142,-37.3818512,-391.6143875],[39.7231636,-36.05235672,-386.4945051],[40.26062012,-34.69456863,-378.0252344],[40.65664291,-33.22363281,-371.7850916],[40.89236832,-31.80927086,-365.8952556],[41.03380585,-30.37133598,-365.8952556],[41.03380585,-28.98054695,-356.0617229],[40.8291423,-27.62511635,335.049342],[39.9926796,-26.40719414,-317.9662062],[34.51657867,-38.75423431,-445.9411931],[36.1535759,-38.00121689,-505.5108792],[37.39768982,-36.90443039,-393.2679763],[38.42899704,-35.49661636,-478.5296102],[39.06742477,-33.90873337,-482.9346998],[39.52578354,-32.36995697,-433.9908756],[39.72222137,-30.88029289,-467.6161154],[39.73859024,-29.47247696,-413.2576178],[39.64036942,-28.19562149,0],[33.47847366,-47.79722214,-400.2355616],[34.41534805,-46.65668106,-400.2355616],[35.44047928,-45.72659683,-413.8297964],[36.67267227,-44.95265961,-423.4437248],[37.99764633,-44.31449509,-427.5602798],[39.31243896,-43.60165405,-418.7657282],[40.52313614,-42.74172592,-410.9502433],[41.67725754,-41.68944168,-410.6223942],[42.7012558,-40.64846802,-400.3933936],[43.6460495,-39.42080307,-395.6660284],[44.42677689,-38.14787674,-389.5251693],[45.06040955,-36.82403183,-380.4002824],[45.63747406,-35.47755814,-379.4123639],[46.02217865,-33.97833252,-370.23901],[46.25979233,-32.53002548,-365.4668661],[46.38991165,-31.01382828,-364.4954493],[46.57660675,-29.53723335,-374.8715448],[47.88913727,-27.08755875,-412.9644387],[46.97262955,-28.26430702,-388.7037161],[35.91520691,-47.21626282,-435.1523629],[37.17569351,-46.54509354,-404.1203819],[38.63261795,-45.80844498,-460.3638206],[40.02406311,-45.03905869,-421.9303461],[41.26817703,-44.07323074,-378.8577252],[42.59414291,-42.92733383,-416.1212429],[43.87099838,-41.61773682,-449.1201817],[44.91867447,-40.16081238,-398.3213601],[45.76990891,-38.86758423,-445.7034479],[46.4901886,-37.55799103,-392.3743963],[47.09587479,-35.94282532,-417.9068456],[47.43691635,-34.44224548,-454.6853652],[47.73703384,-32.98259354,-489.919743],[47.90073395,-31.50929832,-471.0505531],[48.03715134,-30.13149452,-494.6817509],[48.29634094,-28.74004936,-459.768392],[16.89318848,43.32038116,-261.1298799],[-.259138107,43.11941528,-131.5781575],[-24.86724854,41.77295303,-176.5197777],[-11.60358715,43.58163452,-248.3747475],[-17.48180008,36.7990799,-166.336717],[7.387563705,41.67247391,-67.27311495],[-6.388557434,36.83927155,-262.9358366],[-13.95487785,13.67408466,-154.0542747],[-1.945233345,12.80591679,-288.1834669],[-18.51275635,8.53742981,-258.9234009],[-24.37288284,14.32521057,-202.7456005],[-5.90696907,8.433249474,-170.8673591],[8.886599541,-40.63555527,-178.5309133],[13.57470226,-47.19889832,-143.1614753],[23.99270821,-42.71915436,-251.166601],[45.66216278,-16.98668098,-240.430254],[41.18241882,-6.672855377,-177.0768206],[46.28724289,.828108788,-232.4381403],[40.6615181,17.28855896,-202.7456005],[46.49560165,24.37280273,-108.9527598]],waypoints_left=[[50.4836,30.5998,-168.75],[49.1927,34.5075,-157.5],[47.1642,38.0883,-146.25],[44.476,41.2046,-135],[41.2316,43.7366,-123.75],[37.5556,45.587,-112.5],[33.5892,46.6846,-101.25],[-34.5997,46.4836,-78.75],[-38.5075,45.1926,-67.5],[-42.0883,43.1641,-56.25],[-45.2046,40.476,-45],[-47.7365,37.2316,-33.75],[-49.5869,33.5555,-22.5],[-50.6846,29.5891,-11.25],[-50.9873,25.4848,0],[-50.4835,21.4003,11.25],[-49.1926,17.4925,22.5],[-47.1641,13.9117,33.75],[-44.476,10.7954,45],[-41.2315,8.26345,56.25],[-37.5555,6.41309,67.5],[-33.5891,5.31544,78.75],[-4.5997,-9.5164,-78.75],[-8.5075,-10.8074,-67.5],[-12.0883,-12.8359,-56.25],[-15.2046,-15.524,-45],[-17.7365,-18.7684,-33.75],[-19.5869,-22.4445,-22.5],[-20.6846,-26.4109,-11.25],[-20.9873,-30.5152,0],[-20.4835,-34.5997,11.25],[-19.1926,-38.5075,22.5],[-17.1641,-42.0883,33.75],[-14.476,-45.2046,45],[-11.2315,-47.7365,56.25],[-7.5555,-49.5869,67.5],[-3.5891,-50.6846,78.75],[34.5997,-50.4837,-258.75],[38.5075,-49.1928,-247.5],[42.0884,-47.1642,-236.25],[45.2046,-44.4761,-225],[47.7366,-41.2317,-213.75],[49.587,-37.5556,-202.5],[50.6847,-33.5892,-191.25]],waypoints_right=[[4.59976,18.4836,-101.25],[8.50752,17.1926,-112.5],[12.0883,15.1641,-123.75],[15.2046,12.476,-135],[17.7366,9.23164,-146.25],[19.5869,5.55557,-157.5],[20.6846,1.58916,-168.75],[20.9874,-2.51516,-180],[20.4836,-6.59969,-191.25],[19.1926,-10.5075,-202.5],[17.1641,-14.0883,-213.75],[14.476,-17.2046,-225],[11.2316,-19.7365,-236.25],[7.55554,-21.5869,-247.5],[3.58914,-22.6845,-258.75]],useGame=create$1(subscribeWithSelector(et=>({phase:"ready",startLoading:()=>{et(_=>_.phase==="ready"?{phase:"loading"}:_)},startGame:()=>{et(_=>_.phase==="loading"?{phase:"playing",startTime:Date.now()}:_)},restart:()=>{et(_=>_.phase==="playing"||_.phase==="ended"?{phase:"ready"}:_)},end:()=>{et(_=>_.phase==="playing"?{phase:"ended",endTime:Date.now()}:_)},startTime:0,endTime:0})));function Checkpoints({checkpoint:et,setCheckpoint:_}){const _e=[[-24,2,-12],[6,2,44],[44,2,-9]],tt=[[2,4,10],[2,4,10],[10,4,2]],nt=reactExports.useRef(),it=reactExports.useRef();var rt=1,st=!1;const ot=[];for(let lt=0;lt<_e.length;lt++){const[gt]=useBox(()=>({args:tt[lt],position:_e[lt],isTrigger:!0,onCollide:At(lt)}),reactExports.useRef(null));ot.push(gt)}var at=et;const At=reactExports.useCallback(lt=>gt=>{const{body:ct}=gt;ct.userData.name==="vehicle"&&lt===at&&!st&&(at>1&&rt<3?(rt++,console.log("Lap "+rt)):at>1&&rt===3&&(console.log("Finish"),st=!0),_(lt!==2?lt+1:0),lt!==2?at=lt+1:at=0,console.log(at))},[et,_]);return reactExports.useEffect(()=>{const lt=addEffect(()=>{const ct=useGame.getState();let dt=0;ct.phase==="playing"?dt=Date.now()-ct.startTime:ct.phase==="ended"&&(dt=ct.endTime-ct.startTime);const ht=Math.floor(dt/6e4%60),mt=Math.floor(dt/1e3%60),Ct=dt%1e3,ft=`${gt(ht)}:${gt(mt)}:${gt(Ct,3)}`;it.current&&(it.current.textContent=ft),nt.current&&(nt.current.textContent="Lap "+rt+"/3")});function gt(ct,dt=2){return String(ct).padStart(dt,"0")}return()=>{lt()}},[]),jsxs(Fragment,{children:[jsx("group",{children:ot.map((lt,gt)=>jsx("mesh",{ref:lt,visible:!1},gt))}),jsx("group",{children:jsxs(Html$1,{wrapperClass:"circuit-stats-overlay",className:"circuit-stats",children:[jsx("div",{ref:nt,className:"circuit-lap"}),jsx("div",{ref:it,className:"circuit-time"})]})})]})}function Plane(et){const[_]=usePlane(()=>({type:"Static",rotation:[-Math.PI/2,0,0],restitution:.9,friction:.1,...et}));return jsx("mesh",{ref:_,rotation:[-Math.PI/2,0,0],visible:!1,children:jsx("planeGeometry",{args:[200,200]})})}function Experience(){useThree(dt=>dt.camera);const{scene:et}=useThree(),_=reactExports.useRef(),_e=reactExports.useRef(),[tt,nt]=reactExports.useState([-6,3.9,6.21]),it=cubes,rt=waypoints_left,st=waypoints_right,[ot,at]=reactExports.useState(0),At=200,lt=new OrthographicCamera(-At,At,At,-At,2,500),[gt,ct]=reactExports.useState(!0);return reactExports.useEffect(()=>{_.current&&(_.current.shadowCameraVisible=!0,_.current.shadow.camera=lt,_.current.shadow.bias=1e-4,_.current.shadow.mapSize.width=4096*2,_.current.shadow.mapSize.height=4096*2)},[_,lt,et]),reactExports.useEffect(()=>{function dt(ht){ht.key==="k"&&(gt&&nt([-6,3.9,6.21+Math.random()*.01]),ct(!gt))}return window.addEventListener("keydown",dt),()=>window.removeEventListener("keydown",dt)},[gt]),jsxs(Fragment,{children:[jsx("directionalLight",{ref:_,castShadow:!0,position:[-100,100,-100],intensity:2,"shadow-camera":lt,color:"#fff",radius:10,blurSamples:20}),jsx("pointLight",{position:[100,100,100],intensity:.2,color:"#3865fc"}),jsx("pointLight",{position:[-100,100,-100],intensity:.2,color:"#ff6f00"}),jsx(OrbitControls,{target:[0,0,0],camera:_e.current,enableRotate:!1,enableZoom:!1}),!gt&&jsx(OrbitControls,{}),jsx("ambientLight",{intensity:1,color:"#fff"}),jsx(Environment,{files:"adamsbridge.hdr"}),jsxs(PhysicsProvider,{gravity:[0,-9.81,0],broadphase:"SAP",allowSleep:!0,children:[jsx(PhysicsWorld,{}),jsx(reactExports.Suspense,{children:jsx(Objects,{cubesData:it,cubesCount:it.length,waypointsRightData:st,waypointsRightCount:st.length,waypointsLeftData:rt,waypointsLeftCount:waypoints_left.length})}),jsx(Plane,{}),jsx(Vehicle,{thirdPerson:gt,checkpoint:ot}),jsx(Checkpoints,{checkpoint:ot,setCheckpoint:at})]}),jsx(Perf,{position:"top-right",minimal:!0,overClock:!0,antialias:!0}),jsx(Circuit,{})]})}const UserControls=({children:et})=>jsx(KeyboardControls,{map:[{name:"forward",keys:["ArrowUp","KeyW"]},{name:"backward",keys:["ArrowDown","KeyS"]},{name:"leftward",keys:["ArrowLeft","KeyA"]},{name:"rightward",keys:["ArrowRight","KeyD"]},{name:"brake",keys:["Space"]},{name:"honk",keys:["KeyH"]},{name:"camera",keys:["KeyC"]},{name:"reset",keys:["KeyR"]},{name:"pause",keys:["KeyP","Escape"]},{name:"mute",keys:["KeyM"]},{name:"info",keys:["KeyI"]}],children:et});var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(et,_){module.exports=_()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(_){_useWebWorker=!!_},getWebWorker=function(){return _useWebWorker},setLocationHref=function(_){locationHref=_},getLocationHref=function(){return locationHref};function createTag(et){return document.createElement(et)}function extendPrototype(et,_){var _e,tt=et.length,nt;for(_e=0;_e<tt;_e+=1){nt=et[_e].prototype;for(var it in nt)Object.prototype.hasOwnProperty.call(nt,it)&&(_.prototype[it]=nt[it])}}function getDescriptor(et,_){return Object.getOwnPropertyDescriptor(et,_)}function createProxyFunction(et){function _(){}return _.prototype=et,_}var audioControllerFactory=function(){function et(_){this.audios=[],this.audioFactory=_,this._volume=1,this._isMuted=!1}return et.prototype={addAudio:function(_e){this.audios.push(_e)},pause:function(){var _e,tt=this.audios.length;for(_e=0;_e<tt;_e+=1)this.audios[_e].pause()},resume:function(){var _e,tt=this.audios.length;for(_e=0;_e<tt;_e+=1)this.audios[_e].resume()},setRate:function(_e){var tt,nt=this.audios.length;for(tt=0;tt<nt;tt+=1)this.audios[tt].setRate(_e)},createAudio:function(_e){return this.audioFactory?this.audioFactory(_e):window.Howl?new window.Howl({src:[_e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(_e){this.audioFactory=_e},setVolume:function(_e){this._volume=_e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var _e,tt=this.audios.length;for(_e=0;_e<tt;_e+=1)this.audios[_e].volume(this._volume*(this._isMuted?0:1))}},function(){return new et}}(),createTypedArray=function(){function et(_e,tt){var nt=0,it=[],rt;switch(_e){case"int16":case"uint8c":rt=1;break;default:rt=1.1;break}for(nt=0;nt<tt;nt+=1)it.push(rt);return it}function _(_e,tt){return _e==="float32"?new Float32Array(tt):_e==="int16"?new Int16Array(tt):_e==="uint8c"?new Uint8ClampedArray(tt):et(_e,tt)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?_:et}();function createSizedArray(et){return Array.apply(null,{length:et})}function _typeof$6(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(_e){return typeof _e}:_typeof$6=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$6(et)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var et=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],_,_e=et.length;for(_=0;_<_e;_+=1)BMMath[et[_]]=Math[et[_]]})(),BMMath.random=Math.random,BMMath.abs=function(et){var _=_typeof$6(et);if(_==="object"&&et.length){var _e=createSizedArray(et.length),tt,nt=et.length;for(tt=0;tt<nt;tt+=1)_e[tt]=Math.abs(et[tt]);return _e}return Math.abs(et)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(et){et.style.position="absolute",et.style.top=0,et.style.left=0,et.style.display="block",et.style.transformOrigin="0 0",et.style.webkitTransformOrigin="0 0",et.style.backfaceVisibility="visible",et.style.webkitBackfaceVisibility="visible",et.style.transformStyle="preserve-3d",et.style.webkitTransformStyle="preserve-3d",et.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(et,_,_e,tt){this.type=et,this.currentTime=_,this.totalTime=_e,this.direction=tt<0?-1:1}function BMCompleteEvent(et,_){this.type=et,this.direction=_<0?-1:1}function BMCompleteLoopEvent(et,_,_e,tt){this.type=et,this.currentLoop=_e,this.totalLoops=_,this.direction=tt<0?-1:1}function BMSegmentStartEvent(et,_,_e){this.type=et,this.firstFrame=_,this.totalFrames=_e}function BMDestroyEvent(et,_){this.type=et,this.target=_}function BMRenderFrameErrorEvent(et,_){this.type="renderFrameError",this.nativeError=et,this.currentTime=_}function BMConfigErrorEvent(et){this.type="configError",this.nativeError=et}var createElementID=function(){var et=0;return function(){return et+=1,idPrefix$1+"__lottie_element_"+et}}();function HSVtoRGB(et,_,_e){var tt,nt,it,rt,st,ot,at,At;switch(rt=Math.floor(et*6),st=et*6-rt,ot=_e*(1-_),at=_e*(1-st*_),At=_e*(1-(1-st)*_),rt%6){case 0:tt=_e,nt=At,it=ot;break;case 1:tt=at,nt=_e,it=ot;break;case 2:tt=ot,nt=_e,it=At;break;case 3:tt=ot,nt=at,it=_e;break;case 4:tt=At,nt=ot,it=_e;break;case 5:tt=_e,nt=ot,it=at;break}return[tt,nt,it]}function RGBtoHSV(et,_,_e){var tt=Math.max(et,_,_e),nt=Math.min(et,_,_e),it=tt-nt,rt,st=tt===0?0:it/tt,ot=tt/255;switch(tt){case nt:rt=0;break;case et:rt=_-_e+it*(_<_e?6:0),rt/=6*it;break;case _:rt=_e-et+it*2,rt/=6*it;break;case _e:rt=et-_+it*4,rt/=6*it;break}return[rt,st,ot]}function addSaturationToRGB(et,_){var _e=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return _e[1]+=_,_e[1]>1?_e[1]=1:_e[1]<=0&&(_e[1]=0),HSVtoRGB(_e[0],_e[1],_e[2])}function addBrightnessToRGB(et,_){var _e=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return _e[2]+=_,_e[2]>1?_e[2]=1:_e[2]<0&&(_e[2]=0),HSVtoRGB(_e[0],_e[1],_e[2])}function addHueToRGB(et,_){var _e=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return _e[0]+=_/360,_e[0]>1?_e[0]-=1:_e[0]<0&&(_e[0]+=1),HSVtoRGB(_e[0],_e[1],_e[2])}var rgbToHex=function(){var et=[],_,_e;for(_=0;_<256;_+=1)_e=_.toString(16),et[_]=_e.length===1?"0"+_e:_e;return function(tt,nt,it){return tt<0&&(tt=0),nt<0&&(nt=0),it<0&&(it=0),"#"+et[tt]+et[nt]+et[it]}}(),setSubframeEnabled=function(_){subframeEnabled=!!_},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(_){expressionsPlugin=_},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(_){expressionsInterfaces=_},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(_){defaultCurveSegments=_},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(_){idPrefix$1=_};function createNS(et){return document.createElementNS(svgNS,et)}function _typeof$5(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(_e){return typeof _e}:_typeof$5=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$5(et)}var dataManager=function(){var et=1,_=[],_e,tt,nt={onmessage:function(){},postMessage:function(ct){_e({data:ct})}},it={postMessage:function(ct){nt.onmessage({data:ct})}};function rt(gt){if(window.Worker&&window.Blob&&getWebWorker()){var ct=new Blob(["var _workerSelf = self; self.onmessage = ",gt.toString()],{type:"text/javascript"}),dt=URL.createObjectURL(ct);return new Worker(dt)}return _e=gt,nt}function st(){tt||(tt=rt(function(ct){function dt(){function mt(Xt,_t){var Tt,St,Zt=Xt.length,Et,Wt,Ht,zt;for(St=0;St<Zt;St+=1)if(Tt=Xt[St],"ks"in Tt&&!Tt.completed){if(Tt.completed=!0,Tt.hasMask){var Pt=Tt.masksProperties;for(Wt=Pt.length,Et=0;Et<Wt;Et+=1)if(Pt[Et].pt.k.i)yt(Pt[Et].pt.k);else for(zt=Pt[Et].pt.k.length,Ht=0;Ht<zt;Ht+=1)Pt[Et].pt.k[Ht].s&&yt(Pt[Et].pt.k[Ht].s[0]),Pt[Et].pt.k[Ht].e&&yt(Pt[Et].pt.k[Ht].e[0])}Tt.ty===0?(Tt.layers=pt(Tt.refId,_t),mt(Tt.layers,_t)):Tt.ty===4?Vt(Tt.shapes):Tt.ty===5&&Yt(Tt)}}function Ct(Xt,_t){if(Xt){var Tt=0,St=Xt.length;for(Tt=0;Tt<St;Tt+=1)Xt[Tt].t===1&&(Xt[Tt].data.layers=pt(Xt[Tt].data.refId,_t),mt(Xt[Tt].data.layers,_t))}}function ft(Xt,_t){for(var Tt=0,St=_t.length;Tt<St;){if(_t[Tt].id===Xt)return _t[Tt];Tt+=1}return null}function pt(Xt,_t){var Tt=ft(Xt,_t);return Tt?Tt.layers.__used?JSON.parse(JSON.stringify(Tt.layers)):(Tt.layers.__used=!0,Tt.layers):null}function Vt(Xt){var _t,Tt=Xt.length,St,Zt;for(_t=Tt-1;_t>=0;_t-=1)if(Xt[_t].ty==="sh")if(Xt[_t].ks.k.i)yt(Xt[_t].ks.k);else for(Zt=Xt[_t].ks.k.length,St=0;St<Zt;St+=1)Xt[_t].ks.k[St].s&&yt(Xt[_t].ks.k[St].s[0]),Xt[_t].ks.k[St].e&&yt(Xt[_t].ks.k[St].e[0]);else Xt[_t].ty==="gr"&&Vt(Xt[_t].it)}function yt(Xt){var _t,Tt=Xt.i.length;for(_t=0;_t<Tt;_t+=1)Xt.i[_t][0]+=Xt.v[_t][0],Xt.i[_t][1]+=Xt.v[_t][1],Xt.o[_t][0]+=Xt.v[_t][0],Xt.o[_t][1]+=Xt.v[_t][1]}function Gt(Xt,_t){var Tt=_t?_t.split("."):[100,100,100];return Xt[0]>Tt[0]?!0:Tt[0]>Xt[0]?!1:Xt[1]>Tt[1]?!0:Tt[1]>Xt[1]?!1:Xt[2]>Tt[2]?!0:Tt[2]>Xt[2]?!1:null}var Bt=function(){var Xt=[4,4,14];function _t(St){var Zt=St.t.d;St.t.d={k:[{s:Zt,t:0}]}}function Tt(St){var Zt,Et=St.length;for(Zt=0;Zt<Et;Zt+=1)St[Zt].ty===5&&_t(St[Zt])}return function(St){if(Gt(Xt,St.v)&&(Tt(St.layers),St.assets)){var Zt,Et=St.assets.length;for(Zt=0;Zt<Et;Zt+=1)St.assets[Zt].layers&&Tt(St.assets[Zt].layers)}}}(),vt=function(){var Xt=[4,7,99];return function(_t){if(_t.chars&&!Gt(Xt,_t.v)){var Tt,St=_t.chars.length;for(Tt=0;Tt<St;Tt+=1){var Zt=_t.chars[Tt];Zt.data&&Zt.data.shapes&&(Vt(Zt.data.shapes),Zt.data.ip=0,Zt.data.op=99999,Zt.data.st=0,Zt.data.sr=1,Zt.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},_t.chars[Tt].t||(Zt.data.shapes.push({ty:"no"}),Zt.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),wt=function(){var Xt=[5,7,15];function _t(St){var Zt=St.t.p;typeof Zt.a=="number"&&(Zt.a={a:0,k:Zt.a}),typeof Zt.p=="number"&&(Zt.p={a:0,k:Zt.p}),typeof Zt.r=="number"&&(Zt.r={a:0,k:Zt.r})}function Tt(St){var Zt,Et=St.length;for(Zt=0;Zt<Et;Zt+=1)St[Zt].ty===5&&_t(St[Zt])}return function(St){if(Gt(Xt,St.v)&&(Tt(St.layers),St.assets)){var Zt,Et=St.assets.length;for(Zt=0;Zt<Et;Zt+=1)St.assets[Zt].layers&&Tt(St.assets[Zt].layers)}}}(),Mt=function(){var Xt=[4,1,9];function _t(St){var Zt,Et=St.length,Wt,Ht;for(Zt=0;Zt<Et;Zt+=1)if(St[Zt].ty==="gr")_t(St[Zt].it);else if(St[Zt].ty==="fl"||St[Zt].ty==="st")if(St[Zt].c.k&&St[Zt].c.k[0].i)for(Ht=St[Zt].c.k.length,Wt=0;Wt<Ht;Wt+=1)St[Zt].c.k[Wt].s&&(St[Zt].c.k[Wt].s[0]/=255,St[Zt].c.k[Wt].s[1]/=255,St[Zt].c.k[Wt].s[2]/=255,St[Zt].c.k[Wt].s[3]/=255),St[Zt].c.k[Wt].e&&(St[Zt].c.k[Wt].e[0]/=255,St[Zt].c.k[Wt].e[1]/=255,St[Zt].c.k[Wt].e[2]/=255,St[Zt].c.k[Wt].e[3]/=255);else St[Zt].c.k[0]/=255,St[Zt].c.k[1]/=255,St[Zt].c.k[2]/=255,St[Zt].c.k[3]/=255}function Tt(St){var Zt,Et=St.length;for(Zt=0;Zt<Et;Zt+=1)St[Zt].ty===4&&_t(St[Zt].shapes)}return function(St){if(Gt(Xt,St.v)&&(Tt(St.layers),St.assets)){var Zt,Et=St.assets.length;for(Zt=0;Zt<Et;Zt+=1)St.assets[Zt].layers&&Tt(St.assets[Zt].layers)}}}(),kt=function(){var Xt=[4,4,18];function _t(St){var Zt,Et=St.length,Wt,Ht;for(Zt=Et-1;Zt>=0;Zt-=1)if(St[Zt].ty==="sh")if(St[Zt].ks.k.i)St[Zt].ks.k.c=St[Zt].closed;else for(Ht=St[Zt].ks.k.length,Wt=0;Wt<Ht;Wt+=1)St[Zt].ks.k[Wt].s&&(St[Zt].ks.k[Wt].s[0].c=St[Zt].closed),St[Zt].ks.k[Wt].e&&(St[Zt].ks.k[Wt].e[0].c=St[Zt].closed);else St[Zt].ty==="gr"&&_t(St[Zt].it)}function Tt(St){var Zt,Et,Wt=St.length,Ht,zt,Pt,Ot;for(Et=0;Et<Wt;Et+=1){if(Zt=St[Et],Zt.hasMask){var Jt=Zt.masksProperties;for(zt=Jt.length,Ht=0;Ht<zt;Ht+=1)if(Jt[Ht].pt.k.i)Jt[Ht].pt.k.c=Jt[Ht].cl;else for(Ot=Jt[Ht].pt.k.length,Pt=0;Pt<Ot;Pt+=1)Jt[Ht].pt.k[Pt].s&&(Jt[Ht].pt.k[Pt].s[0].c=Jt[Ht].cl),Jt[Ht].pt.k[Pt].e&&(Jt[Ht].pt.k[Pt].e[0].c=Jt[Ht].cl)}Zt.ty===4&&_t(Zt.shapes)}}return function(St){if(Gt(Xt,St.v)&&(Tt(St.layers),St.assets)){var Zt,Et=St.assets.length;for(Zt=0;Zt<Et;Zt+=1)St.assets[Zt].layers&&Tt(St.assets[Zt].layers)}}}();function Nt(Xt){Xt.__complete||(Mt(Xt),Bt(Xt),vt(Xt),wt(Xt),kt(Xt),mt(Xt.layers,Xt.assets),Ct(Xt.chars,Xt.assets),Xt.__complete=!0)}function Yt(Xt){Xt.t.a.length===0&&"m"in Xt.t.p}var Lt={};return Lt.completeData=Nt,Lt.checkColors=Mt,Lt.checkChars=vt,Lt.checkPathProperties=wt,Lt.checkShapes=kt,Lt.completeLayers=mt,Lt}if(it.dataManager||(it.dataManager=dt()),it.assetLoader||(it.assetLoader=function(){function mt(ft){var pt=ft.getResponseHeader("content-type");return pt&&ft.responseType==="json"&&pt.indexOf("json")!==-1||ft.response&&_typeof$5(ft.response)==="object"?ft.response:ft.response&&typeof ft.response=="string"?JSON.parse(ft.response):ft.responseText?JSON.parse(ft.responseText):null}function Ct(ft,pt,Vt,yt){var Gt,Bt=new XMLHttpRequest;try{Bt.responseType="json"}catch{}Bt.onreadystatechange=function(){if(Bt.readyState===4)if(Bt.status===200)Gt=mt(Bt),Vt(Gt);else try{Gt=mt(Bt),Vt(Gt)}catch(vt){yt&&yt(vt)}};try{Bt.open(["G","E","T"].join(""),ft,!0)}catch{Bt.open(["G","E","T"].join(""),pt+"/"+ft,!0)}Bt.send()}return{load:Ct}}()),ct.data.type==="loadAnimation")it.assetLoader.load(ct.data.path,ct.data.fullPath,function(mt){it.dataManager.completeData(mt),it.postMessage({id:ct.data.id,payload:mt,status:"success"})},function(){it.postMessage({id:ct.data.id,status:"error"})});else if(ct.data.type==="complete"){var ht=ct.data.animation;it.dataManager.completeData(ht),it.postMessage({id:ct.data.id,payload:ht,status:"success"})}else ct.data.type==="loadData"&&it.assetLoader.load(ct.data.path,ct.data.fullPath,function(mt){it.postMessage({id:ct.data.id,payload:mt,status:"success"})},function(){it.postMessage({id:ct.data.id,status:"error"})})}),tt.onmessage=function(gt){var ct=gt.data,dt=ct.id,ht=_[dt];_[dt]=null,ct.status==="success"?ht.onComplete(ct.payload):ht.onError&&ht.onError()})}function ot(gt,ct){et+=1;var dt="processId_"+et;return _[dt]={onComplete:gt,onError:ct},dt}function at(gt,ct,dt){st();var ht=ot(ct,dt);tt.postMessage({type:"loadAnimation",path:gt,fullPath:window.location.origin+window.location.pathname,id:ht})}function At(gt,ct,dt){st();var ht=ot(ct,dt);tt.postMessage({type:"loadData",path:gt,fullPath:window.location.origin+window.location.pathname,id:ht})}function lt(gt,ct,dt){st();var ht=ot(ct,dt);tt.postMessage({type:"complete",animation:gt,id:ht})}return{loadAnimation:at,loadData:At,completeAnimation:lt}}(),ImagePreloader=function(){var et=function(){var Ct=createTag("canvas");Ct.width=1,Ct.height=1;var ft=Ct.getContext("2d");return ft.fillStyle="rgba(0,0,0,0)",ft.fillRect(0,0,1,1),Ct}();function _(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function _e(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function tt(Ct,ft,pt){var Vt="";if(Ct.e)Vt=Ct.p;else if(ft){var yt=Ct.p;yt.indexOf("images/")!==-1&&(yt=yt.split("/")[1]),Vt=ft+yt}else Vt=pt,Vt+=Ct.u?Ct.u:"",Vt+=Ct.p;return Vt}function nt(Ct){var ft=0,pt=setInterval(function(){var Vt=Ct.getBBox();(Vt.width||ft>500)&&(this._imageLoaded(),clearInterval(pt)),ft+=1}.bind(this),50)}function it(Ct){var ft=tt(Ct,this.assetsPath,this.path),pt=createNS("image");isSafari?this.testImageLoaded(pt):pt.addEventListener("load",this._imageLoaded,!1),pt.addEventListener("error",function(){Vt.img=et,this._imageLoaded()}.bind(this),!1),pt.setAttributeNS("http://www.w3.org/1999/xlink","href",ft),this._elementHelper.append?this._elementHelper.append(pt):this._elementHelper.appendChild(pt);var Vt={img:pt,assetData:Ct};return Vt}function rt(Ct){var ft=tt(Ct,this.assetsPath,this.path),pt=createTag("img");pt.crossOrigin="anonymous",pt.addEventListener("load",this._imageLoaded,!1),pt.addEventListener("error",function(){Vt.img=et,this._imageLoaded()}.bind(this),!1),pt.src=ft;var Vt={img:pt,assetData:Ct};return Vt}function st(Ct){var ft={assetData:Ct},pt=tt(Ct,this.assetsPath,this.path);return dataManager.loadData(pt,function(Vt){ft.img=Vt,this._footageLoaded()}.bind(this),function(){ft.img={},this._footageLoaded()}.bind(this)),ft}function ot(Ct,ft){this.imagesLoadedCb=ft;var pt,Vt=Ct.length;for(pt=0;pt<Vt;pt+=1)Ct[pt].layers||(!Ct[pt].t||Ct[pt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Ct[pt]))):Ct[pt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Ct[pt]))))}function at(Ct){this.path=Ct||""}function At(Ct){this.assetsPath=Ct||""}function lt(Ct){for(var ft=0,pt=this.images.length;ft<pt;){if(this.images[ft].assetData===Ct)return this.images[ft].img;ft+=1}return null}function gt(){this.imagesLoadedCb=null,this.images.length=0}function ct(){return this.totalImages===this.loadedAssets}function dt(){return this.totalFootages===this.loadedFootagesCount}function ht(Ct,ft){Ct==="svg"?(this._elementHelper=ft,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function mt(){this._imageLoaded=_.bind(this),this._footageLoaded=_e.bind(this),this.testImageLoaded=nt.bind(this),this.createFootageData=st.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return mt.prototype={loadAssets:ot,setAssetsPath:At,setPath:at,loadedImages:ct,loadedFootages:dt,destroy:gt,getAsset:lt,createImgData:rt,createImageData:it,imageLoaded:_,footageLoaded:_e,setCacheType:ht},mt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(_,_e){if(this._cbs[_])for(var tt=this._cbs[_],nt=0;nt<tt.length;nt+=1)tt[nt](_e)},addEventListener:function(_,_e){return this._cbs[_]||(this._cbs[_]=[]),this._cbs[_].push(_e),function(){this.removeEventListener(_,_e)}.bind(this)},removeEventListener:function(_,_e){if(!_e)this._cbs[_]=null;else if(this._cbs[_]){for(var tt=0,nt=this._cbs[_].length;tt<nt;)this._cbs[_][tt]===_e&&(this._cbs[_].splice(tt,1),tt-=1,nt-=1),tt+=1;this._cbs[_].length||(this._cbs[_]=null)}}};var markerParser=function(){function et(_){for(var _e=_.split(`\r
`),tt={},nt,it=0,rt=0;rt<_e.length;rt+=1)nt=_e[rt].split(":"),nt.length===2&&(tt[nt[0]]=nt[1].trim(),it+=1);if(it===0)throw new Error;return tt}return function(_){for(var _e=[],tt=0;tt<_.length;tt+=1){var nt=_[tt],it={time:nt.tm,duration:nt.dr};try{it.payload=JSON.parse(_[tt].cm)}catch{try{it.payload=et(_[tt].cm)}catch{it.payload={name:_[tt].cm}}}_e.push(it)}return _e}}(),ProjectInterface=function(){function et(_){this.compositions.push(_)}return function(){function _(_e){for(var tt=0,nt=this.compositions.length;tt<nt;){if(this.compositions[tt].data&&this.compositions[tt].data.nm===_e)return this.compositions[tt].prepareFrame&&this.compositions[tt].data.xt&&this.compositions[tt].prepareFrame(this.currentFrame),this.compositions[tt].compInterface;tt+=1}return null}return _.compositions=[],_.currentFrame=0,_.registerComposition=et,_}}(),renderers={},registerRenderer=function(_,_e){renderers[_]=_e};function getRenderer(et){return renderers[et]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var et in renderers)if(renderers[et])return et;return""}function _typeof$4(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(_e){return typeof _e}:_typeof$4=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$4(et)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(et){(et.wrapper||et.container)&&(this.wrapper=et.wrapper||et.container);var _="svg";et.animType?_=et.animType:et.renderer&&(_=et.renderer);var _e=getRenderer(_);this.renderer=new _e(this,et.rendererSettings),this.imagePreloader.setCacheType(_,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=_,et.loop===""||et.loop===null||et.loop===void 0||et.loop===!0?this.loop=!0:et.loop===!1?this.loop=!1:this.loop=parseInt(et.loop,10),this.autoplay="autoplay"in et?et.autoplay:!0,this.name=et.name?et.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(et,"autoloadSegments")?et.autoloadSegments:!0,this.assetsPath=et.assetsPath,this.initialSegment=et.initialSegment,et.audioFactory&&this.audioController.setAudioFactory(et.audioFactory),et.animationData?this.setupAnimation(et.animationData):et.path&&(et.path.lastIndexOf("\\")!==-1?this.path=et.path.substr(0,et.path.lastIndexOf("\\")+1):this.path=et.path.substr(0,et.path.lastIndexOf("/")+1),this.fileName=et.path.substr(et.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(et.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(et){dataManager.completeAnimation(et,this.configAnimation)},AnimationItem.prototype.setData=function(et,_){_&&_typeof$4(_)!=="object"&&(_=JSON.parse(_));var _e={wrapper:et,animationData:_},tt=et.attributes;_e.path=tt.getNamedItem("data-animation-path")?tt.getNamedItem("data-animation-path").value:tt.getNamedItem("data-bm-path")?tt.getNamedItem("data-bm-path").value:tt.getNamedItem("bm-path")?tt.getNamedItem("bm-path").value:"",_e.animType=tt.getNamedItem("data-anim-type")?tt.getNamedItem("data-anim-type").value:tt.getNamedItem("data-bm-type")?tt.getNamedItem("data-bm-type").value:tt.getNamedItem("bm-type")?tt.getNamedItem("bm-type").value:tt.getNamedItem("data-bm-renderer")?tt.getNamedItem("data-bm-renderer").value:tt.getNamedItem("bm-renderer")?tt.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var nt=tt.getNamedItem("data-anim-loop")?tt.getNamedItem("data-anim-loop").value:tt.getNamedItem("data-bm-loop")?tt.getNamedItem("data-bm-loop").value:tt.getNamedItem("bm-loop")?tt.getNamedItem("bm-loop").value:"";nt==="false"?_e.loop=!1:nt==="true"?_e.loop=!0:nt!==""&&(_e.loop=parseInt(nt,10));var it=tt.getNamedItem("data-anim-autoplay")?tt.getNamedItem("data-anim-autoplay").value:tt.getNamedItem("data-bm-autoplay")?tt.getNamedItem("data-bm-autoplay").value:tt.getNamedItem("bm-autoplay")?tt.getNamedItem("bm-autoplay").value:!0;_e.autoplay=it!=="false",_e.name=tt.getNamedItem("data-name")?tt.getNamedItem("data-name").value:tt.getNamedItem("data-bm-name")?tt.getNamedItem("data-bm-name").value:tt.getNamedItem("bm-name")?tt.getNamedItem("bm-name").value:"";var rt=tt.getNamedItem("data-anim-prerender")?tt.getNamedItem("data-anim-prerender").value:tt.getNamedItem("data-bm-prerender")?tt.getNamedItem("data-bm-prerender").value:tt.getNamedItem("bm-prerender")?tt.getNamedItem("bm-prerender").value:"";rt==="false"&&(_e.prerender=!1),_e.path?this.setParams(_e):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(et){et.op>this.animationData.op&&(this.animationData.op=et.op,this.totalFrames=Math.floor(et.op-this.animationData.ip));var _=this.animationData.layers,_e,tt=_.length,nt=et.layers,it,rt=nt.length;for(it=0;it<rt;it+=1)for(_e=0;_e<tt;){if(_[_e].id===nt[it].id){_[_e]=nt[it];break}_e+=1}if((et.chars||et.fonts)&&(this.renderer.globalData.fontManager.addChars(et.chars),this.renderer.globalData.fontManager.addFonts(et.fonts,this.renderer.globalData.defs)),et.assets)for(tt=et.assets.length,_e=0;_e<tt;_e+=1)this.animationData.assets.push(et.assets[_e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(et){this.animationData=et;var _=getExpressionsPlugin();_&&_.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var et=this.animationData.segments;if(!et||et.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var _=et.shift();this.timeCompleted=_.time*this.frameRate;var _e=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(_e,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var et=this.animationData.segments;et||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(et){if(this.renderer)try{this.animationData=et,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(et),et.assets||(et.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(et.assets),this.markers=markerParser(et.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(_){this.triggerConfigError(_)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var et=getExpressionsPlugin();et&&et.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(et,_){var _e=typeof et=="number"?et:void 0,tt=typeof _=="number"?_:void 0;this.renderer.updateContainerSize(_e,tt)},AnimationItem.prototype.setSubframe=function(et){this.isSubframeEnabled=!!et},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(et){this.triggerRenderFrameError(et)}},AnimationItem.prototype.play=function(et){et&&this.name!==et||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(et){et&&this.name!==et||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(et){et&&this.name!==et||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(et){et&&this.name!==et||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(et){for(var _,_e=0;_e<this.markers.length;_e+=1)if(_=this.markers[_e],_.payload&&_.payload.name===et)return _;return null},AnimationItem.prototype.goToAndStop=function(et,_,_e){if(!(_e&&this.name!==_e)){var tt=Number(et);if(isNaN(tt)){var nt=this.getMarkerData(et);nt&&this.goToAndStop(nt.time,!0)}else _?this.setCurrentRawFrameValue(et):this.setCurrentRawFrameValue(et*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(et,_,_e){if(!(_e&&this.name!==_e)){var tt=Number(et);if(isNaN(tt)){var nt=this.getMarkerData(et);nt&&(nt.duration?this.playSegments([nt.time,nt.time+nt.duration],!0):this.goToAndStop(nt.time,!0))}else this.goToAndStop(tt,_,_e);this.play()}},AnimationItem.prototype.advanceTime=function(et){if(!(this.isPaused===!0||this.isLoaded===!1)){var _=this.currentRawFrame+et*this.frameModifier,_e=!1;_>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(_>this.totalFrames?_%this.totalFrames:0)||(_e=!0,_=this.totalFrames-1):_>=this.totalFrames?(this.playCount+=1,this.checkSegments(_%this.totalFrames)||(this.setCurrentRawFrameValue(_%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(_):_<0?this.checkSegments(_%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+_%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(_e=!0,_=0)):this.setCurrentRawFrameValue(_),_e&&(this.setCurrentRawFrameValue(_),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(et,_){this.playCount=0,et[1]<et[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=et[0]-et[1],this.timeCompleted=this.totalFrames,this.firstFrame=et[1],this.setCurrentRawFrameValue(this.totalFrames-.001-_)):et[1]>et[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=et[1]-et[0],this.timeCompleted=this.totalFrames,this.firstFrame=et[0],this.setCurrentRawFrameValue(.001+_)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(et,_){var _e=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<et?_e=et:this.currentRawFrame+this.firstFrame>_&&(_e=_-et)),this.firstFrame=et,this.totalFrames=_-et,this.timeCompleted=this.totalFrames,_e!==-1&&this.goToAndStop(_e,!0)},AnimationItem.prototype.playSegments=function(et,_){if(_&&(this.segments.length=0),_typeof$4(et[0])==="object"){var _e,tt=et.length;for(_e=0;_e<tt;_e+=1)this.segments.push(et[_e])}else this.segments.push(et);this.segments.length&&_&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(et){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),et&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(et){return this.segments.length?(this.adjustSegment(this.segments.shift(),et),!0):!1},AnimationItem.prototype.destroy=function(et){et&&this.name!==et||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(et){this.currentRawFrame=et,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(et){this.playSpeed=et,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(et){this.playDirection=et<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(et){this.loop=et},AnimationItem.prototype.setVolume=function(et,_){_&&this.name!==_||this.audioController.setVolume(et)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(et){et&&this.name!==et||this.audioController.mute()},AnimationItem.prototype.unmute=function(et){et&&this.name!==et||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(et){var _="";if(et.e)_=et.p;else if(this.assetsPath){var _e=et.p;_e.indexOf("images/")!==-1&&(_e=_e.split("/")[1]),_=this.assetsPath+_e}else _=this.path,_+=et.u?et.u:"",_+=et.p;return _},AnimationItem.prototype.getAssetData=function(et){for(var _=0,_e=this.assets.length;_<_e;){if(et===this.assets[_].id)return this.assets[_];_+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(et){return et?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(et,_,_e){try{var tt=this.renderer.getElementByPath(et);tt.updateDocumentData(_,_e)}catch{}},AnimationItem.prototype.trigger=function(et){if(this._cbs&&this._cbs[et])switch(et){case"enterFrame":this.triggerEvent(et,new BMEnterFrameEvent(et,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(et,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(et,new BMCompleteLoopEvent(et,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(et,new BMCompleteEvent(et,this.frameMult));break;case"segmentStart":this.triggerEvent(et,new BMSegmentStartEvent(et,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(et,new BMDestroyEvent(et,this));break;default:this.triggerEvent(et)}et==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(et,this.currentFrame,this.totalFrames,this.frameMult)),et==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(et,this.loop,this.playCount,this.frameMult)),et==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(et,this.frameMult)),et==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(et,this.firstFrame,this.totalFrames)),et==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(et,this))},AnimationItem.prototype.triggerRenderFrameError=function(et){var _=new BMRenderFrameErrorEvent(et,this.currentFrame);this.triggerEvent("error",_),this.onError&&this.onError.call(this,_)},AnimationItem.prototype.triggerConfigError=function(et){var _=new BMConfigErrorEvent(et,this.currentFrame);this.triggerEvent("error",_),this.onError&&this.onError.call(this,_)};var animationManager=function(){var et={},_=[],_e=0,tt=0,nt=0,it=!0,rt=!1;function st(_t){for(var Tt=0,St=_t.target;Tt<tt;)_[Tt].animation===St&&(_.splice(Tt,1),Tt-=1,tt-=1,St.isPaused||lt()),Tt+=1}function ot(_t,Tt){if(!_t)return null;for(var St=0;St<tt;){if(_[St].elem===_t&&_[St].elem!==null)return _[St].animation;St+=1}var Zt=new AnimationItem;return gt(Zt,_t),Zt.setData(_t,Tt),Zt}function at(){var _t,Tt=_.length,St=[];for(_t=0;_t<Tt;_t+=1)St.push(_[_t].animation);return St}function At(){nt+=1,Mt()}function lt(){nt-=1}function gt(_t,Tt){_t.addEventListener("destroy",st),_t.addEventListener("_active",At),_t.addEventListener("_idle",lt),_.push({elem:Tt,animation:_t}),tt+=1}function ct(_t){var Tt=new AnimationItem;return gt(Tt,null),Tt.setParams(_t),Tt}function dt(_t,Tt){var St;for(St=0;St<tt;St+=1)_[St].animation.setSpeed(_t,Tt)}function ht(_t,Tt){var St;for(St=0;St<tt;St+=1)_[St].animation.setDirection(_t,Tt)}function mt(_t){var Tt;for(Tt=0;Tt<tt;Tt+=1)_[Tt].animation.play(_t)}function Ct(_t){var Tt=_t-_e,St;for(St=0;St<tt;St+=1)_[St].animation.advanceTime(Tt);_e=_t,nt&&!rt?window.requestAnimationFrame(Ct):it=!0}function ft(_t){_e=_t,window.requestAnimationFrame(Ct)}function pt(_t){var Tt;for(Tt=0;Tt<tt;Tt+=1)_[Tt].animation.pause(_t)}function Vt(_t,Tt,St){var Zt;for(Zt=0;Zt<tt;Zt+=1)_[Zt].animation.goToAndStop(_t,Tt,St)}function yt(_t){var Tt;for(Tt=0;Tt<tt;Tt+=1)_[Tt].animation.stop(_t)}function Gt(_t){var Tt;for(Tt=0;Tt<tt;Tt+=1)_[Tt].animation.togglePause(_t)}function Bt(_t){var Tt;for(Tt=tt-1;Tt>=0;Tt-=1)_[Tt].animation.destroy(_t)}function vt(_t,Tt,St){var Zt=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Et,Wt=Zt.length;for(Et=0;Et<Wt;Et+=1)St&&Zt[Et].setAttribute("data-bm-type",St),ot(Zt[Et],_t);if(Tt&&Wt===0){St||(St="svg");var Ht=document.getElementsByTagName("body")[0];Ht.innerText="";var zt=createTag("div");zt.style.width="100%",zt.style.height="100%",zt.setAttribute("data-bm-type",St),Ht.appendChild(zt),ot(zt,_t)}}function wt(){var _t;for(_t=0;_t<tt;_t+=1)_[_t].animation.resize()}function Mt(){!rt&&nt&&it&&(window.requestAnimationFrame(ft),it=!1)}function kt(){rt=!0}function Nt(){rt=!1,Mt()}function Yt(_t,Tt){var St;for(St=0;St<tt;St+=1)_[St].animation.setVolume(_t,Tt)}function Lt(_t){var Tt;for(Tt=0;Tt<tt;Tt+=1)_[Tt].animation.mute(_t)}function Xt(_t){var Tt;for(Tt=0;Tt<tt;Tt+=1)_[Tt].animation.unmute(_t)}return et.registerAnimation=ot,et.loadAnimation=ct,et.setSpeed=dt,et.setDirection=ht,et.play=mt,et.pause=pt,et.stop=yt,et.togglePause=Gt,et.searchAnimations=vt,et.resize=wt,et.goToAndStop=Vt,et.destroy=Bt,et.freeze=kt,et.unfreeze=Nt,et.setVolume=Yt,et.mute=Lt,et.unmute=Xt,et.getRegisteredAnimations=at,et}(),BezierFactory=function(){var et={};et.getBezierEasing=_e;var _={};function _e(ft,pt,Vt,yt,Gt){var Bt=Gt||("bez_"+ft+"_"+pt+"_"+Vt+"_"+yt).replace(/\./g,"p");if(_[Bt])return _[Bt];var vt=new Ct([ft,pt,Vt,yt]);return _[Bt]=vt,vt}var tt=4,nt=.001,it=1e-7,rt=10,st=11,ot=1/(st-1),at=typeof Float32Array=="function";function At(ft,pt){return 1-3*pt+3*ft}function lt(ft,pt){return 3*pt-6*ft}function gt(ft){return 3*ft}function ct(ft,pt,Vt){return((At(pt,Vt)*ft+lt(pt,Vt))*ft+gt(pt))*ft}function dt(ft,pt,Vt){return 3*At(pt,Vt)*ft*ft+2*lt(pt,Vt)*ft+gt(pt)}function ht(ft,pt,Vt,yt,Gt){var Bt,vt,wt=0;do vt=pt+(Vt-pt)/2,Bt=ct(vt,yt,Gt)-ft,Bt>0?Vt=vt:pt=vt;while(Math.abs(Bt)>it&&++wt<rt);return vt}function mt(ft,pt,Vt,yt){for(var Gt=0;Gt<tt;++Gt){var Bt=dt(pt,Vt,yt);if(Bt===0)return pt;var vt=ct(pt,Vt,yt)-ft;pt-=vt/Bt}return pt}function Ct(ft){this._p=ft,this._mSampleValues=at?new Float32Array(st):new Array(st),this._precomputed=!1,this.get=this.get.bind(this)}return Ct.prototype={get:function(pt){var Vt=this._p[0],yt=this._p[1],Gt=this._p[2],Bt=this._p[3];return this._precomputed||this._precompute(),Vt===yt&&Gt===Bt?pt:pt===0?0:pt===1?1:ct(this._getTForX(pt),yt,Bt)},_precompute:function(){var pt=this._p[0],Vt=this._p[1],yt=this._p[2],Gt=this._p[3];this._precomputed=!0,(pt!==Vt||yt!==Gt)&&this._calcSampleValues()},_calcSampleValues:function(){for(var pt=this._p[0],Vt=this._p[2],yt=0;yt<st;++yt)this._mSampleValues[yt]=ct(yt*ot,pt,Vt)},_getTForX:function(pt){for(var Vt=this._p[0],yt=this._p[2],Gt=this._mSampleValues,Bt=0,vt=1,wt=st-1;vt!==wt&&Gt[vt]<=pt;++vt)Bt+=ot;--vt;var Mt=(pt-Gt[vt])/(Gt[vt+1]-Gt[vt]),kt=Bt+Mt*ot,Nt=dt(kt,Vt,yt);return Nt>=nt?mt(pt,kt,Vt,yt):Nt===0?kt:ht(pt,Bt,Bt+ot,Vt,yt)}},et}(),pooling=function(){function et(_){return _.concat(createSizedArray(_.length))}return{double:et}}(),poolFactory=function(){return function(et,_,_e){var tt=0,nt=et,it=createSizedArray(nt),rt={newElement:st,release:ot};function st(){var at;return tt?(tt-=1,at=it[tt]):at=_(),at}function ot(at){tt===nt&&(it=pooling.double(it),nt*=2),_e&&_e(at),it[tt]=at,tt+=1}return rt}}(),bezierLengthPool=function(){function et(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,et)}(),segmentsLengthPool=function(){function et(){return{lengths:[],totalLength:0}}function _(_e){var tt,nt=_e.lengths.length;for(tt=0;tt<nt;tt+=1)bezierLengthPool.release(_e.lengths[tt]);_e.lengths.length=0}return poolFactory(8,et,_)}();function bezFunction(){var et=Math;function _(gt,ct,dt,ht,mt,Ct){var ft=gt*ht+ct*mt+dt*Ct-mt*ht-Ct*gt-dt*ct;return ft>-.001&&ft<.001}function _e(gt,ct,dt,ht,mt,Ct,ft,pt,Vt){if(dt===0&&Ct===0&&Vt===0)return _(gt,ct,ht,mt,ft,pt);var yt=et.sqrt(et.pow(ht-gt,2)+et.pow(mt-ct,2)+et.pow(Ct-dt,2)),Gt=et.sqrt(et.pow(ft-gt,2)+et.pow(pt-ct,2)+et.pow(Vt-dt,2)),Bt=et.sqrt(et.pow(ft-ht,2)+et.pow(pt-mt,2)+et.pow(Vt-Ct,2)),vt;return yt>Gt?yt>Bt?vt=yt-Gt-Bt:vt=Bt-Gt-yt:Bt>Gt?vt=Bt-Gt-yt:vt=Gt-yt-Bt,vt>-1e-4&&vt<1e-4}var tt=function(){return function(gt,ct,dt,ht){var mt=getDefaultCurveSegments(),Ct,ft,pt,Vt,yt,Gt=0,Bt,vt=[],wt=[],Mt=bezierLengthPool.newElement();for(pt=dt.length,Ct=0;Ct<mt;Ct+=1){for(yt=Ct/(mt-1),Bt=0,ft=0;ft<pt;ft+=1)Vt=bmPow(1-yt,3)*gt[ft]+3*bmPow(1-yt,2)*yt*dt[ft]+3*(1-yt)*bmPow(yt,2)*ht[ft]+bmPow(yt,3)*ct[ft],vt[ft]=Vt,wt[ft]!==null&&(Bt+=bmPow(vt[ft]-wt[ft],2)),wt[ft]=vt[ft];Bt&&(Bt=bmSqrt(Bt),Gt+=Bt),Mt.percents[Ct]=yt,Mt.lengths[Ct]=Gt}return Mt.addedLength=Gt,Mt}}();function nt(gt){var ct=segmentsLengthPool.newElement(),dt=gt.c,ht=gt.v,mt=gt.o,Ct=gt.i,ft,pt=gt._length,Vt=ct.lengths,yt=0;for(ft=0;ft<pt-1;ft+=1)Vt[ft]=tt(ht[ft],ht[ft+1],mt[ft],Ct[ft+1]),yt+=Vt[ft].addedLength;return dt&&pt&&(Vt[ft]=tt(ht[ft],ht[0],mt[ft],Ct[0]),yt+=Vt[ft].addedLength),ct.totalLength=yt,ct}function it(gt){this.segmentLength=0,this.points=new Array(gt)}function rt(gt,ct){this.partialLength=gt,this.point=ct}var st=function(){var gt={};return function(ct,dt,ht,mt){var Ct=(ct[0]+"_"+ct[1]+"_"+dt[0]+"_"+dt[1]+"_"+ht[0]+"_"+ht[1]+"_"+mt[0]+"_"+mt[1]).replace(/\./g,"p");if(!gt[Ct]){var ft=getDefaultCurveSegments(),pt,Vt,yt,Gt,Bt,vt=0,wt,Mt,kt=null;ct.length===2&&(ct[0]!==dt[0]||ct[1]!==dt[1])&&_(ct[0],ct[1],dt[0],dt[1],ct[0]+ht[0],ct[1]+ht[1])&&_(ct[0],ct[1],dt[0],dt[1],dt[0]+mt[0],dt[1]+mt[1])&&(ft=2);var Nt=new it(ft);for(yt=ht.length,pt=0;pt<ft;pt+=1){for(Mt=createSizedArray(yt),Bt=pt/(ft-1),wt=0,Vt=0;Vt<yt;Vt+=1)Gt=bmPow(1-Bt,3)*ct[Vt]+3*bmPow(1-Bt,2)*Bt*(ct[Vt]+ht[Vt])+3*(1-Bt)*bmPow(Bt,2)*(dt[Vt]+mt[Vt])+bmPow(Bt,3)*dt[Vt],Mt[Vt]=Gt,kt!==null&&(wt+=bmPow(Mt[Vt]-kt[Vt],2));wt=bmSqrt(wt),vt+=wt,Nt.points[pt]=new rt(wt,Mt),kt=Mt}Nt.segmentLength=vt,gt[Ct]=Nt}return gt[Ct]}}();function ot(gt,ct){var dt=ct.percents,ht=ct.lengths,mt=dt.length,Ct=bmFloor((mt-1)*gt),ft=gt*ct.addedLength,pt=0;if(Ct===mt-1||Ct===0||ft===ht[Ct])return dt[Ct];for(var Vt=ht[Ct]>ft?-1:1,yt=!0;yt;)if(ht[Ct]<=ft&&ht[Ct+1]>ft?(pt=(ft-ht[Ct])/(ht[Ct+1]-ht[Ct]),yt=!1):Ct+=Vt,Ct<0||Ct>=mt-1){if(Ct===mt-1)return dt[Ct];yt=!1}return dt[Ct]+(dt[Ct+1]-dt[Ct])*pt}function at(gt,ct,dt,ht,mt,Ct){var ft=ot(mt,Ct),pt=1-ft,Vt=et.round((pt*pt*pt*gt[0]+(ft*pt*pt+pt*ft*pt+pt*pt*ft)*dt[0]+(ft*ft*pt+pt*ft*ft+ft*pt*ft)*ht[0]+ft*ft*ft*ct[0])*1e3)/1e3,yt=et.round((pt*pt*pt*gt[1]+(ft*pt*pt+pt*ft*pt+pt*pt*ft)*dt[1]+(ft*ft*pt+pt*ft*ft+ft*pt*ft)*ht[1]+ft*ft*ft*ct[1])*1e3)/1e3;return[Vt,yt]}var At=createTypedArray("float32",8);function lt(gt,ct,dt,ht,mt,Ct,ft){mt<0?mt=0:mt>1&&(mt=1);var pt=ot(mt,ft);Ct=Ct>1?1:Ct;var Vt=ot(Ct,ft),yt,Gt=gt.length,Bt=1-pt,vt=1-Vt,wt=Bt*Bt*Bt,Mt=pt*Bt*Bt*3,kt=pt*pt*Bt*3,Nt=pt*pt*pt,Yt=Bt*Bt*vt,Lt=pt*Bt*vt+Bt*pt*vt+Bt*Bt*Vt,Xt=pt*pt*vt+Bt*pt*Vt+pt*Bt*Vt,_t=pt*pt*Vt,Tt=Bt*vt*vt,St=pt*vt*vt+Bt*Vt*vt+Bt*vt*Vt,Zt=pt*Vt*vt+Bt*Vt*Vt+pt*vt*Vt,Et=pt*Vt*Vt,Wt=vt*vt*vt,Ht=Vt*vt*vt+vt*Vt*vt+vt*vt*Vt,zt=Vt*Vt*vt+vt*Vt*Vt+Vt*vt*Vt,Pt=Vt*Vt*Vt;for(yt=0;yt<Gt;yt+=1)At[yt*4]=et.round((wt*gt[yt]+Mt*dt[yt]+kt*ht[yt]+Nt*ct[yt])*1e3)/1e3,At[yt*4+1]=et.round((Yt*gt[yt]+Lt*dt[yt]+Xt*ht[yt]+_t*ct[yt])*1e3)/1e3,At[yt*4+2]=et.round((Tt*gt[yt]+St*dt[yt]+Zt*ht[yt]+Et*ct[yt])*1e3)/1e3,At[yt*4+3]=et.round((Wt*gt[yt]+Ht*dt[yt]+zt*ht[yt]+Pt*ct[yt])*1e3)/1e3;return At}return{getSegmentsLength:nt,getNewSegment:lt,getPointInSegment:at,buildBezierData:st,pointOnLine2D:_,pointOnLine3D:_e}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(et,_){var _e=this.offsetTime,tt;this.propType==="multidimensional"&&(tt=createTypedArray("float32",this.pv.length));for(var nt=_.lastIndex,it=nt,rt=this.keyframes.length-1,st=!0,ot,at,At;st;){if(ot=this.keyframes[it],at=this.keyframes[it+1],it===rt-1&&et>=at.t-_e){ot.h&&(ot=at),nt=0;break}if(at.t-_e>et){nt=it;break}it<rt-1?it+=1:(nt=0,st=!1)}At=this.keyframesMetadata[it]||{};var lt,gt,ct,dt,ht,mt,Ct=at.t-_e,ft=ot.t-_e,pt;if(ot.to){At.bezierData||(At.bezierData=bez.buildBezierData(ot.s,at.s||ot.e,ot.to,ot.ti));var Vt=At.bezierData;if(et>=Ct||et<ft){var yt=et>=Ct?Vt.points.length-1:0;for(gt=Vt.points[yt].point.length,lt=0;lt<gt;lt+=1)tt[lt]=Vt.points[yt].point[lt]}else{At.__fnct?mt=At.__fnct:(mt=BezierFactory.getBezierEasing(ot.o.x,ot.o.y,ot.i.x,ot.i.y,ot.n).get,At.__fnct=mt),ct=mt((et-ft)/(Ct-ft));var Gt=Vt.segmentLength*ct,Bt,vt=_.lastFrame<et&&_._lastKeyframeIndex===it?_._lastAddedLength:0;for(ht=_.lastFrame<et&&_._lastKeyframeIndex===it?_._lastPoint:0,st=!0,dt=Vt.points.length;st;){if(vt+=Vt.points[ht].partialLength,Gt===0||ct===0||ht===Vt.points.length-1){for(gt=Vt.points[ht].point.length,lt=0;lt<gt;lt+=1)tt[lt]=Vt.points[ht].point[lt];break}else if(Gt>=vt&&Gt<vt+Vt.points[ht+1].partialLength){for(Bt=(Gt-vt)/Vt.points[ht+1].partialLength,gt=Vt.points[ht].point.length,lt=0;lt<gt;lt+=1)tt[lt]=Vt.points[ht].point[lt]+(Vt.points[ht+1].point[lt]-Vt.points[ht].point[lt])*Bt;break}ht<dt-1?ht+=1:st=!1}_._lastPoint=ht,_._lastAddedLength=vt-Vt.points[ht].partialLength,_._lastKeyframeIndex=it}}else{var wt,Mt,kt,Nt,Yt;if(rt=ot.s.length,pt=at.s||ot.e,this.sh&&ot.h!==1)if(et>=Ct)tt[0]=pt[0],tt[1]=pt[1],tt[2]=pt[2];else if(et<=ft)tt[0]=ot.s[0],tt[1]=ot.s[1],tt[2]=ot.s[2];else{var Lt=createQuaternion(ot.s),Xt=createQuaternion(pt),_t=(et-ft)/(Ct-ft);quaternionToEuler(tt,slerp(Lt,Xt,_t))}else for(it=0;it<rt;it+=1)ot.h!==1&&(et>=Ct?ct=1:et<ft?ct=0:(ot.o.x.constructor===Array?(At.__fnct||(At.__fnct=[]),At.__fnct[it]?mt=At.__fnct[it]:(wt=ot.o.x[it]===void 0?ot.o.x[0]:ot.o.x[it],Mt=ot.o.y[it]===void 0?ot.o.y[0]:ot.o.y[it],kt=ot.i.x[it]===void 0?ot.i.x[0]:ot.i.x[it],Nt=ot.i.y[it]===void 0?ot.i.y[0]:ot.i.y[it],mt=BezierFactory.getBezierEasing(wt,Mt,kt,Nt).get,At.__fnct[it]=mt)):At.__fnct?mt=At.__fnct:(wt=ot.o.x,Mt=ot.o.y,kt=ot.i.x,Nt=ot.i.y,mt=BezierFactory.getBezierEasing(wt,Mt,kt,Nt).get,ot.keyframeMetadata=mt),ct=mt((et-ft)/(Ct-ft)))),pt=at.s||ot.e,Yt=ot.h===1?ot.s[it]:ot.s[it]+(pt[it]-ot.s[it])*ct,this.propType==="multidimensional"?tt[it]=Yt:tt=Yt}return _.lastIndex=nt,tt}function slerp(et,_,_e){var tt=[],nt=et[0],it=et[1],rt=et[2],st=et[3],ot=_[0],at=_[1],At=_[2],lt=_[3],gt,ct,dt,ht,mt;return ct=nt*ot+it*at+rt*At+st*lt,ct<0&&(ct=-ct,ot=-ot,at=-at,At=-At,lt=-lt),1-ct>1e-6?(gt=Math.acos(ct),dt=Math.sin(gt),ht=Math.sin((1-_e)*gt)/dt,mt=Math.sin(_e*gt)/dt):(ht=1-_e,mt=_e),tt[0]=ht*nt+mt*ot,tt[1]=ht*it+mt*at,tt[2]=ht*rt+mt*At,tt[3]=ht*st+mt*lt,tt}function quaternionToEuler(et,_){var _e=_[0],tt=_[1],nt=_[2],it=_[3],rt=Math.atan2(2*tt*it-2*_e*nt,1-2*tt*tt-2*nt*nt),st=Math.asin(2*_e*tt+2*nt*it),ot=Math.atan2(2*_e*it-2*tt*nt,1-2*_e*_e-2*nt*nt);et[0]=rt/degToRads,et[1]=st/degToRads,et[2]=ot/degToRads}function createQuaternion(et){var _=et[0]*degToRads,_e=et[1]*degToRads,tt=et[2]*degToRads,nt=Math.cos(_/2),it=Math.cos(_e/2),rt=Math.cos(tt/2),st=Math.sin(_/2),ot=Math.sin(_e/2),at=Math.sin(tt/2),At=nt*it*rt-st*ot*at,lt=st*ot*rt+nt*it*at,gt=st*it*rt+nt*ot*at,ct=nt*ot*rt-st*it*at;return[lt,gt,ct,At]}function getValueAtCurrentTime(){var et=this.comp.renderedFrame-this.offsetTime,_=this.keyframes[0].t-this.offsetTime,_e=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(et===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=_e&&et>=_e||this._caching.lastFrame<_&&et<_))){this._caching.lastFrame>=et&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var tt=this.interpolateValue(et,this._caching);this.pv=tt}return this._caching.lastFrame=et,this.pv}function setVValue(et){var _;if(this.propType==="unidimensional")_=et*this.mult,mathAbs(this.v-_)>1e-5&&(this.v=_,this._mdf=!0);else for(var _e=0,tt=this.v.length;_e<tt;)_=et[_e]*this.mult,mathAbs(this.v[_e]-_)>1e-5&&(this.v[_e]=_,this._mdf=!0),_e+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var et,_=this.effectsSequence.length,_e=this.kf?this.pv:this.data.k;for(et=0;et<_;et+=1)_e=this.effectsSequence[et](_e);this.setVValue(_e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(et){this.effectsSequence.push(et),this.container.addDynamicProperty(this)}function ValueProperty(et,_,_e,tt){this.propType="unidimensional",this.mult=_e||1,this.data=_,this.v=_e?_.k*_e:_.k,this.pv=_.k,this._mdf=!1,this.elem=et,this.container=tt,this.comp=et.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(et,_,_e,tt){this.propType="multidimensional",this.mult=_e||1,this.data=_,this._mdf=!1,this.elem=et,this.container=tt,this.comp=et.comp,this.k=!1,this.kf=!1,this.frameId=-1;var nt,it=_.k.length;for(this.v=createTypedArray("float32",it),this.pv=createTypedArray("float32",it),this.vel=createTypedArray("float32",it),nt=0;nt<it;nt+=1)this.v[nt]=_.k[nt]*this.mult,this.pv[nt]=_.k[nt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(et,_,_e,tt){this.propType="unidimensional",this.keyframes=_.k,this.keyframesMetadata=[],this.offsetTime=et.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=_,this.mult=_e||1,this.elem=et,this.container=tt,this.comp=et.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(et,_,_e,tt){this.propType="multidimensional";var nt,it=_.k.length,rt,st,ot,at;for(nt=0;nt<it-1;nt+=1)_.k[nt].to&&_.k[nt].s&&_.k[nt+1]&&_.k[nt+1].s&&(rt=_.k[nt].s,st=_.k[nt+1].s,ot=_.k[nt].to,at=_.k[nt].ti,(rt.length===2&&!(rt[0]===st[0]&&rt[1]===st[1])&&bez.pointOnLine2D(rt[0],rt[1],st[0],st[1],rt[0]+ot[0],rt[1]+ot[1])&&bez.pointOnLine2D(rt[0],rt[1],st[0],st[1],st[0]+at[0],st[1]+at[1])||rt.length===3&&!(rt[0]===st[0]&&rt[1]===st[1]&&rt[2]===st[2])&&bez.pointOnLine3D(rt[0],rt[1],rt[2],st[0],st[1],st[2],rt[0]+ot[0],rt[1]+ot[1],rt[2]+ot[2])&&bez.pointOnLine3D(rt[0],rt[1],rt[2],st[0],st[1],st[2],st[0]+at[0],st[1]+at[1],st[2]+at[2]))&&(_.k[nt].to=null,_.k[nt].ti=null),rt[0]===st[0]&&rt[1]===st[1]&&ot[0]===0&&ot[1]===0&&at[0]===0&&at[1]===0&&(rt.length===2||rt[2]===st[2]&&ot[2]===0&&at[2]===0)&&(_.k[nt].to=null,_.k[nt].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=_,this.keyframes=_.k,this.keyframesMetadata=[],this.offsetTime=et.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=_e||1,this.elem=et,this.container=tt,this.comp=et.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var At=_.k[0].s.length;for(this.v=createTypedArray("float32",At),this.pv=createTypedArray("float32",At),nt=0;nt<At;nt+=1)this.v[nt]=initFrame,this.pv[nt]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",At)},this.addEffect=addEffect}var PropertyFactory=function(){function et(_e,tt,nt,it,rt){tt.sid&&(tt=_e.globalData.slotManager.getProp(tt));var st;if(!tt.k.length)st=new ValueProperty(_e,tt,it,rt);else if(typeof tt.k[0]=="number")st=new MultiDimensionalProperty(_e,tt,it,rt);else switch(nt){case 0:st=new KeyframedValueProperty(_e,tt,it,rt);break;case 1:st=new KeyframedMultidimensionalProperty(_e,tt,it,rt);break}return st.effectsSequence.length&&rt.addDynamicProperty(st),st}var _={getProp:et};return _}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(_){this.dynamicProperties.indexOf(_)===-1&&(this.dynamicProperties.push(_),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var _,_e=this.dynamicProperties.length;for(_=0;_<_e;_+=1)this.dynamicProperties[_].getValue(),this.dynamicProperties[_]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(_){this.container=_,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function et(){return createTypedArray("float32",2)}return poolFactory(8,et)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(et,_){this.c=et,this.setLength(_);for(var _e=0;_e<_;)this.v[_e]=pointPool.newElement(),this.o[_e]=pointPool.newElement(),this.i[_e]=pointPool.newElement(),_e+=1},ShapePath.prototype.setLength=function(et){for(;this._maxLength<et;)this.doubleArrayLength();this._length=et},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(et,_,_e,tt,nt){var it;switch(this._length=Math.max(this._length,tt+1),this._length>=this._maxLength&&this.doubleArrayLength(),_e){case"v":it=this.v;break;case"i":it=this.i;break;case"o":it=this.o;break;default:it=[];break}(!it[tt]||it[tt]&&!nt)&&(it[tt]=pointPool.newElement()),it[tt][0]=et,it[tt][1]=_},ShapePath.prototype.setTripleAt=function(et,_,_e,tt,nt,it,rt,st){this.setXYAt(et,_,"v",rt,st),this.setXYAt(_e,tt,"o",rt,st),this.setXYAt(nt,it,"i",rt,st)},ShapePath.prototype.reverse=function(){var et=new ShapePath;et.setPathData(this.c,this._length);var _=this.v,_e=this.o,tt=this.i,nt=0;this.c&&(et.setTripleAt(_[0][0],_[0][1],tt[0][0],tt[0][1],_e[0][0],_e[0][1],0,!1),nt=1);var it=this._length-1,rt=this._length,st;for(st=nt;st<rt;st+=1)et.setTripleAt(_[it][0],_[it][1],tt[it][0],tt[it][1],_e[it][0],_e[it][1],st,!1),it-=1;return et},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function et(){return new ShapePath}function _(nt){var it=nt._length,rt;for(rt=0;rt<it;rt+=1)pointPool.release(nt.v[rt]),pointPool.release(nt.i[rt]),pointPool.release(nt.o[rt]),nt.v[rt]=null,nt.i[rt]=null,nt.o[rt]=null;nt._length=0,nt.c=!1}function _e(nt){var it=tt.newElement(),rt,st=nt._length===void 0?nt.v.length:nt._length;for(it.setLength(st),it.c=nt.c,rt=0;rt<st;rt+=1)it.setTripleAt(nt.v[rt][0],nt.v[rt][1],nt.o[rt][0],nt.o[rt][1],nt.i[rt][0],nt.i[rt][1],rt);return it}var tt=poolFactory(4,et,_);return tt.clone=_e,tt}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(et){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=et,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var et;for(et=0;et<this._length;et+=1)shapePool.release(this.shapes[et]);this._length=0};var shapeCollectionPool=function(){var et={newShapeCollection:nt,release:it},_=0,_e=4,tt=createSizedArray(_e);function nt(){var rt;return _?(_-=1,rt=tt[_]):rt=new ShapeCollection,rt}function it(rt){var st,ot=rt._length;for(st=0;st<ot;st+=1)shapePool.release(rt.shapes[st]);rt._length=0,_===_e&&(tt=pooling.double(tt),_e*=2),tt[_]=rt,_+=1}return et}(),ShapePropertyFactory=function(){var et=-999999;function _(Ct,ft,pt){var Vt=pt.lastIndex,yt,Gt,Bt,vt,wt,Mt,kt,Nt,Yt,Lt=this.keyframes;if(Ct<Lt[0].t-this.offsetTime)yt=Lt[0].s[0],Bt=!0,Vt=0;else if(Ct>=Lt[Lt.length-1].t-this.offsetTime)yt=Lt[Lt.length-1].s?Lt[Lt.length-1].s[0]:Lt[Lt.length-2].e[0],Bt=!0;else{for(var Xt=Vt,_t=Lt.length-1,Tt=!0,St,Zt,Et;Tt&&(St=Lt[Xt],Zt=Lt[Xt+1],!(Zt.t-this.offsetTime>Ct));)Xt<_t-1?Xt+=1:Tt=!1;if(Et=this.keyframesMetadata[Xt]||{},Bt=St.h===1,Vt=Xt,!Bt){if(Ct>=Zt.t-this.offsetTime)Nt=1;else if(Ct<St.t-this.offsetTime)Nt=0;else{var Wt;Et.__fnct?Wt=Et.__fnct:(Wt=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y).get,Et.__fnct=Wt),Nt=Wt((Ct-(St.t-this.offsetTime))/(Zt.t-this.offsetTime-(St.t-this.offsetTime)))}Gt=Zt.s?Zt.s[0]:St.e[0]}yt=St.s[0]}for(Mt=ft._length,kt=yt.i[0].length,pt.lastIndex=Vt,vt=0;vt<Mt;vt+=1)for(wt=0;wt<kt;wt+=1)Yt=Bt?yt.i[vt][wt]:yt.i[vt][wt]+(Gt.i[vt][wt]-yt.i[vt][wt])*Nt,ft.i[vt][wt]=Yt,Yt=Bt?yt.o[vt][wt]:yt.o[vt][wt]+(Gt.o[vt][wt]-yt.o[vt][wt])*Nt,ft.o[vt][wt]=Yt,Yt=Bt?yt.v[vt][wt]:yt.v[vt][wt]+(Gt.v[vt][wt]-yt.v[vt][wt])*Nt,ft.v[vt][wt]=Yt}function _e(){var Ct=this.comp.renderedFrame-this.offsetTime,ft=this.keyframes[0].t-this.offsetTime,pt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Vt=this._caching.lastFrame;return Vt!==et&&(Vt<ft&&Ct<ft||Vt>pt&&Ct>pt)||(this._caching.lastIndex=Vt<Ct?this._caching.lastIndex:0,this.interpolateShape(Ct,this.pv,this._caching)),this._caching.lastFrame=Ct,this.pv}function tt(){this.paths=this.localShapeCollection}function nt(Ct,ft){if(Ct._length!==ft._length||Ct.c!==ft.c)return!1;var pt,Vt=Ct._length;for(pt=0;pt<Vt;pt+=1)if(Ct.v[pt][0]!==ft.v[pt][0]||Ct.v[pt][1]!==ft.v[pt][1]||Ct.o[pt][0]!==ft.o[pt][0]||Ct.o[pt][1]!==ft.o[pt][1]||Ct.i[pt][0]!==ft.i[pt][0]||Ct.i[pt][1]!==ft.i[pt][1])return!1;return!0}function it(Ct){nt(this.v,Ct)||(this.v=shapePool.clone(Ct),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function rt(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Ct;this.kf?Ct=this.pv:this.data.ks?Ct=this.data.ks.k:Ct=this.data.pt.k;var ft,pt=this.effectsSequence.length;for(ft=0;ft<pt;ft+=1)Ct=this.effectsSequence[ft](Ct);this.setVValue(Ct),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function st(Ct,ft,pt){this.propType="shape",this.comp=Ct.comp,this.container=Ct,this.elem=Ct,this.data=ft,this.k=!1,this.kf=!1,this._mdf=!1;var Vt=pt===3?ft.pt.k:ft.ks.k;this.v=shapePool.clone(Vt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=tt,this.effectsSequence=[]}function ot(Ct){this.effectsSequence.push(Ct),this.container.addDynamicProperty(this)}st.prototype.interpolateShape=_,st.prototype.getValue=rt,st.prototype.setVValue=it,st.prototype.addEffect=ot;function at(Ct,ft,pt){this.propType="shape",this.comp=Ct.comp,this.elem=Ct,this.container=Ct,this.offsetTime=Ct.data.st,this.keyframes=pt===3?ft.pt.k:ft.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Vt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Vt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=et,this.reset=tt,this._caching={lastFrame:et,lastIndex:0},this.effectsSequence=[_e.bind(this)]}at.prototype.getValue=rt,at.prototype.interpolateShape=_,at.prototype.setVValue=it,at.prototype.addEffect=ot;var At=function(){var Ct=roundCorner;function ft(pt,Vt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Vt.d,this.elem=pt,this.comp=pt.comp,this.frameId=-1,this.initDynamicPropertyContainer(pt),this.p=PropertyFactory.getProp(pt,Vt.p,1,0,this),this.s=PropertyFactory.getProp(pt,Vt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return ft.prototype={reset:tt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Vt=this.p.v[0],yt=this.p.v[1],Gt=this.s.v[0]/2,Bt=this.s.v[1]/2,vt=this.d!==3,wt=this.v;wt.v[0][0]=Vt,wt.v[0][1]=yt-Bt,wt.v[1][0]=vt?Vt+Gt:Vt-Gt,wt.v[1][1]=yt,wt.v[2][0]=Vt,wt.v[2][1]=yt+Bt,wt.v[3][0]=vt?Vt-Gt:Vt+Gt,wt.v[3][1]=yt,wt.i[0][0]=vt?Vt-Gt*Ct:Vt+Gt*Ct,wt.i[0][1]=yt-Bt,wt.i[1][0]=vt?Vt+Gt:Vt-Gt,wt.i[1][1]=yt-Bt*Ct,wt.i[2][0]=vt?Vt+Gt*Ct:Vt-Gt*Ct,wt.i[2][1]=yt+Bt,wt.i[3][0]=vt?Vt-Gt:Vt+Gt,wt.i[3][1]=yt+Bt*Ct,wt.o[0][0]=vt?Vt+Gt*Ct:Vt-Gt*Ct,wt.o[0][1]=yt-Bt,wt.o[1][0]=vt?Vt+Gt:Vt-Gt,wt.o[1][1]=yt+Bt*Ct,wt.o[2][0]=vt?Vt-Gt*Ct:Vt+Gt*Ct,wt.o[2][1]=yt+Bt,wt.o[3][0]=vt?Vt-Gt:Vt+Gt,wt.o[3][1]=yt-Bt*Ct}},extendPrototype([DynamicPropertyContainer],ft),ft}(),lt=function(){function Ct(ft,pt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=ft,this.comp=ft.comp,this.data=pt,this.frameId=-1,this.d=pt.d,this.initDynamicPropertyContainer(ft),pt.sy===1?(this.ir=PropertyFactory.getProp(ft,pt.ir,0,0,this),this.is=PropertyFactory.getProp(ft,pt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(ft,pt.pt,0,0,this),this.p=PropertyFactory.getProp(ft,pt.p,1,0,this),this.r=PropertyFactory.getProp(ft,pt.r,0,degToRads,this),this.or=PropertyFactory.getProp(ft,pt.or,0,0,this),this.os=PropertyFactory.getProp(ft,pt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Ct.prototype={reset:tt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var pt=Math.floor(this.pt.v)*2,Vt=Math.PI*2/pt,yt=!0,Gt=this.or.v,Bt=this.ir.v,vt=this.os.v,wt=this.is.v,Mt=2*Math.PI*Gt/(pt*2),kt=2*Math.PI*Bt/(pt*2),Nt,Yt,Lt,Xt,_t=-Math.PI/2;_t+=this.r.v;var Tt=this.data.d===3?-1:1;for(this.v._length=0,Nt=0;Nt<pt;Nt+=1){Yt=yt?Gt:Bt,Lt=yt?vt:wt,Xt=yt?Mt:kt;var St=Yt*Math.cos(_t),Zt=Yt*Math.sin(_t),Et=St===0&&Zt===0?0:Zt/Math.sqrt(St*St+Zt*Zt),Wt=St===0&&Zt===0?0:-St/Math.sqrt(St*St+Zt*Zt);St+=+this.p.v[0],Zt+=+this.p.v[1],this.v.setTripleAt(St,Zt,St-Et*Xt*Lt*Tt,Zt-Wt*Xt*Lt*Tt,St+Et*Xt*Lt*Tt,Zt+Wt*Xt*Lt*Tt,Nt,!0),yt=!yt,_t+=Vt*Tt}},convertPolygonToPath:function(){var pt=Math.floor(this.pt.v),Vt=Math.PI*2/pt,yt=this.or.v,Gt=this.os.v,Bt=2*Math.PI*yt/(pt*4),vt,wt=-Math.PI*.5,Mt=this.data.d===3?-1:1;for(wt+=this.r.v,this.v._length=0,vt=0;vt<pt;vt+=1){var kt=yt*Math.cos(wt),Nt=yt*Math.sin(wt),Yt=kt===0&&Nt===0?0:Nt/Math.sqrt(kt*kt+Nt*Nt),Lt=kt===0&&Nt===0?0:-kt/Math.sqrt(kt*kt+Nt*Nt);kt+=+this.p.v[0],Nt+=+this.p.v[1],this.v.setTripleAt(kt,Nt,kt-Yt*Bt*Gt*Mt,Nt-Lt*Bt*Gt*Mt,kt+Yt*Bt*Gt*Mt,Nt+Lt*Bt*Gt*Mt,vt,!0),wt+=Vt*Mt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Ct),Ct}(),gt=function(){function Ct(ft,pt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=ft,this.comp=ft.comp,this.frameId=-1,this.d=pt.d,this.initDynamicPropertyContainer(ft),this.p=PropertyFactory.getProp(ft,pt.p,1,0,this),this.s=PropertyFactory.getProp(ft,pt.s,1,0,this),this.r=PropertyFactory.getProp(ft,pt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Ct.prototype={convertRectToPath:function(){var pt=this.p.v[0],Vt=this.p.v[1],yt=this.s.v[0]/2,Gt=this.s.v[1]/2,Bt=bmMin(yt,Gt,this.r.v),vt=Bt*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(pt+yt,Vt-Gt+Bt,pt+yt,Vt-Gt+Bt,pt+yt,Vt-Gt+vt,0,!0),this.v.setTripleAt(pt+yt,Vt+Gt-Bt,pt+yt,Vt+Gt-vt,pt+yt,Vt+Gt-Bt,1,!0),Bt!==0?(this.v.setTripleAt(pt+yt-Bt,Vt+Gt,pt+yt-Bt,Vt+Gt,pt+yt-vt,Vt+Gt,2,!0),this.v.setTripleAt(pt-yt+Bt,Vt+Gt,pt-yt+vt,Vt+Gt,pt-yt+Bt,Vt+Gt,3,!0),this.v.setTripleAt(pt-yt,Vt+Gt-Bt,pt-yt,Vt+Gt-Bt,pt-yt,Vt+Gt-vt,4,!0),this.v.setTripleAt(pt-yt,Vt-Gt+Bt,pt-yt,Vt-Gt+vt,pt-yt,Vt-Gt+Bt,5,!0),this.v.setTripleAt(pt-yt+Bt,Vt-Gt,pt-yt+Bt,Vt-Gt,pt-yt+vt,Vt-Gt,6,!0),this.v.setTripleAt(pt+yt-Bt,Vt-Gt,pt+yt-vt,Vt-Gt,pt+yt-Bt,Vt-Gt,7,!0)):(this.v.setTripleAt(pt-yt,Vt+Gt,pt-yt+vt,Vt+Gt,pt-yt,Vt+Gt,2),this.v.setTripleAt(pt-yt,Vt-Gt,pt-yt,Vt-Gt+vt,pt-yt,Vt-Gt,3))):(this.v.setTripleAt(pt+yt,Vt-Gt+Bt,pt+yt,Vt-Gt+vt,pt+yt,Vt-Gt+Bt,0,!0),Bt!==0?(this.v.setTripleAt(pt+yt-Bt,Vt-Gt,pt+yt-Bt,Vt-Gt,pt+yt-vt,Vt-Gt,1,!0),this.v.setTripleAt(pt-yt+Bt,Vt-Gt,pt-yt+vt,Vt-Gt,pt-yt+Bt,Vt-Gt,2,!0),this.v.setTripleAt(pt-yt,Vt-Gt+Bt,pt-yt,Vt-Gt+Bt,pt-yt,Vt-Gt+vt,3,!0),this.v.setTripleAt(pt-yt,Vt+Gt-Bt,pt-yt,Vt+Gt-vt,pt-yt,Vt+Gt-Bt,4,!0),this.v.setTripleAt(pt-yt+Bt,Vt+Gt,pt-yt+Bt,Vt+Gt,pt-yt+vt,Vt+Gt,5,!0),this.v.setTripleAt(pt+yt-Bt,Vt+Gt,pt+yt-vt,Vt+Gt,pt+yt-Bt,Vt+Gt,6,!0),this.v.setTripleAt(pt+yt,Vt+Gt-Bt,pt+yt,Vt+Gt-Bt,pt+yt,Vt+Gt-vt,7,!0)):(this.v.setTripleAt(pt-yt,Vt-Gt,pt-yt+vt,Vt-Gt,pt-yt,Vt-Gt,1,!0),this.v.setTripleAt(pt-yt,Vt+Gt,pt-yt,Vt+Gt-vt,pt-yt,Vt+Gt,2,!0),this.v.setTripleAt(pt+yt,Vt+Gt,pt+yt-vt,Vt+Gt,pt+yt,Vt+Gt,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:tt},extendPrototype([DynamicPropertyContainer],Ct),Ct}();function ct(Ct,ft,pt){var Vt;if(pt===3||pt===4){var yt=pt===3?ft.pt:ft.ks,Gt=yt.k;Gt.length?Vt=new at(Ct,ft,pt):Vt=new st(Ct,ft,pt)}else pt===5?Vt=new gt(Ct,ft):pt===6?Vt=new At(Ct,ft):pt===7&&(Vt=new lt(Ct,ft));return Vt.k&&Ct.addDynamicProperty(Vt),Vt}function dt(){return st}function ht(){return at}var mt={};return mt.getShapeProp=ct,mt.getConstructorFunction=dt,mt.getKeyframedConstructorFunction=ht,mt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var et=Math.cos,_=Math.sin,_e=Math.tan,tt=Math.round;function nt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function it(St){if(St===0)return this;var Zt=et(St),Et=_(St);return this._t(Zt,-Et,0,0,Et,Zt,0,0,0,0,1,0,0,0,0,1)}function rt(St){if(St===0)return this;var Zt=et(St),Et=_(St);return this._t(1,0,0,0,0,Zt,-Et,0,0,Et,Zt,0,0,0,0,1)}function st(St){if(St===0)return this;var Zt=et(St),Et=_(St);return this._t(Zt,0,Et,0,0,1,0,0,-Et,0,Zt,0,0,0,0,1)}function ot(St){if(St===0)return this;var Zt=et(St),Et=_(St);return this._t(Zt,-Et,0,0,Et,Zt,0,0,0,0,1,0,0,0,0,1)}function at(St,Zt){return this._t(1,Zt,St,1,0,0)}function At(St,Zt){return this.shear(_e(St),_e(Zt))}function lt(St,Zt){var Et=et(Zt),Wt=_(Zt);return this._t(Et,Wt,0,0,-Wt,Et,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,_e(St),1,0,0,0,0,1,0,0,0,0,1)._t(Et,-Wt,0,0,Wt,Et,0,0,0,0,1,0,0,0,0,1)}function gt(St,Zt,Et){return!Et&&Et!==0&&(Et=1),St===1&&Zt===1&&Et===1?this:this._t(St,0,0,0,0,Zt,0,0,0,0,Et,0,0,0,0,1)}function ct(St,Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn,Vn,dn,gn,$t,tn){return this.props[0]=St,this.props[1]=Zt,this.props[2]=Et,this.props[3]=Wt,this.props[4]=Ht,this.props[5]=zt,this.props[6]=Pt,this.props[7]=Ot,this.props[8]=Jt,this.props[9]=rn,this.props[10]=sn,this.props[11]=Vn,this.props[12]=dn,this.props[13]=gn,this.props[14]=$t,this.props[15]=tn,this}function dt(St,Zt,Et){return Et=Et||0,St!==0||Zt!==0||Et!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,St,Zt,Et,1):this}function ht(St,Zt,Et,Wt,Ht,zt,Pt,Ot,Jt,rn,sn,Vn,dn,gn,$t,tn){var nn=this.props;if(St===1&&Zt===0&&Et===0&&Wt===0&&Ht===0&&zt===1&&Pt===0&&Ot===0&&Jt===0&&rn===0&&sn===1&&Vn===0)return nn[12]=nn[12]*St+nn[15]*dn,nn[13]=nn[13]*zt+nn[15]*gn,nn[14]=nn[14]*sn+nn[15]*$t,nn[15]*=tn,this._identityCalculated=!1,this;var Bn=nn[0],Gn=nn[1],kn=nn[2],pn=nn[3],Rn=nn[4],Mn=nn[5],In=nn[6],Dt=nn[7],Kt=nn[8],en=nn[9],un=nn[10],Sn=nn[11],wn=nn[12],Fn=nn[13],_n=nn[14],fn=nn[15];return nn[0]=Bn*St+Gn*Ht+kn*Jt+pn*dn,nn[1]=Bn*Zt+Gn*zt+kn*rn+pn*gn,nn[2]=Bn*Et+Gn*Pt+kn*sn+pn*$t,nn[3]=Bn*Wt+Gn*Ot+kn*Vn+pn*tn,nn[4]=Rn*St+Mn*Ht+In*Jt+Dt*dn,nn[5]=Rn*Zt+Mn*zt+In*rn+Dt*gn,nn[6]=Rn*Et+Mn*Pt+In*sn+Dt*$t,nn[7]=Rn*Wt+Mn*Ot+In*Vn+Dt*tn,nn[8]=Kt*St+en*Ht+un*Jt+Sn*dn,nn[9]=Kt*Zt+en*zt+un*rn+Sn*gn,nn[10]=Kt*Et+en*Pt+un*sn+Sn*$t,nn[11]=Kt*Wt+en*Ot+un*Vn+Sn*tn,nn[12]=wn*St+Fn*Ht+_n*Jt+fn*dn,nn[13]=wn*Zt+Fn*zt+_n*rn+fn*gn,nn[14]=wn*Et+Fn*Pt+_n*sn+fn*$t,nn[15]=wn*Wt+Fn*Ot+_n*Vn+fn*tn,this._identityCalculated=!1,this}function mt(St){var Zt=St.props;return this.transform(Zt[0],Zt[1],Zt[2],Zt[3],Zt[4],Zt[5],Zt[6],Zt[7],Zt[8],Zt[9],Zt[10],Zt[11],Zt[12],Zt[13],Zt[14],Zt[15])}function Ct(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ft(St){for(var Zt=0;Zt<16;){if(St.props[Zt]!==this.props[Zt])return!1;Zt+=1}return!0}function pt(St){var Zt;for(Zt=0;Zt<16;Zt+=1)St.props[Zt]=this.props[Zt];return St}function Vt(St){var Zt;for(Zt=0;Zt<16;Zt+=1)this.props[Zt]=St[Zt]}function yt(St,Zt,Et){return{x:St*this.props[0]+Zt*this.props[4]+Et*this.props[8]+this.props[12],y:St*this.props[1]+Zt*this.props[5]+Et*this.props[9]+this.props[13],z:St*this.props[2]+Zt*this.props[6]+Et*this.props[10]+this.props[14]}}function Gt(St,Zt,Et){return St*this.props[0]+Zt*this.props[4]+Et*this.props[8]+this.props[12]}function Bt(St,Zt,Et){return St*this.props[1]+Zt*this.props[5]+Et*this.props[9]+this.props[13]}function vt(St,Zt,Et){return St*this.props[2]+Zt*this.props[6]+Et*this.props[10]+this.props[14]}function wt(){var St=this.props[0]*this.props[5]-this.props[1]*this.props[4],Zt=this.props[5]/St,Et=-this.props[1]/St,Wt=-this.props[4]/St,Ht=this.props[0]/St,zt=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/St,Pt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/St,Ot=new Matrix;return Ot.props[0]=Zt,Ot.props[1]=Et,Ot.props[4]=Wt,Ot.props[5]=Ht,Ot.props[12]=zt,Ot.props[13]=Pt,Ot}function Mt(St){var Zt=this.getInverseMatrix();return Zt.applyToPointArray(St[0],St[1],St[2]||0)}function kt(St){var Zt,Et=St.length,Wt=[];for(Zt=0;Zt<Et;Zt+=1)Wt[Zt]=Mt(St[Zt]);return Wt}function Nt(St,Zt,Et){var Wt=createTypedArray("float32",6);if(this.isIdentity())Wt[0]=St[0],Wt[1]=St[1],Wt[2]=Zt[0],Wt[3]=Zt[1],Wt[4]=Et[0],Wt[5]=Et[1];else{var Ht=this.props[0],zt=this.props[1],Pt=this.props[4],Ot=this.props[5],Jt=this.props[12],rn=this.props[13];Wt[0]=St[0]*Ht+St[1]*Pt+Jt,Wt[1]=St[0]*zt+St[1]*Ot+rn,Wt[2]=Zt[0]*Ht+Zt[1]*Pt+Jt,Wt[3]=Zt[0]*zt+Zt[1]*Ot+rn,Wt[4]=Et[0]*Ht+Et[1]*Pt+Jt,Wt[5]=Et[0]*zt+Et[1]*Ot+rn}return Wt}function Yt(St,Zt,Et){var Wt;return this.isIdentity()?Wt=[St,Zt,Et]:Wt=[St*this.props[0]+Zt*this.props[4]+Et*this.props[8]+this.props[12],St*this.props[1]+Zt*this.props[5]+Et*this.props[9]+this.props[13],St*this.props[2]+Zt*this.props[6]+Et*this.props[10]+this.props[14]],Wt}function Lt(St,Zt){if(this.isIdentity())return St+","+Zt;var Et=this.props;return Math.round((St*Et[0]+Zt*Et[4]+Et[12])*100)/100+","+Math.round((St*Et[1]+Zt*Et[5]+Et[13])*100)/100}function Xt(){for(var St=0,Zt=this.props,Et="matrix3d(",Wt=1e4;St<16;)Et+=tt(Zt[St]*Wt)/Wt,Et+=St===15?")":",",St+=1;return Et}function _t(St){var Zt=1e4;return St<1e-6&&St>0||St>-1e-6&&St<0?tt(St*Zt)/Zt:St}function Tt(){var St=this.props,Zt=_t(St[0]),Et=_t(St[1]),Wt=_t(St[4]),Ht=_t(St[5]),zt=_t(St[12]),Pt=_t(St[13]);return"matrix("+Zt+","+Et+","+Wt+","+Ht+","+zt+","+Pt+")"}return function(){this.reset=nt,this.rotate=it,this.rotateX=rt,this.rotateY=st,this.rotateZ=ot,this.skew=At,this.skewFromAxis=lt,this.shear=at,this.scale=gt,this.setTransform=ct,this.translate=dt,this.transform=ht,this.multiply=mt,this.applyToPoint=yt,this.applyToX=Gt,this.applyToY=Bt,this.applyToZ=vt,this.applyToPointArray=Yt,this.applyToTriplePoints=Nt,this.applyToPointStringified=Lt,this.toCSS=Xt,this.to2dCSS=Tt,this.clone=pt,this.cloneFromProps=Vt,this.equals=ft,this.inversePoints=kt,this.inversePoint=Mt,this.getInverseMatrix=wt,this._t=this.transform,this.isIdentity=Ct,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(_e){return typeof _e}:_typeof$3=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$3(et)}var lottie={};function setLocation(et){setLocationHref(et)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(et){setSubframeEnabled(et)}function setPrefix(et){setIdPrefix(et)}function loadAnimation(et){return animationManager.loadAnimation(et)}function setQuality(et){if(typeof et=="string")switch(et){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(et)&&et>1&&setDefaultCurveSegments(et)}function inBrowser(){return typeof navigator<"u"}function installPlugin(et,_){et==="expressions"&&setExpressionsPlugin(_)}function getFactory(et){switch(et){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(et){for(var _=queryString.split("&"),_e=0;_e<_.length;_e+=1){var tt=_[_e].split("=");if(decodeURIComponent(tt[0])==et)return decodeURIComponent(tt[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(et){}var ShapeModifiers=function(){var et={},_={};et.registerModifier=_e,et.getModifier=tt;function _e(nt,it){_[nt]||(_[nt]=it)}function tt(nt,it,rt){return new _[nt](it,rt)}return et}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(et){if(!this.closed){et.sh.container.addDynamicProperty(et.sh);var _={shape:et.sh,data:et,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(_),this.addShapeToModifier(_),this._isAnimated&&et.setAsAnimated()}},ShapeModifier.prototype.init=function(et,_){this.shapes=[],this.elem=et,this.initDynamicPropertyContainer(et),this.initModifierProperties(et,_),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(et,_){this.s=PropertyFactory.getProp(et,_.s,0,.01,this),this.e=PropertyFactory.getProp(et,_.e,0,.01,this),this.o=PropertyFactory.getProp(et,_.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=_.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(et){et.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(et,_,_e,tt,nt){var it=[];_<=1?it.push({s:et,e:_}):et>=1?it.push({s:et-1,e:_-1}):(it.push({s:et,e:1}),it.push({s:0,e:_-1}));var rt=[],st,ot=it.length,at;for(st=0;st<ot;st+=1)if(at=it[st],!(at.e*nt<tt||at.s*nt>tt+_e)){var At,lt;at.s*nt<=tt?At=0:At=(at.s*nt-tt)/_e,at.e*nt>=tt+_e?lt=1:lt=(at.e*nt-tt)/_e,rt.push([At,lt])}return rt.length||rt.push([0,0]),rt},TrimModifier.prototype.releasePathsData=function(et){var _,_e=et.length;for(_=0;_<_e;_+=1)segmentsLengthPool.release(et[_]);return et.length=0,et},TrimModifier.prototype.processShapes=function(et){var _,_e;if(this._mdf||et){var tt=this.o.v%360/360;if(tt<0&&(tt+=1),this.s.v>1?_=1+tt:this.s.v<0?_=0+tt:_=this.s.v+tt,this.e.v>1?_e=1+tt:this.e.v<0?_e=0+tt:_e=this.e.v+tt,_>_e){var nt=_;_=_e,_e=nt}_=Math.round(_*1e4)*1e-4,_e=Math.round(_e*1e4)*1e-4,this.sValue=_,this.eValue=_e}else _=this.sValue,_e=this.eValue;var it,rt,st=this.shapes.length,ot,at,At,lt,gt,ct=0;if(_e===_)for(rt=0;rt<st;rt+=1)this.shapes[rt].localShapeCollection.releaseShapes(),this.shapes[rt].shape._mdf=!0,this.shapes[rt].shape.paths=this.shapes[rt].localShapeCollection,this._mdf&&(this.shapes[rt].pathsData.length=0);else if(_e===1&&_===0||_e===0&&_===1){if(this._mdf)for(rt=0;rt<st;rt+=1)this.shapes[rt].pathsData.length=0,this.shapes[rt].shape._mdf=!0}else{var dt=[],ht,mt;for(rt=0;rt<st;rt+=1)if(ht=this.shapes[rt],!ht.shape._mdf&&!this._mdf&&!et&&this.m!==2)ht.shape.paths=ht.localShapeCollection;else{if(it=ht.shape.paths,at=it._length,gt=0,!ht.shape._mdf&&ht.pathsData.length)gt=ht.totalShapeLength;else{for(At=this.releasePathsData(ht.pathsData),ot=0;ot<at;ot+=1)lt=bez.getSegmentsLength(it.shapes[ot]),At.push(lt),gt+=lt.totalLength;ht.totalShapeLength=gt,ht.pathsData=At}ct+=gt,ht.shape._mdf=!0}var Ct=_,ft=_e,pt=0,Vt;for(rt=st-1;rt>=0;rt-=1)if(ht=this.shapes[rt],ht.shape._mdf){for(mt=ht.localShapeCollection,mt.releaseShapes(),this.m===2&&st>1?(Vt=this.calculateShapeEdges(_,_e,ht.totalShapeLength,pt,ct),pt+=ht.totalShapeLength):Vt=[[Ct,ft]],at=Vt.length,ot=0;ot<at;ot+=1){Ct=Vt[ot][0],ft=Vt[ot][1],dt.length=0,ft<=1?dt.push({s:ht.totalShapeLength*Ct,e:ht.totalShapeLength*ft}):Ct>=1?dt.push({s:ht.totalShapeLength*(Ct-1),e:ht.totalShapeLength*(ft-1)}):(dt.push({s:ht.totalShapeLength*Ct,e:ht.totalShapeLength}),dt.push({s:0,e:ht.totalShapeLength*(ft-1)}));var yt=this.addShapes(ht,dt[0]);if(dt[0].s!==dt[0].e){if(dt.length>1){var Gt=ht.shape.paths.shapes[ht.shape.paths._length-1];if(Gt.c){var Bt=yt.pop();this.addPaths(yt,mt),yt=this.addShapes(ht,dt[1],Bt)}else this.addPaths(yt,mt),yt=this.addShapes(ht,dt[1])}this.addPaths(yt,mt)}}ht.shape.paths=mt}}},TrimModifier.prototype.addPaths=function(et,_){var _e,tt=et.length;for(_e=0;_e<tt;_e+=1)_.addShape(et[_e])},TrimModifier.prototype.addSegment=function(et,_,_e,tt,nt,it,rt){nt.setXYAt(_[0],_[1],"o",it),nt.setXYAt(_e[0],_e[1],"i",it+1),rt&&nt.setXYAt(et[0],et[1],"v",it),nt.setXYAt(tt[0],tt[1],"v",it+1)},TrimModifier.prototype.addSegmentFromArray=function(et,_,_e,tt){_.setXYAt(et[1],et[5],"o",_e),_.setXYAt(et[2],et[6],"i",_e+1),tt&&_.setXYAt(et[0],et[4],"v",_e),_.setXYAt(et[3],et[7],"v",_e+1)},TrimModifier.prototype.addShapes=function(et,_,_e){var tt=et.pathsData,nt=et.shape.paths.shapes,it,rt=et.shape.paths._length,st,ot,at=0,At,lt,gt,ct,dt=[],ht,mt=!0;for(_e?(lt=_e._length,ht=_e._length):(_e=shapePool.newElement(),lt=0,ht=0),dt.push(_e),it=0;it<rt;it+=1){for(gt=tt[it].lengths,_e.c=nt[it].c,ot=nt[it].c?gt.length:gt.length+1,st=1;st<ot;st+=1)if(At=gt[st-1],at+At.addedLength<_.s)at+=At.addedLength,_e.c=!1;else if(at>_.e){_e.c=!1;break}else _.s<=at&&_.e>=at+At.addedLength?(this.addSegment(nt[it].v[st-1],nt[it].o[st-1],nt[it].i[st],nt[it].v[st],_e,lt,mt),mt=!1):(ct=bez.getNewSegment(nt[it].v[st-1],nt[it].v[st],nt[it].o[st-1],nt[it].i[st],(_.s-at)/At.addedLength,(_.e-at)/At.addedLength,gt[st-1]),this.addSegmentFromArray(ct,_e,lt,mt),mt=!1,_e.c=!1),at+=At.addedLength,lt+=1;if(nt[it].c&&gt.length){if(At=gt[st-1],at<=_.e){var Ct=gt[st-1].addedLength;_.s<=at&&_.e>=at+Ct?(this.addSegment(nt[it].v[st-1],nt[it].o[st-1],nt[it].i[0],nt[it].v[0],_e,lt,mt),mt=!1):(ct=bez.getNewSegment(nt[it].v[st-1],nt[it].v[0],nt[it].o[st-1],nt[it].i[0],(_.s-at)/Ct,(_.e-at)/Ct,gt[st-1]),this.addSegmentFromArray(ct,_e,lt,mt),mt=!1,_e.c=!1)}else _e.c=!1;at+=At.addedLength,lt+=1}if(_e._length&&(_e.setXYAt(_e.v[ht][0],_e.v[ht][1],"i",ht),_e.setXYAt(_e.v[_e._length-1][0],_e.v[_e._length-1][1],"o",_e._length-1)),at>_.e)break;it<rt-1&&(_e=shapePool.newElement(),mt=!0,dt.push(_e),lt=0)}return dt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(et,_){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(et,_.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(et,_){var _e=_/100,tt=[0,0],nt=et._length,it=0;for(it=0;it<nt;it+=1)tt[0]+=et.v[it][0],tt[1]+=et.v[it][1];tt[0]/=nt,tt[1]/=nt;var rt=shapePool.newElement();rt.c=et.c;var st,ot,at,At,lt,gt;for(it=0;it<nt;it+=1)st=et.v[it][0]+(tt[0]-et.v[it][0])*_e,ot=et.v[it][1]+(tt[1]-et.v[it][1])*_e,at=et.o[it][0]+(tt[0]-et.o[it][0])*-_e,At=et.o[it][1]+(tt[1]-et.o[it][1])*-_e,lt=et.i[it][0]+(tt[0]-et.i[it][0])*-_e,gt=et.i[it][1]+(tt[1]-et.i[it][1])*-_e,rt.setTripleAt(st,ot,at,At,lt,gt,it);return rt},PuckerAndBloatModifier.prototype.processShapes=function(et){var _,_e,tt=this.shapes.length,nt,it,rt=this.amount.v;if(rt!==0){var st,ot;for(_e=0;_e<tt;_e+=1){if(st=this.shapes[_e],ot=st.localShapeCollection,!(!st.shape._mdf&&!this._mdf&&!et))for(ot.releaseShapes(),st.shape._mdf=!0,_=st.shape.paths.shapes,it=st.shape.paths._length,nt=0;nt<it;nt+=1)ot.addShape(this.processPath(_[nt],rt));st.shape.paths=st.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var et=[0,0];function _(ot){var at=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||at,this.a&&ot.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&ot.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&ot.skewFromAxis(-this.sk.v,this.sa.v),this.r?ot.rotate(-this.r.v):ot.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?ot.translate(this.px.v,this.py.v,-this.pz.v):ot.translate(this.px.v,this.py.v,0):ot.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function _e(ot){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||ot){var at;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var At,lt;if(at=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(At=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/at,0),lt=this.p.getValueAtTime(this.p.keyframes[0].t/at,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(At=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/at,0),lt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/at,0)):(At=this.p.pv,lt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/at,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){At=[],lt=[];var gt=this.px,ct=this.py;gt._caching.lastFrame+gt.offsetTime<=gt.keyframes[0].t?(At[0]=gt.getValueAtTime((gt.keyframes[0].t+.01)/at,0),At[1]=ct.getValueAtTime((ct.keyframes[0].t+.01)/at,0),lt[0]=gt.getValueAtTime(gt.keyframes[0].t/at,0),lt[1]=ct.getValueAtTime(ct.keyframes[0].t/at,0)):gt._caching.lastFrame+gt.offsetTime>=gt.keyframes[gt.keyframes.length-1].t?(At[0]=gt.getValueAtTime(gt.keyframes[gt.keyframes.length-1].t/at,0),At[1]=ct.getValueAtTime(ct.keyframes[ct.keyframes.length-1].t/at,0),lt[0]=gt.getValueAtTime((gt.keyframes[gt.keyframes.length-1].t-.01)/at,0),lt[1]=ct.getValueAtTime((ct.keyframes[ct.keyframes.length-1].t-.01)/at,0)):(At=[gt.pv,ct.pv],lt[0]=gt.getValueAtTime((gt._caching.lastFrame+gt.offsetTime-.01)/at,gt.offsetTime),lt[1]=ct.getValueAtTime((ct._caching.lastFrame+ct.offsetTime-.01)/at,ct.offsetTime))}else lt=et,At=lt;this.v.rotate(-Math.atan2(At[1]-lt[1],At[0]-lt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function tt(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function nt(){}function it(ot){this._addDynamicProperty(ot),this.elem.addDynamicProperty(ot),this._isDirty=!0}function rt(ot,at,At){if(this.elem=ot,this.frameId=-1,this.propType="transform",this.data=at,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(At||ot),at.p&&at.p.s?(this.px=PropertyFactory.getProp(ot,at.p.x,0,0,this),this.py=PropertyFactory.getProp(ot,at.p.y,0,0,this),at.p.z&&(this.pz=PropertyFactory.getProp(ot,at.p.z,0,0,this))):this.p=PropertyFactory.getProp(ot,at.p||{k:[0,0,0]},1,0,this),at.rx){if(this.rx=PropertyFactory.getProp(ot,at.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(ot,at.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(ot,at.rz,0,degToRads,this),at.or.k[0].ti){var lt,gt=at.or.k.length;for(lt=0;lt<gt;lt+=1)at.or.k[lt].to=null,at.or.k[lt].ti=null}this.or=PropertyFactory.getProp(ot,at.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(ot,at.r||{k:0},0,degToRads,this);at.sk&&(this.sk=PropertyFactory.getProp(ot,at.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(ot,at.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(ot,at.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(ot,at.s||{k:[100,100,100]},1,.01,this),at.o?this.o=PropertyFactory.getProp(ot,at.o,0,.01,ot):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}rt.prototype={applyToMatrix:_,getValue:_e,precalculateMatrix:tt,autoOrient:nt},extendPrototype([DynamicPropertyContainer],rt),rt.prototype.addDynamicProperty=it,rt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function st(ot,at,At){return new rt(ot,at,At)}return{getTransformProperty:st}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(et,_){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(et,_.c,0,null,this),this.o=PropertyFactory.getProp(et,_.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(et,_.tr,this),this.so=PropertyFactory.getProp(et,_.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(et,_.tr.eo,0,.01,this),this.data=_,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(et,_,_e,tt,nt,it){var rt=it?-1:1,st=tt.s.v[0]+(1-tt.s.v[0])*(1-nt),ot=tt.s.v[1]+(1-tt.s.v[1])*(1-nt);et.translate(tt.p.v[0]*rt*nt,tt.p.v[1]*rt*nt,tt.p.v[2]),_.translate(-tt.a.v[0],-tt.a.v[1],tt.a.v[2]),_.rotate(-tt.r.v*rt*nt),_.translate(tt.a.v[0],tt.a.v[1],tt.a.v[2]),_e.translate(-tt.a.v[0],-tt.a.v[1],tt.a.v[2]),_e.scale(it?1/st:st,it?1/ot:ot),_e.translate(tt.a.v[0],tt.a.v[1],tt.a.v[2])},RepeaterModifier.prototype.init=function(et,_,_e,tt){for(this.elem=et,this.arr=_,this.pos=_e,this.elemsData=tt,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(et),this.initModifierProperties(et,_[_e]);_e>0;)_e-=1,this._elements.unshift(_[_e]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(et){var _,_e=et.length;for(_=0;_<_e;_+=1)et[_]._processed=!1,et[_].ty==="gr"&&this.resetElements(et[_].it)},RepeaterModifier.prototype.cloneElements=function(et){var _=JSON.parse(JSON.stringify(et));return this.resetElements(_),_},RepeaterModifier.prototype.changeGroupRender=function(et,_){var _e,tt=et.length;for(_e=0;_e<tt;_e+=1)et[_e]._render=_,et[_e].ty==="gr"&&this.changeGroupRender(et[_e].it,_)},RepeaterModifier.prototype.processShapes=function(et){var _,_e,tt,nt,it,rt=!1;if(this._mdf||et){var st=Math.ceil(this.c.v);if(this._groups.length<st){for(;this._groups.length<st;){var ot={it:this.cloneElements(this._elements),ty:"gr"};ot.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,ot),this._groups.splice(0,0,ot),this._currentCopies+=1}this.elem.reloadShapes(),rt=!0}it=0;var at;for(tt=0;tt<=this._groups.length-1;tt+=1){if(at=it<st,this._groups[tt]._render=at,this.changeGroupRender(this._groups[tt].it,at),!at){var At=this.elemsData[tt].it,lt=At[At.length-1];lt.transform.op.v!==0?(lt.transform.op._mdf=!0,lt.transform.op.v=0):lt.transform.op._mdf=!1}it+=1}this._currentCopies=st;var gt=this.o.v,ct=gt%1,dt=gt>0?Math.floor(gt):Math.ceil(gt),ht=this.pMatrix.props,mt=this.rMatrix.props,Ct=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ft=0;if(gt>0){for(;ft<dt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ft+=1;ct&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,ct,!1),ft+=ct)}else if(gt<0){for(;ft>dt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ft-=1;ct&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-ct,!0),ft-=ct)}tt=this.data.m===1?0:this._currentCopies-1,nt=this.data.m===1?1:-1,it=this._currentCopies;for(var pt,Vt;it;){if(_=this.elemsData[tt].it,_e=_[_.length-1].transform.mProps.v.props,Vt=_e.length,_[_.length-1].transform.mProps._mdf=!0,_[_.length-1].transform.op._mdf=!0,_[_.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(tt/(this._currentCopies-1)),ft!==0){for((tt!==0&&nt===1||tt!==this._currentCopies-1&&nt===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5],mt[6],mt[7],mt[8],mt[9],mt[10],mt[11],mt[12],mt[13],mt[14],mt[15]),this.matrix.transform(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5],Ct[6],Ct[7],Ct[8],Ct[9],Ct[10],Ct[11],Ct[12],Ct[13],Ct[14],Ct[15]),this.matrix.transform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5],ht[6],ht[7],ht[8],ht[9],ht[10],ht[11],ht[12],ht[13],ht[14],ht[15]),pt=0;pt<Vt;pt+=1)_e[pt]=this.matrix.props[pt];this.matrix.reset()}else for(this.matrix.reset(),pt=0;pt<Vt;pt+=1)_e[pt]=this.matrix.props[pt];ft+=1,it-=1,tt+=nt}}else for(it=this._currentCopies,tt=0,nt=1;it;)_=this.elemsData[tt].it,_e=_[_.length-1].transform.mProps.v.props,_[_.length-1].transform.mProps._mdf=!1,_[_.length-1].transform.op._mdf=!1,it-=1,tt+=nt;return rt},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(et,_){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(et,_.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(et,_){var _e=shapePool.newElement();_e.c=et.c;var tt,nt=et._length,it,rt,st,ot,at,At,lt=0,gt,ct,dt,ht,mt,Ct;for(tt=0;tt<nt;tt+=1)it=et.v[tt],st=et.o[tt],rt=et.i[tt],it[0]===st[0]&&it[1]===st[1]&&it[0]===rt[0]&&it[1]===rt[1]?(tt===0||tt===nt-1)&&!et.c?(_e.setTripleAt(it[0],it[1],st[0],st[1],rt[0],rt[1],lt),lt+=1):(tt===0?ot=et.v[nt-1]:ot=et.v[tt-1],at=Math.sqrt(Math.pow(it[0]-ot[0],2)+Math.pow(it[1]-ot[1],2)),At=at?Math.min(at/2,_)/at:0,mt=it[0]+(ot[0]-it[0])*At,gt=mt,Ct=it[1]-(it[1]-ot[1])*At,ct=Ct,dt=gt-(gt-it[0])*roundCorner,ht=ct-(ct-it[1])*roundCorner,_e.setTripleAt(gt,ct,dt,ht,mt,Ct,lt),lt+=1,tt===nt-1?ot=et.v[0]:ot=et.v[tt+1],at=Math.sqrt(Math.pow(it[0]-ot[0],2)+Math.pow(it[1]-ot[1],2)),At=at?Math.min(at/2,_)/at:0,dt=it[0]+(ot[0]-it[0])*At,gt=dt,ht=it[1]+(ot[1]-it[1])*At,ct=ht,mt=gt-(gt-it[0])*roundCorner,Ct=ct-(ct-it[1])*roundCorner,_e.setTripleAt(gt,ct,dt,ht,mt,Ct,lt),lt+=1):(_e.setTripleAt(et.v[tt][0],et.v[tt][1],et.o[tt][0],et.o[tt][1],et.i[tt][0],et.i[tt][1],lt),lt+=1);return _e},RoundCornersModifier.prototype.processShapes=function(et){var _,_e,tt=this.shapes.length,nt,it,rt=this.rd.v;if(rt!==0){var st,ot;for(_e=0;_e<tt;_e+=1){if(st=this.shapes[_e],ot=st.localShapeCollection,!(!st.shape._mdf&&!this._mdf&&!et))for(ot.releaseShapes(),st.shape._mdf=!0,_=st.shape.paths.shapes,it=st.shape.paths._length,nt=0;nt<it;nt+=1)ot.addShape(this.processPath(_[nt],rt));st.shape.paths=st.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(et,_){return Math.abs(et-_)*1e5<=Math.min(Math.abs(et),Math.abs(_))}function floatZero(et){return Math.abs(et)<=1e-5}function lerp(et,_,_e){return et*(1-_e)+_*_e}function lerpPoint(et,_,_e){return[lerp(et[0],_[0],_e),lerp(et[1],_[1],_e)]}function quadRoots(et,_,_e){if(et===0)return[];var tt=_*_-4*et*_e;if(tt<0)return[];var nt=-_/(2*et);if(tt===0)return[nt];var it=Math.sqrt(tt)/(2*et);return[nt-it,nt+it]}function polynomialCoefficients(et,_,_e,tt){return[-et+3*_-3*_e+tt,3*et-6*_+3*_e,-3*et+3*_,et]}function singlePoint(et){return new PolynomialBezier(et,et,et,et,!1)}function PolynomialBezier(et,_,_e,tt,nt){nt&&pointEqual(et,_)&&(_=lerpPoint(et,tt,1/3)),nt&&pointEqual(_e,tt)&&(_e=lerpPoint(et,tt,2/3));var it=polynomialCoefficients(et[0],_[0],_e[0],tt[0]),rt=polynomialCoefficients(et[1],_[1],_e[1],tt[1]);this.a=[it[0],rt[0]],this.b=[it[1],rt[1]],this.c=[it[2],rt[2]],this.d=[it[3],rt[3]],this.points=[et,_,_e,tt]}PolynomialBezier.prototype.point=function(et){return[((this.a[0]*et+this.b[0])*et+this.c[0])*et+this.d[0],((this.a[1]*et+this.b[1])*et+this.c[1])*et+this.d[1]]},PolynomialBezier.prototype.derivative=function(et){return[(3*et*this.a[0]+2*this.b[0])*et+this.c[0],(3*et*this.a[1]+2*this.b[1])*et+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(et){var _=this.derivative(et);return Math.atan2(_[1],_[0])},PolynomialBezier.prototype.normalAngle=function(et){var _=this.derivative(et);return Math.atan2(_[0],_[1])},PolynomialBezier.prototype.inflectionPoints=function(){var et=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(et))return[];var _=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/et,_e=_*_-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/et;if(_e<0)return[];var tt=Math.sqrt(_e);return floatZero(tt)?tt>0&&tt<1?[_]:[]:[_-tt,_+tt].filter(function(nt){return nt>0&&nt<1})},PolynomialBezier.prototype.split=function(et){if(et<=0)return[singlePoint(this.points[0]),this];if(et>=1)return[this,singlePoint(this.points[this.points.length-1])];var _=lerpPoint(this.points[0],this.points[1],et),_e=lerpPoint(this.points[1],this.points[2],et),tt=lerpPoint(this.points[2],this.points[3],et),nt=lerpPoint(_,_e,et),it=lerpPoint(_e,tt,et),rt=lerpPoint(nt,it,et);return[new PolynomialBezier(this.points[0],_,nt,rt,!0),new PolynomialBezier(rt,it,tt,this.points[3],!0)]};function extrema(et,_){var _e=et.points[0][_],tt=et.points[et.points.length-1][_];if(_e>tt){var nt=tt;tt=_e,_e=nt}for(var it=quadRoots(3*et.a[_],2*et.b[_],et.c[_]),rt=0;rt<it.length;rt+=1)if(it[rt]>0&&it[rt]<1){var st=et.point(it[rt])[_];st<_e?_e=st:st>tt&&(tt=st)}return{min:_e,max:tt}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var et=this.bounds();return{left:et.x.min,right:et.x.max,top:et.y.min,bottom:et.y.max,width:et.x.max-et.x.min,height:et.y.max-et.y.min,cx:(et.x.max+et.x.min)/2,cy:(et.y.max+et.y.min)/2}};function intersectData(et,_,_e){var tt=et.boundingBox();return{cx:tt.cx,cy:tt.cy,width:tt.width,height:tt.height,bez:et,t:(_+_e)/2,t1:_,t2:_e}}function splitData(et){var _=et.bez.split(.5);return[intersectData(_[0],et.t1,et.t),intersectData(_[1],et.t,et.t2)]}function boxIntersect(et,_){return Math.abs(et.cx-_.cx)*2<et.width+_.width&&Math.abs(et.cy-_.cy)*2<et.height+_.height}function intersectsImpl(et,_,_e,tt,nt,it){if(boxIntersect(et,_)){if(_e>=it||et.width<=tt&&et.height<=tt&&_.width<=tt&&_.height<=tt){nt.push([et.t,_.t]);return}var rt=splitData(et),st=splitData(_);intersectsImpl(rt[0],st[0],_e+1,tt,nt,it),intersectsImpl(rt[0],st[1],_e+1,tt,nt,it),intersectsImpl(rt[1],st[0],_e+1,tt,nt,it),intersectsImpl(rt[1],st[1],_e+1,tt,nt,it)}}PolynomialBezier.prototype.intersections=function(et,_,_e){_===void 0&&(_=2),_e===void 0&&(_e=7);var tt=[];return intersectsImpl(intersectData(this,0,1),intersectData(et,0,1),0,_,tt,_e),tt},PolynomialBezier.shapeSegment=function(et,_){var _e=(_+1)%et.length();return new PolynomialBezier(et.v[_],et.o[_],et.i[_e],et.v[_e],!0)},PolynomialBezier.shapeSegmentInverted=function(et,_){var _e=(_+1)%et.length();return new PolynomialBezier(et.v[_e],et.i[_e],et.o[_],et.v[_],!0)};function crossProduct(et,_){return[et[1]*_[2]-et[2]*_[1],et[2]*_[0]-et[0]*_[2],et[0]*_[1]-et[1]*_[0]]}function lineIntersection(et,_,_e,tt){var nt=[et[0],et[1],1],it=[_[0],_[1],1],rt=[_e[0],_e[1],1],st=[tt[0],tt[1],1],ot=crossProduct(crossProduct(nt,it),crossProduct(rt,st));return floatZero(ot[2])?null:[ot[0]/ot[2],ot[1]/ot[2]]}function polarOffset(et,_,_e){return[et[0]+Math.cos(_)*_e,et[1]-Math.sin(_)*_e]}function pointDistance(et,_){return Math.hypot(et[0]-_[0],et[1]-_[1])}function pointEqual(et,_){return floatEqual(et[0],_[0])&&floatEqual(et[1],_[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(et,_){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(et,_.s,0,null,this),this.frequency=PropertyFactory.getProp(et,_.r,0,null,this),this.pointsType=PropertyFactory.getProp(et,_.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(et,_,_e,tt,nt,it,rt){var st=_e-Math.PI/2,ot=_e+Math.PI/2,at=_[0]+Math.cos(_e)*tt*nt,At=_[1]-Math.sin(_e)*tt*nt;et.setTripleAt(at,At,at+Math.cos(st)*it,At-Math.sin(st)*it,at+Math.cos(ot)*rt,At-Math.sin(ot)*rt,et.length())}function getPerpendicularVector(et,_){var _e=[_[0]-et[0],_[1]-et[1]],tt=-Math.PI*.5,nt=[Math.cos(tt)*_e[0]-Math.sin(tt)*_e[1],Math.sin(tt)*_e[0]+Math.cos(tt)*_e[1]];return nt}function getProjectingAngle(et,_){var _e=_===0?et.length()-1:_-1,tt=(_+1)%et.length(),nt=et.v[_e],it=et.v[tt],rt=getPerpendicularVector(nt,it);return Math.atan2(0,1)-Math.atan2(rt[1],rt[0])}function zigZagCorner(et,_,_e,tt,nt,it,rt){var st=getProjectingAngle(_,_e),ot=_.v[_e%_._length],at=_.v[_e===0?_._length-1:_e-1],At=_.v[(_e+1)%_._length],lt=it===2?Math.sqrt(Math.pow(ot[0]-at[0],2)+Math.pow(ot[1]-at[1],2)):0,gt=it===2?Math.sqrt(Math.pow(ot[0]-At[0],2)+Math.pow(ot[1]-At[1],2)):0;setPoint(et,_.v[_e%_._length],st,rt,tt,gt/((nt+1)*2),lt/((nt+1)*2))}function zigZagSegment(et,_,_e,tt,nt,it){for(var rt=0;rt<tt;rt+=1){var st=(rt+1)/(tt+1),ot=nt===2?Math.sqrt(Math.pow(_.points[3][0]-_.points[0][0],2)+Math.pow(_.points[3][1]-_.points[0][1],2)):0,at=_.normalAngle(st),At=_.point(st);setPoint(et,At,at,it,_e,ot/((tt+1)*2),ot/((tt+1)*2)),it=-it}return it}ZigZagModifier.prototype.processPath=function(et,_,_e,tt){var nt=et._length,it=shapePool.newElement();if(it.c=et.c,et.c||(nt-=1),nt===0)return it;var rt=-1,st=PolynomialBezier.shapeSegment(et,0);zigZagCorner(it,et,0,_,_e,tt,rt);for(var ot=0;ot<nt;ot+=1)rt=zigZagSegment(it,st,_,_e,tt,-rt),ot===nt-1&&!et.c?st=null:st=PolynomialBezier.shapeSegment(et,(ot+1)%nt),zigZagCorner(it,et,ot+1,_,_e,tt,rt);return it},ZigZagModifier.prototype.processShapes=function(et){var _,_e,tt=this.shapes.length,nt,it,rt=this.amplitude.v,st=Math.max(0,Math.round(this.frequency.v)),ot=this.pointsType.v;if(rt!==0){var at,At;for(_e=0;_e<tt;_e+=1){if(at=this.shapes[_e],At=at.localShapeCollection,!(!at.shape._mdf&&!this._mdf&&!et))for(At.releaseShapes(),at.shape._mdf=!0,_=at.shape.paths.shapes,it=at.shape.paths._length,nt=0;nt<it;nt+=1)At.addShape(this.processPath(_[nt],rt,st,ot));at.shape.paths=at.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(et,_,_e){var tt=Math.atan2(_[0]-et[0],_[1]-et[1]);return[polarOffset(et,tt,_e),polarOffset(_,tt,_e)]}function offsetSegment(et,_){var _e,tt,nt,it,rt,st,ot;ot=linearOffset(et.points[0],et.points[1],_),_e=ot[0],tt=ot[1],ot=linearOffset(et.points[1],et.points[2],_),nt=ot[0],it=ot[1],ot=linearOffset(et.points[2],et.points[3],_),rt=ot[0],st=ot[1];var at=lineIntersection(_e,tt,nt,it);at===null&&(at=tt);var At=lineIntersection(rt,st,nt,it);return At===null&&(At=rt),new PolynomialBezier(_e,at,At,st)}function joinLines(et,_,_e,tt,nt){var it=_.points[3],rt=_e.points[0];if(tt===3||pointEqual(it,rt))return it;if(tt===2){var st=-_.tangentAngle(1),ot=-_e.tangentAngle(0)+Math.PI,at=lineIntersection(it,polarOffset(it,st+Math.PI/2,100),rt,polarOffset(rt,st+Math.PI/2,100)),At=at?pointDistance(at,it):pointDistance(it,rt)/2,lt=polarOffset(it,st,2*At*roundCorner);return et.setXYAt(lt[0],lt[1],"o",et.length()-1),lt=polarOffset(rt,ot,2*At*roundCorner),et.setTripleAt(rt[0],rt[1],rt[0],rt[1],lt[0],lt[1],et.length()),rt}var gt=pointEqual(it,_.points[2])?_.points[0]:_.points[2],ct=pointEqual(rt,_e.points[1])?_e.points[3]:_e.points[1],dt=lineIntersection(gt,it,rt,ct);return dt&&pointDistance(dt,it)<nt?(et.setTripleAt(dt[0],dt[1],dt[0],dt[1],dt[0],dt[1],et.length()),dt):it}function getIntersection(et,_){var _e=et.intersections(_);return _e.length&&floatEqual(_e[0][0],1)&&_e.shift(),_e.length?_e[0]:null}function pruneSegmentIntersection(et,_){var _e=et.slice(),tt=_.slice(),nt=getIntersection(et[et.length-1],_[0]);return nt&&(_e[et.length-1]=et[et.length-1].split(nt[0])[0],tt[0]=_[0].split(nt[1])[1]),et.length>1&&_.length>1&&(nt=getIntersection(et[0],_[_.length-1]),nt)?[[et[0].split(nt[0])[0]],[_[_.length-1].split(nt[1])[1]]]:[_e,tt]}function pruneIntersections(et){for(var _,_e=1;_e<et.length;_e+=1)_=pruneSegmentIntersection(et[_e-1],et[_e]),et[_e-1]=_[0],et[_e]=_[1];return et.length>1&&(_=pruneSegmentIntersection(et[et.length-1],et[0]),et[et.length-1]=_[0],et[0]=_[1]),et}function offsetSegmentSplit(et,_){var _e=et.inflectionPoints(),tt,nt,it,rt;if(_e.length===0)return[offsetSegment(et,_)];if(_e.length===1||floatEqual(_e[1],1))return it=et.split(_e[0]),tt=it[0],nt=it[1],[offsetSegment(tt,_),offsetSegment(nt,_)];it=et.split(_e[0]),tt=it[0];var st=(_e[1]-_e[0])/(1-_e[0]);return it=it[1].split(st),rt=it[0],nt=it[1],[offsetSegment(tt,_),offsetSegment(rt,_),offsetSegment(nt,_)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(et,_){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(et,_.a,0,null,this),this.miterLimit=PropertyFactory.getProp(et,_.ml,0,null,this),this.lineJoin=_.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(et,_,_e,tt){var nt=shapePool.newElement();nt.c=et.c;var it=et.length();et.c||(it-=1);var rt,st,ot,at=[];for(rt=0;rt<it;rt+=1)ot=PolynomialBezier.shapeSegment(et,rt),at.push(offsetSegmentSplit(ot,_));if(!et.c)for(rt=it-1;rt>=0;rt-=1)ot=PolynomialBezier.shapeSegmentInverted(et,rt),at.push(offsetSegmentSplit(ot,_));at=pruneIntersections(at);var At=null,lt=null;for(rt=0;rt<at.length;rt+=1){var gt=at[rt];for(lt&&(At=joinLines(nt,lt,gt[0],_e,tt)),lt=gt[gt.length-1],st=0;st<gt.length;st+=1)ot=gt[st],At&&pointEqual(ot.points[0],At)?nt.setXYAt(ot.points[1][0],ot.points[1][1],"o",nt.length()-1):nt.setTripleAt(ot.points[0][0],ot.points[0][1],ot.points[1][0],ot.points[1][1],ot.points[0][0],ot.points[0][1],nt.length()),nt.setTripleAt(ot.points[3][0],ot.points[3][1],ot.points[3][0],ot.points[3][1],ot.points[2][0],ot.points[2][1],nt.length()),At=ot.points[3]}return at.length&&joinLines(nt,lt,at[0][0],_e,tt),nt},OffsetPathModifier.prototype.processShapes=function(et){var _,_e,tt=this.shapes.length,nt,it,rt=this.amount.v,st=this.miterLimit.v,ot=this.lineJoin;if(rt!==0){var at,At;for(_e=0;_e<tt;_e+=1){if(at=this.shapes[_e],At=at.localShapeCollection,!(!at.shape._mdf&&!this._mdf&&!et))for(At.releaseShapes(),at.shape._mdf=!0,_=at.shape.paths.shapes,it=at.shape.paths._length,nt=0;nt<it;nt+=1)At.addShape(this.processPath(_[nt],rt,ot,st));at.shape.paths=at.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(et){for(var _=et.fStyle?et.fStyle.split(" "):[],_e="normal",tt="normal",nt=_.length,it,rt=0;rt<nt;rt+=1)switch(it=_[rt].toLowerCase(),it){case"italic":tt="italic";break;case"bold":_e="700";break;case"black":_e="900";break;case"medium":_e="500";break;case"regular":case"normal":_e="400";break;case"light":case"thin":_e="200";break}return{style:tt,weight:et.fWeight||_e}}var FontManager=function(){var et=5e3,_={w:0,size:0,shapes:[],data:{shapes:[]}},_e=[];_e=_e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var tt=127988,nt=917631,it=917601,rt=917626,st=65039,ot=8205,at=127462,At=127487,lt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function gt(_t){var Tt=_t.split(","),St,Zt=Tt.length,Et=[];for(St=0;St<Zt;St+=1)Tt[St]!=="sans-serif"&&Tt[St]!=="monospace"&&Et.push(Tt[St]);return Et.join(",")}function ct(_t,Tt){var St=createTag("span");St.setAttribute("aria-hidden",!0),St.style.fontFamily=Tt;var Zt=createTag("span");Zt.innerText="giItT1WQy@!-/#",St.style.position="absolute",St.style.left="-10000px",St.style.top="-10000px",St.style.fontSize="300px",St.style.fontVariant="normal",St.style.fontStyle="normal",St.style.fontWeight="normal",St.style.letterSpacing="0",St.appendChild(Zt),document.body.appendChild(St);var Et=Zt.offsetWidth;return Zt.style.fontFamily=gt(_t)+", "+Tt,{node:Zt,w:Et,parent:St}}function dt(){var _t,Tt=this.fonts.length,St,Zt,Et=Tt;for(_t=0;_t<Tt;_t+=1)this.fonts[_t].loaded?Et-=1:this.fonts[_t].fOrigin==="n"||this.fonts[_t].origin===0?this.fonts[_t].loaded=!0:(St=this.fonts[_t].monoCase.node,Zt=this.fonts[_t].monoCase.w,St.offsetWidth!==Zt?(Et-=1,this.fonts[_t].loaded=!0):(St=this.fonts[_t].sansCase.node,Zt=this.fonts[_t].sansCase.w,St.offsetWidth!==Zt&&(Et-=1,this.fonts[_t].loaded=!0)),this.fonts[_t].loaded&&(this.fonts[_t].sansCase.parent.parentNode.removeChild(this.fonts[_t].sansCase.parent),this.fonts[_t].monoCase.parent.parentNode.removeChild(this.fonts[_t].monoCase.parent)));Et!==0&&Date.now()-this.initTime<et?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function ht(_t,Tt){var St=document.body&&Tt?"svg":"canvas",Zt,Et=getFontProperties(_t);if(St==="svg"){var Wt=createNS("text");Wt.style.fontSize="100px",Wt.setAttribute("font-family",_t.fFamily),Wt.setAttribute("font-style",Et.style),Wt.setAttribute("font-weight",Et.weight),Wt.textContent="1",_t.fClass?(Wt.style.fontFamily="inherit",Wt.setAttribute("class",_t.fClass)):Wt.style.fontFamily=_t.fFamily,Tt.appendChild(Wt),Zt=Wt}else{var Ht=new OffscreenCanvas(500,500).getContext("2d");Ht.font=Et.style+" "+Et.weight+" 100px "+_t.fFamily,Zt=Ht}function zt(Pt){return St==="svg"?(Zt.textContent=Pt,Zt.getComputedTextLength()):Zt.measureText(Pt).width}return{measureText:zt}}function mt(_t,Tt){if(!_t){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=_t.list;return}if(!document.body){this.isLoaded=!0,_t.list.forEach(function(sn){sn.helper=ht(sn),sn.cache={}}),this.fonts=_t.list;return}var St=_t.list,Zt,Et=St.length,Wt=Et;for(Zt=0;Zt<Et;Zt+=1){var Ht=!0,zt,Pt;if(St[Zt].loaded=!1,St[Zt].monoCase=ct(St[Zt].fFamily,"monospace"),St[Zt].sansCase=ct(St[Zt].fFamily,"sans-serif"),!St[Zt].fPath)St[Zt].loaded=!0,Wt-=1;else if(St[Zt].fOrigin==="p"||St[Zt].origin===3){if(zt=document.querySelectorAll('style[f-forigin="p"][f-family="'+St[Zt].fFamily+'"], style[f-origin="3"][f-family="'+St[Zt].fFamily+'"]'),zt.length>0&&(Ht=!1),Ht){var Ot=createTag("style");Ot.setAttribute("f-forigin",St[Zt].fOrigin),Ot.setAttribute("f-origin",St[Zt].origin),Ot.setAttribute("f-family",St[Zt].fFamily),Ot.type="text/css",Ot.innerText="@font-face {font-family: "+St[Zt].fFamily+"; font-style: normal; src: url('"+St[Zt].fPath+"');}",Tt.appendChild(Ot)}}else if(St[Zt].fOrigin==="g"||St[Zt].origin===1){for(zt=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Pt=0;Pt<zt.length;Pt+=1)zt[Pt].href.indexOf(St[Zt].fPath)!==-1&&(Ht=!1);if(Ht){var Jt=createTag("link");Jt.setAttribute("f-forigin",St[Zt].fOrigin),Jt.setAttribute("f-origin",St[Zt].origin),Jt.type="text/css",Jt.rel="stylesheet",Jt.href=St[Zt].fPath,document.body.appendChild(Jt)}}else if(St[Zt].fOrigin==="t"||St[Zt].origin===2){for(zt=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Pt=0;Pt<zt.length;Pt+=1)St[Zt].fPath===zt[Pt].src&&(Ht=!1);if(Ht){var rn=createTag("link");rn.setAttribute("f-forigin",St[Zt].fOrigin),rn.setAttribute("f-origin",St[Zt].origin),rn.setAttribute("rel","stylesheet"),rn.setAttribute("href",St[Zt].fPath),Tt.appendChild(rn)}}St[Zt].helper=ht(St[Zt],Tt),St[Zt].cache={},this.fonts.push(St[Zt])}Wt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Ct(_t){if(_t){this.chars||(this.chars=[]);var Tt,St=_t.length,Zt,Et=this.chars.length,Wt;for(Tt=0;Tt<St;Tt+=1){for(Zt=0,Wt=!1;Zt<Et;)this.chars[Zt].style===_t[Tt].style&&this.chars[Zt].fFamily===_t[Tt].fFamily&&this.chars[Zt].ch===_t[Tt].ch&&(Wt=!0),Zt+=1;Wt||(this.chars.push(_t[Tt]),Et+=1)}}}function ft(_t,Tt,St){for(var Zt=0,Et=this.chars.length;Zt<Et;){if(this.chars[Zt].ch===_t&&this.chars[Zt].style===Tt&&this.chars[Zt].fFamily===St)return this.chars[Zt];Zt+=1}return(typeof _t=="string"&&_t.charCodeAt(0)!==13||!_t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",_t,Tt,St)),_}function pt(_t,Tt,St){var Zt=this.getFontByName(Tt),Et=_t;if(!Zt.cache[Et]){var Wt=Zt.helper;if(_t===" "){var Ht=Wt.measureText("|"+_t+"|"),zt=Wt.measureText("||");Zt.cache[Et]=(Ht-zt)/100}else Zt.cache[Et]=Wt.measureText(_t)/100}return Zt.cache[Et]*St}function Vt(_t){for(var Tt=0,St=this.fonts.length;Tt<St;){if(this.fonts[Tt].fName===_t)return this.fonts[Tt];Tt+=1}return this.fonts[0]}function yt(_t){var Tt=0,St=_t.charCodeAt(0);if(St>=55296&&St<=56319){var Zt=_t.charCodeAt(1);Zt>=56320&&Zt<=57343&&(Tt=(St-55296)*1024+Zt-56320+65536)}return Tt}function Gt(_t,Tt){var St=_t.toString(16)+Tt.toString(16);return lt.indexOf(St)!==-1}function Bt(_t){return _t===ot}function vt(_t){return _t===st}function wt(_t){var Tt=yt(_t);return Tt>=at&&Tt<=At}function Mt(_t){return wt(_t.substr(0,2))&&wt(_t.substr(2,2))}function kt(_t){return _e.indexOf(_t)!==-1}function Nt(_t,Tt){var St=yt(_t.substr(Tt,2));if(St!==tt)return!1;var Zt=0;for(Tt+=2;Zt<5;){if(St=yt(_t.substr(Tt,2)),St<it||St>rt)return!1;Zt+=1,Tt+=2}return yt(_t.substr(Tt,2))===nt}function Yt(){this.isLoaded=!0}var Lt=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Lt.isModifier=Gt,Lt.isZeroWidthJoiner=Bt,Lt.isFlagEmoji=Mt,Lt.isRegionalCode=wt,Lt.isCombinedCharacter=kt,Lt.isRegionalFlag=Nt,Lt.isVariationSelector=vt,Lt.BLACK_FLAG_CODE_POINT=tt;var Xt={addChars:Ct,addFonts:mt,getCharData:ft,getFontByName:Vt,measureText:pt,checkLoadedFonts:dt,setIsLoaded:Yt};return Lt.prototype=Xt,Lt}();function SlotManager(et){this.animationData=et}SlotManager.prototype.getProp=function(et){return this.animationData.slots&&this.animationData.slots[et.sid]?Object.assign(et,this.animationData.slots[et.sid].p):et};function slotFactory(et){return new SlotManager(et)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(_){this.renderableComponents.indexOf(_)===-1&&this.renderableComponents.push(_)},removeRenderableComponent:function(_){this.renderableComponents.indexOf(_)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(_),1)},prepareRenderableFrame:function(_){this.checkLayerLimits(_)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(_){this.data.ip-this.data.st<=_&&this.data.op-this.data.st>_?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var _,_e=this.renderableComponents.length;for(_=0;_<_e;_+=1)this.renderableComponents[_].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var et={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(_){return et[_]||""}}();function SliderEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,0,0,_e)}function AngleEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,0,0,_e)}function ColorEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,1,0,_e)}function PointEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,1,0,_e)}function LayerIndexEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,0,0,_e)}function MaskIndexEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,0,0,_e)}function CheckboxEffect(et,_,_e){this.p=PropertyFactory.getProp(_,et.v,0,0,_e)}function NoValueEffect(){this.p={}}function EffectsManager(et,_){var _e=et.ef||[];this.effectElements=[];var tt,nt=_e.length,it;for(tt=0;tt<nt;tt+=1)it=new GroupEffect(_e[tt],_),this.effectElements.push(it)}function GroupEffect(et,_){this.init(et,_)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(et,_){this.data=et,this.effectElements=[],this.initDynamicPropertyContainer(_);var _e,tt=this.data.ef.length,nt,it=this.data.ef;for(_e=0;_e<tt;_e+=1){switch(nt=null,it[_e].ty){case 0:nt=new SliderEffect(it[_e],_,this);break;case 1:nt=new AngleEffect(it[_e],_,this);break;case 2:nt=new ColorEffect(it[_e],_,this);break;case 3:nt=new PointEffect(it[_e],_,this);break;case 4:case 7:nt=new CheckboxEffect(it[_e],_,this);break;case 10:nt=new LayerIndexEffect(it[_e],_,this);break;case 11:nt=new MaskIndexEffect(it[_e],_,this);break;case 5:nt=new EffectsManager(it[_e],_);break;default:nt=new NoValueEffect(it[_e]);break}nt&&this.effectElements.push(nt)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var _=0,_e=this.data.masksProperties.length;_<_e;){if(this.data.masksProperties[_].mode!=="n"&&this.data.masksProperties[_].cl!==!1)return!0;_+=1}return!1},initExpressions:function(){var _=getExpressionInterfaces();if(_){var _e=_("layer"),tt=_("effects"),nt=_("shape"),it=_("text"),rt=_("comp");this.layerInterface=_e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var st=tt.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(st),this.data.ty===0||this.data.xt?this.compInterface=rt(this):this.data.ty===4?(this.layerInterface.shapeInterface=nt(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=it(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var _=getBlendMode(this.data.bm),_e=this.baseElement||this.layerElement;_e.style["mix-blend-mode"]=_},initBaseData:function(_,_e,tt){this.globalData=_e,this.comp=tt,this.data=_,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(_,_e){var tt,nt=this.dynamicProperties.length;for(tt=0;tt<nt;tt+=1)(_e||this._isParent&&this.dynamicProperties[tt].propType==="transform")&&(this.dynamicProperties[tt].getValue(),this.dynamicProperties[tt]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(_){this.dynamicProperties.indexOf(_)===-1&&this.dynamicProperties.push(_)}};function FootageElement(et,_,_e){this.initFrame(),this.initRenderable(),this.assetData=_.getAssetData(et.refId),this.footageData=_.imageLoader.getAsset(this.assetData),this.initBaseData(et,_,_e)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var et=getExpressionInterfaces();if(et){var _=et("footage");this.layerInterface=_(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(et,_,_e){this.initFrame(),this.initRenderable(),this.assetData=_.getAssetData(et.refId),this.initBaseData(et,_,_e),this._isPlaying=!1,this._canPlay=!1;var tt=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(tt),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,_.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,et.au&&et.au.lv?et.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(et){if(this.prepareRenderableFrame(et,!0),this.prepareProperties(et,!0),this.tm._placeholder)this._currentTime=et/this.data.sr;else{var _=this.tm.v;this._currentTime=_}this._volume=this.lv.v[0];var _e=this._volume*this._volumeMultiplier;this._previousVolume!==_e&&(this._previousVolume=_e,this.audio.volume(_e))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(et){this.audio.rate(et)},AudioElement.prototype.volume=function(et){this._volumeMultiplier=et,this._previousVolume=et*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(et){var _,_e=this.layers.length,tt;for(this.completeLayers=!0,_=_e-1;_>=0;_-=1)this.elements[_]||(tt=this.layers[_],tt.ip-tt.st<=et-this.layers[_].st&&tt.op-tt.st>et-this.layers[_].st&&this.buildItem(_)),this.completeLayers=this.elements[_]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(et){switch(et.ty){case 2:return this.createImage(et);case 0:return this.createComp(et);case 1:return this.createSolid(et);case 3:return this.createNull(et);case 4:return this.createShape(et);case 5:return this.createText(et);case 6:return this.createAudio(et);case 13:return this.createCamera(et);case 15:return this.createFootage(et);default:return this.createNull(et)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(et){return new AudioElement(et,this.globalData,this)},BaseRenderer.prototype.createFootage=function(et){return new FootageElement(et,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var et,_=this.layers.length;for(et=0;et<_;et+=1)this.buildItem(et);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(et){this.completeLayers=!1;var _,_e=et.length,tt,nt=this.layers.length;for(_=0;_<_e;_+=1)for(tt=0;tt<nt;){if(this.layers[tt].id===et[_].id){this.layers[tt]=et[_];break}tt+=1}},BaseRenderer.prototype.setProjectInterface=function(et){this.globalData.projectInterface=et},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(et,_,_e){for(var tt=this.elements,nt=this.layers,it=0,rt=nt.length;it<rt;)nt[it].ind==_&&(!tt[it]||tt[it]===!0?(this.buildItem(it),this.addPendingElement(et)):(_e.push(tt[it]),tt[it].setAsParent(),nt[it].parent!==void 0?this.buildElementParenting(et,nt[it].parent,_e):et.setHierarchy(_e))),it+=1},BaseRenderer.prototype.addPendingElement=function(et){this.pendingElements.push(et)},BaseRenderer.prototype.searchExtraCompositions=function(et){var _,_e=et.length;for(_=0;_<_e;_+=1)if(et[_].xt){var tt=this.createComp(et[_]);tt.initExpressions(),this.globalData.projectInterface.registerComposition(tt)}},BaseRenderer.prototype.getElementById=function(et){var _,_e=this.elements.length;for(_=0;_<_e;_+=1)if(this.elements[_].data.ind===et)return this.elements[_];return null},BaseRenderer.prototype.getElementByPath=function(et){var _=et.shift(),_e;if(typeof _=="number")_e=this.elements[_];else{var tt,nt=this.elements.length;for(tt=0;tt<nt;tt+=1)if(this.elements[tt].data.nm===_){_e=this.elements[tt];break}}return et.length===0?_e:_e.getElementByPath(et)},BaseRenderer.prototype.setupGlobalData=function(et,_){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(et),this.globalData.fontManager.addChars(et.chars),this.globalData.fontManager.addFonts(et.fonts,_),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=et.fr,this.globalData.nm=et.nm,this.globalData.compSize={w:et.w,h:et.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var _=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:_,localMat:_,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var _,_e=this.finalTransform.mat,tt=0,nt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;tt<nt;){if(this.hierarchy[tt].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}tt+=1}if(this.finalTransform._matMdf)for(_=this.finalTransform.mProp.v.props,_e.cloneFromProps(_),tt=0;tt<nt;tt+=1)_e.multiply(this.hierarchy[tt].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var _=0,_e=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;_<_e;)this.localTransforms[_]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[_]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),_+=1;if(this.finalTransform._localMatMdf){var tt=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(tt),_=1;_<_e;_+=1){var nt=this.localTransforms[_].matrix;tt.multiply(nt)}tt.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var it=this.finalTransform.localOpacity;for(_=0;_<_e;_+=1)it*=this.localTransforms[_].opacity*.01;this.finalTransform.localOpacity=it}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var _=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(_.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var _e=0,tt=_.length;for(_e=0;_e<tt;_e+=1)this.localTransforms.push(_[_e])}}},globalToLocal:function(_){var _e=[];_e.push(this.finalTransform);for(var tt=!0,nt=this.comp;tt;)nt.finalTransform?(nt.data.hasMask&&_e.splice(0,0,nt.finalTransform),nt=nt.comp):tt=!1;var it,rt=_e.length,st;for(it=0;it<rt;it+=1)st=_e[it].mat.applyToPointArray(0,0,0),_=[_[0]-st[0],_[1]-st[1],0];return _},mHelper:new Matrix};function MaskElement(et,_,_e){this.data=et,this.element=_,this.globalData=_e,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var tt=this.globalData.defs,nt,it=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(it),this.solidPath="";var rt,st=this.masksProperties,ot=0,at=[],At,lt,gt=createElementID(),ct,dt,ht,mt,Ct="clipPath",ft="clip-path";for(nt=0;nt<it;nt+=1)if((st[nt].mode!=="a"&&st[nt].mode!=="n"||st[nt].inv||st[nt].o.k!==100||st[nt].o.x)&&(Ct="mask",ft="mask"),(st[nt].mode==="s"||st[nt].mode==="i")&&ot===0?(ct=createNS("rect"),ct.setAttribute("fill","#ffffff"),ct.setAttribute("width",this.element.comp.data.w||0),ct.setAttribute("height",this.element.comp.data.h||0),at.push(ct)):ct=null,rt=createNS("path"),st[nt].mode==="n")this.viewData[nt]={op:PropertyFactory.getProp(this.element,st[nt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,st[nt],3),elem:rt,lastPath:""},tt.appendChild(rt);else{ot+=1,rt.setAttribute("fill",st[nt].mode==="s"?"#000000":"#ffffff"),rt.setAttribute("clip-rule","nonzero");var pt;if(st[nt].x.k!==0?(Ct="mask",ft="mask",mt=PropertyFactory.getProp(this.element,st[nt].x,0,null,this.element),pt=createElementID(),dt=createNS("filter"),dt.setAttribute("id",pt),ht=createNS("feMorphology"),ht.setAttribute("operator","erode"),ht.setAttribute("in","SourceGraphic"),ht.setAttribute("radius","0"),dt.appendChild(ht),tt.appendChild(dt),rt.setAttribute("stroke",st[nt].mode==="s"?"#000000":"#ffffff")):(ht=null,mt=null),this.storedData[nt]={elem:rt,x:mt,expan:ht,lastPath:"",lastOperator:"",filterId:pt,lastRadius:0},st[nt].mode==="i"){lt=at.length;var Vt=createNS("g");for(At=0;At<lt;At+=1)Vt.appendChild(at[At]);var yt=createNS("mask");yt.setAttribute("mask-type","alpha"),yt.setAttribute("id",gt+"_"+ot),yt.appendChild(rt),tt.appendChild(yt),Vt.setAttribute("mask","url("+getLocationHref()+"#"+gt+"_"+ot+")"),at.length=0,at.push(Vt)}else at.push(rt);st[nt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[nt]={elem:rt,lastPath:"",op:PropertyFactory.getProp(this.element,st[nt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,st[nt],3),invRect:ct},this.viewData[nt].prop.k||this.drawPath(st[nt],this.viewData[nt].prop.v,this.viewData[nt])}for(this.maskElement=createNS(Ct),it=at.length,nt=0;nt<it;nt+=1)this.maskElement.appendChild(at[nt]);ot>0&&(this.maskElement.setAttribute("id",gt),this.element.maskedElement.setAttribute(ft,"url("+getLocationHref()+"#"+gt+")"),tt.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(et){return this.viewData[et].prop},MaskElement.prototype.renderFrame=function(et){var _=this.element.finalTransform.mat,_e,tt=this.masksProperties.length;for(_e=0;_e<tt;_e+=1)if((this.viewData[_e].prop._mdf||et)&&this.drawPath(this.masksProperties[_e],this.viewData[_e].prop.v,this.viewData[_e]),(this.viewData[_e].op._mdf||et)&&this.viewData[_e].elem.setAttribute("fill-opacity",this.viewData[_e].op.v),this.masksProperties[_e].mode!=="n"&&(this.viewData[_e].invRect&&(this.element.finalTransform.mProp._mdf||et)&&this.viewData[_e].invRect.setAttribute("transform",_.getInverseMatrix().to2dCSS()),this.storedData[_e].x&&(this.storedData[_e].x._mdf||et))){var nt=this.storedData[_e].expan;this.storedData[_e].x.v<0?(this.storedData[_e].lastOperator!=="erode"&&(this.storedData[_e].lastOperator="erode",this.storedData[_e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[_e].filterId+")")),nt.setAttribute("radius",-this.storedData[_e].x.v)):(this.storedData[_e].lastOperator!=="dilate"&&(this.storedData[_e].lastOperator="dilate",this.storedData[_e].elem.setAttribute("filter",null)),this.storedData[_e].elem.setAttribute("stroke-width",this.storedData[_e].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var et="M0,0 ";return et+=" h"+this.globalData.compSize.w,et+=" v"+this.globalData.compSize.h,et+=" h-"+this.globalData.compSize.w,et+=" v-"+this.globalData.compSize.h+" ",et},MaskElement.prototype.drawPath=function(et,_,_e){var tt=" M"+_.v[0][0]+","+_.v[0][1],nt,it;for(it=_._length,nt=1;nt<it;nt+=1)tt+=" C"+_.o[nt-1][0]+","+_.o[nt-1][1]+" "+_.i[nt][0]+","+_.i[nt][1]+" "+_.v[nt][0]+","+_.v[nt][1];if(_.c&&it>1&&(tt+=" C"+_.o[nt-1][0]+","+_.o[nt-1][1]+" "+_.i[0][0]+","+_.i[0][1]+" "+_.v[0][0]+","+_.v[0][1]),_e.lastPath!==tt){var rt="";_e.elem&&(_.c&&(rt=et.inv?this.solidPath+tt:tt),_e.elem.setAttribute("d",rt)),_e.lastPath=tt}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var et={};et.createFilter=_,et.createAlphaToLuminanceFilter=_e;function _(tt,nt){var it=createNS("filter");return it.setAttribute("id",tt),nt!==!0&&(it.setAttribute("filterUnits","objectBoundingBox"),it.setAttribute("x","0%"),it.setAttribute("y","0%"),it.setAttribute("width","100%"),it.setAttribute("height","100%")),it}function _e(){var tt=createNS("feColorMatrix");return tt.setAttribute("type","matrix"),tt.setAttribute("color-interpolation-filters","sRGB"),tt.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),tt}return et}(),featureSupport=function(){var et={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(et.maskType=!1),/firefox/i.test(navigator.userAgent)&&(et.svgLumaHidden=!1),et}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(et){var _,_e="SourceGraphic",tt=et.data.ef?et.data.ef.length:0,nt=createElementID(),it=filtersFactory.createFilter(nt,!0),rt=0;this.filters=[];var st;for(_=0;_<tt;_+=1){st=null;var ot=et.data.ef[_].ty;if(registeredEffects$1[ot]){var at=registeredEffects$1[ot].effect;st=new at(it,et.effectsManager.effectElements[_],et,idPrefix+rt,_e),_e=idPrefix+rt,registeredEffects$1[ot].countsAsEffect&&(rt+=1)}st&&this.filters.push(st)}rt&&(et.globalData.defs.appendChild(it),et.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+nt+")")),this.filters.length&&et.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(et){var _,_e=this.filters.length;for(_=0;_<_e;_+=1)this.filters[_].renderFrame(et)},SVGEffects.prototype.getEffects=function(et){var _,_e=this.filters.length,tt=[];for(_=0;_<_e;_+=1)this.filters[_].type===et&&tt.push(this.filters[_]);return tt};function registerEffect$1(et,_,_e){registeredEffects$1[et]={effect:_,countsAsEffect:_e}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var _=null;if(this.data.td){this.matteMasks={};var _e=createNS("g");_e.setAttribute("id",this.layerId),_e.appendChild(this.layerElement),_=_e,this.globalData.defs.appendChild(_e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),_=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var tt=createNS("clipPath"),nt=createNS("path");nt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var it=createElementID();if(tt.setAttribute("id",it),tt.appendChild(nt),this.globalData.defs.appendChild(tt),this.checkMasks()){var rt=createNS("g");rt.setAttribute("clip-path","url("+getLocationHref()+"#"+it+")"),rt.appendChild(this.layerElement),this.transformedElement=rt,_?_.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+it+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(_){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[_]){var _e=this.layerId+"_"+_,tt,nt,it,rt;if(_===1||_===3){var st=createNS("mask");st.setAttribute("id",_e),st.setAttribute("mask-type",_===3?"luminance":"alpha"),it=createNS("use"),it.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),st.appendChild(it),this.globalData.defs.appendChild(st),!featureSupport.maskType&&_===1&&(st.setAttribute("mask-type","luminance"),tt=createElementID(),nt=filtersFactory.createFilter(tt),this.globalData.defs.appendChild(nt),nt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),rt=createNS("g"),rt.appendChild(it),st.appendChild(rt),rt.setAttribute("filter","url("+getLocationHref()+"#"+tt+")"))}else if(_===2){var ot=createNS("mask");ot.setAttribute("id",_e),ot.setAttribute("mask-type","alpha");var at=createNS("g");ot.appendChild(at),tt=createElementID(),nt=filtersFactory.createFilter(tt);var At=createNS("feComponentTransfer");At.setAttribute("in","SourceGraphic"),nt.appendChild(At);var lt=createNS("feFuncA");lt.setAttribute("type","table"),lt.setAttribute("tableValues","1.0 0.0"),At.appendChild(lt),this.globalData.defs.appendChild(nt);var gt=createNS("rect");gt.setAttribute("width",this.comp.data.w),gt.setAttribute("height",this.comp.data.h),gt.setAttribute("x","0"),gt.setAttribute("y","0"),gt.setAttribute("fill","#ffffff"),gt.setAttribute("opacity","0"),at.setAttribute("filter","url("+getLocationHref()+"#"+tt+")"),at.appendChild(gt),it=createNS("use"),it.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),at.appendChild(it),featureSupport.maskType||(ot.setAttribute("mask-type","luminance"),nt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),rt=createNS("g"),at.appendChild(gt),rt.appendChild(this.layerElement),at.appendChild(rt)),this.globalData.defs.appendChild(ot)}this.matteMasks[_]=_e}return this.matteMasks[_]},setMatte:function(_){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+_+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(_){this.hierarchy=_},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var et={initElement:function(_e,tt,nt){this.initFrame(),this.initBaseData(_e,tt,nt),this.initTransform(_e,tt,nt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var _e=this.baseElement||this.layerElement;_e.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var _e=this.baseElement||this.layerElement;_e.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(_e){this._mdf=!1,this.prepareRenderableFrame(_e),this.prepareProperties(_e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(et)],RenderableDOMElement)})();function IImageElement(et,_,_e){this.assetData=_.getAssetData(et.refId),this.assetData&&this.assetData.sid&&(this.assetData=_.slotManager.getProp(this.assetData)),this.initElement(et,_,_e),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var et=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",et),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(et,_){this.elem=et,this.pos=_}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(_){var _e,tt=this.shapeModifiers.length;for(_e=0;_e<tt;_e+=1)this.shapeModifiers[_e].addShape(_)},isShapeInAnimatedModifiers:function(_){for(var _e=0,tt=this.shapeModifiers.length;_e<tt;)if(this.shapeModifiers[_e].isAnimatedWithShape(_))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var _,_e=this.shapes.length;for(_=0;_<_e;_+=1)this.shapes[_].sh.reset();_e=this.shapeModifiers.length;var tt;for(_=_e-1;_>=0&&(tt=this.shapeModifiers[_].processShapes(this._isFirstFrame),!tt);_-=1);}},searchProcessedElement:function(_){for(var _e=this.processedElements,tt=0,nt=_e.length;tt<nt;){if(_e[tt].elem===_)return _e[tt].pos;tt+=1}return 0},addProcessedElement:function(_,_e){for(var tt=this.processedElements,nt=tt.length;nt;)if(nt-=1,tt[nt].elem===_){tt[nt].pos=_e;return}tt.push(new ProcessedElement(_,_e))},prepareFrame:function(_){this.prepareRenderableFrame(_),this.prepareProperties(_,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(et,_,_e){this.caches=[],this.styles=[],this.transformers=et,this.lStr="",this.sh=_e,this.lvl=_,this._isAnimated=!!_e.k;for(var tt=0,nt=et.length;tt<nt;){if(et[tt].mProps.dynamicProperties.length){this._isAnimated=!0;break}tt+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(et,_){this.data=et,this.type=et.ty,this.d="",this.lvl=_,this._mdf=!1,this.closed=et.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(et,_,_e,tt){this.elem=et,this.frameId=-1,this.dataProps=createSizedArray(_.length),this.renderer=_e,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",_.length?_.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(tt);var nt,it=_.length||0,rt;for(nt=0;nt<it;nt+=1)rt=PropertyFactory.getProp(et,_[nt].v,0,0,this),this.k=rt.k||this.k,this.dataProps[nt]={n:_[nt].n,p:rt};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(et){if(!(this.elem.globalData.frameId===this.frameId&&!et)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||et,this._mdf)){var _=0,_e=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),_=0;_<_e;_+=1)this.dataProps[_].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[_].p.v:this.dashArray[_]=this.dataProps[_].p.v:this.dashoffset[0]=this.dataProps[_].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(et,_,_e){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(et,_.o,0,.01,this),this.w=PropertyFactory.getProp(et,_.w,0,null,this),this.d=new DashProperty(et,_.d||{},"svg",this),this.c=PropertyFactory.getProp(et,_.c,1,255,this),this.style=_e,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(et,_,_e){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(et,_.o,0,.01,this),this.c=PropertyFactory.getProp(et,_.c,1,255,this),this.style=_e}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(et,_,_e){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.style=_e}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(et,_,_e){this.data=_,this.c=createTypedArray("uint8c",_.p*4);var tt=_.k.k[0].s?_.k.k[0].s.length-_.p*4:_.k.k.length-_.p*4;this.o=createTypedArray("float32",tt),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=tt,this.initDynamicPropertyContainer(_e),this.prop=PropertyFactory.getProp(et,_.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(et,_){for(var _e=0,tt=this.o.length/2,nt;_e<tt;){if(nt=Math.abs(et[_e*4]-et[_*4+_e*2]),nt>.01)return!1;_e+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var et=0,_=this.data.k.k.length;et<_;){if(!this.comparePoints(this.data.k.k[et].s,this.data.p))return!1;et+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(et){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||et){var _,_e=this.data.p*4,tt,nt;for(_=0;_<_e;_+=1)tt=_%4===0?100:255,nt=Math.round(this.prop.v[_]*tt),this.c[_]!==nt&&(this.c[_]=nt,this._cmdf=!et);if(this.o.length)for(_e=this.prop.v.length,_=this.data.p*4;_<_e;_+=1)tt=_%2===0?100:1,nt=_%2===0?Math.round(this.prop.v[_]*100):this.prop.v[_],this.o[_-this.data.p*4]!==nt&&(this.o[_-this.data.p*4]=nt,this._omdf=!et);this._mdf=!et}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(et,_,_e){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.initGradientData(et,_,_e)}SVGGradientFillStyleData.prototype.initGradientData=function(et,_,_e){this.o=PropertyFactory.getProp(et,_.o,0,.01,this),this.s=PropertyFactory.getProp(et,_.s,1,null,this),this.e=PropertyFactory.getProp(et,_.e,1,null,this),this.h=PropertyFactory.getProp(et,_.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(et,_.a||{k:0},0,degToRads,this),this.g=new GradientProperty(et,_.g,this),this.style=_e,this.stops=[],this.setGradientData(_e.pElem,_),this.setGradientOpacity(_,_e),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(et,_){var _e=createElementID(),tt=createNS(_.t===1?"linearGradient":"radialGradient");tt.setAttribute("id",_e),tt.setAttribute("spreadMethod","pad"),tt.setAttribute("gradientUnits","userSpaceOnUse");var nt=[],it,rt,st;for(st=_.g.p*4,rt=0;rt<st;rt+=4)it=createNS("stop"),tt.appendChild(it),nt.push(it);et.setAttribute(_.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+_e+")"),this.gf=tt,this.cst=nt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(et,_){if(this.g._hasOpacity&&!this.g._collapsable){var _e,tt,nt,it=createNS("mask"),rt=createNS("path");it.appendChild(rt);var st=createElementID(),ot=createElementID();it.setAttribute("id",ot);var at=createNS(et.t===1?"linearGradient":"radialGradient");at.setAttribute("id",st),at.setAttribute("spreadMethod","pad"),at.setAttribute("gradientUnits","userSpaceOnUse"),nt=et.g.k.k[0].s?et.g.k.k[0].s.length:et.g.k.k.length;var At=this.stops;for(tt=et.g.p*4;tt<nt;tt+=2)_e=createNS("stop"),_e.setAttribute("stop-color","rgb(255,255,255)"),at.appendChild(_e),At.push(_e);rt.setAttribute(et.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+st+")"),et.ty==="gs"&&(rt.setAttribute("stroke-linecap",lineCapEnum[et.lc||2]),rt.setAttribute("stroke-linejoin",lineJoinEnum[et.lj||2]),et.lj===1&&rt.setAttribute("stroke-miterlimit",et.ml)),this.of=at,this.ms=it,this.ost=At,this.maskId=ot,_.msElem=rt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(et,_,_e){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(et,_.w,0,null,this),this.d=new DashProperty(et,_.d||{},"svg",this),this.initGradientData(et,_,_e),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(et,_,_e){this.transform={mProps:et,op:_,container:_e},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(_,_e,tt,nt){if(_e===0)return"";var it=_.o,rt=_.i,st=_.v,ot,at=" M"+nt.applyToPointStringified(st[0][0],st[0][1]);for(ot=1;ot<_e;ot+=1)at+=" C"+nt.applyToPointStringified(it[ot-1][0],it[ot-1][1])+" "+nt.applyToPointStringified(rt[ot][0],rt[ot][1])+" "+nt.applyToPointStringified(st[ot][0],st[ot][1]);return tt&&_e&&(at+=" C"+nt.applyToPointStringified(it[ot-1][0],it[ot-1][1])+" "+nt.applyToPointStringified(rt[0][0],rt[0][1])+" "+nt.applyToPointStringified(st[0][0],st[0][1]),at+="z"),at},SVGElementsRenderer=function(){var et=new Matrix,_=new Matrix,_e={createRenderFunction:tt};function tt(lt){switch(lt.ty){case"fl":return st;case"gf":return at;case"gs":return ot;case"st":return At;case"sh":case"el":case"rc":case"sr":return rt;case"tr":return nt;case"no":return it;default:return null}}function nt(lt,gt,ct){(ct||gt.transform.op._mdf)&&gt.transform.container.setAttribute("opacity",gt.transform.op.v),(ct||gt.transform.mProps._mdf)&&gt.transform.container.setAttribute("transform",gt.transform.mProps.v.to2dCSS())}function it(){}function rt(lt,gt,ct){var dt,ht,mt,Ct,ft,pt,Vt=gt.styles.length,yt=gt.lvl,Gt,Bt,vt,wt;for(pt=0;pt<Vt;pt+=1){if(Ct=gt.sh._mdf||ct,gt.styles[pt].lvl<yt){for(Bt=_.reset(),vt=yt-gt.styles[pt].lvl,wt=gt.transformers.length-1;!Ct&&vt>0;)Ct=gt.transformers[wt].mProps._mdf||Ct,vt-=1,wt-=1;if(Ct)for(vt=yt-gt.styles[pt].lvl,wt=gt.transformers.length-1;vt>0;)Bt.multiply(gt.transformers[wt].mProps.v),vt-=1,wt-=1}else Bt=et;if(Gt=gt.sh.paths,ht=Gt._length,Ct){for(mt="",dt=0;dt<ht;dt+=1)ft=Gt.shapes[dt],ft&&ft._length&&(mt+=buildShapeString(ft,ft._length,ft.c,Bt));gt.caches[pt]=mt}else mt=gt.caches[pt];gt.styles[pt].d+=lt.hd===!0?"":mt,gt.styles[pt]._mdf=Ct||gt.styles[pt]._mdf}}function st(lt,gt,ct){var dt=gt.style;(gt.c._mdf||ct)&&dt.pElem.setAttribute("fill","rgb("+bmFloor(gt.c.v[0])+","+bmFloor(gt.c.v[1])+","+bmFloor(gt.c.v[2])+")"),(gt.o._mdf||ct)&&dt.pElem.setAttribute("fill-opacity",gt.o.v)}function ot(lt,gt,ct){at(lt,gt,ct),At(lt,gt,ct)}function at(lt,gt,ct){var dt=gt.gf,ht=gt.g._hasOpacity,mt=gt.s.v,Ct=gt.e.v;if(gt.o._mdf||ct){var ft=lt.ty==="gf"?"fill-opacity":"stroke-opacity";gt.style.pElem.setAttribute(ft,gt.o.v)}if(gt.s._mdf||ct){var pt=lt.t===1?"x1":"cx",Vt=pt==="x1"?"y1":"cy";dt.setAttribute(pt,mt[0]),dt.setAttribute(Vt,mt[1]),ht&&!gt.g._collapsable&&(gt.of.setAttribute(pt,mt[0]),gt.of.setAttribute(Vt,mt[1]))}var yt,Gt,Bt,vt;if(gt.g._cmdf||ct){yt=gt.cst;var wt=gt.g.c;for(Bt=yt.length,Gt=0;Gt<Bt;Gt+=1)vt=yt[Gt],vt.setAttribute("offset",wt[Gt*4]+"%"),vt.setAttribute("stop-color","rgb("+wt[Gt*4+1]+","+wt[Gt*4+2]+","+wt[Gt*4+3]+")")}if(ht&&(gt.g._omdf||ct)){var Mt=gt.g.o;for(gt.g._collapsable?yt=gt.cst:yt=gt.ost,Bt=yt.length,Gt=0;Gt<Bt;Gt+=1)vt=yt[Gt],gt.g._collapsable||vt.setAttribute("offset",Mt[Gt*2]+"%"),vt.setAttribute("stop-opacity",Mt[Gt*2+1])}if(lt.t===1)(gt.e._mdf||ct)&&(dt.setAttribute("x2",Ct[0]),dt.setAttribute("y2",Ct[1]),ht&&!gt.g._collapsable&&(gt.of.setAttribute("x2",Ct[0]),gt.of.setAttribute("y2",Ct[1])));else{var kt;if((gt.s._mdf||gt.e._mdf||ct)&&(kt=Math.sqrt(Math.pow(mt[0]-Ct[0],2)+Math.pow(mt[1]-Ct[1],2)),dt.setAttribute("r",kt),ht&&!gt.g._collapsable&&gt.of.setAttribute("r",kt)),gt.e._mdf||gt.h._mdf||gt.a._mdf||ct){kt||(kt=Math.sqrt(Math.pow(mt[0]-Ct[0],2)+Math.pow(mt[1]-Ct[1],2)));var Nt=Math.atan2(Ct[1]-mt[1],Ct[0]-mt[0]),Yt=gt.h.v;Yt>=1?Yt=.99:Yt<=-1&&(Yt=-.99);var Lt=kt*Yt,Xt=Math.cos(Nt+gt.a.v)*Lt+mt[0],_t=Math.sin(Nt+gt.a.v)*Lt+mt[1];dt.setAttribute("fx",Xt),dt.setAttribute("fy",_t),ht&&!gt.g._collapsable&&(gt.of.setAttribute("fx",Xt),gt.of.setAttribute("fy",_t))}}}function At(lt,gt,ct){var dt=gt.style,ht=gt.d;ht&&(ht._mdf||ct)&&ht.dashStr&&(dt.pElem.setAttribute("stroke-dasharray",ht.dashStr),dt.pElem.setAttribute("stroke-dashoffset",ht.dashoffset[0])),gt.c&&(gt.c._mdf||ct)&&dt.pElem.setAttribute("stroke","rgb("+bmFloor(gt.c.v[0])+","+bmFloor(gt.c.v[1])+","+bmFloor(gt.c.v[2])+")"),(gt.o._mdf||ct)&&dt.pElem.setAttribute("stroke-opacity",gt.o.v),(gt.w._mdf||ct)&&(dt.pElem.setAttribute("stroke-width",gt.w.v),dt.msElem&&dt.msElem.setAttribute("stroke-width",gt.w.v))}return _e}();function SVGShapeElement(et,_,_e){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(et,_,_e),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var et,_=this.shapes.length,_e,tt,nt=this.stylesList.length,it,rt=[],st=!1;for(tt=0;tt<nt;tt+=1){for(it=this.stylesList[tt],st=!1,rt.length=0,et=0;et<_;et+=1)_e=this.shapes[et],_e.styles.indexOf(it)!==-1&&(rt.push(_e),st=_e._isAnimated||st);rt.length>1&&st&&this.setShapesAsAnimated(rt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(et){var _,_e=et.length;for(_=0;_<_e;_+=1)et[_].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(et,_){var _e,tt=new SVGStyleData(et,_),nt=tt.pElem;if(et.ty==="st")_e=new SVGStrokeStyleData(this,et,tt);else if(et.ty==="fl")_e=new SVGFillStyleData(this,et,tt);else if(et.ty==="gf"||et.ty==="gs"){var it=et.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;_e=new it(this,et,tt),this.globalData.defs.appendChild(_e.gf),_e.maskId&&(this.globalData.defs.appendChild(_e.ms),this.globalData.defs.appendChild(_e.of),nt.setAttribute("mask","url("+getLocationHref()+"#"+_e.maskId+")"))}else et.ty==="no"&&(_e=new SVGNoStyleData(this,et,tt));return(et.ty==="st"||et.ty==="gs")&&(nt.setAttribute("stroke-linecap",lineCapEnum[et.lc||2]),nt.setAttribute("stroke-linejoin",lineJoinEnum[et.lj||2]),nt.setAttribute("fill-opacity","0"),et.lj===1&&nt.setAttribute("stroke-miterlimit",et.ml)),et.r===2&&nt.setAttribute("fill-rule","evenodd"),et.ln&&nt.setAttribute("id",et.ln),et.cl&&nt.setAttribute("class",et.cl),et.bm&&(nt.style["mix-blend-mode"]=getBlendMode(et.bm)),this.stylesList.push(tt),this.addToAnimatedContents(et,_e),_e},SVGShapeElement.prototype.createGroupElement=function(et){var _=new ShapeGroupData;return et.ln&&_.gr.setAttribute("id",et.ln),et.cl&&_.gr.setAttribute("class",et.cl),et.bm&&(_.gr.style["mix-blend-mode"]=getBlendMode(et.bm)),_},SVGShapeElement.prototype.createTransformElement=function(et,_){var _e=TransformPropertyFactory.getTransformProperty(this,et,this),tt=new SVGTransformData(_e,_e.o,_);return this.addToAnimatedContents(et,tt),tt},SVGShapeElement.prototype.createShapeElement=function(et,_,_e){var tt=4;et.ty==="rc"?tt=5:et.ty==="el"?tt=6:et.ty==="sr"&&(tt=7);var nt=ShapePropertyFactory.getShapeProp(this,et,tt,this),it=new SVGShapeData(_,_e,nt);return this.shapes.push(it),this.addShapeToModifiers(it),this.addToAnimatedContents(et,it),it},SVGShapeElement.prototype.addToAnimatedContents=function(et,_){for(var _e=0,tt=this.animatedContents.length;_e<tt;){if(this.animatedContents[_e].element===_)return;_e+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(et),element:_,data:et})},SVGShapeElement.prototype.setElementStyles=function(et){var _=et.styles,_e,tt=this.stylesList.length;for(_e=0;_e<tt;_e+=1)this.stylesList[_e].closed||_.push(this.stylesList[_e])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var et,_=this.itemsData.length;for(et=0;et<_;et+=1)this.prevViewData[et]=this.itemsData[et];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),_=this.dynamicProperties.length,et=0;et<_;et+=1)this.dynamicProperties[et].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(et,_,_e,tt,nt,it,rt){var st=[].concat(it),ot,at=et.length-1,At,lt,gt=[],ct=[],dt,ht,mt;for(ot=at;ot>=0;ot-=1){if(mt=this.searchProcessedElement(et[ot]),mt?_[ot]=_e[mt-1]:et[ot]._render=rt,et[ot].ty==="fl"||et[ot].ty==="st"||et[ot].ty==="gf"||et[ot].ty==="gs"||et[ot].ty==="no")mt?_[ot].style.closed=!1:_[ot]=this.createStyleElement(et[ot],nt),et[ot]._render&&_[ot].style.pElem.parentNode!==tt&&tt.appendChild(_[ot].style.pElem),gt.push(_[ot].style);else if(et[ot].ty==="gr"){if(!mt)_[ot]=this.createGroupElement(et[ot]);else for(lt=_[ot].it.length,At=0;At<lt;At+=1)_[ot].prevViewData[At]=_[ot].it[At];this.searchShapes(et[ot].it,_[ot].it,_[ot].prevViewData,_[ot].gr,nt+1,st,rt),et[ot]._render&&_[ot].gr.parentNode!==tt&&tt.appendChild(_[ot].gr)}else et[ot].ty==="tr"?(mt||(_[ot]=this.createTransformElement(et[ot],tt)),dt=_[ot].transform,st.push(dt)):et[ot].ty==="sh"||et[ot].ty==="rc"||et[ot].ty==="el"||et[ot].ty==="sr"?(mt||(_[ot]=this.createShapeElement(et[ot],st,nt)),this.setElementStyles(_[ot])):et[ot].ty==="tm"||et[ot].ty==="rd"||et[ot].ty==="ms"||et[ot].ty==="pb"||et[ot].ty==="zz"||et[ot].ty==="op"?(mt?(ht=_[ot],ht.closed=!1):(ht=ShapeModifiers.getModifier(et[ot].ty),ht.init(this,et[ot]),_[ot]=ht,this.shapeModifiers.push(ht)),ct.push(ht)):et[ot].ty==="rp"&&(mt?(ht=_[ot],ht.closed=!0):(ht=ShapeModifiers.getModifier(et[ot].ty),_[ot]=ht,ht.init(this,et,ot,_),this.shapeModifiers.push(ht),rt=!1),ct.push(ht));this.addProcessedElement(et[ot],ot+1)}for(at=gt.length,ot=0;ot<at;ot+=1)gt[ot].closed=!0;for(at=ct.length,ot=0;ot<at;ot+=1)ct[ot].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var et,_=this.stylesList.length;for(et=0;et<_;et+=1)this.stylesList[et].reset();for(this.renderShape(),et=0;et<_;et+=1)(this.stylesList[et]._mdf||this._isFirstFrame)&&(this.stylesList[et].msElem&&(this.stylesList[et].msElem.setAttribute("d",this.stylesList[et].d),this.stylesList[et].d="M0 0"+this.stylesList[et].d),this.stylesList[et].pElem.setAttribute("d",this.stylesList[et].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var et,_=this.animatedContents.length,_e;for(et=0;et<_;et+=1)_e=this.animatedContents[et],(this._isFirstFrame||_e.element._isAnimated)&&_e.data!==!0&&_e.fn(_e.data,_e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(et,_,_e,tt,nt,it){this.o=et,this.sw=_,this.sc=_e,this.fc=tt,this.m=nt,this.p=it,this._mdf={o:!0,sw:!!_,sc:!!_e,fc:!!tt,m:!0,p:!0}}LetterProps.prototype.update=function(et,_,_e,tt,nt,it){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var rt=!1;return this.o!==et&&(this.o=et,this._mdf.o=!0,rt=!0),this.sw!==_&&(this.sw=_,this._mdf.sw=!0,rt=!0),this.sc!==_e&&(this.sc=_e,this._mdf.sc=!0,rt=!0),this.fc!==tt&&(this.fc=tt,this._mdf.fc=!0,rt=!0),this.m!==nt&&(this.m=nt,this._mdf.m=!0,rt=!0),it.length&&(this.p[0]!==it[0]||this.p[1]!==it[1]||this.p[4]!==it[4]||this.p[5]!==it[5]||this.p[12]!==it[12]||this.p[13]!==it[13])&&(this.p=it,this._mdf.p=!0,rt=!0),rt};function TextProperty(et,_){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,_.d&&_.d.sid&&(_.d=et.globalData.slotManager.getProp(_.d)),this.data=_,this.elem=et,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(et,_){for(var _e in _)Object.prototype.hasOwnProperty.call(_,_e)&&(et[_e]=_[_e]);return et},TextProperty.prototype.setCurrentData=function(et){et.__complete||this.completeTextData(et),this.currentData=et,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(et){this.effectsSequence.push(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(et){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!et)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var _=this.currentData,_e=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var tt,nt=this.effectsSequence.length,it=et||this.data.d.k[this.keysIndex].s;for(tt=0;tt<nt;tt+=1)_e!==this.keysIndex?it=this.effectsSequence[tt](it,it.t):it=this.effectsSequence[tt](this.currentData,it.t);_!==it&&this.setCurrentData(it),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var et=this.data.d.k,_=this.elem.comp.renderedFrame,_e=0,tt=et.length;_e<=tt-1&&!(_e===tt-1||et[_e+1].t>_);)_e+=1;return this.keysIndex!==_e&&(this.keysIndex=_e),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(et){for(var _=[],_e=0,tt=et.length,nt,it,rt=!1,st=!1,ot="";_e<tt;)rt=st,st=!1,nt=et.charCodeAt(_e),ot=et.charAt(_e),FontManager.isCombinedCharacter(nt)?rt=!0:nt>=55296&&nt<=56319?FontManager.isRegionalFlag(et,_e)?ot=et.substr(_e,14):(it=et.charCodeAt(_e+1),it>=56320&&it<=57343&&(FontManager.isModifier(nt,it)?(ot=et.substr(_e,2),rt=!0):FontManager.isFlagEmoji(et.substr(_e,4))?ot=et.substr(_e,4):ot=et.substr(_e,2))):nt>56319?(it=et.charCodeAt(_e+1),FontManager.isVariationSelector(nt)&&(rt=!0)):FontManager.isZeroWidthJoiner(nt)&&(rt=!0,st=!0),rt?(_[_.length-1]+=ot,rt=!1):_.push(ot),_e+=ot.length;return _},TextProperty.prototype.completeTextData=function(et){et.__complete=!0;var _=this.elem.globalData.fontManager,_e=this.data,tt=[],nt,it,rt,st=0,ot,at=_e.m.g,At=0,lt=0,gt=0,ct=[],dt=0,ht=0,mt,Ct,ft=_.getFontByName(et.f),pt,Vt=0,yt=getFontProperties(ft);et.fWeight=yt.weight,et.fStyle=yt.style,et.finalSize=et.s,et.finalText=this.buildFinalText(et.t),it=et.finalText.length,et.finalLineHeight=et.lh;var Gt=et.tr/1e3*et.finalSize,Bt;if(et.sz)for(var vt=!0,wt=et.sz[0],Mt=et.sz[1],kt,Nt;vt;){Nt=this.buildFinalText(et.t),kt=0,dt=0,it=Nt.length,Gt=et.tr/1e3*et.finalSize;var Yt=-1;for(nt=0;nt<it;nt+=1)Bt=Nt[nt].charCodeAt(0),rt=!1,Nt[nt]===" "?Yt=nt:(Bt===13||Bt===3)&&(dt=0,rt=!0,kt+=et.finalLineHeight||et.finalSize*1.2),_.chars?(pt=_.getCharData(Nt[nt],ft.fStyle,ft.fFamily),Vt=rt?0:pt.w*et.finalSize/100):Vt=_.measureText(Nt[nt],et.f,et.finalSize),dt+Vt>wt&&Nt[nt]!==" "?(Yt===-1?it+=1:nt=Yt,kt+=et.finalLineHeight||et.finalSize*1.2,Nt.splice(nt,Yt===nt?1:0,"\r"),Yt=-1,dt=0):(dt+=Vt,dt+=Gt);kt+=ft.ascent*et.finalSize/100,this.canResize&&et.finalSize>this.minimumFontSize&&Mt<kt?(et.finalSize-=1,et.finalLineHeight=et.finalSize*et.lh/et.s):(et.finalText=Nt,it=et.finalText.length,vt=!1)}dt=-Gt,Vt=0;var Lt=0,Xt;for(nt=0;nt<it;nt+=1)if(rt=!1,Xt=et.finalText[nt],Bt=Xt.charCodeAt(0),Bt===13||Bt===3?(Lt=0,ct.push(dt),ht=dt>ht?dt:ht,dt=-2*Gt,ot="",rt=!0,gt+=1):ot=Xt,_.chars?(pt=_.getCharData(Xt,ft.fStyle,_.getFontByName(et.f).fFamily),Vt=rt?0:pt.w*et.finalSize/100):Vt=_.measureText(ot,et.f,et.finalSize),Xt===" "?Lt+=Vt+Gt:(dt+=Vt+Gt+Lt,Lt=0),tt.push({l:Vt,an:Vt,add:At,n:rt,anIndexes:[],val:ot,line:gt,animatorJustifyOffset:0}),at==2){if(At+=Vt,ot===""||ot===" "||nt===it-1){for((ot===""||ot===" ")&&(At-=Vt);lt<=nt;)tt[lt].an=At,tt[lt].ind=st,tt[lt].extra=Vt,lt+=1;st+=1,At=0}}else if(at==3){if(At+=Vt,ot===""||nt===it-1){for(ot===""&&(At-=Vt);lt<=nt;)tt[lt].an=At,tt[lt].ind=st,tt[lt].extra=Vt,lt+=1;At=0,st+=1}}else tt[st].ind=st,tt[st].extra=0,st+=1;if(et.l=tt,ht=dt>ht?dt:ht,ct.push(dt),et.sz)et.boxWidth=et.sz[0],et.justifyOffset=0;else switch(et.boxWidth=ht,et.j){case 1:et.justifyOffset=-et.boxWidth;break;case 2:et.justifyOffset=-et.boxWidth/2;break;default:et.justifyOffset=0}et.lineWidths=ct;var _t=_e.a,Tt,St;Ct=_t.length;var Zt,Et,Wt=[];for(mt=0;mt<Ct;mt+=1){for(Tt=_t[mt],Tt.a.sc&&(et.strokeColorAnim=!0),Tt.a.sw&&(et.strokeWidthAnim=!0),(Tt.a.fc||Tt.a.fh||Tt.a.fs||Tt.a.fb)&&(et.fillColorAnim=!0),Et=0,Zt=Tt.s.b,nt=0;nt<it;nt+=1)St=tt[nt],St.anIndexes[mt]=Et,(Zt==1&&St.val!==""||Zt==2&&St.val!==""&&St.val!==" "||Zt==3&&(St.n||St.val==" "||nt==it-1)||Zt==4&&(St.n||nt==it-1))&&(Tt.s.rn===1&&Wt.push(Et),Et+=1);_e.a[mt].s.totalChars=Et;var Ht=-1,zt;if(Tt.s.rn===1)for(nt=0;nt<it;nt+=1)St=tt[nt],Ht!=St.anIndexes[mt]&&(Ht=St.anIndexes[mt],zt=Wt.splice(Math.floor(Math.random()*Wt.length),1)[0]),St.anIndexes[mt]=zt}et.yOffset=et.finalLineHeight||et.finalSize*1.2,et.ls=et.ls||0,et.ascent=ft.ascent*et.finalSize/100},TextProperty.prototype.updateDocumentData=function(et,_){_=_===void 0?this.keysIndex:_;var _e=this.copyData({},this.data.d.k[_].s);_e=this.copyData(_e,et),this.data.d.k[_].s=_e,this.recalculate(_),this.setCurrentData(_e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(et){var _=this.data.d.k[et].s;_.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(_)},TextProperty.prototype.canResizeFont=function(et){this.canResize=et,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(et){this.minimumFontSize=Math.floor(et)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var et=Math.max,_=Math.min,_e=Math.floor;function tt(it,rt){this._currentTextLength=-1,this.k=!1,this.data=rt,this.elem=it,this.comp=it.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(it),this.s=PropertyFactory.getProp(it,rt.s||{k:0},0,0,this),"e"in rt?this.e=PropertyFactory.getProp(it,rt.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(it,rt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(it,rt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(it,rt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(it,rt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(it,rt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}tt.prototype={getMult:function(rt){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var st=0,ot=0,at=1,At=1;this.ne.v>0?st=this.ne.v/100:ot=-this.ne.v/100,this.xe.v>0?at=1-this.xe.v/100:At=1+this.xe.v/100;var lt=BezierFactory.getBezierEasing(st,ot,at,At).get,gt=0,ct=this.finalS,dt=this.finalE,ht=this.data.sh;if(ht===2)dt===ct?gt=rt>=dt?1:0:gt=et(0,_(.5/(dt-ct)+(rt-ct)/(dt-ct),1)),gt=lt(gt);else if(ht===3)dt===ct?gt=rt>=dt?0:1:gt=1-et(0,_(.5/(dt-ct)+(rt-ct)/(dt-ct),1)),gt=lt(gt);else if(ht===4)dt===ct?gt=0:(gt=et(0,_(.5/(dt-ct)+(rt-ct)/(dt-ct),1)),gt<.5?gt*=2:gt=1-2*(gt-.5)),gt=lt(gt);else if(ht===5){if(dt===ct)gt=0;else{var mt=dt-ct;rt=_(et(0,rt+.5-ct),dt-ct);var Ct=-mt/2+rt,ft=mt/2;gt=Math.sqrt(1-Ct*Ct/(ft*ft))}gt=lt(gt)}else ht===6?(dt===ct?gt=0:(rt=_(et(0,rt+.5-ct),dt-ct),gt=(1+Math.cos(Math.PI+Math.PI*2*rt/(dt-ct)))/2),gt=lt(gt)):(rt>=_e(ct)&&(rt-ct<0?gt=et(0,_(_(dt,1)-(ct-rt),1)):gt=et(0,_(dt-rt,1))),gt=lt(gt));if(this.sm.v!==100){var pt=this.sm.v*.01;pt===0&&(pt=1e-8);var Vt=.5-pt*.5;gt<Vt?gt=0:(gt=(gt-Vt)/pt,gt>1&&(gt=1))}return gt*this.a.v},getValue:function(rt){this.iterateDynamicProperties(),this._mdf=rt||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,rt&&this.data.r===2&&(this.e.v=this._currentTextLength);var st=this.data.r===2?1:100/this.data.totalChars,ot=this.o.v/st,at=this.s.v/st+ot,At=this.e.v/st+ot;if(at>At){var lt=at;at=At,At=lt}this.finalS=at,this.finalE=At}},extendPrototype([DynamicPropertyContainer],tt);function nt(it,rt,st){return new tt(it,rt)}return{getTextSelectorProp:nt}}();function TextAnimatorDataProperty(et,_,_e){var tt={propType:!1},nt=PropertyFactory.getProp,it=_.a;this.a={r:it.r?nt(et,it.r,0,degToRads,_e):tt,rx:it.rx?nt(et,it.rx,0,degToRads,_e):tt,ry:it.ry?nt(et,it.ry,0,degToRads,_e):tt,sk:it.sk?nt(et,it.sk,0,degToRads,_e):tt,sa:it.sa?nt(et,it.sa,0,degToRads,_e):tt,s:it.s?nt(et,it.s,1,.01,_e):tt,a:it.a?nt(et,it.a,1,0,_e):tt,o:it.o?nt(et,it.o,0,.01,_e):tt,p:it.p?nt(et,it.p,1,0,_e):tt,sw:it.sw?nt(et,it.sw,0,0,_e):tt,sc:it.sc?nt(et,it.sc,1,0,_e):tt,fc:it.fc?nt(et,it.fc,1,0,_e):tt,fh:it.fh?nt(et,it.fh,0,0,_e):tt,fs:it.fs?nt(et,it.fs,0,.01,_e):tt,fb:it.fb?nt(et,it.fb,0,.01,_e):tt,t:it.t?nt(et,it.t,0,0,_e):tt},this.s=TextSelectorProp.getTextSelectorProp(et,_.s,_e),this.s.t=_.s.t}function TextAnimatorProperty(et,_,_e){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=et,this._renderType=_,this._elem=_e,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(_e)}TextAnimatorProperty.prototype.searchProperties=function(){var et,_=this._textData.a.length,_e,tt=PropertyFactory.getProp;for(et=0;et<_;et+=1)_e=this._textData.a[et],this._animatorsData[et]=new TextAnimatorDataProperty(this._elem,_e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:tt(this._elem,this._textData.p.a,0,0,this),f:tt(this._elem,this._textData.p.f,0,0,this),l:tt(this._elem,this._textData.p.l,0,0,this),r:tt(this._elem,this._textData.p.r,0,0,this),p:tt(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=tt(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(et,_){if(this.lettersChangedFlag=_,!(!this._mdf&&!this._isFirstFrame&&!_&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var _e=this._moreOptions.alignment.v,tt=this._animatorsData,nt=this._textData,it=this.mHelper,rt=this._renderType,st=this.renderedLetters.length,ot,at,At,lt,gt=et.l,ct,dt,ht,mt,Ct,ft,pt,Vt,yt,Gt,Bt,vt,wt,Mt,kt;if(this._hasMaskedPath){if(kt=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Nt=kt.v;this._pathData.r.v&&(Nt=Nt.reverse()),ct={tLength:0,segments:[]},lt=Nt._length-1;var Yt;for(vt=0,At=0;At<lt;At+=1)Yt=bez.buildBezierData(Nt.v[At],Nt.v[At+1],[Nt.o[At][0]-Nt.v[At][0],Nt.o[At][1]-Nt.v[At][1]],[Nt.i[At+1][0]-Nt.v[At+1][0],Nt.i[At+1][1]-Nt.v[At+1][1]]),ct.tLength+=Yt.segmentLength,ct.segments.push(Yt),vt+=Yt.segmentLength;At=lt,kt.v.c&&(Yt=bez.buildBezierData(Nt.v[At],Nt.v[0],[Nt.o[At][0]-Nt.v[At][0],Nt.o[At][1]-Nt.v[At][1]],[Nt.i[0][0]-Nt.v[0][0],Nt.i[0][1]-Nt.v[0][1]]),ct.tLength+=Yt.segmentLength,ct.segments.push(Yt),vt+=Yt.segmentLength),this._pathData.pi=ct}if(ct=this._pathData.pi,dt=this._pathData.f.v,pt=0,ft=1,mt=0,Ct=!0,Gt=ct.segments,dt<0&&kt.v.c)for(ct.tLength<Math.abs(dt)&&(dt=-Math.abs(dt)%ct.tLength),pt=Gt.length-1,yt=Gt[pt].points,ft=yt.length-1;dt<0;)dt+=yt[ft].partialLength,ft-=1,ft<0&&(pt-=1,yt=Gt[pt].points,ft=yt.length-1);yt=Gt[pt].points,Vt=yt[ft-1],ht=yt[ft],Bt=ht.partialLength}lt=gt.length,ot=0,at=0;var Lt=et.finalSize*1.2*.714,Xt=!0,_t,Tt,St,Zt,Et;Zt=tt.length;var Wt,Ht=-1,zt,Pt,Ot,Jt=dt,rn=pt,sn=ft,Vn=-1,dn,gn,$t,tn,nn,Bn,Gn,kn,pn="",Rn=this.defaultPropsArray,Mn;if(et.j===2||et.j===1){var In=0,Dt=0,Kt=et.j===2?-.5:-1,en=0,un=!0;for(At=0;At<lt;At+=1)if(gt[At].n){for(In&&(In+=Dt);en<At;)gt[en].animatorJustifyOffset=In,en+=1;In=0,un=!0}else{for(St=0;St<Zt;St+=1)_t=tt[St].a,_t.t.propType&&(un&&et.j===2&&(Dt+=_t.t.v*Kt),Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),Wt.length?In+=_t.t.v*Wt[0]*Kt:In+=_t.t.v*Wt*Kt);un=!1}for(In&&(In+=Dt);en<At;)gt[en].animatorJustifyOffset=In,en+=1}for(At=0;At<lt;At+=1){if(it.reset(),dn=1,gt[At].n)ot=0,at+=et.yOffset,at+=Xt?1:0,dt=Jt,Xt=!1,this._hasMaskedPath&&(pt=rn,ft=sn,yt=Gt[pt].points,Vt=yt[ft-1],ht=yt[ft],Bt=ht.partialLength,mt=0),pn="",kn="",Bn="",Mn="",Rn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Vn!==gt[At].line){switch(et.j){case 1:dt+=vt-et.lineWidths[gt[At].line];break;case 2:dt+=(vt-et.lineWidths[gt[At].line])/2;break}Vn=gt[At].line}Ht!==gt[At].ind&&(gt[Ht]&&(dt+=gt[Ht].extra),dt+=gt[At].an/2,Ht=gt[At].ind),dt+=_e[0]*gt[At].an*.005;var Sn=0;for(St=0;St<Zt;St+=1)_t=tt[St].a,_t.p.propType&&(Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),Wt.length?Sn+=_t.p.v[0]*Wt[0]:Sn+=_t.p.v[0]*Wt),_t.a.propType&&(Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),Wt.length?Sn+=_t.a.v[0]*Wt[0]:Sn+=_t.a.v[0]*Wt);for(Ct=!0,this._pathData.a.v&&(dt=gt[0].an*.5+(vt-this._pathData.f.v-gt[0].an*.5-gt[gt.length-1].an*.5)*Ht/(lt-1),dt+=this._pathData.f.v);Ct;)mt+Bt>=dt+Sn||!yt?(wt=(dt+Sn-mt)/ht.partialLength,Pt=Vt.point[0]+(ht.point[0]-Vt.point[0])*wt,Ot=Vt.point[1]+(ht.point[1]-Vt.point[1])*wt,it.translate(-_e[0]*gt[At].an*.005,-(_e[1]*Lt)*.01),Ct=!1):yt&&(mt+=ht.partialLength,ft+=1,ft>=yt.length&&(ft=0,pt+=1,Gt[pt]?yt=Gt[pt].points:kt.v.c?(ft=0,pt=0,yt=Gt[pt].points):(mt-=ht.partialLength,yt=null)),yt&&(Vt=ht,ht=yt[ft],Bt=ht.partialLength));zt=gt[At].an/2-gt[At].add,it.translate(-zt,0,0)}else zt=gt[At].an/2-gt[At].add,it.translate(-zt,0,0),it.translate(-_e[0]*gt[At].an*.005,-_e[1]*Lt*.01,0);for(St=0;St<Zt;St+=1)_t=tt[St].a,_t.t.propType&&(Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),(ot!==0||et.j!==0)&&(this._hasMaskedPath?Wt.length?dt+=_t.t.v*Wt[0]:dt+=_t.t.v*Wt:Wt.length?ot+=_t.t.v*Wt[0]:ot+=_t.t.v*Wt));for(et.strokeWidthAnim&&($t=et.sw||0),et.strokeColorAnim&&(et.sc?gn=[et.sc[0],et.sc[1],et.sc[2]]:gn=[0,0,0]),et.fillColorAnim&&et.fc&&(tn=[et.fc[0],et.fc[1],et.fc[2]]),St=0;St<Zt;St+=1)_t=tt[St].a,_t.a.propType&&(Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),Wt.length?it.translate(-_t.a.v[0]*Wt[0],-_t.a.v[1]*Wt[1],_t.a.v[2]*Wt[2]):it.translate(-_t.a.v[0]*Wt,-_t.a.v[1]*Wt,_t.a.v[2]*Wt));for(St=0;St<Zt;St+=1)_t=tt[St].a,_t.s.propType&&(Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),Wt.length?it.scale(1+(_t.s.v[0]-1)*Wt[0],1+(_t.s.v[1]-1)*Wt[1],1):it.scale(1+(_t.s.v[0]-1)*Wt,1+(_t.s.v[1]-1)*Wt,1));for(St=0;St<Zt;St+=1){if(_t=tt[St].a,Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),_t.sk.propType&&(Wt.length?it.skewFromAxis(-_t.sk.v*Wt[0],_t.sa.v*Wt[1]):it.skewFromAxis(-_t.sk.v*Wt,_t.sa.v*Wt)),_t.r.propType&&(Wt.length?it.rotateZ(-_t.r.v*Wt[2]):it.rotateZ(-_t.r.v*Wt)),_t.ry.propType&&(Wt.length?it.rotateY(_t.ry.v*Wt[1]):it.rotateY(_t.ry.v*Wt)),_t.rx.propType&&(Wt.length?it.rotateX(_t.rx.v*Wt[0]):it.rotateX(_t.rx.v*Wt)),_t.o.propType&&(Wt.length?dn+=(_t.o.v*Wt[0]-dn)*Wt[0]:dn+=(_t.o.v*Wt-dn)*Wt),et.strokeWidthAnim&&_t.sw.propType&&(Wt.length?$t+=_t.sw.v*Wt[0]:$t+=_t.sw.v*Wt),et.strokeColorAnim&&_t.sc.propType)for(nn=0;nn<3;nn+=1)Wt.length?gn[nn]+=(_t.sc.v[nn]-gn[nn])*Wt[0]:gn[nn]+=(_t.sc.v[nn]-gn[nn])*Wt;if(et.fillColorAnim&&et.fc){if(_t.fc.propType)for(nn=0;nn<3;nn+=1)Wt.length?tn[nn]+=(_t.fc.v[nn]-tn[nn])*Wt[0]:tn[nn]+=(_t.fc.v[nn]-tn[nn])*Wt;_t.fh.propType&&(Wt.length?tn=addHueToRGB(tn,_t.fh.v*Wt[0]):tn=addHueToRGB(tn,_t.fh.v*Wt)),_t.fs.propType&&(Wt.length?tn=addSaturationToRGB(tn,_t.fs.v*Wt[0]):tn=addSaturationToRGB(tn,_t.fs.v*Wt)),_t.fb.propType&&(Wt.length?tn=addBrightnessToRGB(tn,_t.fb.v*Wt[0]):tn=addBrightnessToRGB(tn,_t.fb.v*Wt))}}for(St=0;St<Zt;St+=1)_t=tt[St].a,_t.p.propType&&(Tt=tt[St].s,Wt=Tt.getMult(gt[At].anIndexes[St],nt.a[St].s.totalChars),this._hasMaskedPath?Wt.length?it.translate(0,_t.p.v[1]*Wt[0],-_t.p.v[2]*Wt[1]):it.translate(0,_t.p.v[1]*Wt,-_t.p.v[2]*Wt):Wt.length?it.translate(_t.p.v[0]*Wt[0],_t.p.v[1]*Wt[1],-_t.p.v[2]*Wt[2]):it.translate(_t.p.v[0]*Wt,_t.p.v[1]*Wt,-_t.p.v[2]*Wt));if(et.strokeWidthAnim&&(Bn=$t<0?0:$t),et.strokeColorAnim&&(Gn="rgb("+Math.round(gn[0]*255)+","+Math.round(gn[1]*255)+","+Math.round(gn[2]*255)+")"),et.fillColorAnim&&et.fc&&(kn="rgb("+Math.round(tn[0]*255)+","+Math.round(tn[1]*255)+","+Math.round(tn[2]*255)+")"),this._hasMaskedPath){if(it.translate(0,-et.ls),it.translate(0,_e[1]*Lt*.01+at,0),this._pathData.p.v){Mt=(ht.point[1]-Vt.point[1])/(ht.point[0]-Vt.point[0]);var wn=Math.atan(Mt)*180/Math.PI;ht.point[0]<Vt.point[0]&&(wn+=180),it.rotate(-wn*Math.PI/180)}it.translate(Pt,Ot,0),dt-=_e[0]*gt[At].an*.005,gt[At+1]&&Ht!==gt[At+1].ind&&(dt+=gt[At].an/2,dt+=et.tr*.001*et.finalSize)}else{switch(it.translate(ot,at,0),et.ps&&it.translate(et.ps[0],et.ps[1]+et.ascent,0),et.j){case 1:it.translate(gt[At].animatorJustifyOffset+et.justifyOffset+(et.boxWidth-et.lineWidths[gt[At].line]),0,0);break;case 2:it.translate(gt[At].animatorJustifyOffset+et.justifyOffset+(et.boxWidth-et.lineWidths[gt[At].line])/2,0,0);break}it.translate(0,-et.ls),it.translate(zt,0,0),it.translate(_e[0]*gt[At].an*.005,_e[1]*Lt*.01,0),ot+=gt[At].l+et.tr*.001*et.finalSize}rt==="html"?pn=it.toCSS():rt==="svg"?pn=it.to2dCSS():Rn=[it.props[0],it.props[1],it.props[2],it.props[3],it.props[4],it.props[5],it.props[6],it.props[7],it.props[8],it.props[9],it.props[10],it.props[11],it.props[12],it.props[13],it.props[14],it.props[15]],Mn=dn}st<=At?(Et=new LetterProps(Mn,Bn,Gn,kn,pn,Rn),this.renderedLetters.push(Et),st+=1,this.lettersChangedFlag=!0):(Et=this.renderedLetters[At],this.lettersChangedFlag=Et.update(Mn,Bn,Gn,kn,pn,Rn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(et,_,_e){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(et,_,_e),this.textProperty=new TextProperty(this,et.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(et.t,this.renderType,this),this.initTransform(et,_,_e),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange)},ITextElement.prototype.createPathShape=function(et,_){var _e,tt=_.length,nt,it="";for(_e=0;_e<tt;_e+=1)_[_e].ty==="sh"&&(nt=_[_e].ks.k,it+=buildShapeString(nt,nt.i.length,!0,et));return it},ITextElement.prototype.updateDocumentData=function(et,_){this.textProperty.updateDocumentData(et,_)},ITextElement.prototype.canResizeFont=function(et){this.textProperty.canResizeFont(et)},ITextElement.prototype.setMinimumFontSize=function(et){this.textProperty.setMinimumFontSize(et)},ITextElement.prototype.applyTextPropertiesToMatrix=function(et,_,_e,tt,nt){switch(et.ps&&_.translate(et.ps[0],et.ps[1]+et.ascent,0),_.translate(0,-et.ls,0),et.j){case 1:_.translate(et.justifyOffset+(et.boxWidth-et.lineWidths[_e]),0,0);break;case 2:_.translate(et.justifyOffset+(et.boxWidth-et.lineWidths[_e])/2,0,0);break}_.translate(tt,nt,0)},ITextElement.prototype.buildColor=function(et){return"rgb("+Math.round(et[0]*255)+","+Math.round(et[1]*255)+","+Math.round(et[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(et,_,_e){this.textSpans=[],this.renderType="svg",this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(et){for(var _=0,_e=et.length,tt=[],nt="";_<_e;)et[_]===String.fromCharCode(13)||et[_]===String.fromCharCode(3)?(tt.push(nt),nt=""):nt+=et[_],_+=1;return tt.push(nt),tt},SVGTextLottieElement.prototype.buildShapeData=function(et,_){if(et.shapes&&et.shapes.length){var _e=et.shapes[0];if(_e.it){var tt=_e.it[_e.it.length-1];tt.s&&(tt.s.k[0]=_,tt.s.k[1]=_)}}return et},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var et,_,_e=this.textProperty.currentData;this.renderedLetters=createSizedArray(_e?_e.l.length:0),_e.fc?this.layerElement.setAttribute("fill",this.buildColor(_e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),_e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(_e.sc)),this.layerElement.setAttribute("stroke-width",_e.sw)),this.layerElement.setAttribute("font-size",_e.finalSize);var tt=this.globalData.fontManager.getFontByName(_e.f);if(tt.fClass)this.layerElement.setAttribute("class",tt.fClass);else{this.layerElement.setAttribute("font-family",tt.fFamily);var nt=_e.fWeight,it=_e.fStyle;this.layerElement.setAttribute("font-style",it),this.layerElement.setAttribute("font-weight",nt)}this.layerElement.setAttribute("aria-label",_e.t);var rt=_e.l||[],st=!!this.globalData.fontManager.chars;_=rt.length;var ot,at=this.mHelper,At="",lt=this.data.singleShape,gt=0,ct=0,dt=!0,ht=_e.tr*.001*_e.finalSize;if(lt&&!st&&!_e.sz){var mt=this.textContainer,Ct="start";switch(_e.j){case 1:Ct="end";break;case 2:Ct="middle";break;default:Ct="start";break}mt.setAttribute("text-anchor",Ct),mt.setAttribute("letter-spacing",ht);var ft=this.buildTextContents(_e.finalText);for(_=ft.length,ct=_e.ps?_e.ps[1]+_e.ascent:0,et=0;et<_;et+=1)ot=this.textSpans[et].span||createNS("tspan"),ot.textContent=ft[et],ot.setAttribute("x",0),ot.setAttribute("y",ct),ot.style.display="inherit",mt.appendChild(ot),this.textSpans[et]||(this.textSpans[et]={span:null,glyph:null}),this.textSpans[et].span=ot,ct+=_e.finalLineHeight;this.layerElement.appendChild(mt)}else{var pt=this.textSpans.length,Vt;for(et=0;et<_;et+=1){if(this.textSpans[et]||(this.textSpans[et]={span:null,childSpan:null,glyph:null}),!st||!lt||et===0){if(ot=pt>et?this.textSpans[et].span:createNS(st?"g":"text"),pt<=et){if(ot.setAttribute("stroke-linecap","butt"),ot.setAttribute("stroke-linejoin","round"),ot.setAttribute("stroke-miterlimit","4"),this.textSpans[et].span=ot,st){var yt=createNS("g");ot.appendChild(yt),this.textSpans[et].childSpan=yt}this.textSpans[et].span=ot,this.layerElement.appendChild(ot)}ot.style.display="inherit"}if(at.reset(),lt&&(rt[et].n&&(gt=-ht,ct+=_e.yOffset,ct+=dt?1:0,dt=!1),this.applyTextPropertiesToMatrix(_e,at,rt[et].line,gt,ct),gt+=rt[et].l||0,gt+=ht),st){Vt=this.globalData.fontManager.getCharData(_e.finalText[et],tt.fStyle,this.globalData.fontManager.getFontByName(_e.f).fFamily);var Gt;if(Vt.t===1)Gt=new SVGCompElement(Vt.data,this.globalData,this);else{var Bt=emptyShapeData;Vt.data&&Vt.data.shapes&&(Bt=this.buildShapeData(Vt.data,_e.finalSize)),Gt=new SVGShapeElement(Bt,this.globalData,this)}if(this.textSpans[et].glyph){var vt=this.textSpans[et].glyph;this.textSpans[et].childSpan.removeChild(vt.layerElement),vt.destroy()}this.textSpans[et].glyph=Gt,Gt._debug=!0,Gt.prepareFrame(0),Gt.renderFrame(),this.textSpans[et].childSpan.appendChild(Gt.layerElement),Vt.t===1&&this.textSpans[et].childSpan.setAttribute("transform","scale("+_e.finalSize/100+","+_e.finalSize/100+")")}else lt&&ot.setAttribute("transform","translate("+at.props[12]+","+at.props[13]+")"),ot.textContent=rt[et].val,ot.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}lt&&ot&&ot.setAttribute("d",At)}for(;et<this.textSpans.length;)this.textSpans[et].span.style.display="none",et+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var et=this.layerElement.getBBox();this.bbox={top:et.y,left:et.x,width:et.width,height:et.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var et,_=this.textSpans.length,_e;for(this.renderedFrame=this.comp.renderedFrame,et=0;et<_;et+=1)_e=this.textSpans[et].glyph,_e&&(_e.prepareFrame(this.comp.renderedFrame-this.data.st),_e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var et,_,_e=this.textAnimator.renderedLetters,tt=this.textProperty.currentData.l;_=tt.length;var nt,it,rt;for(et=0;et<_;et+=1)tt[et].n||(nt=_e[et],it=this.textSpans[et].span,rt=this.textSpans[et].glyph,rt&&rt.renderFrame(),nt._mdf.m&&it.setAttribute("transform",nt.m),nt._mdf.o&&it.setAttribute("opacity",nt.o),nt._mdf.sw&&it.setAttribute("stroke-width",nt.sw),nt._mdf.sc&&it.setAttribute("stroke",nt.sc),nt._mdf.fc&&it.setAttribute("fill",nt.fc))}};function ISolidElement(et,_,_e){this.initElement(et,_,_e)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var et=createNS("rect");et.setAttribute("width",this.data.sw),et.setAttribute("height",this.data.sh),et.setAttribute("fill",this.data.sc),this.layerElement.appendChild(et)};function NullElement(et,_,_e){this.initFrame(),this.initBaseData(et,_,_e),this.initFrame(),this.initTransform(et,_,_e),this.initHierarchy()}NullElement.prototype.prepareFrame=function(et){this.prepareProperties(et,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(et){return new NullElement(et,this.globalData,this)},SVGRendererBase.prototype.createShape=function(et){return new SVGShapeElement(et,this.globalData,this)},SVGRendererBase.prototype.createText=function(et){return new SVGTextLottieElement(et,this.globalData,this)},SVGRendererBase.prototype.createImage=function(et){return new IImageElement(et,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(et){return new ISolidElement(et,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(et){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+et.w+" "+et.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",et.w),this.svgElement.setAttribute("height",et.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var _=this.globalData.defs;this.setupGlobalData(et,_),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=et;var _e=createNS("clipPath"),tt=createNS("rect");tt.setAttribute("width",et.w),tt.setAttribute("height",et.h),tt.setAttribute("x",0),tt.setAttribute("y",0);var nt=createElementID();_e.setAttribute("id",nt),_e.appendChild(tt),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+nt+")"),_.appendChild(_e),this.layers=et.layers,this.elements=createSizedArray(et.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var et,_=this.layers?this.layers.length:0;for(et=0;et<_;et+=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(et){var _=0,_e=this.layers.length;for(_=0;_<_e;_+=1)if(this.layers[_].ind===et)return _;return-1},SVGRendererBase.prototype.buildItem=function(et){var _=this.elements;if(!(_[et]||this.layers[et].ty===99)){_[et]=!0;var _e=this.createItem(this.layers[et]);if(_[et]=_e,getExpressionsPlugin()&&(this.layers[et].ty===0&&this.globalData.projectInterface.registerComposition(_e),_e.initExpressions()),this.appendElementInPos(_e,et),this.layers[et].tt){var tt="tp"in this.layers[et]?this.findIndexByInd(this.layers[et].tp):et-1;if(tt===-1)return;if(!this.elements[tt]||this.elements[tt]===!0)this.buildItem(tt),this.addPendingElement(_e);else{var nt=_[tt],it=nt.getMatte(this.layers[et].tt);_e.setMatte(it)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();if(et.checkParenting(),et.data.tt)for(var _=0,_e=this.elements.length;_<_e;){if(this.elements[_]===et){var tt="tp"in et.data?this.findIndexByInd(et.data.tp):_-1,nt=this.elements[tt],it=nt.getMatte(this.layers[_].tt);et.setMatte(it);break}_+=1}}},SVGRendererBase.prototype.renderFrame=function(et){if(!(this.renderedFrame===et||this.destroyed)){et===null?et=this.renderedFrame:this.renderedFrame=et,this.globalData.frameNum=et,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=et,this.globalData._mdf=!1;var _,_e=this.layers.length;for(this.completeLayers||this.checkLayers(et),_=_e-1;_>=0;_-=1)(this.completeLayers||this.elements[_])&&this.elements[_].prepareFrame(et-this.layers[_].st);if(this.globalData._mdf)for(_=0;_<_e;_+=1)(this.completeLayers||this.elements[_])&&this.elements[_].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(et,_){var _e=et.getBaseElement();if(_e){for(var tt=0,nt;tt<_;)this.elements[tt]&&this.elements[tt]!==!0&&this.elements[tt].getBaseElement()&&(nt=this.elements[tt].getBaseElement()),tt+=1;nt?this.layerElement.insertBefore(_e,nt):this.layerElement.appendChild(_e)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(et,_,_e){this.initFrame(),this.initBaseData(et,_,_e),this.initTransform(et,_,_e),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!_.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(et){if(this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=et/this.data.sr;else{var _=this.tm.v;_===this.data.op&&(_=this.data.op-1),this.renderedFrame=_}var _e,tt=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),_e=tt-1;_e>=0;_e-=1)(this.completeLayers||this.elements[_e])&&(this.elements[_e].prepareFrame(this.renderedFrame-this.layers[_e].st),this.elements[_e]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var et,_=this.layers.length;for(et=0;et<_;et+=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame()},ICompElement.prototype.setElements=function(et){this.elements=et},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var et,_=this.layers.length;for(et=0;et<_;et+=1)this.elements[et]&&this.elements[et].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(et,_,_e){this.layers=et.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(et,_,_e),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,_.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(et){return new SVGCompElement(et,this.globalData,this)};function SVGRenderer(et,_){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var _e="";if(_&&_.title){var tt=createNS("title"),nt=createElementID();tt.setAttribute("id",nt),tt.textContent=_.title,this.svgElement.appendChild(tt),_e+=nt}if(_&&_.description){var it=createNS("desc"),rt=createElementID();it.setAttribute("id",rt),it.textContent=_.description,this.svgElement.appendChild(it),_e+=" "+rt}_e&&this.svgElement.setAttribute("aria-labelledby",_e);var st=createNS("defs");this.svgElement.appendChild(st);var ot=createNS("g");this.svgElement.appendChild(ot),this.layerElement=ot,this.renderConfig={preserveAspectRatio:_&&_.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:_&&_.contentVisibility||"visible",progressiveLoad:_&&_.progressiveLoad||!1,hideOnTransparent:!(_&&_.hideOnTransparent===!1),viewBoxOnly:_&&_.viewBoxOnly||!1,viewBoxSize:_&&_.viewBoxSize||!1,className:_&&_.className||"",id:_&&_.id||"",focusable:_&&_.focusable,filterSize:{width:_&&_.filterSize&&_.filterSize.width||"100%",height:_&&_.filterSize&&_.filterSize.height||"100%",x:_&&_.filterSize&&_.filterSize.x||"0%",y:_&&_.filterSize&&_.filterSize.y||"0%"},width:_&&_.width,height:_&&_.height,runExpressions:!_||_.runExpressions===void 0||_.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:st,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(et){return new SVGCompElement(et,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(_){var _e,tt=_.length,nt="_";for(_e=0;_e<tt;_e+=1)nt+=_[_e].transform.key+"_";var it=this.sequences[nt];return it||(it={transforms:[].concat(_),finalTransform:new Matrix,_mdf:!1},this.sequences[nt]=it,this.sequenceList.push(it)),it},processSequence:function(_,_e){for(var tt=0,nt=_.transforms.length,it=_e;tt<nt&&!_e;){if(_.transforms[tt].transform.mProps._mdf){it=!0;break}tt+=1}if(it)for(_.finalTransform.reset(),tt=nt-1;tt>=0;tt-=1)_.finalTransform.multiply(_.transforms[tt].transform.mProps.v);_._mdf=it},processSequences:function(_){var _e,tt=this.sequenceList.length;for(_e=0;_e<tt;_e+=1)this.processSequence(this.sequenceList[_e],_)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var _="__lottie_element_luma_buffer",_e=null,tt=null,nt=null;function it(){var ot=createNS("svg"),at=createNS("filter"),At=createNS("feColorMatrix");return at.setAttribute("id",_),At.setAttribute("type","matrix"),At.setAttribute("color-interpolation-filters","sRGB"),At.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),at.appendChild(At),ot.appendChild(at),ot.setAttribute("id",_+"_svg"),featureSupport.svgLumaHidden&&(ot.style.display="none"),ot}function rt(){_e||(nt=it(),document.body.appendChild(nt),_e=createTag("canvas"),tt=_e.getContext("2d"),tt.filter="url(#"+_+")",tt.fillStyle="rgba(0,0,0,0)",tt.fillRect(0,0,1,1))}function st(ot){return _e||rt(),_e.width=ot.width,_e.height=ot.height,tt.filter="url(#"+_+")",_e}return{load:rt,get:st}};function createCanvas(et,_){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(et,_);var _e=createTag("canvas");return _e.width=et,_e.height=_,_e}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(et){var _,_e=et.data.ef?et.data.ef.length:0;this.filters=[];var tt;for(_=0;_<_e;_+=1){tt=null;var nt=et.data.ef[_].ty;if(registeredEffects[nt]){var it=registeredEffects[nt].effect;tt=new it(et.effectsManager.effectElements[_],et)}tt&&this.filters.push(tt)}this.filters.length&&et.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(et){var _,_e=this.filters.length;for(_=0;_<_e;_+=1)this.filters[_].renderFrame(et)},CVEffects.prototype.getEffects=function(et){var _,_e=this.filters.length,tt=[];for(_=0;_<_e;_+=1)this.filters[_].type===et&&tt.push(this.filters[_]);return tt};function registerEffect(et,_){registeredEffects[et]={effect:_}}function CVMaskElement(et,_){this.data=et,this.element=_,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var _e,tt=this.masksProperties.length,nt=!1;for(_e=0;_e<tt;_e+=1)this.masksProperties[_e].mode!=="n"&&(nt=!0),this.viewData[_e]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[_e],3);this.hasMasks=nt,nt&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var et=this.element.finalTransform.mat,_=this.element.canvasContext,_e,tt=this.masksProperties.length,nt,it,rt;for(_.beginPath(),_e=0;_e<tt;_e+=1)if(this.masksProperties[_e].mode!=="n"){this.masksProperties[_e].inv&&(_.moveTo(0,0),_.lineTo(this.element.globalData.compSize.w,0),_.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),_.lineTo(0,this.element.globalData.compSize.h),_.lineTo(0,0)),rt=this.viewData[_e].v,nt=et.applyToPointArray(rt.v[0][0],rt.v[0][1],0),_.moveTo(nt[0],nt[1]);var st,ot=rt._length;for(st=1;st<ot;st+=1)it=et.applyToTriplePoints(rt.o[st-1],rt.i[st],rt.v[st]),_.bezierCurveTo(it[0],it[1],it[2],it[3],it[4],it[5]);it=et.applyToTriplePoints(rt.o[st-1],rt.i[0],rt.v[0]),_.bezierCurveTo(it[0],it[1],it[2],it[3],it[4],it[5])}this.element.globalData.renderer.save(!0),_.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var _=this.globalData.canvasContext,_e=assetLoader.createCanvas(_.canvas.width,_.canvas.height);this.buffers.push(_e);var tt=assetLoader.createCanvas(_.canvas.width,_.canvas.height);this.buffers.push(tt),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var _=this.globalData;if(_.blendMode!==this.data.bm){_.blendMode=this.data.bm;var _e=getBlendMode(this.data.bm);_.canvasContext.globalCompositeOperation=_e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(_){_.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var _=this.buffers[0],_e=_.getContext("2d");this.clearCanvas(_e),_e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var _=this.buffers[1],_e=_.getContext("2d");this.clearCanvas(_e),_e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var tt=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(tt.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var nt=assetLoader.getLumaCanvas(this.canvasContext.canvas),it=nt.getContext("2d");it.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(nt,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(_,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(_){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!_)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var _e=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(_e),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(_e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(et,_,_e,tt){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var nt=4;_.ty==="rc"?nt=5:_.ty==="el"?nt=6:_.ty==="sr"&&(nt=7),this.sh=ShapePropertyFactory.getShapeProp(et,_,nt,et);var it,rt=_e.length,st;for(it=0;it<rt;it+=1)_e[it].closed||(st={transforms:tt.addTransformSequence(_e[it].transforms),trNodes:[]},this.styledShapes.push(st),_e[it].elements.push(st))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(et,_,_e){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(et,_){var _e={data:et,type:et.ty,preTransforms:this.transformsManager.addTransformSequence(_),transforms:[],elements:[],closed:et.hd===!0},tt={};if(et.ty==="fl"||et.ty==="st"?(tt.c=PropertyFactory.getProp(this,et.c,1,255,this),tt.c.k||(_e.co="rgb("+bmFloor(tt.c.v[0])+","+bmFloor(tt.c.v[1])+","+bmFloor(tt.c.v[2])+")")):(et.ty==="gf"||et.ty==="gs")&&(tt.s=PropertyFactory.getProp(this,et.s,1,null,this),tt.e=PropertyFactory.getProp(this,et.e,1,null,this),tt.h=PropertyFactory.getProp(this,et.h||{k:0},0,.01,this),tt.a=PropertyFactory.getProp(this,et.a||{k:0},0,degToRads,this),tt.g=new GradientProperty(this,et.g,this)),tt.o=PropertyFactory.getProp(this,et.o,0,.01,this),et.ty==="st"||et.ty==="gs"){if(_e.lc=lineCapEnum[et.lc||2],_e.lj=lineJoinEnum[et.lj||2],et.lj==1&&(_e.ml=et.ml),tt.w=PropertyFactory.getProp(this,et.w,0,null,this),tt.w.k||(_e.wi=tt.w.v),et.d){var nt=new DashProperty(this,et.d,"canvas",this);tt.d=nt,tt.d.k||(_e.da=tt.d.dashArray,_e.do=tt.d.dashoffset[0])}}else _e.r=et.r===2?"evenodd":"nonzero";return this.stylesList.push(_e),tt.style=_e,tt},CVShapeElement.prototype.createGroupElement=function(){var et={it:[],prevViewData:[]};return et},CVShapeElement.prototype.createTransformElement=function(et){var _={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,et.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,et,this)}};return _},CVShapeElement.prototype.createShapeElement=function(et){var _=new CVShapeData(this,et,this.stylesList,this.transformsManager);return this.shapes.push(_),this.addShapeToModifiers(_),_},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var et,_=this.itemsData.length;for(et=0;et<_;et+=1)this.prevViewData[et]=this.itemsData[et];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),_=this.dynamicProperties.length,et=0;et<_;et+=1)this.dynamicProperties[et].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(et){var _,_e=this.stylesList.length;for(_=0;_<_e;_+=1)this.stylesList[_].closed||this.stylesList[_].transforms.push(et)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var et,_=this.stylesList.length;for(et=0;et<_;et+=1)this.stylesList[et].closed||this.stylesList[et].transforms.pop()},CVShapeElement.prototype.closeStyles=function(et){var _,_e=et.length;for(_=0;_<_e;_+=1)et[_].closed=!0},CVShapeElement.prototype.searchShapes=function(et,_,_e,tt,nt){var it,rt=et.length-1,st,ot,at=[],At=[],lt,gt,ct,dt=[].concat(nt);for(it=rt;it>=0;it-=1){if(lt=this.searchProcessedElement(et[it]),lt?_[it]=_e[lt-1]:et[it]._shouldRender=tt,et[it].ty==="fl"||et[it].ty==="st"||et[it].ty==="gf"||et[it].ty==="gs")lt?_[it].style.closed=!1:_[it]=this.createStyleElement(et[it],dt),at.push(_[it].style);else if(et[it].ty==="gr"){if(!lt)_[it]=this.createGroupElement(et[it]);else for(ot=_[it].it.length,st=0;st<ot;st+=1)_[it].prevViewData[st]=_[it].it[st];this.searchShapes(et[it].it,_[it].it,_[it].prevViewData,tt,dt)}else et[it].ty==="tr"?(lt||(ct=this.createTransformElement(et[it]),_[it]=ct),dt.push(_[it]),this.addTransformToStyleList(_[it])):et[it].ty==="sh"||et[it].ty==="rc"||et[it].ty==="el"||et[it].ty==="sr"?lt||(_[it]=this.createShapeElement(et[it])):et[it].ty==="tm"||et[it].ty==="rd"||et[it].ty==="pb"||et[it].ty==="zz"||et[it].ty==="op"?(lt?(gt=_[it],gt.closed=!1):(gt=ShapeModifiers.getModifier(et[it].ty),gt.init(this,et[it]),_[it]=gt,this.shapeModifiers.push(gt)),At.push(gt)):et[it].ty==="rp"&&(lt?(gt=_[it],gt.closed=!0):(gt=ShapeModifiers.getModifier(et[it].ty),_[it]=gt,gt.init(this,et,it,_),this.shapeModifiers.push(gt),tt=!1),At.push(gt));this.addProcessedElement(et[it],it+1)}for(this.removeTransformFromStyleList(),this.closeStyles(at),rt=At.length,it=0;it<rt;it+=1)At[it].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(et,_){(et._opMdf||_.op._mdf||this._isFirstFrame)&&(_.opacity=et.opacity,_.opacity*=_.op.v,_._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var et,_=this.stylesList.length,_e,tt,nt,it,rt,st,ot=this.globalData.renderer,at=this.globalData.canvasContext,At,lt;for(et=0;et<_;et+=1)if(lt=this.stylesList[et],At=lt.type,!((At==="st"||At==="gs")&&lt.wi===0||!lt.data._shouldRender||lt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(ot.save(),rt=lt.elements,At==="st"||At==="gs"?(ot.ctxStrokeStyle(At==="st"?lt.co:lt.grd),ot.ctxLineWidth(lt.wi),ot.ctxLineCap(lt.lc),ot.ctxLineJoin(lt.lj),ot.ctxMiterLimit(lt.ml||0)):ot.ctxFillStyle(At==="fl"?lt.co:lt.grd),ot.ctxOpacity(lt.coOp),At!=="st"&&At!=="gs"&&at.beginPath(),ot.ctxTransform(lt.preTransforms.finalTransform.props),tt=rt.length,_e=0;_e<tt;_e+=1){for((At==="st"||At==="gs")&&(at.beginPath(),lt.da&&(at.setLineDash(lt.da),at.lineDashOffset=lt.do)),st=rt[_e].trNodes,it=st.length,nt=0;nt<it;nt+=1)st[nt].t==="m"?at.moveTo(st[nt].p[0],st[nt].p[1]):st[nt].t==="c"?at.bezierCurveTo(st[nt].pts[0],st[nt].pts[1],st[nt].pts[2],st[nt].pts[3],st[nt].pts[4],st[nt].pts[5]):at.closePath();(At==="st"||At==="gs")&&(ot.ctxStroke(),lt.da&&at.setLineDash(this.dashResetter))}At!=="st"&&At!=="gs"&&this.globalData.renderer.ctxFill(lt.r),ot.restore()}},CVShapeElement.prototype.renderShape=function(et,_,_e,tt){var nt,it=_.length-1,rt;for(rt=et,nt=it;nt>=0;nt-=1)_[nt].ty==="tr"?(rt=_e[nt].transform,this.renderShapeTransform(et,rt)):_[nt].ty==="sh"||_[nt].ty==="el"||_[nt].ty==="rc"||_[nt].ty==="sr"?this.renderPath(_[nt],_e[nt]):_[nt].ty==="fl"?this.renderFill(_[nt],_e[nt],rt):_[nt].ty==="st"?this.renderStroke(_[nt],_e[nt],rt):_[nt].ty==="gf"||_[nt].ty==="gs"?this.renderGradientFill(_[nt],_e[nt],rt):_[nt].ty==="gr"?this.renderShape(rt,_[nt].it,_e[nt].it):_[nt].ty;tt&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(et,_){if(this._isFirstFrame||_._mdf||et.transforms._mdf){var _e=et.trNodes,tt=_.paths,nt,it,rt,st=tt._length;_e.length=0;var ot=et.transforms.finalTransform;for(rt=0;rt<st;rt+=1){var at=tt.shapes[rt];if(at&&at.v){for(it=at._length,nt=1;nt<it;nt+=1)nt===1&&_e.push({t:"m",p:ot.applyToPointArray(at.v[0][0],at.v[0][1],0)}),_e.push({t:"c",pts:ot.applyToTriplePoints(at.o[nt-1],at.i[nt],at.v[nt])});it===1&&_e.push({t:"m",p:ot.applyToPointArray(at.v[0][0],at.v[0][1],0)}),at.c&&it&&(_e.push({t:"c",pts:ot.applyToTriplePoints(at.o[nt-1],at.i[0],at.v[0])}),_e.push({t:"z"}))}}et.trNodes=_e}},CVShapeElement.prototype.renderPath=function(et,_){if(et.hd!==!0&&et._shouldRender){var _e,tt=_.styledShapes.length;for(_e=0;_e<tt;_e+=1)this.renderStyledShape(_.styledShapes[_e],_.sh)}},CVShapeElement.prototype.renderFill=function(et,_,_e){var tt=_.style;(_.c._mdf||this._isFirstFrame)&&(tt.co="rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")"),(_.o._mdf||_e._opMdf||this._isFirstFrame)&&(tt.coOp=_.o.v*_e.opacity)},CVShapeElement.prototype.renderGradientFill=function(et,_,_e){var tt=_.style,nt;if(!tt.grd||_.g._mdf||_.s._mdf||_.e._mdf||et.t!==1&&(_.h._mdf||_.a._mdf)){var it=this.globalData.canvasContext,rt=_.s.v,st=_.e.v;if(et.t===1)nt=it.createLinearGradient(rt[0],rt[1],st[0],st[1]);else{var ot=Math.sqrt(Math.pow(rt[0]-st[0],2)+Math.pow(rt[1]-st[1],2)),at=Math.atan2(st[1]-rt[1],st[0]-rt[0]),At=_.h.v;At>=1?At=.99:At<=-1&&(At=-.99);var lt=ot*At,gt=Math.cos(at+_.a.v)*lt+rt[0],ct=Math.sin(at+_.a.v)*lt+rt[1];nt=it.createRadialGradient(gt,ct,0,rt[0],rt[1],ot)}var dt,ht=et.g.p,mt=_.g.c,Ct=1;for(dt=0;dt<ht;dt+=1)_.g._hasOpacity&&_.g._collapsable&&(Ct=_.g.o[dt*2+1]),nt.addColorStop(mt[dt*4]/100,"rgba("+mt[dt*4+1]+","+mt[dt*4+2]+","+mt[dt*4+3]+","+Ct+")");tt.grd=nt}tt.coOp=_.o.v*_e.opacity},CVShapeElement.prototype.renderStroke=function(et,_,_e){var tt=_.style,nt=_.d;nt&&(nt._mdf||this._isFirstFrame)&&(tt.da=nt.dashArray,tt.do=nt.dashoffset[0]),(_.c._mdf||this._isFirstFrame)&&(tt.co="rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")"),(_.o._mdf||_e._opMdf||this._isFirstFrame)&&(tt.coOp=_.o.v*_e.opacity),(_.w._mdf||this._isFirstFrame)&&(tt.wi=_.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(et,_,_e){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et.l?et.l.length:0);var _=!1;et.fc?(_=!0,this.values.fill=this.buildColor(et.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=_;var _e=!1;et.sc&&(_e=!0,this.values.stroke=this.buildColor(et.sc),this.values.sWidth=et.sw);var tt=this.globalData.fontManager.getFontByName(et.f),nt,it,rt=et.l,st=this.mHelper;this.stroke=_e,this.values.fValue=et.finalSize+"px "+this.globalData.fontManager.getFontByName(et.f).fFamily,it=et.finalText.length;var ot,at,At,lt,gt,ct,dt,ht,mt,Ct,ft=this.data.singleShape,pt=et.tr*.001*et.finalSize,Vt=0,yt=0,Gt=!0,Bt=0;for(nt=0;nt<it;nt+=1){ot=this.globalData.fontManager.getCharData(et.finalText[nt],tt.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily),at=ot&&ot.data||{},st.reset(),ft&&rt[nt].n&&(Vt=-pt,yt+=et.yOffset,yt+=Gt?1:0,Gt=!1),gt=at.shapes?at.shapes[0].it:[],dt=gt.length,st.scale(et.finalSize/100,et.finalSize/100),ft&&this.applyTextPropertiesToMatrix(et,st,rt[nt].line,Vt,yt),mt=createSizedArray(dt-1);var vt=0;for(ct=0;ct<dt;ct+=1)if(gt[ct].ty==="sh"){for(lt=gt[ct].ks.k.i.length,ht=gt[ct].ks.k,Ct=[],At=1;At<lt;At+=1)At===1&&Ct.push(st.applyToX(ht.v[0][0],ht.v[0][1],0),st.applyToY(ht.v[0][0],ht.v[0][1],0)),Ct.push(st.applyToX(ht.o[At-1][0],ht.o[At-1][1],0),st.applyToY(ht.o[At-1][0],ht.o[At-1][1],0),st.applyToX(ht.i[At][0],ht.i[At][1],0),st.applyToY(ht.i[At][0],ht.i[At][1],0),st.applyToX(ht.v[At][0],ht.v[At][1],0),st.applyToY(ht.v[At][0],ht.v[At][1],0));Ct.push(st.applyToX(ht.o[At-1][0],ht.o[At-1][1],0),st.applyToY(ht.o[At-1][0],ht.o[At-1][1],0),st.applyToX(ht.i[0][0],ht.i[0][1],0),st.applyToY(ht.i[0][0],ht.i[0][1],0),st.applyToX(ht.v[0][0],ht.v[0][1],0),st.applyToY(ht.v[0][0],ht.v[0][1],0)),mt[vt]=Ct,vt+=1}ft&&(Vt+=rt[nt].l,Vt+=pt),this.textSpans[Bt]?this.textSpans[Bt].elem=mt:this.textSpans[Bt]={elem:mt},Bt+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var et=this.canvasContext;et.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var _,_e,tt,nt,it,rt,st=this.textAnimator.renderedLetters,ot=this.textProperty.currentData.l;_e=ot.length;var at,At=null,lt=null,gt=null,ct,dt,ht=this.globalData.renderer;for(_=0;_<_e;_+=1)if(!ot[_].n){if(at=st[_],at&&(ht.save(),ht.ctxTransform(at.p),ht.ctxOpacity(at.o)),this.fill){for(at&&at.fc?At!==at.fc&&(ht.ctxFillStyle(at.fc),At=at.fc):At!==this.values.fill&&(At=this.values.fill,ht.ctxFillStyle(this.values.fill)),ct=this.textSpans[_].elem,nt=ct.length,this.globalData.canvasContext.beginPath(),tt=0;tt<nt;tt+=1)for(dt=ct[tt],rt=dt.length,this.globalData.canvasContext.moveTo(dt[0],dt[1]),it=2;it<rt;it+=6)this.globalData.canvasContext.bezierCurveTo(dt[it],dt[it+1],dt[it+2],dt[it+3],dt[it+4],dt[it+5]);this.globalData.canvasContext.closePath(),ht.ctxFill()}if(this.stroke){for(at&&at.sw?gt!==at.sw&&(gt=at.sw,ht.ctxLineWidth(at.sw)):gt!==this.values.sWidth&&(gt=this.values.sWidth,ht.ctxLineWidth(this.values.sWidth)),at&&at.sc?lt!==at.sc&&(lt=at.sc,ht.ctxStrokeStyle(at.sc)):lt!==this.values.stroke&&(lt=this.values.stroke,ht.ctxStrokeStyle(this.values.stroke)),ct=this.textSpans[_].elem,nt=ct.length,this.globalData.canvasContext.beginPath(),tt=0;tt<nt;tt+=1)for(dt=ct[tt],rt=dt.length,this.globalData.canvasContext.moveTo(dt[0],dt[1]),it=2;it<rt;it+=6)this.globalData.canvasContext.bezierCurveTo(dt[it],dt[it+1],dt[it+2],dt[it+3],dt[it+4],dt[it+5]);this.globalData.canvasContext.closePath(),ht.ctxStroke()}at&&this.globalData.renderer.restore()}};function CVImageElement(et,_,_e){this.assetData=_.getAssetData(et.refId),this.img=_.imageLoader.getAsset(this.assetData),this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var et=createTag("canvas");et.width=this.assetData.w,et.height=this.assetData.h;var _=et.getContext("2d"),_e=this.img.width,tt=this.img.height,nt=_e/tt,it=this.assetData.w/this.assetData.h,rt,st,ot=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;nt>it&&ot==="xMidYMid slice"||nt<it&&ot!=="xMidYMid slice"?(st=tt,rt=st*it):(rt=_e,st=rt/it),_.drawImage(this.img,(_e-rt)/2,(tt-st)/2,rt,st,0,0,this.assetData.w,this.assetData.h),this.img=et}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(et,_,_e){this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(et){return new CVShapeElement(et,this.globalData,this)},CanvasRendererBase.prototype.createText=function(et){return new CVTextElement(et,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(et){return new CVImageElement(et,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(et){return new CVSolidElement(et,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(et){et[0]===1&&et[1]===0&&et[4]===0&&et[5]===1&&et[12]===0&&et[13]===0||this.canvasContext.transform(et[0],et[1],et[4],et[5],et[12],et[13])},CanvasRendererBase.prototype.ctxOpacity=function(et){this.canvasContext.globalAlpha*=et<0?0:et},CanvasRendererBase.prototype.ctxFillStyle=function(et){this.canvasContext.fillStyle=et},CanvasRendererBase.prototype.ctxStrokeStyle=function(et){this.canvasContext.strokeStyle=et},CanvasRendererBase.prototype.ctxLineWidth=function(et){this.canvasContext.lineWidth=et},CanvasRendererBase.prototype.ctxLineCap=function(et){this.canvasContext.lineCap=et},CanvasRendererBase.prototype.ctxLineJoin=function(et){this.canvasContext.lineJoin=et},CanvasRendererBase.prototype.ctxMiterLimit=function(et){this.canvasContext.miterLimit=et},CanvasRendererBase.prototype.ctxFill=function(et){this.canvasContext.fill(et)},CanvasRendererBase.prototype.ctxFillRect=function(et,_,_e,tt){this.canvasContext.fillRect(et,_,_e,tt)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(et){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}et&&(this.globalData.blendMode="source-over"),this.contextData.restore(et)},CanvasRendererBase.prototype.configAnimation=function(et){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var _=this.animationItem.container.style;_.width="100%",_.height="100%";var _e="0px 0px 0px";_.transformOrigin=_e,_.mozTransformOrigin=_e,_.webkitTransformOrigin=_e,_["-webkit-transform"]=_e,_.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=et,this.layers=et.layers,this.transformCanvas={w:et.w,h:et.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(et,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(et.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(et,_){this.reset();var _e,tt;et?(_e=et,tt=_,this.canvasContext.canvas.width=_e,this.canvasContext.canvas.height=tt):(this.animationItem.wrapper&&this.animationItem.container?(_e=this.animationItem.wrapper.offsetWidth,tt=this.animationItem.wrapper.offsetHeight):(_e=this.canvasContext.canvas.width,tt=this.canvasContext.canvas.height),this.canvasContext.canvas.width=_e*this.renderConfig.dpr,this.canvasContext.canvas.height=tt*this.renderConfig.dpr);var nt,it;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var rt=this.renderConfig.preserveAspectRatio.split(" "),st=rt[1]||"meet",ot=rt[0]||"xMidYMid",at=ot.substr(0,4),At=ot.substr(4);nt=_e/tt,it=this.transformCanvas.w/this.transformCanvas.h,it>nt&&st==="meet"||it<nt&&st==="slice"?(this.transformCanvas.sx=_e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=_e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=tt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=tt/(this.transformCanvas.h/this.renderConfig.dpr)),at==="xMid"&&(it<nt&&st==="meet"||it>nt&&st==="slice")?this.transformCanvas.tx=(_e-this.transformCanvas.w*(tt/this.transformCanvas.h))/2*this.renderConfig.dpr:at==="xMax"&&(it<nt&&st==="meet"||it>nt&&st==="slice")?this.transformCanvas.tx=(_e-this.transformCanvas.w*(tt/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,At==="YMid"&&(it>nt&&st==="meet"||it<nt&&st==="slice")?this.transformCanvas.ty=(tt-this.transformCanvas.h*(_e/this.transformCanvas.w))/2*this.renderConfig.dpr:At==="YMax"&&(it>nt&&st==="meet"||it<nt&&st==="slice")?this.transformCanvas.ty=(tt-this.transformCanvas.h*(_e/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=_e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=tt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var et,_=this.layers?this.layers.length:0;for(et=_-1;et>=0;et-=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(et,_){if(!(this.renderedFrame===et&&this.renderConfig.clearCanvas===!0&&!_||this.destroyed||et===-1)){this.renderedFrame=et,this.globalData.frameNum=et-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||_,this.globalData.projectInterface.currentFrame=et;var _e,tt=this.layers.length;for(this.completeLayers||this.checkLayers(et),_e=tt-1;_e>=0;_e-=1)(this.completeLayers||this.elements[_e])&&this.elements[_e].prepareFrame(et-this.layers[_e].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),_e=tt-1;_e>=0;_e-=1)(this.completeLayers||this.elements[_e])&&this.elements[_e].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(et){var _=this.elements;if(!(_[et]||this.layers[et].ty===99)){var _e=this.createItem(this.layers[et],this,this.globalData);_[et]=_e,_e.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();et.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var et,_=15;for(et=0;et<_;et+=1){var _e=new CanvasContext;this.stack[et]=_e}this._length=_,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var et=this._length*2,_=0;for(_=this._length;_<et;_+=1)this.stack[_]=new CanvasContext;this._length=et},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(et){this.cArrPos-=1;var _=this.stack[this.cArrPos],_e=_.transform,tt,nt=this.cTr.props;for(tt=0;tt<16;tt+=1)nt[tt]=_e[tt];if(et){this.nativeContext.restore();var it=this.stack[this.cArrPos+1];this.appliedFillStyle=it.fillStyle,this.appliedStrokeStyle=it.strokeStyle,this.appliedLineWidth=it.lineWidth,this.appliedLineCap=it.lineCap,this.appliedLineJoin=it.lineJoin,this.appliedMiterLimit=it.miterLimit}this.nativeContext.setTransform(_e[0],_e[1],_e[4],_e[5],_e[12],_e[13]),(et||_.opacity!==-1&&this.currentOpacity!==_.opacity)&&(this.nativeContext.globalAlpha=_.opacity,this.currentOpacity=_.opacity),this.currentFillStyle=_.fillStyle,this.currentStrokeStyle=_.strokeStyle,this.currentLineWidth=_.lineWidth,this.currentLineCap=_.lineCap,this.currentLineJoin=_.lineJoin,this.currentMiterLimit=_.miterLimit},CVContextData.prototype.save=function(et){et&&this.nativeContext.save();var _=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var _e=this.stack[this.cArrPos],tt;for(tt=0;tt<16;tt+=1)_e.transform[tt]=_[tt];this.cArrPos+=1;var nt=this.stack[this.cArrPos];nt.opacity=_e.opacity,nt.fillStyle=_e.fillStyle,nt.strokeStyle=_e.strokeStyle,nt.lineWidth=_e.lineWidth,nt.lineCap=_e.lineCap,nt.lineJoin=_e.lineJoin,nt.miterLimit=_e.miterLimit},CVContextData.prototype.setOpacity=function(et){this.stack[this.cArrPos].opacity=et},CVContextData.prototype.setContext=function(et){this.nativeContext=et},CVContextData.prototype.fillStyle=function(et){this.stack[this.cArrPos].fillStyle!==et&&(this.currentFillStyle=et,this.stack[this.cArrPos].fillStyle=et)},CVContextData.prototype.strokeStyle=function(et){this.stack[this.cArrPos].strokeStyle!==et&&(this.currentStrokeStyle=et,this.stack[this.cArrPos].strokeStyle=et)},CVContextData.prototype.lineWidth=function(et){this.stack[this.cArrPos].lineWidth!==et&&(this.currentLineWidth=et,this.stack[this.cArrPos].lineWidth=et)},CVContextData.prototype.lineCap=function(et){this.stack[this.cArrPos].lineCap!==et&&(this.currentLineCap=et,this.stack[this.cArrPos].lineCap=et)},CVContextData.prototype.lineJoin=function(et){this.stack[this.cArrPos].lineJoin!==et&&(this.currentLineJoin=et,this.stack[this.cArrPos].lineJoin=et)},CVContextData.prototype.miterLimit=function(et){this.stack[this.cArrPos].miterLimit!==et&&(this.currentMiterLimit=et,this.stack[this.cArrPos].miterLimit=et)},CVContextData.prototype.transform=function(et){this.transformMat.cloneFromProps(et);var _=this.cTr;this.transformMat.multiply(_),_.cloneFromProps(this.transformMat.props);var _e=_.props;this.nativeContext.setTransform(_e[0],_e[1],_e[4],_e[5],_e[12],_e[13])},CVContextData.prototype.opacity=function(et){var _=this.stack[this.cArrPos].opacity;_*=et<0?0:et,this.stack[this.cArrPos].opacity!==_&&(this.currentOpacity!==et&&(this.nativeContext.globalAlpha=et,this.currentOpacity=et),this.stack[this.cArrPos].opacity=_)},CVContextData.prototype.fill=function(et){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(et)},CVContextData.prototype.fillRect=function(et,_,_e,tt){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(et,_,_e,tt)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(et,_,_e){this.completeLayers=!1,this.layers=et.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(et,_,_e),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,_.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var et=this.canvasContext;et.beginPath(),et.moveTo(0,0),et.lineTo(this.data.w,0),et.lineTo(this.data.w,this.data.h),et.lineTo(0,this.data.h),et.lineTo(0,0),et.clip();var _,_e=this.layers.length;for(_=_e-1;_>=0;_-=1)(this.completeLayers||this.elements[_])&&this.elements[_].renderFrame()},CVCompElement.prototype.destroy=function(){var et,_=this.layers.length;for(et=_-1;et>=0;et-=1)this.elements[et]&&this.elements[et].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(et){return new CVCompElement(et,this.globalData,this)};function CanvasRenderer(et,_){this.animationItem=et,this.renderConfig={clearCanvas:_&&_.clearCanvas!==void 0?_.clearCanvas:!0,context:_&&_.context||null,progressiveLoad:_&&_.progressiveLoad||!1,preserveAspectRatio:_&&_.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:_&&_.contentVisibility||"visible",className:_&&_.className||"",id:_&&_.id||"",runExpressions:!_||_.runExpressions===void 0||_.runExpressions},this.renderConfig.dpr=_&&_.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=_&&_.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(et){return new CVCompElement(et,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var _=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var _e=this.finalTransform.mat.toCSS();_.transform=_e,_.webkitTransform=_e}this.finalTransform._opMdf&&(_.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(et,_,_e){this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var et;this.data.hasMask?(et=createNS("rect"),et.setAttribute("width",this.data.sw),et.setAttribute("height",this.data.sh),et.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(et=createTag("div"),et.style.width=this.data.sw+"px",et.style.height=this.data.sh+"px",et.style.backgroundColor=this.data.sc),this.layerElement.appendChild(et)};function HShapeElement(et,_,_e){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(et,_,_e),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var et;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),et=this.svgElement;else{et=createNS("svg");var _=this.comp.data?this.comp.data:this.globalData.compSize;et.setAttribute("width",_.w),et.setAttribute("height",_.h),et.appendChild(this.shapesContainer),this.layerElement.appendChild(et)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=et},HShapeElement.prototype.getTransformedPoint=function(et,_){var _e,tt=et.length;for(_e=0;_e<tt;_e+=1)_=et[_e].mProps.v.applyToPointArray(_[0],_[1],0);return _},HShapeElement.prototype.calculateShapeBoundingBox=function(et,_){var _e=et.sh.v,tt=et.transformers,nt,it=_e._length,rt,st,ot,at;if(!(it<=1)){for(nt=0;nt<it-1;nt+=1)rt=this.getTransformedPoint(tt,_e.v[nt]),st=this.getTransformedPoint(tt,_e.o[nt]),ot=this.getTransformedPoint(tt,_e.i[nt+1]),at=this.getTransformedPoint(tt,_e.v[nt+1]),this.checkBounds(rt,st,ot,at,_);_e.c&&(rt=this.getTransformedPoint(tt,_e.v[nt]),st=this.getTransformedPoint(tt,_e.o[nt]),ot=this.getTransformedPoint(tt,_e.i[0]),at=this.getTransformedPoint(tt,_e.v[0]),this.checkBounds(rt,st,ot,at,_))}},HShapeElement.prototype.checkBounds=function(et,_,_e,tt,nt){this.getBoundsOfCurve(et,_,_e,tt);var it=this.shapeBoundingBox;nt.x=bmMin(it.left,nt.x),nt.xMax=bmMax(it.right,nt.xMax),nt.y=bmMin(it.top,nt.y),nt.yMax=bmMax(it.bottom,nt.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(et,_,_e,tt){for(var nt=[[et[0],tt[0]],[et[1],tt[1]]],it,rt,st,ot,at,At,lt,gt=0;gt<2;++gt)rt=6*et[gt]-12*_[gt]+6*_e[gt],it=-3*et[gt]+9*_[gt]-9*_e[gt]+3*tt[gt],st=3*_[gt]-3*et[gt],rt|=0,it|=0,st|=0,it===0&&rt===0||(it===0?(ot=-st/rt,ot>0&&ot<1&&nt[gt].push(this.calculateF(ot,et,_,_e,tt,gt))):(at=rt*rt-4*st*it,at>=0&&(At=(-rt+bmSqrt(at))/(2*it),At>0&&At<1&&nt[gt].push(this.calculateF(At,et,_,_e,tt,gt)),lt=(-rt-bmSqrt(at))/(2*it),lt>0&&lt<1&&nt[gt].push(this.calculateF(lt,et,_,_e,tt,gt)))));this.shapeBoundingBox.left=bmMin.apply(null,nt[0]),this.shapeBoundingBox.top=bmMin.apply(null,nt[1]),this.shapeBoundingBox.right=bmMax.apply(null,nt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,nt[1])},HShapeElement.prototype.calculateF=function(et,_,_e,tt,nt,it){return bmPow(1-et,3)*_[it]+3*bmPow(1-et,2)*et*_e[it]+3*(1-et)*bmPow(et,2)*tt[it]+bmPow(et,3)*nt[it]},HShapeElement.prototype.calculateBoundingBox=function(et,_){var _e,tt=et.length;for(_e=0;_e<tt;_e+=1)et[_e]&&et[_e].sh?this.calculateShapeBoundingBox(et[_e],_):et[_e]&&et[_e].it?this.calculateBoundingBox(et[_e].it,_):et[_e]&&et[_e].style&&et[_e].w&&this.expandStrokeBoundingBox(et[_e].w,_)},HShapeElement.prototype.expandStrokeBoundingBox=function(et,_){var _e=0;if(et.keyframes){for(var tt=0;tt<et.keyframes.length;tt+=1){var nt=et.keyframes[tt].s;nt>_e&&(_e=nt)}_e*=et.mult}else _e=et.v*et.mult;_.x-=_e,_.xMax+=_e,_.y-=_e,_.yMax+=_e},HShapeElement.prototype.currentBoxContains=function(et){return this.currentBBox.x<=et.x&&this.currentBBox.y<=et.y&&this.currentBBox.width+this.currentBBox.x>=et.x+et.width&&this.currentBBox.height+this.currentBBox.y>=et.y+et.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var et=this.tempBoundingBox,_=999999;if(et.x=_,et.xMax=-_,et.y=_,et.yMax=-_,this.calculateBoundingBox(this.itemsData,et),et.width=et.xMax<et.x?0:et.xMax-et.x,et.height=et.yMax<et.y?0:et.yMax-et.y,this.currentBoxContains(et))return;var _e=!1;if(this.currentBBox.w!==et.width&&(this.currentBBox.w=et.width,this.shapeCont.setAttribute("width",et.width),_e=!0),this.currentBBox.h!==et.height&&(this.currentBBox.h=et.height,this.shapeCont.setAttribute("height",et.height),_e=!0),_e||this.currentBBox.x!==et.x||this.currentBBox.y!==et.y){this.currentBBox.w=et.width,this.currentBBox.h=et.height,this.currentBBox.x=et.x,this.currentBBox.y=et.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var tt=this.shapeCont.style,nt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";tt.transform=nt,tt.webkitTransform=nt}}};function HTextElement(et,_,_e){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var et=createNS("g");this.maskedElement.appendChild(et),this.innerElem=et}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et.l?et.l.length:0);var _=this.innerElem.style,_e=et.fc?this.buildColor(et.fc):"rgba(0,0,0,0)";_.fill=_e,_.color=_e,et.sc&&(_.stroke=this.buildColor(et.sc),_.strokeWidth=et.sw+"px");var tt=this.globalData.fontManager.getFontByName(et.f);if(!this.globalData.fontManager.chars)if(_.fontSize=et.finalSize+"px",_.lineHeight=et.finalSize+"px",tt.fClass)this.innerElem.className=tt.fClass;else{_.fontFamily=tt.fFamily;var nt=et.fWeight,it=et.fStyle;_.fontStyle=it,_.fontWeight=nt}var rt,st,ot=et.l;st=ot.length;var at,At,lt,gt=this.mHelper,ct,dt="",ht=0;for(rt=0;rt<st;rt+=1){if(this.globalData.fontManager.chars?(this.textPaths[ht]?at=this.textPaths[ht]:(at=createNS("path"),at.setAttribute("stroke-linecap",lineCapEnum[1]),at.setAttribute("stroke-linejoin",lineJoinEnum[2]),at.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[ht]?(At=this.textSpans[ht],lt=At.children[0]):(At=createTag("div"),At.style.lineHeight=0,lt=createNS("svg"),lt.appendChild(at),styleDiv(At)))):this.isMasked?at=this.textPaths[ht]?this.textPaths[ht]:createNS("text"):this.textSpans[ht]?(At=this.textSpans[ht],at=this.textPaths[ht]):(At=createTag("span"),styleDiv(At),at=createTag("span"),styleDiv(at),At.appendChild(at)),this.globalData.fontManager.chars){var mt=this.globalData.fontManager.getCharData(et.finalText[rt],tt.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily),Ct;if(mt?Ct=mt.data:Ct=null,gt.reset(),Ct&&Ct.shapes&&Ct.shapes.length&&(ct=Ct.shapes[0].it,gt.scale(et.finalSize/100,et.finalSize/100),dt=this.createPathShape(gt,ct),at.setAttribute("d",dt)),this.isMasked)this.innerElem.appendChild(at);else{if(this.innerElem.appendChild(At),Ct&&Ct.shapes){document.body.appendChild(lt);var ft=lt.getBBox();lt.setAttribute("width",ft.width+2),lt.setAttribute("height",ft.height+2),lt.setAttribute("viewBox",ft.x-1+" "+(ft.y-1)+" "+(ft.width+2)+" "+(ft.height+2));var pt=lt.style,Vt="translate("+(ft.x-1)+"px,"+(ft.y-1)+"px)";pt.transform=Vt,pt.webkitTransform=Vt,ot[rt].yOffset=ft.y-1}else lt.setAttribute("width",1),lt.setAttribute("height",1);At.appendChild(lt)}}else if(at.textContent=ot[rt].val,at.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(at);else{this.innerElem.appendChild(At);var yt=at.style,Gt="translate3d(0,"+-et.finalSize/1.2+"px,0)";yt.transform=Gt,yt.webkitTransform=Gt}this.isMasked?this.textSpans[ht]=at:this.textSpans[ht]=At,this.textSpans[ht].style.display="block",this.textPaths[ht]=at,ht+=1}for(;ht<this.textSpans.length;)this.textSpans[ht].style.display="none",ht+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var et;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),et=this.svgElement.style;var _="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";et.transform=_,et.webkitTransform=_}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var _e,tt,nt=0,it=this.textAnimator.renderedLetters,rt=this.textProperty.currentData.l;tt=rt.length;var st,ot,at;for(_e=0;_e<tt;_e+=1)rt[_e].n?nt+=1:(ot=this.textSpans[_e],at=this.textPaths[_e],st=it[nt],nt+=1,st._mdf.m&&(this.isMasked?ot.setAttribute("transform",st.m):(ot.style.webkitTransform=st.m,ot.style.transform=st.m)),ot.style.opacity=st.o,st.sw&&st._mdf.sw&&at.setAttribute("stroke-width",st.sw),st.sc&&st._mdf.sc&&at.setAttribute("stroke",st.sc),st.fc&&st._mdf.fc&&(at.setAttribute("fill",st.fc),at.style.color=st.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var At=this.innerElem.getBBox();this.currentBBox.w!==At.width&&(this.currentBBox.w=At.width,this.svgElement.setAttribute("width",At.width)),this.currentBBox.h!==At.height&&(this.currentBBox.h=At.height,this.svgElement.setAttribute("height",At.height));var lt=1;if(this.currentBBox.w!==At.width+lt*2||this.currentBBox.h!==At.height+lt*2||this.currentBBox.x!==At.x-lt||this.currentBBox.y!==At.y-lt){this.currentBBox.w=At.width+lt*2,this.currentBBox.h=At.height+lt*2,this.currentBBox.x=At.x-lt,this.currentBBox.y=At.y-lt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),et=this.svgElement.style;var gt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";et.transform=gt,et.webkitTransform=gt}}}};function HCameraElement(et,_,_e){this.initFrame(),this.initBaseData(et,_,_e),this.initHierarchy();var tt=PropertyFactory.getProp;if(this.pe=tt(this,et.pe,0,0,this),et.ks.p.s?(this.px=tt(this,et.ks.p.x,1,0,this),this.py=tt(this,et.ks.p.y,1,0,this),this.pz=tt(this,et.ks.p.z,1,0,this)):this.p=tt(this,et.ks.p,1,0,this),et.ks.a&&(this.a=tt(this,et.ks.a,1,0,this)),et.ks.or.k.length&&et.ks.or.k[0].to){var nt,it=et.ks.or.k.length;for(nt=0;nt<it;nt+=1)et.ks.or.k[nt].to=null,et.ks.or.k[nt].ti=null}this.or=tt(this,et.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=tt(this,et.ks.rx,0,degToRads,this),this.ry=tt(this,et.ks.ry,0,degToRads,this),this.rz=tt(this,et.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var et,_=this.comp.threeDElements.length,_e,tt,nt;for(et=0;et<_;et+=1)if(_e=this.comp.threeDElements[et],_e.type==="3d"){tt=_e.perspectiveElem.style,nt=_e.container.style;var it=this.pe.v+"px",rt="0px 0px 0px",st="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";tt.perspective=it,tt.webkitPerspective=it,nt.transformOrigin=rt,nt.mozTransformOrigin=rt,nt.webkitTransformOrigin=rt,tt.transform=st,tt.webkitTransform=st}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var et=this._isFirstFrame,_,_e;if(this.hierarchy)for(_e=this.hierarchy.length,_=0;_<_e;_+=1)et=this.hierarchy[_].finalTransform.mProp._mdf||et;if(et||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(_e=this.hierarchy.length-1,_=_e;_>=0;_-=1){var tt=this.hierarchy[_].finalTransform.mProp;this.mat.translate(-tt.p.v[0],-tt.p.v[1],tt.p.v[2]),this.mat.rotateX(-tt.or.v[0]).rotateY(-tt.or.v[1]).rotateZ(tt.or.v[2]),this.mat.rotateX(-tt.rx.v).rotateY(-tt.ry.v).rotateZ(tt.rz.v),this.mat.scale(1/tt.s.v[0],1/tt.s.v[1],1/tt.s.v[2]),this.mat.translate(tt.a.v[0],tt.a.v[1],tt.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var nt;this.p?nt=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:nt=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var it=Math.sqrt(Math.pow(nt[0],2)+Math.pow(nt[1],2)+Math.pow(nt[2],2)),rt=[nt[0]/it,nt[1]/it,nt[2]/it],st=Math.sqrt(rt[2]*rt[2]+rt[0]*rt[0]),ot=Math.atan2(rt[1],st),at=Math.atan2(rt[0],-rt[2]);this.mat.rotateY(at).rotateX(-ot)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var At=!this._prevMat.equals(this.mat);if((At||this.pe._mdf)&&this.comp.threeDElements){_e=this.comp.threeDElements.length;var lt,gt,ct;for(_=0;_<_e;_+=1)if(lt=this.comp.threeDElements[_],lt.type==="3d"){if(At){var dt=this.mat.toCSS();ct=lt.container.style,ct.transform=dt,ct.webkitTransform=dt}this.pe._mdf&&(gt=lt.perspectiveElem.style,gt.perspective=this.pe.v+"px",gt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(et){this.prepareProperties(et,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(et,_,_e){this.assetData=_.getAssetData(et.refId),this.initElement(et,_,_e)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var et=this.globalData.getAssetsPath(this.assetData),_=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",et),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(_),_.crossOrigin="anonymous",_.src=et,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(et,_){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:_&&_.className||"",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(_&&_.hideOnTransparent===!1),filterSize:{width:_&&_.filterSize&&_.filterSize.width||"400%",height:_&&_.filterSize&&_.filterSize.height||"400%",x:_&&_.filterSize&&_.filterSize.x||"-100%",y:_&&_.filterSize&&_.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();et.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(et,_){var _e=et.getBaseElement();if(_e){var tt=this.layers[_];if(!tt.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(_e,_);else{for(var nt=0,it,rt,st;nt<_;)this.elements[nt]&&this.elements[nt]!==!0&&this.elements[nt].getBaseElement&&(rt=this.elements[nt],st=this.layers[nt].ddd?this.getThreeDContainerByPos(nt):rt.getBaseElement(),it=st||it),nt+=1;it?(!tt.ddd||!this.supports3d)&&this.layerElement.insertBefore(_e,it):(!tt.ddd||!this.supports3d)&&this.layerElement.appendChild(_e)}else this.addTo3dContainer(_e,_)}},HybridRendererBase.prototype.createShape=function(et){return this.supports3d?new HShapeElement(et,this.globalData,this):new SVGShapeElement(et,this.globalData,this)},HybridRendererBase.prototype.createText=function(et){return this.supports3d?new HTextElement(et,this.globalData,this):new SVGTextLottieElement(et,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(et){return this.camera=new HCameraElement(et,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(et){return this.supports3d?new HImageElement(et,this.globalData,this):new IImageElement(et,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(et){return this.supports3d?new HSolidElement(et,this.globalData,this):new ISolidElement(et,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(et){for(var _=0,_e=this.threeDElements.length;_<_e;){if(this.threeDElements[_].startPos<=et&&this.threeDElements[_].endPos>=et)return this.threeDElements[_].perspectiveElem;_+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(et,_){var _e=createTag("div"),tt,nt;styleDiv(_e);var it=createTag("div");if(styleDiv(it),_==="3d"){tt=_e.style,tt.width=this.globalData.compSize.w+"px",tt.height=this.globalData.compSize.h+"px";var rt="50% 50%";tt.webkitTransformOrigin=rt,tt.mozTransformOrigin=rt,tt.transformOrigin=rt,nt=it.style;var st="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";nt.transform=st,nt.webkitTransform=st}_e.appendChild(it);var ot={container:it,perspectiveElem:_e,startPos:et,endPos:et,type:_};return this.threeDElements.push(ot),ot},HybridRendererBase.prototype.build3dContainers=function(){var et,_=this.layers.length,_e,tt="";for(et=0;et<_;et+=1)this.layers[et].ddd&&this.layers[et].ty!==3?(tt!=="3d"&&(tt="3d",_e=this.createThreeDContainer(et,"3d")),_e.endPos=Math.max(_e.endPos,et)):(tt!=="2d"&&(tt="2d",_e=this.createThreeDContainer(et,"2d")),_e.endPos=Math.max(_e.endPos,et));for(_=this.threeDElements.length,et=_-1;et>=0;et-=1)this.resizerElem.appendChild(this.threeDElements[et].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(et,_){for(var _e=0,tt=this.threeDElements.length;_e<tt;){if(_<=this.threeDElements[_e].endPos){for(var nt=this.threeDElements[_e].startPos,it;nt<_;)this.elements[nt]&&this.elements[nt].getBaseElement&&(it=this.elements[nt].getBaseElement()),nt+=1;it?this.threeDElements[_e].container.insertBefore(et,it):this.threeDElements[_e].container.appendChild(et);break}_e+=1}},HybridRendererBase.prototype.configAnimation=function(et){var _=createTag("div"),_e=this.animationItem.wrapper,tt=_.style;tt.width=et.w+"px",tt.height=et.h+"px",this.resizerElem=_,styleDiv(_),tt.transformStyle="flat",tt.mozTransformStyle="flat",tt.webkitTransformStyle="flat",this.renderConfig.className&&_.setAttribute("class",this.renderConfig.className),_e.appendChild(_),tt.overflow="hidden";var nt=createNS("svg");nt.setAttribute("width","1"),nt.setAttribute("height","1"),styleDiv(nt),this.resizerElem.appendChild(nt);var it=createNS("defs");nt.appendChild(it),this.data=et,this.setupGlobalData(et,nt),this.globalData.defs=it,this.layers=et.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var et,_=this.layers?this.layers.length:0;for(et=0;et<_;et+=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var et=this.animationItem.wrapper.offsetWidth,_=this.animationItem.wrapper.offsetHeight,_e=et/_,tt=this.globalData.compSize.w/this.globalData.compSize.h,nt,it,rt,st;tt>_e?(nt=et/this.globalData.compSize.w,it=et/this.globalData.compSize.w,rt=0,st=(_-this.globalData.compSize.h*(et/this.globalData.compSize.w))/2):(nt=_/this.globalData.compSize.h,it=_/this.globalData.compSize.h,rt=(et-this.globalData.compSize.w*(_/this.globalData.compSize.h))/2,st=0);var ot=this.resizerElem.style;ot.webkitTransform="matrix3d("+nt+",0,0,0,0,"+it+",0,0,0,0,1,0,"+rt+","+st+",0,1)",ot.transform=ot.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var et=this.globalData.compSize.w,_=this.globalData.compSize.h,_e,tt=this.threeDElements.length;for(_e=0;_e<tt;_e+=1){var nt=this.threeDElements[_e].perspectiveElem.style;nt.webkitPerspective=Math.sqrt(Math.pow(et,2)+Math.pow(_,2))+"px",nt.perspective=nt.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(et){var _,_e=et.length,tt=createTag("div");for(_=0;_<_e;_+=1)if(et[_].xt){var nt=this.createComp(et[_],tt,this.globalData.comp,null);nt.initExpressions(),this.globalData.projectInterface.registerComposition(nt)}};function HCompElement(et,_,_e){this.layers=et.layers,this.supports3d=!et.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(et,_,_e),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,_.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(et,_){for(var _e=0,tt;_e<_;)this.elements[_e]&&this.elements[_e].getBaseElement&&(tt=this.elements[_e].getBaseElement()),_e+=1;tt?this.layerElement.insertBefore(et,tt):this.layerElement.appendChild(et)},HCompElement.prototype.createComp=function(et){return this.supports3d?new HCompElement(et,this.globalData,this):new SVGCompElement(et,this.globalData,this)};function HybridRenderer(et,_){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:_&&_.className||"",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(_&&_.hideOnTransparent===!1),filterSize:{width:_&&_.filterSize&&_.filterSize.width||"400%",height:_&&_.filterSize&&_.filterSize.height||"400%",x:_&&_.filterSize&&_.filterSize.x||"-100%",y:_&&_.filterSize&&_.filterSize.y||"-100%"},runExpressions:!_||_.runExpressions===void 0||_.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(et){return this.supports3d?new HCompElement(et,this.globalData,this):new SVGCompElement(et,this.globalData,this)};var CompExpressionInterface=function(){return function(et){function _(_e){for(var tt=0,nt=et.layers.length;tt<nt;){if(et.layers[tt].nm===_e||et.layers[tt].ind===_e)return et.elements[tt].layerInterface;tt+=1}return null}return Object.defineProperty(_,"_name",{value:et.data.nm}),_.layer=_,_.pixelAspect=1,_.height=et.data.h||et.globalData.compSize.h,_.width=et.data.w||et.globalData.compSize.w,_.pixelAspect=1,_.frameDuration=1/et.globalData.frameRate,_.displayStartTime=0,_.numLayers=et.layers.length,_}}();function _typeof$2(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(_e){return typeof _e}:_typeof$2=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$2(et)}function seedRandom(et,_){var _e=this,tt=256,nt=6,it=52,rt="random",st=_.pow(tt,nt),ot=_.pow(2,it),at=ot*2,At=tt-1,lt;function gt(pt,Vt,yt){var Gt=[];Vt=Vt===!0?{entropy:!0}:Vt||{};var Bt=mt(ht(Vt.entropy?[pt,ft(et)]:pt===null?Ct():pt,3),Gt),vt=new ct(Gt),wt=function(){for(var kt=vt.g(nt),Nt=st,Yt=0;kt<ot;)kt=(kt+Yt)*tt,Nt*=tt,Yt=vt.g(1);for(;kt>=at;)kt/=2,Nt/=2,Yt>>>=1;return(kt+Yt)/Nt};return wt.int32=function(){return vt.g(4)|0},wt.quick=function(){return vt.g(4)/4294967296},wt.double=wt,mt(ft(vt.S),et),(Vt.pass||yt||function(Mt,kt,Nt,Yt){return Yt&&(Yt.S&&dt(Yt,vt),Mt.state=function(){return dt(vt,{})}),Nt?(_[rt]=Mt,kt):Mt})(wt,Bt,"global"in Vt?Vt.global:this==_,Vt.state)}_["seed"+rt]=gt;function ct(pt){var Vt,yt=pt.length,Gt=this,Bt=0,vt=Gt.i=Gt.j=0,wt=Gt.S=[];for(yt||(pt=[yt++]);Bt<tt;)wt[Bt]=Bt++;for(Bt=0;Bt<tt;Bt++)wt[Bt]=wt[vt=At&vt+pt[Bt%yt]+(Vt=wt[Bt])],wt[vt]=Vt;Gt.g=function(Mt){for(var kt,Nt=0,Yt=Gt.i,Lt=Gt.j,Xt=Gt.S;Mt--;)kt=Xt[Yt=At&Yt+1],Nt=Nt*tt+Xt[At&(Xt[Yt]=Xt[Lt=At&Lt+kt])+(Xt[Lt]=kt)];return Gt.i=Yt,Gt.j=Lt,Nt}}function dt(pt,Vt){return Vt.i=pt.i,Vt.j=pt.j,Vt.S=pt.S.slice(),Vt}function ht(pt,Vt){var yt=[],Gt=_typeof$2(pt),Bt;if(Vt&&Gt=="object")for(Bt in pt)try{yt.push(ht(pt[Bt],Vt-1))}catch{}return yt.length?yt:Gt=="string"?pt:pt+"\0"}function mt(pt,Vt){for(var yt=pt+"",Gt,Bt=0;Bt<yt.length;)Vt[At&Bt]=At&(Gt^=Vt[At&Bt]*19)+yt.charCodeAt(Bt++);return ft(Vt)}function Ct(){try{var pt=new Uint8Array(tt);return(_e.crypto||_e.msCrypto).getRandomValues(pt),ft(pt)}catch{var Vt=_e.navigator,yt=Vt&&Vt.plugins;return[+new Date,_e,yt,_e.screen,ft(et)]}}function ft(pt){return String.fromCharCode.apply(0,pt)}mt(_.random(),et)}function initialize$2(et){seedRandom([],et)}var propTypes={SHAPE:"shape"};function _typeof$1(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(_e){return typeof _e}:_typeof$1=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$1(et)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(et){return et.constructor===Array||et.constructor===Float32Array}function isNumerable(et,_){return et==="number"||_ instanceof Number||et==="boolean"||et==="string"}function $bm_neg(et){var _=_typeof$1(et);if(_==="number"||et instanceof Number||_==="boolean")return-et;if($bm_isInstanceOfArray(et)){var _e,tt=et.length,nt=[];for(_e=0;_e<tt;_e+=1)nt[_e]=-et[_e];return nt}return et.propType?et.v:-et}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(et,_){var _e=_typeof$1(et),tt=_typeof$1(_);if(isNumerable(_e,et)&&isNumerable(tt,_)||_e==="string"||tt==="string")return et+_;if($bm_isInstanceOfArray(et)&&isNumerable(tt,_))return et=et.slice(0),et[0]+=_,et;if(isNumerable(_e,et)&&$bm_isInstanceOfArray(_))return _=_.slice(0),_[0]=et+_[0],_;if($bm_isInstanceOfArray(et)&&$bm_isInstanceOfArray(_)){for(var nt=0,it=et.length,rt=_.length,st=[];nt<it||nt<rt;)(typeof et[nt]=="number"||et[nt]instanceof Number)&&(typeof _[nt]=="number"||_[nt]instanceof Number)?st[nt]=et[nt]+_[nt]:st[nt]=_[nt]===void 0?et[nt]:et[nt]||_[nt],nt+=1;return st}return 0}var add=sum;function sub(et,_){var _e=_typeof$1(et),tt=_typeof$1(_);if(isNumerable(_e,et)&&isNumerable(tt,_))return _e==="string"&&(et=parseInt(et,10)),tt==="string"&&(_=parseInt(_,10)),et-_;if($bm_isInstanceOfArray(et)&&isNumerable(tt,_))return et=et.slice(0),et[0]-=_,et;if(isNumerable(_e,et)&&$bm_isInstanceOfArray(_))return _=_.slice(0),_[0]=et-_[0],_;if($bm_isInstanceOfArray(et)&&$bm_isInstanceOfArray(_)){for(var nt=0,it=et.length,rt=_.length,st=[];nt<it||nt<rt;)(typeof et[nt]=="number"||et[nt]instanceof Number)&&(typeof _[nt]=="number"||_[nt]instanceof Number)?st[nt]=et[nt]-_[nt]:st[nt]=_[nt]===void 0?et[nt]:et[nt]||_[nt],nt+=1;return st}return 0}function mul(et,_){var _e=_typeof$1(et),tt=_typeof$1(_),nt;if(isNumerable(_e,et)&&isNumerable(tt,_))return et*_;var it,rt;if($bm_isInstanceOfArray(et)&&isNumerable(tt,_)){for(rt=et.length,nt=createTypedArray("float32",rt),it=0;it<rt;it+=1)nt[it]=et[it]*_;return nt}if(isNumerable(_e,et)&&$bm_isInstanceOfArray(_)){for(rt=_.length,nt=createTypedArray("float32",rt),it=0;it<rt;it+=1)nt[it]=et*_[it];return nt}return 0}function div(et,_){var _e=_typeof$1(et),tt=_typeof$1(_),nt;if(isNumerable(_e,et)&&isNumerable(tt,_))return et/_;var it,rt;if($bm_isInstanceOfArray(et)&&isNumerable(tt,_)){for(rt=et.length,nt=createTypedArray("float32",rt),it=0;it<rt;it+=1)nt[it]=et[it]/_;return nt}if(isNumerable(_e,et)&&$bm_isInstanceOfArray(_)){for(rt=_.length,nt=createTypedArray("float32",rt),it=0;it<rt;it+=1)nt[it]=et/_[it];return nt}return 0}function mod(et,_){return typeof et=="string"&&(et=parseInt(et,10)),typeof _=="string"&&(_=parseInt(_,10)),et%_}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(et,_,_e){if(_>_e){var tt=_e;_e=_,_=tt}return Math.min(Math.max(et,_),_e)}function radiansToDegrees(et){return et/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(et){return et*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(et,_){if(typeof et=="number"||et instanceof Number)return _=_||0,Math.abs(et-_);_||(_=helperLengthArray);var _e,tt=Math.min(et.length,_.length),nt=0;for(_e=0;_e<tt;_e+=1)nt+=Math.pow(_[_e]-et[_e],2);return Math.sqrt(nt)}function normalize(et){return div(et,length(et))}function rgbToHsl(et){var _=et[0],_e=et[1],tt=et[2],nt=Math.max(_,_e,tt),it=Math.min(_,_e,tt),rt,st,ot=(nt+it)/2;if(nt===it)rt=0,st=0;else{var at=nt-it;switch(st=ot>.5?at/(2-nt-it):at/(nt+it),nt){case _:rt=(_e-tt)/at+(_e<tt?6:0);break;case _e:rt=(tt-_)/at+2;break;case tt:rt=(_-_e)/at+4;break}rt/=6}return[rt,st,ot,et[3]]}function hue2rgb(et,_,_e){return _e<0&&(_e+=1),_e>1&&(_e-=1),_e<1/6?et+(_-et)*6*_e:_e<1/2?_:_e<2/3?et+(_-et)*(2/3-_e)*6:et}function hslToRgb(et){var _=et[0],_e=et[1],tt=et[2],nt,it,rt;if(_e===0)nt=tt,rt=tt,it=tt;else{var st=tt<.5?tt*(1+_e):tt+_e-tt*_e,ot=2*tt-st;nt=hue2rgb(ot,st,_+1/3),it=hue2rgb(ot,st,_),rt=hue2rgb(ot,st,_-1/3)}return[nt,it,rt,et[3]]}function linear(et,_,_e,tt,nt){if((tt===void 0||nt===void 0)&&(tt=_,nt=_e,_=0,_e=1),_e<_){var it=_e;_e=_,_=it}if(et<=_)return tt;if(et>=_e)return nt;var rt=_e===_?0:(et-_)/(_e-_);if(!tt.length)return tt+(nt-tt)*rt;var st,ot=tt.length,at=createTypedArray("float32",ot);for(st=0;st<ot;st+=1)at[st]=tt[st]+(nt[st]-tt[st])*rt;return at}function random(et,_){if(_===void 0&&(et===void 0?(et=0,_=1):(_=et,et=void 0)),_.length){var _e,tt=_.length;et||(et=createTypedArray("float32",tt));var nt=createTypedArray("float32",tt),it=BMMath.random();for(_e=0;_e<tt;_e+=1)nt[_e]=et[_e]+it*(_[_e]-et[_e]);return nt}et===void 0&&(et=0);var rt=BMMath.random();return et+rt*(_-et)}function createPath(et,_,_e,tt){var nt,it=et.length,rt=shapePool.newElement();rt.setPathData(!!tt,it);var st=[0,0],ot,at;for(nt=0;nt<it;nt+=1)ot=_&&_[nt]?_[nt]:st,at=_e&&_e[nt]?_e[nt]:st,rt.setTripleAt(et[nt][0],et[nt][1],at[0]+et[nt][0],at[1]+et[nt][1],ot[0]+et[nt][0],ot[1]+et[nt][1],nt,!0);return rt}function initiateExpression(elem,data,property){function noOp(et){return et}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function et(_,_e){var tt,nt,it=this.pv.length?this.pv.length:1,rt=createTypedArray("float32",it);_=5;var st=Math.floor(time*_);for(tt=0,nt=0;tt<st;){for(nt=0;nt<it;nt+=1)rt[nt]+=-_e+_e*2*BMMath.random();tt+=1}var ot=time*_,at=ot-Math.floor(ot),At=createTypedArray("float32",it);if(it>1){for(nt=0;nt<it;nt+=1)At[nt]=this.pv[nt]+rt[nt]+(-_e+_e*2*BMMath.random())*at;return At}return this.pv+rt[0]+(-_e+_e*2*BMMath.random())*at}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(et,_){return loopIn(et,_,!0)}function loopOutDuration(et,_){return loopOut(et,_,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(et,_){var _e=[_[0]-et[0],_[1]-et[1],_[2]-et[2]],tt=Math.atan2(_e[0],Math.sqrt(_e[1]*_e[1]+_e[2]*_e[2]))/degToRads,nt=-Math.atan2(_e[1],_e[2])/degToRads;return[nt,tt,0]}function easeOut(et,_,_e,tt,nt){return applyEase(easeOutBez,et,_,_e,tt,nt)}function easeIn(et,_,_e,tt,nt){return applyEase(easeInBez,et,_,_e,tt,nt)}function ease(et,_,_e,tt,nt){return applyEase(easeInOutBez,et,_,_e,tt,nt)}function applyEase(et,_,_e,tt,nt,it){nt===void 0?(nt=_e,it=tt):_=(_-_e)/(tt-_e),_>1?_=1:_<0&&(_=0);var rt=et(_);if($bm_isInstanceOfArray(nt)){var st,ot=nt.length,at=createTypedArray("float32",ot);for(st=0;st<ot;st+=1)at[st]=(it[st]-nt[st])*rt+nt[st];return at}return(it-nt)*rt+nt}function nearestKey(et){var _,_e=data.k.length,tt,nt;if(!data.k.length||typeof data.k[0]=="number")tt=0,nt=0;else if(tt=-1,et*=elem.comp.globalData.frameRate,et<data.k[0].t)tt=1,nt=data.k[0].t;else{for(_=0;_<_e-1;_+=1)if(et===data.k[_].t){tt=_+1,nt=data.k[_].t;break}else if(et>data.k[_].t&&et<data.k[_+1].t){et-data.k[_].t>data.k[_+1].t-et?(tt=_+2,nt=data.k[_+1].t):(tt=_+1,nt=data.k[_].t);break}tt===-1&&(tt=_+1,nt=data.k[_].t)}var it={};return it.index=tt,it.time=nt/elem.comp.globalData.frameRate,it}function key(et){var _,_e,tt;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+et);et-=1,_={time:data.k[et].t/elem.comp.globalData.frameRate,value:[]};var nt=Object.prototype.hasOwnProperty.call(data.k[et],"s")?data.k[et].s:data.k[et-1].e;for(tt=nt.length,_e=0;_e<tt;_e+=1)_[_e]=nt[_e],_.value[_e]=nt[_e];return _}function framesToTime(et,_){return _||(_=elem.comp.globalData.frameRate),et/_}function timeToFrames(et,_){return!et&&et!==0&&(et=time),_||(_=elem.comp.globalData.frameRate),et*_}function seedRandom(et){BMMath.seedrandom(randSeed+et)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(et,_){return typeof value=="string"?_===void 0?value.substring(et):value.substring(et,_):""}function substr(et,_){return typeof value=="string"?_===void 0?value.substr(et):value.substr(et,_):""}function posterizeTime(et){time=et===0?0:Math.floor(time*et)/et,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(et){return value=et,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var et={};et.initExpressions=_,et.resetFrame=ExpressionManager.resetFrame;function _(_e){var tt=0,nt=[];function it(){tt+=1}function rt(){tt-=1,tt===0&&ot()}function st(at){nt.indexOf(at)===-1&&nt.push(at)}function ot(){var at,At=nt.length;for(at=0;at<At;at+=1)nt[at].release();nt.length=0}_e.renderer.compInterface=CompExpressionInterface(_e.renderer),_e.renderer.globalData.projectInterface.registerComposition(_e.renderer),_e.renderer.globalData.pushExpression=it,_e.renderer.globalData.popExpression=rt,_e.renderer.globalData.registerExpressionProperty=st}return et}(),MaskManagerInterface=function(){function et(_e,tt){this._mask=_e,this._data=tt}Object.defineProperty(et.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(et.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var _=function(tt){var nt=createSizedArray(tt.viewData.length),it,rt=tt.viewData.length;for(it=0;it<rt;it+=1)nt[it]=new et(tt.viewData[it],tt.masksProperties[it]);var st=function(at){for(it=0;it<rt;){if(tt.masksProperties[it].nm===at)return nt[it];it+=1}return null};return st};return _}(),ExpressionPropertyInterface=function(){var et={pv:0,v:0,mult:1},_={pv:[0,0,0],v:[0,0,0],mult:1};function _e(rt,st,ot){Object.defineProperty(rt,"velocity",{get:function(){return st.getVelocityAtTime(st.comp.currentFrame)}}),rt.numKeys=st.keyframes?st.keyframes.length:0,rt.key=function(at){if(!rt.numKeys)return 0;var At="";"s"in st.keyframes[at-1]?At=st.keyframes[at-1].s:"e"in st.keyframes[at-2]?At=st.keyframes[at-2].e:At=st.keyframes[at-2].s;var lt=ot==="unidimensional"?new Number(At):Object.assign({},At);return lt.time=st.keyframes[at-1].t/st.elem.comp.globalData.frameRate,lt.value=ot==="unidimensional"?At[0]:At,lt},rt.valueAtTime=st.getValueAtTime,rt.speedAtTime=st.getSpeedAtTime,rt.velocityAtTime=st.getVelocityAtTime,rt.propertyGroup=st.propertyGroup}function tt(rt){(!rt||!("pv"in rt))&&(rt=et);var st=1/rt.mult,ot=rt.pv*st,at=new Number(ot);return at.value=ot,_e(at,rt,"unidimensional"),function(){return rt.k&&rt.getValue(),ot=rt.v*st,at.value!==ot&&(at=new Number(ot),at.value=ot,_e(at,rt,"unidimensional")),at}}function nt(rt){(!rt||!("pv"in rt))&&(rt=_);var st=1/rt.mult,ot=rt.data&&rt.data.l||rt.pv.length,at=createTypedArray("float32",ot),At=createTypedArray("float32",ot);return at.value=At,_e(at,rt,"multidimensional"),function(){rt.k&&rt.getValue();for(var lt=0;lt<ot;lt+=1)At[lt]=rt.v[lt]*st,at[lt]=At[lt];return at}}function it(){return et}return function(rt){return rt?rt.propType==="unidimensional"?tt(rt):nt(rt):it}}(),TransformExpressionInterface=function(){return function(et){function _(rt){switch(rt){case"scale":case"Scale":case"ADBE Scale":case 6:return _.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return _.rotation;case"ADBE Rotate X":return _.xRotation;case"ADBE Rotate Y":return _.yRotation;case"position":case"Position":case"ADBE Position":case 2:return _.position;case"ADBE Position_0":return _.xPosition;case"ADBE Position_1":return _.yPosition;case"ADBE Position_2":return _.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return _.anchorPoint;case"opacity":case"Opacity":case 11:return _.opacity;default:return null}}Object.defineProperty(_,"rotation",{get:ExpressionPropertyInterface(et.r||et.rz)}),Object.defineProperty(_,"zRotation",{get:ExpressionPropertyInterface(et.rz||et.r)}),Object.defineProperty(_,"xRotation",{get:ExpressionPropertyInterface(et.rx)}),Object.defineProperty(_,"yRotation",{get:ExpressionPropertyInterface(et.ry)}),Object.defineProperty(_,"scale",{get:ExpressionPropertyInterface(et.s)});var _e,tt,nt,it;return et.p?it=ExpressionPropertyInterface(et.p):(_e=ExpressionPropertyInterface(et.px),tt=ExpressionPropertyInterface(et.py),et.pz&&(nt=ExpressionPropertyInterface(et.pz))),Object.defineProperty(_,"position",{get:function(){return et.p?it():[_e(),tt(),nt?nt():0]}}),Object.defineProperty(_,"xPosition",{get:ExpressionPropertyInterface(et.px)}),Object.defineProperty(_,"yPosition",{get:ExpressionPropertyInterface(et.py)}),Object.defineProperty(_,"zPosition",{get:ExpressionPropertyInterface(et.pz)}),Object.defineProperty(_,"anchorPoint",{get:ExpressionPropertyInterface(et.a)}),Object.defineProperty(_,"opacity",{get:ExpressionPropertyInterface(et.o)}),Object.defineProperty(_,"skew",{get:ExpressionPropertyInterface(et.sk)}),Object.defineProperty(_,"skewAxis",{get:ExpressionPropertyInterface(et.sa)}),Object.defineProperty(_,"orientation",{get:ExpressionPropertyInterface(et.or)}),_}}(),LayerExpressionInterface=function(){function et(at){var At=new Matrix;if(at!==void 0){var lt=this._elem.finalTransform.mProp.getValueAtTime(at);lt.clone(At)}else{var gt=this._elem.finalTransform.mProp;gt.applyToMatrix(At)}return At}function _(at,At){var lt=this.getMatrix(At);return lt.props[12]=0,lt.props[13]=0,lt.props[14]=0,this.applyPoint(lt,at)}function _e(at,At){var lt=this.getMatrix(At);return this.applyPoint(lt,at)}function tt(at,At){var lt=this.getMatrix(At);return lt.props[12]=0,lt.props[13]=0,lt.props[14]=0,this.invertPoint(lt,at)}function nt(at,At){var lt=this.getMatrix(At);return this.invertPoint(lt,at)}function it(at,At){if(this._elem.hierarchy&&this._elem.hierarchy.length){var lt,gt=this._elem.hierarchy.length;for(lt=0;lt<gt;lt+=1)this._elem.hierarchy[lt].finalTransform.mProp.applyToMatrix(at)}return at.applyToPointArray(At[0],At[1],At[2]||0)}function rt(at,At){if(this._elem.hierarchy&&this._elem.hierarchy.length){var lt,gt=this._elem.hierarchy.length;for(lt=0;lt<gt;lt+=1)this._elem.hierarchy[lt].finalTransform.mProp.applyToMatrix(at)}return at.inversePoint(At)}function st(at){var At=new Matrix;if(At.reset(),this._elem.finalTransform.mProp.applyToMatrix(At),this._elem.hierarchy&&this._elem.hierarchy.length){var lt,gt=this._elem.hierarchy.length;for(lt=0;lt<gt;lt+=1)this._elem.hierarchy[lt].finalTransform.mProp.applyToMatrix(At);return At.inversePoint(at)}return At.inversePoint(at)}function ot(){return[1,1,1,1]}return function(at){var At;function lt(ht){ct.mask=new MaskManagerInterface(ht,at)}function gt(ht){ct.effect=ht}function ct(ht){switch(ht){case"ADBE Root Vectors Group":case"Contents":case 2:return ct.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return At;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return ct.effect;case"ADBE Text Properties":return ct.textInterface;default:return null}}ct.getMatrix=et,ct.invertPoint=rt,ct.applyPoint=it,ct.toWorld=_e,ct.toWorldVec=_,ct.fromWorld=nt,ct.fromWorldVec=tt,ct.toComp=_e,ct.fromComp=st,ct.sampleImage=ot,ct.sourceRectAtTime=at.sourceRectAtTime.bind(at),ct._elem=at,At=TransformExpressionInterface(at.finalTransform.mProp);var dt=getDescriptor(At,"anchorPoint");return Object.defineProperties(ct,{hasParent:{get:function(){return at.hierarchy.length}},parent:{get:function(){return at.hierarchy[0].layerInterface}},rotation:getDescriptor(At,"rotation"),scale:getDescriptor(At,"scale"),position:getDescriptor(At,"position"),opacity:getDescriptor(At,"opacity"),anchorPoint:dt,anchor_point:dt,transform:{get:function(){return At}},active:{get:function(){return at.isInRange}}}),ct.startTime=at.data.st,ct.index=at.data.ind,ct.source=at.data.refId,ct.height=at.data.ty===0?at.data.h:100,ct.width=at.data.ty===0?at.data.w:100,ct.inPoint=at.data.ip/at.comp.globalData.frameRate,ct.outPoint=at.data.op/at.comp.globalData.frameRate,ct._name=at.data.nm,ct.registerMaskInterface=lt,ct.registerEffectsInterface=gt,ct}}(),propertyGroupFactory=function(){return function(et,_){return function(_e){return _e=_e===void 0?1:_e,_e<=0?et:_(_e-1)}}}(),PropertyInterface=function(){return function(et,_){var _e={_name:et};function tt(nt){return nt=nt===void 0?1:nt,nt<=0?_e:_(nt-1)}return tt}}(),EffectsExpressionInterface=function(){var et={createEffectsInterface:_};function _(nt,it){if(nt.effectsManager){var rt=[],st=nt.data.ef,ot,at=nt.effectsManager.effectElements.length;for(ot=0;ot<at;ot+=1)rt.push(_e(st[ot],nt.effectsManager.effectElements[ot],it,nt));var At=nt.data.ef||[],lt=function(ct){for(ot=0,at=At.length;ot<at;){if(ct===At[ot].nm||ct===At[ot].mn||ct===At[ot].ix)return rt[ot];ot+=1}return null};return Object.defineProperty(lt,"numProperties",{get:function(){return At.length}}),lt}return null}function _e(nt,it,rt,st){function ot(ct){for(var dt=nt.ef,ht=0,mt=dt.length;ht<mt;){if(ct===dt[ht].nm||ct===dt[ht].mn||ct===dt[ht].ix)return dt[ht].ty===5?At[ht]:At[ht]();ht+=1}throw new Error}var at=propertyGroupFactory(ot,rt),At=[],lt,gt=nt.ef.length;for(lt=0;lt<gt;lt+=1)nt.ef[lt].ty===5?At.push(_e(nt.ef[lt],it.effectElements[lt],it.effectElements[lt].propertyGroup,st)):At.push(tt(it.effectElements[lt],nt.ef[lt].ty,st,at));return nt.mn==="ADBE Color Control"&&Object.defineProperty(ot,"color",{get:function(){return At[0]()}}),Object.defineProperties(ot,{numProperties:{get:function(){return nt.np}},_name:{value:nt.nm},propertyGroup:{value:at}}),ot.enabled=nt.en!==0,ot.active=ot.enabled,ot}function tt(nt,it,rt,st){var ot=ExpressionPropertyInterface(nt.p);function at(){return it===10?rt.comp.compInterface(nt.p.v):ot()}return nt.p.setGroupProperty&&nt.p.setGroupProperty(PropertyInterface("",st)),at}return et}(),ShapePathInterface=function(){return function(_,_e,tt){var nt=_e.sh;function it(st){return st==="Shape"||st==="shape"||st==="Path"||st==="path"||st==="ADBE Vector Shape"||st===2?it.path:null}var rt=propertyGroupFactory(it,tt);return nt.setGroupProperty(PropertyInterface("Path",rt)),Object.defineProperties(it,{path:{get:function(){return nt.k&&nt.getValue(),nt}},shape:{get:function(){return nt.k&&nt.getValue(),nt}},_name:{value:_.nm},ix:{value:_.ix},propertyIndex:{value:_.ix},mn:{value:_.mn},propertyGroup:{value:tt}}),it}}(),ShapeExpressionInterface=function(){function et(dt,ht,mt){var Ct=[],ft,pt=dt?dt.length:0;for(ft=0;ft<pt;ft+=1)dt[ft].ty==="gr"?Ct.push(_e(dt[ft],ht[ft],mt)):dt[ft].ty==="fl"?Ct.push(tt(dt[ft],ht[ft],mt)):dt[ft].ty==="st"?Ct.push(rt(dt[ft],ht[ft],mt)):dt[ft].ty==="tm"?Ct.push(st(dt[ft],ht[ft],mt)):dt[ft].ty==="tr"||(dt[ft].ty==="el"?Ct.push(at(dt[ft],ht[ft],mt)):dt[ft].ty==="sr"?Ct.push(At(dt[ft],ht[ft],mt)):dt[ft].ty==="sh"?Ct.push(ShapePathInterface(dt[ft],ht[ft],mt)):dt[ft].ty==="rc"?Ct.push(lt(dt[ft],ht[ft],mt)):dt[ft].ty==="rd"?Ct.push(gt(dt[ft],ht[ft],mt)):dt[ft].ty==="rp"?Ct.push(ct(dt[ft],ht[ft],mt)):dt[ft].ty==="gf"?Ct.push(nt(dt[ft],ht[ft],mt)):Ct.push(it(dt[ft],ht[ft])));return Ct}function _(dt,ht,mt){var Ct,ft=function(yt){for(var Gt=0,Bt=Ct.length;Gt<Bt;){if(Ct[Gt]._name===yt||Ct[Gt].mn===yt||Ct[Gt].propertyIndex===yt||Ct[Gt].ix===yt||Ct[Gt].ind===yt)return Ct[Gt];Gt+=1}return typeof yt=="number"?Ct[yt-1]:null};ft.propertyGroup=propertyGroupFactory(ft,mt),Ct=et(dt.it,ht.it,ft.propertyGroup),ft.numProperties=Ct.length;var pt=ot(dt.it[dt.it.length-1],ht.it[ht.it.length-1],ft.propertyGroup);return ft.transform=pt,ft.propertyIndex=dt.cix,ft._name=dt.nm,ft}function _e(dt,ht,mt){var Ct=function(yt){switch(yt){case"ADBE Vectors Group":case"Contents":case 2:return Ct.content;default:return Ct.transform}};Ct.propertyGroup=propertyGroupFactory(Ct,mt);var ft=_(dt,ht,Ct.propertyGroup),pt=ot(dt.it[dt.it.length-1],ht.it[ht.it.length-1],Ct.propertyGroup);return Ct.content=ft,Ct.transform=pt,Object.defineProperty(Ct,"_name",{get:function(){return dt.nm}}),Ct.numProperties=dt.np,Ct.propertyIndex=dt.ix,Ct.nm=dt.nm,Ct.mn=dt.mn,Ct}function tt(dt,ht,mt){function Ct(ft){return ft==="Color"||ft==="color"?Ct.color:ft==="Opacity"||ft==="opacity"?Ct.opacity:null}return Object.defineProperties(Ct,{color:{get:ExpressionPropertyInterface(ht.c)},opacity:{get:ExpressionPropertyInterface(ht.o)},_name:{value:dt.nm},mn:{value:dt.mn}}),ht.c.setGroupProperty(PropertyInterface("Color",mt)),ht.o.setGroupProperty(PropertyInterface("Opacity",mt)),Ct}function nt(dt,ht,mt){function Ct(ft){return ft==="Start Point"||ft==="start point"?Ct.startPoint:ft==="End Point"||ft==="end point"?Ct.endPoint:ft==="Opacity"||ft==="opacity"?Ct.opacity:null}return Object.defineProperties(Ct,{startPoint:{get:ExpressionPropertyInterface(ht.s)},endPoint:{get:ExpressionPropertyInterface(ht.e)},opacity:{get:ExpressionPropertyInterface(ht.o)},type:{get:function(){return"a"}},_name:{value:dt.nm},mn:{value:dt.mn}}),ht.s.setGroupProperty(PropertyInterface("Start Point",mt)),ht.e.setGroupProperty(PropertyInterface("End Point",mt)),ht.o.setGroupProperty(PropertyInterface("Opacity",mt)),Ct}function it(){function dt(){return null}return dt}function rt(dt,ht,mt){var Ct=propertyGroupFactory(Bt,mt),ft=propertyGroupFactory(Gt,Ct);function pt(vt){Object.defineProperty(Gt,dt.d[vt].nm,{get:ExpressionPropertyInterface(ht.d.dataProps[vt].p)})}var Vt,yt=dt.d?dt.d.length:0,Gt={};for(Vt=0;Vt<yt;Vt+=1)pt(Vt),ht.d.dataProps[Vt].p.setGroupProperty(ft);function Bt(vt){return vt==="Color"||vt==="color"?Bt.color:vt==="Opacity"||vt==="opacity"?Bt.opacity:vt==="Stroke Width"||vt==="stroke width"?Bt.strokeWidth:null}return Object.defineProperties(Bt,{color:{get:ExpressionPropertyInterface(ht.c)},opacity:{get:ExpressionPropertyInterface(ht.o)},strokeWidth:{get:ExpressionPropertyInterface(ht.w)},dash:{get:function(){return Gt}},_name:{value:dt.nm},mn:{value:dt.mn}}),ht.c.setGroupProperty(PropertyInterface("Color",Ct)),ht.o.setGroupProperty(PropertyInterface("Opacity",Ct)),ht.w.setGroupProperty(PropertyInterface("Stroke Width",Ct)),Bt}function st(dt,ht,mt){function Ct(pt){return pt===dt.e.ix||pt==="End"||pt==="end"?Ct.end:pt===dt.s.ix?Ct.start:pt===dt.o.ix?Ct.offset:null}var ft=propertyGroupFactory(Ct,mt);return Ct.propertyIndex=dt.ix,ht.s.setGroupProperty(PropertyInterface("Start",ft)),ht.e.setGroupProperty(PropertyInterface("End",ft)),ht.o.setGroupProperty(PropertyInterface("Offset",ft)),Ct.propertyIndex=dt.ix,Ct.propertyGroup=mt,Object.defineProperties(Ct,{start:{get:ExpressionPropertyInterface(ht.s)},end:{get:ExpressionPropertyInterface(ht.e)},offset:{get:ExpressionPropertyInterface(ht.o)},_name:{value:dt.nm}}),Ct.mn=dt.mn,Ct}function ot(dt,ht,mt){function Ct(pt){return dt.a.ix===pt||pt==="Anchor Point"?Ct.anchorPoint:dt.o.ix===pt||pt==="Opacity"?Ct.opacity:dt.p.ix===pt||pt==="Position"?Ct.position:dt.r.ix===pt||pt==="Rotation"||pt==="ADBE Vector Rotation"?Ct.rotation:dt.s.ix===pt||pt==="Scale"?Ct.scale:dt.sk&&dt.sk.ix===pt||pt==="Skew"?Ct.skew:dt.sa&&dt.sa.ix===pt||pt==="Skew Axis"?Ct.skewAxis:null}var ft=propertyGroupFactory(Ct,mt);return ht.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ft)),ht.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ft)),ht.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ft)),ht.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ft)),ht.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ft)),ht.transform.mProps.sk&&(ht.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ft)),ht.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ft))),ht.transform.op.setGroupProperty(PropertyInterface("Opacity",ft)),Object.defineProperties(Ct,{opacity:{get:ExpressionPropertyInterface(ht.transform.mProps.o)},position:{get:ExpressionPropertyInterface(ht.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(ht.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(ht.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(ht.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(ht.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(ht.transform.mProps.sa)},_name:{value:dt.nm}}),Ct.ty="tr",Ct.mn=dt.mn,Ct.propertyGroup=mt,Ct}function at(dt,ht,mt){function Ct(Vt){return dt.p.ix===Vt?Ct.position:dt.s.ix===Vt?Ct.size:null}var ft=propertyGroupFactory(Ct,mt);Ct.propertyIndex=dt.ix;var pt=ht.sh.ty==="tm"?ht.sh.prop:ht.sh;return pt.s.setGroupProperty(PropertyInterface("Size",ft)),pt.p.setGroupProperty(PropertyInterface("Position",ft)),Object.defineProperties(Ct,{size:{get:ExpressionPropertyInterface(pt.s)},position:{get:ExpressionPropertyInterface(pt.p)},_name:{value:dt.nm}}),Ct.mn=dt.mn,Ct}function At(dt,ht,mt){function Ct(Vt){return dt.p.ix===Vt?Ct.position:dt.r.ix===Vt?Ct.rotation:dt.pt.ix===Vt?Ct.points:dt.or.ix===Vt||Vt==="ADBE Vector Star Outer Radius"?Ct.outerRadius:dt.os.ix===Vt?Ct.outerRoundness:dt.ir&&(dt.ir.ix===Vt||Vt==="ADBE Vector Star Inner Radius")?Ct.innerRadius:dt.is&&dt.is.ix===Vt?Ct.innerRoundness:null}var ft=propertyGroupFactory(Ct,mt),pt=ht.sh.ty==="tm"?ht.sh.prop:ht.sh;return Ct.propertyIndex=dt.ix,pt.or.setGroupProperty(PropertyInterface("Outer Radius",ft)),pt.os.setGroupProperty(PropertyInterface("Outer Roundness",ft)),pt.pt.setGroupProperty(PropertyInterface("Points",ft)),pt.p.setGroupProperty(PropertyInterface("Position",ft)),pt.r.setGroupProperty(PropertyInterface("Rotation",ft)),dt.ir&&(pt.ir.setGroupProperty(PropertyInterface("Inner Radius",ft)),pt.is.setGroupProperty(PropertyInterface("Inner Roundness",ft))),Object.defineProperties(Ct,{position:{get:ExpressionPropertyInterface(pt.p)},rotation:{get:ExpressionPropertyInterface(pt.r)},points:{get:ExpressionPropertyInterface(pt.pt)},outerRadius:{get:ExpressionPropertyInterface(pt.or)},outerRoundness:{get:ExpressionPropertyInterface(pt.os)},innerRadius:{get:ExpressionPropertyInterface(pt.ir)},innerRoundness:{get:ExpressionPropertyInterface(pt.is)},_name:{value:dt.nm}}),Ct.mn=dt.mn,Ct}function lt(dt,ht,mt){function Ct(Vt){return dt.p.ix===Vt?Ct.position:dt.r.ix===Vt?Ct.roundness:dt.s.ix===Vt||Vt==="Size"||Vt==="ADBE Vector Rect Size"?Ct.size:null}var ft=propertyGroupFactory(Ct,mt),pt=ht.sh.ty==="tm"?ht.sh.prop:ht.sh;return Ct.propertyIndex=dt.ix,pt.p.setGroupProperty(PropertyInterface("Position",ft)),pt.s.setGroupProperty(PropertyInterface("Size",ft)),pt.r.setGroupProperty(PropertyInterface("Rotation",ft)),Object.defineProperties(Ct,{position:{get:ExpressionPropertyInterface(pt.p)},roundness:{get:ExpressionPropertyInterface(pt.r)},size:{get:ExpressionPropertyInterface(pt.s)},_name:{value:dt.nm}}),Ct.mn=dt.mn,Ct}function gt(dt,ht,mt){function Ct(Vt){return dt.r.ix===Vt||Vt==="Round Corners 1"?Ct.radius:null}var ft=propertyGroupFactory(Ct,mt),pt=ht;return Ct.propertyIndex=dt.ix,pt.rd.setGroupProperty(PropertyInterface("Radius",ft)),Object.defineProperties(Ct,{radius:{get:ExpressionPropertyInterface(pt.rd)},_name:{value:dt.nm}}),Ct.mn=dt.mn,Ct}function ct(dt,ht,mt){function Ct(Vt){return dt.c.ix===Vt||Vt==="Copies"?Ct.copies:dt.o.ix===Vt||Vt==="Offset"?Ct.offset:null}var ft=propertyGroupFactory(Ct,mt),pt=ht;return Ct.propertyIndex=dt.ix,pt.c.setGroupProperty(PropertyInterface("Copies",ft)),pt.o.setGroupProperty(PropertyInterface("Offset",ft)),Object.defineProperties(Ct,{copies:{get:ExpressionPropertyInterface(pt.c)},offset:{get:ExpressionPropertyInterface(pt.o)},_name:{value:dt.nm}}),Ct.mn=dt.mn,Ct}return function(dt,ht,mt){var Ct;function ft(Vt){if(typeof Vt=="number")return Vt=Vt===void 0?1:Vt,Vt===0?mt:Ct[Vt-1];for(var yt=0,Gt=Ct.length;yt<Gt;){if(Ct[yt]._name===Vt)return Ct[yt];yt+=1}return null}function pt(){return mt}return ft.propertyGroup=propertyGroupFactory(ft,pt),Ct=et(dt,ht,ft.propertyGroup),ft.numProperties=Ct.length,ft._name="Contents",ft}}(),TextExpressionInterface=function(){return function(et){var _;function _e(tt){switch(tt){case"ADBE Text Document":return _e.sourceText;default:return null}}return Object.defineProperty(_e,"sourceText",{get:function(){et.textProperty.getValue();var nt=et.textProperty.currentData.t;return(!_||nt!==_.value)&&(_=new String(nt),_.value=nt||new String(nt),Object.defineProperty(_,"style",{get:function(){return{fillColor:et.textProperty.currentData.fc}}})),_}}),_e}}();function _typeof(et){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(_e){return typeof _e}:_typeof=function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof(et)}var FootageInterface=function(){var et=function(tt){var nt="",it=tt.getFootageData();function rt(){return nt="",it=tt.getFootageData(),st}function st(ot){if(it[ot])return nt=ot,it=it[ot],_typeof(it)==="object"?st:it;var at=ot.indexOf(nt);if(at!==-1){var At=parseInt(ot.substr(at+nt.length),10);return it=it[At],_typeof(it)==="object"?st:it}return""}return rt},_=function(tt){function nt(it){return it==="Outline"?nt.outlineInterface():null}return nt._name="Outline",nt.outlineInterface=et(tt),nt};return function(_e){function tt(nt){return nt==="Data"?tt.dataInterface:null}return tt._name="Data",tt.dataInterface=_(_e),tt}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(et){return interfaces[et]||null}var expressionHelpers=function(){function et(rt,st,ot){st.x&&(ot.k=!0,ot.x=!0,ot.initiateExpression=ExpressionManager.initiateExpression,ot.effectsSequence.push(ot.initiateExpression(rt,st,ot).bind(ot)))}function _(rt){return rt*=this.elem.globalData.frameRate,rt-=this.offsetTime,rt!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<rt?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(rt,this._cachingAtTime),this._cachingAtTime.lastFrame=rt),this._cachingAtTime.value}function _e(rt){var st=-.01,ot=this.getValueAtTime(rt),at=this.getValueAtTime(rt+st),At=0;if(ot.length){var lt;for(lt=0;lt<ot.length;lt+=1)At+=Math.pow(at[lt]-ot[lt],2);At=Math.sqrt(At)*100}else At=0;return At}function tt(rt){if(this.vel!==void 0)return this.vel;var st=-.001,ot=this.getValueAtTime(rt),at=this.getValueAtTime(rt+st),At;if(ot.length){At=createTypedArray("float32",ot.length);var lt;for(lt=0;lt<ot.length;lt+=1)At[lt]=(at[lt]-ot[lt])/st}else At=(at-ot)/st;return At}function nt(){return this.pv}function it(rt){this.propertyGroup=rt}return{searchExpressions:et,getSpeedAtTime:_e,getVelocityAtTime:tt,getValueAtTime:_,getStaticValueAtTime:nt,setGroupProperty:it}}();function addPropertyDecorator(){function et(gt,ct,dt){if(!this.k||!this.keyframes)return this.pv;gt=gt?gt.toLowerCase():"";var ht=this.comp.renderedFrame,mt=this.keyframes,Ct=mt[mt.length-1].t;if(ht<=Ct)return this.pv;var ft,pt;dt?(ct?ft=Math.abs(Ct-this.elem.comp.globalData.frameRate*ct):ft=Math.max(0,Ct-this.elem.data.ip),pt=Ct-ft):((!ct||ct>mt.length-1)&&(ct=mt.length-1),pt=mt[mt.length-1-ct].t,ft=Ct-pt);var Vt,yt,Gt;if(gt==="pingpong"){var Bt=Math.floor((ht-pt)/ft);if(Bt%2!==0)return this.getValueAtTime((ft-(ht-pt)%ft+pt)/this.comp.globalData.frameRate,0)}else if(gt==="offset"){var vt=this.getValueAtTime(pt/this.comp.globalData.frameRate,0),wt=this.getValueAtTime(Ct/this.comp.globalData.frameRate,0),Mt=this.getValueAtTime(((ht-pt)%ft+pt)/this.comp.globalData.frameRate,0),kt=Math.floor((ht-pt)/ft);if(this.pv.length){for(Gt=new Array(vt.length),yt=Gt.length,Vt=0;Vt<yt;Vt+=1)Gt[Vt]=(wt[Vt]-vt[Vt])*kt+Mt[Vt];return Gt}return(wt-vt)*kt+Mt}else if(gt==="continue"){var Nt=this.getValueAtTime(Ct/this.comp.globalData.frameRate,0),Yt=this.getValueAtTime((Ct-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Gt=new Array(Nt.length),yt=Gt.length,Vt=0;Vt<yt;Vt+=1)Gt[Vt]=Nt[Vt]+(Nt[Vt]-Yt[Vt])*((ht-Ct)/this.comp.globalData.frameRate)/5e-4;return Gt}return Nt+(Nt-Yt)*((ht-Ct)/.001)}return this.getValueAtTime(((ht-pt)%ft+pt)/this.comp.globalData.frameRate,0)}function _(gt,ct,dt){if(!this.k)return this.pv;gt=gt?gt.toLowerCase():"";var ht=this.comp.renderedFrame,mt=this.keyframes,Ct=mt[0].t;if(ht>=Ct)return this.pv;var ft,pt;dt?(ct?ft=Math.abs(this.elem.comp.globalData.frameRate*ct):ft=Math.max(0,this.elem.data.op-Ct),pt=Ct+ft):((!ct||ct>mt.length-1)&&(ct=mt.length-1),pt=mt[ct].t,ft=pt-Ct);var Vt,yt,Gt;if(gt==="pingpong"){var Bt=Math.floor((Ct-ht)/ft);if(Bt%2===0)return this.getValueAtTime(((Ct-ht)%ft+Ct)/this.comp.globalData.frameRate,0)}else if(gt==="offset"){var vt=this.getValueAtTime(Ct/this.comp.globalData.frameRate,0),wt=this.getValueAtTime(pt/this.comp.globalData.frameRate,0),Mt=this.getValueAtTime((ft-(Ct-ht)%ft+Ct)/this.comp.globalData.frameRate,0),kt=Math.floor((Ct-ht)/ft)+1;if(this.pv.length){for(Gt=new Array(vt.length),yt=Gt.length,Vt=0;Vt<yt;Vt+=1)Gt[Vt]=Mt[Vt]-(wt[Vt]-vt[Vt])*kt;return Gt}return Mt-(wt-vt)*kt}else if(gt==="continue"){var Nt=this.getValueAtTime(Ct/this.comp.globalData.frameRate,0),Yt=this.getValueAtTime((Ct+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Gt=new Array(Nt.length),yt=Gt.length,Vt=0;Vt<yt;Vt+=1)Gt[Vt]=Nt[Vt]+(Nt[Vt]-Yt[Vt])*(Ct-ht)/.001;return Gt}return Nt+(Nt-Yt)*(Ct-ht)/.001}return this.getValueAtTime((ft-((Ct-ht)%ft+Ct))/this.comp.globalData.frameRate,0)}function _e(gt,ct){if(!this.k)return this.pv;if(gt=(gt||.4)*.5,ct=Math.floor(ct||5),ct<=1)return this.pv;var dt=this.comp.renderedFrame/this.comp.globalData.frameRate,ht=dt-gt,mt=dt+gt,Ct=ct>1?(mt-ht)/(ct-1):1,ft=0,pt=0,Vt;this.pv.length?Vt=createTypedArray("float32",this.pv.length):Vt=0;for(var yt;ft<ct;){if(yt=this.getValueAtTime(ht+ft*Ct),this.pv.length)for(pt=0;pt<this.pv.length;pt+=1)Vt[pt]+=yt[pt];else Vt+=yt;ft+=1}if(this.pv.length)for(pt=0;pt<this.pv.length;pt+=1)Vt[pt]/=ct;else Vt/=ct;return Vt}function tt(gt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var ct=this._transformCachingAtTime.v;if(ct.cloneFromProps(this.pre.props),this.appliedTransformations<1){var dt=this.a.getValueAtTime(gt);ct.translate(-dt[0]*this.a.mult,-dt[1]*this.a.mult,dt[2]*this.a.mult)}if(this.appliedTransformations<2){var ht=this.s.getValueAtTime(gt);ct.scale(ht[0]*this.s.mult,ht[1]*this.s.mult,ht[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var mt=this.sk.getValueAtTime(gt),Ct=this.sa.getValueAtTime(gt);ct.skewFromAxis(-mt*this.sk.mult,Ct*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ft=this.r.getValueAtTime(gt);ct.rotate(-ft*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var pt=this.rz.getValueAtTime(gt),Vt=this.ry.getValueAtTime(gt),yt=this.rx.getValueAtTime(gt),Gt=this.or.getValueAtTime(gt);ct.rotateZ(-pt*this.rz.mult).rotateY(Vt*this.ry.mult).rotateX(yt*this.rx.mult).rotateZ(-Gt[2]*this.or.mult).rotateY(Gt[1]*this.or.mult).rotateX(Gt[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Bt=this.px.getValueAtTime(gt),vt=this.py.getValueAtTime(gt);if(this.data.p.z){var wt=this.pz.getValueAtTime(gt);ct.translate(Bt*this.px.mult,vt*this.py.mult,-wt*this.pz.mult)}else ct.translate(Bt*this.px.mult,vt*this.py.mult,0)}else{var Mt=this.p.getValueAtTime(gt);ct.translate(Mt[0]*this.p.mult,Mt[1]*this.p.mult,-Mt[2]*this.p.mult)}return ct}function nt(){return this.v.clone(new Matrix)}var it=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(gt,ct,dt){var ht=it(gt,ct,dt);return ht.dynamicProperties.length?ht.getValueAtTime=tt.bind(ht):ht.getValueAtTime=nt.bind(ht),ht.setGroupProperty=expressionHelpers.setGroupProperty,ht};var rt=PropertyFactory.getProp;PropertyFactory.getProp=function(gt,ct,dt,ht,mt){var Ct=rt(gt,ct,dt,ht,mt);Ct.kf?Ct.getValueAtTime=expressionHelpers.getValueAtTime.bind(Ct):Ct.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Ct),Ct.setGroupProperty=expressionHelpers.setGroupProperty,Ct.loopOut=et,Ct.loopIn=_,Ct.smooth=_e,Ct.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Ct),Ct.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Ct),Ct.numKeys=ct.a===1?ct.k.length:0,Ct.propertyIndex=ct.ix;var ft=0;return dt!==0&&(ft=createTypedArray("float32",ct.a===1?ct.k[0].s.length:ct.k.length)),Ct._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ft},expressionHelpers.searchExpressions(gt,ct,Ct),Ct.k&&mt.addDynamicProperty(Ct),Ct};function st(gt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),gt*=this.elem.globalData.frameRate,gt-=this.offsetTime,gt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<gt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=gt,this.interpolateShape(gt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var ot=ShapePropertyFactory.getConstructorFunction(),at=ShapePropertyFactory.getKeyframedConstructorFunction();function At(){}At.prototype={vertices:function(ct,dt){this.k&&this.getValue();var ht=this.v;dt!==void 0&&(ht=this.getValueAtTime(dt,0));var mt,Ct=ht._length,ft=ht[ct],pt=ht.v,Vt=createSizedArray(Ct);for(mt=0;mt<Ct;mt+=1)ct==="i"||ct==="o"?Vt[mt]=[ft[mt][0]-pt[mt][0],ft[mt][1]-pt[mt][1]]:Vt[mt]=[ft[mt][0],ft[mt][1]];return Vt},points:function(ct){return this.vertices("v",ct)},inTangents:function(ct){return this.vertices("i",ct)},outTangents:function(ct){return this.vertices("o",ct)},isClosed:function(){return this.v.c},pointOnPath:function(ct,dt){var ht=this.v;dt!==void 0&&(ht=this.getValueAtTime(dt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(ht));for(var mt=this._segmentsLength,Ct=mt.lengths,ft=mt.totalLength*ct,pt=0,Vt=Ct.length,yt=0,Gt;pt<Vt;){if(yt+Ct[pt].addedLength>ft){var Bt=pt,vt=ht.c&&pt===Vt-1?0:pt+1,wt=(ft-yt)/Ct[pt].addedLength;Gt=bez.getPointInSegment(ht.v[Bt],ht.v[vt],ht.o[Bt],ht.i[vt],wt,Ct[pt]);break}else yt+=Ct[pt].addedLength;pt+=1}return Gt||(Gt=ht.c?[ht.v[0][0],ht.v[0][1]]:[ht.v[ht._length-1][0],ht.v[ht._length-1][1]]),Gt},vectorOnPath:function(ct,dt,ht){ct==1?ct=this.v.c:ct==0&&(ct=.999);var mt=this.pointOnPath(ct,dt),Ct=this.pointOnPath(ct+.001,dt),ft=Ct[0]-mt[0],pt=Ct[1]-mt[1],Vt=Math.sqrt(Math.pow(ft,2)+Math.pow(pt,2));if(Vt===0)return[0,0];var yt=ht==="tangent"?[ft/Vt,pt/Vt]:[-pt/Vt,ft/Vt];return yt},tangentOnPath:function(ct,dt){return this.vectorOnPath(ct,dt,"tangent")},normalOnPath:function(ct,dt){return this.vectorOnPath(ct,dt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([At],ot),extendPrototype([At],at),at.prototype.getValueAtTime=st,at.prototype.initiateExpression=ExpressionManager.initiateExpression;var lt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(gt,ct,dt,ht,mt){var Ct=lt(gt,ct,dt,ht,mt);return Ct.propertyIndex=ct.ix,Ct.lock=!1,dt===3?expressionHelpers.searchExpressions(gt,ct.pt,Ct):dt===4&&expressionHelpers.searchExpressions(gt,ct.ks,Ct),Ct.k&&gt.addDynamicProperty(Ct),Ct}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function et(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(_,_e){var tt=this.calculateExpression(_e);if(_.t!==tt){var nt={};return this.copyData(nt,_),nt.t=tt.toString(),nt.__complete=!1,nt}return _},TextProperty.prototype.searchProperty=function(){var _=this.searchKeyframes(),_e=this.searchExpressions();return this.kf=_||_e,this.kf},TextProperty.prototype.searchExpressions=et}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function et(_,_e){var tt=createNS("feMerge");tt.setAttribute("result",_);var nt,it;for(it=0;it<_e.length;it+=1)nt=createNS("feMergeNode"),nt.setAttribute("in",_e[it]),tt.appendChild(nt),tt.appendChild(nt);return tt}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(et,_,_e,tt,nt){this.filterManager=_;var it=createNS("feColorMatrix");it.setAttribute("type","matrix"),it.setAttribute("color-interpolation-filters","linearRGB"),it.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=it,it.setAttribute("result",tt+"_tint_1"),et.appendChild(it),it=createNS("feColorMatrix"),it.setAttribute("type","matrix"),it.setAttribute("color-interpolation-filters","sRGB"),it.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),it.setAttribute("result",tt+"_tint_2"),et.appendChild(it),this.matrixFilter=it;var rt=this.createMergeNode(tt,[nt,tt+"_tint_1",tt+"_tint_2"]);et.appendChild(rt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var _=this.filterManager.effectElements[0].p.v,_e=this.filterManager.effectElements[1].p.v,tt=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+tt+" 0"),this.matrixFilter.setAttribute("values",_e[0]-_[0]+" 0 0 0 "+_[0]+" "+(_e[1]-_[1])+" 0 0 0 "+_[1]+" "+(_e[2]-_[2])+" 0 0 0 "+_[2]+" 0 0 0 1 0")}};function SVGFillFilter(et,_,_e,tt){this.filterManager=_;var nt=createNS("feColorMatrix");nt.setAttribute("type","matrix"),nt.setAttribute("color-interpolation-filters","sRGB"),nt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),nt.setAttribute("result",tt),et.appendChild(nt),this.matrixFilter=nt}SVGFillFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var _=this.filterManager.effectElements[2].p.v,_e=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+_[0]+" 0 0 0 0 "+_[1]+" 0 0 0 0 "+_[2]+" 0 0 0 "+_e+" 0")}};function SVGStrokeEffect(et,_,_e){this.initialized=!1,this.filterManager=_,this.elem=_e,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var et=this.elem.layerElement.children||this.elem.layerElement.childNodes,_,_e,tt,nt;for(this.filterManager.effectElements[1].p.v===1?(nt=this.elem.maskManager.masksProperties.length,tt=0):(tt=this.filterManager.effectElements[0].p.v-1,nt=tt+1),_e=createNS("g"),_e.setAttribute("fill","none"),_e.setAttribute("stroke-linecap","round"),_e.setAttribute("stroke-dashoffset",1),tt;tt<nt;tt+=1)_=createNS("path"),_e.appendChild(_),this.paths.push({p:_,m:tt});if(this.filterManager.effectElements[10].p.v===3){var it=createNS("mask"),rt=createElementID();it.setAttribute("id",rt),it.setAttribute("mask-type","alpha"),it.appendChild(_e),this.elem.globalData.defs.appendChild(it);var st=createNS("g");for(st.setAttribute("mask","url("+getLocationHref()+"#"+rt+")");et[0];)st.appendChild(et[0]);this.elem.layerElement.appendChild(st),this.masker=it,_e.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(et=this.elem.layerElement.children||this.elem.layerElement.childNodes;et.length;)this.elem.layerElement.removeChild(et[0]);this.elem.layerElement.appendChild(_e),this.elem.layerElement.removeAttribute("mask"),_e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=_e},SVGStrokeEffect.prototype.renderFrame=function(et){this.initialized||this.initialize();var _,_e=this.paths.length,tt,nt;for(_=0;_<_e;_+=1)if(this.paths[_].m!==-1&&(tt=this.elem.maskManager.viewData[this.paths[_].m],nt=this.paths[_].p,(et||this.filterManager._mdf||tt.prop._mdf)&&nt.setAttribute("d",tt.lastPath),et||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||tt.prop._mdf)){var it;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var rt=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,st=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ot=nt.getTotalLength();it="0 0 0 "+ot*rt+" ";var at=ot*(st-rt),At=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,lt=Math.floor(at/At),gt;for(gt=0;gt<lt;gt+=1)it+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";it+="0 "+ot*10+" 0 0"}else it="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;nt.setAttribute("stroke-dasharray",it)}if((et||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(et||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(et||this.filterManager.effectElements[3].p._mdf)){var ct=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(ct[0]*255)+","+bmFloor(ct[1]*255)+","+bmFloor(ct[2]*255)+")")}};function SVGTritoneFilter(et,_,_e,tt){this.filterManager=_;var nt=createNS("feColorMatrix");nt.setAttribute("type","matrix"),nt.setAttribute("color-interpolation-filters","linearRGB"),nt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),et.appendChild(nt);var it=createNS("feComponentTransfer");it.setAttribute("color-interpolation-filters","sRGB"),it.setAttribute("result",tt),this.matrixFilter=it;var rt=createNS("feFuncR");rt.setAttribute("type","table"),it.appendChild(rt),this.feFuncR=rt;var st=createNS("feFuncG");st.setAttribute("type","table"),it.appendChild(st),this.feFuncG=st;var ot=createNS("feFuncB");ot.setAttribute("type","table"),it.appendChild(ot),this.feFuncB=ot,et.appendChild(it)}SVGTritoneFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var _=this.filterManager.effectElements[0].p.v,_e=this.filterManager.effectElements[1].p.v,tt=this.filterManager.effectElements[2].p.v,nt=tt[0]+" "+_e[0]+" "+_[0],it=tt[1]+" "+_e[1]+" "+_[1],rt=tt[2]+" "+_e[2]+" "+_[2];this.feFuncR.setAttribute("tableValues",nt),this.feFuncG.setAttribute("tableValues",it),this.feFuncB.setAttribute("tableValues",rt)}};function SVGProLevelsFilter(et,_,_e,tt){this.filterManager=_;var nt=this.filterManager.effectElements,it=createNS("feComponentTransfer");(nt[10].p.k||nt[10].p.v!==0||nt[11].p.k||nt[11].p.v!==1||nt[12].p.k||nt[12].p.v!==1||nt[13].p.k||nt[13].p.v!==0||nt[14].p.k||nt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",it)),(nt[17].p.k||nt[17].p.v!==0||nt[18].p.k||nt[18].p.v!==1||nt[19].p.k||nt[19].p.v!==1||nt[20].p.k||nt[20].p.v!==0||nt[21].p.k||nt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",it)),(nt[24].p.k||nt[24].p.v!==0||nt[25].p.k||nt[25].p.v!==1||nt[26].p.k||nt[26].p.v!==1||nt[27].p.k||nt[27].p.v!==0||nt[28].p.k||nt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",it)),(nt[31].p.k||nt[31].p.v!==0||nt[32].p.k||nt[32].p.v!==1||nt[33].p.k||nt[33].p.v!==1||nt[34].p.k||nt[34].p.v!==0||nt[35].p.k||nt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",it)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(it.setAttribute("color-interpolation-filters","sRGB"),et.appendChild(it)),(nt[3].p.k||nt[3].p.v!==0||nt[4].p.k||nt[4].p.v!==1||nt[5].p.k||nt[5].p.v!==1||nt[6].p.k||nt[6].p.v!==0||nt[7].p.k||nt[7].p.v!==1)&&(it=createNS("feComponentTransfer"),it.setAttribute("color-interpolation-filters","sRGB"),it.setAttribute("result",tt),et.appendChild(it),this.feFuncRComposed=this.createFeFunc("feFuncR",it),this.feFuncGComposed=this.createFeFunc("feFuncG",it),this.feFuncBComposed=this.createFeFunc("feFuncB",it))}SVGProLevelsFilter.prototype.createFeFunc=function(et,_){var _e=createNS(et);return _e.setAttribute("type","table"),_.appendChild(_e),_e},SVGProLevelsFilter.prototype.getTableValue=function(et,_,_e,tt,nt){for(var it=0,rt=256,st,ot=Math.min(et,_),at=Math.max(et,_),At=Array.call(null,{length:rt}),lt,gt=0,ct=nt-tt,dt=_-et;it<=256;)st=it/256,st<=ot?lt=dt<0?nt:tt:st>=at?lt=dt<0?tt:nt:lt=tt+ct*Math.pow((st-et)/dt,1/_e),At[gt]=lt,gt+=1,it+=256/(rt-1);return At.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var _,_e=this.filterManager.effectElements;this.feFuncRComposed&&(et||_e[3].p._mdf||_e[4].p._mdf||_e[5].p._mdf||_e[6].p._mdf||_e[7].p._mdf)&&(_=this.getTableValue(_e[3].p.v,_e[4].p.v,_e[5].p.v,_e[6].p.v,_e[7].p.v),this.feFuncRComposed.setAttribute("tableValues",_),this.feFuncGComposed.setAttribute("tableValues",_),this.feFuncBComposed.setAttribute("tableValues",_)),this.feFuncR&&(et||_e[10].p._mdf||_e[11].p._mdf||_e[12].p._mdf||_e[13].p._mdf||_e[14].p._mdf)&&(_=this.getTableValue(_e[10].p.v,_e[11].p.v,_e[12].p.v,_e[13].p.v,_e[14].p.v),this.feFuncR.setAttribute("tableValues",_)),this.feFuncG&&(et||_e[17].p._mdf||_e[18].p._mdf||_e[19].p._mdf||_e[20].p._mdf||_e[21].p._mdf)&&(_=this.getTableValue(_e[17].p.v,_e[18].p.v,_e[19].p.v,_e[20].p.v,_e[21].p.v),this.feFuncG.setAttribute("tableValues",_)),this.feFuncB&&(et||_e[24].p._mdf||_e[25].p._mdf||_e[26].p._mdf||_e[27].p._mdf||_e[28].p._mdf)&&(_=this.getTableValue(_e[24].p.v,_e[25].p.v,_e[26].p.v,_e[27].p.v,_e[28].p.v),this.feFuncB.setAttribute("tableValues",_)),this.feFuncA&&(et||_e[31].p._mdf||_e[32].p._mdf||_e[33].p._mdf||_e[34].p._mdf||_e[35].p._mdf)&&(_=this.getTableValue(_e[31].p.v,_e[32].p.v,_e[33].p.v,_e[34].p.v,_e[35].p.v),this.feFuncA.setAttribute("tableValues",_))}};function SVGDropShadowEffect(et,_,_e,tt,nt){var it=_.container.globalData.renderConfig.filterSize,rt=_.data.fs||it;et.setAttribute("x",rt.x||it.x),et.setAttribute("y",rt.y||it.y),et.setAttribute("width",rt.width||it.width),et.setAttribute("height",rt.height||it.height),this.filterManager=_;var st=createNS("feGaussianBlur");st.setAttribute("in","SourceAlpha"),st.setAttribute("result",tt+"_drop_shadow_1"),st.setAttribute("stdDeviation","0"),this.feGaussianBlur=st,et.appendChild(st);var ot=createNS("feOffset");ot.setAttribute("dx","25"),ot.setAttribute("dy","0"),ot.setAttribute("in",tt+"_drop_shadow_1"),ot.setAttribute("result",tt+"_drop_shadow_2"),this.feOffset=ot,et.appendChild(ot);var at=createNS("feFlood");at.setAttribute("flood-color","#00ff00"),at.setAttribute("flood-opacity","1"),at.setAttribute("result",tt+"_drop_shadow_3"),this.feFlood=at,et.appendChild(at);var At=createNS("feComposite");At.setAttribute("in",tt+"_drop_shadow_3"),At.setAttribute("in2",tt+"_drop_shadow_2"),At.setAttribute("operator","in"),At.setAttribute("result",tt+"_drop_shadow_4"),et.appendChild(At);var lt=this.createMergeNode(tt,[tt+"_drop_shadow_4",nt]);et.appendChild(lt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){if((et||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),et||this.filterManager.effectElements[0].p._mdf){var _=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(_[0]*255),Math.round(_[1]*255),Math.round(_[2]*255)))}if((et||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),et||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var _e=this.filterManager.effectElements[3].p.v,tt=(this.filterManager.effectElements[2].p.v-90)*degToRads,nt=_e*Math.cos(tt),it=_e*Math.sin(tt);this.feOffset.setAttribute("dx",nt),this.feOffset.setAttribute("dy",it)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(et,_,_e){this.initialized=!1,this.filterManager=_,this.filterElem=et,this.elem=_e,_e.matteElement=createNS("g"),_e.matteElement.appendChild(_e.layerElement),_e.matteElement.appendChild(_e.transformedElement),_e.baseElement=_e.matteElement}SVGMatte3Effect.prototype.findSymbol=function(et){for(var _=0,_e=_svgMatteSymbols.length;_<_e;){if(_svgMatteSymbols[_]===et)return _svgMatteSymbols[_];_+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(et,_){var _e=et.layerElement.parentNode;if(_e){for(var tt=_e.children,nt=0,it=tt.length;nt<it&&tt[nt]!==et.layerElement;)nt+=1;var rt;nt<=it-2&&(rt=tt[nt+1]);var st=createNS("use");st.setAttribute("href","#"+_),rt?_e.insertBefore(st,rt):_e.appendChild(st)}},SVGMatte3Effect.prototype.setElementAsMask=function(et,_){if(!this.findSymbol(_)){var _e=createElementID(),tt=createNS("mask");tt.setAttribute("id",_.layerId),tt.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(_);var nt=et.globalData.defs;nt.appendChild(tt);var it=createNS("symbol");it.setAttribute("id",_e),this.replaceInParent(_,_e),it.appendChild(_.layerElement),nt.appendChild(it);var rt=createNS("use");rt.setAttribute("href","#"+_e),tt.appendChild(rt),_.data.hd=!1,_.show()}et.setMatte(_.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var et=this.filterManager.effectElements[0].p.v,_=this.elem.comp.elements,_e=0,tt=_.length;_e<tt;)_[_e]&&_[_e].data.ind===et&&this.setElementAsMask(this.elem,_[_e]),_e+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(et,_,_e,tt){et.setAttribute("x","-100%"),et.setAttribute("y","-100%"),et.setAttribute("width","300%"),et.setAttribute("height","300%"),this.filterManager=_;var nt=createNS("feGaussianBlur");nt.setAttribute("result",tt),et.appendChild(nt),this.feGaussianBlur=nt}SVGGaussianBlurEffect.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var _=.3,_e=this.filterManager.effectElements[0].p.v*_,tt=this.filterManager.effectElements[1].p.v,nt=tt==3?0:_e,it=tt==2?0:_e;this.feGaussianBlur.setAttribute("stdDeviation",nt+" "+it);var rt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",rt)}};function TransformEffect(){}TransformEffect.prototype.init=function(et){this.effectsManager=et,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(et){if(this._opMdf=!1,this._mdf=!1,et||this.effectsManager._mdf){var _=this.effectsManager.effectElements,_e=_[0].p.v,tt=_[1].p.v,nt=_[2].p.v===1,it=_[3].p.v,rt=nt?it:_[4].p.v,st=_[5].p.v,ot=_[6].p.v,at=_[7].p.v;this.matrix.reset(),this.matrix.translate(-_e[0],-_e[1],_e[2]),this.matrix.scale(rt*.01,it*.01,1),this.matrix.rotate(-at*degToRads),this.matrix.skewFromAxis(-st*degToRads,(ot+90)*degToRads),this.matrix.translate(tt[0],tt[1],0),this._mdf=!0,this.opacity!==_[8].p.v&&(this.opacity=_[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(et,_){this.init(_)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(et){this.init(et)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(et,_){var _e=et==null?null:typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if(_e!=null){var tt,nt,it,rt,st=[],ot=!0,at=!1;try{if(it=(_e=_e.call(et)).next,_===0){if(Object(_e)!==_e)return;ot=!1}else for(;!(ot=(tt=it.call(_e)).done)&&(st.push(tt.value),st.length!==_);ot=!0);}catch(At){at=!0,nt=At}finally{try{if(!ot&&_e.return!=null&&(rt=_e.return(),Object(rt)!==rt))return}finally{if(at)throw nt}}return st}}function ownKeys(et,_){var _e=Object.keys(et);if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(et);_&&(tt=tt.filter(function(nt){return Object.getOwnPropertyDescriptor(et,nt).enumerable})),_e.push.apply(_e,tt)}return _e}function _objectSpread2(et){for(var _=1;_<arguments.length;_++){var _e=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(_e),!0).forEach(function(tt){_defineProperty(et,tt,_e[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(tt){Object.defineProperty(et,tt,Object.getOwnPropertyDescriptor(_e,tt))})}return et}function _defineProperty(et,_,_e){return _=_toPropertyKey(_),_ in et?Object.defineProperty(et,_,{value:_e,enumerable:!0,configurable:!0,writable:!0}):et[_]=_e,et}function _objectWithoutPropertiesLoose(et,_){if(et==null)return{};var _e={},tt=Object.keys(et),nt,it;for(it=0;it<tt.length;it++)nt=tt[it],!(_.indexOf(nt)>=0)&&(_e[nt]=et[nt]);return _e}function _objectWithoutProperties(et,_){if(et==null)return{};var _e=_objectWithoutPropertiesLoose(et,_),tt,nt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(et);for(nt=0;nt<it.length;nt++)tt=it[nt],!(_.indexOf(tt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,tt)&&(_e[tt]=et[tt])}return _e}function _slicedToArray(et,_){return _arrayWithHoles(et)||_iterableToArrayLimit(et,_)||_unsupportedIterableToArray(et,_)||_nonIterableRest()}function _arrayWithHoles(et){if(Array.isArray(et))return et}function _unsupportedIterableToArray(et,_){if(et){if(typeof et=="string")return _arrayLikeToArray(et,_);var _e=Object.prototype.toString.call(et).slice(8,-1);if(_e==="Object"&&et.constructor&&(_e=et.constructor.name),_e==="Map"||_e==="Set")return Array.from(et);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(et,_)}}function _arrayLikeToArray(et,_){(_==null||_>et.length)&&(_=et.length);for(var _e=0,tt=new Array(_);_e<_;_e++)tt[_e]=et[_e];return tt}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(et,_){if(typeof et!="object"||et===null)return et;var _e=et[Symbol.toPrimitive];if(_e!==void 0){var tt=_e.call(et,_||"default");if(typeof tt!="object")return tt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(et)}function _toPropertyKey(et){var _=_toPrimitive(et,"string");return typeof _=="symbol"?_:String(_)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function et(_,_e){var tt=_.animationData,nt=_.loop,it=_.autoplay,rt=_.initialSegment,st=_.onComplete,ot=_.onLoopComplete,at=_.onEnterFrame,At=_.onSegmentStart,lt=_.onConfigReady,gt=_.onDataReady,ct=_.onDataFailed,dt=_.onLoadedImages,ht=_.onDOMLoaded,mt=_.onDestroy;_.lottieRef,_.renderer,_.name,_.assetsPath,_.rendererSettings;var Ct=_objectWithoutProperties(_,_excluded$1),ft=reactExports.useState(!1),pt=_slicedToArray(ft,2),Vt=pt[0],yt=pt[1],Gt=reactExports.useRef(),Bt=reactExports.useRef(null),vt=function(){var Ht;(Ht=Gt.current)===null||Ht===void 0||Ht.play()},wt=function(){var Ht;(Ht=Gt.current)===null||Ht===void 0||Ht.stop()},Mt=function(){var Ht;(Ht=Gt.current)===null||Ht===void 0||Ht.pause()},kt=function(Ht){var zt;(zt=Gt.current)===null||zt===void 0||zt.setSpeed(Ht)},Nt=function(Ht,zt){var Pt;(Pt=Gt.current)===null||Pt===void 0||Pt.goToAndPlay(Ht,zt)},Yt=function(Ht,zt){var Pt;(Pt=Gt.current)===null||Pt===void 0||Pt.goToAndStop(Ht,zt)},Lt=function(Ht){var zt;(zt=Gt.current)===null||zt===void 0||zt.setDirection(Ht)},Xt=function(Ht,zt){var Pt;(Pt=Gt.current)===null||Pt===void 0||Pt.playSegments(Ht,zt)},_t=function(Ht){var zt;(zt=Gt.current)===null||zt===void 0||zt.setSubframe(Ht)},Tt=function(Ht){var zt;return(zt=Gt.current)===null||zt===void 0?void 0:zt.getDuration(Ht)},St=function(){var Ht;(Ht=Gt.current)===null||Ht===void 0||Ht.destroy(),Gt.current=void 0},Zt=function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},zt;if(Bt.current){(zt=Gt.current)===null||zt===void 0||zt.destroy();var Pt=_objectSpread2(_objectSpread2(_objectSpread2({},_),Ht),{},{container:Bt.current});return Gt.current=lottie.loadAnimation(Pt),yt(!!Gt.current),function(){var Ot;(Ot=Gt.current)===null||Ot===void 0||Ot.destroy(),Gt.current=void 0}}};reactExports.useEffect(function(){var Wt=Zt();return function(){return Wt==null?void 0:Wt()}},[tt,nt]),reactExports.useEffect(function(){Gt.current&&(Gt.current.autoplay=!!it)},[it]),reactExports.useEffect(function(){if(Gt.current){if(!rt){Gt.current.resetSegments(!0);return}!Array.isArray(rt)||!rt.length||((Gt.current.currentRawFrame<rt[0]||Gt.current.currentRawFrame>rt[1])&&(Gt.current.currentRawFrame=rt[0]),Gt.current.setSegment(rt[0],rt[1]))}},[rt]),reactExports.useEffect(function(){var Wt=[{name:"complete",handler:st},{name:"loopComplete",handler:ot},{name:"enterFrame",handler:at},{name:"segmentStart",handler:At},{name:"config_ready",handler:lt},{name:"data_ready",handler:gt},{name:"data_failed",handler:ct},{name:"loaded_images",handler:dt},{name:"DOMLoaded",handler:ht},{name:"destroy",handler:mt}],Ht=Wt.filter(function(Pt){return Pt.handler!=null});if(Ht.length){var zt=Ht.map(function(Pt){var Ot;return(Ot=Gt.current)===null||Ot===void 0||Ot.addEventListener(Pt.name,Pt.handler),function(){var Jt;(Jt=Gt.current)===null||Jt===void 0||Jt.removeEventListener(Pt.name,Pt.handler)}});return function(){zt.forEach(function(Pt){return Pt()})}}},[st,ot,at,At,lt,gt,ct,dt,ht,mt]);var Et=React.createElement("div",_objectSpread2({style:_e,ref:Bt},Ct));return{View:Et,play:vt,stop:wt,pause:Mt,setSpeed:kt,goToAndStop:Yt,goToAndPlay:Nt,setDirection:Lt,playSegments:Xt,setSubframe:_t,getDuration:Tt,destroy:St,animationContainerRef:Bt,animationLoaded:Vt,animationItem:Gt.current}};function getContainerVisibility(et){var _=et.getBoundingClientRect(),_e=_.top,tt=_.height,nt=window.innerHeight-_e,it=window.innerHeight+tt;return nt/it}function getContainerCursorPosition(et,_,_e){var tt=et.getBoundingClientRect(),nt=tt.top,it=tt.left,rt=tt.width,st=tt.height,ot=(_-it)/rt,at=(_e-nt)/st;return{x:ot,y:at}}var useInitInteractivity=function et(_){var _e=_.wrapperRef,tt=_.animationItem,nt=_.mode,it=_.actions;reactExports.useEffect(function(){var rt=_e.current;if(!(!rt||!tt||!it.length)){tt.stop();var st=function(){var At=null,lt=function(){var ct=getContainerVisibility(rt),dt=it.find(function(mt){var Ct=mt.visibility;return Ct&&ct>=Ct[0]&&ct<=Ct[1]});if(dt){if(dt.type==="seek"&&dt.visibility&&dt.frames.length===2){var ht=dt.frames[0]+Math.ceil((ct-dt.visibility[0])/(dt.visibility[1]-dt.visibility[0])*dt.frames[1]);//! goToAndStop must be relative to the start of the current segment
tt.goToAndStop(ht-tt.firstFrame-1,!0)}dt.type==="loop"&&(At===null||At!==dt.frames||tt.isPaused)&&(tt.playSegments(dt.frames,!0),At=dt.frames),dt.type==="play"&&tt.isPaused&&(tt.resetSegments(!0),tt.play()),dt.type==="stop"&&tt.goToAndStop(dt.frames[0]-tt.firstFrame-1,!0)}};return document.addEventListener("scroll",lt),function(){document.removeEventListener("scroll",lt)}},ot=function(){var At=function(dt,ht){var mt=dt,Ct=ht;if(mt!==-1&&Ct!==-1){var ft=getContainerCursorPosition(rt,mt,Ct);mt=ft.x,Ct=ft.y}var pt=it.find(function(Gt){var Bt=Gt.position;return Bt&&Array.isArray(Bt.x)&&Array.isArray(Bt.y)?mt>=Bt.x[0]&&mt<=Bt.x[1]&&Ct>=Bt.y[0]&&Ct<=Bt.y[1]:Bt&&!Number.isNaN(Bt.x)&&!Number.isNaN(Bt.y)?mt===Bt.x&&Ct===Bt.y:!1});if(pt){if(pt.type==="seek"&&pt.position&&Array.isArray(pt.position.x)&&Array.isArray(pt.position.y)&&pt.frames.length===2){var Vt=(mt-pt.position.x[0])/(pt.position.x[1]-pt.position.x[0]),yt=(Ct-pt.position.y[0])/(pt.position.y[1]-pt.position.y[0]);tt.playSegments(pt.frames,!0),tt.goToAndStop(Math.ceil((Vt+yt)/2*(pt.frames[1]-pt.frames[0])),!0)}pt.type==="loop"&&tt.playSegments(pt.frames,!0),pt.type==="play"&&(tt.isPaused&&tt.resetSegments(!1),tt.playSegments(pt.frames)),pt.type==="stop"&&tt.goToAndStop(pt.frames[0],!0)}},lt=function(dt){At(dt.clientX,dt.clientY)},gt=function(){At(-1,-1)};return rt.addEventListener("mousemove",lt),rt.addEventListener("mouseout",gt),function(){rt.removeEventListener("mousemove",lt),rt.removeEventListener("mouseout",gt)}};switch(nt){case"scroll":return st();case"cursor":return ot()}}},[nt,tt])},useLottieInteractivity=function et(_){var _e=_.actions,tt=_.mode,nt=_.lottieObj,it=nt.animationItem,rt=nt.View,st=nt.animationContainerRef;return useInitInteractivity({actions:_e,animationItem:it,mode:tt,wrapperRef:st}),rt},_excluded=["style","interactivity"],Lottie=function et(_){var _e,tt,nt,it=_.style,rt=_.interactivity,st=_objectWithoutProperties(_,_excluded),ot=useLottie(st,it),at=ot.View,At=ot.play,lt=ot.stop,gt=ot.pause,ct=ot.setSpeed,dt=ot.goToAndStop,ht=ot.goToAndPlay,mt=ot.setDirection,Ct=ot.playSegments,ft=ot.setSubframe,pt=ot.getDuration,Vt=ot.destroy,yt=ot.animationContainerRef,Gt=ot.animationLoaded,Bt=ot.animationItem;return reactExports.useEffect(function(){_.lottieRef&&(_.lottieRef.current={play:At,stop:lt,pause:gt,setSpeed:ct,goToAndPlay:ht,goToAndStop:dt,setDirection:mt,playSegments:Ct,setSubframe:ft,getDuration:pt,destroy:Vt,animationContainerRef:yt,animationLoaded:Gt,animationItem:Bt})},[(_e=_.lottieRef)===null||_e===void 0?void 0:_e.current]),useLottieInteractivity({lottieObj:{View:at,play:At,stop:lt,pause:gt,setSpeed:ct,goToAndStop:dt,goToAndPlay:ht,setDirection:mt,playSegments:Ct,setSubframe:ft,getDuration:pt,destroy:Vt,animationContainerRef:yt,animationLoaded:Gt,animationItem:Bt},actions:(tt=rt==null?void 0:rt.actions)!==null&&tt!==void 0?tt:[],mode:(nt=rt==null?void 0:rt.mode)!==null&&nt!==void 0?nt:"scroll"})};const v="4.8.0",meta={g:"LottieFiles AE 3.4.5",a:"",k:"",d:"",tc:"none"},fr=60,ip=0,op=1231,w=3840,h=2160,nm="lottie",ddd=0,assets=[{id:"image_0",w:3840,h:2160,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAADwAAAAhwCAYAAACQvstyAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAgAElEQVR4nOzBAQEAAACAkP6v7ggKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACA2YMDAQAAAAAg/9dGUFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVSbs+U0AACAASURBVFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWHvDm7buMIojL7hDARBJGARKiAl2B1EHcQluASX4HSQDqIS3Eo6sCt4WQhaCCRfNllbQ2mGc0Wes6aAf3EHFk19EgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXKpu6QMAALgctdb7pW8AAAAAAAAAAACACfzYbrc/lj4CAIDzJQAGAGBWtdYvrbXPpZQ/lr4FAAAAAAAAAAAAJvSztfZ9tVr9JQYGAGBqAmAAAGZRa/3UWnsopXxc+hYAAAAAAAAAAACYU2vtz7u7u29L3wEAwPkQAAMAMLn//+rv30vfAQAAAAAAAAAAACf0T9d199vt9t+lDwEA4P0TAAMAMCnxLwAAAAAAAAAAABdMBAwAwCRWSx8AAMD5qLXei38BAAAAAAAAAAC4YB9ba9+XPgIAgPdPAAwAwCRqrbettYel7wAAAAAAAAAAAICF/V5r/br0EQAAvG8CYAAAJnE4HL6WUn5b+g4AAAAAAAAAAABYWmvtW631duk7AAB4v4alDwAA4Dx0Xfdl6RtgrL7vS9/3ZbXyO5F4m8PhUPb7fdnv90d/rR0yFTskgR2SwA5JYIcksEMS2CEJ7JAEdkgCOySBHZLgtTvsuq70fV+GwY/bQordblf2+31prR31dZ5npnTEDj+UUj6XUh5mPwoAgLPkHQwAAG9Wa/3UWvPXf4nXdV3ZbDY+zGFyu92uPD4+jvqA0Q6Zix2SwA5JYIcksEMS2CEJ7JAEdkgCOySBHZLADklwzA6vrq7Kzc1N6bruBJcBx2itlaenp/L8/Dzq9Z5n5jB2h601ATAAAK/m1+IBADCF+6UPgDH8kABzGYahbDabUa+1Q+ZihySwQxLYIQnskAR2SAI7JIEdksAOSWCHJLBDEozd4TAMZb1eiwUhVNd1Zb1ej/q3wvPMXI7Y4f0JzgEA4EwJgAEAeLPD4XC79A3wkr7v/ZAAsxqGofR9/8vX2CFzs0MS2CEJ7JAEdkgCOySBHZLADklghySwQxLYIQnG7PD6+vpE1wBvMeZZ9TwztxEb+3CKOwAAOE8CYAAA4CK89AEuTGG1+vXbbDvkFOyQBHZIAjskgR2SwA5JYIcksEMS2CEJ7JAEdkgCO4Tz8NKzXIrnmfmN2SEAALyW7zYBAICL4D/bOYWXPji0Q07BDklghySwQxLYIQnskAR2SAI7JIEdksAOSWCHJLBDOA9j4l7PM3MTmQMAMCfvaAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAACCCIABAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAAAAIIIgAEAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAAAggiAAQAAAAAAAAAAAP5j7w522zYCKIqSphAEcVb54faHs7ODICDNLoruCkSyNdJldM46Bbh4GnqUXgcAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAHsLb29u9H4EH8Lud2SG3YIcU2CEFdkiBHVJghxTYIQV2SIEdUmCHFNghBXYIf4ZzPqs+z4xmYwAAjCQABgAAHsK2bfd+BB7A73Zmh9yCHVJghxTYIQV2SIEdUmCHFNghBXZIgR1SYIcU2CH8Gc75rPo8M5qNAQAwkgAYAAB4CNu2Teu63vsx+IOt63rW/yhgh4xkhxTYIQV2SIEdUmCHFNghBXZIgR1SYIcU2CEF5+zw58+fN3oa4CPO+az6PDOajQEAMJIAGAAAeBgvLy/+ZwGGWNd1enl5OevP2iGj2CEFdkiBHVJghxTYIQV2SIEdUmCHFNghBXZIwbk7XNd1en19nfZ9v8FTAZfa9316fX09613h88wol+wQAADea773AwAAcHzfv3//e57nv+79HHCuZVmmZVmmpye/E4mP2bZtent7++1vCP8/dsi12CEFdkiBHVJghxTYIQV2SIEdUmCHFNghBXZIwXt3OM/ztCzLdDqdBj0ZcIl936dt26Zt2y4Oen2euZb37PDbt2+6DQAA3sUNBgAAeDj/fQkP92SHFNghBXZIgR1SYIcU2CEFdkiBHVJghxTYIQV2yL3t+z6t6+pfd4Q/gM8zAABwRH4tHgAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQk73fgAAAB7LsizTsizT05PfRQMF67pO27ZN+75f9N/N8zwtyzKdTq6VfNx7dwgFzkOuyXnIkTkPuSb3FArskAI7pMAOKXBf5sich1yT9zIFdkiBHVLgngIAwK24wQAAcBPzPE9fv371JToE7fs+/fjxY/r169dZf/7Tp0/Tly9fpnmeBz8Zj+TSHUKB85ARnIcckfOQEdxTKLBDCuyQAjukwH2ZI3IeMoL3MgV2SIEdUuCeAgDALfhn1wAAuAnxL3TN8zw9Pz+f9Rk9nU7T8/OzvxTj6i7ZIRQ4DxnFecjROA8ZxT2FAjukwA4psEMK3Jc5Gucho3gvU2CHFNghBe4pAADcggAYAIDhlmXxRSccwOfPn6/yZ+AjbIyjsFVGszGOwlYZzT2FAjukwA4psEMKbIyjsFVG816mwA4psEMKbAwAgJEEwAAADLcsy70fATjD09Pvr4g+z4x2zg6hwHnIaM5DjsJ5yGjuKRTYIQV2SIEdUuC+zFE4DxnNe5kCO6TADilwTwEAYCQ/bQIAMJwvOeEYzvlLL59nRvOXrxyF85DRnIcchfOQ0dxTKLBDCuyQAjukwH2Zo3AeMpr3MgV2SIEdUuCeAgDASG40AAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAgkEuKwAAIABJREFUAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAM9/b2du9HAM5wzmfV55nRbIyjsFVGszGOwlYZzT2FAjukwA4psEMKbIyjsFVG816mwA4psEMKbAwAgJEEwAAADLdt270fATjDOZ9Vn2dGszGOwlYZzcY4CltlNPcUCuyQAjukwA4psDGOwlYZzXuZAjukwA4psDEAAEYSAAMAMNy2bdO6rvd+DOA3fv78eZU/Ax9hYxyFrTKajXEUtspo7ikU2CEFdkiBHVJgYxyFrTKa9zIFdkiBHVJgYwAAjCQABgDgJl5eXkTAELXv+/T6+nrWZ3Rd1+n19XXa9/0GT8YjuWSHUOA8ZBTnIUfjPGQU9xQK7JACO6TADilwX+ZonIeM4r1MgR1SYIcUuKcAAHAL870fAACA4/v+/fvf8zz/dc6fXZZlWpZlenryu2jg3vZ9n7Ztm7Ztu/gvuuZ5npZlmU6n06Cn41F8ZIdQ4DzkWpyHHJ3zkGtxT6HADimwQwrskAL3ZY7Oeci1eC9TYIcU2CEF79nht2/fdBsAALyLGwwAADf135efwLHt+z6t6+q3mAIPz3kI8C/nIQV2SIEdUmCHFNghwL+chxTYIQV2SIEdAgAAR+SfXQMAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQMjp3g8AAMBjWZZlWpZlenryu2iA863rOm3bNu37fu9HAQDeaZ7naVmW6XTytTQf996fD+2Qa3JP4cich1yT9zIFdkiBHVJghxTYITCac4YC3w8DAHArbjAAANzEPM/T169ffYkOvNu+79OPHz+mX79+3ftRAIALffr0afry5cs0z/O9H4U/yKU/H9ohI7incETOQ0bwXqbADimwQwrskAI7BEZzzlDg+2EAAG7BP7sGAMBNiH+Bj5rneXp+fnaWAMDBnE6n6fn52f9Uw9Vd8vOhHTKKewpH4zxkFO9lCuyQAjukwA4psENgNOcMBb4fBgDgFgTAAAAMtyyLLzqBq/n8+fO9HwEAuIB3N6OdszE7ZDQb4yhsldG8lymwQwrskAI7pMAOgdGcMxTYGAAAIwmAAQAYblmWez8C8Ad5enKVBYAjcR9gtHN+PrRDRnNP4Sich4zmvUyBHVJghxTYIQV2CIzmnKHA98MAAIzkp00AAIbzJSdwTf5yDgCOxX2A0c75+dAOGc09haNwHjKa9zIFdkiBHVJghxTYITCac4YC3w8DADCSGw0AAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAA4B/27mC3aW0Bw+hOHSFE+/4vCkWoxPUdcI4uo56UZiefyVrjInnwsx27/VoAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAABM9/r6eutLAP4izhQA2Bf3bmY7Z2N2yGw2xl7YKrO5L1NghxTYIQV2SIEdArM5ZyiwMQAAZhIAAwAw3bqut74E4C/iTAGAfXHvZrZzNmaHzGZj7IWtMpv7MgV2SIEdUmCHFNghMJtzhgIbAwBgJgEwAADTres6TqfTrS8D+Ev8+PHj1pcAALyDezeznbMxO2Q2G2MvbJXZ3JcpsEMK7JACO6TADoHZnDMU2BgAADMJgAEAuIpv376JgIEP2bZtPD8/O0sAYGdOp9N4fn4e27bd+lL4y7zn86EdMovnFPbGecgs7ssU2CEFdkiBHVJgh8BszhkKvB8GAOAajre+AAAA7sO2bePr169jWZaxLMt4ePC7aIDzbNs21nUd67r6hhwA7NTLy8v4+fPnWJZlHI9eS/Mxf/r50A65JM8p7JnzkEtyX6bADimwQwrskAI7BGZzzlDg/TAAANfkCQYAgKv69+UnAABwX7ZtG6fTyW9B56bsEOAX5yEFdkiBHVJghxTYIQV2CMzmnAEAAPbIn10DAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAEDI8dYXAADAfVmWZSzLMh4e/C4agGs6nU5jXdexbdu7/t3hcBjLsozj0SsEPs4OKfjTHUKB85BLcl+mwA4p8PmQPXMecknuyxTYIQV2CG/zDMWeOau5JOchAADX4gkGAICrOBwO4+npyUt0gBvatm18//59vLy8nPX1nz59Gl++fBmHw2HylXFP7JCC9+4QCpyHzOC+TIEdUuDzIXvkPGQG92UK7JACO4S3eYZij5zVzOA8BADgGvzZNQAArkL8C3B7h8NhPD4+nnUeH4/H8fj46BugXJwdUvCeHUKB85BZ3JcpsEMKfD5kb5yHzOK+TIEdUmCH8DbPUOyNs5pZnIcAAFyDABgAgOmWZfGiEyDk8+fPF/ka+Ag7pMDG2AtbZTb3ZQrskAIbYy9sldnclymwQwrsEN5m/+yFrTKbjQEAMJMAGACA6ZZlufUlAPCbh4f/fh3g7GY2O6TgnB1CgfOQ2dyXKbBDCnw+ZC+ch8zmvkyBHVJgh/A2z1DshbOa2ZyHAADM5NMmAADTeckJ0HLONzid3cxmhxT4gQ/2wnnIbO7LFNghBT4fshfOQ2ZzX6bADimwQ3ibZyj2wlnNbM5DAABm8kQDAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAAAAEIEwAAAAAAAAAAAAAAAAAAAECIABgAAAAAAAAAAAAAAAACAEAEwAAAAAAAAAAAAAAAAAACECIABAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAAAACECYAAAAAAAAAAAAAAAAAAACBEAAwAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAABCBMAAAAAAAAAAAAAAAAAAABAiAAYAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAMB0r6+vt74EAH5zzrns7GY2O6TAxtgLW2U292UK7JACG2MvbJXZ3JcpsEMK7BDeZv/sha0ym40BADCTABgAgOnWdb31JQDwm3POZWc3s9khBTbGXtgqs7kvU2CHFNgYe2GrzOa+TIEdUmCH8Db7Zy9sldlsDACAmQTAAABMt67rOJ1Ot74MAP7x48ePi3wNfIQdUmBj7IWtMpv7MgV2SIGNsRe2ymzuyxTYIQV2CG+zf/bCVpnNxgAAmEkADADAVXz79k0EDHBj27aN5+fns87j0+k0np+fx7ZtV7gy7okdUvCeHUKB85BZ3JcpsEMKfD5kb5yHzOK+TIEdUmCH8DbPUOyNs5pZnIcAAFzD8dYXAADAfdi2bXz9+nUsyzKWZRkPD34XDcC1bNs21nUd67q+65uaLy8v4+fPn2NZlnE8eoXAx9ghBX+6QyhwHnJJ7ssU2CEFPh+yZ85DLsl9mQI7pMAO4W2eodgzZzWX5DwEAOCaPMEAAHBV/778BGAftm0bp9PJb6zlpuwQ4BfnIQV2SIEdAvziPKTADimwQwrsEKDPWQ0AAOyRP7sGAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAICQ460vAACA+7Isy1iWZTw8+F003I/T6TTWdR3btr3r3x0Oh7EsyzgePbrxcXZIgR1S8Kc7BAAAAPbFOyUuybtNCrzbBAAAALg/3iwCAHAVh8NhPD09+eZFZE9KAAAgAElEQVQ2d2vbtvH9+/fx8vJy1td/+vRpfPnyZRwOh8lXxj2xQwrskIL37hAAAADYF++UmMG7TQq82wQAAAC4L/7sGgAAVyH+5d4dDofx+Ph41v+D4/E4Hh8f/UAIF2eHFNghBe/ZIQAAALAv3ikxi3ebFHi3CQAAAHBfBMAAAEy3LItvQMI/Pn/+fJGvgY+wQwrskAIbAwAAgL+P531m826TAhsDAAAAuA8CYAAApluW5daXABkPD//9GOb/DLPZIQV2SME5OwQAAAD2xTslZvNukwLvNgEAAADug7dAAABM55uP8H/n/MCH/zPMZocU2CEFfhATAAAA/j7eKTGbd5sUeLcJAAAAcB+8aQQAAAAAAAAAAAAAAAAAgBABMAAAAAAAAAAAAAAAAAAAhAiAAQAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAAAhAmAAAAAAAAAAAAAAAAAAAAgRAAMAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAAAQgTAAAAAAAAAAAAAAAAAAAAQIgAGAAAAAAAAAAAAAAAAAIAQATAAAAAAAAAAAAAAAAAAAIQIgAEAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAAAAAAIQJgAAAAAAAAAAAAAAAAAAAIEQADAAAAAAAAAAAAAAD/Y+8OjqNGwjAMd2ucgCYBCGHJwBksISyRABmQwRICGaw3BGdgArBlqjxVPozcXPa8mLLk/jTzPFfr8B9+HdQ1rxsAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAAAAAAAAAAAAAAAAAIAgAmAAAAAAAAAAAAAAAAAAAAgiAAYAAAAAAAAAAAAAAAAAgCACYAAAAAAAAAAAAAAAAAAACCIABgAAAAAAAAAAAAAAAACAIAJgAAAAAAAAAAAAAAAAAAAIIgAGAGB1T09PvUeAGM95H7wzrM0eksAeksCOAQAAwOnxvc/anG2SwI4BAAAAnAcBMAAAq5vnufcIEOM574N3hrXZQxLYQxLYMQAAADg9vvdZm7NNEtgxAAAAgPMgAAYA4MWGYbj/v7/P81yOx+NrjQPRHh8fF3kGXsIeksAeksCOAQAAwOnxvc/anG2SwI4BwKb86D0AAADbJQAGAGAJV7964OHhQQTMWWutlcPh8Kz34Hg8lsPhUFprrzAZ58QeksAekuB39hAAAADYFmdKrMXZJgmcbQLAJl31HgAAgO2qvQcAAOA03N3d3ZRS3vzqud1uV3a7XRkG/4uG89BaK/M8l3mef/tHHrXWstvtysXFxUrTcS7sIQnsIQlesocAAADAtjhTYinONkngbBMAtqvW+mEcx6+95wAAYJsEwAAALOL29vZTrfVj7zkAAAAAAAAAAAAgwI9a69txHO97DwIAwDa5dg0AgEUMw/CllPK99xwAAAAAAAAAAADQW631k/gXAICXcAMwAACLmabpsrX2T+85AAAAAAAAAAAAoKN/9/v9Ze8hAADYNjcAAwCwmHEcr2qtH3rPAQAAAAAAAAAAAJ1c11rf9x4CAIDtcwMwAACLm6bpr9ba373nAAAAAAAAAAAAgFd0XWu9HMfxvvcgAABsnxuAAQBY3DiOX2ut70op171nAQAAAAAAAAAAgLW11j7v9/s/xL8AACzFDcAAAKzqv9uA35dS/uw9CwAAAAAAAAAAACzoe2vt2zAMX8ZxvOk9DAAAp0UADADAq5mm6bL3DAAAAAAAAAAAALCAG9EvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/2YMDAQAAAAAg/9dGUFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVbRxxiAAABSoSURBVFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWkPDkgAAAAABP1/3Y9QAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAuQBTKSA5UeKFTwAAAABJRU5ErkJggg==",e:1}],layers=[{ddd:0,ind:1,ty:4,nm:"escape-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1050,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1080,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1185,s:[100]},{t:1200,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1050,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:1080,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2023.21,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.111,-25.2],[-.072,10.872],[.072,10.872],[5.112,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.784,-12.96],[3.024,25.2],[-3.6,25.2],[-9.359,-12.96],[-9.504,-12.96],[-9.504,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1990.09,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.496],[-.252,-16.416],[-.397,-16.416],[-3.852,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.365,-25.2],[5.363,-25.2],[13.573,25.2],[5.652,25.2],[4.212,15.192],[4.212,15.336],[-4.788,15.336],[-6.229,25.2],[-13.573,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1956.287,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.016,2.185],[0,4.08],[0,0],[-2.016,2.184],[-3.841,0],[-2.015,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[2.736,0],[0,-3.312],[0,0],[-2.736,0],[0,3.264],[0,0],[0,0],[0,0],[0,0],[0,0],[2.016,-2.184],[3.839,0]],o:[[-2.016,-2.184],[0,0],[0,-4.079],[2.016,-2.184],[3.839,0],[2.016,2.184],[0,0],[0,0],[0,0],[0,-3.312],[-2.736,0],[0,0],[0,3.264],[2.736,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,4.08],[-2.015,2.185],[-3.841,0]],v:[[-8.784,22.645],[-11.808,13.249],[-11.808,-13.248],[-8.784,-22.643],[0,-25.919],[8.784,-22.643],[11.808,-13.248],[11.808,-8.927],[4.32,-8.927],[4.32,-13.751],[.216,-18.719],[-3.888,-13.751],[-3.888,13.825],[.216,18.72],[4.32,13.825],[4.32,3.96],[.361,3.96],[.361,-3.24],[11.808,-3.24],[11.808,13.249],[8.784,22.645],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1927.884,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.96,-18],[-12.24,-18],[-12.24,-25.2],[12.24,-25.2],[12.24,-18],[3.96,-18],[3.96,25.2],[-3.96,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1889.077,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-3.96,-25.2],[3.96,-25.2],[3.96,25.2],[-3.96,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1869.062,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.016,2.185],[0,4.08],[0,0],[0,0],[0,0],[-.696,-.768],[-1.296,0],[-.696,.768],[0,1.727],[0,0],[0,0],[0,0],[2.016,-2.184],[3.84,0]],o:[[-2.016,-2.184],[0,0],[0,0],[0,0],[0,1.727],[.695,.768],[1.296,0],[.695,-.768],[0,0],[0,0],[0,0],[0,4.08],[-2.016,2.185],[-3.841,0]],v:[[-8.784,22.285],[-11.808,12.889],[-11.808,-25.56],[-3.888,-25.56],[-3.888,13.465],[-2.844,17.209],[.144,18.36],[3.132,17.209],[4.176,13.465],[4.176,-25.56],[11.808,-25.56],[11.808,12.889],[8.784,22.285],[0,25.56]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1847.678,1636.359],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,3.313],[0,0],[2.736,0],[0,-3.311],[0,0],[-2.736,0]],o:[[0,0],[0,-3.311],[-2.736,0],[0,0],[0,3.313],[2.736,0]],v:[[3.132,11.772],[3.132,-15.732],[-.972,-20.7],[-5.076,-15.732],[-5.076,11.772],[-.972,16.74]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[.816,3.215],[2.016,0],[2.063,2.208],[0,4.032],[0,0],[-2.064,2.208],[-3.888,0],[-2.064,-2.208],[0,-4.032],[0,0],[1.487,-2.16],[-.432,-.144],[-.817,0],[0,0],[0,0],[0,0]],o:[[-1.488,.575],[-3.888,0],[-2.064,-2.207],[0,0],[0,-4.032],[2.063,-2.208],[3.888,0],[2.063,2.208],[0,0],[0,3.36],[.288,.481],[.432,.144],[0,0],[0,0],[0,0],[-3.6,0]],v:[[4.284,23.077],[-.972,23.94],[-9.9,20.628],[-12.996,11.268],[-12.996,-15.228],[-9.9,-24.587],[-.972,-27.9],[7.956,-24.587],[11.052,-15.228],[11.052,11.268],[8.82,19.548],[9.9,20.484],[11.772,20.701],[12.996,20.701],[12.996,27.9],[10.908,27.9]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1819.779,1637.979],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:4,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"pause-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:900,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:930,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1035,s:[100]},{t:1050,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:900,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:930,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2042.254,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.112,-25.2],[-.072,10.872],[.072,10.872],[5.112,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.784,-12.96],[3.024,25.2],[-3.6,25.2],[-9.36,-12.96],[-9.504,-12.96],[-9.504,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2009.134,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.496],[-.251,-16.416],[-.396,-16.416],[-3.852,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.364,-25.2],[5.364,-25.2],[13.572,25.2],[5.652,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.228,25.2],[-13.572,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1975.33,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.016,2.185],[0,4.08],[0,0],[-2.017,2.184],[-3.841,0],[-2.015,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[2.736,0],[0,-3.312],[0,0],[-2.736,0],[0,3.264],[0,0],[0,0],[0,0],[0,0],[0,0],[2.017,-2.184],[3.839,0]],o:[[-2.017,-2.184],[0,0],[0,-4.079],[2.016,-2.184],[3.839,0],[2.017,2.184],[0,0],[0,0],[0,0],[0,-3.312],[-2.736,0],[0,0],[0,3.264],[2.736,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,4.08],[-2.015,2.185],[-3.841,0]],v:[[-8.784,22.645],[-11.808,13.249],[-11.808,-13.248],[-8.784,-22.643],[0,-25.919],[8.783,-22.643],[11.808,-13.248],[11.808,-8.927],[4.32,-8.927],[4.32,-13.751],[.216,-18.719],[-3.888,-13.751],[-3.888,13.825],[.216,18.72],[4.32,13.825],[4.32,3.96],[.36,3.96],[.36,-3.24],[11.808,-3.24],[11.808,13.249],[8.783,22.645],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1946.927,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1908.841,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.967,2.185],[0,4.08],[0,0],[0,0],[0,0],[-2.737,0],[-.696,.792],[0,1.777],[.96,1.608],[2.591,2.257],[1.296,2.329],[0,2.928],[-2.017,2.184],[-3.841,0],[-1.945,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[.672,.792],[1.296,0],[0,-3.216],[-.984,-1.584],[-2.592,-2.256],[-1.249,-2.352],[0,-3.168],[2.04,-2.207],[3.888,0]],o:[[-1.969,-2.184],[0,0],[0,0],[0,0],[0,3.264],[1.342,0],[.696,-.792],[0,-2.112],[-.961,-1.608],[-3.265,-2.88],[-1.296,-2.327],[0,-3.984],[2.015,-2.184],[3.791,0],[1.944,2.184],[0,0],[0,0],[0,0],[0,-1.728],[-.672,-.792],[-2.639,0],[0,1.824],[.983,1.584],[3.313,2.88],[1.247,2.352],[0,4.129],[-2.041,2.208],[-3.841,0]],v:[[-8.856,22.645],[-11.808,13.249],[-11.808,10.369],[-4.321,10.369],[-4.321,13.825],[-.216,18.72],[2.843,17.533],[3.887,13.681],[2.448,8.101],[-2.88,2.304],[-9.72,-5.507],[-11.665,-13.391],[-8.64,-22.643],[.144,-25.919],[8.748,-22.643],[11.664,-13.248],[11.664,-11.16],[4.175,-11.16],[4.175,-13.751],[3.167,-17.532],[.215,-18.719],[-3.745,-13.895],[-2.268,-8.784],[3.095,-3.023],[9.936,4.825],[11.808,13.105],[8.748,22.609],[-.144,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1881.698,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.017,2.185],[0,4.08],[0,0],[0,0],[0,0],[-.696,-.768],[-1.297,0],[-.696,.768],[0,1.727],[0,0],[0,0],[0,0],[2.016,-2.184],[3.84,0]],o:[[-2.016,-2.184],[0,0],[0,0],[0,0],[0,1.727],[.696,.768],[1.296,0],[.695,-.768],[0,0],[0,0],[0,0],[0,4.08],[-2.015,2.185],[-3.841,0]],v:[[-8.784,22.285],[-11.807,12.889],[-11.807,-25.56],[-3.888,-25.56],[-3.888,13.465],[-2.844,17.209],[.145,18.36],[3.131,17.209],[4.176,13.465],[4.176,-25.56],[11.807,-25.56],[11.807,12.889],[8.784,22.285],[0,25.56]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1853.834,1636.359],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.496],[-.251,-16.416],[-.396,-16.416],[-3.852,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.364,-25.2],[5.364,-25.2],[13.572,25.2],[5.652,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.228,25.2],[-13.572,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1825.071,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:4,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.648,.72],[0,1.728],[0,0],[.647,.719],[1.296,0],[0,0],[0,0]],o:[[1.296,0],[.647,-.72],[0,0],[0,-1.727],[-.648,-.72],[0,0],[0,0],[0,0]],v:[[-.072,-2.52],[2.844,-3.599],[3.816,-7.271],[3.816,-13.249],[2.844,-16.919],[-.072,-18],[-3.816,-18],[-3.816,-2.52]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.968,-2.111],[0,-4.079],[0,0],[1.968,-2.111],[3.935,0],[0,0],[0,0],[0,0]],o:[[0,0],[3.935,0],[1.968,2.114],[0,0],[0,4.08],[-1.968,2.114],[0,0],[0,0],[0,0],[0,0]],v:[[-11.736,-25.2],[-.072,-25.2],[8.783,-22.032],[11.736,-12.745],[11.736,-7.776],[8.783,1.511],[-.072,4.68],[-3.816,4.68],[-3.816,25.2],[-11.736,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1800.052,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:4,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"mute-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:750,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:780,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:885,s:[100]},{t:900,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:750,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:780,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,3.313],[0,0],[2.737,0],[0,-3.311],[0,0],[-2.736,0]],o:[[0,0],[0,-3.311],[-2.736,0],[0,0],[0,3.313],[2.737,0]],v:[[4.104,13.752],[4.104,-13.752],[0,-18.72],[-4.104,-13.752],[-4.104,13.752],[0,18.72]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[2.062,2.208],[0,4.032],[0,0],[-2.065,2.208],[-3.887,0],[-2.064,-2.208],[0,-4.032],[0,0],[2.064,-2.207],[3.888,0]],o:[[-2.065,-2.207],[0,0],[0,-4.032],[2.062,-2.208],[3.888,0],[2.064,2.208],[0,0],[0,4.032],[-2.064,2.208],[-3.887,0]],v:[[-8.927,22.608],[-12.024,13.248],[-12.024,-13.248],[-8.927,-22.607],[0,-25.92],[8.928,-22.607],[12.024,-13.248],[12.024,13.248],[8.928,22.608],[0,25.92]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2036.133,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-3.96,-25.2],[3.96,-25.2],[3.96,25.2],[-3.96,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2014.822,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.696,.767],[0,1.728],[0,0],[.696,.769],[1.296,0],[0,0],[0,0]],o:[[1.296,0],[.696,-.768],[0,0],[0,-1.728],[-.696,-.767],[0,0],[0,0],[0,0]],v:[[0,18],[2.988,16.849],[4.032,13.104],[4.032,-13.104],[2.988,-16.848],[0,-18],[-4.032,-18],[-4.032,18]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.969,-2.112],[0,-4.079],[0,0],[1.968,-2.111],[3.935,0],[0,0]],o:[[0,0],[3.935,0],[1.968,2.113],[0,0],[0,4.08],[-1.969,2.113],[0,0],[0,0]],v:[[-11.952,-25.2],[.144,-25.2],[9,-22.032],[11.952,-12.744],[11.952,12.744],[9,22.032],[.144,25.2],[-11.952,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1993.583,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.016,2.185],[0,4.08],[0,0],[0,0],[0,0],[-.696,-.768],[-1.296,0],[-.696,.768],[0,1.727],[0,0],[0,0],[0,0],[2.017,-2.184],[3.839,0]],o:[[-2.017,-2.184],[0,0],[0,0],[0,0],[0,1.727],[.696,.768],[1.296,0],[.695,-.768],[0,0],[0,0],[0,0],[0,4.08],[-2.015,2.185],[-3.841,0]],v:[[-8.784,22.285],[-11.808,12.889],[-11.808,-25.56],[-3.888,-25.56],[-3.888,13.465],[-2.845,17.209],[.144,18.36],[3.132,17.209],[4.176,13.465],[4.176,-25.56],[11.808,-25.56],[11.808,12.889],[8.783,22.285],[0,25.56]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1964.208,1636.359],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.277,8.496],[-.251,-16.416],[-.396,-16.416],[-3.851,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.365,-25.2],[5.365,-25.2],[13.573,25.2],[5.653,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.227,25.2],[-13.573,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1935.444,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:4,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1897.106,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.96,-18],[-12.24,-18],[-12.24,-25.2],[12.24,-25.2],[12.24,-18],[3.96,-18],[3.96,25.2],[-3.96,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1870.25,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.016,2.185],[0,4.08],[0,0],[0,0],[0,0],[-.696,-.768],[-1.296,0],[-.696,.768],[0,1.727],[0,0],[0,0],[0,0],[2.016,-2.184],[3.84,0]],o:[[-2.016,-2.184],[0,0],[0,0],[0,0],[0,1.727],[.695,.768],[1.296,0],[.695,-.768],[0,0],[0,0],[0,0],[0,4.08],[-2.016,2.185],[-3.841,0]],v:[[-8.784,22.285],[-11.808,12.889],[-11.808,-25.56],[-3.888,-25.56],[-3.888,13.465],[-2.844,17.209],[.144,18.36],[3.132,17.209],[4.176,13.465],[4.176,-25.56],[11.808,-25.56],[11.808,12.889],[8.784,22.285],[0,25.56]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1842.675,1636.359],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.112,-25.2],[-.072,10.872],[.072,10.872],[5.112,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.784,-12.96],[3.024,25.2],[-3.6,25.2],[-9.36,-12.96],[-9.504,-12.96],[-9.504,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1808.835,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:2,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"camera-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:600,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:630,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:735,s:[100]},{t:750,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:600,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:630,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.496],[-.251,-16.416],[-.396,-16.416],[-3.852,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.364,-25.2],[5.364,-25.2],[13.572,25.2],[5.652,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.228,25.2],[-13.572,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2086.784,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.792,.818],[0,1.92],[0,0],[.649,.817],[1.391,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.815],[0,0],[0,-1.824],[-.648,-.816],[0,0],[0,0],[0,0]],v:[[-1.404,-3.6],[2.16,-4.825],[3.348,-8.927],[3.348,-12.816],[2.376,-16.776],[-.683,-18],[-4.284,-18],[-4.284,-3.6]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.895],[0,-3.935],[0,0],[3.456,-1.391],[0,0],[-.792,-1.775],[0,-2.975],[0,0],[-.097,-.888],[-.384,-.864],[0,0],[.094,.72],[0,1.872],[0,0],[.744,.913],[1.824,0],[0,0],[0,0],[0,0]],o:[[0,0],[4.079,0],[1.872,1.897],[0,0],[0,5.232],[0,0],[1.919,.576],[.792,1.777],[0,0],[0,1.44],[.095,.889],[0,0],[-.288,-.816],[-.098,-.721],[0,0],[0,-2.304],[-.744,-.911],[0,0],[0,0],[0,0],[0,0]],v:[[-12.204,-25.201],[-.467,-25.201],[8.46,-22.356],[11.268,-13.608],[11.268,-10.512],[6.084,-.577],[6.084,-.432],[10.153,3.096],[11.34,10.224],[11.34,19.08],[11.485,22.572],[12.204,25.2],[4.14,25.2],[3.565,22.896],[3.42,19.007],[3.42,9.792],[2.304,4.967],[-1.548,3.6],[-4.284,3.6],[-4.284,25.2],[-12.204,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2058.489,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:4,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2030.949,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.112,-25.2],[-.072,10.872],[.072,10.872],[5.112,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.784,-12.96],[3.024,25.2],[-3.6,25.2],[-9.36,-12.96],[-9.504,-12.96],[-9.504,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1997.83,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.496],[-.251,-16.416],[-.396,-16.416],[-3.852,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.364,-25.2],[5.364,-25.2],[13.572,25.2],[5.652,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.228,25.2],[-13.572,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1964.027,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:4,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.991,2.159],[0,3.937],[0,0],[-1.992,2.16],[-3.792,0],[-1.994,-2.161],[0,-3.934],[0,0],[0,0],[0,0],[2.638,0],[0,-3.119],[0,0],[-2.641,0],[0,3.072],[0,0],[0,0],[0,0],[1.991,-2.16],[3.792,0]],o:[[-1.992,-2.16],[0,0],[0,-3.934],[1.991,-2.161],[3.792,0],[1.991,2.16],[0,0],[0,0],[0,0],[0,-3.119],[-2.641,0],[0,0],[0,3.072],[2.638,0],[0,0],[0,0],[0,0],[0,3.937],[-1.994,2.159],[-3.792,0]],v:[[-8.677,22.681],[-11.664,13.536],[-11.664,-13.536],[-8.677,-22.679],[-.001,-25.92],[8.676,-22.679],[11.663,-13.536],[11.663,-8.208],[4.176,-8.208],[4.176,-14.04],[.216,-18.719],[-3.744,-14.04],[-3.744,14.113],[.216,18.72],[4.176,14.113],[4.176,6.409],[11.663,6.409],[11.663,13.536],[8.676,22.681],[-.001,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1936.128,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1898.114,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.016,2.185],[0,4.08],[0,0],[-2.016,2.184],[-3.841,0],[-2.016,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[2.736,0],[0,-3.312],[0,0],[-2.736,0],[0,3.264],[0,0],[0,0],[0,0],[0,0],[0,0],[2.016,-2.184],[3.84,0]],o:[[-2.016,-2.184],[0,0],[0,-4.079],[2.016,-2.184],[3.84,0],[2.016,2.184],[0,0],[0,0],[0,0],[0,-3.312],[-2.736,0],[0,0],[0,3.264],[2.736,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,4.08],[-2.016,2.185],[-3.841,0]],v:[[-8.784,22.645],[-11.808,13.249],[-11.808,-13.248],[-8.784,-22.643],[0,-25.919],[8.784,-22.643],[11.808,-13.248],[11.808,-8.927],[4.32,-8.927],[4.32,-13.751],[.216,-18.719],[-3.888,-13.751],[-3.888,13.825],[.216,18.72],[4.32,13.825],[4.32,3.96],[.36,3.96],[.36,-3.24],[11.808,-3.24],[11.808,13.249],[8.784,22.645],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1870.394,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.42,-25.2],[-2.484,-25.2],[5.22,4.968],[5.364,4.968],[5.364,-25.2],[12.42,-25.2],[12.42,25.2],[4.284,25.2],[-5.22,-11.592],[-5.364,-11.592],[-5.364,25.2],[-12.42,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1840.839,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:2,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.496],[-.252,-16.416],[-.396,-16.416],[-3.852,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.364,-25.2],[5.364,-25.2],[13.572,25.2],[5.652,25.2],[4.212,15.192],[4.212,15.336],[-4.788,15.336],[-6.228,25.2],[-13.572,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1811.031,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 10",np:4,cix:2,bm:0,ix:10,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.168,-25.2],[-4.248,-25.2],[-4.248,-4.679],[4.248,-4.679],[4.248,-25.2],[12.168,-25.2],[12.168,25.2],[4.248,25.2],[4.248,2.521],[-4.248,2.521],[-4.248,25.2],[-12.168,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1781.476,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 11",np:2,cix:2,bm:0,ix:11,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.991,2.159],[0,3.937],[0,0],[-1.992,2.16],[-3.792,0],[-1.993,-2.161],[0,-3.934],[0,0],[0,0],[0,0],[2.639,0],[0,-3.119],[0,0],[-2.641,0],[0,3.072],[0,0],[0,0],[0,0],[1.991,-2.16],[3.791,0]],o:[[-1.992,-2.16],[0,0],[0,-3.934],[1.991,-2.161],[3.791,0],[1.991,2.16],[0,0],[0,0],[0,0],[0,-3.119],[-2.641,0],[0,0],[0,3.072],[2.639,0],[0,0],[0,0],[0,0],[0,3.937],[-1.993,2.159],[-3.792,0]],v:[[-8.676,22.681],[-11.664,13.536],[-11.664,-13.536],[-8.676,-22.679],[0,-25.92],[8.676,-22.679],[11.664,-13.536],[11.664,-8.208],[4.176,-8.208],[4.176,-14.04],[.216,-18.719],[-3.744,-14.04],[-3.744,14.113],[.216,18.72],[4.176,14.113],[4.176,6.409],[11.664,6.409],[11.664,13.536],[8.676,22.681],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1752.892,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 12",np:2,cix:2,bm:0,ix:12,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"horn-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:450,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:480,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:585,s:[100]},{t:600,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:450,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:480,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.42,-25.2],[-2.483,-25.2],[5.22,4.968],[5.364,4.968],[5.364,-25.2],[12.42,-25.2],[12.42,25.2],[4.284,25.2],[-5.22,-11.592],[-5.364,-11.592],[-5.364,25.2],[-12.42,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1964.028,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.792,.818],[0,1.92],[0,0],[.648,.817],[1.391,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.815],[0,0],[0,-1.824],[-.648,-.816],[0,0],[0,0],[0,0]],v:[[-1.403,-3.6],[2.16,-4.825],[3.349,-8.927],[3.349,-12.816],[2.376,-16.776],[-.683,-18],[-4.283,-18],[-4.283,-3.6]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.895],[0,-3.935],[0,0],[3.455,-1.391],[0,0],[-.792,-1.775],[0,-2.975],[0,0],[-.097,-.888],[-.384,-.864],[0,0],[.095,.72],[0,1.872],[0,0],[.743,.913],[1.825,0],[0,0],[0,0],[0,0]],o:[[0,0],[4.079,0],[1.871,1.897],[0,0],[0,5.232],[0,0],[1.919,.576],[.792,1.777],[0,0],[0,1.44],[.095,.889],[0,0],[-.288,-.816],[-.097,-.721],[0,0],[0,-2.304],[-.745,-.911],[0,0],[0,0],[0,0],[0,0]],v:[[-12.203,-25.201],[-.468,-25.201],[8.46,-22.356],[11.269,-13.608],[11.269,-10.512],[6.084,-.577],[6.084,-.432],[10.152,3.096],[11.34,10.224],[11.34,19.08],[11.484,22.572],[12.203,25.2],[4.141,25.2],[3.564,22.896],[3.421,19.007],[3.421,9.792],[2.304,4.967],[-1.548,3.6],[-4.283,3.6],[-4.283,25.2],[-12.203,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1934.796,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:4,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,3.313],[0,0],[2.736,0],[0,-3.311],[0,0],[-2.736,0]],o:[[0,0],[0,-3.311],[-2.736,0],[0,0],[0,3.313],[2.736,0]],v:[[4.104,13.752],[4.104,-13.752],[0,-18.72],[-4.104,-13.752],[-4.104,13.752],[0,18.72]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[2.063,2.208],[0,4.032],[0,0],[-2.064,2.208],[-3.888,0],[-2.064,-2.208],[0,-4.032],[0,0],[2.063,-2.207],[3.888,0]],o:[[-2.064,-2.207],[0,0],[0,-4.032],[2.063,-2.208],[3.888,0],[2.063,2.208],[0,0],[0,4.032],[-2.064,2.208],[-3.888,0]],v:[[-8.928,22.608],[-12.024,13.248],[-12.024,-13.248],[-8.928,-22.607],[0,-25.92],[8.928,-22.607],[12.024,-13.248],[12.024,13.248],[8.928,22.608],[0,25.92]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1905.241,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.168,-25.2],[-4.248,-25.2],[-4.248,-4.679],[4.248,-4.679],[4.248,-25.2],[12.168,-25.2],[12.168,25.2],[4.248,25.2],[4.248,2.521],[-4.248,2.521],[-4.248,25.2],[-12.168,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1875.721,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"reset-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:330,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:435,s:[100]},{t:450,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:300,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:330,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.792,.818],[0,1.92],[0,0],[.649,.817],[1.391,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.815],[0,0],[0,-1.824],[-.648,-.816],[0,0],[0,0],[0,0]],v:[[-1.404,-3.6],[2.16,-4.825],[3.348,-8.927],[3.348,-12.816],[2.376,-16.776],[-.683,-18],[-4.284,-18],[-4.284,-3.6]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.895],[0,-3.935],[0,0],[3.456,-1.391],[0,0],[-.792,-1.775],[0,-2.975],[0,0],[-.097,-.888],[-.384,-.864],[0,0],[.094,.72],[0,1.872],[0,0],[.744,.913],[1.824,0],[0,0],[0,0],[0,0]],o:[[0,0],[4.079,0],[1.872,1.897],[0,0],[0,5.232],[0,0],[1.919,.576],[.792,1.777],[0,0],[0,1.44],[.095,.889],[0,0],[-.288,-.816],[-.098,-.721],[0,0],[0,-2.304],[-.744,-.911],[0,0],[0,0],[0,0],[0,0]],v:[[-12.204,-25.201],[-.467,-25.201],[8.46,-22.356],[11.268,-13.608],[11.268,-10.512],[6.084,-.577],[6.084,-.432],[10.153,3.096],[11.34,10.224],[11.34,19.08],[11.485,22.572],[12.204,25.2],[4.14,25.2],[3.565,22.896],[3.42,19.007],[3.42,9.792],[2.304,4.967],[-1.548,3.6],[-4.284,3.6],[-4.284,25.2],[-12.204,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2021.841,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.277,8.496],[-.251,-16.416],[-.396,-16.416],[-3.851,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.365,-25.2],[5.365,-25.2],[13.573,25.2],[5.653,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.227,25.2],[-13.573,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1992.251,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:4,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.991,2.159],[0,3.937],[0,0],[-1.992,2.16],[-3.792,0],[-1.993,-2.161],[0,-3.934],[0,0],[0,0],[0,0],[2.639,0],[0,-3.119],[0,0],[-2.641,0],[0,3.072],[0,0],[0,0],[0,0],[1.991,-2.16],[3.791,0]],o:[[-1.992,-2.16],[0,0],[0,-3.934],[1.991,-2.161],[3.791,0],[1.991,2.16],[0,0],[0,0],[0,0],[0,-3.119],[-2.641,0],[0,0],[0,3.072],[2.639,0],[0,0],[0,0],[0,0],[0,3.937],[-1.993,2.159],[-3.792,0]],v:[[-8.676,22.681],[-11.664,13.536],[-11.664,-13.536],[-8.676,-22.679],[0,-25.92],[8.676,-22.679],[11.664,-13.536],[11.664,-8.208],[4.176,-8.208],[4.176,-14.04],[.216,-18.719],[-3.744,-14.04],[-3.744,14.113],[.216,18.72],[4.176,14.113],[4.176,6.409],[11.664,6.409],[11.664,13.536],[8.676,22.681],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1964.352,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.96,-18],[-12.24,-18],[-12.24,-25.2],[12.24,-25.2],[12.24,-18],[3.96,-18],[3.96,25.2],[-3.96,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1925.616,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1900.13,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.967,2.185],[0,4.08],[0,0],[0,0],[0,0],[-2.736,0],[-.697,.792],[0,1.777],[.96,1.608],[2.592,2.257],[1.296,2.329],[0,2.928],[-2.016,2.184],[-3.841,0],[-1.944,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[.671,.792],[1.296,0],[0,-3.216],[-.984,-1.584],[-2.592,-2.256],[-1.249,-2.352],[0,-3.168],[2.04,-2.207],[3.888,0]],o:[[-1.969,-2.184],[0,0],[0,0],[0,0],[0,3.264],[1.343,0],[.695,-.792],[0,-2.112],[-.961,-1.608],[-3.265,-2.88],[-1.296,-2.327],[0,-3.984],[2.016,-2.184],[3.791,0],[1.944,2.184],[0,0],[0,0],[0,0],[0,-1.728],[-.673,-.792],[-2.64,0],[0,1.824],[.983,1.584],[3.312,2.88],[1.248,2.352],[0,4.129],[-2.041,2.208],[-3.841,0]],v:[[-8.856,22.645],[-11.808,13.249],[-11.808,10.369],[-4.32,10.369],[-4.32,13.825],[-.216,18.72],[2.844,17.533],[3.888,13.681],[2.448,8.101],[-2.88,2.304],[-9.72,-5.507],[-11.664,-13.391],[-8.64,-22.643],[.144,-25.919],[8.748,-22.643],[11.664,-13.248],[11.664,-11.16],[4.176,-11.16],[4.176,-13.751],[3.168,-17.532],[.216,-18.719],[-3.744,-13.895],[-2.268,-8.784],[3.096,-3.023],[9.936,4.825],[11.808,13.105],[8.748,22.609],[-.144,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1872.986,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1847.067,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.792,.818],[0,1.92],[0,0],[.648,.817],[1.392,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.815],[0,0],[0,-1.824],[-.648,-.816],[0,0],[0,0],[0,0]],v:[[-1.404,-3.6],[2.16,-4.825],[3.348,-8.927],[3.348,-12.816],[2.376,-16.776],[-.684,-18],[-4.284,-18],[-4.284,-3.6]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.895],[0,-3.935],[0,0],[3.456,-1.391],[0,0],[-.792,-1.775],[0,-2.975],[0,0],[-.096,-.888],[-.385,-.864],[0,0],[.095,.72],[0,1.872],[0,0],[.744,.913],[1.824,0],[0,0],[0,0],[0,0]],o:[[0,0],[4.079,0],[1.872,1.897],[0,0],[0,5.232],[0,0],[1.919,.576],[.792,1.777],[0,0],[0,1.44],[.096,.889],[0,0],[-.288,-.816],[-.097,-.721],[0,0],[0,-2.304],[-.745,-.911],[0,0],[0,0],[0,0],[0,0]],v:[[-12.204,-25.201],[-.468,-25.201],[8.46,-22.356],[11.268,-13.608],[11.268,-10.512],[6.084,-.577],[6.084,-.432],[10.152,3.096],[11.34,10.224],[11.34,19.08],[11.484,22.572],[12.204,25.2],[4.14,25.2],[3.564,22.896],[3.42,19.007],[3.42,9.792],[2.304,4.967],[-1.548,3.6],[-4.284,3.6],[-4.284,25.2],[-12.204,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1819.454,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:4,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:7,ty:4,nm:"brake-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:285,s:[100]},{t:300,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:150,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:180,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1979.075,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-13.032,-25.2],[-5.112,-25.2],[-5.112,-3.96],[4.968,-25.2],[12.888,-25.2],[3.456,-6.696],[13.032,25.2],[4.752,25.2],[-1.944,2.737],[-5.112,9.145],[-5.112,25.2],[-13.032,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1951.5,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.277,8.496],[-.251,-16.416],[-.396,-16.416],[-3.851,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.365,-25.2],[5.365,-25.2],[13.573,25.2],[5.653,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.227,25.2],[-13.573,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1921.081,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.792,.818],[0,1.92],[0,0],[.648,.817],[1.392,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.815],[0,0],[0,-1.824],[-.648,-.816],[0,0],[0,0],[0,0]],v:[[-1.404,-3.6],[2.16,-4.825],[3.348,-8.927],[3.348,-12.816],[2.376,-16.776],[-.684,-18],[-4.284,-18],[-4.284,-3.6]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.895],[0,-3.935],[0,0],[3.456,-1.391],[0,0],[-.792,-1.775],[0,-2.975],[0,0],[-.096,-.888],[-.385,-.864],[0,0],[.095,.72],[0,1.872],[0,0],[.744,.913],[1.824,0],[0,0],[0,0],[0,0]],o:[[0,0],[4.079,0],[1.872,1.897],[0,0],[0,5.232],[0,0],[1.919,.576],[.792,1.777],[0,0],[0,1.44],[.096,.889],[0,0],[-.288,-.816],[-.097,-.721],[0,0],[0,-2.304],[-.745,-.911],[0,0],[0,0],[0,0],[0,0]],v:[[-12.204,-25.201],[-.468,-25.201],[8.46,-22.356],[11.268,-13.608],[11.268,-10.512],[6.084,-.577],[6.084,-.432],[10.152,3.096],[11.34,10.224],[11.34,19.08],[11.484,22.572],[12.204,25.2],[4.14,25.2],[3.564,22.896],[3.42,19.007],[3.42,9.792],[2.304,4.967],[-1.548,3.6],[-4.284,3.6],[-4.284,25.2],[-12.204,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1892.785,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:4,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.673,.745],[0,1.825],[0,0],[.792,.888],[1.823,0],[0,0],[0,0]],o:[[1.392,0],[.672,-.743],[0,0],[0,-2.305],[-.792,-.888],[0,0],[0,0],[0,0]],v:[[.216,18],[3.312,16.884],[4.32,13.032],[4.32,8.641],[3.132,3.853],[-.792,2.521],[-4.32,2.521],[-4.32,18]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[-.792,.816],[0,1.92],[0,0],[.648,.816],[1.391,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.817],[0,0],[0,-1.825],[-.648,-.817],[0,0],[0,0],[0,0]],v:[[-1.224,-4.68],[2.34,-5.903],[3.528,-10.008],[3.528,-12.815],[2.556,-16.775],[-.504,-18],[-4.32,-18],[-4.32,-4.68]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.896],[0,-3.936],[0,0],[.839,-1.631],[1.728,-.72],[0,0],[0,-5.663],[0,0],[2.039,-2.04],[3.935,0],[0,0]],o:[[0,0],[4.079,0],[1.872,1.896],[0,0],[0,2.592],[-.841,1.633],[0,0],[3.935,1.345],[0,0],[0,3.888],[-2.041,2.04],[0,0],[0,0]],v:[[-12.24,-25.2],[-.288,-25.2],[8.64,-22.355],[11.448,-13.607],[11.448,-11.592],[10.188,-5.256],[6.336,-1.728],[6.336,-1.584],[12.24,8.928],[12.24,13.248],[9.18,22.141],[.216,25.2],[-12.24,25.2]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1863.734,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:5,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"movement-text Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:135,s:[100]},{t:150,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[1920,1100,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:30,s:[1920,1080,0]}],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.961,-18],[-12.24,-18],[-12.24,-25.2],[12.24,-25.2],[12.24,-18],[3.959,-18],[3.959,25.2],[-3.961,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2028.322,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.42,-25.2],[-2.484,-25.2],[5.219,4.968],[5.363,4.968],[5.363,-25.2],[12.42,-25.2],[12.42,25.2],[4.283,25.2],[-5.221,-11.592],[-5.365,-11.592],[-5.365,25.2],[-12.42,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1999.848,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1972.092,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.113,-25.2],[-.072,10.872],[.071,10.872],[5.111,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.783,-12.96],[3.023,25.2],[-3.601,25.2],[-9.361,-12.96],[-9.505,-12.96],[-9.505,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1938.973,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.679],[7.992,-4.679],[7.992,2.521],[-2.88,2.521],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1907.221,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.888,-25.2],[-4.896,-25.2],[.288,13.897],[.432,13.897],[5.616,-25.2],[12.888,-25.2],[5.256,25.2],[-5.256,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1879.717,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,3.313],[0,0],[2.736,0],[0,-3.311],[0,0],[-2.736,0]],o:[[0,0],[0,-3.311],[-2.736,0],[0,0],[0,3.313],[2.736,0]],v:[[4.104,13.752],[4.104,-13.752],[0,-18.72],[-4.104,-13.752],[-4.104,13.752],[0,18.72]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[2.063,2.208],[0,4.032],[0,0],[-2.064,2.208],[-3.888,0],[-2.064,-2.208],[0,-4.032],[0,0],[2.063,-2.207],[3.888,0]],o:[[-2.064,-2.207],[0,0],[0,-4.032],[2.063,-2.208],[3.888,0],[2.063,2.208],[0,0],[0,4.032],[-2.064,2.208],[-3.888,0]],v:[[-8.928,22.608],[-12.024,13.248],[-12.024,-13.248],[-8.928,-22.607],[0,-25.92],[8.928,-22.607],[12.024,-13.248],[12.024,13.248],[8.928,22.608],[0,25.92]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1851.709,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:4,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.112,-25.2],[-.072,10.872],[.072,10.872],[5.112,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.784,-12.96],[3.024,25.2],[-3.6,25.2],[-9.36,-12.96],[-9.504,-12.96],[-9.504,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.89019613827,.482352971096,.486274539723,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1817.942,1635.999],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:9,ty:4,nm:"escape-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.991,2.16],[0,3.936],[0,0],[-1.992,2.16],[-3.792,0],[-1.993,-2.16],[0,-3.935],[0,0],[0,0],[0,0],[2.639,0],[0,-3.12],[0,0],[-2.641,0],[0,3.072],[0,0],[0,0],[0,0],[1.991,-2.16],[3.791,0]],o:[[-1.992,-2.16],[0,0],[0,-3.935],[1.991,-2.16],[3.791,0],[1.991,2.16],[0,0],[0,0],[0,0],[0,-3.12],[-2.641,0],[0,0],[0,3.072],[2.639,0],[0,0],[0,0],[0,0],[0,3.936],[-1.993,2.16],[-3.792,0]],v:[[-8.676,22.68],[-11.664,13.536],[-11.664,-13.536],[-8.676,-22.68],[0,-25.92],[8.676,-22.68],[11.664,-13.536],[11.664,-8.208],[4.176,-8.208],[4.176,-14.04],[.216,-18.72],[-3.744,-14.04],[-3.744,14.112],[.216,18.72],[4.176,14.112],[4.176,6.408],[11.664,6.408],[11.664,13.536],[8.676,22.68],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1050,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1079,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1199,s:[1,1,1,1]},{t:1229,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[772.779,755.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.967,2.185],[0,4.081],[0,0],[0,0],[0,0],[-2.736,0],[-.697,.792],[0,1.777],[.96,1.609],[2.592,2.257],[1.296,2.329],[0,2.929],[-2.016,2.185],[-3.841,0],[-1.944,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[.671,.792],[1.296,0],[0,-3.215],[-.984,-1.584],[-2.592,-2.255],[-1.249,-2.351],[0,-3.168],[2.04,-2.207],[3.888,0]],o:[[-1.969,-2.184],[0,0],[0,0],[0,0],[0,3.265],[1.343,0],[.695,-.792],[0,-2.112],[-.961,-1.607],[-3.265,-2.88],[-1.296,-2.327],[0,-3.984],[2.016,-2.184],[3.791,0],[1.944,2.185],[0,0],[0,0],[0,0],[0,-1.728],[-.673,-.792],[-2.64,0],[0,1.825],[.983,1.584],[3.312,2.88],[1.248,2.353],[0,4.129],[-2.041,2.208],[-3.841,0]],v:[[-8.856,22.644],[-11.808,13.248],[-11.808,10.368],[-4.32,10.368],[-4.32,13.824],[-.216,18.72],[2.844,17.532],[3.888,13.68],[2.448,8.1],[-2.88,2.304],[-9.72,-5.508],[-11.664,-13.392],[-8.64,-22.644],[.144,-25.92],[8.748,-22.644],[11.664,-13.248],[11.664,-11.16],[4.176,-11.16],[4.176,-13.752],[3.168,-17.532],[.216,-18.72],[-3.744,-13.896],[-2.268,-8.784],[3.096,-3.024],[9.936,4.824],[11.808,13.104],[8.748,22.608],[-.144,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1050,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1079,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1199,s:[1,1,1,1]},{t:1229,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[745.276,755.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.2],[10.8,-25.2],[10.8,-18],[-2.88,-18],[-2.88,-4.68],[7.992,-4.68],[7.992,2.52],[-2.88,2.52],[-2.88,18],[10.8,18],[10.8,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1050,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1079,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1199,s:[1,1,1,1]},{t:1229,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[719.357,755.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:10,ty:4,nm:"escape Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[746.5,755.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1050,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1080,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1200,s:[.890196084976,.482352942228,.486274510622,1]},{t:1230,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[746.5,755.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:11,ty:4,nm:"pause-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.648,.72],[0,1.728],[0,0],[.648,.72],[1.296,0],[0,0],[0,0]],o:[[1.296,0],[.648,-.72],[0,0],[0,-1.728],[-.648,-.72],[0,0],[0,0],[0,0]],v:[[-.072,-2.52],[2.844,-3.6],[3.816,-7.272],[3.816,-13.248],[2.844,-16.92],[-.072,-18],[-3.816,-18],[-3.816,-2.52]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.968,-2.112],[0,-4.079],[0,0],[1.967,-2.112],[3.936,0],[0,0],[0,0],[0,0]],o:[[0,0],[3.936,0],[1.967,2.113],[0,0],[0,4.081],[-1.968,2.113],[0,0],[0,0],[0,0],[0,0]],v:[[-11.736,-25.2],[-.072,-25.2],[8.784,-22.032],[11.736,-12.744],[11.736,-7.776],[8.784,1.512],[-.072,4.68],[-3.816,4.68],[-3.816,25.2],[-11.736,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:900,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:929,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1049,s:[1,1,1,1]},{t:1079,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2448,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:12,ty:4,nm:"pause Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2448,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:900,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:930,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1050,s:[.890196084976,.482352942228,.486274510622,1]},{t:1080,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2448,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:13,ty:4,nm:"mute-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-16.416,-25.2],[-5.112,-25.2],[-.072,10.872],[.072,10.872],[5.112,-25.2],[16.416,-25.2],[16.416,25.2],[8.928,25.2],[8.928,-12.96],[8.784,-12.96],[3.024,25.2],[-3.6,25.2],[-9.36,-12.96],[-9.504,-12.96],[-9.504,25.2],[-16.416,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:750,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:779,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:899,s:[1,1,1,1]},{t:929,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2085,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:14,ty:4,nm:"mute Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2085,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:750,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:780,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:900,s:[.890196084976,.482352942228,.486274510622,1]},{t:930,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2085,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:15,ty:4,nm:"camera-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.991,2.16],[0,3.937],[0,0],[-1.992,2.159],[-3.792,0],[-1.993,-2.161],[0,-3.935],[0,0],[0,0],[0,0],[2.639,0],[0,-3.12],[0,0],[-2.641,0],[0,3.072],[0,0],[0,0],[0,0],[1.991,-2.16],[3.791,0]],o:[[-1.992,-2.16],[0,0],[0,-3.935],[1.991,-2.161],[3.791,0],[1.991,2.159],[0,0],[0,0],[0,0],[0,-3.12],[-2.641,0],[0,0],[0,3.072],[2.639,0],[0,0],[0,0],[0,0],[0,3.937],[-1.993,2.16],[-3.792,0]],v:[[-8.676,22.68],[-11.664,13.536],[-11.664,-13.536],[-8.676,-22.679],[0,-25.92],[8.676,-22.679],[11.664,-13.536],[11.664,-8.208],[4.176,-8.208],[4.176,-14.04],[.216,-18.719],[-3.744,-14.04],[-3.744,14.113],[.216,18.72],[4.176,14.113],[4.176,6.409],[11.664,6.409],[11.664,13.536],[8.676,22.68],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:601,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:630,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:750,s:[1,1,1,1]},{t:780,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1437,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:16,ty:4,nm:"camera Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1437,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:600,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:630,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:750,s:[.890196084976,.482352942228,.486274510622,1]},{t:780,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1437,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:17,ty:4,nm:"horn-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-12.168,-25.199],[-4.248,-25.199],[-4.248,-4.679],[4.248,-4.679],[4.248,-25.199],[12.168,-25.199],[12.168,25.2],[4.248,25.2],[4.248,2.521],[-4.248,2.521],[-4.248,25.2],[-12.168,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:450,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:480,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:600,s:[1,1,1,1]},{t:630,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1842,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:18,ty:4,nm:"horn Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1842,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:450,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:480,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:600,s:[.890196084976,.482352942228,.486274510622,1]},{t:630,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1842,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:19,ty:4,nm:"reset-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.792,.818],[0,1.92],[0,0],[.649,.818],[1.391,0],[0,0],[0,0]],o:[[1.584,0],[.792,-.815],[0,0],[0,-1.823],[-.648,-.815],[0,0],[0,0],[0,0]],v:[[-1.404,-3.6],[2.16,-4.825],[3.348,-8.927],[3.348,-12.816],[2.376,-16.776],[-.683,-17.999],[-4.284,-17.999],[-4.284,-3.6]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.872,-1.895],[0,-3.934],[0,0],[3.456,-1.391],[0,0],[-.792,-1.775],[0,-2.975],[0,0],[-.097,-.888],[-.384,-.864],[0,0],[.094,.721],[0,1.872],[0,0],[.744,.912],[1.824,0],[0,0],[0,0],[0,0]],o:[[0,0],[4.079,0],[1.872,1.898],[0,0],[0,5.232],[0,0],[1.919,.575],[.792,1.777],[0,0],[0,1.439],[.095,.889],[0,0],[-.288,-.816],[-.098,-.72],[0,0],[0,-2.304],[-.744,-.911],[0,0],[0,0],[0,0],[0,0]],v:[[-12.204,-25.201],[-.467,-25.201],[8.46,-22.357],[11.268,-13.608],[11.268,-10.512],[6.084,-.576],[6.084,-.431],[10.153,3.096],[11.34,10.224],[11.34,19.081],[11.485,22.573],[12.204,25.201],[4.14,25.201],[3.565,22.896],[3.42,19.008],[3.42,9.793],[2.304,4.967],[-1.548,3.6],[-4.284,3.6],[-4.284,25.201],[-12.204,25.201]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:330,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:450,s:[1,1,1,1]},{t:480,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1476,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:20,ty:4,nm:"reset Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1476,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:330,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:450,s:[.890196084976,.482352942228,.486274510622,1]},{t:480,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1476,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:21,ty:4,nm:"brake-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-10.8,-25.199],[10.799,-25.199],[10.799,-18],[-2.881,-18],[-2.881,-4.679],[7.992,-4.679],[7.992,2.521],[-2.881,2.521],[-2.881,18],[10.799,18],[10.799,25.2],[-10.8,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[1,1,1,1]},{t:330,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1916.363,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.991,2.16],[0,3.937],[0,0],[-1.992,2.16],[-3.792,0],[-1.993,-2.161],[0,-3.935],[0,0],[0,0],[0,0],[2.639,0],[0,-3.119],[0,0],[-2.641,0],[0,3.072],[0,0],[0,0],[0,0],[1.991,-2.16],[3.791,0]],o:[[-1.992,-2.16],[0,0],[0,-3.935],[1.991,-2.161],[3.791,0],[1.991,2.16],[0,0],[0,0],[0,0],[0,-3.119],[-2.641,0],[0,0],[0,3.072],[2.639,0],[0,0],[0,0],[0,0],[0,3.937],[-1.993,2.16],[-3.792,0]],v:[[-8.676,22.68],[-11.664,13.535],[-11.664,-13.536],[-8.676,-22.68],[0,-25.921],[8.676,-22.68],[11.664,-13.536],[11.664,-8.208],[4.176,-8.208],[4.176,-14.041],[.216,-18.719],[-3.744,-14.041],[-3.744,14.112],[.216,18.72],[4.176,14.112],[4.176,6.408],[11.664,6.408],[11.664,13.535],[8.676,22.68],[0,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[1,1,1,1]},{t:330,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1889.147,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.276,8.495],[-.252,-16.417],[-.396,-16.417],[-3.852,8.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.364,-25.2],[5.364,-25.2],[13.572,25.199],[5.652,25.199],[4.212,15.191],[4.212,15.336],[-4.788,15.336],[-6.228,25.199],[-13.572,25.199]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[1,1,1,1]},{t:330,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1860.745,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.648,.72],[0,1.728],[0,0],[.648,.72],[1.296,0],[0,0],[0,0]],o:[[1.296,0],[.648,-.72],[0,0],[0,-1.727],[-.648,-.72],[0,0],[0,0],[0,0]],v:[[-.072,-2.52],[2.844,-3.6],[3.816,-7.272],[3.816,-13.249],[2.844,-16.92],[-.072,-18],[-3.816,-18],[-3.816,-2.52]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.969,-2.112],[0,-4.08],[0,0],[1.967,-2.112],[3.935,0],[0,0],[0,0],[0,0]],o:[[0,0],[3.935,0],[1.967,2.113],[0,0],[0,4.08],[-1.969,2.113],[0,0],[0,0],[0,0],[0,0]],v:[[-11.736,-25.2],[-.072,-25.2],[8.784,-22.032],[11.736,-12.744],[11.736,-7.776],[8.784,1.512],[-.072,4.68],[-3.816,4.68],[-3.816,25.2],[-11.736,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[1,1,1,1]},{t:330,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1835.725,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:4,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.967,2.185],[0,4.081],[0,0],[0,0],[0,0],[-2.736,0],[-.697,.792],[0,1.777],[.96,1.608],[2.592,2.257],[1.296,2.329],[0,2.929],[-2.016,2.184],[-3.841,0],[-1.944,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[.671,.792],[1.296,0],[0,-3.215],[-.984,-1.584],[-2.592,-2.256],[-1.249,-2.351],[0,-3.168],[2.04,-2.207],[3.888,0]],o:[[-1.969,-2.184],[0,0],[0,0],[0,0],[0,3.264],[1.343,0],[.695,-.792],[0,-2.112],[-.961,-1.607],[-3.265,-2.88],[-1.296,-2.327],[0,-3.984],[2.016,-2.184],[3.791,0],[1.944,2.184],[0,0],[0,0],[0,0],[0,-1.728],[-.673,-.792],[-2.64,0],[0,1.824],[.983,1.584],[3.312,2.88],[1.248,2.352],[0,4.129],[-2.041,2.208],[-3.841,0]],v:[[-8.856,22.644],[-11.808,13.248],[-11.808,10.368],[-4.32,10.368],[-4.32,13.824],[-.216,18.72],[2.844,17.532],[3.888,13.68],[2.448,8.1],[-2.88,2.304],[-9.72,-5.508],[-11.664,-13.392],[-8.64,-22.644],[.144,-25.92],[8.748,-22.644],[11.664,-13.249],[11.664,-11.16],[4.176,-11.16],[4.176,-13.752],[3.168,-17.532],[.216,-18.72],[-3.744,-13.896],[-2.268,-8.784],[3.096,-3.024],[9.936,4.824],[11.808,13.104],[8.748,22.608],[-.144,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[1,1,1,1]},{t:330,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1807.645,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:22,ty:4,nm:"brake Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[497.5,-81],[-497.5,-81],[-505.5,-73],[-505.5,73],[-497.5,81],[497.5,81],[505.5,73],[505.5,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[497.5,-77],[501.5,-73],[501.5,73],[497.5,77],[-497.5,77],[-501.5,73],[-501.5,-73],[-497.5,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333396912,.933333396912,.933333396912,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1861.5,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-497.5,79],[-503.5,73],[-503.5,-73],[-497.5,-79],[497.5,-79],[503.5,-73],[503.5,73],[497.5,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:180,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:300,s:[.890196084976,.482352942228,.486274510622,1]},{t:330,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1861.5,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:23,ty:4,nm:"movement-key Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[6,18],[1.8,13.65],[12.45,3],[-24,3],[-24,-3],[12.45,-3],[1.8,-13.65],[6,-18],[24,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3096,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6,-18],[-1.8,-13.65],[-12.45,-3],[24,-3],[24,3],[-12.45,3],[-1.8,13.65],[-6,18],[-24,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2772,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-18,6],[-13.65,1.8],[-3,12.45],[-3,-24],[3,-24],[3,12.45],[13.65,1.8],[18,6],[0,24]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2934,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[18,-6],[13.65,-1.8],[3,-12.45],[3,24],[-3,24],[-3,-12.45],[-13.65,-1.8],[-18,-6],[0,-24]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2934,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.696,.768],[0,1.728],[0,0],[.696,.769],[1.297,0],[0,0],[0,0]],o:[[1.297,0],[.696,-.768],[0,0],[0,-1.728],[-.696,-.767],[0,0],[0,0],[0,0]],v:[[0,18],[2.987,16.849],[4.031,13.104],[4.031,-13.104],[2.987,-16.848],[0,-18],[-4.031,-18],[-4.031,18]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[-1.969,-2.113],[0,-4.08],[0,0],[1.968,-2.111],[3.935,0],[0,0]],o:[[0,0],[3.935,0],[1.968,2.112],[0,0],[0,4.081],[-1.969,2.114],[0,0],[0,0]],v:[[-11.952,-25.199],[.144,-25.199],[9,-22.031],[11.951,-12.743],[11.951,12.744],[9,22.032],[.144,25.2],[-11.952,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1356,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:4,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.967,2.186],[0,4.081],[0,0],[0,0],[0,0],[-2.737,0],[-.696,.792],[0,1.777],[.96,1.609],[2.591,2.257],[1.296,2.328],[0,2.928],[-2.017,2.185],[-3.841,0],[-1.945,-2.184],[0,-4.079],[0,0],[0,0],[0,0],[.672,.792],[1.296,0],[0,-3.215],[-.984,-1.584],[-2.592,-2.255],[-1.249,-2.352],[0,-3.168],[2.04,-2.208],[3.888,0]],o:[[-1.969,-2.184],[0,0],[0,0],[0,0],[0,3.264],[1.342,0],[.696,-.792],[0,-2.111],[-.961,-1.607],[-3.265,-2.88],[-1.296,-2.328],[0,-3.985],[2.015,-2.184],[3.791,0],[1.944,2.185],[0,0],[0,0],[0,0],[0,-1.728],[-.672,-.792],[-2.639,0],[0,1.825],[.983,1.584],[3.313,2.88],[1.247,2.352],[0,4.129],[-2.041,2.208],[-3.841,0]],v:[[-8.856,22.644],[-11.808,13.248],[-11.808,10.369],[-4.321,10.369],[-4.321,13.825],[-.216,18.72],[2.843,17.533],[3.887,13.68],[2.448,8.1],[-2.88,2.304],[-9.72,-5.507],[-11.665,-13.391],[-8.64,-22.644],[.144,-25.919],[8.748,-22.644],[11.664,-13.248],[11.664,-11.16],[4.175,-11.16],[4.175,-13.752],[3.167,-17.532],[.215,-18.719],[-3.745,-13.896],[-2.268,-8.784],[3.095,-3.024],[9.936,4.825],[11.808,13.104],[8.748,22.609],[-.144,25.92]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1194,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.277,8.496],[-.251,-16.416],[-.396,-16.416],[-3.851,8.496]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-5.365,-25.2],[5.365,-25.2],[13.573,25.2],[5.653,25.2],[4.213,15.192],[4.213,15.336],[-4.787,15.336],[-6.227,25.2],[-13.572,25.2]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1032,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:4,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-18.972,-25.2],[-11.34,-25.2],[-7.812,13.536],[-7.668,13.536],[-3.924,-25.2],[4.716,-25.2],[8.46,13.536],[8.604,13.536],[12.132,-25.2],[18.972,-25.2],[13.86,25.2],[3.996,25.2],[.396,-8.784],[.252,-8.784],[-3.348,25.2],[-13.86,25.2]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.666666686535,.666666686535,.666666686535,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[1,1,1,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[1,1,1,1]},{t:180,s:[.666666686535,.666666686535,.666666686535,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1152,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:24,ty:4,nm:"movement Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1356,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1356,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1194,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1194,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1032,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:4,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1032,1079.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2772,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:4,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2772,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2934,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:4,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2934,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 10",np:2,cix:2,bm:0,ix:10,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2934,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 11",np:4,cix:2,bm:0,ix:11,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[2934,1241.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 12",np:2,cix:2,bm:0,ix:12,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3096,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 13",np:4,cix:2,bm:0,ix:13,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[3096,1403.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 14",np:2,cix:2,bm:0,ix:14,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[4.418,0],[0,0],[0,-4.418],[0,0],[-4.418,0],[0,0],[0,4.418],[0,0]],o:[[0,0],[-4.418,0],[0,0],[0,4.418],[0,0],[4.418,0],[0,0],[0,-4.418]],v:[[73,-81],[-73,-81],[-81,-73],[-81,73],[-73,81],[73,81],[81,73],[81,-73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,-2.206],[0,0],[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0]],o:[[2.206,0],[0,0],[0,2.206],[0,0],[-2.206,0],[0,0],[0,-2.206],[0,0]],v:[[73,-77],[77,-73],[77,73],[73,77],[-73,77],[-77,73],[-77,-73],[-73,-77]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.933333337307,.933333337307,.933333337307,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1152,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 15",np:4,cix:2,bm:0,ix:15,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,3.309],[0,0],[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0]],o:[[-3.309,0],[0,0],[0,-3.309],[0,0],[3.309,0],[0,0],[0,3.309],[0,0]],v:[[-73,79],[-79,73],[-79,-73],[-73,-79],[73,-79],[79,-73],[79,73],[73,79]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.956862807274,.956862807274,.956862807274,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30,s:[.890196084976,.482352942228,.486274510622,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:150,s:[.890196084976,.482352942228,.486274510622,1]},{t:180,s:[.956862747669,.956862747669,.956862747669,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1152,917.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 16",np:2,cix:2,bm:0,ix:16,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1231,st:0,bm:0},{ddd:0,ind:25,ty:2,nm:"keyboard",refId:"image_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1920,1080,0],ix:2},a:{a:0,k:[1920,1080,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:1231,st:0,bm:0}],markers=[],keyboardAnimation={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},MainMenu=()=>{const et=reactExports.useRef(null),_=reactExports.useRef(null),_e=reactExports.useRef(null),[tt,nt]=reactExports.useState(!1),[it,rt]=reactExports.useState(!1),st=useGame(lt=>lt.startGame),ot=useGame(lt=>lt.startLoading),at=()=>{nt(lt=>!lt)},At=lt=>{lt.key==="Enter"&&(tt?(at(),st()):(ot(),at()))};return reactExports.useEffect(()=>{const lt=et.current,gt=gsapWithCSS.fromTo(lt,{opacity:0},{opacity:1,yoyo:!0,repeat:-1,duration:1});return()=>{gt.kill()}},[]),reactExports.useEffect(()=>{const lt=_.current,gt=gsapWithCSS.fromTo(lt,{opacity:0},{opacity:1,yoyo:!0,repeat:-1,duration:1});return()=>{gt.kill()}},[tt]),reactExports.useEffect(()=>(document.addEventListener("keydown",At),()=>{document.removeEventListener("keydown",At)}),[tt]),reactExports.useEffect(()=>{const lt=setTimeout(()=>{rt(!0)},3e3);return()=>{clearTimeout(lt)}},[]),reactExports.useEffect(()=>{_e.current&&(it?_e.current.play():_e.current.pause())},[it]),jsx("div",{className:"main-screen",children:tt?jsxs(Fragment,{children:[jsx("div",{className:"keyboard-controls",children:jsx(Lottie,{animationData:keyboardAnimation,loop:!0,autoplay:!1,lottieRef:_e})}),jsxs("div",{ref:_,className:"loading-info",children:["PRESS",jsx("span",{children:" ENTER "})," TO PLAY"]})]}):jsxs(Fragment,{children:[jsx("div",{className:"background-image"}),jsx("div",{className:"menu",children:jsxs("div",{ref:et,className:"start-info",children:["PRESS",jsx("span",{children:" ENTER "})," TO START"]})})]})})},root=ReactDOM.createRoot(document.querySelector("#root"));function App(){const[et,_]=reactExports.useState(!1),_e=useDetectGPU();return console.log(_e),useGame(nt=>nt.phase)==="playing"&&!et&&_(!0),jsx(Fragment,{children:et?jsx(UserControls,{children:jsxs(Canvas,{shadows:"soft",camera:{fov:45,near:.01,far:1e3,position:[0,0,0]},children:[jsx("color",{attach:"background",args:["#fbfbfb"]}),jsx(Experience,{}),jsx(Perf,{position:"top-right",minimal:!0})]})}):jsx(MainMenu,{})})}root.render(jsx(App,{}));
//# sourceMappingURL=index-26d11b6d.js.map
